Submodule jslib contains modified content
Submodule jslib c65e7db6...009f69fc:
diff --git a/jslib/.editorconfig b/jslib/.editorconfig
index 332f3a5d..ec87dc82 100644
--- a/jslib/.editorconfig
+++ b/jslib/.editorconfig
@@ -7,9 +7,10 @@ root = true
 [*]
 end_of_line = lf
 insert_final_newline = true
+trim_trailing_whitespace = true
 
 # Set default charset
 [*.{js,ts,scss,html}]
 charset = utf-8
 indent_style = space
-indent_size = 4
+indent_size = 2
diff --git a/jslib/.git-blame-ignore-revs b/jslib/.git-blame-ignore-revs
new file mode 100644
index 00000000..b2c2a6a4
--- /dev/null
+++ b/jslib/.git-blame-ignore-revs
@@ -0,0 +1 @@
+193434461dbd9c48fe5dcbad95693470aec422ac
diff --git a/jslib/.gitattributes b/jslib/.gitattributes
new file mode 100644
index 00000000..6313b56c
--- /dev/null
+++ b/jslib/.gitattributes
@@ -0,0 +1 @@
+* text=auto eol=lf
diff --git a/jslib/.github/PULL_REQUEST_TEMPLATE.md b/jslib/.github/PULL_REQUEST_TEMPLATE.md
index 83e7e640..07679862 100644
--- a/jslib/.github/PULL_REQUEST_TEMPLATE.md
+++ b/jslib/.github/PULL_REQUEST_TEMPLATE.md
@@ -1,4 +1,5 @@
 ## Type of change
+
 - [ ] Bug fix
 - [ ] New feature development
 - [ ] Tech debt (refactoring, code cleanup, dependency upgrades, etc)
@@ -6,22 +7,22 @@
 - [ ] Other
 
 ## Objective
-<!--Describe what the purpose of this PR is. For example: what bug you're fixing or what new feature you're adding-->
-
 
+<!--Describe what the purpose of this PR is. For example: what bug you're fixing or what new feature you're adding-->
 
 ## Code changes
+
 <!--Explain the changes you've made to each file or major component. This should help the reviewer understand your changes-->
 <!--Also refer to any related changes or PRs in other repositories-->
 
-* **file.ext:** Description of what was changed and why
+- **file.ext:** Description of what was changed and why
 
 ## Testing requirements
-<!--What functionality requires testing by QA? This includes testing new behavior and regression testing-->
-
 
+<!--What functionality requires testing by QA? This includes testing new behavior and regression testing-->
 
 ## Before you submit
+
 - [ ] I have checked for **linting** errors (`npm run lint`) (required)
 - [ ] I have added **unit tests** where it makes sense to do so (encouraged but not required)
 - [ ] This change requires a **documentation update** (notify the documentation team)
diff --git a/jslib/.github/workflows/build.yml b/jslib/.github/workflows/build.yml
index e58289c8..ba1d31a0 100644
--- a/jslib/.github/workflows/build.yml
+++ b/jslib/.github/workflows/build.yml
@@ -20,7 +20,6 @@ jobs:
       - name: Print lines of code
         run: cloc --include-lang TypeScript,JavaScript,HTML,Sass,CSS --vcs git
 
-
   build:
     name: Build jslib
     runs-on: ${{ matrix.os }}
@@ -33,11 +32,10 @@ jobs:
       - name: Set up Node
         uses: actions/setup-node@46071b5c7a2e0c34e49c3cb8a0e792e86e18d5ea
         with:
-          node-version: '14'
+          node-version: "16"
 
-      - name: Update NPM
+      - name: Install node-gyp
         run: |
-          npm install -g npm@7
           npm install -g node-gyp
           node-gyp install $(node -v)
 
@@ -107,7 +105,7 @@ jobs:
           secrets: "devops-alerts-slack-webhook-url"
 
       - name: Notify Slack on failure
-        uses: act10ns/slack@e4e71685b9b239384b0f676a63c32367f59c2522  # v1.2.2
+        uses: act10ns/slack@e4e71685b9b239384b0f676a63c32367f59c2522 # v1.2.2
         if: failure()
         env:
           SLACK_WEBHOOK_URL: ${{ steps.retrieve-secrets.outputs.devops-alerts-slack-webhook-url }}
diff --git a/jslib/.husky/.gitignore b/jslib/.husky/.gitignore
new file mode 100644
index 00000000..31354ec1
--- /dev/null
+++ b/jslib/.husky/.gitignore
@@ -0,0 +1 @@
+_
diff --git a/jslib/.husky/pre-commit b/jslib/.husky/pre-commit
new file mode 100644
index 00000000..36af2198
--- /dev/null
+++ b/jslib/.husky/pre-commit
@@ -0,0 +1,4 @@
+#!/bin/sh
+. "$(dirname "$0")/_/husky.sh"
+
+npx lint-staged
diff --git a/jslib/.prettierignore b/jslib/.prettierignore
new file mode 100644
index 00000000..2d0a1ff5
--- /dev/null
+++ b/jslib/.prettierignore
@@ -0,0 +1,5 @@
+# Build directories
+dist
+
+# Github Workflows
+.github/workflows
diff --git a/jslib/.prettierrc.json b/jslib/.prettierrc.json
new file mode 100644
index 00000000..de753c53
--- /dev/null
+++ b/jslib/.prettierrc.json
@@ -0,0 +1,3 @@
+{
+  "printWidth": 100
+}
diff --git a/jslib/.vscode/launch.json b/jslib/.vscode/launch.json
index d9b0460f..e43e2c72 100644
--- a/jslib/.vscode/launch.json
+++ b/jslib/.vscode/launch.json
@@ -1,18 +1,16 @@
 {
-    // Use IntelliSense to learn about possible attributes.
-    // Hover to view descriptions of existing attributes.
-    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
-    "version": "0.2.0",
-    "configurations": [
-        {
-            "type": "node",
-            "request": "launch",
-            "name": "Jasmine Individual Test",
-            "program": "${workspaceRoot}\\node_modules\\jasmine\\bin\\jasmine.js",
-            "preLaunchTask": "npm run build",
-            "args": [ 
-                "${workspaceFolder}/dist\\spec\\node\\services\\nodeCryptoFunction.service.spec.js" 
-            ]
-        }
-    ]
-}
\ No newline at end of file
+  // Use IntelliSense to learn about possible attributes.
+  // Hover to view descriptions of existing attributes.
+  // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
+  "version": "0.2.0",
+  "configurations": [
+    {
+      "type": "node",
+      "request": "launch",
+      "name": "Jasmine Individual Test",
+      "program": "${workspaceRoot}\\node_modules\\jasmine\\bin\\jasmine.js",
+      "preLaunchTask": "npm run build",
+      "args": ["${workspaceFolder}/dist\\spec\\node\\services\\nodeCryptoFunction.service.spec.js"]
+    }
+  ]
+}
diff --git a/jslib/.vscode/tasks.json b/jslib/.vscode/tasks.json
index db998c99..924fe71b 100644
--- a/jslib/.vscode/tasks.json
+++ b/jslib/.vscode/tasks.json
@@ -1,12 +1,12 @@
 {
-    // See https://go.microsoft.com/fwlink/?LinkId=733558
-    // for the documentation about the tasks.json format
-    "version": "2.0.0",
-    "tasks": [
-        {
-            "label": "npm run build",
-            "type": "shell",
-            "command": "npm run build"
-        }
-    ]
-}
\ No newline at end of file
+  // See https://go.microsoft.com/fwlink/?LinkId=733558
+  // for the documentation about the tasks.json format
+  "version": "2.0.0",
+  "tasks": [
+    {
+      "label": "npm run build",
+      "type": "shell",
+      "command": "npm run build"
+    }
+  ]
+}
diff --git a/jslib/CONTRIBUTING.md b/jslib/CONTRIBUTING.md
index 4f7780a1..5eb19060 100644
--- a/jslib/CONTRIBUTING.md
+++ b/jslib/CONTRIBUTING.md
@@ -6,15 +6,11 @@ Please visit our [Community Forums](https://community.bitwarden.com/) for genera
 
 Here is how you can get involved:
 
-* **Request a new feature:** Go to the [Feature Requests category](https://community.bitwarden.com/c/feature-requests/) of the Community Forums. Please search existing feature requests before making a new one
-  
-* **Write code for a new feature:** Make a new post in the [Github Contributions category](https://community.bitwarden.com/c/github-contributions/) of the Community Forums. Include a description of your proposed contribution, screeshots, and links to any relevant feature requests. This helps get feedback from the community and Bitwarden team members before you start writing code
-  
-* **Report a bug or submit a bugfix:** Use Github issues and pull requests
-  
-* **Write documentation:** Submit a pull request to the [Bitwarden help repository](https://github.com/bitwarden/help)
-  
-* **Help other users:** Go to the [User-to-User Support category](https://community.bitwarden.com/c/support/) on the Community Forums
+- **Request a new feature:** Go to the [Feature Requests category](https://community.bitwarden.com/c/feature-requests/) of the Community Forums. Please search existing feature requests before making a new one
+- **Write code for a new feature:** Make a new post in the [Github Contributions category](https://community.bitwarden.com/c/github-contributions/) of the Community Forums. Include a description of your proposed contribution, screeshots, and links to any relevant feature requests. This helps get feedback from the community and Bitwarden team members before you start writing code
+- **Report a bug or submit a bugfix:** Use Github issues and pull requests
+- **Write documentation:** Submit a pull request to the [Bitwarden help repository](https://github.com/bitwarden/help)
+- **Help other users:** Go to the [User-to-User Support category](https://community.bitwarden.com/c/support/) on the Community Forums
 
 ## Contributor Agreement
 
@@ -22,9 +18,9 @@ Please sign the [Contributor Agreement](https://cla-assistant.io/bitwarden/jslib
 
 ## Pull Request Guidelines
 
-* use `npm run lint` and fix any linting suggestions before submitting a pull request
-* commit any pull requests against the `master` branch
-* include a link to your Community Forums post
+- use `npm run lint` and fix any linting suggestions before submitting a pull request
+- commit any pull requests against the `master` branch
+- include a link to your Community Forums post
 
 # Introduction to jslib and git submodules
 
@@ -33,36 +29,39 @@ jslib is a repository that contains shared code for all Bitwarden Typescript/Jav
 If you haven't worked with submodules before, you should start by reading some basic guides (such as the [git scm chapter](https://git-scm.com/book/en/v2/Git-Tools-Submodules) or the [Atlassian tutorial](https://www.atlassian.com/git/tutorials/git-submodule)).
 
 # Setting up your Local Dev environment for jslib
+
 In order to easily develop local changes to jslib across each of the TypeScript/JavaScript clients, we recommend using symlinks for the submodule so that you only have to make the change once for it to be reflected across all your local repos.
 
 ## Prerequisites
+
 1. git bash or other git command line
 2. In order for this to work well, you need to use a consistent relative directory structure. Repos should be cloned in the following way:
 
-      * `./<your project(s) directory>`; we'll call this `/dev` ('cause why not)
-        * jslib - `git clone https://github.com/bitwarden/jslib.git` (/dev/jslib)
-        * web - `git clone --recurse-submodules https://github.com/bitwarden/web.git` (/dev/web)
-        * desktop - `git clone --recurse-submodules https://github.com/bitwarden/desktop.git` (/dev/desktop)
-        * browser - `git clone --recurse-submodules https://github.com/bitwarden/browser.git` (/dev/browser)
-        * cli - `git clone --recurse-submodules https://github.com/bitwarden/cli` (/dev/cli)
+   - `./<your project(s) directory>`; we'll call this `/dev` ('cause why not)
+     - jslib - `git clone https://github.com/bitwarden/jslib.git` (/dev/jslib)
+     - web - `git clone --recurse-submodules https://github.com/bitwarden/web.git` (/dev/web)
+     - desktop - `git clone --recurse-submodules https://github.com/bitwarden/desktop.git` (/dev/desktop)
+     - browser - `git clone --recurse-submodules https://github.com/bitwarden/browser.git` (/dev/browser)
+     - cli - `git clone --recurse-submodules https://github.com/bitwarden/cli` (/dev/cli)
 
-    You should notice web, desktop, browser and cli each reference jslib as a git submodule. If you've already cloned the repos but didn't use `--recurse-submodules` then you'll need to init the submodule with `npm run sub:init`.
+   You should notice web, desktop, browser and cli each reference jslib as a git submodule. If you've already cloned the repos but didn't use `--recurse-submodules` then you'll need to init the submodule with `npm run sub:init`.
 
 ## Configure Symlinks
+
 Using `git clone` will make symlinks added to your repo be seen by git as plain text file paths. We need to prevent that. In the project root run, `git config core.symlinks true`.
 
 For each project other than jslib, run the following:
 
-* For macOS/Linux: `npm run symlink:mac`
-* For Windows: `npm run symlink:win`
+- For macOS/Linux: `npm run symlink:mac`
+- For Windows: `npm run symlink:win`
 
 Your client repos will now be pointing to your local jslib repo. You can now make changes in jslib and they will be immediately shared by the clients (just like they will be in production).
 
 ## Committing and pushing jslib changes
 
-* You work on jslib like any other repo. Check out a new branch, make some commits, and push to remote when you're ready to submit a PR.
-* Do not commit your jslib changes in the client repo. Your changes to the client and your changes to jslib should stay completely separate.
-* When submitting a client PR that depends on a jslib PR, please include a link to the jslib PR so that the reviewer knows there are jslib changes.
+- You work on jslib like any other repo. Check out a new branch, make some commits, and push to remote when you're ready to submit a PR.
+- Do not commit your jslib changes in the client repo. Your changes to the client and your changes to jslib should stay completely separate.
+- When submitting a client PR that depends on a jslib PR, please include a link to the jslib PR so that the reviewer knows there are jslib changes.
 
 ### Updating jslib on a feature branch
 
@@ -70,8 +69,8 @@ If you've submitted a client PR and a jslib PR, your jslib PR will be approved a
 
 1. If you've symlinked the client's jslib directory following the steps above, you'll need to delete that symlink and then run `npm run sub:init`.
 2. Update the jslib submodule:
-   * if you're working on your own fork, run `git submodule update --remote --reference upstream`.
-   * if you're working on a branch on the official repo, run `npm run sub:update`
+   - if you're working on your own fork, run `git submodule update --remote --reference upstream`.
+   - if you're working on a branch on the official repo, run `npm run sub:update`
 3. To check you've done this correctly, you can `cd` into your jslib directory and run `git log`. You should see your recent changes in the log. This will also show you the most recent commit hash, which should match the most recent commit hash on [Github](https://github.com/bitwarden/jslib).
 4. Add your changes: `git add jslib`
 5. Commit your changes: `git commit -m "update jslib version"`
@@ -89,7 +88,8 @@ If you've made changes to jslib without needing to make any changes to the clien
 4. Create a new PR to the client repo. Please include a link to your jslib PR so that reviewers know why you're updating jslib.
 
 ## Merge Conflicts
-At times when you need to perform a `git merge master` into your feature or local branch, and there are conflicting version references to the *jslib* repo from your other clients, you will not be able to use the traditional merge or stage functions you would normally use for a file.
+
+At times when you need to perform a `git merge master` into your feature or local branch, and there are conflicting version references to the _jslib_ repo from your other clients, you will not be able to use the traditional merge or stage functions you would normally use for a file.
 
 To resolve you must use either `git reset` or update the index directly using `git update-index`. You can use (depending on whether you have symlink'd jslib) one of the following:
 
diff --git a/jslib/README.md b/jslib/README.md
index 2dca3256..ce5cb1f1 100644
--- a/jslib/README.md
+++ b/jslib/README.md
@@ -5,13 +5,34 @@
 Common code referenced across Bitwarden JavaScript projects.
 
 ## Requirements
-* [Node.js](https://nodejs.org) v14.17 or greater
-* NPM v7
-* Git
-* node-gyp
+
+- [Node.js](https://nodejs.org) v16.13.1 or greater
+- NPM v8
+- Git
+- node-gyp
 
 ### Windows
 
-* *Microsoft Build Tools 2015* in Visual Studio Installer
-* [Windows 10 SDK 17134](https://developer.microsoft.com/en-us/windows/downloads/sdk-archive/)
-either by downloading it seperately or through the Visual Studio Installer.
+- _Microsoft Build Tools 2015_ in Visual Studio Installer
+- [Windows 10 SDK 17134](https://developer.microsoft.com/en-us/windows/downloads/sdk-archive/)
+  either by downloading it seperately or through the Visual Studio Installer.
+
+## Prettier
+
+We recently migrated to using Prettier as code formatter. All previous branches will need to updated to avoid large merge conflicts using the following steps:
+
+1. Check out your local Branch
+2. Run `git merge 8b2dfc6cdcb8ff5b604364c2ea6d343473aee7cd`
+3. Resolve any merge conflicts, commit.
+4. Run `npm run prettier`
+5. Commit
+6. Run `git merge -Xours 193434461dbd9c48fe5dcbad95693470aec422ac`
+7. Push
+
+### Git blame
+
+We also recommend that you configure git to ignore the prettier revision using:
+
+```bash
+git config blame.ignoreRevsFile .git-blame-ignore-revs
+```
diff --git a/jslib/SECURITY.md b/jslib/SECURITY.md
index ef94f0b4..7a055501 100644
--- a/jslib/SECURITY.md
+++ b/jslib/SECURITY.md
@@ -7,7 +7,7 @@ notify us. We welcome working with you to resolve the issue promptly. Thanks in
 - Let us know as soon as possible upon discovery of a potential security issue, and we'll make every
   effort to quickly resolve the issue.
 - Provide us a reasonable amount of time to resolve the issue before any disclosure to the public or a
-  third-party. We may publicly disclose the issue before resolving it, if appropriate. 
+  third-party. We may publicly disclose the issue before resolving it, if appropriate.
 - Make a good faith effort to avoid privacy violations, destruction of data, and interruption or
   degradation of our service. Only interact with accounts you own or with explicit permission of the
   account holder.
diff --git a/jslib/angular/package-lock.json b/jslib/angular/package-lock.json
index 8bc77098..405539ab 100644
--- a/jslib/angular/package-lock.json
+++ b/jslib/angular/package-lock.json
@@ -9,25 +9,25 @@
       "version": "0.0.0",
       "license": "GPL-3.0",
       "dependencies": {
-        "@angular/animations": "^11.2.11",
-        "@angular/cdk": "^11.2.10",
-        "@angular/common": "^11.2.11",
-        "@angular/compiler": "^11.2.11",
-        "@angular/core": "^11.2.11",
-        "@angular/forms": "^11.2.11",
-        "@angular/platform-browser": "^11.2.11",
-        "@angular/platform-browser-dynamic": "^11.2.11",
-        "@angular/router": "^11.2.11",
+        "@angular/animations": "^12.2.13",
+        "@angular/cdk": "^12.2.13",
+        "@angular/common": "^12.2.13",
+        "@angular/compiler": "^12.2.13",
+        "@angular/core": "^12.2.13",
+        "@angular/forms": "^12.2.13",
+        "@angular/platform-browser": "^12.2.13",
+        "@angular/platform-browser-dynamic": "^12.2.13",
+        "@angular/router": "^12.2.13",
         "@bitwarden/jslib-common": "file:../common",
         "duo_web_sdk": "git+https://github.com/duosecurity/duo_web_sdk.git",
-        "rxjs": "6.6.7",
+        "rxjs": "^7.4.0",
         "tldjs": "^2.3.1",
         "zone.js": "0.11.4"
       },
       "devDependencies": {
         "@types/duo_web_sdk": "^2.7.1",
         "rimraf": "^3.0.2",
-        "typescript": "4.1.5"
+        "typescript": "4.3.5"
       }
     },
     "../common": {
@@ -41,7 +41,7 @@
         "lunr": "^2.3.9",
         "node-forge": "^0.10.0",
         "papaparse": "^5.3.0",
-        "rxjs": "6.6.7",
+        "rxjs": "^7.4.0",
         "tldjs": "^2.3.1",
         "zxcvbn": "^4.4.2"
       },
@@ -53,92 +53,111 @@
         "@types/tldjs": "^2.3.0",
         "@types/zxcvbn": "^4.4.1",
         "rimraf": "^3.0.2",
-        "typescript": "4.1.5"
+        "typescript": "4.3.5"
       }
     },
     "node_modules/@angular/animations": {
-      "version": "11.2.14",
-      "resolved": "https://registry.npmjs.org/@angular/animations/-/animations-11.2.14.tgz",
-      "integrity": "sha512-Heq/nNrCmb3jbkusu+BQszOecfFI/31Oxxj+CDQkqqYpBcswk6bOJLoEE472o+vmgxaXbgeflU9qbIiCQhpMFA==",
+      "version": "12.2.14",
+      "resolved": "https://registry.npmjs.org/@angular/animations/-/animations-12.2.14.tgz",
+      "integrity": "sha512-1BR5u32auVePvXNNP96DB2008V+Ku0OGqeZQl2h4XA9xzES/Zk5WllIJZXqRmWMRBVARfXsfb0RdMty9gcaVjA==",
       "dependencies": {
-        "tslib": "^2.0.0"
+        "tslib": "^2.2.0"
+      },
+      "engines": {
+        "node": "^12.14.1 || >=14.0.0"
       },
       "peerDependencies": {
-        "@angular/core": "11.2.14"
+        "@angular/core": "12.2.14"
       }
     },
     "node_modules/@angular/cdk": {
-      "version": "11.2.13",
-      "resolved": "https://registry.npmjs.org/@angular/cdk/-/cdk-11.2.13.tgz",
-      "integrity": "sha512-FkE4iCwoLbQxLDUOjV1I7M/6hmpyb7erAjEdWgch7nGRNxF1hqX5Bqf1lvLFKPNCbx5NRI5K7YVAdIUQUR8vug==",
+      "version": "12.2.13",
+      "resolved": "https://registry.npmjs.org/@angular/cdk/-/cdk-12.2.13.tgz",
+      "integrity": "sha512-zSKRhECyFqhingIeyRInIyTvYErt4gWo+x5DQr0b7YLUbU8DZSwWnG4w76Ke2s4U8T7ry1jpJBHoX/e8YBpGMg==",
       "dependencies": {
-        "tslib": "^2.0.0"
+        "tslib": "^2.2.0"
       },
       "optionalDependencies": {
         "parse5": "^5.0.0"
       },
       "peerDependencies": {
-        "@angular/common": "^11.0.0 || ^12.0.0-0",
-        "@angular/core": "^11.0.0 || ^12.0.0-0"
+        "@angular/common": "^12.0.0 || ^13.0.0-0",
+        "@angular/core": "^12.0.0 || ^13.0.0-0",
+        "rxjs": "^6.5.3 || ^7.0.0"
       }
     },
     "node_modules/@angular/common": {
-      "version": "11.2.14",
-      "resolved": "https://registry.npmjs.org/@angular/common/-/common-11.2.14.tgz",
-      "integrity": "sha512-ZSLV/3j7eCTyLf/8g4yBFLWySjiLz3vLJAGWscYoUpnJWMnug1VRu6zoF/COxCbtORgE+Wz6K0uhfS6MziBGVw==",
+      "version": "12.2.14",
+      "resolved": "https://registry.npmjs.org/@angular/common/-/common-12.2.14.tgz",
+      "integrity": "sha512-ffYUYdwZETmFJw0AcWY30WsaWBhJxj/zSmFXWjgEGEGZH56zwbbNwfMZOYZ1jz4haAVxGu+TdXsOl2yMGzN7jQ==",
       "dependencies": {
-        "tslib": "^2.0.0"
+        "tslib": "^2.2.0"
+      },
+      "engines": {
+        "node": "^12.14.1 || >=14.0.0"
       },
       "peerDependencies": {
-        "@angular/core": "11.2.14",
-        "rxjs": "^6.5.3"
+        "@angular/core": "12.2.14",
+        "rxjs": "^6.5.3 || ^7.0.0"
       }
     },
     "node_modules/@angular/compiler": {
-      "version": "11.2.14",
-      "resolved": "https://registry.npmjs.org/@angular/compiler/-/compiler-11.2.14.tgz",
-      "integrity": "sha512-XBOK3HgA+/y6Cz7kOX4zcJYmgJ264XnfcbXUMU2cD7Ac+mbNhLPKohWrEiSWalfcjnpf5gRfufQrQP7lpAGu0A==",
+      "version": "12.2.14",
+      "resolved": "https://registry.npmjs.org/@angular/compiler/-/compiler-12.2.14.tgz",
+      "integrity": "sha512-dwmZi+n66IUzRFlGWu9mjXq170ZEsaDvlNLZzaPgs6vZTa4Kt7PWvIF/Y7TMvnVv/uqNG6kOhfmOkf6rfz1Gjg==",
       "dependencies": {
-        "tslib": "^2.0.0"
+        "tslib": "^2.2.0"
+      },
+      "engines": {
+        "node": "^12.14.1 || >=14.0.0"
       }
     },
     "node_modules/@angular/core": {
-      "version": "11.2.14",
-      "resolved": "https://registry.npmjs.org/@angular/core/-/core-11.2.14.tgz",
-      "integrity": "sha512-vpR4XqBGitk1Faph37CSpemwIYTmJ3pdIVNoHKP6jLonpWu+0azkchf0f7oD8/2ivj2F81opcIw0tcsy/D/5Vg==",
+      "version": "12.2.14",
+      "resolved": "https://registry.npmjs.org/@angular/core/-/core-12.2.14.tgz",
+      "integrity": "sha512-dlVk7yqUHL2R/eCmM8LsWuxhEBfzg0y1zHt0UqCuFwlCoiw+IG4HFy4OlZEUw9NUEZJSv0aDv3sWqxLkvK5vvg==",
       "dependencies": {
-        "tslib": "^2.0.0"
+        "tslib": "^2.2.0"
+      },
+      "engines": {
+        "node": "^12.14.1 || >=14.0.0"
       },
       "peerDependencies": {
-        "rxjs": "^6.5.3",
-        "zone.js": "^0.10.2 || ^0.11.3"
+        "rxjs": "^6.5.3 || ^7.0.0",
+        "zone.js": "~0.11.4"
       }
     },
     "node_modules/@angular/forms": {
-      "version": "11.2.14",
-      "resolved": "https://registry.npmjs.org/@angular/forms/-/forms-11.2.14.tgz",
-      "integrity": "sha512-4LWqY6KEIk1AZQFnk+4PJSOCamlD4tumuVN06gO4D0dZo9Cx+GcvW6pM6N0CPubRvPs3sScCnu20WT11HNWC1w==",
+      "version": "12.2.14",
+      "resolved": "https://registry.npmjs.org/@angular/forms/-/forms-12.2.14.tgz",
+      "integrity": "sha512-/9/gSJUBXVRVdRnzgJnALAQZYJATuGDMkFC9ms9DEMG4PMAhe9x4if1lJjN6noz5RAom3qNuVBNWaYAPUxlcBQ==",
       "dependencies": {
-        "tslib": "^2.0.0"
+        "tslib": "^2.2.0"
+      },
+      "engines": {
+        "node": "^12.14.1 || >=14.0.0"
       },
       "peerDependencies": {
-        "@angular/common": "11.2.14",
-        "@angular/core": "11.2.14",
-        "@angular/platform-browser": "11.2.14",
-        "rxjs": "^6.5.3"
+        "@angular/common": "12.2.14",
+        "@angular/core": "12.2.14",
+        "@angular/platform-browser": "12.2.14",
+        "rxjs": "^6.5.3 || ^7.0.0"
       }
     },
     "node_modules/@angular/platform-browser": {
-      "version": "11.2.14",
-      "resolved": "https://registry.npmjs.org/@angular/platform-browser/-/platform-browser-11.2.14.tgz",
-      "integrity": "sha512-fb7b7ss/gRoP8wLAN17W62leMgjynuyjEPU2eUoAAazsG9f2cgM+z3rK29GYncDVyYQxZUZYnjSqvL6GSXx86A==",
+      "version": "12.2.14",
+      "resolved": "https://registry.npmjs.org/@angular/platform-browser/-/platform-browser-12.2.14.tgz",
+      "integrity": "sha512-fWcE2rnJ3ZCISa1oPfsIDV7FBZBoLFEdDuMXAiDYqDPKvF/E5U5nHrS+K4SlLAi094bMobtTOReNWl/Ienniyw==",
       "dependencies": {
-        "tslib": "^2.0.0"
+        "tslib": "^2.2.0"
+      },
+      "engines": {
+        "node": "^12.14.1 || >=14.0.0"
       },
       "peerDependencies": {
-        "@angular/animations": "11.2.14",
-        "@angular/common": "11.2.14",
-        "@angular/core": "11.2.14"
+        "@angular/animations": "12.2.14",
+        "@angular/common": "12.2.14",
+        "@angular/core": "12.2.14"
       },
       "peerDependenciesMeta": {
         "@angular/animations": {
@@ -147,31 +166,37 @@
       }
     },
     "node_modules/@angular/platform-browser-dynamic": {
-      "version": "11.2.14",
-      "resolved": "https://registry.npmjs.org/@angular/platform-browser-dynamic/-/platform-browser-dynamic-11.2.14.tgz",
-      "integrity": "sha512-TWTPdFs6iBBcp+/YMsgCRQwdHpWGq8KjeJDJ2tfatGgBD3Gqt2YaHOMST1zPW6RkrmupytTejuVqXzeaKWFxuw==",
+      "version": "12.2.14",
+      "resolved": "https://registry.npmjs.org/@angular/platform-browser-dynamic/-/platform-browser-dynamic-12.2.14.tgz",
+      "integrity": "sha512-0NPF7mS91Tct8rBmOLZPmnLSuS4kbLHXo6eTgrg80OC0vlzBiQwGDVW4X3KncCoX9CpevaGJCdSMc+uPNsFOUQ==",
       "dependencies": {
-        "tslib": "^2.0.0"
+        "tslib": "^2.2.0"
+      },
+      "engines": {
+        "node": "^12.14.1 || >=14.0.0"
       },
       "peerDependencies": {
-        "@angular/common": "11.2.14",
-        "@angular/compiler": "11.2.14",
-        "@angular/core": "11.2.14",
-        "@angular/platform-browser": "11.2.14"
+        "@angular/common": "12.2.14",
+        "@angular/compiler": "12.2.14",
+        "@angular/core": "12.2.14",
+        "@angular/platform-browser": "12.2.14"
       }
     },
     "node_modules/@angular/router": {
-      "version": "11.2.14",
-      "resolved": "https://registry.npmjs.org/@angular/router/-/router-11.2.14.tgz",
-      "integrity": "sha512-3aYBmj+zrEL9yf/ntIQxHIYaWShZOBKP3U07X2mX+TPMpGlvHDnR7L6bWhQVZwewzMMz7YVR16ldg50IFuAlfA==",
+      "version": "12.2.14",
+      "resolved": "https://registry.npmjs.org/@angular/router/-/router-12.2.14.tgz",
+      "integrity": "sha512-yP5grSnqBvc4vNhtYdcxDgDYIebUKs5f0xyFkUJM5030UnQ0CV45tBsSxHMkQbPZucIfOuxpRy8xy5+4GizuwQ==",
       "dependencies": {
-        "tslib": "^2.0.0"
+        "tslib": "^2.2.0"
+      },
+      "engines": {
+        "node": "^12.14.1 || >=14.0.0"
       },
       "peerDependencies": {
-        "@angular/common": "11.2.14",
-        "@angular/core": "11.2.14",
-        "@angular/platform-browser": "11.2.14",
-        "rxjs": "^6.5.3"
+        "@angular/common": "12.2.14",
+        "@angular/core": "12.2.14",
+        "@angular/platform-browser": "12.2.14",
+        "rxjs": "^6.5.3 || ^7.0.0"
       }
     },
     "node_modules/@bitwarden/jslib-common": {
@@ -310,20 +335,17 @@
       }
     },
     "node_modules/rxjs": {
-      "version": "6.6.7",
-      "resolved": "https://registry.npmjs.org/rxjs/-/rxjs-6.6.7.tgz",
-      "integrity": "sha512-hTdwr+7yYNIT5n4AMYp85KA6yw2Va0FLa3Rguvbpa4W3I5xynaBZo41cM3XM+4Q6fRMj3sBYIR1VAmZMXYJvRQ==",
+      "version": "7.4.0",
+      "resolved": "https://registry.npmjs.org/rxjs/-/rxjs-7.4.0.tgz",
+      "integrity": "sha512-7SQDi7xeTMCJpqViXh8gL/lebcwlp3d831F05+9B44A4B0WfsEwUQHR64gsH1kvJ+Ep/J9K2+n1hVl1CsGN23w==",
       "dependencies": {
-        "tslib": "^1.9.0"
-      },
-      "engines": {
-        "npm": ">=2.0.0"
+        "tslib": "~2.1.0"
       }
     },
     "node_modules/rxjs/node_modules/tslib": {
-      "version": "1.14.1",
-      "resolved": "https://registry.npmjs.org/tslib/-/tslib-1.14.1.tgz",
-      "integrity": "sha512-Xni35NKzjgMrwevysHTCArtLDpPvye8zV/0E4EyYn43P7/7qvQwPh9BGkHewbMulVntbigmcT7rdX3BNo9wRJg=="
+      "version": "2.1.0",
+      "resolved": "https://registry.npmjs.org/tslib/-/tslib-2.1.0.tgz",
+      "integrity": "sha512-hcVC3wYEziELGGmEEXue7D75zbwIIVUMWAVbHItGPx0ziyXxrOMQx4rQEVEV45Ut/1IotuEvwqPopzIOkDMf0A=="
     },
     "node_modules/tldjs": {
       "version": "2.3.1",
@@ -343,9 +365,9 @@
       "integrity": "sha512-77EbyPPpMz+FRFRuAFlWMtmgUWGe9UOG2Z25NqCwiIjRhOf5iKGuzSe5P2w1laq+FkRy4p+PCuVkJSGkzTEKVw=="
     },
     "node_modules/typescript": {
-      "version": "4.1.5",
-      "resolved": "https://registry.npmjs.org/typescript/-/typescript-4.1.5.tgz",
-      "integrity": "sha512-6OSu9PTIzmn9TCDiovULTnET6BgXtDYL4Gg4szY+cGsc3JP1dQL8qvE8kShTRx1NIw4Q9IBHlwODjkjWEtMUyA==",
+      "version": "4.3.5",
+      "resolved": "https://registry.npmjs.org/typescript/-/typescript-4.3.5.tgz",
+      "integrity": "sha512-DqQgihaQ9cUrskJo9kIyW/+g0Vxsk8cDtZ52a3NGh0YNTfpUSArXSohyUGnvbPazEPLu398C0UxmKSOrPumUzA==",
       "dev": true,
       "bin": {
         "tsc": "bin/tsc",
@@ -372,76 +394,76 @@
   },
   "dependencies": {
     "@angular/animations": {
-      "version": "11.2.14",
-      "resolved": "https://registry.npmjs.org/@angular/animations/-/animations-11.2.14.tgz",
-      "integrity": "sha512-Heq/nNrCmb3jbkusu+BQszOecfFI/31Oxxj+CDQkqqYpBcswk6bOJLoEE472o+vmgxaXbgeflU9qbIiCQhpMFA==",
+      "version": "12.2.14",
+      "resolved": "https://registry.npmjs.org/@angular/animations/-/animations-12.2.14.tgz",
+      "integrity": "sha512-1BR5u32auVePvXNNP96DB2008V+Ku0OGqeZQl2h4XA9xzES/Zk5WllIJZXqRmWMRBVARfXsfb0RdMty9gcaVjA==",
       "requires": {
-        "tslib": "^2.0.0"
+        "tslib": "^2.2.0"
       }
     },
     "@angular/cdk": {
-      "version": "11.2.13",
-      "resolved": "https://registry.npmjs.org/@angular/cdk/-/cdk-11.2.13.tgz",
-      "integrity": "sha512-FkE4iCwoLbQxLDUOjV1I7M/6hmpyb7erAjEdWgch7nGRNxF1hqX5Bqf1lvLFKPNCbx5NRI5K7YVAdIUQUR8vug==",
+      "version": "12.2.13",
+      "resolved": "https://registry.npmjs.org/@angular/cdk/-/cdk-12.2.13.tgz",
+      "integrity": "sha512-zSKRhECyFqhingIeyRInIyTvYErt4gWo+x5DQr0b7YLUbU8DZSwWnG4w76Ke2s4U8T7ry1jpJBHoX/e8YBpGMg==",
       "requires": {
         "parse5": "^5.0.0",
-        "tslib": "^2.0.0"
+        "tslib": "^2.2.0"
       }
     },
     "@angular/common": {
-      "version": "11.2.14",
-      "resolved": "https://registry.npmjs.org/@angular/common/-/common-11.2.14.tgz",
-      "integrity": "sha512-ZSLV/3j7eCTyLf/8g4yBFLWySjiLz3vLJAGWscYoUpnJWMnug1VRu6zoF/COxCbtORgE+Wz6K0uhfS6MziBGVw==",
+      "version": "12.2.14",
+      "resolved": "https://registry.npmjs.org/@angular/common/-/common-12.2.14.tgz",
+      "integrity": "sha512-ffYUYdwZETmFJw0AcWY30WsaWBhJxj/zSmFXWjgEGEGZH56zwbbNwfMZOYZ1jz4haAVxGu+TdXsOl2yMGzN7jQ==",
       "requires": {
-        "tslib": "^2.0.0"
+        "tslib": "^2.2.0"
       }
     },
     "@angular/compiler": {
-      "version": "11.2.14",
-      "resolved": "https://registry.npmjs.org/@angular/compiler/-/compiler-11.2.14.tgz",
-      "integrity": "sha512-XBOK3HgA+/y6Cz7kOX4zcJYmgJ264XnfcbXUMU2cD7Ac+mbNhLPKohWrEiSWalfcjnpf5gRfufQrQP7lpAGu0A==",
+      "version": "12.2.14",
+      "resolved": "https://registry.npmjs.org/@angular/compiler/-/compiler-12.2.14.tgz",
+      "integrity": "sha512-dwmZi+n66IUzRFlGWu9mjXq170ZEsaDvlNLZzaPgs6vZTa4Kt7PWvIF/Y7TMvnVv/uqNG6kOhfmOkf6rfz1Gjg==",
       "requires": {
-        "tslib": "^2.0.0"
+        "tslib": "^2.2.0"
       }
     },
     "@angular/core": {
-      "version": "11.2.14",
-      "resolved": "https://registry.npmjs.org/@angular/core/-/core-11.2.14.tgz",
-      "integrity": "sha512-vpR4XqBGitk1Faph37CSpemwIYTmJ3pdIVNoHKP6jLonpWu+0azkchf0f7oD8/2ivj2F81opcIw0tcsy/D/5Vg==",
+      "version": "12.2.14",
+      "resolved": "https://registry.npmjs.org/@angular/core/-/core-12.2.14.tgz",
+      "integrity": "sha512-dlVk7yqUHL2R/eCmM8LsWuxhEBfzg0y1zHt0UqCuFwlCoiw+IG4HFy4OlZEUw9NUEZJSv0aDv3sWqxLkvK5vvg==",
       "requires": {
-        "tslib": "^2.0.0"
+        "tslib": "^2.2.0"
       }
     },
     "@angular/forms": {
-      "version": "11.2.14",
-      "resolved": "https://registry.npmjs.org/@angular/forms/-/forms-11.2.14.tgz",
-      "integrity": "sha512-4LWqY6KEIk1AZQFnk+4PJSOCamlD4tumuVN06gO4D0dZo9Cx+GcvW6pM6N0CPubRvPs3sScCnu20WT11HNWC1w==",
+      "version": "12.2.14",
+      "resolved": "https://registry.npmjs.org/@angular/forms/-/forms-12.2.14.tgz",
+      "integrity": "sha512-/9/gSJUBXVRVdRnzgJnALAQZYJATuGDMkFC9ms9DEMG4PMAhe9x4if1lJjN6noz5RAom3qNuVBNWaYAPUxlcBQ==",
       "requires": {
-        "tslib": "^2.0.0"
+        "tslib": "^2.2.0"
       }
     },
     "@angular/platform-browser": {
-      "version": "11.2.14",
-      "resolved": "https://registry.npmjs.org/@angular/platform-browser/-/platform-browser-11.2.14.tgz",
-      "integrity": "sha512-fb7b7ss/gRoP8wLAN17W62leMgjynuyjEPU2eUoAAazsG9f2cgM+z3rK29GYncDVyYQxZUZYnjSqvL6GSXx86A==",
+      "version": "12.2.14",
+      "resolved": "https://registry.npmjs.org/@angular/platform-browser/-/platform-browser-12.2.14.tgz",
+      "integrity": "sha512-fWcE2rnJ3ZCISa1oPfsIDV7FBZBoLFEdDuMXAiDYqDPKvF/E5U5nHrS+K4SlLAi094bMobtTOReNWl/Ienniyw==",
       "requires": {
-        "tslib": "^2.0.0"
+        "tslib": "^2.2.0"
       }
     },
     "@angular/platform-browser-dynamic": {
-      "version": "11.2.14",
-      "resolved": "https://registry.npmjs.org/@angular/platform-browser-dynamic/-/platform-browser-dynamic-11.2.14.tgz",
-      "integrity": "sha512-TWTPdFs6iBBcp+/YMsgCRQwdHpWGq8KjeJDJ2tfatGgBD3Gqt2YaHOMST1zPW6RkrmupytTejuVqXzeaKWFxuw==",
+      "version": "12.2.14",
+      "resolved": "https://registry.npmjs.org/@angular/platform-browser-dynamic/-/platform-browser-dynamic-12.2.14.tgz",
+      "integrity": "sha512-0NPF7mS91Tct8rBmOLZPmnLSuS4kbLHXo6eTgrg80OC0vlzBiQwGDVW4X3KncCoX9CpevaGJCdSMc+uPNsFOUQ==",
       "requires": {
-        "tslib": "^2.0.0"
+        "tslib": "^2.2.0"
       }
     },
     "@angular/router": {
-      "version": "11.2.14",
-      "resolved": "https://registry.npmjs.org/@angular/router/-/router-11.2.14.tgz",
-      "integrity": "sha512-3aYBmj+zrEL9yf/ntIQxHIYaWShZOBKP3U07X2mX+TPMpGlvHDnR7L6bWhQVZwewzMMz7YVR16ldg50IFuAlfA==",
+      "version": "12.2.14",
+      "resolved": "https://registry.npmjs.org/@angular/router/-/router-12.2.14.tgz",
+      "integrity": "sha512-yP5grSnqBvc4vNhtYdcxDgDYIebUKs5f0xyFkUJM5030UnQ0CV45tBsSxHMkQbPZucIfOuxpRy8xy5+4GizuwQ==",
       "requires": {
-        "tslib": "^2.0.0"
+        "tslib": "^2.2.0"
       }
     },
     "@bitwarden/jslib-common": {
@@ -461,9 +483,9 @@
         "node-forge": "^0.10.0",
         "papaparse": "^5.3.0",
         "rimraf": "^3.0.2",
-        "rxjs": "6.6.7",
+        "rxjs": "^7.4.0",
         "tldjs": "^2.3.1",
-        "typescript": "4.1.5",
+        "typescript": "4.3.5",
         "zxcvbn": "^4.4.2"
       }
     },
@@ -580,17 +602,17 @@
       }
     },
     "rxjs": {
-      "version": "6.6.7",
-      "resolved": "https://registry.npmjs.org/rxjs/-/rxjs-6.6.7.tgz",
-      "integrity": "sha512-hTdwr+7yYNIT5n4AMYp85KA6yw2Va0FLa3Rguvbpa4W3I5xynaBZo41cM3XM+4Q6fRMj3sBYIR1VAmZMXYJvRQ==",
+      "version": "7.4.0",
+      "resolved": "https://registry.npmjs.org/rxjs/-/rxjs-7.4.0.tgz",
+      "integrity": "sha512-7SQDi7xeTMCJpqViXh8gL/lebcwlp3d831F05+9B44A4B0WfsEwUQHR64gsH1kvJ+Ep/J9K2+n1hVl1CsGN23w==",
       "requires": {
-        "tslib": "^1.9.0"
+        "tslib": "~2.1.0"
       },
       "dependencies": {
         "tslib": {
-          "version": "1.14.1",
-          "resolved": "https://registry.npmjs.org/tslib/-/tslib-1.14.1.tgz",
-          "integrity": "sha512-Xni35NKzjgMrwevysHTCArtLDpPvye8zV/0E4EyYn43P7/7qvQwPh9BGkHewbMulVntbigmcT7rdX3BNo9wRJg=="
+          "version": "2.1.0",
+          "resolved": "https://registry.npmjs.org/tslib/-/tslib-2.1.0.tgz",
+          "integrity": "sha512-hcVC3wYEziELGGmEEXue7D75zbwIIVUMWAVbHItGPx0ziyXxrOMQx4rQEVEV45Ut/1IotuEvwqPopzIOkDMf0A=="
         }
       }
     },
@@ -608,9 +630,9 @@
       "integrity": "sha512-77EbyPPpMz+FRFRuAFlWMtmgUWGe9UOG2Z25NqCwiIjRhOf5iKGuzSe5P2w1laq+FkRy4p+PCuVkJSGkzTEKVw=="
     },
     "typescript": {
-      "version": "4.1.5",
-      "resolved": "https://registry.npmjs.org/typescript/-/typescript-4.1.5.tgz",
-      "integrity": "sha512-6OSu9PTIzmn9TCDiovULTnET6BgXtDYL4Gg4szY+cGsc3JP1dQL8qvE8kShTRx1NIw4Q9IBHlwODjkjWEtMUyA==",
+      "version": "4.3.5",
+      "resolved": "https://registry.npmjs.org/typescript/-/typescript-4.3.5.tgz",
+      "integrity": "sha512-DqQgihaQ9cUrskJo9kIyW/+g0Vxsk8cDtZ52a3NGh0YNTfpUSArXSohyUGnvbPazEPLu398C0UxmKSOrPumUzA==",
       "dev": true
     },
     "wrappy": {
diff --git a/jslib/angular/package.json b/jslib/angular/package.json
index 3425171c..d1d5f64c 100644
--- a/jslib/angular/package.json
+++ b/jslib/angular/package.json
@@ -22,21 +22,21 @@
   "devDependencies": {
     "@types/duo_web_sdk": "^2.7.1",
     "rimraf": "^3.0.2",
-    "typescript": "4.1.5"
+    "typescript": "4.3.5"
   },
   "dependencies": {
-    "@angular/animations": "^11.2.11",
-    "@angular/cdk": "^11.2.10",
-    "@angular/common": "^11.2.11",
-    "@angular/compiler": "^11.2.11",
-    "@angular/core": "^11.2.11",
-    "@angular/forms": "^11.2.11",
-    "@angular/platform-browser": "^11.2.11",
-    "@angular/platform-browser-dynamic": "^11.2.11",
-    "@angular/router": "^11.2.11",
+    "@angular/animations": "^12.2.13",
+    "@angular/cdk": "^12.2.13",
+    "@angular/common": "^12.2.13",
+    "@angular/compiler": "^12.2.13",
+    "@angular/core": "^12.2.13",
+    "@angular/forms": "^12.2.13",
+    "@angular/platform-browser": "^12.2.13",
+    "@angular/platform-browser-dynamic": "^12.2.13",
+    "@angular/router": "^12.2.13",
     "@bitwarden/jslib-common": "file:../common",
     "duo_web_sdk": "git+https://github.com/duosecurity/duo_web_sdk.git",
-    "rxjs": "6.6.7",
+    "rxjs": "^7.4.0",
     "tldjs": "^2.3.1",
     "zone.js": "0.11.4"
   }
diff --git a/jslib/angular/src/components/add-edit-custom-fields.component.ts b/jslib/angular/src/components/add-edit-custom-fields.component.ts
index 71040ac4..4107bc27 100644
--- a/jslib/angular/src/components/add-edit-custom-fields.component.ts
+++ b/jslib/angular/src/components/add-edit-custom-fields.component.ts
@@ -1,124 +1,120 @@
-import {
-    Directive,
-    Input,
-    OnChanges,
-    SimpleChanges,
-} from '@angular/core';
+import { Directive, Input, OnChanges, SimpleChanges } from "@angular/core";
 
-import {
-    CdkDragDrop,
-    moveItemInArray,
-} from '@angular/cdk/drag-drop';
+import { CdkDragDrop, moveItemInArray } from "@angular/cdk/drag-drop";
 
-import { EventService } from 'jslib-common/abstractions/event.service';
-import { I18nService } from 'jslib-common/abstractions/i18n.service';
+import { EventService } from "jslib-common/abstractions/event.service";
+import { I18nService } from "jslib-common/abstractions/i18n.service";
 
-import { CipherView } from 'jslib-common/models/view/cipherView';
-import { FieldView } from 'jslib-common/models/view/fieldView';
+import { CipherView } from "jslib-common/models/view/cipherView";
+import { FieldView } from "jslib-common/models/view/fieldView";
 
-import { CipherType } from 'jslib-common/enums/cipherType';
-import { EventType } from 'jslib-common/enums/eventType';
-import { FieldType } from 'jslib-common/enums/fieldType';
+import { CipherType } from "jslib-common/enums/cipherType";
+import { EventType } from "jslib-common/enums/eventType";
+import { FieldType } from "jslib-common/enums/fieldType";
 
-import { Utils } from 'jslib-common/misc/utils';
+import { Utils } from "jslib-common/misc/utils";
 
 @Directive()
 export class AddEditCustomFieldsComponent implements OnChanges {
-    @Input() cipher: CipherView;
-    @Input() thisCipherType: CipherType;
-    @Input() editMode: boolean;
-
-    addFieldType: FieldType = FieldType.Text;
-    addFieldTypeOptions: any[];
-    addFieldLinkedTypeOption: any;
-    linkedFieldOptions: any[] = [];
-
-    cipherType = CipherType;
-    fieldType = FieldType;
-    eventType = EventType;
-
-    constructor(private i18nService: I18nService, private eventService: EventService) {
-        this.addFieldTypeOptions = [
-            { name: i18nService.t('cfTypeText'), value: FieldType.Text },
-            { name: i18nService.t('cfTypeHidden'), value: FieldType.Hidden },
-            { name: i18nService.t('cfTypeBoolean'), value: FieldType.Boolean },
-        ];
-        this.addFieldLinkedTypeOption = { name: this.i18nService.t('cfTypeLinked'), value: FieldType.Linked };
+  @Input() cipher: CipherView;
+  @Input() thisCipherType: CipherType;
+  @Input() editMode: boolean;
+
+  addFieldType: FieldType = FieldType.Text;
+  addFieldTypeOptions: any[];
+  addFieldLinkedTypeOption: any;
+  linkedFieldOptions: any[] = [];
+
+  cipherType = CipherType;
+  fieldType = FieldType;
+  eventType = EventType;
+
+  constructor(private i18nService: I18nService, private eventService: EventService) {
+    this.addFieldTypeOptions = [
+      { name: i18nService.t("cfTypeText"), value: FieldType.Text },
+      { name: i18nService.t("cfTypeHidden"), value: FieldType.Hidden },
+      { name: i18nService.t("cfTypeBoolean"), value: FieldType.Boolean },
+    ];
+    this.addFieldLinkedTypeOption = {
+      name: this.i18nService.t("cfTypeLinked"),
+      value: FieldType.Linked,
+    };
+  }
+
+  ngOnChanges(changes: SimpleChanges) {
+    if (changes.thisCipherType != null) {
+      this.setLinkedFieldOptions();
+
+      if (!changes.thisCipherType.firstChange) {
+        this.resetCipherLinkedFields();
+      }
     }
+  }
 
-    ngOnChanges(changes: SimpleChanges) {
-        if (changes.thisCipherType != null) {
-            this.setLinkedFieldOptions();
-
-            if (!changes.thisCipherType.firstChange) {
-                this.resetCipherLinkedFields();
-            }
-        }
+  addField() {
+    if (this.cipher.fields == null) {
+      this.cipher.fields = [];
     }
 
-    addField() {
-        if (this.cipher.fields == null) {
-            this.cipher.fields = [];
-        }
-
-        const f = new FieldView();
-        f.type = this.addFieldType;
-        f.newField = true;
+    const f = new FieldView();
+    f.type = this.addFieldType;
+    f.newField = true;
 
-        if (f.type === FieldType.Linked) {
-            f.linkedId = this.linkedFieldOptions[0].value;
-        }
-
-        this.cipher.fields.push(f);
+    if (f.type === FieldType.Linked) {
+      f.linkedId = this.linkedFieldOptions[0].value;
     }
 
-    removeField(field: FieldView) {
-        const i = this.cipher.fields.indexOf(field);
-        if (i > -1) {
-            this.cipher.fields.splice(i, 1);
-        }
-    }
+    this.cipher.fields.push(f);
+  }
 
-    toggleFieldValue(field: FieldView) {
-        const f = (field as any);
-        f.showValue = !f.showValue;
-        if (this.editMode && f.showValue) {
-            this.eventService.collect(EventType.Cipher_ClientToggledHiddenFieldVisible, this.cipher.id);
-        }
+  removeField(field: FieldView) {
+    const i = this.cipher.fields.indexOf(field);
+    if (i > -1) {
+      this.cipher.fields.splice(i, 1);
     }
+  }
 
-    trackByFunction(index: number, item: any) {
-        return index;
+  toggleFieldValue(field: FieldView) {
+    const f = field as any;
+    f.showValue = !f.showValue;
+    if (this.editMode && f.showValue) {
+      this.eventService.collect(EventType.Cipher_ClientToggledHiddenFieldVisible, this.cipher.id);
     }
+  }
 
-    drop(event: CdkDragDrop<string[]>) {
-        moveItemInArray(this.cipher.fields, event.previousIndex, event.currentIndex);
-    }
+  trackByFunction(index: number, item: any) {
+    return index;
+  }
 
-    private setLinkedFieldOptions() {
-        if (this.cipher.linkedFieldOptions == null) {
-            return;
-        }
+  drop(event: CdkDragDrop<string[]>) {
+    moveItemInArray(this.cipher.fields, event.previousIndex, event.currentIndex);
+  }
 
-        const options: any = [];
-        this.cipher.linkedFieldOptions.forEach((linkedFieldOption, id) =>
-            options.push({ name: this.i18nService.t(linkedFieldOption.i18nKey), value: id }));
-        this.linkedFieldOptions = options.sort(Utils.getSortFunction(this.i18nService, 'name'));
+  private setLinkedFieldOptions() {
+    if (this.cipher.linkedFieldOptions == null) {
+      return;
     }
 
-    private resetCipherLinkedFields() {
-        if (this.cipher.fields == null || this.cipher.fields.length === 0) {
-            return;
-        }
+    const options: any = [];
+    this.cipher.linkedFieldOptions.forEach((linkedFieldOption, id) =>
+      options.push({ name: this.i18nService.t(linkedFieldOption.i18nKey), value: id })
+    );
+    this.linkedFieldOptions = options.sort(Utils.getSortFunction(this.i18nService, "name"));
+  }
 
-        // Delete any Linked custom fields if the item type does not support them
-        if (this.cipher.linkedFieldOptions == null) {
-            this.cipher.fields = this.cipher.fields.filter(f => f.type !== FieldType.Linked);
-            return;
-        }
+  private resetCipherLinkedFields() {
+    if (this.cipher.fields == null || this.cipher.fields.length === 0) {
+      return;
+    }
 
-        this.cipher.fields
-            .filter(f => f.type === FieldType.Linked)
-            .forEach(f => f.linkedId = this.linkedFieldOptions[0].value);
+    // Delete any Linked custom fields if the item type does not support them
+    if (this.cipher.linkedFieldOptions == null) {
+      this.cipher.fields = this.cipher.fields.filter((f) => f.type !== FieldType.Linked);
+      return;
     }
+
+    this.cipher.fields
+      .filter((f) => f.type === FieldType.Linked)
+      .forEach((f) => (f.linkedId = this.linkedFieldOptions[0].value));
+  }
 }
diff --git a/jslib/angular/src/components/add-edit.component.ts b/jslib/angular/src/components/add-edit.component.ts
index 0bd4001b..4c19588c 100644
--- a/jslib/angular/src/components/add-edit.component.ts
+++ b/jslib/angular/src/components/add-edit.component.ts
@@ -1,506 +1,566 @@
-import {
-    Directive,
-    EventEmitter,
-    Input,
-    OnInit,
-    Output,
-} from '@angular/core';
-
-import { CipherRepromptType } from 'jslib-common/enums/cipherRepromptType';
-import { CipherType } from 'jslib-common/enums/cipherType';
-import { EventType } from 'jslib-common/enums/eventType';
-import { OrganizationUserStatusType } from 'jslib-common/enums/organizationUserStatusType';
-import { PolicyType } from 'jslib-common/enums/policyType';
-import { SecureNoteType } from 'jslib-common/enums/secureNoteType';
-import { UriMatchType } from 'jslib-common/enums/uriMatchType';
-
-import { AuditService } from 'jslib-common/abstractions/audit.service';
-import { CipherService } from 'jslib-common/abstractions/cipher.service';
-import { CollectionService } from 'jslib-common/abstractions/collection.service';
-import { EventService } from 'jslib-common/abstractions/event.service';
-import { FolderService } from 'jslib-common/abstractions/folder.service';
-import { I18nService } from 'jslib-common/abstractions/i18n.service';
-import { LogService } from 'jslib-common/abstractions/log.service';
-import { MessagingService } from 'jslib-common/abstractions/messaging.service';
-import { PasswordRepromptService } from 'jslib-common/abstractions/passwordReprompt.service';
-import { PlatformUtilsService } from 'jslib-common/abstractions/platformUtils.service';
-import { PolicyService } from 'jslib-common/abstractions/policy.service';
-import { StateService } from 'jslib-common/abstractions/state.service';
-import { UserService } from 'jslib-common/abstractions/user.service';
-
-import { Cipher } from 'jslib-common/models/domain/cipher';
-
-import { CardView } from 'jslib-common/models/view/cardView';
-import { CipherView } from 'jslib-common/models/view/cipherView';
-import { CollectionView } from 'jslib-common/models/view/collectionView';
-import { FolderView } from 'jslib-common/models/view/folderView';
-import { IdentityView } from 'jslib-common/models/view/identityView';
-import { LoginUriView } from 'jslib-common/models/view/loginUriView';
-import { LoginView } from 'jslib-common/models/view/loginView';
-import { SecureNoteView } from 'jslib-common/models/view/secureNoteView';
-
-import { Utils } from 'jslib-common/misc/utils';
+import { Directive, EventEmitter, Input, OnInit, Output } from "@angular/core";
+
+import { CipherRepromptType } from "jslib-common/enums/cipherRepromptType";
+import { CipherType } from "jslib-common/enums/cipherType";
+import { EventType } from "jslib-common/enums/eventType";
+import { OrganizationUserStatusType } from "jslib-common/enums/organizationUserStatusType";
+import { PolicyType } from "jslib-common/enums/policyType";
+import { SecureNoteType } from "jslib-common/enums/secureNoteType";
+import { UriMatchType } from "jslib-common/enums/uriMatchType";
+
+import { AuditService } from "jslib-common/abstractions/audit.service";
+import { CipherService } from "jslib-common/abstractions/cipher.service";
+import { CollectionService } from "jslib-common/abstractions/collection.service";
+import { EventService } from "jslib-common/abstractions/event.service";
+import { FolderService } from "jslib-common/abstractions/folder.service";
+import { I18nService } from "jslib-common/abstractions/i18n.service";
+import { LogService } from "jslib-common/abstractions/log.service";
+import { MessagingService } from "jslib-common/abstractions/messaging.service";
+import { OrganizationService } from "jslib-common/abstractions/organization.service";
+import { PasswordRepromptService } from "jslib-common/abstractions/passwordReprompt.service";
+import { PlatformUtilsService } from "jslib-common/abstractions/platformUtils.service";
+import { PolicyService } from "jslib-common/abstractions/policy.service";
+import { StateService } from "jslib-common/abstractions/state.service";
+
+import { Cipher } from "jslib-common/models/domain/cipher";
+
+import { CardView } from "jslib-common/models/view/cardView";
+import { CipherView } from "jslib-common/models/view/cipherView";
+import { CollectionView } from "jslib-common/models/view/collectionView";
+import { FolderView } from "jslib-common/models/view/folderView";
+import { IdentityView } from "jslib-common/models/view/identityView";
+import { LoginUriView } from "jslib-common/models/view/loginUriView";
+import { LoginView } from "jslib-common/models/view/loginView";
+import { SecureNoteView } from "jslib-common/models/view/secureNoteView";
+
+import { Utils } from "jslib-common/misc/utils";
 
 @Directive()
 export class AddEditComponent implements OnInit {
-    @Input() cloneMode: boolean = false;
-    @Input() folderId: string = null;
-    @Input() cipherId: string;
-    @Input() type: CipherType;
-    @Input() collectionIds: string[];
-    @Input() organizationId: string = null;
-    @Output() onSavedCipher = new EventEmitter<CipherView>();
-    @Output() onDeletedCipher = new EventEmitter<CipherView>();
-    @Output() onRestoredCipher = new EventEmitter<CipherView>();
-    @Output() onCancelled = new EventEmitter<CipherView>();
-    @Output() onEditAttachments = new EventEmitter<CipherView>();
-    @Output() onShareCipher = new EventEmitter<CipherView>();
-    @Output() onEditCollections = new EventEmitter<CipherView>();
-    @Output() onGeneratePassword = new EventEmitter();
-
-    editMode: boolean = false;
-    cipher: CipherView;
-    folders: FolderView[];
-    collections: CollectionView[] = [];
-    title: string;
-    formPromise: Promise<any>;
-    deletePromise: Promise<any>;
-    restorePromise: Promise<any>;
-    checkPasswordPromise: Promise<number>;
-    showPassword: boolean = false;
-    showCardNumber: boolean = false;
-    showCardCode: boolean = false;
-    cipherType = CipherType;
-    typeOptions: any[];
-    cardBrandOptions: any[];
-    cardExpMonthOptions: any[];
-    identityTitleOptions: any[];
-    uriMatchOptions: any[];
-    ownershipOptions: any[] = [];
-    autofillOnPageLoadOptions: any[];
-    currentDate = new Date();
-    allowPersonal = true;
-    reprompt: boolean = false;
-    canUseReprompt: boolean = true;
-
-    protected writeableCollections: CollectionView[];
-    private previousCipherId: string;
-
-    constructor(protected cipherService: CipherService, protected folderService: FolderService,
-        protected i18nService: I18nService, protected platformUtilsService: PlatformUtilsService,
-        protected auditService: AuditService, protected stateService: StateService,
-        protected userService: UserService, protected collectionService: CollectionService,
-        protected messagingService: MessagingService, protected eventService: EventService,
-        protected policyService: PolicyService, protected passwordRepromptService: PasswordRepromptService,
-        private logService: LogService) {
-        this.typeOptions = [
-            { name: i18nService.t('typeLogin'), value: CipherType.Login },
-            { name: i18nService.t('typeCard'), value: CipherType.Card },
-            { name: i18nService.t('typeIdentity'), value: CipherType.Identity },
-            { name: i18nService.t('typeSecureNote'), value: CipherType.SecureNote },
-        ];
-        this.cardBrandOptions = [
-            { name: '-- ' + i18nService.t('select') + ' --', value: null },
-            { name: 'Visa', value: 'Visa' },
-            { name: 'Mastercard', value: 'Mastercard' },
-            { name: 'American Express', value: 'Amex' },
-            { name: 'Discover', value: 'Discover' },
-            { name: 'Diners Club', value: 'Diners Club' },
-            { name: 'JCB', value: 'JCB' },
-            { name: 'Maestro', value: 'Maestro' },
-            { name: 'UnionPay', value: 'UnionPay' },
-            { name: i18nService.t('other'), value: 'Other' },
-        ];
-        this.cardExpMonthOptions = [
-            { name: '-- ' + i18nService.t('select') + ' --', value: null },
-            { name: '01 - ' + i18nService.t('january'), value: '1' },
-            { name: '02 - ' + i18nService.t('february'), value: '2' },
-            { name: '03 - ' + i18nService.t('march'), value: '3' },
-            { name: '04 - ' + i18nService.t('april'), value: '4' },
-            { name: '05 - ' + i18nService.t('may'), value: '5' },
-            { name: '06 - ' + i18nService.t('june'), value: '6' },
-            { name: '07 - ' + i18nService.t('july'), value: '7' },
-            { name: '08 - ' + i18nService.t('august'), value: '8' },
-            { name: '09 - ' + i18nService.t('september'), value: '9' },
-            { name: '10 - ' + i18nService.t('october'), value: '10' },
-            { name: '11 - ' + i18nService.t('november'), value: '11' },
-            { name: '12 - ' + i18nService.t('december'), value: '12' },
-        ];
-        this.identityTitleOptions = [
-            { name: '-- ' + i18nService.t('select') + ' --', value: null },
-            { name: i18nService.t('mr'), value: i18nService.t('mr') },
-            { name: i18nService.t('mrs'), value: i18nService.t('mrs') },
-            { name: i18nService.t('ms'), value: i18nService.t('ms') },
-            { name: i18nService.t('dr'), value: i18nService.t('dr') },
-        ];
-        this.uriMatchOptions = [
-            { name: i18nService.t('defaultMatchDetection'), value: null },
-            { name: i18nService.t('baseDomain'), value: UriMatchType.Domain },
-            { name: i18nService.t('host'), value: UriMatchType.Host },
-            { name: i18nService.t('startsWith'), value: UriMatchType.StartsWith },
-            { name: i18nService.t('regEx'), value: UriMatchType.RegularExpression },
-            { name: i18nService.t('exact'), value: UriMatchType.Exact },
-            { name: i18nService.t('never'), value: UriMatchType.Never },
-        ];
-        this.autofillOnPageLoadOptions = [
-            { name: i18nService.t('autoFillOnPageLoadUseDefault'), value: null },
-            { name: i18nService.t('autoFillOnPageLoadYes'), value: true },
-            { name: i18nService.t('autoFillOnPageLoadNo'), value: false },
-        ];
-    }
-
-    async ngOnInit() {
-        await this.init();
-    }
-
-    async init() {
-        if (await this.policyService.policyAppliesToUser(PolicyType.PersonalOwnership)) {
-            this.allowPersonal = false;
-        } else {
-            const myEmail = await this.userService.getEmail();
-            this.ownershipOptions.push({ name: myEmail, value: null });
-        }
-
-        const orgs = await this.userService.getAllOrganizations();
-        orgs.sort(Utils.getSortFunction(this.i18nService, 'name')).forEach(o => {
-            if (o.enabled && o.status === OrganizationUserStatusType.Confirmed) {
-                this.ownershipOptions.push({ name: o.name, value: o.id });
-            }
-        });
-        if (!this.allowPersonal) {
-            this.organizationId = this.ownershipOptions[0].value;
-        }
-
-        this.writeableCollections = await this.loadCollections();
-
-        this.canUseReprompt = await this.passwordRepromptService.enabled();
+  @Input() cloneMode: boolean = false;
+  @Input() folderId: string = null;
+  @Input() cipherId: string;
+  @Input() type: CipherType;
+  @Input() collectionIds: string[];
+  @Input() organizationId: string = null;
+  @Output() onSavedCipher = new EventEmitter<CipherView>();
+  @Output() onDeletedCipher = new EventEmitter<CipherView>();
+  @Output() onRestoredCipher = new EventEmitter<CipherView>();
+  @Output() onCancelled = new EventEmitter<CipherView>();
+  @Output() onEditAttachments = new EventEmitter<CipherView>();
+  @Output() onShareCipher = new EventEmitter<CipherView>();
+  @Output() onEditCollections = new EventEmitter<CipherView>();
+  @Output() onGeneratePassword = new EventEmitter();
+
+  editMode: boolean = false;
+  cipher: CipherView;
+  folders: FolderView[];
+  collections: CollectionView[] = [];
+  title: string;
+  formPromise: Promise<any>;
+  deletePromise: Promise<any>;
+  restorePromise: Promise<any>;
+  checkPasswordPromise: Promise<number>;
+  showPassword: boolean = false;
+  showCardNumber: boolean = false;
+  showCardCode: boolean = false;
+  cipherType = CipherType;
+  typeOptions: any[];
+  cardBrandOptions: any[];
+  cardExpMonthOptions: any[];
+  identityTitleOptions: any[];
+  uriMatchOptions: any[];
+  ownershipOptions: any[] = [];
+  autofillOnPageLoadOptions: any[];
+  currentDate = new Date();
+  allowPersonal = true;
+  reprompt: boolean = false;
+  canUseReprompt: boolean = true;
+
+  protected writeableCollections: CollectionView[];
+  private previousCipherId: string;
+
+  constructor(
+    protected cipherService: CipherService,
+    protected folderService: FolderService,
+    protected i18nService: I18nService,
+    protected platformUtilsService: PlatformUtilsService,
+    protected auditService: AuditService,
+    protected stateService: StateService,
+    protected collectionService: CollectionService,
+    protected messagingService: MessagingService,
+    protected eventService: EventService,
+    protected policyService: PolicyService,
+    private logService: LogService,
+    protected passwordRepromptService: PasswordRepromptService,
+    private organizationService: OrganizationService
+  ) {
+    this.typeOptions = [
+      { name: i18nService.t("typeLogin"), value: CipherType.Login },
+      { name: i18nService.t("typeCard"), value: CipherType.Card },
+      { name: i18nService.t("typeIdentity"), value: CipherType.Identity },
+      { name: i18nService.t("typeSecureNote"), value: CipherType.SecureNote },
+    ];
+    this.cardBrandOptions = [
+      { name: "-- " + i18nService.t("select") + " --", value: null },
+      { name: "Visa", value: "Visa" },
+      { name: "Mastercard", value: "Mastercard" },
+      { name: "American Express", value: "Amex" },
+      { name: "Discover", value: "Discover" },
+      { name: "Diners Club", value: "Diners Club" },
+      { name: "JCB", value: "JCB" },
+      { name: "Maestro", value: "Maestro" },
+      { name: "UnionPay", value: "UnionPay" },
+      { name: i18nService.t("other"), value: "Other" },
+    ];
+    this.cardExpMonthOptions = [
+      { name: "-- " + i18nService.t("select") + " --", value: null },
+      { name: "01 - " + i18nService.t("january"), value: "1" },
+      { name: "02 - " + i18nService.t("february"), value: "2" },
+      { name: "03 - " + i18nService.t("march"), value: "3" },
+      { name: "04 - " + i18nService.t("april"), value: "4" },
+      { name: "05 - " + i18nService.t("may"), value: "5" },
+      { name: "06 - " + i18nService.t("june"), value: "6" },
+      { name: "07 - " + i18nService.t("july"), value: "7" },
+      { name: "08 - " + i18nService.t("august"), value: "8" },
+      { name: "09 - " + i18nService.t("september"), value: "9" },
+      { name: "10 - " + i18nService.t("october"), value: "10" },
+      { name: "11 - " + i18nService.t("november"), value: "11" },
+      { name: "12 - " + i18nService.t("december"), value: "12" },
+    ];
+    this.identityTitleOptions = [
+      { name: "-- " + i18nService.t("select") + " --", value: null },
+      { name: i18nService.t("mr"), value: i18nService.t("mr") },
+      { name: i18nService.t("mrs"), value: i18nService.t("mrs") },
+      { name: i18nService.t("ms"), value: i18nService.t("ms") },
+      { name: i18nService.t("dr"), value: i18nService.t("dr") },
+    ];
+    this.uriMatchOptions = [
+      { name: i18nService.t("defaultMatchDetection"), value: null },
+      { name: i18nService.t("baseDomain"), value: UriMatchType.Domain },
+      { name: i18nService.t("host"), value: UriMatchType.Host },
+      { name: i18nService.t("startsWith"), value: UriMatchType.StartsWith },
+      { name: i18nService.t("regEx"), value: UriMatchType.RegularExpression },
+      { name: i18nService.t("exact"), value: UriMatchType.Exact },
+      { name: i18nService.t("never"), value: UriMatchType.Never },
+    ];
+    this.autofillOnPageLoadOptions = [
+      { name: i18nService.t("autoFillOnPageLoadUseDefault"), value: null },
+      { name: i18nService.t("autoFillOnPageLoadYes"), value: true },
+      { name: i18nService.t("autoFillOnPageLoadNo"), value: false },
+    ];
+  }
+
+  async ngOnInit() {
+    await this.init();
+  }
+
+  async init() {
+    if (this.ownershipOptions.length) {
+      this.ownershipOptions = [];
     }
-
-    async load() {
-        this.editMode = this.cipherId != null;
-        if (this.editMode) {
-            this.editMode = true;
-            if (this.cloneMode) {
-                this.cloneMode = true;
-                this.title = this.i18nService.t('addItem');
-            } else {
-                this.title = this.i18nService.t('editItem');
-            }
-        } else {
-            this.title = this.i18nService.t('addItem');
-        }
-
-        const addEditCipherInfo: any = await this.stateService.get<any>('addEditCipherInfo');
-        if (addEditCipherInfo != null) {
-            this.cipher = addEditCipherInfo.cipher;
-            this.collectionIds = addEditCipherInfo.collectionIds;
-        }
-        await this.stateService.remove('addEditCipherInfo');
-
-        if (this.cipher == null) {
-            if (this.editMode) {
-                const cipher = await this.loadCipher();
-                this.cipher = await cipher.decrypt();
-
-                // Adjust Cipher Name if Cloning
-                if (this.cloneMode) {
-                    this.cipher.name += ' - ' + this.i18nService.t('clone');
-                    // If not allowing personal ownership, update cipher's org Id to prompt downstream changes
-                    if (this.cipher.organizationId == null && !this.allowPersonal) {
-                        this.cipher.organizationId = this.organizationId;
-                    }
-                }
-            } else {
-                this.cipher = new CipherView();
-                this.cipher.organizationId = this.organizationId == null ? null : this.organizationId;
-                this.cipher.folderId = this.folderId;
-                this.cipher.type = this.type == null ? CipherType.Login : this.type;
-                this.cipher.login = new LoginView();
-                this.cipher.login.uris = [new LoginUriView()];
-                this.cipher.card = new CardView();
-                this.cipher.identity = new IdentityView();
-                this.cipher.secureNote = new SecureNoteView();
-                this.cipher.secureNote.type = SecureNoteType.Generic;
-                this.cipher.reprompt = CipherRepromptType.None;
-            }
-        }
-
-        if (this.cipher != null && (!this.editMode || addEditCipherInfo != null || this.cloneMode)) {
-            await this.organizationChanged();
-            if (this.collectionIds != null && this.collectionIds.length > 0 && this.collections.length > 0) {
-                this.collections.forEach(c => {
-                    if (this.collectionIds.indexOf(c.id) > -1) {
-                        (c as any).checked = true;
-                    }
-                });
-            }
-        }
-
-        this.folders = await this.folderService.getAllDecrypted();
-
-        if (this.editMode && this.previousCipherId !== this.cipherId) {
-            this.eventService.collect(EventType.Cipher_ClientViewed, this.cipherId);
-        }
-        this.previousCipherId = this.cipherId;
-        this.reprompt = this.cipher.reprompt !== CipherRepromptType.None;
+    if (await this.policyService.policyAppliesToUser(PolicyType.PersonalOwnership)) {
+      this.allowPersonal = false;
+    } else {
+      const myEmail = await this.stateService.getEmail();
+      this.ownershipOptions.push({ name: myEmail, value: null });
     }
 
-    async submit(): Promise<boolean> {
-        if (this.cipher.isDeleted) {
-            return this.restore();
-        }
-
-        if (this.cipher.name == null || this.cipher.name === '') {
-            this.platformUtilsService.showToast('error', this.i18nService.t('errorOccurred'),
-                this.i18nService.t('nameRequired'));
-            return false;
-        }
+    const orgs = await this.organizationService.getAll();
+    orgs.sort(Utils.getSortFunction(this.i18nService, "name")).forEach((o) => {
+      if (o.enabled && o.status === OrganizationUserStatusType.Confirmed) {
+        this.ownershipOptions.push({ name: o.name, value: o.id });
+      }
+    });
+    if (!this.allowPersonal) {
+      this.organizationId = this.ownershipOptions[0].value;
+    }
 
-        if ((!this.editMode || this.cloneMode) && !this.allowPersonal && this.cipher.organizationId == null) {
-            this.platformUtilsService.showToast('error', this.i18nService.t('errorOccurred'),
-                this.i18nService.t('personalOwnershipSubmitError'));
-            return false;
-        }
+    this.writeableCollections = await this.loadCollections();
+
+    this.canUseReprompt = await this.passwordRepromptService.enabled();
+  }
+
+  async load() {
+    this.editMode = this.cipherId != null;
+    if (this.editMode) {
+      this.editMode = true;
+      if (this.cloneMode) {
+        this.cloneMode = true;
+        this.title = this.i18nService.t("addItem");
+      } else {
+        this.title = this.i18nService.t("editItem");
+      }
+    } else {
+      this.title = this.i18nService.t("addItem");
+    }
 
-        if ((!this.editMode || this.cloneMode) && this.cipher.type === CipherType.Login &&
-            this.cipher.login.uris != null && this.cipher.login.uris.length === 1 &&
-            (this.cipher.login.uris[0].uri == null || this.cipher.login.uris[0].uri === '')) {
-            this.cipher.login.uris = null;
-        }
+    const addEditCipherInfo: any = await this.stateService.getAddEditCipherInfo();
+    if (addEditCipherInfo != null) {
+      this.cipher = addEditCipherInfo.cipher;
+      this.collectionIds = addEditCipherInfo.collectionIds;
+    }
+    await this.stateService.setAddEditCipherInfo(null);
 
-        // Allows saving of selected collections during "Add" and "Clone" flows
-        if ((!this.editMode || this.cloneMode) && this.cipher.organizationId != null) {
-            this.cipher.collectionIds = this.collections == null ? [] :
-                this.collections.filter(c => (c as any).checked).map(c => c.id);
-        }
+    if (this.cipher == null) {
+      if (this.editMode) {
+        const cipher = await this.loadCipher();
+        this.cipher = await cipher.decrypt();
 
-        // Clear current Cipher Id to trigger "Add" cipher flow
+        // Adjust Cipher Name if Cloning
         if (this.cloneMode) {
-            this.cipher.id = null;
-        }
-
-        const cipher = await this.encryptCipher();
-        try {
-            this.formPromise = this.saveCipher(cipher);
-            await this.formPromise;
-            this.cipher.id = cipher.id;
-            this.platformUtilsService.showToast('success', null,
-                this.i18nService.t(this.editMode && !this.cloneMode ? 'editedItem' : 'addedItem'));
-            this.onSavedCipher.emit(this.cipher);
-            this.messagingService.send(this.editMode && !this.cloneMode ? 'editedCipher' : 'addedCipher');
-            return true;
-        } catch (e) {
-            this.logService.error(e);
-        }
-
-        return false;
+          this.cipher.name += " - " + this.i18nService.t("clone");
+          // If not allowing personal ownership, update cipher's org Id to prompt downstream changes
+          if (this.cipher.organizationId == null && !this.allowPersonal) {
+            this.cipher.organizationId = this.organizationId;
+          }
+        }
+      } else {
+        this.cipher = new CipherView();
+        this.cipher.organizationId = this.organizationId == null ? null : this.organizationId;
+        this.cipher.folderId = this.folderId;
+        this.cipher.type = this.type == null ? CipherType.Login : this.type;
+        this.cipher.login = new LoginView();
+        this.cipher.login.uris = [new LoginUriView()];
+        this.cipher.card = new CardView();
+        this.cipher.identity = new IdentityView();
+        this.cipher.secureNote = new SecureNoteView();
+        this.cipher.secureNote.type = SecureNoteType.Generic;
+        this.cipher.reprompt = CipherRepromptType.None;
+      }
     }
 
-    addUri() {
-        if (this.cipher.type !== CipherType.Login) {
-            return;
-        }
-
-        if (this.cipher.login.uris == null) {
-            this.cipher.login.uris = [];
-        }
-
-        this.cipher.login.uris.push(new LoginUriView());
+    if (this.cipher != null && (!this.editMode || addEditCipherInfo != null || this.cloneMode)) {
+      await this.organizationChanged();
+      if (
+        this.collectionIds != null &&
+        this.collectionIds.length > 0 &&
+        this.collections.length > 0
+      ) {
+        this.collections.forEach((c) => {
+          if (this.collectionIds.indexOf(c.id) > -1) {
+            (c as any).checked = true;
+          }
+        });
+      }
     }
 
-    removeUri(uri: LoginUriView) {
-        if (this.cipher.type !== CipherType.Login || this.cipher.login.uris == null) {
-            return;
-        }
+    this.folders = await this.folderService.getAllDecrypted();
 
-        const i = this.cipher.login.uris.indexOf(uri);
-        if (i > -1) {
-            this.cipher.login.uris.splice(i, 1);
-        }
+    if (this.editMode && this.previousCipherId !== this.cipherId) {
+      this.eventService.collect(EventType.Cipher_ClientViewed, this.cipherId);
     }
+    this.previousCipherId = this.cipherId;
+    this.reprompt = this.cipher.reprompt !== CipherRepromptType.None;
+  }
 
-    trackByFunction(index: number, item: any) {
-        return index;
+  async submit(): Promise<boolean> {
+    if (this.cipher.isDeleted) {
+      return this.restore();
     }
 
-    cancel() {
-        this.onCancelled.emit(this.cipher);
+    if (this.cipher.name == null || this.cipher.name === "") {
+      this.platformUtilsService.showToast(
+        "error",
+        this.i18nService.t("errorOccurred"),
+        this.i18nService.t("nameRequired")
+      );
+      return false;
     }
 
-    attachments() {
-        this.onEditAttachments.emit(this.cipher);
+    if (
+      (!this.editMode || this.cloneMode) &&
+      !this.allowPersonal &&
+      this.cipher.organizationId == null
+    ) {
+      this.platformUtilsService.showToast(
+        "error",
+        this.i18nService.t("errorOccurred"),
+        this.i18nService.t("personalOwnershipSubmitError")
+      );
+      return false;
     }
 
-    share() {
-        this.onShareCipher.emit(this.cipher);
+    if (
+      (!this.editMode || this.cloneMode) &&
+      this.cipher.type === CipherType.Login &&
+      this.cipher.login.uris != null &&
+      this.cipher.login.uris.length === 1 &&
+      (this.cipher.login.uris[0].uri == null || this.cipher.login.uris[0].uri === "")
+    ) {
+      this.cipher.login.uris = null;
     }
 
-    editCollections() {
-        this.onEditCollections.emit(this.cipher);
+    // Allows saving of selected collections during "Add" and "Clone" flows
+    if ((!this.editMode || this.cloneMode) && this.cipher.organizationId != null) {
+      this.cipher.collectionIds =
+        this.collections == null
+          ? []
+          : this.collections.filter((c) => (c as any).checked).map((c) => c.id);
     }
 
-    async delete(): Promise<boolean> {
-        const confirmed = await this.platformUtilsService.showDialog(
-            this.i18nService.t(this.cipher.isDeleted ? 'permanentlyDeleteItemConfirmation' : 'deleteItemConfirmation'),
-            this.i18nService.t('deleteItem'), this.i18nService.t('yes'), this.i18nService.t('no'), 'warning');
-        if (!confirmed) {
-            return false;
-        }
-
-        try {
-            this.deletePromise = this.deleteCipher();
-            await this.deletePromise;
-            this.platformUtilsService.showToast('success', null,
-                this.i18nService.t(this.cipher.isDeleted ? 'permanentlyDeletedItem' : 'deletedItem'));
-            this.onDeletedCipher.emit(this.cipher);
-            this.messagingService.send(this.cipher.isDeleted ? 'permanentlyDeletedCipher' : 'deletedCipher');
-        } catch (e) {
-            this.logService.error(e);
-        }
-
-        return true;
+    // Clear current Cipher Id to trigger "Add" cipher flow
+    if (this.cloneMode) {
+      this.cipher.id = null;
     }
 
-    async restore(): Promise<boolean> {
-        if (!this.cipher.isDeleted) {
-            return false;
-        }
+    const cipher = await this.encryptCipher();
+    try {
+      this.formPromise = this.saveCipher(cipher);
+      await this.formPromise;
+      this.cipher.id = cipher.id;
+      this.platformUtilsService.showToast(
+        "success",
+        null,
+        this.i18nService.t(this.editMode && !this.cloneMode ? "editedItem" : "addedItem")
+      );
+      this.onSavedCipher.emit(this.cipher);
+      this.messagingService.send(this.editMode && !this.cloneMode ? "editedCipher" : "addedCipher");
+      return true;
+    } catch (e) {
+      this.logService.error(e);
+    }
 
-        const confirmed = await this.platformUtilsService.showDialog(
-            this.i18nService.t('restoreItemConfirmation'), this.i18nService.t('restoreItem'),
-            this.i18nService.t('yes'), this.i18nService.t('no'), 'warning');
-        if (!confirmed) {
-            return false;
-        }
+    return false;
+  }
 
-        try {
-            this.restorePromise = this.restoreCipher();
-            await this.restorePromise;
-            this.platformUtilsService.showToast('success', null, this.i18nService.t('restoredItem'));
-            this.onRestoredCipher.emit(this.cipher);
-            this.messagingService.send('restoredCipher');
-        } catch (e) {
-            this.logService.error(e);
-        }
+  addUri() {
+    if (this.cipher.type !== CipherType.Login) {
+      return;
+    }
 
-        return true;
+    if (this.cipher.login.uris == null) {
+      this.cipher.login.uris = [];
     }
 
-    async generatePassword(): Promise<boolean> {
-        if (this.cipher.login != null && this.cipher.login.password != null && this.cipher.login.password.length) {
-            const confirmed = await this.platformUtilsService.showDialog(
-                this.i18nService.t('overwritePasswordConfirmation'), this.i18nService.t('overwritePassword'),
-                this.i18nService.t('yes'), this.i18nService.t('no'));
-            if (!confirmed) {
-                return false;
-            }
-        }
+    this.cipher.login.uris.push(new LoginUriView());
+  }
 
-        this.onGeneratePassword.emit();
-        return true;
+  removeUri(uri: LoginUriView) {
+    if (this.cipher.type !== CipherType.Login || this.cipher.login.uris == null) {
+      return;
     }
 
-    togglePassword() {
-        this.showPassword = !this.showPassword;
-        document.getElementById('loginPassword').focus();
-        if (this.editMode && this.showPassword) {
-            this.eventService.collect(EventType.Cipher_ClientToggledPasswordVisible, this.cipherId);
-        }
+    const i = this.cipher.login.uris.indexOf(uri);
+    if (i > -1) {
+      this.cipher.login.uris.splice(i, 1);
     }
-
-    async toggleCardNumber() {
-        this.showCardNumber = !this.showCardNumber;
-        if (this.showCardNumber) {
-            this.eventService.collect(EventType.Cipher_ClientToggledCardNumberVisible, this.cipherId);
-        }
+  }
+
+  trackByFunction(index: number, item: any) {
+    return index;
+  }
+
+  cancel() {
+    this.onCancelled.emit(this.cipher);
+  }
+
+  attachments() {
+    this.onEditAttachments.emit(this.cipher);
+  }
+
+  share() {
+    this.onShareCipher.emit(this.cipher);
+  }
+
+  editCollections() {
+    this.onEditCollections.emit(this.cipher);
+  }
+
+  async delete(): Promise<boolean> {
+    const confirmed = await this.platformUtilsService.showDialog(
+      this.i18nService.t(
+        this.cipher.isDeleted ? "permanentlyDeleteItemConfirmation" : "deleteItemConfirmation"
+      ),
+      this.i18nService.t("deleteItem"),
+      this.i18nService.t("yes"),
+      this.i18nService.t("no"),
+      "warning"
+    );
+    if (!confirmed) {
+      return false;
     }
 
-    toggleCardCode() {
-        this.showCardCode = !this.showCardCode;
-        document.getElementById('cardCode').focus();
-        if (this.editMode && this.showCardCode) {
-            this.eventService.collect(EventType.Cipher_ClientToggledCardCodeVisible, this.cipherId);
-        }
+    try {
+      this.deletePromise = this.deleteCipher();
+      await this.deletePromise;
+      this.platformUtilsService.showToast(
+        "success",
+        null,
+        this.i18nService.t(this.cipher.isDeleted ? "permanentlyDeletedItem" : "deletedItem")
+      );
+      this.onDeletedCipher.emit(this.cipher);
+      this.messagingService.send(
+        this.cipher.isDeleted ? "permanentlyDeletedCipher" : "deletedCipher"
+      );
+    } catch (e) {
+      this.logService.error(e);
     }
 
-    toggleUriOptions(uri: LoginUriView) {
-        const u = (uri as any);
-        u.showOptions = u.showOptions == null && uri.match != null ? false : !u.showOptions;
-    }
+    return true;
+  }
 
-    loginUriMatchChanged(uri: LoginUriView) {
-        const u = (uri as any);
-        u.showOptions = u.showOptions == null ? true : u.showOptions;
+  async restore(): Promise<boolean> {
+    if (!this.cipher.isDeleted) {
+      return false;
     }
 
-    async organizationChanged() {
-        if (this.writeableCollections != null) {
-            this.writeableCollections.forEach(c => (c as any).checked = false);
-        }
-        if (this.cipher.organizationId != null) {
-            this.collections = this.writeableCollections.filter(c => c.organizationId === this.cipher.organizationId);
-            const org = await this.userService.getOrganization(this.cipher.organizationId);
-            if (org != null) {
-                this.cipher.organizationUseTotp = org.useTotp;
-            }
-        } else {
-            this.collections = [];
-        }
+    const confirmed = await this.platformUtilsService.showDialog(
+      this.i18nService.t("restoreItemConfirmation"),
+      this.i18nService.t("restoreItem"),
+      this.i18nService.t("yes"),
+      this.i18nService.t("no"),
+      "warning"
+    );
+    if (!confirmed) {
+      return false;
     }
 
-    async checkPassword() {
-        if (this.checkPasswordPromise != null) {
-            return;
-        }
+    try {
+      this.restorePromise = this.restoreCipher();
+      await this.restorePromise;
+      this.platformUtilsService.showToast("success", null, this.i18nService.t("restoredItem"));
+      this.onRestoredCipher.emit(this.cipher);
+      this.messagingService.send("restoredCipher");
+    } catch (e) {
+      this.logService.error(e);
+    }
 
-        if (this.cipher.login == null || this.cipher.login.password == null || this.cipher.login.password === '') {
-            return;
-        }
+    return true;
+  }
+
+  async generatePassword(): Promise<boolean> {
+    if (
+      this.cipher.login != null &&
+      this.cipher.login.password != null &&
+      this.cipher.login.password.length
+    ) {
+      const confirmed = await this.platformUtilsService.showDialog(
+        this.i18nService.t("overwritePasswordConfirmation"),
+        this.i18nService.t("overwritePassword"),
+        this.i18nService.t("yes"),
+        this.i18nService.t("no")
+      );
+      if (!confirmed) {
+        return false;
+      }
+    }
 
-        this.checkPasswordPromise = this.auditService.passwordLeaked(this.cipher.login.password);
-        const matches = await this.checkPasswordPromise;
-        this.checkPasswordPromise = null;
+    this.onGeneratePassword.emit();
+    return true;
+  }
 
-        if (matches > 0) {
-            this.platformUtilsService.showToast('warning', null,
-                this.i18nService.t('passwordExposed', matches.toString()));
-        } else {
-            this.platformUtilsService.showToast('success', null, this.i18nService.t('passwordSafe'));
-        }
+  togglePassword() {
+    this.showPassword = !this.showPassword;
+    document.getElementById("loginPassword").focus();
+    if (this.editMode && this.showPassword) {
+      this.eventService.collect(EventType.Cipher_ClientToggledPasswordVisible, this.cipherId);
     }
+  }
 
-    repromptChanged() {
-        this.reprompt = !this.reprompt;
-        if (this.reprompt) {
-            this.cipher.reprompt = CipherRepromptType.Password;
-        } else {
-            this.cipher.reprompt = CipherRepromptType.None;
-        }
+  async toggleCardNumber() {
+    this.showCardNumber = !this.showCardNumber;
+    if (this.showCardNumber) {
+      this.eventService.collect(EventType.Cipher_ClientToggledCardNumberVisible, this.cipherId);
     }
+  }
 
-    protected async loadCollections() {
-        const allCollections = await this.collectionService.getAllDecrypted();
-        return allCollections.filter(c => !c.readOnly);
+  toggleCardCode() {
+    this.showCardCode = !this.showCardCode;
+    document.getElementById("cardCode").focus();
+    if (this.editMode && this.showCardCode) {
+      this.eventService.collect(EventType.Cipher_ClientToggledCardCodeVisible, this.cipherId);
     }
+  }
 
-    protected loadCipher() {
-        return this.cipherService.get(this.cipherId);
-    }
+  toggleUriOptions(uri: LoginUriView) {
+    const u = uri as any;
+    u.showOptions = u.showOptions == null && uri.match != null ? false : !u.showOptions;
+  }
+
+  loginUriMatchChanged(uri: LoginUriView) {
+    const u = uri as any;
+    u.showOptions = u.showOptions == null ? true : u.showOptions;
+  }
 
-    protected encryptCipher() {
-        return this.cipherService.encrypt(this.cipher);
+  async organizationChanged() {
+    if (this.writeableCollections != null) {
+      this.writeableCollections.forEach((c) => ((c as any).checked = false));
     }
+    if (this.cipher.organizationId != null) {
+      this.collections = this.writeableCollections.filter(
+        (c) => c.organizationId === this.cipher.organizationId
+      );
+      const org = await this.organizationService.get(this.cipher.organizationId);
+      if (org != null) {
+        this.cipher.organizationUseTotp = org.useTotp;
+      }
+    } else {
+      this.collections = [];
+    }
+  }
 
-    protected saveCipher(cipher: Cipher) {
-        return this.cipherService.saveWithServer(cipher);
+  async checkPassword() {
+    if (this.checkPasswordPromise != null) {
+      return;
     }
 
-    protected deleteCipher() {
-        return this.cipher.isDeleted ? this.cipherService.deleteWithServer(this.cipher.id)
-            : this.cipherService.softDeleteWithServer(this.cipher.id);
+    if (
+      this.cipher.login == null ||
+      this.cipher.login.password == null ||
+      this.cipher.login.password === ""
+    ) {
+      return;
     }
 
-    protected restoreCipher() {
-        return this.cipherService.restoreWithServer(this.cipher.id);
+    this.checkPasswordPromise = this.auditService.passwordLeaked(this.cipher.login.password);
+    const matches = await this.checkPasswordPromise;
+    this.checkPasswordPromise = null;
+
+    if (matches > 0) {
+      this.platformUtilsService.showToast(
+        "warning",
+        null,
+        this.i18nService.t("passwordExposed", matches.toString())
+      );
+    } else {
+      this.platformUtilsService.showToast("success", null, this.i18nService.t("passwordSafe"));
+    }
+  }
+
+  repromptChanged() {
+    this.reprompt = !this.reprompt;
+    if (this.reprompt) {
+      this.cipher.reprompt = CipherRepromptType.Password;
+    } else {
+      this.cipher.reprompt = CipherRepromptType.None;
     }
+  }
+
+  protected async loadCollections() {
+    const allCollections = await this.collectionService.getAllDecrypted();
+    return allCollections.filter((c) => !c.readOnly);
+  }
+
+  protected loadCipher() {
+    return this.cipherService.get(this.cipherId);
+  }
+
+  protected encryptCipher() {
+    return this.cipherService.encrypt(this.cipher);
+  }
+
+  protected saveCipher(cipher: Cipher) {
+    return this.cipherService.saveWithServer(cipher);
+  }
+
+  protected deleteCipher() {
+    return this.cipher.isDeleted
+      ? this.cipherService.deleteWithServer(this.cipher.id)
+      : this.cipherService.softDeleteWithServer(this.cipher.id);
+  }
+
+  protected restoreCipher() {
+    return this.cipherService.restoreWithServer(this.cipher.id);
+  }
 }
diff --git a/jslib/angular/src/components/attachments.component.ts b/jslib/angular/src/components/attachments.component.ts
index dcbaf19b..bff508e2 100644
--- a/jslib/angular/src/components/attachments.component.ts
+++ b/jslib/angular/src/components/attachments.component.ts
@@ -1,250 +1,291 @@
-import {
-    Directive,
-    EventEmitter,
-    Input,
-    OnInit,
-    Output,
-} from '@angular/core';
-
-import { ApiService } from 'jslib-common/abstractions/api.service';
-import { CipherService } from 'jslib-common/abstractions/cipher.service';
-import { CryptoService } from 'jslib-common/abstractions/crypto.service';
-import { I18nService } from 'jslib-common/abstractions/i18n.service';
-import { LogService } from 'jslib-common/abstractions/log.service';
-import { PlatformUtilsService } from 'jslib-common/abstractions/platformUtils.service';
-import { UserService } from 'jslib-common/abstractions/user.service';
-
-import { Cipher } from 'jslib-common/models/domain/cipher';
-import { ErrorResponse } from 'jslib-common/models/response/errorResponse';
-
-import { AttachmentView } from 'jslib-common/models/view/attachmentView';
-import { CipherView } from 'jslib-common/models/view/cipherView';
+import { Directive, EventEmitter, Input, OnInit, Output } from "@angular/core";
 
-@Directive()
-export class AttachmentsComponent implements OnInit {
-    @Input() cipherId: string;
-    @Output() onUploadedAttachment = new EventEmitter();
-    @Output() onDeletedAttachment = new EventEmitter();
-    @Output() onReuploadedAttachment = new EventEmitter();
-
-    cipher: CipherView;
-    cipherDomain: Cipher;
-    hasUpdatedKey: boolean;
-    canAccessAttachments: boolean;
-    formPromise: Promise<any>;
-    deletePromises: { [id: string]: Promise<any>; } = {};
-    reuploadPromises: { [id: string]: Promise<any>; } = {};
-    emergencyAccessId?: string = null;
-
-    constructor(protected cipherService: CipherService, protected i18nService: I18nService,
-        protected cryptoService: CryptoService, protected userService: UserService,
-        protected platformUtilsService: PlatformUtilsService, protected apiService: ApiService,
-        protected win: Window, private logService: LogService) { }
-
-    async ngOnInit() {
-        await this.init();
-    }
+import { ApiService } from "jslib-common/abstractions/api.service";
+import { CipherService } from "jslib-common/abstractions/cipher.service";
+import { CryptoService } from "jslib-common/abstractions/crypto.service";
+import { I18nService } from "jslib-common/abstractions/i18n.service";
+import { LogService } from "jslib-common/abstractions/log.service";
+import { PlatformUtilsService } from "jslib-common/abstractions/platformUtils.service";
+import { StateService } from "jslib-common/abstractions/state.service";
 
-    async submit() {
-        if (!this.hasUpdatedKey) {
-            this.platformUtilsService.showToast('error', this.i18nService.t('errorOccurred'),
-                this.i18nService.t('updateKey'));
-            return;
-        }
+import { Cipher } from "jslib-common/models/domain/cipher";
+import { ErrorResponse } from "jslib-common/models/response/errorResponse";
 
-        const fileEl = document.getElementById('file') as HTMLInputElement;
-        const files = fileEl.files;
-        if (files == null || files.length === 0) {
-            this.platformUtilsService.showToast('error', this.i18nService.t('errorOccurred'),
-                this.i18nService.t('selectFile'));
-            return;
-        }
+import { AttachmentView } from "jslib-common/models/view/attachmentView";
+import { CipherView } from "jslib-common/models/view/cipherView";
 
-        if (files[0].size > 524288000) { // 500 MB
-            this.platformUtilsService.showToast('error', this.i18nService.t('errorOccurred'),
-                this.i18nService.t('maxFileSize'));
-            return;
-        }
+@Directive()
+export class AttachmentsComponent implements OnInit {
+  @Input() cipherId: string;
+  @Output() onUploadedAttachment = new EventEmitter();
+  @Output() onDeletedAttachment = new EventEmitter();
+  @Output() onReuploadedAttachment = new EventEmitter();
+
+  cipher: CipherView;
+  cipherDomain: Cipher;
+  hasUpdatedKey: boolean;
+  canAccessAttachments: boolean;
+  formPromise: Promise<any>;
+  deletePromises: { [id: string]: Promise<any> } = {};
+  reuploadPromises: { [id: string]: Promise<any> } = {};
+  emergencyAccessId?: string = null;
+
+  constructor(
+    protected cipherService: CipherService,
+    protected i18nService: I18nService,
+    protected cryptoService: CryptoService,
+    protected platformUtilsService: PlatformUtilsService,
+    protected apiService: ApiService,
+    protected win: Window,
+    protected logService: LogService,
+    protected stateService: StateService
+  ) {}
+
+  async ngOnInit() {
+    await this.init();
+  }
+
+  async submit() {
+    if (!this.hasUpdatedKey) {
+      this.platformUtilsService.showToast(
+        "error",
+        this.i18nService.t("errorOccurred"),
+        this.i18nService.t("updateKey")
+      );
+      return;
+    }
 
-        try {
-            this.formPromise = this.saveCipherAttachment(files[0]);
-            this.cipherDomain = await this.formPromise;
-            this.cipher = await this.cipherDomain.decrypt();
-            this.platformUtilsService.showToast('success', null, this.i18nService.t('attachmentSaved'));
-            this.onUploadedAttachment.emit();
-        } catch (e) {
-            this.logService.error(e);
-        }
+    const fileEl = document.getElementById("file") as HTMLInputElement;
+    const files = fileEl.files;
+    if (files == null || files.length === 0) {
+      this.platformUtilsService.showToast(
+        "error",
+        this.i18nService.t("errorOccurred"),
+        this.i18nService.t("selectFile")
+      );
+      return;
+    }
 
-        // reset file input
-        // ref: https://stackoverflow.com/a/20552042
-        fileEl.type = '';
-        fileEl.type = 'file';
-        fileEl.value = '';
+    if (files[0].size > 524288000) {
+      // 500 MB
+      this.platformUtilsService.showToast(
+        "error",
+        this.i18nService.t("errorOccurred"),
+        this.i18nService.t("maxFileSize")
+      );
+      return;
     }
 
-    async delete(attachment: AttachmentView) {
-        if (this.deletePromises[attachment.id] != null) {
-            return;
-        }
+    try {
+      this.formPromise = this.saveCipherAttachment(files[0]);
+      this.cipherDomain = await this.formPromise;
+      this.cipher = await this.cipherDomain.decrypt();
+      this.platformUtilsService.showToast("success", null, this.i18nService.t("attachmentSaved"));
+      this.onUploadedAttachment.emit();
+    } catch (e) {
+      this.logService.error(e);
+    }
 
-        const confirmed = await this.platformUtilsService.showDialog(
-            this.i18nService.t('deleteAttachmentConfirmation'), this.i18nService.t('deleteAttachment'),
-            this.i18nService.t('yes'), this.i18nService.t('no'), 'warning');
-        if (!confirmed) {
-            return;
-        }
+    // reset file input
+    // ref: https://stackoverflow.com/a/20552042
+    fileEl.type = "";
+    fileEl.type = "file";
+    fileEl.value = "";
+  }
 
-        try {
-            this.deletePromises[attachment.id] = this.deleteCipherAttachment(attachment.id);
-            await this.deletePromises[attachment.id];
-            this.platformUtilsService.showToast('success', null, this.i18nService.t('deletedAttachment'));
-            const i = this.cipher.attachments.indexOf(attachment);
-            if (i > -1) {
-                this.cipher.attachments.splice(i, 1);
-            }
-        } catch (e) {
-            this.logService.error(e);
-        }
+  async delete(attachment: AttachmentView) {
+    if (this.deletePromises[attachment.id] != null) {
+      return;
+    }
 
-        this.deletePromises[attachment.id] = null;
-        this.onDeletedAttachment.emit();
+    const confirmed = await this.platformUtilsService.showDialog(
+      this.i18nService.t("deleteAttachmentConfirmation"),
+      this.i18nService.t("deleteAttachment"),
+      this.i18nService.t("yes"),
+      this.i18nService.t("no"),
+      "warning"
+    );
+    if (!confirmed) {
+      return;
     }
 
-    async download(attachment: AttachmentView) {
-        const a = (attachment as any);
-        if (a.downloading) {
-            return;
-        }
+    try {
+      this.deletePromises[attachment.id] = this.deleteCipherAttachment(attachment.id);
+      await this.deletePromises[attachment.id];
+      this.platformUtilsService.showToast("success", null, this.i18nService.t("deletedAttachment"));
+      const i = this.cipher.attachments.indexOf(attachment);
+      if (i > -1) {
+        this.cipher.attachments.splice(i, 1);
+      }
+    } catch (e) {
+      this.logService.error(e);
+    }
 
-        if (!this.canAccessAttachments) {
-            this.platformUtilsService.showToast('error', this.i18nService.t('premiumRequired'),
-                this.i18nService.t('premiumRequiredDesc'));
-            return;
-        }
+    this.deletePromises[attachment.id] = null;
+    this.onDeletedAttachment.emit();
+  }
 
-        let url: string;
-        try {
-            const attachmentDownloadResponse = await this.apiService.getAttachmentData(this.cipher.id, attachment.id,
-                this.emergencyAccessId);
-            url = attachmentDownloadResponse.url;
-        } catch (e) {
-            if (e instanceof ErrorResponse && (e as ErrorResponse).statusCode === 404) {
-                url = attachment.url;
-            } else if (e instanceof ErrorResponse) {
-                throw new Error((e as ErrorResponse).getSingleMessage());
-            } else {
-                throw e;
-            }
-        }
+  async download(attachment: AttachmentView) {
+    const a = attachment as any;
+    if (a.downloading) {
+      return;
+    }
 
-        a.downloading = true;
-        const response = await fetch(new Request(url, { cache: 'no-store' }));
-        if (response.status !== 200) {
-            this.platformUtilsService.showToast('error', null, this.i18nService.t('errorOccurred'));
-            a.downloading = false;
-            return;
-        }
+    if (!this.canAccessAttachments) {
+      this.platformUtilsService.showToast(
+        "error",
+        this.i18nService.t("premiumRequired"),
+        this.i18nService.t("premiumRequiredDesc")
+      );
+      return;
+    }
 
-        try {
-            const buf = await response.arrayBuffer();
-            const key = attachment.key != null ? attachment.key :
-                await this.cryptoService.getOrgKey(this.cipher.organizationId);
-            const decBuf = await this.cryptoService.decryptFromBytes(buf, key);
-            this.platformUtilsService.saveFile(this.win, decBuf, null, attachment.fileName);
-        } catch (e) {
-            this.platformUtilsService.showToast('error', null, this.i18nService.t('errorOccurred'));
-        }
+    let url: string;
+    try {
+      const attachmentDownloadResponse = await this.apiService.getAttachmentData(
+        this.cipher.id,
+        attachment.id,
+        this.emergencyAccessId
+      );
+      url = attachmentDownloadResponse.url;
+    } catch (e) {
+      if (e instanceof ErrorResponse && (e as ErrorResponse).statusCode === 404) {
+        url = attachment.url;
+      } else if (e instanceof ErrorResponse) {
+        throw new Error((e as ErrorResponse).getSingleMessage());
+      } else {
+        throw e;
+      }
+    }
 
-        a.downloading = false;
+    a.downloading = true;
+    const response = await fetch(new Request(url, { cache: "no-store" }));
+    if (response.status !== 200) {
+      this.platformUtilsService.showToast("error", null, this.i18nService.t("errorOccurred"));
+      a.downloading = false;
+      return;
     }
 
-    protected async init() {
-        this.cipherDomain = await this.loadCipher();
-        this.cipher = await this.cipherDomain.decrypt();
+    try {
+      const buf = await response.arrayBuffer();
+      const key =
+        attachment.key != null
+          ? attachment.key
+          : await this.cryptoService.getOrgKey(this.cipher.organizationId);
+      const decBuf = await this.cryptoService.decryptFromBytes(buf, key);
+      this.platformUtilsService.saveFile(this.win, decBuf, null, attachment.fileName);
+    } catch (e) {
+      this.platformUtilsService.showToast("error", null, this.i18nService.t("errorOccurred"));
+    }
 
-        this.hasUpdatedKey = await this.cryptoService.hasEncKey();
-        const canAccessPremium = await this.userService.canAccessPremium();
-        this.canAccessAttachments = canAccessPremium || this.cipher.organizationId != null;
+    a.downloading = false;
+  }
+
+  protected async init() {
+    this.cipherDomain = await this.loadCipher();
+    this.cipher = await this.cipherDomain.decrypt();
+
+    this.hasUpdatedKey = await this.cryptoService.hasEncKey();
+    const canAccessPremium = await this.stateService.getCanAccessPremium();
+    this.canAccessAttachments = canAccessPremium || this.cipher.organizationId != null;
+
+    if (!this.canAccessAttachments) {
+      const confirmed = await this.platformUtilsService.showDialog(
+        this.i18nService.t("premiumRequiredDesc"),
+        this.i18nService.t("premiumRequired"),
+        this.i18nService.t("learnMore"),
+        this.i18nService.t("cancel")
+      );
+      if (confirmed) {
+        this.platformUtilsService.launchUri("https://vault.bitwarden.com/#/?premium=purchase");
+      }
+    } else if (!this.hasUpdatedKey) {
+      const confirmed = await this.platformUtilsService.showDialog(
+        this.i18nService.t("updateKey"),
+        this.i18nService.t("featureUnavailable"),
+        this.i18nService.t("learnMore"),
+        this.i18nService.t("cancel"),
+        "warning"
+      );
+      if (confirmed) {
+        this.platformUtilsService.launchUri(
+          "https://help.bitwarden.com/article/update-encryption-key/"
+        );
+      }
+    }
+  }
 
-        if (!this.canAccessAttachments) {
-            const confirmed = await this.platformUtilsService.showDialog(
-                this.i18nService.t('premiumRequiredDesc'), this.i18nService.t('premiumRequired'),
-                this.i18nService.t('learnMore'), this.i18nService.t('cancel'));
-            if (confirmed) {
-                this.platformUtilsService.launchUri('https://vault.bitwarden.com/#/?premium=purchase');
-            }
-        } else if (!this.hasUpdatedKey) {
-            const confirmed = await this.platformUtilsService.showDialog(
-                this.i18nService.t('updateKey'), this.i18nService.t('featureUnavailable'),
-                this.i18nService.t('learnMore'), this.i18nService.t('cancel'), 'warning');
-            if (confirmed) {
-                this.platformUtilsService.launchUri('https://help.bitwarden.com/article/update-encryption-key/');
-            }
-        }
+  protected async reuploadCipherAttachment(attachment: AttachmentView, admin: boolean) {
+    const a = attachment as any;
+    if (attachment.key != null || a.downloading || this.reuploadPromises[attachment.id] != null) {
+      return;
     }
 
-    protected async reuploadCipherAttachment(attachment: AttachmentView, admin: boolean) {
-        const a = (attachment as any);
-        if (attachment.key != null || a.downloading || this.reuploadPromises[attachment.id] != null) {
-            return;
+    try {
+      this.reuploadPromises[attachment.id] = Promise.resolve().then(async () => {
+        // 1. Download
+        a.downloading = true;
+        const response = await fetch(new Request(attachment.url, { cache: "no-store" }));
+        if (response.status !== 200) {
+          this.platformUtilsService.showToast("error", null, this.i18nService.t("errorOccurred"));
+          a.downloading = false;
+          return;
         }
 
         try {
-            this.reuploadPromises[attachment.id] = Promise.resolve().then(async () => {
-                // 1. Download
-                a.downloading = true;
-                const response = await fetch(new Request(attachment.url, { cache: 'no-store' }));
-                if (response.status !== 200) {
-                    this.platformUtilsService.showToast('error', null, this.i18nService.t('errorOccurred'));
-                    a.downloading = false;
-                    return;
-                }
-
-                try {
-                    // 2. Resave
-                    const buf = await response.arrayBuffer();
-                    const key = attachment.key != null ? attachment.key :
-                        await this.cryptoService.getOrgKey(this.cipher.organizationId);
-                    const decBuf = await this.cryptoService.decryptFromBytes(buf, key);
-                    this.cipherDomain = await this.cipherService.saveAttachmentRawWithServer(
-                        this.cipherDomain, attachment.fileName, decBuf, admin);
-                    this.cipher = await this.cipherDomain.decrypt();
-
-                    // 3. Delete old
-                    this.deletePromises[attachment.id] = this.deleteCipherAttachment(attachment.id);
-                    await this.deletePromises[attachment.id];
-                    const foundAttachment = this.cipher.attachments.filter(a2 => a2.id === attachment.id);
-                    if (foundAttachment.length > 0) {
-                        const i = this.cipher.attachments.indexOf(foundAttachment[0]);
-                        if (i > -1) {
-                            this.cipher.attachments.splice(i, 1);
-                        }
-                    }
-
-                    this.platformUtilsService.showToast('success', null, this.i18nService.t('attachmentSaved'));
-                    this.onReuploadedAttachment.emit();
-                } catch (e) {
-                    this.platformUtilsService.showToast('error', null, this.i18nService.t('errorOccurred'));
-                }
-
-                a.downloading = false;
-            });
-            await this.reuploadPromises[attachment.id];
+          // 2. Resave
+          const buf = await response.arrayBuffer();
+          const key =
+            attachment.key != null
+              ? attachment.key
+              : await this.cryptoService.getOrgKey(this.cipher.organizationId);
+          const decBuf = await this.cryptoService.decryptFromBytes(buf, key);
+          this.cipherDomain = await this.cipherService.saveAttachmentRawWithServer(
+            this.cipherDomain,
+            attachment.fileName,
+            decBuf,
+            admin
+          );
+          this.cipher = await this.cipherDomain.decrypt();
+
+          // 3. Delete old
+          this.deletePromises[attachment.id] = this.deleteCipherAttachment(attachment.id);
+          await this.deletePromises[attachment.id];
+          const foundAttachment = this.cipher.attachments.filter((a2) => a2.id === attachment.id);
+          if (foundAttachment.length > 0) {
+            const i = this.cipher.attachments.indexOf(foundAttachment[0]);
+            if (i > -1) {
+              this.cipher.attachments.splice(i, 1);
+            }
+          }
+
+          this.platformUtilsService.showToast(
+            "success",
+            null,
+            this.i18nService.t("attachmentSaved")
+          );
+          this.onReuploadedAttachment.emit();
         } catch (e) {
-            this.logService.error(e);
+          this.platformUtilsService.showToast("error", null, this.i18nService.t("errorOccurred"));
         }
-    }
 
-    protected loadCipher() {
-        return this.cipherService.get(this.cipherId);
+        a.downloading = false;
+      });
+      await this.reuploadPromises[attachment.id];
+    } catch (e) {
+      this.logService.error(e);
     }
+  }
 
-    protected saveCipherAttachment(file: File) {
-        return this.cipherService.saveAttachmentWithServer(this.cipherDomain, file);
-    }
+  protected loadCipher() {
+    return this.cipherService.get(this.cipherId);
+  }
 
-    protected deleteCipherAttachment(attachmentId: string) {
-        return this.cipherService.deleteAttachmentWithServer(this.cipher.id, attachmentId);
-    }
+  protected saveCipherAttachment(file: File) {
+    return this.cipherService.saveAttachmentWithServer(this.cipherDomain, file);
+  }
+
+  protected deleteCipherAttachment(attachmentId: string) {
+    return this.cipherService.deleteAttachmentWithServer(this.cipher.id, attachmentId);
+  }
 }
diff --git a/jslib/angular/src/components/avatar.component.ts b/jslib/angular/src/components/avatar.component.ts
index 1760c521..e00a68a8 100644
--- a/jslib/angular/src/components/avatar.component.ts
+++ b/jslib/angular/src/components/avatar.component.ts
@@ -1,138 +1,143 @@
-import {
-    Component,
-    Input,
-    OnChanges,
-    OnInit,
-} from '@angular/core';
-import { DomSanitizer } from '@angular/platform-browser';
+import { Component, Input, OnChanges, OnInit } from "@angular/core";
+import { DomSanitizer } from "@angular/platform-browser";
 
-import { CryptoFunctionService } from 'jslib-common/abstractions/cryptoFunction.service';
-import { StateService } from 'jslib-common/abstractions/state.service';
+import { CryptoFunctionService } from "jslib-common/abstractions/cryptoFunction.service";
+import { StateService } from "jslib-common/abstractions/state.service";
 
-import { Utils } from 'jslib-common/misc/utils';
+import { Utils } from "jslib-common/misc/utils";
 
 @Component({
-    selector: 'app-avatar',
-    template: '<img [src]="sanitizer.bypassSecurityTrustResourceUrl(src)" title="{{data}}" ' +
-        '[ngClass]="{\'rounded-circle\': circle}">',
+  selector: "app-avatar",
+  template:
+    '<img [src]="sanitizer.bypassSecurityTrustResourceUrl(src)" title="{{data}}" ' +
+    "[ngClass]=\"{'rounded-circle': circle}\">",
 })
 export class AvatarComponent implements OnChanges, OnInit {
-    @Input() data: string;
-    @Input() email: string;
-    @Input() size = 45;
-    @Input() charCount = 2;
-    @Input() textColor = '#ffffff';
-    @Input() fontSize = 20;
-    @Input() fontWeight = 300;
-    @Input() dynamic = false;
-    @Input() circle = false;
-
-    src: string;
-
-    constructor(public sanitizer: DomSanitizer, private cryptoFunctionService: CryptoFunctionService,
-        private stateService: StateService) { }
-
-    ngOnInit() {
-        if (!this.dynamic) {
-            this.generate();
-        }
+  @Input() data: string;
+  @Input() email: string;
+  @Input() size = 45;
+  @Input() charCount = 2;
+  @Input() textColor = "#ffffff";
+  @Input() fontSize = 20;
+  @Input() fontWeight = 300;
+  @Input() dynamic = false;
+  @Input() circle = false;
+
+  src: string;
+
+  constructor(
+    public sanitizer: DomSanitizer,
+    private cryptoFunctionService: CryptoFunctionService,
+    private stateService: StateService
+  ) {}
+
+  ngOnInit() {
+    if (!this.dynamic) {
+      this.generate();
     }
+  }
 
-    ngOnChanges() {
-        if (this.dynamic) {
-            this.generate();
-        }
+  ngOnChanges() {
+    if (this.dynamic) {
+      this.generate();
     }
-
-    private async generate() {
-        const enableGravatars = await this.stateService.get<boolean>('enableGravatars');
-        if (enableGravatars && this.email != null) {
-            const hashBytes = await this.cryptoFunctionService.hash(this.email.toLowerCase().trim(), 'md5');
-            const hash = Utils.fromBufferToHex(hashBytes).toLowerCase();
-            this.src = 'https://www.gravatar.com/avatar/' + hash + '?s=' + this.size + '&r=pg&d=retro';
-        } else {
-            let chars: string = null;
-            const upperData = this.data.toUpperCase();
-
-            if (this.charCount > 1) {
-                chars = this.getFirstLetters(upperData, this.charCount);
-            }
-            if (chars == null) {
-                chars = this.unicodeSafeSubstring(upperData, this.charCount);
-            }
-
-            // If the chars contain an emoji, only show it.
-            if (chars.match(Utils.regexpEmojiPresentation)) {
-                chars = chars.match(Utils.regexpEmojiPresentation)[0];
-            }
-
-            const charObj = this.getCharText(chars);
-            const color = this.stringToColor(upperData);
-            const svg = this.getSvg(this.size, color);
-            svg.appendChild(charObj);
-            const html = window.document.createElement('div').appendChild(svg).outerHTML;
-            const svgHtml = window.btoa(unescape(encodeURIComponent(html)));
-            this.src = 'data:image/svg+xml;base64,' + svgHtml;
-        }
-    }
-
-    private stringToColor(str: string): string {
-        let hash = 0;
-        for (let i = 0; i < str.length; i++) {
-            // tslint:disable-next-line
-            hash = str.charCodeAt(i) + ((hash << 5) - hash);
-        }
-        let color = '#';
-        for (let i = 0; i < 3; i++) {
-            // tslint:disable-next-line
-            const value = (hash >> (i * 8)) & 0xFF;
-            color += ('00' + value.toString(16)).substr(-2);
-        }
-        return color;
+  }
+
+  private async generate() {
+    const enableGravatars = await this.stateService.getEnableGravitars();
+    if (enableGravatars && this.email != null) {
+      const hashBytes = await this.cryptoFunctionService.hash(
+        this.email.toLowerCase().trim(),
+        "md5"
+      );
+      const hash = Utils.fromBufferToHex(hashBytes).toLowerCase();
+      this.src = "https://www.gravatar.com/avatar/" + hash + "?s=" + this.size + "&r=pg&d=retro";
+    } else {
+      let chars: string = null;
+      const upperData = this.data.toUpperCase();
+
+      if (this.charCount > 1) {
+        chars = this.getFirstLetters(upperData, this.charCount);
+      }
+      if (chars == null) {
+        chars = this.unicodeSafeSubstring(upperData, this.charCount);
+      }
+
+      // If the chars contain an emoji, only show it.
+      if (chars.match(Utils.regexpEmojiPresentation)) {
+        chars = chars.match(Utils.regexpEmojiPresentation)[0];
+      }
+
+      const charObj = this.getCharText(chars);
+      const color = this.stringToColor(upperData);
+      const svg = this.getSvg(this.size, color);
+      svg.appendChild(charObj);
+      const html = window.document.createElement("div").appendChild(svg).outerHTML;
+      const svgHtml = window.btoa(unescape(encodeURIComponent(html)));
+      this.src = "data:image/svg+xml;base64," + svgHtml;
     }
+  }
 
-    private getFirstLetters(data: string, count: number): string {
-        const parts = data.split(' ');
-        if (parts.length > 1) {
-            let text = '';
-            for (let i = 0; i < count; i++) {
-                text += this.unicodeSafeSubstring(parts[i], 1);
-            }
-            return text;
-        }
-        return null;
+  private stringToColor(str: string): string {
+    let hash = 0;
+    for (let i = 0; i < str.length; i++) {
+      // tslint:disable-next-line
+      hash = str.charCodeAt(i) + ((hash << 5) - hash);
     }
-
-    private getSvg(size: number, color: string): HTMLElement {
-        const svgTag = window.document.createElement('svg');
-        svgTag.setAttribute('xmlns', 'http://www.w3.org/2000/svg');
-        svgTag.setAttribute('pointer-events', 'none');
-        svgTag.setAttribute('width', size.toString());
-        svgTag.setAttribute('height', size.toString());
-        svgTag.style.backgroundColor = color;
-        svgTag.style.width = size + 'px';
-        svgTag.style.height = size + 'px';
-        return svgTag;
+    let color = "#";
+    for (let i = 0; i < 3; i++) {
+      // tslint:disable-next-line
+      const value = (hash >> (i * 8)) & 0xff;
+      color += ("00" + value.toString(16)).substr(-2);
     }
-
-    private getCharText(character: string): HTMLElement {
-        const textTag = window.document.createElement('text');
-        textTag.setAttribute('text-anchor', 'middle');
-        textTag.setAttribute('y', '50%');
-        textTag.setAttribute('x', '50%');
-        textTag.setAttribute('dy', '0.35em');
-        textTag.setAttribute('pointer-events', 'auto');
-        textTag.setAttribute('fill', this.textColor);
-        textTag.setAttribute('font-family', '"Open Sans","Helvetica Neue",Helvetica,Arial,' +
-            'sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"');
-        textTag.textContent = character;
-        textTag.style.fontWeight = this.fontWeight.toString();
-        textTag.style.fontSize = this.fontSize + 'px';
-        return textTag;
-    }
-
-    private unicodeSafeSubstring(str: string, count: number) {
-        const characters = str.match(/./ug);
-        return characters != null ? characters.slice(0, count).join('') : '';
+    return color;
+  }
+
+  private getFirstLetters(data: string, count: number): string {
+    const parts = data.split(" ");
+    if (parts.length > 1) {
+      let text = "";
+      for (let i = 0; i < count; i++) {
+        text += this.unicodeSafeSubstring(parts[i], 1);
+      }
+      return text;
     }
+    return null;
+  }
+
+  private getSvg(size: number, color: string): HTMLElement {
+    const svgTag = window.document.createElement("svg");
+    svgTag.setAttribute("xmlns", "http://www.w3.org/2000/svg");
+    svgTag.setAttribute("pointer-events", "none");
+    svgTag.setAttribute("width", size.toString());
+    svgTag.setAttribute("height", size.toString());
+    svgTag.style.backgroundColor = color;
+    svgTag.style.width = size + "px";
+    svgTag.style.height = size + "px";
+    return svgTag;
+  }
+
+  private getCharText(character: string): HTMLElement {
+    const textTag = window.document.createElement("text");
+    textTag.setAttribute("text-anchor", "middle");
+    textTag.setAttribute("y", "50%");
+    textTag.setAttribute("x", "50%");
+    textTag.setAttribute("dy", "0.35em");
+    textTag.setAttribute("pointer-events", "auto");
+    textTag.setAttribute("fill", this.textColor);
+    textTag.setAttribute(
+      "font-family",
+      '"Open Sans","Helvetica Neue",Helvetica,Arial,' +
+        'sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"'
+    );
+    textTag.textContent = character;
+    textTag.style.fontWeight = this.fontWeight.toString();
+    textTag.style.fontSize = this.fontSize + "px";
+    return textTag;
+  }
+
+  private unicodeSafeSubstring(str: string, count: number) {
+    const characters = str.match(/./gu);
+    return characters != null ? characters.slice(0, count).join("") : "";
+  }
 }
diff --git a/jslib/angular/src/components/callout.component.html b/jslib/angular/src/components/callout.component.html
index 53fc6647..a049d5cb 100644
--- a/jslib/angular/src/components/callout.component.html
+++ b/jslib/angular/src/components/callout.component.html
@@ -1,27 +1,35 @@
-<div #callout class="callout callout-{{calloutStyle}}" [ngClass]="{'clickable': clickable}"
-    [attr.role]="useAlertRole ? 'alert' : null">
-    <h3 class="callout-heading" *ngIf="title">
-        <i class="fa {{icon}}" *ngIf="icon" aria-hidden="true"></i>
-        {{title}}
-    </h3>
-    <div class="enforced-policy-options" *ngIf="enforcedPolicyOptions">
-        {{enforcedPolicyMessage}}
-        <ul>
-            <li *ngIf="enforcedPolicyOptions?.minComplexity > 0">
-                {{'policyInEffectMinComplexity' | i18n : getPasswordScoreAlertDisplay()}}
-            </li>
-            <li *ngIf="enforcedPolicyOptions?.minLength > 0">
-                {{'policyInEffectMinLength' | i18n : enforcedPolicyOptions?.minLength.toString()}}
-            </li>
-            <li *ngIf="enforcedPolicyOptions?.requireUpper">
-                {{'policyInEffectUppercase' | i18n}}</li>
-            <li *ngIf="enforcedPolicyOptions?.requireLower">
-                {{'policyInEffectLowercase' | i18n}}</li>
-            <li *ngIf="enforcedPolicyOptions?.requireNumbers">
-                {{'policyInEffectNumbers' | i18n}}</li>
-            <li *ngIf="enforcedPolicyOptions?.requireSpecial">
-                {{'policyInEffectSpecial' | i18n : '!@#$%^&*'}}</li>
-        </ul>
-    </div>
-    <ng-content></ng-content>
+<div
+  #callout
+  class="callout callout-{{ calloutStyle }}"
+  [ngClass]="{ clickable: clickable }"
+  [attr.role]="useAlertRole ? 'alert' : null"
+>
+  <h3 class="callout-heading" *ngIf="title">
+    <i class="bwi {{ icon }}" *ngIf="icon" aria-hidden="true"></i>
+    {{ title }}
+  </h3>
+  <div class="enforced-policy-options" *ngIf="enforcedPolicyOptions">
+    {{ enforcedPolicyMessage }}
+    <ul>
+      <li *ngIf="enforcedPolicyOptions?.minComplexity > 0">
+        {{ "policyInEffectMinComplexity" | i18n: getPasswordScoreAlertDisplay() }}
+      </li>
+      <li *ngIf="enforcedPolicyOptions?.minLength > 0">
+        {{ "policyInEffectMinLength" | i18n: enforcedPolicyOptions?.minLength.toString() }}
+      </li>
+      <li *ngIf="enforcedPolicyOptions?.requireUpper">
+        {{ "policyInEffectUppercase" | i18n }}
+      </li>
+      <li *ngIf="enforcedPolicyOptions?.requireLower">
+        {{ "policyInEffectLowercase" | i18n }}
+      </li>
+      <li *ngIf="enforcedPolicyOptions?.requireNumbers">
+        {{ "policyInEffectNumbers" | i18n }}
+      </li>
+      <li *ngIf="enforcedPolicyOptions?.requireSpecial">
+        {{ "policyInEffectSpecial" | i18n: "!@#$%^&*" }}
+      </li>
+    </ul>
+  </div>
+  <ng-content></ng-content>
 </div>
diff --git a/jslib/angular/src/components/callout.component.ts b/jslib/angular/src/components/callout.component.ts
index 566d017a..b9685f0e 100644
--- a/jslib/angular/src/components/callout.component.ts
+++ b/jslib/angular/src/components/callout.component.ts
@@ -1,83 +1,79 @@
-import {
-    Component,
-    Input,
-    OnInit,
-} from '@angular/core';
+import { Component, Input, OnInit } from "@angular/core";
 
-import { I18nService } from 'jslib-common/abstractions/i18n.service';
+import { I18nService } from "jslib-common/abstractions/i18n.service";
 
-import { MasterPasswordPolicyOptions } from 'jslib-common/models/domain/masterPasswordPolicyOptions';
+import { MasterPasswordPolicyOptions } from "jslib-common/models/domain/masterPasswordPolicyOptions";
 
 @Component({
-    selector: 'app-callout',
-    templateUrl: 'callout.component.html',
+  selector: "app-callout",
+  templateUrl: "callout.component.html",
 })
 export class CalloutComponent implements OnInit {
-    @Input() type = 'info';
-    @Input() icon: string;
-    @Input() title: string;
-    @Input() clickable: boolean;
-    @Input() enforcedPolicyOptions: MasterPasswordPolicyOptions;
-    @Input() enforcedPolicyMessage: string;
-    @Input() useAlertRole = false;
+  @Input() type = "info";
+  @Input() icon: string;
+  @Input() title: string;
+  @Input() clickable: boolean;
+  @Input() enforcedPolicyOptions: MasterPasswordPolicyOptions;
+  @Input() enforcedPolicyMessage: string;
+  @Input() useAlertRole = false;
 
-    calloutStyle: string;
+  calloutStyle: string;
 
-    constructor(private i18nService: I18nService) { }
+  constructor(private i18nService: I18nService) {}
 
-    ngOnInit() {
-        this.calloutStyle = this.type;
+  ngOnInit() {
+    this.calloutStyle = this.type;
 
-        if (this.enforcedPolicyMessage === undefined) {
-            this.enforcedPolicyMessage = this.i18nService.t('masterPasswordPolicyInEffect');
-        }
+    if (this.enforcedPolicyMessage === undefined) {
+      this.enforcedPolicyMessage = this.i18nService.t("masterPasswordPolicyInEffect");
+    }
 
-        if (this.type === 'warning' || this.type === 'danger') {
-            if (this.type === 'danger') {
-                this.calloutStyle = 'danger';
-            }
-            if (this.title === undefined) {
-                this.title = this.i18nService.t('warning');
-            }
-            if (this.icon === undefined) {
-                this.icon = 'fa-warning';
-            }
-        } else if (this.type === 'error') {
-            this.calloutStyle = 'danger';
-            if (this.title === undefined) {
-                this.title = this.i18nService.t('error');
-            }
-            if (this.icon === undefined) {
-                this.icon = 'fa-bolt';
-            }
-        } else if (this.type === 'tip') {
-            this.calloutStyle = 'success';
-            if (this.title === undefined) {
-                this.title = this.i18nService.t('tip');
-            }
-            if (this.icon === undefined) {
-                this.icon = 'fa-lightbulb-o';
-            }
-        }
+    if (this.type === "warning" || this.type === "danger") {
+      if (this.type === "danger") {
+        this.calloutStyle = "danger";
+      }
+      if (this.title === undefined) {
+        this.title = this.i18nService.t("warning");
+      }
+      if (this.icon === undefined) {
+        this.icon = "bwi-exclamation-triangle";
+      }
+    } else if (this.type === "error") {
+      this.calloutStyle = "danger";
+      if (this.title === undefined) {
+        this.title = this.i18nService.t("error");
+      }
+      if (this.icon === undefined) {
+        this.icon = "bwi-error";
+      }
+    } else if (this.type === "tip") {
+      this.calloutStyle = "success";
+      if (this.title === undefined) {
+        this.title = this.i18nService.t("tip");
+      }
+      if (this.icon === undefined) {
+        this.icon = "bwi-lightbulb";
+      }
     }
+  }
 
-    getPasswordScoreAlertDisplay() {
-        if (this.enforcedPolicyOptions == null) {
-            return '';
-        }
+  getPasswordScoreAlertDisplay() {
+    if (this.enforcedPolicyOptions == null) {
+      return "";
+    }
 
-        let str: string;
-        switch (this.enforcedPolicyOptions.minComplexity) {
-            case 4:
-                str = this.i18nService.t('strong');
-                break;
-            case 3:
-                str = this.i18nService.t('good');
-                break;
-            default:
-                str = this.i18nService.t('weak');
-                break;
-        }
-        return str + ' (' + this.enforcedPolicyOptions.minComplexity + ')';
+    let str: string;
+    switch (this.enforcedPolicyOptions.minComplexity) {
+      case 4:
+        str = this.i18nService.t("strong");
+        break;
+      case 3:
+        str = this.i18nService.t("good");
+        break;
+      default:
+        str = this.i18nService.t("weak");
+        break;
     }
+    return str + " (" + this.enforcedPolicyOptions.minComplexity + ")";
+  }
 }
diff --git a/jslib/angular/src/components/captchaProtected.component.ts b/jslib/angular/src/components/captchaProtected.component.ts
index f2c92d0f..d13f7151 100644
--- a/jslib/angular/src/components/captchaProtected.component.ts
+++ b/jslib/angular/src/components/captchaProtected.component.ts
@@ -1,47 +1,55 @@
-import { Directive, Input } from '@angular/core';
+import { Directive, Input } from "@angular/core";
 
-import { EnvironmentService } from 'jslib-common/abstractions/environment.service';
-import { I18nService } from 'jslib-common/abstractions/i18n.service';
-import { PlatformUtilsService } from 'jslib-common/abstractions/platformUtils.service';
+import { EnvironmentService } from "jslib-common/abstractions/environment.service";
+import { I18nService } from "jslib-common/abstractions/i18n.service";
+import { PlatformUtilsService } from "jslib-common/abstractions/platformUtils.service";
 
-import { CaptchaIFrame } from 'jslib-common/misc/captcha_iframe';
+import { CaptchaIFrame } from "jslib-common/misc/captcha_iframe";
 
-import { Utils } from 'jslib-common/misc/utils';
+import { Utils } from "jslib-common/misc/utils";
 
 @Directive()
 export abstract class CaptchaProtectedComponent {
-    @Input() captchaSiteKey: string = null;
-    captchaToken: string = null;
-    captcha: CaptchaIFrame;
-
-    constructor(protected environmentService: EnvironmentService, protected i18nService: I18nService,
-        protected platformUtilsService: PlatformUtilsService) { }
-
-    async setupCaptcha() {
-        const webVaultUrl = this.environmentService.getWebVaultUrl();
-
-        this.captcha = new CaptchaIFrame(window, webVaultUrl,
-            this.i18nService, (token: string) => {
-                this.captchaToken = token;
-            }, (error: string) => {
-                this.platformUtilsService.showToast('error', this.i18nService.t('errorOccurred'), error);
-            }, (info: string) => {
-                this.platformUtilsService.showToast('info', this.i18nService.t('info'), info);
-            }
-        );
+  @Input() captchaSiteKey: string = null;
+  captchaToken: string = null;
+  captcha: CaptchaIFrame;
+
+  constructor(
+    protected environmentService: EnvironmentService,
+    protected i18nService: I18nService,
+    protected platformUtilsService: PlatformUtilsService
+  ) {}
+
+  async setupCaptcha() {
+    const webVaultUrl = this.environmentService.getWebVaultUrl();
+
+    this.captcha = new CaptchaIFrame(
+      window,
+      webVaultUrl,
+      this.i18nService,
+      (token: string) => {
+        this.captchaToken = token;
+      },
+      (error: string) => {
+        this.platformUtilsService.showToast("error", this.i18nService.t("errorOccurred"), error);
+      },
+      (info: string) => {
+        this.platformUtilsService.showToast("info", this.i18nService.t("info"), info);
+      }
+    );
+  }
+
+  showCaptcha() {
+    return !Utils.isNullOrWhitespace(this.captchaSiteKey);
+  }
+
+  protected handleCaptchaRequired(response: { captchaSiteKey: string }): boolean {
+    if (Utils.isNullOrWhitespace(response.captchaSiteKey)) {
+      return false;
     }
 
-    showCaptcha() {
-        return !Utils.isNullOrWhitespace(this.captchaSiteKey);
-    }
-
-    protected handleCaptchaRequired(response: { captchaSiteKey: string; }): boolean {
-        if (Utils.isNullOrWhitespace(response.captchaSiteKey)) {
-            return false;
-        }
-
-        this.captchaSiteKey = response.captchaSiteKey;
-        this.captcha.init(response.captchaSiteKey);
-        return true;
-    }
+    this.captchaSiteKey = response.captchaSiteKey;
+    this.captcha.init(response.captchaSiteKey);
+    return true;
+  }
 }
diff --git a/jslib/angular/src/components/change-password.component.ts b/jslib/angular/src/components/change-password.component.ts
index 5af79115..2431ece2 100644
--- a/jslib/angular/src/components/change-password.component.ts
+++ b/jslib/angular/src/components/change-password.component.ts
@@ -1,152 +1,197 @@
-import { Directive, OnInit } from '@angular/core';
+import { Directive, OnInit } from "@angular/core";
 
-import { CryptoService } from 'jslib-common/abstractions/crypto.service';
-import { I18nService } from 'jslib-common/abstractions/i18n.service';
-import { MessagingService } from 'jslib-common/abstractions/messaging.service';
-import { PasswordGenerationService } from 'jslib-common/abstractions/passwordGeneration.service';
-import { PlatformUtilsService } from 'jslib-common/abstractions/platformUtils.service';
-import { PolicyService } from 'jslib-common/abstractions/policy.service';
-import { UserService } from 'jslib-common/abstractions/user.service';
+import { CryptoService } from "jslib-common/abstractions/crypto.service";
+import { I18nService } from "jslib-common/abstractions/i18n.service";
+import { MessagingService } from "jslib-common/abstractions/messaging.service";
+import { PasswordGenerationService } from "jslib-common/abstractions/passwordGeneration.service";
+import { PlatformUtilsService } from "jslib-common/abstractions/platformUtils.service";
+import { PolicyService } from "jslib-common/abstractions/policy.service";
+import { StateService } from "jslib-common/abstractions/state.service";
 
-import { EncString } from 'jslib-common/models/domain/encString';
-import { MasterPasswordPolicyOptions } from 'jslib-common/models/domain/masterPasswordPolicyOptions';
-import { SymmetricCryptoKey } from 'jslib-common/models/domain/symmetricCryptoKey';
+import { EncString } from "jslib-common/models/domain/encString";
+import { MasterPasswordPolicyOptions } from "jslib-common/models/domain/masterPasswordPolicyOptions";
+import { SymmetricCryptoKey } from "jslib-common/models/domain/symmetricCryptoKey";
 
-import { KdfType } from 'jslib-common/enums/kdfType';
+import { KdfType } from "jslib-common/enums/kdfType";
 
 @Directive()
 export class ChangePasswordComponent implements OnInit {
-    masterPassword: string;
-    masterPasswordRetype: string;
-    formPromise: Promise<any>;
-    masterPasswordScore: number;
-    enforcedPolicyOptions: MasterPasswordPolicyOptions;
-
-    protected email: string;
-    protected kdf: KdfType;
-    protected kdfIterations: number;
-
-    private masterPasswordStrengthTimeout: any;
-
-    constructor(protected i18nService: I18nService, protected cryptoService: CryptoService,
-        protected messagingService: MessagingService, protected userService: UserService,
-        protected passwordGenerationService: PasswordGenerationService,
-        protected platformUtilsService: PlatformUtilsService, protected policyService: PolicyService) { }
-
-    async ngOnInit() {
-        this.email = await this.userService.getEmail();
-        this.enforcedPolicyOptions = await this.policyService.getMasterPasswordPolicyOptions();
+  masterPassword: string;
+  masterPasswordRetype: string;
+  formPromise: Promise<any>;
+  masterPasswordScore: number;
+  enforcedPolicyOptions: MasterPasswordPolicyOptions;
+
+  protected email: string;
+  protected kdf: KdfType;
+  protected kdfIterations: number;
+
+  private masterPasswordStrengthTimeout: any;
+
+  constructor(
+    protected i18nService: I18nService,
+    protected cryptoService: CryptoService,
+    protected messagingService: MessagingService,
+    protected passwordGenerationService: PasswordGenerationService,
+    protected platformUtilsService: PlatformUtilsService,
+    protected policyService: PolicyService,
+    protected stateService: StateService
+  ) {}
+
+  async ngOnInit() {
+    this.email = await this.stateService.getEmail();
+    this.enforcedPolicyOptions ??= await this.policyService.getMasterPasswordPolicyOptions();
+  }
+
+  async submit() {
+    if (!(await this.strongPassword())) {
+      return;
     }
 
-    async submit() {
-        if (!await this.strongPassword()) {
-            return;
-        }
-
-        if (!await this.setupSubmitActions()) {
-            return;
-        }
-
-        const email = await this.userService.getEmail();
-        if (this.kdf == null) {
-            this.kdf = await this.userService.getKdf();
-        }
-        if (this.kdfIterations == null) {
-            this.kdfIterations = await this.userService.getKdfIterations();
-        }
-        const key = await this.cryptoService.makeKey(this.masterPassword, email.trim().toLowerCase(),
-            this.kdf, this.kdfIterations);
-        const masterPasswordHash = await this.cryptoService.hashPassword(this.masterPassword, key);
-
-        let encKey: [SymmetricCryptoKey, EncString] = null;
-        const existingEncKey = await this.cryptoService.getEncKey();
-        if (existingEncKey == null) {
-            encKey = await this.cryptoService.makeEncKey(key);
-        } else {
-            encKey = await this.cryptoService.remakeEncKey(key);
-        }
-
-        await this.performSubmitActions(masterPasswordHash, key, encKey);
+    if (!(await this.setupSubmitActions())) {
+      return;
     }
 
-    async setupSubmitActions(): Promise<boolean> {
-        // Override in sub-class
-        // Can be used for additional validation and/or other processes the should occur before changing passwords
-        return true;
+    const email = await this.stateService.getEmail();
+    if (this.kdf == null) {
+      this.kdf = await this.stateService.getKdfType();
     }
-
-    async performSubmitActions(masterPasswordHash: string, key: SymmetricCryptoKey,
-        encKey: [SymmetricCryptoKey, EncString]) {
-        // Override in sub-class
+    if (this.kdfIterations == null) {
+      this.kdfIterations = await this.stateService.getKdfIterations();
+    }
+    const key = await this.cryptoService.makeKey(
+      this.masterPassword,
+      email.trim().toLowerCase(),
+      this.kdf,
+      this.kdfIterations
+    );
+    const masterPasswordHash = await this.cryptoService.hashPassword(this.masterPassword, key);
+
+    let encKey: [SymmetricCryptoKey, EncString] = null;
+    const existingEncKey = await this.cryptoService.getEncKey();
+    if (existingEncKey == null) {
+      encKey = await this.cryptoService.makeEncKey(key);
+    } else {
+      encKey = await this.cryptoService.remakeEncKey(key);
     }
 
-    async strongPassword(): Promise<boolean> {
-        if (this.masterPassword == null || this.masterPassword === '') {
-            this.platformUtilsService.showToast('error', this.i18nService.t('errorOccurred'),
-                this.i18nService.t('masterPassRequired'));
-            return false;
-        }
-        if (this.masterPassword.length < 8) {
-            this.platformUtilsService.showToast('error', this.i18nService.t('errorOccurred'),
-                this.i18nService.t('masterPassLength'));
-            return false;
-        }
-        if (this.masterPassword !== this.masterPasswordRetype) {
-            this.platformUtilsService.showToast('error', this.i18nService.t('errorOccurred'),
-                this.i18nService.t('masterPassDoesntMatch'));
-            return false;
-        }
-
-        const strengthResult = this.passwordGenerationService.passwordStrength(this.masterPassword,
-            this.getPasswordStrengthUserInput());
-
-        if (this.enforcedPolicyOptions != null &&
-            !this.policyService.evaluateMasterPassword(
-                strengthResult.score,
-                this.masterPassword,
-                this.enforcedPolicyOptions)) {
-            this.platformUtilsService.showToast('error', this.i18nService.t('errorOccurred'),
-                this.i18nService.t('masterPasswordPolicyRequirementsNotMet'));
-            return false;
-        }
-
-        if (strengthResult != null && strengthResult.score < 3) {
-            const result = await this.platformUtilsService.showDialog(this.i18nService.t('weakMasterPasswordDesc'),
-                this.i18nService.t('weakMasterPassword'), this.i18nService.t('yes'), this.i18nService.t('no'),
-                'warning');
-            if (!result) {
-                return false;
-            }
-        }
-
-        return true;
+    await this.performSubmitActions(masterPasswordHash, key, encKey);
+  }
+
+  async setupSubmitActions(): Promise<boolean> {
+    // Override in sub-class
+    // Can be used for additional validation and/or other processes the should occur before changing passwords
+    return true;
+  }
+
+  async performSubmitActions(
+    masterPasswordHash: string,
+    key: SymmetricCryptoKey,
+    encKey: [SymmetricCryptoKey, EncString]
+  ) {
+    // Override in sub-class
+  }
+
+  async strongPassword(): Promise<boolean> {
+    if (this.masterPassword == null || this.masterPassword === "") {
+      this.platformUtilsService.showToast(
+        "error",
+        this.i18nService.t("errorOccurred"),
+        this.i18nService.t("masterPassRequired")
+      );
+      return false;
+    }
+    if (this.masterPassword.length < 8) {
+      this.platformUtilsService.showToast(
+        "error",
+        this.i18nService.t("errorOccurred"),
+        this.i18nService.t("masterPassLength")
+      );
+      return false;
+    }
+    if (this.masterPassword !== this.masterPasswordRetype) {
+      this.platformUtilsService.showToast(
+        "error",
+        this.i18nService.t("errorOccurred"),
+        this.i18nService.t("masterPassDoesntMatch")
+      );
+      return false;
     }
 
-    updatePasswordStrength() {
-        if (this.masterPasswordStrengthTimeout != null) {
-            clearTimeout(this.masterPasswordStrengthTimeout);
-        }
-        this.masterPasswordStrengthTimeout = setTimeout(() => {
-            const strengthResult = this.passwordGenerationService.passwordStrength(this.masterPassword,
-                this.getPasswordStrengthUserInput());
-            this.masterPasswordScore = strengthResult == null ? null : strengthResult.score;
-        }, 300);
+    const strengthResult = this.passwordGenerationService.passwordStrength(
+      this.masterPassword,
+      this.getPasswordStrengthUserInput()
+    );
+
+    if (
+      this.enforcedPolicyOptions != null &&
+      !this.policyService.evaluateMasterPassword(
+        strengthResult.score,
+        this.masterPassword,
+        this.enforcedPolicyOptions
+      )
+    ) {
+      this.platformUtilsService.showToast(
+        "error",
+        this.i18nService.t("errorOccurred"),
+        this.i18nService.t("masterPasswordPolicyRequirementsNotMet")
+      );
+      return false;
     }
 
-    async logOut() {
-        const confirmed = await this.platformUtilsService.showDialog(this.i18nService.t('logOutConfirmation'),
-            this.i18nService.t('logOut'), this.i18nService.t('logOut'), this.i18nService.t('cancel'));
-        if (confirmed) {
-            this.messagingService.send('logout');
-        }
+    if (strengthResult != null && strengthResult.score < 3) {
+      const result = await this.platformUtilsService.showDialog(
+        this.i18nService.t("weakMasterPasswordDesc"),
+        this.i18nService.t("weakMasterPassword"),
+        this.i18nService.t("yes"),
+        this.i18nService.t("no"),
+        "warning"
+      );
+      if (!result) {
+        return false;
+      }
     }
 
-    private getPasswordStrengthUserInput() {
-        let userInput: string[] = [];
-        const atPosition = this.email.indexOf('@');
-        if (atPosition > -1) {
-            userInput = userInput.concat(this.email.substr(0, atPosition).trim().toLowerCase().split(/[^A-Za-z0-9]/));
-        }
-        return userInput;
+    return true;
+  }
+
+  updatePasswordStrength() {
+    if (this.masterPasswordStrengthTimeout != null) {
+      clearTimeout(this.masterPasswordStrengthTimeout);
+    }
+    this.masterPasswordStrengthTimeout = setTimeout(() => {
+      const strengthResult = this.passwordGenerationService.passwordStrength(
+        this.masterPassword,
+        this.getPasswordStrengthUserInput()
+      );
+      this.masterPasswordScore = strengthResult == null ? null : strengthResult.score;
+    }, 300);
+  }
+
+  async logOut() {
+    const confirmed = await this.platformUtilsService.showDialog(
+      this.i18nService.t("logOutConfirmation"),
+      this.i18nService.t("logOut"),
+      this.i18nService.t("logOut"),
+      this.i18nService.t("cancel")
+    );
+    if (confirmed) {
+      this.messagingService.send("logout");
+    }
+  }
+
+  private getPasswordStrengthUserInput() {
+    let userInput: string[] = [];
+    const atPosition = this.email.indexOf("@");
+    if (atPosition > -1) {
+      userInput = userInput.concat(
+        this.email
+          .substr(0, atPosition)
+          .trim()
+          .toLowerCase()
+          .split(/[^A-Za-z0-9]/)
+      );
     }
+    return userInput;
+  }
 }
diff --git a/jslib/angular/src/components/ciphers.component.ts b/jslib/angular/src/components/ciphers.component.ts
index 092eef22..3f724bb5 100644
--- a/jslib/angular/src/components/ciphers.component.ts
+++ b/jslib/angular/src/components/ciphers.component.ts
@@ -1,95 +1,94 @@
-import {
-    Directive,
-    EventEmitter,
-    Input,
-    Output,
-} from '@angular/core';
+import { Directive, EventEmitter, Input, Output } from "@angular/core";
 
-import { SearchService } from 'jslib-common/abstractions/search.service';
+import { SearchService } from "jslib-common/abstractions/search.service";
 
-import { CipherView } from 'jslib-common/models/view/cipherView';
+import { CipherView } from "jslib-common/models/view/cipherView";
 
 @Directive()
 export class CiphersComponent {
-    @Input() activeCipherId: string = null;
-    @Output() onCipherClicked = new EventEmitter<CipherView>();
-    @Output() onCipherRightClicked = new EventEmitter<CipherView>();
-    @Output() onAddCipher = new EventEmitter();
-    @Output() onAddCipherOptions = new EventEmitter();
-
-    loaded: boolean = false;
-    ciphers: CipherView[] = [];
-    searchText: string;
-    searchPlaceholder: string = null;
-    filter: (cipher: CipherView) => boolean = null;
-    deleted: boolean = false;
-
-    protected searchPending = false;
-
-    private searchTimeout: any = null;
-
-    constructor(protected searchService: SearchService) { }
-
-    async load(filter: (cipher: CipherView) => boolean = null, deleted: boolean = false) {
-        this.deleted = deleted || false;
-        await this.applyFilter(filter);
-        this.loaded = true;
-    }
-
-    async reload(filter: (cipher: CipherView) => boolean = null, deleted: boolean = false) {
-        this.loaded = false;
-        this.ciphers = [];
-        await this.load(filter, deleted);
-    }
-
-    async refresh() {
-        await this.reload(this.filter, this.deleted);
-    }
-
-    async applyFilter(filter: (cipher: CipherView) => boolean = null) {
-        this.filter = filter;
-        await this.search(null);
-    }
-
-    async search(timeout: number = null, indexedCiphers?: CipherView[]) {
-        this.searchPending = false;
-        if (this.searchTimeout != null) {
-            clearTimeout(this.searchTimeout);
-        }
-        if (timeout == null) {
-            await this.doSearch(indexedCiphers);
-            return;
-        }
-        this.searchPending = true;
-        this.searchTimeout = setTimeout(async () => {
-            await this.doSearch(indexedCiphers);
-            this.searchPending = false;
-        }, timeout);
+  @Input() activeCipherId: string = null;
+  @Output() onCipherClicked = new EventEmitter<CipherView>();
+  @Output() onCipherRightClicked = new EventEmitter<CipherView>();
+  @Output() onAddCipher = new EventEmitter();
+  @Output() onAddCipherOptions = new EventEmitter();
+
+  loaded: boolean = false;
+  ciphers: CipherView[] = [];
+  searchText: string;
+  searchPlaceholder: string = null;
+  filter: (cipher: CipherView) => boolean = null;
+  deleted: boolean = false;
+
+  protected searchPending = false;
+
+  private searchTimeout: any = null;
+
+  constructor(protected searchService: SearchService) {}
+
+  async load(filter: (cipher: CipherView) => boolean = null, deleted: boolean = false) {
+    this.deleted = deleted || false;
+    await this.applyFilter(filter);
+    this.loaded = true;
+  }
+
+  async reload(filter: (cipher: CipherView) => boolean = null, deleted: boolean = false) {
+    this.loaded = false;
+    this.ciphers = [];
+    await this.load(filter, deleted);
+  }
+
+  async refresh() {
+    await this.reload(this.filter, this.deleted);
+  }
+
+  async applyFilter(filter: (cipher: CipherView) => boolean = null) {
+    this.filter = filter;
+    await this.search(null);
+  }
+
+  async search(timeout: number = null, indexedCiphers?: CipherView[]) {
+    this.searchPending = false;
+    if (this.searchTimeout != null) {
+      clearTimeout(this.searchTimeout);
     }
-
-    selectCipher(cipher: CipherView) {
-        this.onCipherClicked.emit(cipher);
-    }
-
-    rightClickCipher(cipher: CipherView) {
-        this.onCipherRightClicked.emit(cipher);
-    }
-
-    addCipher() {
-        this.onAddCipher.emit();
-    }
-
-    addCipherOptions() {
-        this.onAddCipherOptions.emit();
-    }
-
-    isSearching() {
-        return !this.searchPending && this.searchService.isSearchable(this.searchText);
-    }
-
-    protected deletedFilter: (cipher: CipherView) => boolean = c => c.isDeleted === this.deleted;
-
-    protected async doSearch(indexedCiphers?: CipherView[]) {
-        this.ciphers = await this.searchService.searchCiphers(this.searchText, [this.filter, this.deletedFilter], indexedCiphers);
+    if (timeout == null) {
+      await this.doSearch(indexedCiphers);
+      return;
     }
+    this.searchPending = true;
+    this.searchTimeout = setTimeout(async () => {
+      await this.doSearch(indexedCiphers);
+      this.searchPending = false;
+    }, timeout);
+  }
+
+  selectCipher(cipher: CipherView) {
+    this.onCipherClicked.emit(cipher);
+  }
+
+  rightClickCipher(cipher: CipherView) {
+    this.onCipherRightClicked.emit(cipher);
+  }
+
+  addCipher() {
+    this.onAddCipher.emit();
+  }
+
+  addCipherOptions() {
+    this.onAddCipherOptions.emit();
+  }
+
+  isSearching() {
+    return !this.searchPending && this.searchService.isSearchable(this.searchText);
+  }
+
+  protected deletedFilter: (cipher: CipherView) => boolean = (c) => c.isDeleted === this.deleted;
+
+  protected async doSearch(indexedCiphers?: CipherView[]) {
+    this.ciphers = await this.searchService.searchCiphers(
+      this.searchText,
+      [this.filter, this.deletedFilter],
+      indexedCiphers
+    );
+  }
 }
diff --git a/jslib/angular/src/components/collections.component.ts b/jslib/angular/src/components/collections.component.ts
index 29a846c6..8e55f5e2 100644
--- a/jslib/angular/src/components/collections.component.ts
+++ b/jslib/angular/src/components/collections.component.ts
@@ -1,90 +1,94 @@
-import {
-    Directive,
-    EventEmitter,
-    Input,
-    OnInit,
-    Output,
-} from '@angular/core';
+import { Directive, EventEmitter, Input, OnInit, Output } from "@angular/core";
 
-import { CipherService } from 'jslib-common/abstractions/cipher.service';
-import { CollectionService } from 'jslib-common/abstractions/collection.service';
-import { I18nService } from 'jslib-common/abstractions/i18n.service';
-import { LogService } from 'jslib-common/abstractions/log.service';
-import { PlatformUtilsService } from 'jslib-common/abstractions/platformUtils.service';
+import { CipherService } from "jslib-common/abstractions/cipher.service";
+import { CollectionService } from "jslib-common/abstractions/collection.service";
+import { I18nService } from "jslib-common/abstractions/i18n.service";
+import { LogService } from "jslib-common/abstractions/log.service";
+import { PlatformUtilsService } from "jslib-common/abstractions/platformUtils.service";
 
-import { CipherView } from 'jslib-common/models/view/cipherView';
-import { CollectionView } from 'jslib-common/models/view/collectionView';
+import { CipherView } from "jslib-common/models/view/cipherView";
+import { CollectionView } from "jslib-common/models/view/collectionView";
 
-import { Cipher } from 'jslib-common/models/domain/cipher';
+import { Cipher } from "jslib-common/models/domain/cipher";
 
 @Directive()
 export class CollectionsComponent implements OnInit {
-    @Input() cipherId: string;
-    @Input() allowSelectNone = false;
-    @Output() onSavedCollections = new EventEmitter();
+  @Input() cipherId: string;
+  @Input() allowSelectNone = false;
+  @Output() onSavedCollections = new EventEmitter();
 
-    formPromise: Promise<any>;
-    cipher: CipherView;
-    collectionIds: string[];
-    collections: CollectionView[] = [];
+  formPromise: Promise<any>;
+  cipher: CipherView;
+  collectionIds: string[];
+  collections: CollectionView[] = [];
 
-    protected cipherDomain: Cipher;
+  protected cipherDomain: Cipher;
 
-    constructor(protected collectionService: CollectionService, protected platformUtilsService: PlatformUtilsService,
-        protected i18nService: I18nService, protected cipherService: CipherService, private logService: LogService) { }
+  constructor(
+    protected collectionService: CollectionService,
+    protected platformUtilsService: PlatformUtilsService,
+    protected i18nService: I18nService,
+    protected cipherService: CipherService,
+    private logService: LogService
+  ) {}
 
-    async ngOnInit() {
-        await this.load();
-    }
+  async ngOnInit() {
+    await this.load();
+  }
 
-    async load() {
-        this.cipherDomain = await this.loadCipher();
-        this.collectionIds = this.loadCipherCollections();
-        this.cipher = await this.cipherDomain.decrypt();
-        this.collections = await this.loadCollections();
+  async load() {
+    this.cipherDomain = await this.loadCipher();
+    this.collectionIds = this.loadCipherCollections();
+    this.cipher = await this.cipherDomain.decrypt();
+    this.collections = await this.loadCollections();
 
-        this.collections.forEach(c => (c as any).checked = false);
-        if (this.collectionIds != null) {
-            this.collections.forEach(c => {
-                (c as any).checked = this.collectionIds != null && this.collectionIds.indexOf(c.id) > -1;
-            });
-        }
+    this.collections.forEach((c) => ((c as any).checked = false));
+    if (this.collectionIds != null) {
+      this.collections.forEach((c) => {
+        (c as any).checked = this.collectionIds != null && this.collectionIds.indexOf(c.id) > -1;
+      });
     }
+  }
 
-    async submit() {
-        const selectedCollectionIds = this.collections
-            .filter(c => !!(c as any).checked)
-            .map(c => c.id);
-        if (!this.allowSelectNone && selectedCollectionIds.length === 0) {
-            this.platformUtilsService.showToast('error', this.i18nService.t('errorOccurred'),
-                this.i18nService.t('selectOneCollection'));
-            return;
-        }
-        this.cipherDomain.collectionIds = selectedCollectionIds;
-        try {
-            this.formPromise = this.saveCollections();
-            await this.formPromise;
-            this.onSavedCollections.emit();
-            this.platformUtilsService.showToast('success', null, this.i18nService.t('editedItem'));
-        } catch (e) {
-            this.logService.error(e);
-        }
+  async submit() {
+    const selectedCollectionIds = this.collections
+      .filter((c) => !!(c as any).checked)
+      .map((c) => c.id);
+    if (!this.allowSelectNone && selectedCollectionIds.length === 0) {
+      this.platformUtilsService.showToast(
+        "error",
+        this.i18nService.t("errorOccurred"),
+        this.i18nService.t("selectOneCollection")
+      );
+      return;
     }
-
-    protected loadCipher() {
-        return this.cipherService.get(this.cipherId);
+    this.cipherDomain.collectionIds = selectedCollectionIds;
+    try {
+      this.formPromise = this.saveCollections();
+      await this.formPromise;
+      this.onSavedCollections.emit();
+      this.platformUtilsService.showToast("success", null, this.i18nService.t("editedItem"));
+    } catch (e) {
+      this.logService.error(e);
     }
+  }
 
-    protected loadCipherCollections() {
-        return this.cipherDomain.collectionIds;
-    }
+  protected loadCipher() {
+    return this.cipherService.get(this.cipherId);
+  }
 
-    protected async loadCollections() {
-        const allCollections = await this.collectionService.getAllDecrypted();
-        return allCollections.filter(c => !c.readOnly && c.organizationId === this.cipher.organizationId);
-    }
+  protected loadCipherCollections() {
+    return this.cipherDomain.collectionIds;
+  }
 
-    protected saveCollections() {
-        return this.cipherService.saveCollectionsWithServer(this.cipherDomain);
-    }
+  protected async loadCollections() {
+    const allCollections = await this.collectionService.getAllDecrypted();
+    return allCollections.filter(
+      (c) => !c.readOnly && c.organizationId === this.cipher.organizationId
+    );
+  }
+
+  protected saveCollections() {
+    return this.cipherService.saveCollectionsWithServer(this.cipherDomain);
+  }
 }
diff --git a/jslib/angular/src/components/environment.component.ts b/jslib/angular/src/components/environment.component.ts
index 6b131ba6..8b7689de 100644
--- a/jslib/angular/src/components/environment.component.ts
+++ b/jslib/angular/src/components/environment.component.ts
@@ -1,65 +1,63 @@
-import {
-    Directive,
-    EventEmitter,
-    Output,
-} from '@angular/core';
+import { Directive, EventEmitter, Output } from "@angular/core";
 
-import { EnvironmentService } from 'jslib-common/abstractions/environment.service';
-import { I18nService } from 'jslib-common/abstractions/i18n.service';
-import { PlatformUtilsService } from 'jslib-common/abstractions/platformUtils.service';
+import { EnvironmentService } from "jslib-common/abstractions/environment.service";
+import { I18nService } from "jslib-common/abstractions/i18n.service";
+import { PlatformUtilsService } from "jslib-common/abstractions/platformUtils.service";
 
 @Directive()
 export class EnvironmentComponent {
-    @Output() onSaved = new EventEmitter();
-
-    iconsUrl: string;
-    identityUrl: string;
-    apiUrl: string;
-    webVaultUrl: string;
-    notificationsUrl: string;
-    baseUrl: string;
-    showCustom = false;
-
-    constructor(protected platformUtilsService: PlatformUtilsService, protected environmentService: EnvironmentService,
-        protected i18nService: I18nService) {
-
-        const urls = this.environmentService.getUrls();
-
-        this.baseUrl = urls.base || '';
-        this.webVaultUrl = urls.webVault || '';
-        this.apiUrl = urls.api || '';
-        this.identityUrl = urls.identity || '';
-        this.iconsUrl = urls.icons || '';
-        this.notificationsUrl = urls.notifications || '';
-    }
-
-    async submit() {
-        const resUrls = await this.environmentService.setUrls({
-            base: this.baseUrl,
-            api: this.apiUrl,
-            identity: this.identityUrl,
-            webVault: this.webVaultUrl,
-            icons: this.iconsUrl,
-            notifications: this.notificationsUrl,
-        });
-
-        // re-set urls since service can change them, ex: prefixing https://
-        this.baseUrl = resUrls.base;
-        this.apiUrl = resUrls.api;
-        this.identityUrl = resUrls.identity;
-        this.webVaultUrl = resUrls.webVault;
-        this.iconsUrl = resUrls.icons;
-        this.notificationsUrl = resUrls.notifications;
-
-        this.platformUtilsService.showToast('success', null, this.i18nService.t('environmentSaved'));
-        this.saved();
-    }
-
-    toggleCustom() {
-        this.showCustom = !this.showCustom;
-    }
-
-    protected saved() {
-        this.onSaved.emit();
-    }
+  @Output() onSaved = new EventEmitter();
+
+  iconsUrl: string;
+  identityUrl: string;
+  apiUrl: string;
+  webVaultUrl: string;
+  notificationsUrl: string;
+  baseUrl: string;
+  showCustom = false;
+
+  constructor(
+    protected platformUtilsService: PlatformUtilsService,
+    protected environmentService: EnvironmentService,
+    protected i18nService: I18nService
+  ) {
+    const urls = this.environmentService.getUrls();
+
+    this.baseUrl = urls.base || "";
+    this.webVaultUrl = urls.webVault || "";
+    this.apiUrl = urls.api || "";
+    this.identityUrl = urls.identity || "";
+    this.iconsUrl = urls.icons || "";
+    this.notificationsUrl = urls.notifications || "";
+  }
+
+  async submit() {
+    const resUrls = await this.environmentService.setUrls({
+      base: this.baseUrl,
+      api: this.apiUrl,
+      identity: this.identityUrl,
+      webVault: this.webVaultUrl,
+      icons: this.iconsUrl,
+      notifications: this.notificationsUrl,
+    });
+
+    // re-set urls since service can change them, ex: prefixing https://
+    this.baseUrl = resUrls.base;
+    this.apiUrl = resUrls.api;
+    this.identityUrl = resUrls.identity;
+    this.webVaultUrl = resUrls.webVault;
+    this.iconsUrl = resUrls.icons;
+    this.notificationsUrl = resUrls.notifications;
+
+    this.platformUtilsService.showToast("success", null, this.i18nService.t("environmentSaved"));
+    this.saved();
+  }
+
+  toggleCustom() {
+    this.showCustom = !this.showCustom;
+  }
+
+  protected saved() {
+    this.onSaved.emit();
+  }
 }
diff --git a/jslib/angular/src/components/export.component.ts b/jslib/angular/src/components/export.component.ts
index 716f9ef0..17a751fc 100644
--- a/jslib/angular/src/components/export.component.ts
+++ b/jslib/angular/src/components/export.component.ts
@@ -1,140 +1,156 @@
-import {
-    Directive,
-    EventEmitter,
-    OnInit,
-    Output,
-} from '@angular/core';
-import { FormBuilder } from '@angular/forms';
-
-import { CryptoService } from 'jslib-common/abstractions/crypto.service';
-import { EventService } from 'jslib-common/abstractions/event.service';
-import { ExportService } from 'jslib-common/abstractions/export.service';
-import { I18nService } from 'jslib-common/abstractions/i18n.service';
-import { LogService } from 'jslib-common/abstractions/log.service';
-import { PlatformUtilsService } from 'jslib-common/abstractions/platformUtils.service';
-import { PolicyService } from 'jslib-common/abstractions/policy.service';
-import { UserVerificationService } from 'jslib-common/abstractions/userVerification.service';
-
-import { EventType } from 'jslib-common/enums/eventType';
-import { PolicyType } from 'jslib-common/enums/policyType';
+import { Directive, EventEmitter, OnInit, Output } from "@angular/core";
+import { FormBuilder } from "@angular/forms";
+
+import { CryptoService } from "jslib-common/abstractions/crypto.service";
+import { EventService } from "jslib-common/abstractions/event.service";
+import { ExportService } from "jslib-common/abstractions/export.service";
+import { I18nService } from "jslib-common/abstractions/i18n.service";
+import { LogService } from "jslib-common/abstractions/log.service";
+import { PlatformUtilsService } from "jslib-common/abstractions/platformUtils.service";
+import { PolicyService } from "jslib-common/abstractions/policy.service";
+import { UserVerificationService } from "jslib-common/abstractions/userVerification.service";
+
+import { EventType } from "jslib-common/enums/eventType";
+import { PolicyType } from "jslib-common/enums/policyType";
 
 @Directive()
 export class ExportComponent implements OnInit {
-    @Output() onSaved = new EventEmitter();
-
-    formPromise: Promise<string>;
-    disabledByPolicy: boolean = false;
-
-    exportForm = this.fb.group({
-        format: ['json'],
-        secret: [''],
-    });
-
-    formatOptions = [
-        { name: '.json', value: 'json' },
-        { name: '.csv', value: 'csv' },
-        { name: '.json (Encrypted)', value: 'encrypted_json' },
-    ];
-
-    constructor(protected cryptoService: CryptoService, protected i18nService: I18nService,
-        protected platformUtilsService: PlatformUtilsService, protected exportService: ExportService,
-        protected eventService: EventService, private policyService: PolicyService, protected win: Window,
-        private logService: LogService, private userVerificationService: UserVerificationService,
-        private fb: FormBuilder) { }
-
-    async ngOnInit() {
-        await this.checkExportDisabled();
+  @Output() onSaved = new EventEmitter();
+
+  formPromise: Promise<string>;
+  disabledByPolicy: boolean = false;
+
+  exportForm = this.formBuilder.group({
+    format: ["json"],
+    secret: [""],
+  });
+
+  formatOptions = [
+    { name: ".json", value: "json" },
+    { name: ".csv", value: "csv" },
+    { name: ".json (Encrypted)", value: "encrypted_json" },
+  ];
+
+  constructor(
+    protected cryptoService: CryptoService,
+    protected i18nService: I18nService,
+    protected platformUtilsService: PlatformUtilsService,
+    protected exportService: ExportService,
+    protected eventService: EventService,
+    private policyService: PolicyService,
+    protected win: Window,
+    private logService: LogService,
+    private userVerificationService: UserVerificationService,
+    private formBuilder: FormBuilder
+  ) {}
+
+  async ngOnInit() {
+    await this.checkExportDisabled();
+  }
+
+  async checkExportDisabled() {
+    this.disabledByPolicy = await this.policyService.policyAppliesToUser(
+      PolicyType.DisablePersonalVaultExport
+    );
+    if (this.disabledByPolicy) {
+      this.exportForm.disable();
     }
-
-    async checkExportDisabled() {
-        this.disabledByPolicy = await this.policyService.policyAppliesToUser(PolicyType.DisablePersonalVaultExport);
-        if (this.disabledByPolicy) {
-            this.exportForm.disable();
-        }
-    }
-
-    get encryptedFormat() {
-        return this.format === 'encrypted_json';
+  }
+
+  get encryptedFormat() {
+    return this.format === "encrypted_json";
+  }
+
+  async submit() {
+    if (this.disabledByPolicy) {
+      this.platformUtilsService.showToast(
+        "error",
+        null,
+        this.i18nService.t("personalVaultExportPolicyInEffect")
+      );
+      return;
     }
 
-    async submit() {
-        if (this.disabledByPolicy) {
-            this.platformUtilsService.showToast('error', null, this.i18nService.t('personalVaultExportPolicyInEffect'));
-            return;
-        }
-
-        const acceptedWarning = await this.warningDialog();
-        if (!acceptedWarning) {
-            return;
-        }
-
-        const secret = this.exportForm.get('secret').value;
-        try {
-            await this.userVerificationService.verifyUser(secret);
-        } catch (e) {
-            this.platformUtilsService.showToast('error', this.i18nService.t('errorOccurred'), e.message);
-            return;
-        }
-
-        try {
-            this.formPromise = this.getExportData();
-            const data = await this.formPromise;
-            this.downloadFile(data);
-            this.saved();
-            await this.collectEvent();
-            this.exportForm.get('secret').setValue('');
-        } catch (e) {
-            this.logService.error(e);
-        }
+    const acceptedWarning = await this.warningDialog();
+    if (!acceptedWarning) {
+      return;
     }
 
-    async warningDialog() {
-        if (this.encryptedFormat) {
-            return await this.platformUtilsService.showDialog(
-                '<p>' + this.i18nService.t('encExportKeyWarningDesc') +
-                '<p>' + this.i18nService.t('encExportAccountWarningDesc'),
-                this.i18nService.t('confirmVaultExport'), this.i18nService.t('exportVault'),
-                this.i18nService.t('cancel'), 'warning',
-                true);
-        } else {
-            return await this.platformUtilsService.showDialog(
-                this.i18nService.t('exportWarningDesc'),
-                this.i18nService.t('confirmVaultExport'), this.i18nService.t('exportVault'),
-                this.i18nService.t('cancel'), 'warning');
-        }
+    const secret = this.exportForm.get("secret").value;
+    try {
+      await this.userVerificationService.verifyUser(secret);
+    } catch (e) {
+      this.platformUtilsService.showToast("error", this.i18nService.t("errorOccurred"), e.message);
+      return;
     }
 
-    protected saved() {
-        this.onSaved.emit();
+    try {
+      this.formPromise = this.getExportData();
+      const data = await this.formPromise;
+      this.downloadFile(data);
+      this.saved();
+      await this.collectEvent();
+      this.exportForm.get("secret").setValue("");
+    } catch (e) {
+      this.logService.error(e);
     }
-
-    protected getExportData() {
-        return this.exportService.getExport(this.format);
+  }
+
+  async warningDialog() {
+    if (this.encryptedFormat) {
+      return await this.platformUtilsService.showDialog(
+        "<p>" +
+          this.i18nService.t("encExportKeyWarningDesc") +
+          "<p>" +
+          this.i18nService.t("encExportAccountWarningDesc"),
+        this.i18nService.t("confirmVaultExport"),
+        this.i18nService.t("exportVault"),
+        this.i18nService.t("cancel"),
+        "warning",
+        true
+      );
+    } else {
+      return await this.platformUtilsService.showDialog(
+        this.i18nService.t("exportWarningDesc"),
+        this.i18nService.t("confirmVaultExport"),
+        this.i18nService.t("exportVault"),
+        this.i18nService.t("cancel"),
+        "warning"
+      );
     }
-
-    protected getFileName(prefix?: string) {
-        let extension = this.format;
-        if (this.format === 'encrypted_json') {
-            if (prefix == null) {
-                prefix = 'encrypted';
-            } else {
-                prefix = 'encrypted_' + prefix;
-            }
-            extension = 'json';
-        }
-        return this.exportService.getFileName(prefix, extension);
+  }
+
+  protected saved() {
+    this.onSaved.emit();
+  }
+
+  protected getExportData() {
+    return this.exportService.getExport(this.format);
+  }
+
+  protected getFileName(prefix?: string) {
+    let extension = this.format;
+    if (this.format === "encrypted_json") {
+      if (prefix == null) {
+        prefix = "encrypted";
+      } else {
+        prefix = "encrypted_" + prefix;
+      }
+      extension = "json";
     }
+    return this.exportService.getFileName(prefix, extension);
+  }
 
-    protected async collectEvent(): Promise<any> {
-        await this.eventService.collect(EventType.User_ClientExportedVault);
-    }
+  protected async collectEvent(): Promise<any> {
+    await this.eventService.collect(EventType.User_ClientExportedVault);
+  }
 
-    get format() {
-        return this.exportForm.get('format').value;
-    }
+  get format() {
+    return this.exportForm.get("format").value;
+  }
 
-    private downloadFile(csv: string): void {
-        const fileName = this.getFileName();
-        this.platformUtilsService.saveFile(this.win, csv, { type: 'text/plain' }, fileName);
-    }
+  private downloadFile(csv: string): void {
+    const fileName = this.getFileName();
+    this.platformUtilsService.saveFile(this.win, csv, { type: "text/plain" }, fileName);
+  }
 }
diff --git a/jslib/angular/src/components/folder-add-edit.component.ts b/jslib/angular/src/components/folder-add-edit.component.ts
index 554c743f..a3f0707b 100644
--- a/jslib/angular/src/components/folder-add-edit.component.ts
+++ b/jslib/angular/src/components/folder-add-edit.component.ts
@@ -1,89 +1,97 @@
-import {
-    Directive,
-    EventEmitter,
-    Input,
-    OnInit,
-    Output,
-} from '@angular/core';
+import { Directive, EventEmitter, Input, OnInit, Output } from "@angular/core";
 
-import { FolderService } from 'jslib-common/abstractions/folder.service';
-import { I18nService } from 'jslib-common/abstractions/i18n.service';
-import { LogService } from 'jslib-common/abstractions/log.service';
-import { PlatformUtilsService } from 'jslib-common/abstractions/platformUtils.service';
+import { FolderService } from "jslib-common/abstractions/folder.service";
+import { I18nService } from "jslib-common/abstractions/i18n.service";
+import { LogService } from "jslib-common/abstractions/log.service";
+import { PlatformUtilsService } from "jslib-common/abstractions/platformUtils.service";
 
-import { FolderView } from 'jslib-common/models/view/folderView';
+import { FolderView } from "jslib-common/models/view/folderView";
 
 @Directive()
 export class FolderAddEditComponent implements OnInit {
-    @Input() folderId: string;
-    @Output() onSavedFolder = new EventEmitter<FolderView>();
-    @Output() onDeletedFolder = new EventEmitter<FolderView>();
+  @Input() folderId: string;
+  @Output() onSavedFolder = new EventEmitter<FolderView>();
+  @Output() onDeletedFolder = new EventEmitter<FolderView>();
 
-    editMode: boolean = false;
-    folder: FolderView = new FolderView();
-    title: string;
-    formPromise: Promise<any>;
-    deletePromise: Promise<any>;
+  editMode: boolean = false;
+  folder: FolderView = new FolderView();
+  title: string;
+  formPromise: Promise<any>;
+  deletePromise: Promise<any>;
 
-    constructor(protected folderService: FolderService, protected i18nService: I18nService,
-        protected platformUtilsService: PlatformUtilsService, private logService: LogService) { }
+  constructor(
+    protected folderService: FolderService,
+    protected i18nService: I18nService,
+    protected platformUtilsService: PlatformUtilsService,
+    private logService: LogService
+  ) {}
 
-    async ngOnInit() {
-        await this.init();
-    }
-
-    async submit(): Promise<boolean> {
-        if (this.folder.name == null || this.folder.name === '') {
-            this.platformUtilsService.showToast('error', this.i18nService.t('errorOccurred'),
-                this.i18nService.t('nameRequired'));
-            return false;
-        }
+  async ngOnInit() {
+    await this.init();
+  }
 
-        try {
-            const folder = await this.folderService.encrypt(this.folder);
-            this.formPromise = this.folderService.saveWithServer(folder);
-            await this.formPromise;
-            this.platformUtilsService.showToast('success', null,
-                this.i18nService.t(this.editMode ? 'editedFolder' : 'addedFolder'));
-            this.onSavedFolder.emit(this.folder);
-            return true;
-        } catch (e) {
-            this.logService.error(e);
-        }
+  async submit(): Promise<boolean> {
+    if (this.folder.name == null || this.folder.name === "") {
+      this.platformUtilsService.showToast(
+        "error",
+        this.i18nService.t("errorOccurred"),
+        this.i18nService.t("nameRequired")
+      );
+      return false;
+    }
 
-        return false;
+    try {
+      const folder = await this.folderService.encrypt(this.folder);
+      this.formPromise = this.folderService.saveWithServer(folder);
+      await this.formPromise;
+      this.platformUtilsService.showToast(
+        "success",
+        null,
+        this.i18nService.t(this.editMode ? "editedFolder" : "addedFolder")
+      );
+      this.onSavedFolder.emit(this.folder);
+      return true;
+    } catch (e) {
+      this.logService.error(e);
     }
 
-    async delete(): Promise<boolean> {
-        const confirmed = await this.platformUtilsService.showDialog(
-            this.i18nService.t('deleteFolderConfirmation'), this.i18nService.t('deleteFolder'),
-            this.i18nService.t('yes'), this.i18nService.t('no'), 'warning');
-        if (!confirmed) {
-            return false;
-        }
+    return false;
+  }
 
-        try {
-            this.deletePromise = this.folderService.deleteWithServer(this.folder.id);
-            await this.deletePromise;
-            this.platformUtilsService.showToast('success', null, this.i18nService.t('deletedFolder'));
-            this.onDeletedFolder.emit(this.folder);
-        } catch (e) {
-            this.logService.error(e);
-        }
+  async delete(): Promise<boolean> {
+    const confirmed = await this.platformUtilsService.showDialog(
+      this.i18nService.t("deleteFolderConfirmation"),
+      this.i18nService.t("deleteFolder"),
+      this.i18nService.t("yes"),
+      this.i18nService.t("no"),
+      "warning"
+    );
+    if (!confirmed) {
+      return false;
+    }
 
-        return true;
+    try {
+      this.deletePromise = this.folderService.deleteWithServer(this.folder.id);
+      await this.deletePromise;
+      this.platformUtilsService.showToast("success", null, this.i18nService.t("deletedFolder"));
+      this.onDeletedFolder.emit(this.folder);
+    } catch (e) {
+      this.logService.error(e);
     }
 
-    protected async init() {
-        this.editMode = this.folderId != null;
+    return true;
+  }
+
+  protected async init() {
+    this.editMode = this.folderId != null;
 
-        if (this.editMode) {
-            this.editMode = true;
-            this.title = this.i18nService.t('editFolder');
-            const folder = await this.folderService.get(this.folderId);
-            this.folder = await folder.decrypt();
-        } else {
-            this.title = this.i18nService.t('addFolder');
-        }
+    if (this.editMode) {
+      this.editMode = true;
+      this.title = this.i18nService.t("editFolder");
+      const folder = await this.folderService.get(this.folderId);
+      this.folder = await folder.decrypt();
+    } else {
+      this.title = this.i18nService.t("addFolder");
     }
+  }
 }
diff --git a/jslib/angular/src/components/groupings.component.ts b/jslib/angular/src/components/groupings.component.ts
index 1c3c27a1..e8a97c6f 100644
--- a/jslib/angular/src/components/groupings.component.ts
+++ b/jslib/angular/src/components/groupings.component.ts
@@ -1,168 +1,160 @@
-import {
-    Directive,
-    EventEmitter,
-    Input,
-    Output,
-} from '@angular/core';
+import { Directive, EventEmitter, Input, Output } from "@angular/core";
 
-import { CipherType } from 'jslib-common/enums/cipherType';
+import { CipherType } from "jslib-common/enums/cipherType";
 
-import { CollectionView } from 'jslib-common/models/view/collectionView';
-import { FolderView } from 'jslib-common/models/view/folderView';
+import { CollectionView } from "jslib-common/models/view/collectionView";
+import { FolderView } from "jslib-common/models/view/folderView";
 
-import { TreeNode } from 'jslib-common/models/domain/treeNode';
+import { TreeNode } from "jslib-common/models/domain/treeNode";
 
-import { CollectionService } from 'jslib-common/abstractions/collection.service';
-import { FolderService } from 'jslib-common/abstractions/folder.service';
-import { StorageService } from 'jslib-common/abstractions/storage.service';
-import { UserService } from 'jslib-common/abstractions/user.service';
-
-import { ConstantsService } from 'jslib-common/services/constants.service';
+import { CollectionService } from "jslib-common/abstractions/collection.service";
+import { FolderService } from "jslib-common/abstractions/folder.service";
+import { StateService } from "jslib-common/abstractions/state.service";
 
 @Directive()
 export class GroupingsComponent {
-    @Input() showFolders = true;
-    @Input() showCollections = true;
-    @Input() showFavorites = true;
-    @Input() showTrash = true;
-
-    @Output() onAllClicked = new EventEmitter();
-    @Output() onFavoritesClicked = new EventEmitter();
-    @Output() onTrashClicked = new EventEmitter();
-    @Output() onCipherTypeClicked = new EventEmitter<CipherType>();
-    @Output() onFolderClicked = new EventEmitter<FolderView>();
-    @Output() onAddFolder = new EventEmitter();
-    @Output() onEditFolder = new EventEmitter<FolderView>();
-    @Output() onCollectionClicked = new EventEmitter<CollectionView>();
-
-    folders: FolderView[];
-    nestedFolders: TreeNode<FolderView>[];
-    collections: CollectionView[];
-    nestedCollections: TreeNode<CollectionView>[];
-    loaded: boolean = false;
-    cipherType = CipherType;
-    selectedAll: boolean = false;
-    selectedFavorites: boolean = false;
-    selectedTrash: boolean = false;
-    selectedType: CipherType = null;
-    selectedFolder: boolean = false;
-    selectedFolderId: string = null;
-    selectedCollectionId: string = null;
-
-    private collapsedGroupings: Set<string>;
-    private collapsedGroupingsKey: string;
-
-    constructor(protected collectionService: CollectionService, protected folderService: FolderService,
-        protected storageService: StorageService, protected userService: UserService) { }
-
-    async load(setLoaded = true) {
-        const userId = await this.userService.getUserId();
-        this.collapsedGroupingsKey = ConstantsService.collapsedGroupingsKey + '_' + userId;
-        const collapsedGroupings = await this.storageService.get<string[]>(this.collapsedGroupingsKey);
-        if (collapsedGroupings == null) {
-            this.collapsedGroupings = new Set<string>();
-        } else {
-            this.collapsedGroupings = new Set(collapsedGroupings);
-        }
-
-        await this.loadFolders();
-        await this.loadCollections();
-
-        if (setLoaded) {
-            this.loaded = true;
-        }
-    }
-
-    async loadCollections(organizationId?: string) {
-        if (!this.showCollections) {
-            return;
-        }
-        const collections = await this.collectionService.getAllDecrypted();
-        if (organizationId != null) {
-            this.collections = collections.filter(c => c.organizationId === organizationId);
-        } else {
-            this.collections = collections;
-        }
-        this.nestedCollections = await this.collectionService.getAllNested(this.collections);
-    }
-
-    async loadFolders() {
-        if (!this.showFolders) {
-            return;
-        }
-        this.folders = await this.folderService.getAllDecrypted();
-        this.nestedFolders = await this.folderService.getAllNested();
-    }
-
-    selectAll() {
-        this.clearSelections();
-        this.selectedAll = true;
-        this.onAllClicked.emit();
-    }
-
-    selectFavorites() {
-        this.clearSelections();
-        this.selectedFavorites = true;
-        this.onFavoritesClicked.emit();
-    }
-
-    selectTrash() {
-        this.clearSelections();
-        this.selectedTrash = true;
-        this.onTrashClicked.emit();
+  @Input() showFolders = true;
+  @Input() showCollections = true;
+  @Input() showFavorites = true;
+  @Input() showTrash = true;
+
+  @Output() onAllClicked = new EventEmitter();
+  @Output() onFavoritesClicked = new EventEmitter();
+  @Output() onTrashClicked = new EventEmitter();
+  @Output() onCipherTypeClicked = new EventEmitter<CipherType>();
+  @Output() onFolderClicked = new EventEmitter<FolderView>();
+  @Output() onAddFolder = new EventEmitter();
+  @Output() onEditFolder = new EventEmitter<FolderView>();
+  @Output() onCollectionClicked = new EventEmitter<CollectionView>();
+
+  folders: FolderView[];
+  nestedFolders: TreeNode<FolderView>[];
+  collections: CollectionView[];
+  nestedCollections: TreeNode<CollectionView>[];
+  loaded: boolean = false;
+  cipherType = CipherType;
+  selectedAll: boolean = false;
+  selectedFavorites: boolean = false;
+  selectedTrash: boolean = false;
+  selectedType: CipherType = null;
+  selectedFolder: boolean = false;
+  selectedFolderId: string = null;
+  selectedCollectionId: string = null;
+
+  private collapsedGroupings: Set<string>;
+
+  constructor(
+    protected collectionService: CollectionService,
+    protected folderService: FolderService,
+    protected stateService: StateService
+  ) {}
+
+  async load(setLoaded = true) {
+    const collapsedGroupings = await this.stateService.getCollapsedGroupings();
+    if (collapsedGroupings == null) {
+      this.collapsedGroupings = new Set<string>();
+    } else {
+      this.collapsedGroupings = new Set(collapsedGroupings);
     }
 
-    selectType(type: CipherType) {
-        this.clearSelections();
-        this.selectedType = type;
-        this.onCipherTypeClicked.emit(type);
-    }
+    await this.loadFolders();
+    await this.loadCollections();
 
-    selectFolder(folder: FolderView) {
-        this.clearSelections();
-        this.selectedFolder = true;
-        this.selectedFolderId = folder.id;
-        this.onFolderClicked.emit(folder);
+    if (setLoaded) {
+      this.loaded = true;
     }
+  }
 
-    addFolder() {
-        this.onAddFolder.emit();
+  async loadCollections(organizationId?: string) {
+    if (!this.showCollections) {
+      return;
     }
-
-    editFolder(folder: FolderView) {
-        this.onEditFolder.emit(folder);
+    const collections = await this.collectionService.getAllDecrypted();
+    if (organizationId != null) {
+      this.collections = collections.filter((c) => c.organizationId === organizationId);
+    } else {
+      this.collections = collections;
     }
+    this.nestedCollections = await this.collectionService.getAllNested(this.collections);
+  }
 
-    selectCollection(collection: CollectionView) {
-        this.clearSelections();
-        this.selectedCollectionId = collection.id;
-        this.onCollectionClicked.emit(collection);
+  async loadFolders() {
+    if (!this.showFolders) {
+      return;
     }
-
-    clearSelections() {
-        this.selectedAll = false;
-        this.selectedFavorites = false;
-        this.selectedTrash = false;
-        this.selectedType = null;
-        this.selectedFolder = false;
-        this.selectedFolderId = null;
-        this.selectedCollectionId = null;
+    this.folders = await this.folderService.getAllDecrypted();
+    this.nestedFolders = await this.folderService.getAllNested();
+  }
+
+  selectAll() {
+    this.clearSelections();
+    this.selectedAll = true;
+    this.onAllClicked.emit();
+  }
+
+  selectFavorites() {
+    this.clearSelections();
+    this.selectedFavorites = true;
+    this.onFavoritesClicked.emit();
+  }
+
+  selectTrash() {
+    this.clearSelections();
+    this.selectedTrash = true;
+    this.onTrashClicked.emit();
+  }
+
+  selectType(type: CipherType) {
+    this.clearSelections();
+    this.selectedType = type;
+    this.onCipherTypeClicked.emit(type);
+  }
+
+  selectFolder(folder: FolderView) {
+    this.clearSelections();
+    this.selectedFolder = true;
+    this.selectedFolderId = folder.id;
+    this.onFolderClicked.emit(folder);
+  }
+
+  addFolder() {
+    this.onAddFolder.emit();
+  }
+
+  editFolder(folder: FolderView) {
+    this.onEditFolder.emit(folder);
+  }
+
+  selectCollection(collection: CollectionView) {
+    this.clearSelections();
+    this.selectedCollectionId = collection.id;
+    this.onCollectionClicked.emit(collection);
+  }
+
+  clearSelections() {
+    this.selectedAll = false;
+    this.selectedFavorites = false;
+    this.selectedTrash = false;
+    this.selectedType = null;
+    this.selectedFolder = false;
+    this.selectedFolderId = null;
+    this.selectedCollectionId = null;
+  }
+
+  async collapse(grouping: FolderView | CollectionView, idPrefix = "") {
+    if (grouping.id == null) {
+      return;
     }
-
-    collapse(grouping: FolderView | CollectionView, idPrefix = '') {
-        if (grouping.id == null) {
-            return;
-        }
-        const id = idPrefix + grouping.id;
-        if (this.isCollapsed(grouping, idPrefix)) {
-            this.collapsedGroupings.delete(id);
-        } else {
-            this.collapsedGroupings.add(id);
-        }
-        this.storageService.save(this.collapsedGroupingsKey, this.collapsedGroupings);
+    const id = idPrefix + grouping.id;
+    if (this.isCollapsed(grouping, idPrefix)) {
+      this.collapsedGroupings.delete(id);
+    } else {
+      this.collapsedGroupings.add(id);
     }
+    await this.stateService.setCollapsedGroupings(this.collapsedGroupings);
+  }
 
-    isCollapsed(grouping: FolderView | CollectionView, idPrefix = '') {
-        return this.collapsedGroupings.has(idPrefix + grouping.id);
-    }
+  isCollapsed(grouping: FolderView | CollectionView, idPrefix = "") {
+    return this.collapsedGroupings.has(idPrefix + grouping.id);
+  }
 }
diff --git a/jslib/angular/src/components/hint.component.ts b/jslib/angular/src/components/hint.component.ts
index 8ed7d6ed..9a3d7b2f 100644
--- a/jslib/angular/src/components/hint.component.ts
+++ b/jslib/angular/src/components/hint.component.ts
@@ -1,46 +1,56 @@
-import { Router } from '@angular/router';
+import { Router } from "@angular/router";
 
-import { PasswordHintRequest } from 'jslib-common/models/request/passwordHintRequest';
+import { PasswordHintRequest } from "jslib-common/models/request/passwordHintRequest";
 
-import { ApiService } from 'jslib-common/abstractions/api.service';
-import { I18nService } from 'jslib-common/abstractions/i18n.service';
-import { LogService } from 'jslib-common/abstractions/log.service';
-import { PlatformUtilsService } from 'jslib-common/abstractions/platformUtils.service';
+import { ApiService } from "jslib-common/abstractions/api.service";
+import { I18nService } from "jslib-common/abstractions/i18n.service";
+import { LogService } from "jslib-common/abstractions/log.service";
+import { PlatformUtilsService } from "jslib-common/abstractions/platformUtils.service";
 
 export class HintComponent {
-    email: string = '';
-    formPromise: Promise<any>;
+  email: string = "";
+  formPromise: Promise<any>;
 
-    protected successRoute = 'login';
-    protected onSuccessfulSubmit: () => void;
+  protected successRoute = "login";
+  protected onSuccessfulSubmit: () => void;
 
-    constructor(protected router: Router, protected i18nService: I18nService,
-        protected apiService: ApiService, protected platformUtilsService: PlatformUtilsService,
-        private logService: LogService) { }
+  constructor(
+    protected router: Router,
+    protected i18nService: I18nService,
+    protected apiService: ApiService,
+    protected platformUtilsService: PlatformUtilsService,
+    private logService: LogService
+  ) {}
 
-    async submit() {
-        if (this.email == null || this.email === '') {
-            this.platformUtilsService.showToast('error', this.i18nService.t('errorOccurred'),
-                this.i18nService.t('emailRequired'));
-            return;
-        }
-        if (this.email.indexOf('@') === -1) {
-            this.platformUtilsService.showToast('error', this.i18nService.t('errorOccurred'),
-                this.i18nService.t('invalidEmail'));
-            return;
-        }
+  async submit() {
+    if (this.email == null || this.email === "") {
+      this.platformUtilsService.showToast(
+        "error",
+        this.i18nService.t("errorOccurred"),
+        this.i18nService.t("emailRequired")
+      );
+      return;
+    }
+    if (this.email.indexOf("@") === -1) {
+      this.platformUtilsService.showToast(
+        "error",
+        this.i18nService.t("errorOccurred"),
+        this.i18nService.t("invalidEmail")
+      );
+      return;
+    }
 
-        try {
-            this.formPromise = this.apiService.postPasswordHint(new PasswordHintRequest(this.email));
-            await this.formPromise;
-            this.platformUtilsService.showToast('success', null, this.i18nService.t('masterPassSent'));
-            if (this.onSuccessfulSubmit != null) {
-                this.onSuccessfulSubmit();
-            } else if (this.router != null) {
-                this.router.navigate([this.successRoute]);
-            }
-        } catch (e) {
-            this.logService.error(e);
-        }
+    try {
+      this.formPromise = this.apiService.postPasswordHint(new PasswordHintRequest(this.email));
+      await this.formPromise;
+      this.platformUtilsService.showToast("success", null, this.i18nService.t("masterPassSent"));
+      if (this.onSuccessfulSubmit != null) {
+        this.onSuccessfulSubmit();
+      } else if (this.router != null) {
+        this.router.navigate([this.successRoute]);
+      }
+    } catch (e) {
+      this.logService.error(e);
     }
+  }
 }
diff --git a/jslib/angular/src/components/icon.component.html b/jslib/angular/src/components/icon.component.html
index 00d2c591..a8e4ac9f 100644
--- a/jslib/angular/src/components/icon.component.html
+++ b/jslib/angular/src/components/icon.component.html
@@ -1,4 +1,4 @@
 <div class="icon" aria-hidden="true">
-    <img [src]="image" appFallbackSrc="{{fallbackImage}}" *ngIf="imageEnabled && image" alt="" />
-    <i class="fa fa-fw fa-lg {{icon}}" *ngIf="!imageEnabled || !image"></i>
+  <img [src]="image" appFallbackSrc="{{ fallbackImage }}" *ngIf="imageEnabled && image" alt="" />
+  <i class="bwi bwi-fw bwi-lg {{ icon }}" *ngIf="!imageEnabled || !image"></i>
 </div>
diff --git a/jslib/angular/src/components/icon.component.ts b/jslib/angular/src/components/icon.component.ts
index b3a75d5a..c5704f27 100644
--- a/jslib/angular/src/components/icon.component.ts
+++ b/jslib/angular/src/components/icon.component.ts
@@ -1,107 +1,115 @@
-import {
-    Component,
-    Input,
-    OnChanges,
-} from '@angular/core';
+import { Component, Input, OnChanges } from "@angular/core";
 
-import { CipherType } from 'jslib-common/enums/cipherType';
+import { CipherType } from "jslib-common/enums/cipherType";
 
-import { CipherView } from 'jslib-common/models/view/cipherView';
+import { CipherView } from "jslib-common/models/view/cipherView";
 
-import { EnvironmentService } from 'jslib-common/abstractions/environment.service';
-import { StateService } from 'jslib-common/abstractions/state.service';
+import { EnvironmentService } from "jslib-common/abstractions/environment.service";
+import { StateService } from "jslib-common/abstractions/state.service";
 
-import { ConstantsService } from 'jslib-common/services/constants.service';
+import { Utils } from "jslib-common/misc/utils";
 
-import { Utils } from 'jslib-common/misc/utils';
-
-const IconMap: any = {
-    'fa-globe': String.fromCharCode(0xf0ac),
-    'fa-sticky-note-o': String.fromCharCode(0xf24a),
-    'fa-id-card-o': String.fromCharCode(0xf2c3),
-    'fa-credit-card': String.fromCharCode(0xf09d),
-    'fa-android': String.fromCharCode(0xf17b),
-    'fa-apple': String.fromCharCode(0xf179),
+/**
+ * Provides a mapping from supported card brands to
+ * the filenames of icon that should be present in images/cards folder of clients.
+ */
+const cardIcons: Record<string, string> = {
+  Visa: "card-visa",
+  Mastercard: "card-mastercard",
+  Amex: "card-amex",
+  Discover: "card-discover",
+  "Diners Club": "card-diners-club",
+  JCB: "card-jcb",
+  Maestro: "card-maestro",
+  UnionPay: "card-union-pay",
 };
 
 @Component({
-    selector: 'app-vault-icon',
-    templateUrl: 'icon.component.html',
+  selector: "app-vault-icon",
+  templateUrl: "icon.component.html",
 })
 export class IconComponent implements OnChanges {
-    @Input() cipher: CipherView;
-    icon: string;
-    image: string;
-    fallbackImage: string;
-    imageEnabled: boolean;
+  @Input() cipher: CipherView;
+  icon: string;
+  image: string;
+  fallbackImage: string;
+  imageEnabled: boolean;
 
-    private iconsUrl: string;
+  private iconsUrl: string;
 
-    constructor(environmentService: EnvironmentService, protected stateService: StateService) {
-        this.iconsUrl = environmentService.getIconsUrl();
-    }
+  constructor(environmentService: EnvironmentService, private stateService: StateService) {
+    this.iconsUrl = environmentService.getIconsUrl();
+  }
 
-    async ngOnChanges() {
-        // Components may be re-used when using cdk-virtual-scroll. Which puts the component in a weird state,
-        // to avoid this we reset all state variables.
-        this.image = null;
-        this.fallbackImage = null;
-        this.imageEnabled = !(await this.stateService.get<boolean>(ConstantsService.disableFaviconKey));
-        this.load();
-    }
+  async ngOnChanges() {
+    // Components may be re-used when using cdk-virtual-scroll. Which puts the component in a weird state,
+    // to avoid this we reset all state variables.
+    this.image = null;
+    this.fallbackImage = null;
+    this.imageEnabled = !(await this.stateService.getDisableFavicon());
+    this.load();
+  }
 
-    get iconCode(): string {
-        return IconMap[this.icon];
+  protected load() {
+    switch (this.cipher.type) {
+      case CipherType.Login:
+        this.icon = "bwi-globe";
+        this.setLoginIcon();
+        break;
+      case CipherType.SecureNote:
+        this.icon = "bwi-sticky-note";
+        break;
+      case CipherType.Card:
+        this.icon = "bwi-credit-card";
+        this.setCardIcon();
+        break;
+      case CipherType.Identity:
+        this.icon = "bwi-id-card";
+        break;
+      default:
+        break;
     }
+  }
 
-    protected load() {
-        switch (this.cipher.type) {
-            case CipherType.Login:
-                this.icon = 'fa-globe';
-                this.setLoginIcon();
-                break;
-            case CipherType.SecureNote:
-                this.icon = 'fa-sticky-note-o';
-                break;
-            case CipherType.Card:
-                this.icon = 'fa-credit-card';
-                break;
-            case CipherType.Identity:
-                this.icon = 'fa-id-card-o';
-                break;
-            default:
-                break;
-        }
-    }
+  private setLoginIcon() {
+    if (this.cipher.login.uri) {
+      let hostnameUri = this.cipher.login.uri;
+      let isWebsite = false;
 
-    private setLoginIcon() {
-        if (this.cipher.login.uri) {
-            let hostnameUri = this.cipher.login.uri;
-            let isWebsite = false;
-
-            if (hostnameUri.indexOf('androidapp://') === 0) {
-                this.icon = 'fa-android';
-                this.image = null;
-            } else if (hostnameUri.indexOf('iosapp://') === 0) {
-                this.icon = 'fa-apple';
-                this.image = null;
-            } else if (this.imageEnabled && hostnameUri.indexOf('://') === -1 && hostnameUri.indexOf('.') > -1) {
-                hostnameUri = 'http://' + hostnameUri;
-                isWebsite = true;
-            } else if (this.imageEnabled) {
-                isWebsite = hostnameUri.indexOf('http') === 0 && hostnameUri.indexOf('.') > -1;
-            }
+      if (hostnameUri.indexOf("androidapp://") === 0) {
+        this.icon = "bwi-android";
+        this.image = null;
+      } else if (hostnameUri.indexOf("iosapp://") === 0) {
+        this.icon = "bwi-apple";
+        this.image = null;
+      } else if (
+        this.imageEnabled &&
+        hostnameUri.indexOf("://") === -1 &&
+        hostnameUri.indexOf(".") > -1
+      ) {
+        hostnameUri = "http://" + hostnameUri;
+        isWebsite = true;
+      } else if (this.imageEnabled) {
+        isWebsite = hostnameUri.indexOf("http") === 0 && hostnameUri.indexOf(".") > -1;
+      }
 
-            if (this.imageEnabled && isWebsite) {
-                try {
-                    this.image = this.iconsUrl + '/' + Utils.getHostname(hostnameUri) + '/icon.png';
-                    this.fallbackImage = 'images/fa-globe.png';
-                } catch (e) {
-                    // Ignore error since the fallback icon will be shown if image is null.
-                }
-            }
-        } else {
-            this.image = null;
+      if (this.imageEnabled && isWebsite) {
+        try {
+          this.image = this.iconsUrl + "/" + Utils.getHostname(hostnameUri) + "/icon.png";
+          this.fallbackImage = "images/bwi-globe.png";
+        } catch (e) {
+          // Ignore error since the fallback icon will be shown if image is null.
         }
+      }
+    } else {
+      this.image = null;
+    }
+  }
+
+  private setCardIcon() {
+    const brand = this.cipher.card.brand;
+    if (this.imageEnabled && brand in cardIcons) {
+      this.icon = "credit-card-icon " + cardIcons[brand];
     }
+  }
 }
diff --git a/jslib/angular/src/components/lock.component.ts b/jslib/angular/src/components/lock.component.ts
index bd11e9ac..04672dcd 100644
--- a/jslib/angular/src/components/lock.component.ts
+++ b/jslib/angular/src/components/lock.component.ts
@@ -1,208 +1,279 @@
-import { Directive, OnInit } from '@angular/core';
-import { Router } from '@angular/router';
+import { Directive, NgZone, OnInit } from "@angular/core";
+import { Router } from "@angular/router";
+import { take } from "rxjs/operators";
 
-import { ApiService } from 'jslib-common/abstractions/api.service';
-import { CryptoService } from 'jslib-common/abstractions/crypto.service';
-import { EnvironmentService } from 'jslib-common/abstractions/environment.service';
-import { I18nService } from 'jslib-common/abstractions/i18n.service';
-import { KeyConnectorService } from 'jslib-common/abstractions/keyConnector.service';
-import { LogService } from 'jslib-common/abstractions/log.service';
-import { MessagingService } from 'jslib-common/abstractions/messaging.service';
-import { PlatformUtilsService } from 'jslib-common/abstractions/platformUtils.service';
-import { StateService } from 'jslib-common/abstractions/state.service';
-import { StorageService } from 'jslib-common/abstractions/storage.service';
-import { UserService } from 'jslib-common/abstractions/user.service';
-import { VaultTimeoutService } from 'jslib-common/abstractions/vaultTimeout.service';
+import { ApiService } from "jslib-common/abstractions/api.service";
+import { CryptoService } from "jslib-common/abstractions/crypto.service";
+import { EnvironmentService } from "jslib-common/abstractions/environment.service";
+import { I18nService } from "jslib-common/abstractions/i18n.service";
+import { KeyConnectorService } from "jslib-common/abstractions/keyConnector.service";
+import { LogService } from "jslib-common/abstractions/log.service";
+import { MessagingService } from "jslib-common/abstractions/messaging.service";
+import { PlatformUtilsService } from "jslib-common/abstractions/platformUtils.service";
+import { StateService } from "jslib-common/abstractions/state.service";
+import { VaultTimeoutService } from "jslib-common/abstractions/vaultTimeout.service";
 
-import { ConstantsService } from 'jslib-common/services/constants.service';
+import { EncString } from "jslib-common/models/domain/encString";
+import { SymmetricCryptoKey } from "jslib-common/models/domain/symmetricCryptoKey";
 
-import { EncString } from 'jslib-common/models/domain/encString';
-import { SymmetricCryptoKey } from 'jslib-common/models/domain/symmetricCryptoKey';
+import { SecretVerificationRequest } from "jslib-common/models/request/secretVerificationRequest";
 
-import { SecretVerificationRequest } from 'jslib-common/models/request/secretVerificationRequest';
+import { Utils } from "jslib-common/misc/utils";
 
-import { Utils } from 'jslib-common/misc/utils';
-
-import { HashPurpose } from 'jslib-common/enums/hashPurpose';
+import { HashPurpose } from "jslib-common/enums/hashPurpose";
+import { KeySuffixOptions } from "jslib-common/enums/keySuffixOptions";
 
 @Directive()
 export class LockComponent implements OnInit {
-    masterPassword: string = '';
-    pin: string = '';
-    showPassword: boolean = false;
-    email: string;
-    pinLock: boolean = false;
-    webVaultHostname: string = '';
-    formPromise: Promise<any>;
-    supportsBiometric: boolean;
-    biometricLock: boolean;
-    biometricText: string;
-    hideInput: boolean;
-
-    protected successRoute: string = 'vault';
-    protected onSuccessfulSubmit: () => void;
-
-    private invalidPinAttempts = 0;
-    private pinSet: [boolean, boolean];
-
-    constructor(protected router: Router, protected i18nService: I18nService,
-        protected platformUtilsService: PlatformUtilsService, protected messagingService: MessagingService,
-        protected userService: UserService, protected cryptoService: CryptoService,
-        protected storageService: StorageService, protected vaultTimeoutService: VaultTimeoutService,
-        protected environmentService: EnvironmentService, protected stateService: StateService,
-        protected apiService: ApiService, private logService: LogService,
-        private keyConnectorService: KeyConnectorService) { }
-
-    async ngOnInit() {
-        this.pinSet = await this.vaultTimeoutService.isPinLockSet();
-        this.pinLock = (this.pinSet[0] && this.vaultTimeoutService.pinProtectedKey != null) || this.pinSet[1];
-        this.supportsBiometric = await this.platformUtilsService.supportsBiometric();
-        this.biometricLock = await this.vaultTimeoutService.isBiometricLockSet() &&
-            (await this.cryptoService.hasKeyStored('biometric') || !this.platformUtilsService.supportsSecureStorage());
-        this.biometricText = await this.storageService.get(ConstantsService.biometricText);
-        this.email = await this.userService.getEmail();
-        const usesKeyConnector = await this.keyConnectorService.getUsesKeyConnector();
-        this.hideInput = usesKeyConnector && !this.pinLock;
-
-        // Users with key connector and without biometric or pin has no MP to unlock using
-        if (usesKeyConnector && !(this.biometricLock || this.pinLock)) {
-            await this.vaultTimeoutService.logOut();
-        }
+  masterPassword: string = "";
+  pin: string = "";
+  showPassword: boolean = false;
+  email: string;
+  pinLock: boolean = false;
+  webVaultHostname: string = "";
+  formPromise: Promise<any>;
+  supportsBiometric: boolean;
+  biometricLock: boolean;
+  biometricText: string;
+  hideInput: boolean;
+
+  protected successRoute: string = "vault";
+  protected onSuccessfulSubmit: () => Promise<void>;
+
+  private invalidPinAttempts = 0;
+  private pinSet: [boolean, boolean];
+
+  constructor(
+    protected router: Router,
+    protected i18nService: I18nService,
+    protected platformUtilsService: PlatformUtilsService,
+    protected messagingService: MessagingService,
+    protected cryptoService: CryptoService,
+    protected vaultTimeoutService: VaultTimeoutService,
+    protected environmentService: EnvironmentService,
+    protected stateService: StateService,
+    protected apiService: ApiService,
+    private logService: LogService,
+    private keyConnectorService: KeyConnectorService,
+    protected ngZone: NgZone
+  ) {}
+
+  async ngOnInit() {
+    this.stateService.activeAccount.subscribe(async (_userId) => {
+      await this.load();
+    });
+  }
 
-        const webVaultUrl = this.environmentService.getWebVaultUrl();
-        const vaultUrl = webVaultUrl === 'https://vault.bitwarden.com' ? 'https://bitwarden.com' : webVaultUrl;
-        this.webVaultHostname = Utils.getHostname(vaultUrl);
+  async submit() {
+    if (this.pinLock && (this.pin == null || this.pin === "")) {
+      this.platformUtilsService.showToast(
+        "error",
+        this.i18nService.t("errorOccurred"),
+        this.i18nService.t("pinRequired")
+      );
+      return;
     }
+    if (!this.pinLock && (this.masterPassword == null || this.masterPassword === "")) {
+      this.platformUtilsService.showToast(
+        "error",
+        this.i18nService.t("errorOccurred"),
+        this.i18nService.t("masterPassRequired")
+      );
+      return;
+    }
+
+    const kdf = await this.stateService.getKdfType();
+    const kdfIterations = await this.stateService.getKdfIterations();
 
-    async submit() {
-        if (this.pinLock && (this.pin == null || this.pin === '')) {
-            this.platformUtilsService.showToast('error', this.i18nService.t('errorOccurred'),
-                this.i18nService.t('pinRequired'));
-            return;
+    if (this.pinLock) {
+      let failed = true;
+      try {
+        if (this.pinSet[0]) {
+          const key = await this.cryptoService.makeKeyFromPin(
+            this.pin,
+            this.email,
+            kdf,
+            kdfIterations,
+            await this.stateService.getDecryptedPinProtected()
+          );
+          const encKey = await this.cryptoService.getEncKey(key);
+          const protectedPin = await this.stateService.getProtectedPin();
+          const decPin = await this.cryptoService.decryptToUtf8(
+            new EncString(protectedPin),
+            encKey
+          );
+          failed = decPin !== this.pin;
+          if (!failed) {
+            await this.setKeyAndContinue(key);
+          }
+        } else {
+          const key = await this.cryptoService.makeKeyFromPin(
+            this.pin,
+            this.email,
+            kdf,
+            kdfIterations
+          );
+          failed = false;
+          await this.setKeyAndContinue(key);
         }
-        if (!this.pinLock && (this.masterPassword == null || this.masterPassword === '')) {
-            this.platformUtilsService.showToast('error', this.i18nService.t('errorOccurred'),
-                this.i18nService.t('masterPassRequired'));
-            return;
+      } catch {
+        failed = true;
+      }
+
+      if (failed) {
+        this.invalidPinAttempts++;
+        if (this.invalidPinAttempts >= 5) {
+          this.messagingService.send("logout");
+          return;
         }
+        this.platformUtilsService.showToast(
+          "error",
+          this.i18nService.t("errorOccurred"),
+          this.i18nService.t("invalidPin")
+        );
+      }
+    } else {
+      const key = await this.cryptoService.makeKey(
+        this.masterPassword,
+        this.email,
+        kdf,
+        kdfIterations
+      );
+      const storedKeyHash = await this.cryptoService.getKeyHash();
 
-        const kdf = await this.userService.getKdf();
-        const kdfIterations = await this.userService.getKdfIterations();
-
-        if (this.pinLock) {
-            let failed = true;
-            try {
-                if (this.pinSet[0]) {
-                    const key = await this.cryptoService.makeKeyFromPin(this.pin, this.email, kdf, kdfIterations,
-                        this.vaultTimeoutService.pinProtectedKey);
-                    const encKey = await this.cryptoService.getEncKey(key);
-                    const protectedPin = await this.storageService.get<string>(ConstantsService.protectedPin);
-                    const decPin = await this.cryptoService.decryptToUtf8(new EncString(protectedPin), encKey);
-                    failed = decPin !== this.pin;
-                    if (!failed) {
-                        await this.setKeyAndContinue(key);
-                    }
-                } else {
-                    const key = await this.cryptoService.makeKeyFromPin(this.pin, this.email, kdf, kdfIterations);
-                    failed = false;
-                    await this.setKeyAndContinue(key);
-                }
-            } catch {
-                failed = true;
-            }
-
-            if (failed) {
-                this.invalidPinAttempts++;
-                if (this.invalidPinAttempts >= 5) {
-                    this.messagingService.send('logout');
-                    return;
-                }
-                this.platformUtilsService.showToast('error', this.i18nService.t('errorOccurred'),
-                    this.i18nService.t('invalidPin'));
-            }
-        } else {
-            const key = await this.cryptoService.makeKey(this.masterPassword, this.email, kdf, kdfIterations);
-            const storedKeyHash = await this.cryptoService.getKeyHash();
-
-            let passwordValid = false;
-
-            if (storedKeyHash != null) {
-                passwordValid = await this.cryptoService.compareAndUpdateKeyHash(this.masterPassword, key);
-            } else {
-                const request = new SecretVerificationRequest();
-                const serverKeyHash = await this.cryptoService.hashPassword(this.masterPassword, key,
-                    HashPurpose.ServerAuthorization);
-                request.masterPasswordHash = serverKeyHash;
-                try {
-                    this.formPromise = this.apiService.postAccountVerifyPassword(request);
-                    await this.formPromise;
-                    passwordValid = true;
-                    const localKeyHash = await this.cryptoService.hashPassword(this.masterPassword, key,
-                        HashPurpose.LocalAuthorization);
-                    await this.cryptoService.setKeyHash(localKeyHash);
-                } catch (e) {
-                    this.logService.error(e);
-                }
-            }
-
-            if (passwordValid) {
-                if (this.pinSet[0]) {
-                    const protectedPin = await this.storageService.get<string>(ConstantsService.protectedPin);
-                    const encKey = await this.cryptoService.getEncKey(key);
-                    const decPin = await this.cryptoService.decryptToUtf8(new EncString(protectedPin), encKey);
-                    const pinKey = await this.cryptoService.makePinKey(decPin, this.email, kdf, kdfIterations);
-                    this.vaultTimeoutService.pinProtectedKey = await this.cryptoService.encrypt(key.key, pinKey);
-                }
-                this.setKeyAndContinue(key);
-            } else {
-                this.platformUtilsService.showToast('error', this.i18nService.t('errorOccurred'),
-                    this.i18nService.t('invalidMasterPassword'));
-            }
+      let passwordValid = false;
+
+      if (storedKeyHash != null) {
+        passwordValid = await this.cryptoService.compareAndUpdateKeyHash(this.masterPassword, key);
+      } else {
+        const request = new SecretVerificationRequest();
+        const serverKeyHash = await this.cryptoService.hashPassword(
+          this.masterPassword,
+          key,
+          HashPurpose.ServerAuthorization
+        );
+        request.masterPasswordHash = serverKeyHash;
+        try {
+          this.formPromise = this.apiService.postAccountVerifyPassword(request);
+          await this.formPromise;
+          passwordValid = true;
+          const localKeyHash = await this.cryptoService.hashPassword(
+            this.masterPassword,
+            key,
+            HashPurpose.LocalAuthorization
+          );
+          await this.cryptoService.setKeyHash(localKeyHash);
+        } catch (e) {
+          this.logService.error(e);
         }
-    }
+      }
 
-    async logOut() {
-        const confirmed = await this.platformUtilsService.showDialog(this.i18nService.t('logOutConfirmation'),
-            this.i18nService.t('logOut'), this.i18nService.t('logOut'), this.i18nService.t('cancel'));
-        if (confirmed) {
-            this.messagingService.send('logout');
+      if (passwordValid) {
+        if (this.pinSet[0]) {
+          const protectedPin = await this.stateService.getProtectedPin();
+          const encKey = await this.cryptoService.getEncKey(key);
+          const decPin = await this.cryptoService.decryptToUtf8(
+            new EncString(protectedPin),
+            encKey
+          );
+          const pinKey = await this.cryptoService.makePinKey(
+            decPin,
+            this.email,
+            kdf,
+            kdfIterations
+          );
+          await this.stateService.setDecryptedPinProtected(
+            await this.cryptoService.encrypt(key.key, pinKey)
+          );
         }
+        await this.setKeyAndContinue(key);
+      } else {
+        this.platformUtilsService.showToast(
+          "error",
+          this.i18nService.t("errorOccurred"),
+          this.i18nService.t("invalidMasterPassword")
+        );
+      }
     }
+  }
 
-    async unlockBiometric(): Promise<boolean> {
-        if (!this.biometricLock) {
-            return;
-        }
+  async logOut() {
+    const confirmed = await this.platformUtilsService.showDialog(
+      this.i18nService.t("logOutConfirmation"),
+      this.i18nService.t("logOut"),
+      this.i18nService.t("logOut"),
+      this.i18nService.t("cancel")
+    );
+    if (confirmed) {
+      this.messagingService.send("logout");
+    }
+  }
 
-        const success = (await this.cryptoService.getKey('biometric')) != null;
+  async unlockBiometric(): Promise<boolean> {
+    if (!this.biometricLock) {
+      return;
+    }
 
-        if (success) {
-            await this.doContinue();
-        }
+    const success = (await this.cryptoService.getKey(KeySuffixOptions.Biometric)) != null;
 
-        return success;
+    if (success) {
+      await this.doContinue();
     }
 
-    togglePassword() {
-        this.showPassword = !this.showPassword;
-        document.getElementById(this.pinLock ? 'pin' : 'masterPassword').focus();
+    return success;
+  }
+
+  togglePassword() {
+    this.showPassword = !this.showPassword;
+    const input = document.getElementById(this.pinLock ? "pin" : "masterPassword");
+    if (this.ngZone.isStable) {
+      input.focus();
+    } else {
+      this.ngZone.onStable.pipe(take(1)).subscribe(() => input.focus());
     }
+  }
+
+  private async setKeyAndContinue(key: SymmetricCryptoKey) {
+    await this.cryptoService.setKey(key);
+    await this.doContinue();
+  }
 
-    private async setKeyAndContinue(key: SymmetricCryptoKey) {
-        await this.cryptoService.setKey(key);
-        this.doContinue();
+  private async doContinue() {
+    await this.stateService.setBiometricLocked(false);
+    await this.stateService.setEverBeenUnlocked(true);
+    const disableFavicon = await this.stateService.getDisableFavicon();
+    await this.stateService.setDisableFavicon(!!disableFavicon);
+    this.messagingService.send("unlocked");
+    if (this.onSuccessfulSubmit != null) {
+      await this.onSuccessfulSubmit();
+    } else if (this.router != null) {
+      this.router.navigate([this.successRoute]);
     }
+  }
 
-    private async doContinue() {
-        this.vaultTimeoutService.biometricLocked = false;
-        this.vaultTimeoutService.everBeenUnlocked = true;
-        const disableFavicon = await this.storageService.get<boolean>(ConstantsService.disableFaviconKey);
-        await this.stateService.save(ConstantsService.disableFaviconKey, !!disableFavicon);
-        this.messagingService.send('unlocked');
-        if (this.onSuccessfulSubmit != null) {
-            this.onSuccessfulSubmit();
-        } else if (this.router != null) {
-            this.router.navigate([this.successRoute]);
-        }
+  private async load() {
+    this.pinSet = await this.vaultTimeoutService.isPinLockSet();
+    this.pinLock =
+      (this.pinSet[0] && (await this.stateService.getDecryptedPinProtected()) != null) ||
+      this.pinSet[1];
+    this.supportsBiometric = await this.platformUtilsService.supportsBiometric();
+    this.biometricLock =
+      (await this.vaultTimeoutService.isBiometricLockSet()) &&
+      ((await this.cryptoService.hasKeyStored(KeySuffixOptions.Biometric)) ||
+        !this.platformUtilsService.supportsSecureStorage());
+    this.biometricText = await this.stateService.getBiometricText();
+    this.email = await this.stateService.getEmail();
+    const usesKeyConnector = await this.keyConnectorService.getUsesKeyConnector();
+    this.hideInput = usesKeyConnector && !this.pinLock;
+
+    // Users with key connector and without biometric or pin has no MP to unlock using
+    if (usesKeyConnector && !(this.biometricLock || this.pinLock)) {
+      await this.vaultTimeoutService.logOut();
     }
+
+    const webVaultUrl = this.environmentService.getWebVaultUrl();
+    const vaultUrl =
+      webVaultUrl === "https://vault.bitwarden.com" ? "https://bitwarden.com" : webVaultUrl;
+    this.webVaultHostname = Utils.getHostname(vaultUrl);
+  }
 }
diff --git a/jslib/angular/src/components/login.component.ts b/jslib/angular/src/components/login.component.ts
index bfac5f53..e860ca9c 100644
--- a/jslib/angular/src/components/login.component.ts
+++ b/jslib/angular/src/components/login.component.ts
@@ -1,169 +1,189 @@
-import {
-    Directive,
-    Input,
-    OnInit,
-} from '@angular/core';
+import { Directive, Input, NgZone, OnInit } from "@angular/core";
 
-import { Router } from '@angular/router';
+import { Router } from "@angular/router";
 
-import { AuthResult } from 'jslib-common/models/domain/authResult';
+import { take } from "rxjs/operators";
 
-import { AuthService } from 'jslib-common/abstractions/auth.service';
-import { CryptoFunctionService } from 'jslib-common/abstractions/cryptoFunction.service';
-import { EnvironmentService } from 'jslib-common/abstractions/environment.service';
-import { I18nService } from 'jslib-common/abstractions/i18n.service';
-import { LogService } from 'jslib-common/abstractions/log.service';
-import { PasswordGenerationService } from 'jslib-common/abstractions/passwordGeneration.service';
-import { PlatformUtilsService } from 'jslib-common/abstractions/platformUtils.service';
-import { StateService } from 'jslib-common/abstractions/state.service';
-import { StorageService } from 'jslib-common/abstractions/storage.service';
+import { AuthResult } from "jslib-common/models/domain/authResult";
 
-import { ConstantsService } from 'jslib-common/services/constants.service';
+import { AuthService } from "jslib-common/abstractions/auth.service";
+import { CryptoFunctionService } from "jslib-common/abstractions/cryptoFunction.service";
+import { EnvironmentService } from "jslib-common/abstractions/environment.service";
+import { I18nService } from "jslib-common/abstractions/i18n.service";
+import { LogService } from "jslib-common/abstractions/log.service";
+import { PasswordGenerationService } from "jslib-common/abstractions/passwordGeneration.service";
+import { PlatformUtilsService } from "jslib-common/abstractions/platformUtils.service";
+import { StateService } from "jslib-common/abstractions/state.service";
 
-import { Utils } from 'jslib-common/misc/utils';
+import { Utils } from "jslib-common/misc/utils";
 
-import { CaptchaProtectedComponent } from './captchaProtected.component';
-
-const Keys = {
-    rememberedEmail: 'rememberedEmail',
-    rememberEmail: 'rememberEmail',
-};
+import { CaptchaProtectedComponent } from "./captchaProtected.component";
 
 @Directive()
 export class LoginComponent extends CaptchaProtectedComponent implements OnInit {
-    @Input() email: string = '';
-    @Input() rememberEmail = true;
-
-    masterPassword: string = '';
-    showPassword: boolean = false;
-    formPromise: Promise<AuthResult>;
-    onSuccessfulLogin: () => Promise<any>;
-    onSuccessfulLoginNavigate: () => Promise<any>;
-    onSuccessfulLoginTwoFactorNavigate: () => Promise<any>;
-    onSuccessfulLoginForceResetNavigate: () => Promise<any>;
-
-    protected twoFactorRoute = '2fa';
-    protected successRoute = 'vault';
-    protected forcePasswordResetRoute = 'update-temp-password';
-
-    constructor(protected authService: AuthService, protected router: Router,
-        platformUtilsService: PlatformUtilsService, i18nService: I18nService,
-        protected stateService: StateService, environmentService: EnvironmentService,
-        protected passwordGenerationService: PasswordGenerationService,
-        protected cryptoFunctionService: CryptoFunctionService, private storageService: StorageService,
-        protected logService: LogService) {
-        super(environmentService, i18nService, platformUtilsService);
+  @Input() email: string = "";
+  @Input() rememberEmail = true;
+
+  masterPassword: string = "";
+  showPassword: boolean = false;
+  formPromise: Promise<AuthResult>;
+  onSuccessfulLogin: () => Promise<any>;
+  onSuccessfulLoginNavigate: () => Promise<any>;
+  onSuccessfulLoginTwoFactorNavigate: () => Promise<any>;
+  onSuccessfulLoginForceResetNavigate: () => Promise<any>;
+
+  protected twoFactorRoute = "2fa";
+  protected successRoute = "vault";
+  protected forcePasswordResetRoute = "update-temp-password";
+  protected alwaysRememberEmail: boolean = false;
+
+  constructor(
+    protected authService: AuthService,
+    protected router: Router,
+    platformUtilsService: PlatformUtilsService,
+    i18nService: I18nService,
+    protected stateService: StateService,
+    environmentService: EnvironmentService,
+    protected passwordGenerationService: PasswordGenerationService,
+    protected cryptoFunctionService: CryptoFunctionService,
+    protected logService: LogService,
+    protected ngZone: NgZone
+  ) {
+    super(environmentService, i18nService, platformUtilsService);
+  }
+
+  async ngOnInit() {
+    if (this.email == null || this.email === "") {
+      this.email = await this.stateService.getRememberedEmail();
+      if (this.email == null) {
+        this.email = "";
+      }
     }
-
-    async ngOnInit() {
-        if (this.email == null || this.email === '') {
-            this.email = await this.storageService.get<string>(Keys.rememberedEmail);
-            if (this.email == null) {
-                this.email = '';
-            }
-        }
-        this.rememberEmail = await this.storageService.get<boolean>(Keys.rememberEmail);
-        if (this.rememberEmail == null) {
-            this.rememberEmail = true;
-        }
-        if (Utils.isBrowser && !Utils.isNode) {
-            this.focusInput();
-        }
+    if (!this.alwaysRememberEmail) {
+      this.rememberEmail = (await this.stateService.getRememberedEmail()) != null;
+    }
+    if (Utils.isBrowser && !Utils.isNode) {
+      this.focusInput();
+    }
+  }
+
+  async submit() {
+    await this.setupCaptcha();
+
+    if (this.email == null || this.email === "") {
+      this.platformUtilsService.showToast(
+        "error",
+        this.i18nService.t("errorOccurred"),
+        this.i18nService.t("emailRequired")
+      );
+      return;
+    }
+    if (this.email.indexOf("@") === -1) {
+      this.platformUtilsService.showToast(
+        "error",
+        this.i18nService.t("errorOccurred"),
+        this.i18nService.t("invalidEmail")
+      );
+      return;
+    }
+    if (this.masterPassword == null || this.masterPassword === "") {
+      this.platformUtilsService.showToast(
+        "error",
+        this.i18nService.t("errorOccurred"),
+        this.i18nService.t("masterPassRequired")
+      );
+      return;
     }
 
-    async submit() {
-        await this.setupCaptcha();
-
-        if (this.email == null || this.email === '') {
-            this.platformUtilsService.showToast('error', this.i18nService.t('errorOccurred'),
-                this.i18nService.t('emailRequired'));
-            return;
+    try {
+      this.formPromise = this.authService.logIn(this.email, this.masterPassword, this.captchaToken);
+      const response = await this.formPromise;
+      if (this.rememberEmail || this.alwaysRememberEmail) {
+        await this.stateService.setRememberedEmail(this.email);
+      } else {
+        await this.stateService.setRememberedEmail(null);
+      }
+      if (this.handleCaptchaRequired(response)) {
+        return;
+      } else if (response.twoFactor) {
+        if (this.onSuccessfulLoginTwoFactorNavigate != null) {
+          this.onSuccessfulLoginTwoFactorNavigate();
+        } else {
+          this.router.navigate([this.twoFactorRoute]);
         }
-        if (this.email.indexOf('@') === -1) {
-            this.platformUtilsService.showToast('error', this.i18nService.t('errorOccurred'),
-                this.i18nService.t('invalidEmail'));
-            return;
+      } else if (response.forcePasswordReset) {
+        if (this.onSuccessfulLoginForceResetNavigate != null) {
+          this.onSuccessfulLoginForceResetNavigate();
+        } else {
+          this.router.navigate([this.forcePasswordResetRoute]);
         }
-        if (this.masterPassword == null || this.masterPassword === '') {
-            this.platformUtilsService.showToast('error', this.i18nService.t('errorOccurred'),
-                this.i18nService.t('masterPassRequired'));
-            return;
+      } else {
+        const disableFavicon = await this.stateService.getDisableFavicon();
+        await this.stateService.setDisableFavicon(!!disableFavicon);
+        if (this.onSuccessfulLogin != null) {
+          this.onSuccessfulLogin();
         }
-
-        try {
-            this.formPromise = this.authService.logIn(this.email, this.masterPassword, this.captchaToken);
-            const response = await this.formPromise;
-            await this.storageService.save(Keys.rememberEmail, this.rememberEmail);
-            if (this.rememberEmail) {
-                await this.storageService.save(Keys.rememberedEmail, this.email);
-            } else {
-                await this.storageService.remove(Keys.rememberedEmail);
-            }
-            if (this.handleCaptchaRequired(response)) {
-                return;
-            } else if (response.twoFactor) {
-                if (this.onSuccessfulLoginTwoFactorNavigate != null) {
-                    this.onSuccessfulLoginTwoFactorNavigate();
-                } else {
-                    this.router.navigate([this.twoFactorRoute]);
-                }
-            } else if (response.forcePasswordReset) {
-                if (this.onSuccessfulLoginForceResetNavigate != null) {
-                    this.onSuccessfulLoginForceResetNavigate();
-                } else {
-                    this.router.navigate([this.forcePasswordResetRoute]);
-                }
-            } else {
-                const disableFavicon = await this.storageService.get<boolean>(ConstantsService.disableFaviconKey);
-                await this.stateService.save(ConstantsService.disableFaviconKey, !!disableFavicon);
-                if (this.onSuccessfulLogin != null) {
-                    this.onSuccessfulLogin();
-                }
-                if (this.onSuccessfulLoginNavigate != null) {
-                    this.onSuccessfulLoginNavigate();
-                } else {
-                    this.router.navigate([this.successRoute]);
-                }
-            }
-        } catch (e) {
-            this.logService.error(e);
+        if (this.onSuccessfulLoginNavigate != null) {
+          this.onSuccessfulLoginNavigate();
+        } else {
+          this.router.navigate([this.successRoute]);
         }
+      }
+    } catch (e) {
+      this.logService.error(e);
     }
-
-    togglePassword() {
-        this.showPassword = !this.showPassword;
-        document.getElementById('masterPassword').focus();
-    }
-
-    async launchSsoBrowser(clientId: string, ssoRedirectUri: string) {
-        // Generate necessary sso params
-        const passwordOptions: any = {
-            type: 'password',
-            length: 64,
-            uppercase: true,
-            lowercase: true,
-            numbers: true,
-            special: false,
-        };
-        const state = await this.passwordGenerationService.generatePassword(passwordOptions);
-        const ssoCodeVerifier = await this.passwordGenerationService.generatePassword(passwordOptions);
-        const codeVerifierHash = await this.cryptoFunctionService.hash(ssoCodeVerifier, 'sha256');
-        const codeChallenge = Utils.fromBufferToUrlB64(codeVerifierHash);
-
-        // Save sso params
-        await this.storageService.save(ConstantsService.ssoStateKey, state);
-        await this.storageService.save(ConstantsService.ssoCodeVerifierKey, ssoCodeVerifier);
-
-        // Build URI
-        const webUrl = this.environmentService.getWebVaultUrl();
-
-        // Launch browser
-        this.platformUtilsService.launchUri(webUrl + '/#/sso?clientId=' + clientId +
-            '&redirectUri=' + encodeURIComponent(ssoRedirectUri) +
-            '&state=' + state + '&codeChallenge=' + codeChallenge);
-    }
-
-    protected focusInput() {
-        document.getElementById(this.email == null || this.email === '' ? 'email' : 'masterPassword').focus();
+  }
+
+  togglePassword() {
+    this.showPassword = !this.showPassword;
+    if (this.ngZone.isStable) {
+      document.getElementById("masterPassword").focus();
+    } else {
+      this.ngZone.onStable
+        .pipe(take(1))
+        .subscribe(() => document.getElementById("masterPassword").focus());
     }
+  }
+
+  async launchSsoBrowser(clientId: string, ssoRedirectUri: string) {
+    // Generate necessary sso params
+    const passwordOptions: any = {
+      type: "password",
+      length: 64,
+      uppercase: true,
+      lowercase: true,
+      numbers: true,
+      special: false,
+    };
+    const state = await this.passwordGenerationService.generatePassword(passwordOptions);
+    const ssoCodeVerifier = await this.passwordGenerationService.generatePassword(passwordOptions);
+    const codeVerifierHash = await this.cryptoFunctionService.hash(ssoCodeVerifier, "sha256");
+    const codeChallenge = Utils.fromBufferToUrlB64(codeVerifierHash);
+
+    // Save sso params
+    await this.stateService.setSsoState(state);
+    await this.stateService.setSsoCodeVerifier(ssoCodeVerifier);
+
+    // Build URI
+    const webUrl = this.environmentService.getWebVaultUrl();
+
+    // Launch browser
+    this.platformUtilsService.launchUri(
+      webUrl +
+        "/#/sso?clientId=" +
+        clientId +
+        "&redirectUri=" +
+        encodeURIComponent(ssoRedirectUri) +
+        "&state=" +
+        state +
+        "&codeChallenge=" +
+        codeChallenge
+    );
+  }
+
+  protected focusInput() {
+    document
+      .getElementById(this.email == null || this.email === "" ? "email" : "masterPassword")
+      .focus();
+  }
 }
diff --git a/jslib/angular/src/components/modal/dynamic-modal.component.ts b/jslib/angular/src/components/modal/dynamic-modal.component.ts
index 5194a44f..4d529f34 100644
--- a/jslib/angular/src/components/modal/dynamic-modal.component.ts
+++ b/jslib/angular/src/components/modal/dynamic-modal.component.ts
@@ -1,76 +1,80 @@
 import {
-    AfterViewInit,
-    ChangeDetectorRef,
-    Component,
-    ComponentRef,
-    ElementRef,
-    OnDestroy,
-    Type,
-    ViewChild,
-    ViewContainerRef
-} from '@angular/core';
+  AfterViewInit,
+  ChangeDetectorRef,
+  Component,
+  ComponentRef,
+  ElementRef,
+  OnDestroy,
+  Type,
+  ViewChild,
+  ViewContainerRef,
+} from "@angular/core";
 
-import {
-    ConfigurableFocusTrap,
-    ConfigurableFocusTrapFactory,
-} from '@angular/cdk/a11y';
+import { ConfigurableFocusTrap, ConfigurableFocusTrapFactory } from "@angular/cdk/a11y";
 
-import { ModalService } from '../../services/modal.service';
+import { ModalService } from "../../services/modal.service";
 
-import { ModalRef } from './modal.ref';
+import { ModalRef } from "./modal.ref";
 
 @Component({
-    selector: 'app-modal',
-    template: '<ng-template #modalContent></ng-template>',
+  selector: "app-modal",
+  template: "<ng-template #modalContent></ng-template>",
 })
 export class DynamicModalComponent implements AfterViewInit, OnDestroy {
-    componentRef: ComponentRef<any>;
+  componentRef: ComponentRef<any>;
 
-    @ViewChild('modalContent', { read: ViewContainerRef, static: true }) modalContentRef: ViewContainerRef;
+  @ViewChild("modalContent", { read: ViewContainerRef, static: true })
+  modalContentRef: ViewContainerRef;
 
-    childComponentType: Type<any>;
-    setComponentParameters: (component: any) => void;
+  childComponentType: Type<any>;
+  setComponentParameters: (component: any) => void;
 
-    private focusTrap: ConfigurableFocusTrap;
+  private focusTrap: ConfigurableFocusTrap;
 
-    constructor(private modalService: ModalService, private cd: ChangeDetectorRef,
-        private el: ElementRef<HTMLElement>, private focusTrapFactory: ConfigurableFocusTrapFactory,
-        public modalRef: ModalRef) { }
+  constructor(
+    private modalService: ModalService,
+    private cd: ChangeDetectorRef,
+    private el: ElementRef<HTMLElement>,
+    private focusTrapFactory: ConfigurableFocusTrapFactory,
+    public modalRef: ModalRef
+  ) {}
 
-    ngAfterViewInit() {
-        this.loadChildComponent(this.childComponentType);
-        if (this.setComponentParameters != null) {
-            this.setComponentParameters(this.componentRef.instance);
-        }
-        this.cd.detectChanges();
+  ngAfterViewInit() {
+    this.loadChildComponent(this.childComponentType);
+    if (this.setComponentParameters != null) {
+      this.setComponentParameters(this.componentRef.instance);
+    }
+    this.cd.detectChanges();
 
-        this.modalRef.created(this.el.nativeElement);
-        this.focusTrap = this.focusTrapFactory.create(this.el.nativeElement.querySelector('.modal-dialog'));
-        if (this.el.nativeElement.querySelector('[appAutoFocus]') == null) {
-            this.focusTrap.focusFirstTabbableElementWhenReady();
-        }
+    this.modalRef.created(this.el.nativeElement);
+    this.focusTrap = this.focusTrapFactory.create(
+      this.el.nativeElement.querySelector(".modal-dialog")
+    );
+    if (this.el.nativeElement.querySelector("[appAutoFocus]") == null) {
+      this.focusTrap.focusFirstTabbableElementWhenReady();
     }
+  }
 
-    loadChildComponent(componentType: Type<any>) {
-        const componentFactory = this.modalService.resolveComponentFactory(componentType);
+  loadChildComponent(componentType: Type<any>) {
+    const componentFactory = this.modalService.resolveComponentFactory(componentType);
 
-        this.modalContentRef.clear();
-        this.componentRef = this.modalContentRef.createComponent(componentFactory);
-    }
+    this.modalContentRef.clear();
+    this.componentRef = this.modalContentRef.createComponent(componentFactory);
+  }
 
-    ngOnDestroy() {
-        if (this.componentRef) {
-            this.componentRef.destroy();
-        }
-        this.focusTrap.destroy();
+  ngOnDestroy() {
+    if (this.componentRef) {
+      this.componentRef.destroy();
     }
+    this.focusTrap.destroy();
+  }
 
-    close() {
-        this.modalRef.close();
-    }
+  close() {
+    this.modalRef.close();
+  }
 
-    getFocus() {
-        const autoFocusEl = this.el.nativeElement.querySelector('[appAutoFocus]') as HTMLElement;
-        autoFocusEl?.focus();
-    }
+  getFocus() {
+    const autoFocusEl = this.el.nativeElement.querySelector("[appAutoFocus]") as HTMLElement;
+    autoFocusEl?.focus();
+  }
 }
diff --git a/jslib/angular/src/components/modal/modal-injector.ts b/jslib/angular/src/components/modal/modal-injector.ts
index 8477608e..188e5584 100644
--- a/jslib/angular/src/components/modal/modal-injector.ts
+++ b/jslib/angular/src/components/modal/modal-injector.ts
@@ -1,15 +1,10 @@
-import {
-    InjectFlags,
-    InjectionToken,
-    Injector,
-    Type
-} from '@angular/core';
+import { InjectFlags, InjectionToken, Injector, Type } from "@angular/core";
 
 export class ModalInjector implements Injector {
-    constructor(private _parentInjector: Injector, private _additionalTokens: WeakMap<any, any>) {}
+  constructor(private _parentInjector: Injector, private _additionalTokens: WeakMap<any, any>) {}
 
-    get<T>(token: Type<T> | InjectionToken<T>, notFoundValue?: T, flags?: InjectFlags): T;
-    get(token: any, notFoundValue?: any, flags?: any) {
-        return this._additionalTokens.get(token) ?? this._parentInjector.get<any>(token, notFoundValue);
-    }
+  get<T>(token: Type<T> | InjectionToken<T>, notFoundValue?: T, flags?: InjectFlags): T;
+  get(token: any, notFoundValue?: any, flags?: any) {
+    return this._additionalTokens.get(token) ?? this._parentInjector.get<any>(token, notFoundValue);
+  }
 }
diff --git a/jslib/angular/src/components/modal/modal.ref.ts b/jslib/angular/src/components/modal/modal.ref.ts
index 116a6057..a80acebb 100644
--- a/jslib/angular/src/components/modal/modal.ref.ts
+++ b/jslib/angular/src/components/modal/modal.ref.ts
@@ -1,51 +1,50 @@
-import { Observable, Subject } from 'rxjs';
-import { first } from 'rxjs/operators';
+import { Observable, Subject } from "rxjs";
+import { first } from "rxjs/operators";
 
 export class ModalRef {
-
-    onCreated: Observable<HTMLElement>; // Modal added to the DOM.
-    onClose: Observable<any>;           // Initiated close.
-    onClosed: Observable<any>;          // Modal was closed (Remove element from DOM)
-    onShow: Observable<any>;            // Start showing modal
-    onShown: Observable<any>;           // Modal is fully visible
-
-    private readonly _onCreated = new Subject<HTMLElement>();
-    private readonly _onClose = new Subject<any>();
-    private readonly _onClosed = new Subject<any>();
-    private readonly _onShow = new Subject<any>();
-    private readonly _onShown = new Subject<any>();
-    private lastResult: any;
-
-    constructor() {
-        this.onCreated = this._onCreated.asObservable();
-        this.onClose = this._onClose.asObservable();
-        this.onClosed = this._onClosed.asObservable();
-        this.onShow = this._onShow.asObservable();
-        this.onShown = this._onShow.asObservable();
-    }
-
-    show() {
-        this._onShow.next();
-    }
-
-    shown() {
-        this._onShown.next();
-    }
-
-    close(result?: any) {
-        this.lastResult = result;
-        this._onClose.next(result);
-    }
-
-    closed() {
-        this._onClosed.next(this.lastResult);
-    }
-
-    created(el: HTMLElement) {
-        this._onCreated.next(el);
-    }
-
-    onClosedPromise(): Promise<any> {
-        return this.onClosed.pipe(first()).toPromise();
-    }
+  onCreated: Observable<HTMLElement>; // Modal added to the DOM.
+  onClose: Observable<any>; // Initiated close.
+  onClosed: Observable<any>; // Modal was closed (Remove element from DOM)
+  onShow: Observable<void>; // Start showing modal
+  onShown: Observable<void>; // Modal is fully visible
+
+  private readonly _onCreated = new Subject<HTMLElement>();
+  private readonly _onClose = new Subject<any>();
+  private readonly _onClosed = new Subject<any>();
+  private readonly _onShow = new Subject<void>();
+  private readonly _onShown = new Subject<void>();
+  private lastResult: any;
+
+  constructor() {
+    this.onCreated = this._onCreated.asObservable();
+    this.onClose = this._onClose.asObservable();
+    this.onClosed = this._onClosed.asObservable();
+    this.onShow = this._onShow.asObservable();
+    this.onShown = this._onShow.asObservable();
+  }
+
+  show() {
+    this._onShow.next();
+  }
+
+  shown() {
+    this._onShown.next();
+  }
+
+  close(result?: any) {
+    this.lastResult = result;
+    this._onClose.next(result);
+  }
+
+  closed() {
+    this._onClosed.next(this.lastResult);
+  }
+
+  created(el: HTMLElement) {
+    this._onCreated.next(el);
+  }
+
+  onClosedPromise(): Promise<any> {
+    return this.onClosed.pipe(first()).toPromise();
+  }
 }
diff --git a/jslib/angular/src/components/password-generator-history.component.ts b/jslib/angular/src/components/password-generator-history.component.ts
index 67adba56..00f73a9f 100644
--- a/jslib/angular/src/components/password-generator-history.component.ts
+++ b/jslib/angular/src/components/password-generator-history.component.ts
@@ -1,32 +1,38 @@
-import { Directive, OnInit } from '@angular/core';
+import { Directive, OnInit } from "@angular/core";
 
-import { I18nService } from 'jslib-common/abstractions/i18n.service';
-import { PasswordGenerationService } from 'jslib-common/abstractions/passwordGeneration.service';
-import { PlatformUtilsService } from 'jslib-common/abstractions/platformUtils.service';
+import { I18nService } from "jslib-common/abstractions/i18n.service";
+import { PasswordGenerationService } from "jslib-common/abstractions/passwordGeneration.service";
+import { PlatformUtilsService } from "jslib-common/abstractions/platformUtils.service";
 
-import { GeneratedPasswordHistory } from 'jslib-common/models/domain/generatedPasswordHistory';
+import { GeneratedPasswordHistory } from "jslib-common/models/domain/generatedPasswordHistory";
 
 @Directive()
 export class PasswordGeneratorHistoryComponent implements OnInit {
-    history: GeneratedPasswordHistory[] = [];
+  history: GeneratedPasswordHistory[] = [];
 
-    constructor(protected passwordGenerationService: PasswordGenerationService,
-        protected platformUtilsService: PlatformUtilsService, protected i18nService: I18nService,
-        private win: Window) { }
+  constructor(
+    protected passwordGenerationService: PasswordGenerationService,
+    protected platformUtilsService: PlatformUtilsService,
+    protected i18nService: I18nService,
+    private win: Window
+  ) {}
 
-    async ngOnInit() {
-        this.history = await this.passwordGenerationService.getHistory();
-    }
+  async ngOnInit() {
+    this.history = await this.passwordGenerationService.getHistory();
+  }
 
-    clear() {
-        this.history = [];
-        this.passwordGenerationService.clear();
-    }
+  clear() {
+    this.history = [];
+    this.passwordGenerationService.clear();
+  }
 
-    copy(password: string) {
-        const copyOptions = this.win != null ? { window: this.win } : null;
-        this.platformUtilsService.copyToClipboard(password, copyOptions);
-        this.platformUtilsService.showToast('info', null,
-            this.i18nService.t('valueCopied', this.i18nService.t('password')));
-    }
+  copy(password: string) {
+    const copyOptions = this.win != null ? { window: this.win } : null;
+    this.platformUtilsService.copyToClipboard(password, copyOptions);
+    this.platformUtilsService.showToast(
+      "info",
+      null,
+      this.i18nService.t("valueCopied", this.i18nService.t("password"))
+    );
+  }
 }
diff --git a/jslib/angular/src/components/password-generator.component.ts b/jslib/angular/src/components/password-generator.component.ts
index 6e5a389a..b46cda43 100644
--- a/jslib/angular/src/components/password-generator.component.ts
+++ b/jslib/angular/src/components/password-generator.component.ts
@@ -1,101 +1,106 @@
-import {
-    Directive,
-    EventEmitter,
-    Input,
-    OnInit,
-    Output,
-} from '@angular/core';
+import { Directive, EventEmitter, Input, OnInit, Output } from "@angular/core";
 
-import { I18nService } from 'jslib-common/abstractions/i18n.service';
-import { PasswordGenerationService } from 'jslib-common/abstractions/passwordGeneration.service';
-import { PlatformUtilsService } from 'jslib-common/abstractions/platformUtils.service';
+import { I18nService } from "jslib-common/abstractions/i18n.service";
+import { PasswordGenerationService } from "jslib-common/abstractions/passwordGeneration.service";
+import { PlatformUtilsService } from "jslib-common/abstractions/platformUtils.service";
 
-import { PasswordGeneratorPolicyOptions } from 'jslib-common/models/domain/passwordGeneratorPolicyOptions';
+import { PasswordGeneratorPolicyOptions } from "jslib-common/models/domain/passwordGeneratorPolicyOptions";
 
 @Directive()
 export class PasswordGeneratorComponent implements OnInit {
-    @Input() showSelect: boolean = false;
-    @Output() onSelected = new EventEmitter<string>();
-
-    passTypeOptions: any[];
-    options: any = {};
-    password: string = '-';
-    showOptions = false;
-    avoidAmbiguous = false;
-    enforcedPolicyOptions: PasswordGeneratorPolicyOptions;
-
-    constructor(protected passwordGenerationService: PasswordGenerationService,
-        protected platformUtilsService: PlatformUtilsService, protected i18nService: I18nService,
-        private win: Window) {
-            this.passTypeOptions = [
-                { name: i18nService.t('password'), value: 'password' },
-                { name: i18nService.t('passphrase'), value: 'passphrase' },
-            ];
-         }
-
-    async ngOnInit() {
-        const optionsResponse = await this.passwordGenerationService.getOptions();
-        this.options = optionsResponse[0];
-        this.enforcedPolicyOptions = optionsResponse[1];
-        this.avoidAmbiguous = !this.options.ambiguous;
-        this.options.type = this.options.type === 'passphrase' ? 'passphrase' : 'password';
-        this.password = await this.passwordGenerationService.generatePassword(this.options);
-        await this.passwordGenerationService.addHistory(this.password);
+  @Input() showSelect: boolean = false;
+  @Output() onSelected = new EventEmitter<string>();
+
+  passTypeOptions: any[];
+  options: any = {};
+  password: string = "-";
+  showOptions = false;
+  avoidAmbiguous = false;
+  enforcedPolicyOptions: PasswordGeneratorPolicyOptions;
+
+  constructor(
+    protected passwordGenerationService: PasswordGenerationService,
+    protected platformUtilsService: PlatformUtilsService,
+    protected i18nService: I18nService,
+    private win: Window
+  ) {
+    this.passTypeOptions = [
+      { name: i18nService.t("password"), value: "password" },
+      { name: i18nService.t("passphrase"), value: "passphrase" },
+    ];
+  }
+
+  async ngOnInit() {
+    const optionsResponse = await this.passwordGenerationService.getOptions();
+    this.options = optionsResponse[0];
+    this.enforcedPolicyOptions = optionsResponse[1];
+    this.avoidAmbiguous = !this.options.ambiguous;
+    this.options.type = this.options.type === "passphrase" ? "passphrase" : "password";
+    this.password = await this.passwordGenerationService.generatePassword(this.options);
+    await this.passwordGenerationService.addHistory(this.password);
+  }
+
+  async sliderChanged() {
+    this.saveOptions(false);
+    await this.passwordGenerationService.addHistory(this.password);
+  }
+
+  async sliderInput() {
+    this.normalizeOptions();
+    this.password = await this.passwordGenerationService.generatePassword(this.options);
+  }
+
+  async saveOptions(regenerate: boolean = true) {
+    this.normalizeOptions();
+    await this.passwordGenerationService.saveOptions(this.options);
+
+    if (regenerate) {
+      await this.regenerate();
     }
-
-    async sliderChanged() {
-        this.saveOptions(false);
-        await this.passwordGenerationService.addHistory(this.password);
-    }
-
-    async sliderInput() {
-        this.normalizeOptions();
-        this.password = await this.passwordGenerationService.generatePassword(this.options);
-    }
-
-    async saveOptions(regenerate: boolean = true) {
-        this.normalizeOptions();
-        await this.passwordGenerationService.saveOptions(this.options);
-
-        if (regenerate) {
-            await this.regenerate();
+  }
+
+  async regenerate() {
+    this.password = await this.passwordGenerationService.generatePassword(this.options);
+    await this.passwordGenerationService.addHistory(this.password);
+  }
+
+  copy() {
+    const copyOptions = this.win != null ? { window: this.win } : null;
+    this.platformUtilsService.copyToClipboard(this.password, copyOptions);
+    this.platformUtilsService.showToast(
+      "info",
+      null,
+      this.i18nService.t("valueCopied", this.i18nService.t("password"))
+    );
+  }
+
+  select() {
+    this.onSelected.emit(this.password);
+  }
+
+  toggleOptions() {
+    this.showOptions = !this.showOptions;
+  }
+
+  private normalizeOptions() {
+    // Application level normalize options depedent on class variables
+    this.options.ambiguous = !this.avoidAmbiguous;
+
+    if (
+      !this.options.uppercase &&
+      !this.options.lowercase &&
+      !this.options.number &&
+      !this.options.special
+    ) {
+      this.options.lowercase = true;
+      if (this.win != null) {
+        const lowercase = this.win.document.querySelector("#lowercase") as HTMLInputElement;
+        if (lowercase) {
+          lowercase.checked = true;
         }
+      }
     }
 
-    async regenerate() {
-        this.password = await this.passwordGenerationService.generatePassword(this.options);
-        await this.passwordGenerationService.addHistory(this.password);
-    }
-
-    copy() {
-        const copyOptions = this.win != null ? { window: this.win } : null;
-        this.platformUtilsService.copyToClipboard(this.password, copyOptions);
-        this.platformUtilsService.showToast('info', null,
-            this.i18nService.t('valueCopied', this.i18nService.t('password')));
-    }
-
-    select() {
-        this.onSelected.emit(this.password);
-    }
-
-    toggleOptions() {
-        this.showOptions = !this.showOptions;
-    }
-
-    private normalizeOptions() {
-        // Application level normalize options depedent on class variables
-        this.options.ambiguous = !this.avoidAmbiguous;
-
-        if (!this.options.uppercase && !this.options.lowercase && !this.options.number && !this.options.special) {
-            this.options.lowercase = true;
-            if (this.win != null) {
-                const lowercase = this.win.document.querySelector('#lowercase') as HTMLInputElement;
-                if (lowercase) {
-                    lowercase.checked = true;
-                }
-            }
-        }
-
-        this.passwordGenerationService.normalizeOptions(this.options, this.enforcedPolicyOptions);
-    }
+    this.passwordGenerationService.normalizeOptions(this.options, this.enforcedPolicyOptions);
+  }
 }
diff --git a/jslib/angular/src/components/password-history.component.ts b/jslib/angular/src/components/password-history.component.ts
index 3134c0a4..d5d83b1c 100644
--- a/jslib/angular/src/components/password-history.component.ts
+++ b/jslib/angular/src/components/password-history.component.ts
@@ -1,33 +1,40 @@
-import { Directive, OnInit } from '@angular/core';
+import { Directive, OnInit } from "@angular/core";
 
-import { CipherService } from 'jslib-common/abstractions/cipher.service';
-import { I18nService } from 'jslib-common/abstractions/i18n.service';
-import { PlatformUtilsService } from 'jslib-common/abstractions/platformUtils.service';
+import { CipherService } from "jslib-common/abstractions/cipher.service";
+import { I18nService } from "jslib-common/abstractions/i18n.service";
+import { PlatformUtilsService } from "jslib-common/abstractions/platformUtils.service";
 
-import { PasswordHistoryView } from 'jslib-common/models/view/passwordHistoryView';
+import { PasswordHistoryView } from "jslib-common/models/view/passwordHistoryView";
 
 @Directive()
 export class PasswordHistoryComponent implements OnInit {
-    cipherId: string;
-    history: PasswordHistoryView[] = [];
+  cipherId: string;
+  history: PasswordHistoryView[] = [];
 
-    constructor(protected cipherService: CipherService, protected platformUtilsService: PlatformUtilsService,
-        protected i18nService: I18nService, private win: Window) { }
+  constructor(
+    protected cipherService: CipherService,
+    protected platformUtilsService: PlatformUtilsService,
+    protected i18nService: I18nService,
+    private win: Window
+  ) {}
 
-    async ngOnInit() {
-        await this.init();
-    }
+  async ngOnInit() {
+    await this.init();
+  }
 
-    copy(password: string) {
-        const copyOptions = this.win != null ? { window: this.win } : null;
-        this.platformUtilsService.copyToClipboard(password, copyOptions);
-        this.platformUtilsService.showToast('info', null,
-            this.i18nService.t('valueCopied', this.i18nService.t('password')));
-    }
+  copy(password: string) {
+    const copyOptions = this.win != null ? { window: this.win } : null;
+    this.platformUtilsService.copyToClipboard(password, copyOptions);
+    this.platformUtilsService.showToast(
+      "info",
+      null,
+      this.i18nService.t("valueCopied", this.i18nService.t("password"))
+    );
+  }
 
-    protected async init() {
-        const cipher = await this.cipherService.get(this.cipherId);
-        const decCipher = await cipher.decrypt();
-        this.history = decCipher.passwordHistory == null ? [] : decCipher.passwordHistory;
-    }
+  protected async init() {
+    const cipher = await this.cipherService.get(this.cipherId);
+    const decCipher = await cipher.decrypt();
+    this.history = decCipher.passwordHistory == null ? [] : decCipher.passwordHistory;
+  }
 }
diff --git a/jslib/angular/src/components/password-reprompt.component.ts b/jslib/angular/src/components/password-reprompt.component.ts
index 68845394..f547aace 100644
--- a/jslib/angular/src/components/password-reprompt.component.ts
+++ b/jslib/angular/src/components/password-reprompt.component.ts
@@ -1,30 +1,36 @@
-import { Directive } from '@angular/core';
+import { Directive } from "@angular/core";
 
-import { CryptoService } from 'jslib-common/abstractions/crypto.service';
-import { I18nService } from 'jslib-common/abstractions/i18n.service';
-import { PlatformUtilsService } from 'jslib-common/abstractions/platformUtils.service';
-import { ModalRef } from './modal/modal.ref';
+import { CryptoService } from "jslib-common/abstractions/crypto.service";
+import { I18nService } from "jslib-common/abstractions/i18n.service";
+import { PlatformUtilsService } from "jslib-common/abstractions/platformUtils.service";
+import { ModalRef } from "./modal/modal.ref";
 
 @Directive()
 export class PasswordRepromptComponent {
+  showPassword = false;
+  masterPassword = "";
 
-    showPassword = false;
-    masterPassword = '';
+  constructor(
+    private modalRef: ModalRef,
+    private cryptoService: CryptoService,
+    private platformUtilsService: PlatformUtilsService,
+    private i18nService: I18nService
+  ) {}
 
-    constructor(private modalRef: ModalRef, private cryptoService: CryptoService, private platformUtilsService: PlatformUtilsService,
-        private i18nService: I18nService) {}
+  togglePassword() {
+    this.showPassword = !this.showPassword;
+  }
 
-    togglePassword() {
-        this.showPassword = !this.showPassword;
+  async submit() {
+    if (!(await this.cryptoService.compareAndUpdateKeyHash(this.masterPassword, null))) {
+      this.platformUtilsService.showToast(
+        "error",
+        this.i18nService.t("errorOccurred"),
+        this.i18nService.t("invalidMasterPassword")
+      );
+      return;
     }
 
-    async submit() {
-        if (!await this.cryptoService.compareAndUpdateKeyHash(this.masterPassword, null)) {
-            this.platformUtilsService.showToast('error', this.i18nService.t('errorOccurred'),
-                this.i18nService.t('invalidMasterPassword'));
-            return;
-        }
-
-        this.modalRef.close(true);
-    }
+    this.modalRef.close(true);
+  }
 }
diff --git a/jslib/angular/src/components/premium.component.ts b/jslib/angular/src/components/premium.component.ts
index 5b5b4c89..62e5d8f1 100644
--- a/jslib/angular/src/components/premium.component.ts
+++ b/jslib/angular/src/components/premium.component.ts
@@ -1,48 +1,61 @@
-import { Directive, OnInit } from '@angular/core';
+import { Directive, OnInit } from "@angular/core";
 
-import { ApiService } from 'jslib-common/abstractions/api.service';
-import { I18nService } from 'jslib-common/abstractions/i18n.service';
-import { LogService } from 'jslib-common/abstractions/log.service';
-import { PlatformUtilsService } from 'jslib-common/abstractions/platformUtils.service';
-import { UserService } from 'jslib-common/abstractions/user.service';
+import { ApiService } from "jslib-common/abstractions/api.service";
+import { I18nService } from "jslib-common/abstractions/i18n.service";
+import { LogService } from "jslib-common/abstractions/log.service";
+import { PlatformUtilsService } from "jslib-common/abstractions/platformUtils.service";
+import { StateService } from "jslib-common/abstractions/state.service";
 
 @Directive()
 export class PremiumComponent implements OnInit {
-    isPremium: boolean = false;
-    price: number = 10;
-    refreshPromise: Promise<any>;
+  isPremium: boolean = false;
+  price: number = 10;
+  refreshPromise: Promise<any>;
 
-    constructor(protected i18nService: I18nService, protected platformUtilsService: PlatformUtilsService,
-        protected apiService: ApiService, protected userService: UserService, private logService: LogService) { }
+  constructor(
+    protected i18nService: I18nService,
+    protected platformUtilsService: PlatformUtilsService,
+    protected apiService: ApiService,
+    private logService: LogService,
+    protected stateService: StateService
+  ) {}
 
-    async ngOnInit() {
-        this.isPremium = await this.userService.canAccessPremium();
-    }
+  async ngOnInit() {
+    this.isPremium = await this.stateService.getCanAccessPremium();
+  }
 
-    async refresh() {
-        try {
-            this.refreshPromise = this.apiService.refreshIdentityToken();
-            await this.refreshPromise;
-            this.platformUtilsService.showToast('success', null, this.i18nService.t('refreshComplete'));
-            this.isPremium = await this.userService.canAccessPremium();
-        } catch (e) {
-            this.logService.error(e);
-        }
+  async refresh() {
+    try {
+      this.refreshPromise = this.apiService.refreshIdentityToken();
+      await this.refreshPromise;
+      this.platformUtilsService.showToast("success", null, this.i18nService.t("refreshComplete"));
+      this.isPremium = await this.stateService.getCanAccessPremium();
+    } catch (e) {
+      this.logService.error(e);
     }
+  }
 
-    async purchase() {
-        const confirmed = await this.platformUtilsService.showDialog(this.i18nService.t('premiumPurchaseAlert'),
-            this.i18nService.t('premiumPurchase'), this.i18nService.t('yes'), this.i18nService.t('cancel'));
-        if (confirmed) {
-            this.platformUtilsService.launchUri('https://vault.bitwarden.com/#/?premium=purchase');
-        }
+  async purchase() {
+    const confirmed = await this.platformUtilsService.showDialog(
+      this.i18nService.t("premiumPurchaseAlert"),
+      this.i18nService.t("premiumPurchase"),
+      this.i18nService.t("yes"),
+      this.i18nService.t("cancel")
+    );
+    if (confirmed) {
+      this.platformUtilsService.launchUri("https://vault.bitwarden.com/#/?premium=purchase");
     }
+  }
 
-    async manage() {
-        const confirmed = await this.platformUtilsService.showDialog(this.i18nService.t('premiumManageAlert'),
-            this.i18nService.t('premiumManage'), this.i18nService.t('yes'), this.i18nService.t('cancel'));
-        if (confirmed) {
-            this.platformUtilsService.launchUri('https://vault.bitwarden.com/#/?premium=manage');
-        }
+  async manage() {
+    const confirmed = await this.platformUtilsService.showDialog(
+      this.i18nService.t("premiumManageAlert"),
+      this.i18nService.t("premiumManage"),
+      this.i18nService.t("yes"),
+      this.i18nService.t("cancel")
+    );
+    if (confirmed) {
+      this.platformUtilsService.launchUri("https://vault.bitwarden.com/#/?premium=manage");
     }
+  }
 }
diff --git a/jslib/angular/src/components/register.component.ts b/jslib/angular/src/components/register.component.ts
index fd91af29..16ccb6ea 100644
--- a/jslib/angular/src/components/register.component.ts
+++ b/jslib/angular/src/components/register.component.ts
@@ -1,195 +1,251 @@
-import { Directive, OnInit } from '@angular/core';
-import { Router } from '@angular/router';
+import { Directive, OnInit } from "@angular/core";
+import { Router } from "@angular/router";
 
-import { KeysRequest } from 'jslib-common/models/request/keysRequest';
-import { ReferenceEventRequest } from 'jslib-common/models/request/referenceEventRequest';
-import { RegisterRequest } from 'jslib-common/models/request/registerRequest';
+import { KeysRequest } from "jslib-common/models/request/keysRequest";
+import { ReferenceEventRequest } from "jslib-common/models/request/referenceEventRequest";
+import { RegisterRequest } from "jslib-common/models/request/registerRequest";
 
-import { ApiService } from 'jslib-common/abstractions/api.service';
-import { AuthService } from 'jslib-common/abstractions/auth.service';
-import { CryptoService } from 'jslib-common/abstractions/crypto.service';
-import { EnvironmentService } from 'jslib-common/abstractions/environment.service';
-import { I18nService } from 'jslib-common/abstractions/i18n.service';
-import { LogService } from 'jslib-common/abstractions/log.service';
-import { PasswordGenerationService } from 'jslib-common/abstractions/passwordGeneration.service';
-import { PlatformUtilsService } from 'jslib-common/abstractions/platformUtils.service';
-import { StateService } from 'jslib-common/abstractions/state.service';
+import { ApiService } from "jslib-common/abstractions/api.service";
+import { AuthService } from "jslib-common/abstractions/auth.service";
+import { CryptoService } from "jslib-common/abstractions/crypto.service";
+import { EnvironmentService } from "jslib-common/abstractions/environment.service";
+import { I18nService } from "jslib-common/abstractions/i18n.service";
+import { LogService } from "jslib-common/abstractions/log.service";
+import { PasswordGenerationService } from "jslib-common/abstractions/passwordGeneration.service";
+import { PlatformUtilsService } from "jslib-common/abstractions/platformUtils.service";
+import { StateService } from "jslib-common/abstractions/state.service";
 
-import { KdfType } from 'jslib-common/enums/kdfType';
+import { KdfType } from "jslib-common/enums/kdfType";
 
-import { CaptchaProtectedComponent } from './captchaProtected.component';
+import { CaptchaProtectedComponent } from "./captchaProtected.component";
 
 @Directive()
 export class RegisterComponent extends CaptchaProtectedComponent implements OnInit {
-    name: string = '';
-    email: string = '';
-    masterPassword: string = '';
-    confirmMasterPassword: string = '';
-    hint: string = '';
-    showPassword: boolean = false;
-    formPromise: Promise<any>;
-    masterPasswordScore: number;
-    referenceData: ReferenceEventRequest;
-    showTerms = true;
-    acceptPolicies: boolean = false;
-
-    protected successRoute = 'login';
-    private masterPasswordStrengthTimeout: any;
-
-    constructor(protected authService: AuthService, protected router: Router,
-        i18nService: I18nService, protected cryptoService: CryptoService,
-        protected apiService: ApiService, protected stateService: StateService,
-        platformUtilsService: PlatformUtilsService,
-        protected passwordGenerationService: PasswordGenerationService, environmentService: EnvironmentService,
-        protected logService: LogService) {
-        super(environmentService, i18nService, platformUtilsService);
-        this.showTerms = !platformUtilsService.isSelfHost();
+  name: string = "";
+  email: string = "";
+  masterPassword: string = "";
+  confirmMasterPassword: string = "";
+  hint: string = "";
+  showPassword: boolean = false;
+  formPromise: Promise<any>;
+  masterPasswordScore: number;
+  referenceData: ReferenceEventRequest;
+  showTerms = true;
+  acceptPolicies: boolean = false;
+
+  protected successRoute = "login";
+  private masterPasswordStrengthTimeout: any;
+
+  constructor(
+    protected authService: AuthService,
+    protected router: Router,
+    i18nService: I18nService,
+    protected cryptoService: CryptoService,
+    protected apiService: ApiService,
+    protected stateService: StateService,
+    platformUtilsService: PlatformUtilsService,
+    protected passwordGenerationService: PasswordGenerationService,
+    environmentService: EnvironmentService,
+    protected logService: LogService
+  ) {
+    super(environmentService, i18nService, platformUtilsService);
+    this.showTerms = !platformUtilsService.isSelfHost();
+  }
+
+  async ngOnInit() {
+    this.setupCaptcha();
+  }
+
+  get masterPasswordScoreWidth() {
+    return this.masterPasswordScore == null ? 0 : (this.masterPasswordScore + 1) * 20;
+  }
+
+  get masterPasswordScoreColor() {
+    switch (this.masterPasswordScore) {
+      case 4:
+        return "success";
+      case 3:
+        return "primary";
+      case 2:
+        return "warning";
+      default:
+        return "danger";
     }
-
-    async ngOnInit() {
-        this.setupCaptcha();
+  }
+
+  get masterPasswordScoreText() {
+    switch (this.masterPasswordScore) {
+      case 4:
+        return this.i18nService.t("strong");
+      case 3:
+        return this.i18nService.t("good");
+      case 2:
+        return this.i18nService.t("weak");
+      default:
+        return this.masterPasswordScore != null ? this.i18nService.t("weak") : null;
     }
-
-    get masterPasswordScoreWidth() {
-        return this.masterPasswordScore == null ? 0 : (this.masterPasswordScore + 1) * 20;
+  }
+
+  async submit() {
+    if (!this.acceptPolicies && this.showTerms) {
+      this.platformUtilsService.showToast(
+        "error",
+        this.i18nService.t("errorOccurred"),
+        this.i18nService.t("acceptPoliciesError")
+      );
+      return;
     }
 
-    get masterPasswordScoreColor() {
-        switch (this.masterPasswordScore) {
-            case 4:
-                return 'success';
-            case 3:
-                return 'primary';
-            case 2:
-                return 'warning';
-            default:
-                return 'danger';
-        }
+    if (this.email == null || this.email === "") {
+      this.platformUtilsService.showToast(
+        "error",
+        this.i18nService.t("errorOccurred"),
+        this.i18nService.t("emailRequired")
+      );
+      return;
     }
-
-    get masterPasswordScoreText() {
-        switch (this.masterPasswordScore) {
-            case 4:
-                return this.i18nService.t('strong');
-            case 3:
-                return this.i18nService.t('good');
-            case 2:
-                return this.i18nService.t('weak');
-            default:
-                return this.masterPasswordScore != null ? this.i18nService.t('weak') : null;
-        }
+    if (this.email.indexOf("@") === -1) {
+      this.platformUtilsService.showToast(
+        "error",
+        this.i18nService.t("errorOccurred"),
+        this.i18nService.t("invalidEmail")
+      );
+      return;
+    }
+    if (this.masterPassword == null || this.masterPassword === "") {
+      this.platformUtilsService.showToast(
+        "error",
+        this.i18nService.t("errorOccurred"),
+        this.i18nService.t("masterPassRequired")
+      );
+      return;
+    }
+    if (this.masterPassword.length < 8) {
+      this.platformUtilsService.showToast(
+        "error",
+        this.i18nService.t("errorOccurred"),
+        this.i18nService.t("masterPassLength")
+      );
+      return;
+    }
+    if (this.masterPassword !== this.confirmMasterPassword) {
+      this.platformUtilsService.showToast(
+        "error",
+        this.i18nService.t("errorOccurred"),
+        this.i18nService.t("masterPassDoesntMatch")
+      );
+      return;
     }
 
-    async submit() {
-        if (!this.acceptPolicies && this.showTerms) {
-            this.platformUtilsService.showToast('error', this.i18nService.t('errorOccurred'),
-                this.i18nService.t('acceptPoliciesError'));
-            return;
-        }
-
-        if (this.email == null || this.email === '') {
-            this.platformUtilsService.showToast('error', this.i18nService.t('errorOccurred'),
-                this.i18nService.t('emailRequired'));
-            return;
-        }
-        if (this.email.indexOf('@') === -1) {
-            this.platformUtilsService.showToast('error', this.i18nService.t('errorOccurred'),
-                this.i18nService.t('invalidEmail'));
-            return;
-        }
-        if (this.masterPassword == null || this.masterPassword === '') {
-            this.platformUtilsService.showToast('error', this.i18nService.t('errorOccurred'),
-                this.i18nService.t('masterPassRequired'));
-            return;
-        }
-        if (this.masterPassword.length < 8) {
-            this.platformUtilsService.showToast('error', this.i18nService.t('errorOccurred'),
-                this.i18nService.t('masterPassLength'));
-            return;
-        }
-        if (this.masterPassword !== this.confirmMasterPassword) {
-            this.platformUtilsService.showToast('error', this.i18nService.t('errorOccurred'),
-                this.i18nService.t('masterPassDoesntMatch'));
-            return;
-        }
-
-        const strengthResult = this.passwordGenerationService.passwordStrength(this.masterPassword,
-            this.getPasswordStrengthUserInput());
-        if (strengthResult != null && strengthResult.score < 3) {
-            const result = await this.platformUtilsService.showDialog(this.i18nService.t('weakMasterPasswordDesc'),
-                this.i18nService.t('weakMasterPassword'), this.i18nService.t('yes'), this.i18nService.t('no'),
-                'warning');
-            if (!result) {
-                return;
-            }
-        }
-
-        if (this.hint === this.masterPassword) {
-            this.platformUtilsService.showToast('error', this.i18nService.t('errorOccurred'), this.i18nService.t('hintEqualsPassword'));
-            return;
-        }
-
-        this.name = this.name === '' ? null : this.name;
-        this.email = this.email.trim().toLowerCase();
-        const kdf = KdfType.PBKDF2_SHA256;
-        const useLowerKdf = this.platformUtilsService.isIE();
-        const kdfIterations = useLowerKdf ? 10000 : 100000;
-        const key = await this.cryptoService.makeKey(this.masterPassword, this.email, kdf, kdfIterations);
-        const encKey = await this.cryptoService.makeEncKey(key);
-        const hashedPassword = await this.cryptoService.hashPassword(this.masterPassword, key);
-        const keys = await this.cryptoService.makeKeyPair(encKey[0]);
-        const request = new RegisterRequest(this.email, this.name, hashedPassword,
-            this.hint, encKey[1].encryptedString, kdf, kdfIterations, this.referenceData, this.captchaToken);
-        request.keys = new KeysRequest(keys[0], keys[1].encryptedString);
-        const orgInvite = await this.stateService.get<any>('orgInvitation');
-        if (orgInvite != null && orgInvite.token != null && orgInvite.organizationUserId != null) {
-            request.token = orgInvite.token;
-            request.organizationUserId = orgInvite.organizationUserId;
-        }
+    const strengthResult = this.passwordGenerationService.passwordStrength(
+      this.masterPassword,
+      this.getPasswordStrengthUserInput()
+    );
+    if (strengthResult != null && strengthResult.score < 3) {
+      const result = await this.platformUtilsService.showDialog(
+        this.i18nService.t("weakMasterPasswordDesc"),
+        this.i18nService.t("weakMasterPassword"),
+        this.i18nService.t("yes"),
+        this.i18nService.t("no"),
+        "warning"
+      );
+      if (!result) {
+        return;
+      }
+    }
 
-        try {
-            this.formPromise = this.apiService.postRegister(request);
-            try {
-                await this.formPromise;
-            } catch (e) {
-                if (this.handleCaptchaRequired(e)) {
-                    return;
-                } else {
-                    throw e;
-                }
-            }
-            this.platformUtilsService.showToast('success', null, this.i18nService.t('newAccountCreated'));
-            this.router.navigate([this.successRoute], { queryParams: { email: this.email } });
-        } catch (e) {
-            this.logService.error(e);
-        }
+    if (this.hint === this.masterPassword) {
+      this.platformUtilsService.showToast(
+        "error",
+        this.i18nService.t("errorOccurred"),
+        this.i18nService.t("hintEqualsPassword")
+      );
+      return;
     }
 
-    togglePassword(confirmField: boolean) {
-        this.showPassword = !this.showPassword;
-        document.getElementById(confirmField ? 'masterPasswordRetype' : 'masterPassword').focus();
+    this.name = this.name === "" ? null : this.name;
+    this.email = this.email.trim().toLowerCase();
+    const kdf = KdfType.PBKDF2_SHA256;
+    const useLowerKdf = this.platformUtilsService.isIE();
+    const kdfIterations = useLowerKdf ? 10000 : 100000;
+    const key = await this.cryptoService.makeKey(
+      this.masterPassword,
+      this.email,
+      kdf,
+      kdfIterations
+    );
+    const encKey = await this.cryptoService.makeEncKey(key);
+    const hashedPassword = await this.cryptoService.hashPassword(this.masterPassword, key);
+    const keys = await this.cryptoService.makeKeyPair(encKey[0]);
+    const request = new RegisterRequest(
+      this.email,
+      this.name,
+      hashedPassword,
+      this.hint,
+      encKey[1].encryptedString,
+      kdf,
+      kdfIterations,
+      this.referenceData,
+      this.captchaToken
+    );
+    request.keys = new KeysRequest(keys[0], keys[1].encryptedString);
+    const orgInvite = await this.stateService.getOrganizationInvitation();
+    if (orgInvite != null && orgInvite.token != null && orgInvite.organizationUserId != null) {
+      request.token = orgInvite.token;
+      request.organizationUserId = orgInvite.organizationUserId;
     }
 
-    updatePasswordStrength() {
-        if (this.masterPasswordStrengthTimeout != null) {
-            clearTimeout(this.masterPasswordStrengthTimeout);
+    try {
+      this.formPromise = this.apiService.postRegister(request);
+      try {
+        await this.formPromise;
+      } catch (e) {
+        if (this.handleCaptchaRequired(e)) {
+          return;
+        } else {
+          throw e;
         }
-        this.masterPasswordStrengthTimeout = setTimeout(() => {
-            const strengthResult = this.passwordGenerationService.passwordStrength(this.masterPassword,
-                this.getPasswordStrengthUserInput());
-            this.masterPasswordScore = strengthResult == null ? null : strengthResult.score;
-        }, 300);
+      }
+      this.platformUtilsService.showToast("success", null, this.i18nService.t("newAccountCreated"));
+      this.router.navigate([this.successRoute], { queryParams: { email: this.email } });
+    } catch (e) {
+      this.logService.error(e);
     }
+  }
 
-    private getPasswordStrengthUserInput() {
-        let userInput: string[] = [];
-        const atPosition = this.email.indexOf('@');
-        if (atPosition > -1) {
-            userInput = userInput.concat(this.email.substr(0, atPosition).trim().toLowerCase().split(/[^A-Za-z0-9]/));
-        }
-        if (this.name != null && this.name !== '') {
-            userInput = userInput.concat(this.name.trim().toLowerCase().split(' '));
-        }
-        return userInput;
+  togglePassword(confirmField: boolean) {
+    this.showPassword = !this.showPassword;
+    document.getElementById(confirmField ? "masterPasswordRetype" : "masterPassword").focus();
+  }
+
+  updatePasswordStrength() {
+    if (this.masterPasswordStrengthTimeout != null) {
+      clearTimeout(this.masterPasswordStrengthTimeout);
+    }
+    this.masterPasswordStrengthTimeout = setTimeout(() => {
+      const strengthResult = this.passwordGenerationService.passwordStrength(
+        this.masterPassword,
+        this.getPasswordStrengthUserInput()
+      );
+      this.masterPasswordScore = strengthResult == null ? null : strengthResult.score;
+    }, 300);
+  }
+
+  private getPasswordStrengthUserInput() {
+    let userInput: string[] = [];
+    const atPosition = this.email.indexOf("@");
+    if (atPosition > -1) {
+      userInput = userInput.concat(
+        this.email
+          .substr(0, atPosition)
+          .trim()
+          .toLowerCase()
+          .split(/[^A-Za-z0-9]/)
+      );
+    }
+    if (this.name != null && this.name !== "") {
+      userInput = userInput.concat(this.name.trim().toLowerCase().split(" "));
     }
+    return userInput;
+  }
 }
diff --git a/jslib/angular/src/components/remove-password.component.ts b/jslib/angular/src/components/remove-password.component.ts
index 91c35312..0359ad35 100644
--- a/jslib/angular/src/components/remove-password.component.ts
+++ b/jslib/angular/src/components/remove-password.component.ts
@@ -1,77 +1,83 @@
-import {
-    Directive,
-    OnInit,
-} from '@angular/core';
-import { Router } from '@angular/router';
+import { Directive, OnInit } from "@angular/core";
+import { Router } from "@angular/router";
 
-import { ApiService } from 'jslib-common/abstractions/api.service';
-import { I18nService } from 'jslib-common/abstractions/i18n.service';
-import { KeyConnectorService } from 'jslib-common/abstractions/keyConnector.service';
-import { PlatformUtilsService } from 'jslib-common/abstractions/platformUtils.service';
-import { StorageService } from 'jslib-common/abstractions/storage.service';
-import { SyncService } from 'jslib-common/abstractions/sync.service';
-import { UserService } from 'jslib-common/abstractions/user.service';
+import { ApiService } from "jslib-common/abstractions/api.service";
+import { I18nService } from "jslib-common/abstractions/i18n.service";
+import { KeyConnectorService } from "jslib-common/abstractions/keyConnector.service";
+import { PlatformUtilsService } from "jslib-common/abstractions/platformUtils.service";
+import { StateService } from "jslib-common/abstractions/state.service";
+import { SyncService } from "jslib-common/abstractions/sync.service";
 
-import { ConstantsService } from 'jslib-common/services/constants.service';
-
-import { Organization } from 'jslib-common/models/domain/organization';
+import { Organization } from "jslib-common/models/domain/organization";
 
 @Directive()
 export class RemovePasswordComponent implements OnInit {
+  actionPromise: Promise<any>;
+  continuing: boolean = false;
+  leaving: boolean = false;
 
-    actionPromise: Promise<any>;
-    continuing: boolean = false;
-    leaving: boolean = false;
-
-    loading: boolean = true;
-    organization: Organization;
-    email: string;
+  loading: boolean = true;
+  organization: Organization;
+  email: string;
 
-    constructor(private router: Router, private userService: UserService,
-        private apiService: ApiService, private syncService: SyncService,
-        private platformUtilsService: PlatformUtilsService, private i18nService: I18nService,
-        private keyConnectorService: KeyConnectorService, private storageService: StorageService) { }
+  constructor(
+    private router: Router,
+    private stateService: StateService,
+    private apiService: ApiService,
+    private syncService: SyncService,
+    private platformUtilsService: PlatformUtilsService,
+    private i18nService: I18nService,
+    private keyConnectorService: KeyConnectorService
+  ) {}
 
-    async ngOnInit() {
-        this.organization = await this.keyConnectorService.getManagingOrganization();
-        this.email = await this.userService.getEmail();
-        await this.syncService.fullSync(false);
-        this.loading = false;
-    }
+  async ngOnInit() {
+    this.organization = await this.keyConnectorService.getManagingOrganization();
+    this.email = await this.stateService.getEmail();
+    await this.syncService.fullSync(false);
+    this.loading = false;
+  }
 
-    async convert() {
-        this.continuing = true;
-        this.actionPromise = this.keyConnectorService.migrateUser();
+  async convert() {
+    this.continuing = true;
+    this.actionPromise = this.keyConnectorService.migrateUser();
 
-        try {
-            await this.actionPromise;
-            this.platformUtilsService.showToast('success', null, this.i18nService.t('removedMasterPassword'));
-            await this.keyConnectorService.removeConvertAccountRequired();
-            this.router.navigate(['']);
-        } catch (e) {
-            this.platformUtilsService.showToast('error', this.i18nService.t('errorOccurred'), e.message);
-        }
+    try {
+      await this.actionPromise;
+      this.platformUtilsService.showToast(
+        "success",
+        null,
+        this.i18nService.t("removedMasterPassword")
+      );
+      await this.keyConnectorService.removeConvertAccountRequired();
+      this.router.navigate([""]);
+    } catch (e) {
+      this.platformUtilsService.showToast("error", this.i18nService.t("errorOccurred"), e.message);
     }
+  }
 
-    async leave() {
-        const confirmed = await this.platformUtilsService.showDialog(
-            this.i18nService.t('leaveOrganizationConfirmation'), this.organization.name,
-            this.i18nService.t('yes'), this.i18nService.t('no'), 'warning');
-        if (!confirmed) {
-            return false;
-        }
+  async leave() {
+    const confirmed = await this.platformUtilsService.showDialog(
+      this.i18nService.t("leaveOrganizationConfirmation"),
+      this.organization.name,
+      this.i18nService.t("yes"),
+      this.i18nService.t("no"),
+      "warning"
+    );
+    if (!confirmed) {
+      return false;
+    }
 
-        try {
-            this.leaving = true;
-            this.actionPromise = this.apiService.postLeaveOrganization(this.organization.id).then(() => {
-                return this.syncService.fullSync(true);
-            });
-            await this.actionPromise;
-            this.platformUtilsService.showToast('success', null, this.i18nService.t('leftOrganization'));
-            await this.keyConnectorService.removeConvertAccountRequired();
-            this.router.navigate(['']);
-        } catch (e) {
-            this.platformUtilsService.showToast('error', this.i18nService.t('errorOccurred'), e);
-        }
+    try {
+      this.leaving = true;
+      this.actionPromise = this.apiService.postLeaveOrganization(this.organization.id).then(() => {
+        return this.syncService.fullSync(true);
+      });
+      await this.actionPromise;
+      this.platformUtilsService.showToast("success", null, this.i18nService.t("leftOrganization"));
+      await this.keyConnectorService.removeConvertAccountRequired();
+      this.router.navigate([""]);
+    } catch (e) {
+      this.platformUtilsService.showToast("error", this.i18nService.t("errorOccurred"), e);
     }
+  }
 }
diff --git a/jslib/angular/src/components/send/add-edit.component.ts b/jslib/angular/src/components/send/add-edit.component.ts
index 70bd87ba..3573260c 100644
--- a/jslib/angular/src/components/send/add-edit.component.ts
+++ b/jslib/angular/src/components/send/add-edit.component.ts
@@ -1,274 +1,296 @@
-import { DatePipe } from '@angular/common';
-import {
-    Directive,
-    EventEmitter,
-    Input,
-    OnInit,
-    Output
-} from '@angular/core';
-
-import { PolicyType } from 'jslib-common/enums/policyType';
-import { SendType } from 'jslib-common/enums/sendType';
-
-import { EnvironmentService } from 'jslib-common/abstractions/environment.service';
-import { I18nService } from 'jslib-common/abstractions/i18n.service';
-import { LogService } from 'jslib-common/abstractions/log.service';
-import { MessagingService } from 'jslib-common/abstractions/messaging.service';
-import { PlatformUtilsService } from 'jslib-common/abstractions/platformUtils.service';
-import { PolicyService } from 'jslib-common/abstractions/policy.service';
-import { SendService } from 'jslib-common/abstractions/send.service';
-import { UserService } from 'jslib-common/abstractions/user.service';
-
-import { SendFileView } from 'jslib-common/models/view/sendFileView';
-import { SendTextView } from 'jslib-common/models/view/sendTextView';
-import { SendView } from 'jslib-common/models/view/sendView';
-
-import { EncArrayBuffer } from 'jslib-common/models/domain/encArrayBuffer';
-import { Send } from 'jslib-common/models/domain/send';
+import { DatePipe } from "@angular/common";
+import { Directive, EventEmitter, Input, OnInit, Output } from "@angular/core";
+
+import { PolicyType } from "jslib-common/enums/policyType";
+import { SendType } from "jslib-common/enums/sendType";
+
+import { EnvironmentService } from "jslib-common/abstractions/environment.service";
+import { I18nService } from "jslib-common/abstractions/i18n.service";
+import { LogService } from "jslib-common/abstractions/log.service";
+import { MessagingService } from "jslib-common/abstractions/messaging.service";
+import { PlatformUtilsService } from "jslib-common/abstractions/platformUtils.service";
+import { PolicyService } from "jslib-common/abstractions/policy.service";
+import { SendService } from "jslib-common/abstractions/send.service";
+import { StateService } from "jslib-common/abstractions/state.service";
+
+import { SendFileView } from "jslib-common/models/view/sendFileView";
+import { SendTextView } from "jslib-common/models/view/sendTextView";
+import { SendView } from "jslib-common/models/view/sendView";
+
+import { EncArrayBuffer } from "jslib-common/models/domain/encArrayBuffer";
+import { Send } from "jslib-common/models/domain/send";
 
 @Directive()
 export class AddEditComponent implements OnInit {
-    @Input() sendId: string;
-    @Input() type: SendType;
-
-    @Output() onSavedSend = new EventEmitter<SendView>();
-    @Output() onDeletedSend = new EventEmitter<SendView>();
-    @Output() onCancelled = new EventEmitter<SendView>();
-
-    copyLink = false;
-    disableSend = false;
-    disableHideEmail = false;
-    send: SendView;
-    deletionDate: string;
-    expirationDate: string;
-    hasPassword: boolean;
-    password: string;
-    showPassword = false;
-    formPromise: Promise<any>;
-    deletePromise: Promise<any>;
-    sendType = SendType;
-    typeOptions: any[];
-    canAccessPremium = true;
-    emailVerified = true;
-    alertShown = false;
-    showOptions = false;
-
-    private sendLinkBaseUrl: string;
-
-    constructor(protected i18nService: I18nService, protected platformUtilsService: PlatformUtilsService,
-        protected environmentService: EnvironmentService, protected datePipe: DatePipe,
-        protected sendService: SendService, protected userService: UserService,
-        protected messagingService: MessagingService, protected policyService: PolicyService,
-        private logService: LogService) {
-        this.typeOptions = [
-            { name: i18nService.t('sendTypeFile'), value: SendType.File },
-            { name: i18nService.t('sendTypeText'), value: SendType.Text },
-        ];
-        this.sendLinkBaseUrl = this.environmentService.getSendUrl();
+  @Input() sendId: string;
+  @Input() type: SendType;
+
+  @Output() onSavedSend = new EventEmitter<SendView>();
+  @Output() onDeletedSend = new EventEmitter<SendView>();
+  @Output() onCancelled = new EventEmitter<SendView>();
+
+  copyLink = false;
+  disableSend = false;
+  disableHideEmail = false;
+  send: SendView;
+  deletionDate: string;
+  expirationDate: string;
+  hasPassword: boolean;
+  password: string;
+  showPassword = false;
+  formPromise: Promise<any>;
+  deletePromise: Promise<any>;
+  sendType = SendType;
+  typeOptions: any[];
+  canAccessPremium = true;
+  emailVerified = true;
+  alertShown = false;
+  showOptions = false;
+
+  private sendLinkBaseUrl: string;
+
+  constructor(
+    protected i18nService: I18nService,
+    protected platformUtilsService: PlatformUtilsService,
+    protected environmentService: EnvironmentService,
+    protected datePipe: DatePipe,
+    protected sendService: SendService,
+    protected messagingService: MessagingService,
+    protected policyService: PolicyService,
+    private logService: LogService,
+    protected stateService: StateService
+  ) {
+    this.typeOptions = [
+      { name: i18nService.t("sendTypeFile"), value: SendType.File },
+      { name: i18nService.t("sendTypeText"), value: SendType.Text },
+    ];
+    this.sendLinkBaseUrl = this.environmentService.getSendUrl();
+  }
+
+  get link(): string {
+    if (this.send.id != null && this.send.accessId != null) {
+      return this.sendLinkBaseUrl + this.send.accessId + "/" + this.send.urlB64Key;
     }
-
-    get link(): string {
-        if (this.send.id != null && this.send.accessId != null) {
-            return this.sendLinkBaseUrl + this.send.accessId + '/' + this.send.urlB64Key;
-        }
-        return null;
-    }
-
-    get isSafari() {
-        return this.platformUtilsService.isSafari();
+    return null;
+  }
+
+  get isSafari() {
+    return this.platformUtilsService.isSafari();
+  }
+
+  get isDateTimeLocalSupported(): boolean {
+    return !(this.platformUtilsService.isFirefox() || this.platformUtilsService.isSafari());
+  }
+
+  async ngOnInit() {
+    await this.load();
+  }
+
+  get editMode(): boolean {
+    return this.sendId != null;
+  }
+
+  get title(): string {
+    return this.i18nService.t(this.editMode ? "editSend" : "createSend");
+  }
+
+  setDates(event: { deletionDate: string; expirationDate: string }) {
+    this.deletionDate = event.deletionDate;
+    this.expirationDate = event.expirationDate;
+  }
+
+  async load() {
+    this.disableSend = await this.policyService.policyAppliesToUser(PolicyType.DisableSend);
+    this.disableHideEmail = await this.policyService.policyAppliesToUser(
+      PolicyType.SendOptions,
+      (p) => p.data.disableHideEmail
+    );
+
+    this.canAccessPremium = await this.stateService.getCanAccessPremium();
+    this.emailVerified = await this.stateService.getEmailVerified();
+    if (!this.canAccessPremium || !this.emailVerified) {
+      this.type = SendType.Text;
     }
 
-    get isDateTimeLocalSupported(): boolean {
-        return !(this.platformUtilsService.isFirefox() || this.platformUtilsService.isSafari());
+    if (this.send == null) {
+      if (this.editMode) {
+        const send = await this.loadSend();
+        this.send = await send.decrypt();
+      } else {
+        this.send = new SendView();
+        this.send.type = this.type == null ? SendType.File : this.type;
+        this.send.file = new SendFileView();
+        this.send.text = new SendTextView();
+        this.send.deletionDate = new Date();
+        this.send.deletionDate.setDate(this.send.deletionDate.getDate() + 7);
+      }
     }
 
-    async ngOnInit() {
-        await this.load();
+    this.hasPassword = this.send.password != null && this.send.password.trim() !== "";
+  }
+
+  async submit(): Promise<boolean> {
+    if (this.disableSend) {
+      this.platformUtilsService.showToast(
+        "error",
+        this.i18nService.t("errorOccurred"),
+        this.i18nService.t("sendDisabledWarning")
+      );
+      return false;
     }
 
-    get editMode(): boolean {
-        return this.sendId != null;
+    if (this.send.name == null || this.send.name === "") {
+      this.platformUtilsService.showToast(
+        "error",
+        this.i18nService.t("errorOccurred"),
+        this.i18nService.t("nameRequired")
+      );
+      return false;
     }
 
-    get title(): string {
-        return this.i18nService.t(
-            this.editMode ?
-                'editSend' :
-                'createSend'
+    let file: File = null;
+    if (this.send.type === SendType.File && !this.editMode) {
+      const fileEl = document.getElementById("file") as HTMLInputElement;
+      const files = fileEl.files;
+      if (files == null || files.length === 0) {
+        this.platformUtilsService.showToast(
+          "error",
+          this.i18nService.t("errorOccurred"),
+          this.i18nService.t("selectFile")
+        );
+        return;
+      }
+
+      file = files[0];
+      if (files[0].size > 524288000) {
+        // 500 MB
+        this.platformUtilsService.showToast(
+          "error",
+          this.i18nService.t("errorOccurred"),
+          this.i18nService.t("maxFileSize")
         );
+        return;
+      }
     }
 
-    setDates(event: {deletionDate: string, expirationDate: string}) {
-        this.deletionDate = event.deletionDate;
-        this.expirationDate = event.expirationDate;
+    if (this.password != null && this.password.trim() === "") {
+      this.password = null;
     }
 
-    async load() {
-        this.disableSend = await this.policyService.policyAppliesToUser(PolicyType.DisableSend);
-        this.disableHideEmail = await this.policyService.policyAppliesToUser(PolicyType.SendOptions,
-            p => p.data.disableHideEmail);
-
-        this.canAccessPremium = await this.userService.canAccessPremium();
-        this.emailVerified = await this.userService.getEmailVerified();
-        if (!this.canAccessPremium || !this.emailVerified) {
-            this.type = SendType.Text;
-        }
-
-        if (this.send == null) {
-            if (this.editMode) {
-                const send = await this.loadSend();
-                this.send = await send.decrypt();
-            } else {
-                this.send = new SendView();
-                this.send.type = this.type == null ? SendType.File : this.type;
-                this.send.file = new SendFileView();
-                this.send.text = new SendTextView();
-                this.send.deletionDate = new Date();
-                this.send.deletionDate.setDate(this.send.deletionDate.getDate() + 7);
-            }
+    this.formPromise = this.encryptSend(file).then(async (encSend) => {
+      const uploadPromise = this.sendService.saveWithServer(encSend);
+      await uploadPromise;
+      if (this.send.id == null) {
+        this.send.id = encSend[0].id;
+      }
+      if (this.send.accessId == null) {
+        this.send.accessId = encSend[0].accessId;
+      }
+      this.onSavedSend.emit(this.send);
+      if (this.copyLink && this.link != null) {
+        const copySuccess = await this.copyLinkToClipboard(this.link);
+        if (copySuccess ?? true) {
+          this.platformUtilsService.showToast(
+            "success",
+            null,
+            this.i18nService.t(this.editMode ? "editedSend" : "createdSend")
+          );
+        } else {
+          await this.platformUtilsService.showDialog(
+            this.i18nService.t(this.editMode ? "editedSend" : "createdSend"),
+            null,
+            this.i18nService.t("ok"),
+            null,
+            "success",
+            null
+          );
+          await this.copyLinkToClipboard(this.link);
         }
-
-        this.hasPassword = this.send.password != null && this.send.password.trim() !== '';
+      }
+    });
+    try {
+      await this.formPromise;
+      return true;
+    } catch (e) {
+      this.logService.error(e);
     }
+    return false;
+  }
 
-    async submit(): Promise<boolean> {
-        if (this.disableSend) {
-            this.platformUtilsService.showToast('error', this.i18nService.t('errorOccurred'),
-                this.i18nService.t('sendDisabledWarning'));
-            return false;
-        }
-
-        if (this.send.name == null || this.send.name === '') {
-            this.platformUtilsService.showToast('error', this.i18nService.t('errorOccurred'),
-                this.i18nService.t('nameRequired'));
-            return false;
-        }
-
-        let file: File = null;
-        if (this.send.type === SendType.File && !this.editMode) {
-            const fileEl = document.getElementById('file') as HTMLInputElement;
-            const files = fileEl.files;
-            if (files == null || files.length === 0) {
-                this.platformUtilsService.showToast('error', this.i18nService.t('errorOccurred'),
-                    this.i18nService.t('selectFile'));
-                return;
-            }
-
-            file = files[0];
-            if (files[0].size > 524288000) { // 500 MB
-                this.platformUtilsService.showToast('error', this.i18nService.t('errorOccurred'),
-                    this.i18nService.t('maxFileSize'));
-                return;
-            }
-        }
-
-        if (this.password != null && this.password.trim() === '') {
-            this.password = null;
-        }
-
-        this.formPromise = this.encryptSend(file)
-            .then(async encSend => {
-                const uploadPromise = this.sendService.saveWithServer(encSend);
-                await uploadPromise;
-                if (this.send.id == null) {
-                    this.send.id = encSend[0].id;
-                }
-                if (this.send.accessId == null) {
-                    this.send.accessId = encSend[0].accessId;
-                }
-                this.onSavedSend.emit(this.send);
-                if (this.copyLink && this.link != null) {
-                    const copySuccess = await this.copyLinkToClipboard(this.link);
-                    if (copySuccess ?? true) {
-                        this.platformUtilsService.showToast('success', null,
-                            this.i18nService.t(this.editMode ? 'editedSend' : 'createdSend'));
-                    } else {
-                        await this.platformUtilsService.showDialog(
-                            this.i18nService.t(this.editMode ? 'editedSend' : 'createdSend'), null,
-                            this.i18nService.t('ok'), null, 'success', null);
-                        await this.copyLinkToClipboard(this.link);
-                    }
-                }
-            });
-        try {
-            await this.formPromise;
-            return true;
-        } catch (e) {
-            this.logService.error(e);
-        }
-        return false;
-    }
+  async copyLinkToClipboard(link: string): Promise<void | boolean> {
+    return Promise.resolve(this.platformUtilsService.copyToClipboard(link));
+  }
 
-    async copyLinkToClipboard(link: string): Promise<void | boolean> {
-        return Promise.resolve(this.platformUtilsService.copyToClipboard(link));
+  async delete(): Promise<boolean> {
+    if (this.deletePromise != null) {
+      return false;
     }
-
-    async delete(): Promise<boolean> {
-        if (this.deletePromise != null) {
-            return false;
-        }
-        const confirmed = await this.platformUtilsService.showDialog(
-            this.i18nService.t('deleteSendConfirmation'),
-            this.i18nService.t('deleteSend'),
-            this.i18nService.t('yes'), this.i18nService.t('no'), 'warning');
-        if (!confirmed) {
-            return false;
-        }
-
-        try {
-            this.deletePromise = this.sendService.deleteWithServer(this.send.id);
-            await this.deletePromise;
-            this.platformUtilsService.showToast('success', null, this.i18nService.t('deletedSend'));
-            await this.load();
-            this.onDeletedSend.emit(this.send);
-            return true;
-        } catch (e) {
-            this.logService.error(e);
-        }
-
-        return false;
+    const confirmed = await this.platformUtilsService.showDialog(
+      this.i18nService.t("deleteSendConfirmation"),
+      this.i18nService.t("deleteSend"),
+      this.i18nService.t("yes"),
+      this.i18nService.t("no"),
+      "warning"
+    );
+    if (!confirmed) {
+      return false;
     }
 
-    typeChanged() {
-        if (this.send.type === SendType.File && !this.alertShown) {
-            if (!this.canAccessPremium) {
-                this.alertShown = true;
-                this.messagingService.send('premiumRequired');
-            } else if (!this.emailVerified) {
-                this.alertShown = true;
-                this.messagingService.send('emailVerificationRequired');
-            }
-        }
+    try {
+      this.deletePromise = this.sendService.deleteWithServer(this.send.id);
+      await this.deletePromise;
+      this.platformUtilsService.showToast("success", null, this.i18nService.t("deletedSend"));
+      await this.load();
+      this.onDeletedSend.emit(this.send);
+      return true;
+    } catch (e) {
+      this.logService.error(e);
     }
 
-    toggleOptions() {
-        this.showOptions = !this.showOptions;
+    return false;
+  }
+
+  typeChanged() {
+    if (this.send.type === SendType.File && !this.alertShown) {
+      if (!this.canAccessPremium) {
+        this.alertShown = true;
+        this.messagingService.send("premiumRequired");
+      } else if (!this.emailVerified) {
+        this.alertShown = true;
+        this.messagingService.send("emailVerificationRequired");
+      }
     }
+  }
 
-    protected async loadSend(): Promise<Send> {
-        return this.sendService.get(this.sendId);
-    }
+  toggleOptions() {
+    this.showOptions = !this.showOptions;
+  }
 
-    protected async encryptSend(file: File): Promise<[Send, EncArrayBuffer]> {
-        const sendData = await this.sendService.encrypt(this.send, file, this.password, null);
+  protected async loadSend(): Promise<Send> {
+    return this.sendService.get(this.sendId);
+  }
 
-        // Parse dates
-        try {
-            sendData[0].deletionDate = this.deletionDate == null ? null : new Date(this.deletionDate);
-        } catch {
-            sendData[0].deletionDate = null;
-        }
-        try {
-            sendData[0].expirationDate = this.expirationDate == null ? null : new Date(this.expirationDate);
-        } catch {
-            sendData[0].expirationDate = null;
-        }
+  protected async encryptSend(file: File): Promise<[Send, EncArrayBuffer]> {
+    const sendData = await this.sendService.encrypt(this.send, file, this.password, null);
 
-        return sendData;
+    // Parse dates
+    try {
+      sendData[0].deletionDate = this.deletionDate == null ? null : new Date(this.deletionDate);
+    } catch {
+      sendData[0].deletionDate = null;
     }
-
-    protected togglePasswordVisible() {
-        this.showPassword = !this.showPassword;
-        document.getElementById('password').focus();
+    try {
+      sendData[0].expirationDate =
+        this.expirationDate == null ? null : new Date(this.expirationDate);
+    } catch {
+      sendData[0].expirationDate = null;
     }
+
+    return sendData;
+  }
+
+  protected togglePasswordVisible() {
+    this.showPassword = !this.showPassword;
+    document.getElementById("password").focus();
+  }
 }
diff --git a/jslib/angular/src/components/send/efflux-dates.component.ts b/jslib/angular/src/components/send/efflux-dates.component.ts
index b774d3df..5f3aae13 100644
--- a/jslib/angular/src/components/send/efflux-dates.component.ts
+++ b/jslib/angular/src/components/send/efflux-dates.component.ts
@@ -1,341 +1,354 @@
-import { DatePipe } from '@angular/common';
-import {
-    Directive,
-    EventEmitter,
-    Input,
-    OnInit,
-    Output
-} from '@angular/core';
-import { FormControl, FormGroup } from '@angular/forms';
-
-import { I18nService } from 'jslib-common/abstractions/i18n.service';
-import { PlatformUtilsService } from 'jslib-common/abstractions/platformUtils.service';
+import { DatePipe } from "@angular/common";
+import { Directive, EventEmitter, Input, OnInit, Output } from "@angular/core";
+import { FormControl, FormGroup } from "@angular/forms";
+
+import { I18nService } from "jslib-common/abstractions/i18n.service";
+import { PlatformUtilsService } from "jslib-common/abstractions/platformUtils.service";
 
 // Different BrowserPath = different controls.
 enum BrowserPath {
-    // Native datetime-locale.
-    // We are happy.
-    Default = 'default',
+  // Native datetime-locale.
+  // We are happy.
+  Default = "default",
 
-    // Native date and time inputs, but no datetime-locale.
-    // We use individual date and time inputs and create a datetime programatically on submit.
-    Firefox = 'firefox',
+  // Native date and time inputs, but no datetime-locale.
+  // We use individual date and time inputs and create a datetime programatically on submit.
+  Firefox = "firefox",
 
-    // No native date, time, or datetime-locale inputs.
-    // We use a polyfill for dates and a dropdown for times.
-    Safari = 'safari',
+  // No native date, time, or datetime-locale inputs.
+  // We use a polyfill for dates and a dropdown for times.
+  Safari = "safari",
 }
 
 enum DateField {
-    DeletionDate = 'deletion',
-    ExpriationDate = 'expiration',
+  DeletionDate = "deletion",
+  ExpriationDate = "expiration",
 }
 
 // Value = hours
 enum DatePreset {
-    OneHour = 1,
-    OneDay = 24,
-    TwoDays = 48,
-    ThreeDays = 72,
-    SevenDays = 168,
-    ThirtyDays = 720,
-    Custom = 0,
-    Never = null,
+  OneHour = 1,
+  OneDay = 24,
+  TwoDays = 48,
+  ThreeDays = 72,
+  SevenDays = 168,
+  ThirtyDays = 720,
+  Custom = 0,
+  Never = null,
 }
 
 // TimeOption is used for the dropdown implementation of custom times
 // twelveHour = displayed time; twentyFourHour = time used in logic
 interface TimeOption {
-    twelveHour: string;
-    twentyFourHour: string;
+  twelveHour: string;
+  twentyFourHour: string;
 }
 
 @Directive()
 export class EffluxDatesComponent implements OnInit {
-    @Input() readonly initialDeletionDate: Date;
-    @Input() readonly initialExpirationDate: Date;
-    @Input() readonly editMode: boolean;
-    @Input() readonly disabled: boolean;
-
-    @Output() datesChanged = new EventEmitter<{deletionDate: string, expirationDate: string}>();
-
-    get browserPath(): BrowserPath {
-        if (this.platformUtilsService.isFirefox()) {
-            return BrowserPath.Firefox;
-        } else if (this.platformUtilsService.isSafari()) {
-            return BrowserPath.Safari;
-        }
-        return BrowserPath.Default;
+  @Input() readonly initialDeletionDate: Date;
+  @Input() readonly initialExpirationDate: Date;
+  @Input() readonly editMode: boolean;
+  @Input() readonly disabled: boolean;
+
+  @Output() datesChanged = new EventEmitter<{ deletionDate: string; expirationDate: string }>();
+
+  get browserPath(): BrowserPath {
+    if (this.platformUtilsService.isFirefox()) {
+      return BrowserPath.Firefox;
+    } else if (this.platformUtilsService.isSafari()) {
+      return BrowserPath.Safari;
     }
-
-    datesForm = new FormGroup({
-        selectedDeletionDatePreset: new FormControl(),
-        selectedExpirationDatePreset: new FormControl(),
-        defaultDeletionDateTime: new FormControl(),
-        defaultExpirationDateTime: new FormControl(),
-        fallbackDeletionDate: new FormControl(),
-        fallbackDeletionTime: new FormControl(),
-        fallbackExpirationDate: new FormControl(),
-        fallbackExpirationTime: new FormControl(),
-    });
-
-    deletionDatePresets: any[] = [
-            { name: this.i18nService.t('oneHour'), value: DatePreset.OneHour },
-            { name: this.i18nService.t('oneDay'), value: DatePreset.OneDay },
-            { name: this.i18nService.t('days', '2'), value: DatePreset.TwoDays },
-            { name: this.i18nService.t('days', '3'), value: DatePreset.ThreeDays },
-            { name: this.i18nService.t('days', '7'), value: DatePreset.SevenDays },
-            { name: this.i18nService.t('days', '30'), value: DatePreset.ThirtyDays },
-            { name: this.i18nService.t('custom'), value: DatePreset.Custom },
-    ];
-
-    expirationDatePresets: any[] = [
-            { name: this.i18nService.t('never'), value: DatePreset.Never },
-    ].concat([...this.deletionDatePresets]);
-
-    get selectedDeletionDatePreset(): FormControl {
-        return this.datesForm.get('selectedDeletionDatePreset') as FormControl;
-    }
-
-    get selectedExpirationDatePreset(): FormControl {
-        return this.datesForm.get('selectedExpirationDatePreset') as FormControl;
-    }
-
-    get defaultDeletionDateTime(): FormControl {
-        return this.datesForm.get('defaultDeletionDateTime') as FormControl;
-    }
-
-    get defaultExpirationDateTime(): FormControl {
-        return this.datesForm.get('defaultExpirationDateTime') as FormControl;
-    }
-
-    get fallbackDeletionDate(): FormControl {
-        return this.datesForm.get('fallbackDeletionDate') as FormControl;
-    }
-
-    get fallbackDeletionTime(): FormControl {
-        return this.datesForm.get('fallbackDeletionTime') as FormControl;
-    }
-
-    get fallbackExpirationDate(): FormControl {
-        return this.datesForm.get('fallbackExpirationDate') as FormControl;
-    }
-
-    get fallbackExpirationTime(): FormControl {
-        return this.datesForm.get('fallbackExpirationTime') as FormControl;
-    }
-
-    // Should be able to call these at any time and compute a submitable value
-    get formattedDeletionDate(): string {
-        switch (this.selectedDeletionDatePreset.value as DatePreset) {
-            case DatePreset.Never:
-                this.selectedDeletionDatePreset.setValue(DatePreset.SevenDays);
-                return this.formattedDeletionDate;
-            case DatePreset.Custom:
-                switch (this.browserPath) {
-                    case BrowserPath.Safari:
-                    case BrowserPath.Firefox:
-                        return this.fallbackDeletionDate.value + 'T' + this.fallbackDeletionTime.value;
-                    default:
-                        return this.defaultDeletionDateTime.value;
-                }
-            default:
-                const now = new Date();
-                const miliseconds = now.setTime(now.getTime() +
-                    (this.selectedDeletionDatePreset.value as number * 60 * 60 * 1000)) ;
-                return new Date(miliseconds).toString();
+    return BrowserPath.Default;
+  }
+
+  datesForm = new FormGroup({
+    selectedDeletionDatePreset: new FormControl(),
+    selectedExpirationDatePreset: new FormControl(),
+    defaultDeletionDateTime: new FormControl(),
+    defaultExpirationDateTime: new FormControl(),
+    fallbackDeletionDate: new FormControl(),
+    fallbackDeletionTime: new FormControl(),
+    fallbackExpirationDate: new FormControl(),
+    fallbackExpirationTime: new FormControl(),
+  });
+
+  deletionDatePresets: any[] = [
+    { name: this.i18nService.t("oneHour"), value: DatePreset.OneHour },
+    { name: this.i18nService.t("oneDay"), value: DatePreset.OneDay },
+    { name: this.i18nService.t("days", "2"), value: DatePreset.TwoDays },
+    { name: this.i18nService.t("days", "3"), value: DatePreset.ThreeDays },
+    { name: this.i18nService.t("days", "7"), value: DatePreset.SevenDays },
+    { name: this.i18nService.t("days", "30"), value: DatePreset.ThirtyDays },
+    { name: this.i18nService.t("custom"), value: DatePreset.Custom },
+  ];
+
+  expirationDatePresets: any[] = [
+    { name: this.i18nService.t("never"), value: DatePreset.Never },
+  ].concat([...this.deletionDatePresets]);
+
+  get selectedDeletionDatePreset(): FormControl {
+    return this.datesForm.get("selectedDeletionDatePreset") as FormControl;
+  }
+
+  get selectedExpirationDatePreset(): FormControl {
+    return this.datesForm.get("selectedExpirationDatePreset") as FormControl;
+  }
+
+  get defaultDeletionDateTime(): FormControl {
+    return this.datesForm.get("defaultDeletionDateTime") as FormControl;
+  }
+
+  get defaultExpirationDateTime(): FormControl {
+    return this.datesForm.get("defaultExpirationDateTime") as FormControl;
+  }
+
+  get fallbackDeletionDate(): FormControl {
+    return this.datesForm.get("fallbackDeletionDate") as FormControl;
+  }
+
+  get fallbackDeletionTime(): FormControl {
+    return this.datesForm.get("fallbackDeletionTime") as FormControl;
+  }
+
+  get fallbackExpirationDate(): FormControl {
+    return this.datesForm.get("fallbackExpirationDate") as FormControl;
+  }
+
+  get fallbackExpirationTime(): FormControl {
+    return this.datesForm.get("fallbackExpirationTime") as FormControl;
+  }
+
+  // Should be able to call these at any time and compute a submitable value
+  get formattedDeletionDate(): string {
+    switch (this.selectedDeletionDatePreset.value as DatePreset) {
+      case DatePreset.Never:
+        this.selectedDeletionDatePreset.setValue(DatePreset.SevenDays);
+        return this.formattedDeletionDate;
+      case DatePreset.Custom:
+        switch (this.browserPath) {
+          case BrowserPath.Safari:
+          case BrowserPath.Firefox:
+            return this.fallbackDeletionDate.value + "T" + this.fallbackDeletionTime.value;
+          default:
+            return this.defaultDeletionDateTime.value;
         }
+      default:
+        const now = new Date();
+        const miliseconds = now.setTime(
+          now.getTime() + (this.selectedDeletionDatePreset.value as number) * 60 * 60 * 1000
+        );
+        return new Date(miliseconds).toString();
     }
+  }
 
-    get formattedExpirationDate(): string {
-        switch (this.selectedExpirationDatePreset.value as DatePreset) {
-            case DatePreset.Never:
-                return null;
-            case DatePreset.Custom:
-                switch (this.browserPath) {
-                    case BrowserPath.Safari:
-                    case BrowserPath.Firefox:
-                        if ((!this.fallbackExpirationDate.value || !this.fallbackExpirationTime.value) &&
-                            this.editMode) {
-                            return null;
-                        }
-                        return this.fallbackExpirationDate.value + 'T' + this.fallbackExpirationTime.value;
-                    default:
-                        if (!this.defaultExpirationDateTime.value) {
-                            return null;
-                        }
-                        return this.defaultExpirationDateTime.value;
-                }
-            default:
-                const now = new Date();
-                const miliseconds = now.setTime(now.getTime() +
-                    (this.selectedExpirationDatePreset.value as number * 60 * 60 * 1000));
-                return new Date(miliseconds).toString();
+  get formattedExpirationDate(): string {
+    switch (this.selectedExpirationDatePreset.value as DatePreset) {
+      case DatePreset.Never:
+        return null;
+      case DatePreset.Custom:
+        switch (this.browserPath) {
+          case BrowserPath.Safari:
+          case BrowserPath.Firefox:
+            if (
+              (!this.fallbackExpirationDate.value || !this.fallbackExpirationTime.value) &&
+              this.editMode
+            ) {
+              return null;
+            }
+            return this.fallbackExpirationDate.value + "T" + this.fallbackExpirationTime.value;
+          default:
+            if (!this.defaultExpirationDateTime.value) {
+              return null;
+            }
+            return this.defaultExpirationDateTime.value;
         }
+      default:
+        const now = new Date();
+        const miliseconds = now.setTime(
+          now.getTime() + (this.selectedExpirationDatePreset.value as number) * 60 * 60 * 1000
+        );
+        return new Date(miliseconds).toString();
     }
-    //
-
-    get safariDeletionTimePresetOptions() {
-        return this.safariTimePresetOptions(DateField.DeletionDate);
-    }
-
-    get safariExpirationTimePresetOptions() {
-        return this.safariTimePresetOptions(DateField.ExpriationDate);
-    }
-
-    private get nextWeek(): Date {
-        const nextWeek = new Date();
-        nextWeek.setDate(nextWeek.getDate() + 7);
-        return nextWeek;
-    }
-
-    constructor(protected i18nService: I18nService, protected platformUtilsService: PlatformUtilsService,
-        protected datePipe: DatePipe) {
-    }
-
-    ngOnInit(): void {
-        this.setInitialFormValues();
-        this.emitDates();
-        this.datesForm.valueChanges.subscribe(() => {
-            this.emitDates();
-        });
+  }
+  //
+
+  get safariDeletionTimePresetOptions() {
+    return this.safariTimePresetOptions(DateField.DeletionDate);
+  }
+
+  get safariExpirationTimePresetOptions() {
+    return this.safariTimePresetOptions(DateField.ExpriationDate);
+  }
+
+  private get nextWeek(): Date {
+    const nextWeek = new Date();
+    nextWeek.setDate(nextWeek.getDate() + 7);
+    return nextWeek;
+  }
+
+  constructor(
+    protected i18nService: I18nService,
+    protected platformUtilsService: PlatformUtilsService,
+    protected datePipe: DatePipe
+  ) {}
+
+  ngOnInit(): void {
+    this.setInitialFormValues();
+    this.emitDates();
+    this.datesForm.valueChanges.subscribe(() => {
+      this.emitDates();
+    });
+  }
+
+  onDeletionDatePresetSelect(value: DatePreset) {
+    this.selectedDeletionDatePreset.setValue(value);
+  }
+
+  clearExpiration() {
+    switch (this.browserPath) {
+      case BrowserPath.Safari:
+      case BrowserPath.Firefox:
+        this.fallbackExpirationDate.setValue(null);
+        this.fallbackExpirationTime.setValue(null);
+        break;
+      case BrowserPath.Default:
+        this.defaultExpirationDateTime.setValue(null);
+        break;
     }
+  }
 
-    onDeletionDatePresetSelect(value: DatePreset) {
-        this.selectedDeletionDatePreset.setValue(value);
+  protected emitDates() {
+    this.datesChanged.emit({
+      deletionDate: this.formattedDeletionDate,
+      expirationDate: this.formattedExpirationDate,
+    });
+  }
+
+  protected setInitialFormValues() {
+    if (this.editMode) {
+      this.selectedDeletionDatePreset.setValue(DatePreset.Custom);
+      this.selectedExpirationDatePreset.setValue(DatePreset.Custom);
+      switch (this.browserPath) {
+        case BrowserPath.Safari:
+        case BrowserPath.Firefox:
+          this.fallbackDeletionDate.setValue(this.initialDeletionDate.toISOString().slice(0, 10));
+          this.fallbackDeletionTime.setValue(this.initialDeletionDate.toTimeString().slice(0, 5));
+          if (this.initialExpirationDate != null) {
+            this.fallbackExpirationDate.setValue(
+              this.initialExpirationDate.toISOString().slice(0, 10)
+            );
+            this.fallbackExpirationTime.setValue(
+              this.initialExpirationDate.toTimeString().slice(0, 5)
+            );
+          }
+          break;
+        case BrowserPath.Default:
+          if (this.initialExpirationDate) {
+            this.defaultExpirationDateTime.setValue(
+              this.datePipe.transform(new Date(this.initialExpirationDate), "yyyy-MM-ddTHH:mm")
+            );
+          }
+          this.defaultDeletionDateTime.setValue(
+            this.datePipe.transform(new Date(this.initialDeletionDate), "yyyy-MM-ddTHH:mm")
+          );
+          break;
+      }
+    } else {
+      this.selectedDeletionDatePreset.setValue(DatePreset.SevenDays);
+      this.selectedExpirationDatePreset.setValue(DatePreset.Never);
+
+      switch (this.browserPath) {
+        case BrowserPath.Safari:
+          this.fallbackDeletionDate.setValue(this.nextWeek.toISOString().slice(0, 10));
+          this.fallbackDeletionTime.setValue(
+            this.safariTimePresetOptions(DateField.DeletionDate)[1].twentyFourHour
+          );
+          break;
+        default:
+          break;
+      }
     }
-
-    clearExpiration() {
-        switch (this.browserPath) {
-            case BrowserPath.Safari:
-            case BrowserPath.Firefox:
-                this.fallbackExpirationDate.setValue(null);
-                this.fallbackExpirationTime.setValue(null);
-                break;
-            case BrowserPath.Default:
-                this.defaultExpirationDateTime.setValue(null);
-                break;
+  }
+
+  protected safariTimePresetOptions(field: DateField): TimeOption[] {
+    // init individual arrays for major sort groups
+    const noon: TimeOption[] = [];
+    const midnight: TimeOption[] = [];
+    const ams: TimeOption[] = [];
+    const pms: TimeOption[] = [];
+
+    // determine minute skip (5 min, 10 min, 15 min, etc.)
+    const minuteIncrementer = 15;
+
+    // loop through each hour on a 12 hour system
+    for (let h = 1; h <= 12; h++) {
+      // loop through each minute in the hour using the skip to incriment
+      for (let m = 0; m < 60; m += minuteIncrementer) {
+        // init the final strings that will be added to the lists
+        let hour = h.toString();
+        let minutes = m.toString();
+
+        // add prepending 0s to single digit hours/minutes
+        if (h < 10) {
+          hour = "0" + hour;
+        }
+        if (m < 10) {
+          minutes = "0" + minutes;
         }
-    }
-
-    protected emitDates() {
-        this.datesChanged.emit({
-            deletionDate: this.formattedDeletionDate,
-            expirationDate: this.formattedExpirationDate,
-        });
-    }
 
-    protected setInitialFormValues() {
-        if (this.editMode) {
-            this.selectedDeletionDatePreset.setValue(DatePreset.Custom);
-            this.selectedExpirationDatePreset.setValue(DatePreset.Custom);
-            switch (this.browserPath) {
-                case BrowserPath.Safari:
-                case BrowserPath.Firefox:
-                    this.fallbackDeletionDate.setValue(this.initialDeletionDate.toISOString().slice(0, 10));
-                    this.fallbackDeletionTime.setValue(this.initialDeletionDate.toTimeString().slice(0, 5));
-                    if (this.initialExpirationDate != null) {
-                        this.fallbackExpirationDate.setValue(this.initialExpirationDate.toISOString().slice(0, 10));
-                        this.fallbackExpirationTime.setValue(this.initialExpirationDate.toTimeString().slice(0, 5));
-                    }
-                    break;
-                case BrowserPath.Default:
-                    if (this.initialExpirationDate) {
-                        this.defaultExpirationDateTime.setValue(
-                            this.datePipe.transform(new Date(this.initialExpirationDate), 'yyyy-MM-ddTHH:mm'));
-                    }
-                    this.defaultDeletionDateTime.setValue(this.datePipe.transform(new Date(this.initialDeletionDate), 'yyyy-MM-ddTHH:mm'));
-                    break;
-            }
+        // build time strings and push to relevant sort groups
+        if (h === 12) {
+          const midnightOption: TimeOption = {
+            twelveHour: `${hour}:${minutes} AM`,
+            twentyFourHour: `00:${minutes}`,
+          };
+          midnight.push(midnightOption);
+
+          const noonOption: TimeOption = {
+            twelveHour: `${hour}:${minutes} PM`,
+            twentyFourHour: `${hour}:${minutes}`,
+          };
+          noon.push(noonOption);
         } else {
-            this.selectedDeletionDatePreset.setValue(DatePreset.SevenDays);
-            this.selectedExpirationDatePreset.setValue(DatePreset.Never);
-
-            switch (this.browserPath) {
-                case BrowserPath.Safari:
-                    this.fallbackDeletionDate.setValue(this.nextWeek.toISOString().slice(0, 10));
-                    this.fallbackDeletionTime.setValue(this.safariTimePresetOptions(DateField.DeletionDate)[1].twentyFourHour);
-                    break;
-                default:
-                    break;
-            }
+          const amOption: TimeOption = {
+            twelveHour: `${hour}:${minutes} AM`,
+            twentyFourHour: `${hour}:${minutes}`,
+          };
+          ams.push(amOption);
+
+          const pmOption: TimeOption = {
+            twelveHour: `${hour}:${minutes} PM`,
+            twentyFourHour: `${h + 12}:${minutes}`,
+          };
+          pms.push(pmOption);
         }
+      }
     }
 
-    protected safariTimePresetOptions(field: DateField): TimeOption[] {
-        // init individual arrays for major sort groups
-        const noon: TimeOption[] = [];
-        const midnight: TimeOption[] = [];
-        const ams: TimeOption[] = [];
-        const pms: TimeOption[] = [];
-
-        // determine minute skip (5 min, 10 min, 15 min, etc.)
-        const minuteIncrementer = 15;
-
-        // loop through each hour on a 12 hour system
-        for (let h = 1; h <= 12; h++) {
-            // loop through each minute in the hour using the skip to incriment
-            for (let m = 0; m < 60; m += minuteIncrementer) {
-                // init the final strings that will be added to the lists
-                let hour = h.toString();
-                let minutes = m.toString();
-
-                // add prepending 0s to single digit hours/minutes
-                if (h < 10) {
-                    hour = '0' + hour;
-                }
-                if (m < 10) {
-                    minutes = '0' + minutes;
-                }
-
-                // build time strings and push to relevant sort groups
-                if (h === 12) {
-                    const midnightOption: TimeOption = {
-                        twelveHour: `${hour}:${minutes} AM`,
-                        twentyFourHour: `00:${minutes}`,
-                    };
-                    midnight.push(midnightOption);
-
-                    const noonOption: TimeOption = {
-                        twelveHour: `${hour}:${minutes} PM`,
-                        twentyFourHour: `${hour}:${minutes}`,
-                    };
-                    noon.push(noonOption);
-                } else {
-                    const amOption: TimeOption = {
-                        twelveHour: `${hour}:${minutes} AM`,
-                        twentyFourHour: `${hour}:${minutes}`,
-                    };
-                    ams.push(amOption);
-
-                    const pmOption: TimeOption = {
-                        twelveHour: `${hour}:${minutes} PM`,
-                        twentyFourHour: `${h + 12}:${minutes}`,
-                    };
-                    pms.push(pmOption);
-                }
-            }
-        }
-
-        // bring all the arrays together in the right order
-        const validTimes = [...midnight, ...ams, ...noon, ...pms];
-
-        // determine if an unsupported value already exists on the send & add that to the top of the option list
-        // example: if the Send was created with a different client
-        if (field === DateField.ExpriationDate && this.initialExpirationDate != null && this.editMode) {
-            const previousValue: TimeOption = {
-                twelveHour: this.datePipe.transform(this.initialExpirationDate, 'hh:mm a'),
-                twentyFourHour: this.datePipe.transform(this.initialExpirationDate, 'HH:mm'),
-            };
-            return [previousValue, { twelveHour: null, twentyFourHour: null }, ...validTimes];
-        } else if (field === DateField.DeletionDate && this.initialDeletionDate != null && this.editMode) {
-            const previousValue: TimeOption = {
-                twelveHour: this.datePipe.transform(this.initialDeletionDate, 'hh:mm a'),
-                twentyFourHour: this.datePipe.transform(this.initialDeletionDate, 'HH:mm'),
-            };
-            return [previousValue, ...validTimes];
-        } else {
-            return [{ twelveHour: null, twentyFourHour: null }, ...validTimes];
-        }
+    // bring all the arrays together in the right order
+    const validTimes = [...midnight, ...ams, ...noon, ...pms];
+
+    // determine if an unsupported value already exists on the send & add that to the top of the option list
+    // example: if the Send was created with a different client
+    if (field === DateField.ExpriationDate && this.initialExpirationDate != null && this.editMode) {
+      const previousValue: TimeOption = {
+        twelveHour: this.datePipe.transform(this.initialExpirationDate, "hh:mm a"),
+        twentyFourHour: this.datePipe.transform(this.initialExpirationDate, "HH:mm"),
+      };
+      return [previousValue, { twelveHour: null, twentyFourHour: null }, ...validTimes];
+    } else if (
+      field === DateField.DeletionDate &&
+      this.initialDeletionDate != null &&
+      this.editMode
+    ) {
+      const previousValue: TimeOption = {
+        twelveHour: this.datePipe.transform(this.initialDeletionDate, "hh:mm a"),
+        twentyFourHour: this.datePipe.transform(this.initialDeletionDate, "HH:mm"),
+      };
+      return [previousValue, ...validTimes];
+    } else {
+      return [{ twelveHour: null, twentyFourHour: null }, ...validTimes];
     }
+  }
 }
diff --git a/jslib/angular/src/components/send/send.component.ts b/jslib/angular/src/components/send/send.component.ts
index 77f36459..20b2c095 100644
--- a/jslib/angular/src/components/send/send.component.ts
+++ b/jslib/angular/src/components/send/send.component.ts
@@ -1,203 +1,212 @@
-import {
-    Directive,
-    NgZone,
-    OnInit,
-} from '@angular/core';
-
-import { PolicyType } from 'jslib-common/enums/policyType';
-import { SendType } from 'jslib-common/enums/sendType';
-
-import { SendView } from 'jslib-common/models/view/sendView';
-
-import { EnvironmentService } from 'jslib-common/abstractions/environment.service';
-import { I18nService } from 'jslib-common/abstractions/i18n.service';
-import { LogService } from 'jslib-common/abstractions/log.service';
-import { PlatformUtilsService } from 'jslib-common/abstractions/platformUtils.service';
-import { PolicyService } from 'jslib-common/abstractions/policy.service';
-import { SearchService } from 'jslib-common/abstractions/search.service';
-import { SendService } from 'jslib-common/abstractions/send.service';
-import { UserService } from 'jslib-common/abstractions/user.service';
+import { Directive, NgZone, OnInit } from "@angular/core";
 
-@Directive()
-export class SendComponent implements OnInit {
+import { PolicyType } from "jslib-common/enums/policyType";
+import { SendType } from "jslib-common/enums/sendType";
 
-    disableSend = false;
-    sendType = SendType;
-    loaded = false;
-    loading = true;
-    refreshing = false;
-    expired: boolean = false;
-    type: SendType = null;
-    sends: SendView[] = [];
-    filteredSends: SendView[] = [];
-    searchText: string;
-    selectedType: SendType;
-    selectedAll: boolean;
-    searchPlaceholder: string;
-    filter: (cipher: SendView) => boolean;
-    searchPending = false;
-    hasSearched = false; // search() function called - returns true if text qualifies for search
-
-    actionPromise: any;
-    onSuccessfulRemovePassword: () => Promise<any>;
-    onSuccessfulDelete: () => Promise<any>;
-    onSuccessfulLoad: () => Promise<any>;
-
-    private searchTimeout: any;
-
-    constructor(protected sendService: SendService, protected i18nService: I18nService,
-        protected platformUtilsService: PlatformUtilsService, protected environmentService: EnvironmentService,
-        protected ngZone: NgZone, protected searchService: SearchService,
-        protected policyService: PolicyService, protected userService: UserService,
-        private logService: LogService) { }
-
-    async ngOnInit() {
-        this.disableSend = await this.policyService.policyAppliesToUser(PolicyType.DisableSend);
-    }
+import { SendView } from "jslib-common/models/view/sendView";
 
-    async load(filter: (send: SendView) => boolean = null) {
-        this.loading = true;
-        const sends = await this.sendService.getAllDecrypted();
-        this.sends = sends;
-        if (this.onSuccessfulLoad != null) {
-            await this.onSuccessfulLoad();
-        } else {
-            // Default action
-            this.selectAll();
-        }
-        this.loading = false;
-        this.loaded = true;
-    }
+import { EnvironmentService } from "jslib-common/abstractions/environment.service";
+import { I18nService } from "jslib-common/abstractions/i18n.service";
+import { LogService } from "jslib-common/abstractions/log.service";
+import { PlatformUtilsService } from "jslib-common/abstractions/platformUtils.service";
+import { PolicyService } from "jslib-common/abstractions/policy.service";
+import { SearchService } from "jslib-common/abstractions/search.service";
+import { SendService } from "jslib-common/abstractions/send.service";
 
-    async reload(filter: (send: SendView) => boolean = null) {
-        this.loaded = false;
-        this.sends = [];
-        await this.load(filter);
+@Directive()
+export class SendComponent implements OnInit {
+  disableSend = false;
+  sendType = SendType;
+  loaded = false;
+  loading = true;
+  refreshing = false;
+  expired: boolean = false;
+  type: SendType = null;
+  sends: SendView[] = [];
+  filteredSends: SendView[] = [];
+  searchText: string;
+  selectedType: SendType;
+  selectedAll: boolean;
+  searchPlaceholder: string;
+  filter: (cipher: SendView) => boolean;
+  searchPending = false;
+  hasSearched = false; // search() function called - returns true if text qualifies for search
+
+  actionPromise: any;
+  onSuccessfulRemovePassword: () => Promise<any>;
+  onSuccessfulDelete: () => Promise<any>;
+  onSuccessfulLoad: () => Promise<any>;
+
+  private searchTimeout: any;
+
+  constructor(
+    protected sendService: SendService,
+    protected i18nService: I18nService,
+    protected platformUtilsService: PlatformUtilsService,
+    protected environmentService: EnvironmentService,
+    protected ngZone: NgZone,
+    protected searchService: SearchService,
+    protected policyService: PolicyService,
+    private logService: LogService
+  ) {}
+
+  async ngOnInit() {
+    this.disableSend = await this.policyService.policyAppliesToUser(PolicyType.DisableSend);
+  }
+
+  async load(filter: (send: SendView) => boolean = null) {
+    this.loading = true;
+    const sends = await this.sendService.getAllDecrypted();
+    this.sends = sends;
+    if (this.onSuccessfulLoad != null) {
+      await this.onSuccessfulLoad();
+    } else {
+      // Default action
+      this.selectAll();
     }
-
-    async refresh() {
-        try {
-            this.refreshing = true;
-            await this.reload(this.filter);
-        } finally {
-            this.refreshing = false;
-        }
+    this.loading = false;
+    this.loaded = true;
+  }
+
+  async reload(filter: (send: SendView) => boolean = null) {
+    this.loaded = false;
+    this.sends = [];
+    await this.load(filter);
+  }
+
+  async refresh() {
+    try {
+      this.refreshing = true;
+      await this.reload(this.filter);
+    } finally {
+      this.refreshing = false;
     }
+  }
 
-    async applyFilter(filter: (send: SendView) => boolean = null) {
-        this.filter = filter;
-        await this.search(null);
-    }
+  async applyFilter(filter: (send: SendView) => boolean = null) {
+    this.filter = filter;
+    await this.search(null);
+  }
 
-    async search(timeout: number = null) {
-        this.searchPending = false;
-        if (this.searchTimeout != null) {
-            clearTimeout(this.searchTimeout);
-        }
-        if (timeout == null) {
-            this.hasSearched = this.searchService.isSearchable(this.searchText);
-            this.filteredSends = this.sends.filter(s => this.filter == null || this.filter(s));
-            this.applyTextSearch();
-            return;
-        }
-        this.searchPending = true;
-        this.searchTimeout = setTimeout(async () => {
-            this.hasSearched = this.searchService.isSearchable(this.searchText);
-            this.filteredSends = this.sends.filter(s => this.filter == null || this.filter(s));
-            this.applyTextSearch();
-            this.searchPending = false;
-        }, timeout);
+  async search(timeout: number = null) {
+    this.searchPending = false;
+    if (this.searchTimeout != null) {
+      clearTimeout(this.searchTimeout);
     }
-
-    async removePassword(s: SendView): Promise<boolean> {
-        if (this.actionPromise != null || s.password == null) {
-            return;
-        }
-        const confirmed = await this.platformUtilsService.showDialog(this.i18nService.t('removePasswordConfirmation'),
-            this.i18nService.t('removePassword'),
-            this.i18nService.t('yes'), this.i18nService.t('no'), 'warning');
-        if (!confirmed) {
-            return false;
-        }
-
-        try {
-            this.actionPromise = this.sendService.removePasswordWithServer(s.id);
-            await this.actionPromise;
-            if (this.onSuccessfulRemovePassword != null) {
-                this.onSuccessfulRemovePassword();
-            } else {
-                // Default actions
-                this.platformUtilsService.showToast('success', null, this.i18nService.t('removedPassword'));
-                await this.load();
-            }
-        } catch (e) {
-            this.logService.error(e);
-        }
-        this.actionPromise = null;
+    if (timeout == null) {
+      this.hasSearched = this.searchService.isSearchable(this.searchText);
+      this.filteredSends = this.sends.filter((s) => this.filter == null || this.filter(s));
+      this.applyTextSearch();
+      return;
     }
-
-    async delete(s: SendView): Promise<boolean> {
-        if (this.actionPromise != null) {
-            return false;
-        }
-        const confirmed = await this.platformUtilsService.showDialog(
-            this.i18nService.t('deleteSendConfirmation'),
-            this.i18nService.t('deleteSend'),
-            this.i18nService.t('yes'), this.i18nService.t('no'), 'warning');
-        if (!confirmed) {
-            return false;
-        }
-
-        try {
-            this.actionPromise = this.sendService.deleteWithServer(s.id);
-            await this.actionPromise;
-
-            if (this.onSuccessfulDelete != null) {
-                this.onSuccessfulDelete();
-            } else {
-                // Default actions
-                this.platformUtilsService.showToast('success', null, this.i18nService.t('deletedSend'));
-                await this.refresh();
-            }
-        } catch (e) {
-            this.logService.error(e);
-        }
-        this.actionPromise = null;
-        return true;
+    this.searchPending = true;
+    this.searchTimeout = setTimeout(async () => {
+      this.hasSearched = this.searchService.isSearchable(this.searchText);
+      this.filteredSends = this.sends.filter((s) => this.filter == null || this.filter(s));
+      this.applyTextSearch();
+      this.searchPending = false;
+    }, timeout);
+  }
+
+  async removePassword(s: SendView): Promise<boolean> {
+    if (this.actionPromise != null || s.password == null) {
+      return;
     }
-
-    copy(s: SendView) {
-        const sendLinkBaseUrl = this.environmentService.getSendUrl();
-        const link = sendLinkBaseUrl + s.accessId + '/' + s.urlB64Key;
-        this.platformUtilsService.copyToClipboard(link);
-        this.platformUtilsService.showToast('success', null,
-            this.i18nService.t('valueCopied', this.i18nService.t('sendLink')));
+    const confirmed = await this.platformUtilsService.showDialog(
+      this.i18nService.t("removePasswordConfirmation"),
+      this.i18nService.t("removePassword"),
+      this.i18nService.t("yes"),
+      this.i18nService.t("no"),
+      "warning"
+    );
+    if (!confirmed) {
+      return false;
     }
 
-    searchTextChanged() {
-        this.search(200);
+    try {
+      this.actionPromise = this.sendService.removePasswordWithServer(s.id);
+      await this.actionPromise;
+      if (this.onSuccessfulRemovePassword != null) {
+        this.onSuccessfulRemovePassword();
+      } else {
+        // Default actions
+        this.platformUtilsService.showToast("success", null, this.i18nService.t("removedPassword"));
+        await this.load();
+      }
+    } catch (e) {
+      this.logService.error(e);
     }
+    this.actionPromise = null;
+  }
 
-    selectAll() {
-        this.clearSelections();
-        this.selectedAll = true;
-        this.applyFilter(null);
+  async delete(s: SendView): Promise<boolean> {
+    if (this.actionPromise != null) {
+      return false;
     }
-
-    selectType(type: SendType) {
-        this.clearSelections();
-        this.selectedType = type;
-        this.applyFilter(s => s.type === type);
+    const confirmed = await this.platformUtilsService.showDialog(
+      this.i18nService.t("deleteSendConfirmation"),
+      this.i18nService.t("deleteSend"),
+      this.i18nService.t("yes"),
+      this.i18nService.t("no"),
+      "warning"
+    );
+    if (!confirmed) {
+      return false;
     }
 
-    clearSelections() {
-        this.selectedAll = false;
-        this.selectedType = null;
+    try {
+      this.actionPromise = this.sendService.deleteWithServer(s.id);
+      await this.actionPromise;
+
+      if (this.onSuccessfulDelete != null) {
+        this.onSuccessfulDelete();
+      } else {
+        // Default actions
+        this.platformUtilsService.showToast("success", null, this.i18nService.t("deletedSend"));
+        await this.refresh();
+      }
+    } catch (e) {
+      this.logService.error(e);
     }
-
-    private applyTextSearch() {
-        if (this.searchText != null) {
-            this.filteredSends = this.searchService.searchSends(this.filteredSends, this.searchText);
-        }
+    this.actionPromise = null;
+    return true;
+  }
+
+  copy(s: SendView) {
+    const sendLinkBaseUrl = this.environmentService.getSendUrl();
+    const link = sendLinkBaseUrl + s.accessId + "/" + s.urlB64Key;
+    this.platformUtilsService.copyToClipboard(link);
+    this.platformUtilsService.showToast(
+      "success",
+      null,
+      this.i18nService.t("valueCopied", this.i18nService.t("sendLink"))
+    );
+  }
+
+  searchTextChanged() {
+    this.search(200);
+  }
+
+  selectAll() {
+    this.clearSelections();
+    this.selectedAll = true;
+    this.applyFilter(null);
+  }
+
+  selectType(type: SendType) {
+    this.clearSelections();
+    this.selectedType = type;
+    this.applyFilter((s) => s.type === type);
+  }
+
+  clearSelections() {
+    this.selectedAll = false;
+    this.selectedType = null;
+  }
+
+  private applyTextSearch() {
+    if (this.searchText != null) {
+      this.filteredSends = this.searchService.searchSends(this.filteredSends, this.searchText);
     }
+  }
 }
diff --git a/jslib/angular/src/components/set-password.component.ts b/jslib/angular/src/components/set-password.component.ts
index c12e32e6..89f6e520 100644
--- a/jslib/angular/src/components/set-password.component.ts
+++ b/jslib/angular/src/components/set-password.component.ts
@@ -1,151 +1,186 @@
-import { Directive } from '@angular/core';
-import {
-    ActivatedRoute,
-    Router
-} from '@angular/router';
+import { Directive } from "@angular/core";
+import { ActivatedRoute, Router } from "@angular/router";
 
-import { first } from 'rxjs/operators';
+import { first } from "rxjs/operators";
 
-import { ApiService } from 'jslib-common/abstractions/api.service';
-import { CryptoService } from 'jslib-common/abstractions/crypto.service';
-import { I18nService } from 'jslib-common/abstractions/i18n.service';
-import { MessagingService } from 'jslib-common/abstractions/messaging.service';
-import { PasswordGenerationService } from 'jslib-common/abstractions/passwordGeneration.service';
-import { PlatformUtilsService } from 'jslib-common/abstractions/platformUtils.service';
-import { PolicyService } from 'jslib-common/abstractions/policy.service';
-import { SyncService } from 'jslib-common/abstractions/sync.service';
-import { UserService } from 'jslib-common/abstractions/user.service';
+import { ApiService } from "jslib-common/abstractions/api.service";
+import { CryptoService } from "jslib-common/abstractions/crypto.service";
+import { I18nService } from "jslib-common/abstractions/i18n.service";
+import { MessagingService } from "jslib-common/abstractions/messaging.service";
+import { PasswordGenerationService } from "jslib-common/abstractions/passwordGeneration.service";
+import { PlatformUtilsService } from "jslib-common/abstractions/platformUtils.service";
+import { PolicyService } from "jslib-common/abstractions/policy.service";
+import { StateService } from "jslib-common/abstractions/state.service";
+import { SyncService } from "jslib-common/abstractions/sync.service";
 
-import { EncString } from 'jslib-common/models/domain/encString';
-import { SymmetricCryptoKey } from 'jslib-common/models/domain/symmetricCryptoKey';
+import { EncString } from "jslib-common/models/domain/encString";
+import { SymmetricCryptoKey } from "jslib-common/models/domain/symmetricCryptoKey";
 
-import { KeysRequest } from 'jslib-common/models/request/keysRequest';
-import { OrganizationUserResetPasswordEnrollmentRequest } from 'jslib-common/models/request/organizationUserResetPasswordEnrollmentRequest';
-import { SetPasswordRequest } from 'jslib-common/models/request/setPasswordRequest';
+import { KeysRequest } from "jslib-common/models/request/keysRequest";
+import { OrganizationUserResetPasswordEnrollmentRequest } from "jslib-common/models/request/organizationUserResetPasswordEnrollmentRequest";
+import { SetPasswordRequest } from "jslib-common/models/request/setPasswordRequest";
 
-import { ChangePasswordComponent as BaseChangePasswordComponent } from './change-password.component';
+import { ChangePasswordComponent as BaseChangePasswordComponent } from "./change-password.component";
 
-import { HashPurpose } from 'jslib-common/enums/hashPurpose';
-import { KdfType } from 'jslib-common/enums/kdfType';
+import { HashPurpose } from "jslib-common/enums/hashPurpose";
+import { KdfType } from "jslib-common/enums/kdfType";
 
-import { Utils } from 'jslib-common/misc/utils';
+import { Utils } from "jslib-common/misc/utils";
 
 @Directive()
 export class SetPasswordComponent extends BaseChangePasswordComponent {
-    syncLoading: boolean = true;
-    showPassword: boolean = false;
-    hint: string = '';
-    identifier: string = null;
-    orgId: string;
-    resetPasswordAutoEnroll = false;
-
-    onSuccessfulChangePassword: () => Promise<any>;
-    successRoute = 'vault';
-
-    constructor(i18nService: I18nService, cryptoService: CryptoService, messagingService: MessagingService,
-        userService: UserService, passwordGenerationService: PasswordGenerationService,
-        platformUtilsService: PlatformUtilsService, policyService: PolicyService, protected router: Router,
-        private apiService: ApiService, private syncService: SyncService, private route: ActivatedRoute) {
-        super(i18nService, cryptoService, messagingService, userService, passwordGenerationService,
-            platformUtilsService, policyService);
+  syncLoading: boolean = true;
+  showPassword: boolean = false;
+  hint: string = "";
+  identifier: string = null;
+  orgId: string;
+  resetPasswordAutoEnroll = false;
+
+  onSuccessfulChangePassword: () => Promise<any>;
+  successRoute = "vault";
+
+  constructor(
+    i18nService: I18nService,
+    cryptoService: CryptoService,
+    messagingService: MessagingService,
+    passwordGenerationService: PasswordGenerationService,
+    platformUtilsService: PlatformUtilsService,
+    policyService: PolicyService,
+    protected router: Router,
+    private apiService: ApiService,
+    private syncService: SyncService,
+    private route: ActivatedRoute,
+    stateService: StateService
+  ) {
+    super(
+      i18nService,
+      cryptoService,
+      messagingService,
+      passwordGenerationService,
+      platformUtilsService,
+      policyService,
+      stateService
+    );
+  }
+
+  async ngOnInit() {
+    await this.syncService.fullSync(true);
+    this.syncLoading = false;
+
+    this.route.queryParams.pipe(first()).subscribe(async (qParams) => {
+      if (qParams.identifier != null) {
+        this.identifier = qParams.identifier;
+      }
+    });
+
+    // Automatic Enrollment Detection
+    if (this.identifier != null) {
+      try {
+        const response = await this.apiService.getOrganizationAutoEnrollStatus(this.identifier);
+        this.orgId = response.id;
+        this.resetPasswordAutoEnroll = response.resetPasswordEnabled;
+        this.enforcedPolicyOptions =
+          await this.policyService.getMasterPasswordPoliciesForInvitedUsers(this.orgId);
+      } catch {
+        this.platformUtilsService.showToast("error", null, this.i18nService.t("errorOccurred"));
+      }
     }
 
-    async ngOnInit() {
-        await this.syncService.fullSync(true);
-        this.syncLoading = false;
-
-        this.route.queryParams.pipe(first()).subscribe(async qParams => {
-            if (qParams.identifier != null) {
-                this.identifier = qParams.identifier;
+    super.ngOnInit();
+  }
+
+  async setupSubmitActions() {
+    this.kdf = KdfType.PBKDF2_SHA256;
+    const useLowerKdf = this.platformUtilsService.isIE();
+    this.kdfIterations = useLowerKdf ? 10000 : 100000;
+    return true;
+  }
+
+  async performSubmitActions(
+    masterPasswordHash: string,
+    key: SymmetricCryptoKey,
+    encKey: [SymmetricCryptoKey, EncString]
+  ) {
+    const keys = await this.cryptoService.makeKeyPair(encKey[0]);
+    const request = new SetPasswordRequest(
+      masterPasswordHash,
+      encKey[1].encryptedString,
+      this.hint,
+      this.kdf,
+      this.kdfIterations,
+      this.identifier,
+      new KeysRequest(keys[0], keys[1].encryptedString)
+    );
+    try {
+      if (this.resetPasswordAutoEnroll) {
+        this.formPromise = this.apiService
+          .setPassword(request)
+          .then(async () => {
+            await this.onSetPasswordSuccess(key, encKey, keys);
+            return this.apiService.getOrganizationKeys(this.orgId);
+          })
+          .then(async (response) => {
+            if (response == null) {
+              throw new Error(this.i18nService.t("resetPasswordOrgKeysError"));
             }
+            const userId = await this.stateService.getUserId();
+            const publicKey = Utils.fromB64ToArray(response.publicKey);
+
+            // RSA Encrypt user's encKey.key with organization public key
+            const userEncKey = await this.cryptoService.getEncKey();
+            const encryptedKey = await this.cryptoService.rsaEncrypt(
+              userEncKey.key,
+              publicKey.buffer
+            );
+
+            const resetRequest = new OrganizationUserResetPasswordEnrollmentRequest();
+            resetRequest.resetPasswordKey = encryptedKey.encryptedString;
+
+            return this.apiService.putOrganizationUserResetPasswordEnrollment(
+              this.orgId,
+              userId,
+              resetRequest
+            );
+          });
+      } else {
+        this.formPromise = this.apiService.setPassword(request).then(async () => {
+          await this.onSetPasswordSuccess(key, encKey, keys);
         });
+      }
 
-        // Automatic Enrollment Detection
-        if (this.identifier != null) {
-            try {
-                const response = await this.apiService.getOrganizationAutoEnrollStatus(this.identifier);
-                this.orgId = response.id;
-                this.resetPasswordAutoEnroll = response.resetPasswordEnabled;
-            } catch {
-                this.platformUtilsService.showToast('error', null, this.i18nService.t('errorOccurred'));
-            }
-        }
-
-        super.ngOnInit();
-    }
-
-    async setupSubmitActions() {
-        this.kdf = KdfType.PBKDF2_SHA256;
-        const useLowerKdf = this.platformUtilsService.isIE();
-        this.kdfIterations = useLowerKdf ? 10000 : 100000;
-        return true;
-    }
-
-    async performSubmitActions(masterPasswordHash: string, key: SymmetricCryptoKey,
-        encKey: [SymmetricCryptoKey, EncString]) {
-        const keys = await this.cryptoService.makeKeyPair(encKey[0]);
-        const request = new SetPasswordRequest(
-            masterPasswordHash,
-            encKey[1].encryptedString,
-            this.hint,
-            this.kdf,
-            this.kdfIterations,
-            this.identifier,
-            new KeysRequest(keys[0], keys[1].encryptedString)
-        );
-        try {
-            if (this.resetPasswordAutoEnroll) {
-                this.formPromise = this.apiService.setPassword(request).then(async () => {
-                    await this.onSetPasswordSuccess(key, encKey, keys);
-                    return this.apiService.getOrganizationKeys(this.orgId);
-                }).then(async response => {
-                    if (response == null) {
-                        throw new Error(this.i18nService.t('resetPasswordOrgKeysError'));
-                    }
-                    const userId = await this.userService.getUserId();
-                    const publicKey = Utils.fromB64ToArray(response.publicKey);
-
-                    // RSA Encrypt user's encKey.key with organization public key
-                    const userEncKey = await this.cryptoService.getEncKey();
-                    const encryptedKey = await this.cryptoService.rsaEncrypt(userEncKey.key, publicKey.buffer);
-
-                    const resetRequest = new OrganizationUserResetPasswordEnrollmentRequest();
-                    resetRequest.resetPasswordKey = encryptedKey.encryptedString;
-
-                    return this.apiService.putOrganizationUserResetPasswordEnrollment(this.orgId, userId, resetRequest);
-                });
-            } else {
-                this.formPromise = this.apiService.setPassword(request).then(async () => {
-                    await this.onSetPasswordSuccess(key, encKey, keys);
-                });
-            }
-
-            await this.formPromise;
-
-            if (this.onSuccessfulChangePassword != null) {
-                this.onSuccessfulChangePassword();
-            } else {
-                this.router.navigate([this.successRoute]);
-            }
-        } catch {
-            this.platformUtilsService.showToast('error', null, this.i18nService.t('errorOccurred'));
-        }
-    }
-
-    togglePassword(confirmField: boolean) {
-        this.showPassword = !this.showPassword;
-        document.getElementById(confirmField ? 'masterPasswordRetype' : 'masterPassword').focus();
-    }
-
-    private async onSetPasswordSuccess(key: SymmetricCryptoKey, encKey: [SymmetricCryptoKey, EncString], keys: [string, EncString]) {
-        await this.userService.setInformation(await this.userService.getUserId(), await this.userService.getEmail(),
-            this.kdf, this.kdfIterations);
-        await this.cryptoService.setKey(key);
-        await this.cryptoService.setEncKey(encKey[1].encryptedString);
-        await this.cryptoService.setEncPrivateKey(keys[1].encryptedString);
+      await this.formPromise;
 
-        const localKeyHash = await this.cryptoService.hashPassword(this.masterPassword, key,
-            HashPurpose.LocalAuthorization);
-        await this.cryptoService.setKeyHash(localKeyHash);
+      if (this.onSuccessfulChangePassword != null) {
+        this.onSuccessfulChangePassword();
+      } else {
+        this.router.navigate([this.successRoute]);
+      }
+    } catch {
+      this.platformUtilsService.showToast("error", null, this.i18nService.t("errorOccurred"));
     }
+  }
+
+  togglePassword(confirmField: boolean) {
+    this.showPassword = !this.showPassword;
+    document.getElementById(confirmField ? "masterPasswordRetype" : "masterPassword").focus();
+  }
+
+  private async onSetPasswordSuccess(
+    key: SymmetricCryptoKey,
+    encKey: [SymmetricCryptoKey, EncString],
+    keys: [string, EncString]
+  ) {
+    await this.stateService.setKdfType(this.kdf);
+    await this.stateService.setKdfIterations(this.kdfIterations);
+    await this.cryptoService.setKey(key);
+    await this.cryptoService.setEncKey(encKey[1].encryptedString);
+    await this.cryptoService.setEncPrivateKey(keys[1].encryptedString);
+
+    const localKeyHash = await this.cryptoService.hashPassword(
+      this.masterPassword,
+      key,
+      HashPurpose.LocalAuthorization
+    );
+    await this.cryptoService.setKeyHash(localKeyHash);
+  }
 }
diff --git a/jslib/angular/src/components/set-pin.component.ts b/jslib/angular/src/components/set-pin.component.ts
index d2cfae3a..bc1e804e 100644
--- a/jslib/angular/src/components/set-pin.component.ts
+++ b/jslib/angular/src/components/set-pin.component.ts
@@ -1,59 +1,55 @@
-import {
-    Directive,
-    OnInit
-} from '@angular/core';
+import { Directive, OnInit } from "@angular/core";
 
-import { CryptoService } from 'jslib-common/abstractions/crypto.service';
-import { KeyConnectorService } from 'jslib-common/abstractions/keyConnector.service';
-import { StorageService } from 'jslib-common/abstractions/storage.service';
-import { UserService } from 'jslib-common/abstractions/user.service';
-import { VaultTimeoutService } from 'jslib-common/abstractions/vaultTimeout.service';
+import { CryptoService } from "jslib-common/abstractions/crypto.service";
+import { KeyConnectorService } from "jslib-common/abstractions/keyConnector.service";
+import { StateService } from "jslib-common/abstractions/state.service";
 
-import { ConstantsService } from 'jslib-common/services/constants.service';
+import { Utils } from "jslib-common/misc/utils";
 
-import { Utils } from 'jslib-common/misc/utils';
-
-import { ModalRef } from './modal/modal.ref';
+import { ModalRef } from "./modal/modal.ref";
 
 @Directive()
 export class SetPinComponent implements OnInit {
-
-    pin = '';
-    showPin = false;
-    masterPassOnRestart = true;
-    showMasterPassOnRestart = true;
-
-    constructor(private modalRef: ModalRef, private cryptoService: CryptoService, private userService: UserService,
-        private storageService: StorageService, private vaultTimeoutService: VaultTimeoutService,
-        private keyConnectorService: KeyConnectorService) { }
-
-    async ngOnInit() {
-        this.showMasterPassOnRestart = this.masterPassOnRestart = !await this.keyConnectorService.getUsesKeyConnector();
+  pin = "";
+  showPin = false;
+  masterPassOnRestart = true;
+  showMasterPassOnRestart = true;
+
+  constructor(
+    private modalRef: ModalRef,
+    private cryptoService: CryptoService,
+    private keyConnectorService: KeyConnectorService,
+    private stateService: StateService
+  ) {}
+
+  async ngOnInit() {
+    this.showMasterPassOnRestart = this.masterPassOnRestart =
+      !(await this.keyConnectorService.getUsesKeyConnector());
+  }
+
+  toggleVisibility() {
+    this.showPin = !this.showPin;
+  }
+
+  async submit() {
+    if (Utils.isNullOrWhitespace(this.pin)) {
+      this.modalRef.close(false);
     }
 
-    toggleVisibility() {
-        this.showPin = !this.showPin;
+    const kdf = await this.stateService.getKdfType();
+    const kdfIterations = await this.stateService.getKdfIterations();
+    const email = await this.stateService.getEmail();
+    const pinKey = await this.cryptoService.makePinKey(this.pin, email, kdf, kdfIterations);
+    const key = await this.cryptoService.getKey();
+    const pinProtectedKey = await this.cryptoService.encrypt(key.key, pinKey);
+    if (this.masterPassOnRestart) {
+      const encPin = await this.cryptoService.encrypt(this.pin);
+      await this.stateService.setProtectedPin(encPin.encryptedString);
+      await this.stateService.setDecryptedPinProtected(pinProtectedKey);
+    } else {
+      await this.stateService.setEncryptedPinProtected(pinProtectedKey.encryptedString);
     }
 
-    async submit() {
-        if (Utils.isNullOrWhitespace(this.pin)) {
-            this.modalRef.close(false);
-        }
-
-        const kdf = await this.userService.getKdf();
-        const kdfIterations = await this.userService.getKdfIterations();
-        const email = await this.userService.getEmail();
-        const pinKey = await this.cryptoService.makePinKey(this.pin, email, kdf, kdfIterations);
-        const key = await this.cryptoService.getKey();
-        const pinProtectedKey = await this.cryptoService.encrypt(key.key, pinKey);
-        if (this.masterPassOnRestart) {
-            const encPin = await this.cryptoService.encrypt(this.pin);
-            await this.storageService.save(ConstantsService.protectedPin, encPin.encryptedString);
-            this.vaultTimeoutService.pinProtectedKey = pinProtectedKey;
-        } else {
-            await this.storageService.save(ConstantsService.pinProtectedKey, pinProtectedKey.encryptedString);
-        }
-
-        this.modalRef.close(true);
-    }
+    this.modalRef.close(true);
+  }
 }
diff --git a/jslib/angular/src/components/settings/vault-timeout-input.component.ts b/jslib/angular/src/components/settings/vault-timeout-input.component.ts
index 749e7595..2f63f97f 100644
--- a/jslib/angular/src/components/settings/vault-timeout-input.component.ts
+++ b/jslib/angular/src/components/settings/vault-timeout-input.component.ts
@@ -1,138 +1,140 @@
+import { Directive, Input, OnInit } from "@angular/core";
 import {
-    Directive,
-    Input,
-    OnInit,
-} from '@angular/core';
-import {
-    AbstractControl,
-    ControlValueAccessor,
-    FormBuilder,
-    ValidationErrors,
-    Validator
-} from '@angular/forms';
+  AbstractControl,
+  ControlValueAccessor,
+  FormBuilder,
+  ValidationErrors,
+  Validator,
+} from "@angular/forms";
 
-import { I18nService } from 'jslib-common/abstractions/i18n.service';
-import { PolicyService } from 'jslib-common/abstractions/policy.service';
+import { I18nService } from "jslib-common/abstractions/i18n.service";
+import { PolicyService } from "jslib-common/abstractions/policy.service";
 
-import { PolicyType } from 'jslib-common/enums/policyType';
-import { Policy } from 'jslib-common/models/domain/policy';
+import { PolicyType } from "jslib-common/enums/policyType";
+import { Policy } from "jslib-common/models/domain/policy";
 
 @Directive()
 export class VaultTimeoutInputComponent implements ControlValueAccessor, Validator, OnInit {
-
-    get showCustom() {
-        return this.form.get('vaultTimeout').value === VaultTimeoutInputComponent.CUSTOM_VALUE;
+  get showCustom() {
+    return this.form.get("vaultTimeout").value === VaultTimeoutInputComponent.CUSTOM_VALUE;
+  }
+
+  static CUSTOM_VALUE = -100;
+
+  form = this.formBuilder.group({
+    vaultTimeout: [null],
+    custom: this.formBuilder.group({
+      hours: [null],
+      minutes: [null],
+    }),
+  });
+
+  @Input() vaultTimeouts: { name: string; value: number }[];
+  vaultTimeoutPolicy: Policy;
+  vaultTimeoutPolicyHours: number;
+  vaultTimeoutPolicyMinutes: number;
+
+  private onChange: (vaultTimeout: number) => void;
+  private validatorChange: () => void;
+
+  constructor(
+    private formBuilder: FormBuilder,
+    private policyService: PolicyService,
+    private i18nService: I18nService
+  ) {}
+
+  async ngOnInit() {
+    if (await this.policyService.policyAppliesToUser(PolicyType.MaximumVaultTimeout)) {
+      const vaultTimeoutPolicy = await this.policyService.getAll(PolicyType.MaximumVaultTimeout);
+
+      this.vaultTimeoutPolicy = vaultTimeoutPolicy[0];
+      this.vaultTimeoutPolicyHours = Math.floor(this.vaultTimeoutPolicy.data.minutes / 60);
+      this.vaultTimeoutPolicyMinutes = this.vaultTimeoutPolicy.data.minutes % 60;
+
+      this.vaultTimeouts = this.vaultTimeouts.filter(
+        (t) =>
+          t.value <= this.vaultTimeoutPolicy.data.minutes &&
+          (t.value > 0 || t.value === VaultTimeoutInputComponent.CUSTOM_VALUE) &&
+          t.value != null
+      );
+      this.validatorChange();
     }
 
-    static CUSTOM_VALUE = -100;
-
-    form = this.fb.group({
-        vaultTimeout: [null],
-        custom: this.fb.group({
-            hours: [null],
-            minutes: [null],
-        }),
+    this.form.valueChanges.subscribe(async (value) => {
+      this.onChange(this.getVaultTimeout(value));
     });
 
-    @Input() vaultTimeouts: { name: string; value: number; }[];
-    vaultTimeoutPolicy: Policy;
-    vaultTimeoutPolicyHours: number;
-    vaultTimeoutPolicyMinutes: number;
-
-    private onChange: (vaultTimeout: number) => void;
-    private validatorChange: () => void;
-
-    constructor(private fb: FormBuilder, private policyService: PolicyService, private i18nService: I18nService) {
-    }
+    // Assign the previous value to the custom fields
+    this.form.get("vaultTimeout").valueChanges.subscribe((value) => {
+      if (value !== VaultTimeoutInputComponent.CUSTOM_VALUE) {
+        return;
+      }
+
+      const current = Math.max(this.form.value.vaultTimeout, 0);
+      this.form.patchValue({
+        custom: {
+          hours: Math.floor(current / 60),
+          minutes: current % 60,
+        },
+      });
+    });
+  }
 
-    async ngOnInit() {
-        if (await this.policyService.policyAppliesToUser(PolicyType.MaximumVaultTimeout)) {
-            const vaultTimeoutPolicy = await this.policyService.getAll(PolicyType.MaximumVaultTimeout);
-
-            this.vaultTimeoutPolicy = vaultTimeoutPolicy[0];
-            this.vaultTimeoutPolicyHours = Math.floor(this.vaultTimeoutPolicy.data.minutes / 60);
-            this.vaultTimeoutPolicyMinutes = this.vaultTimeoutPolicy.data.minutes % 60;
-
-            this.vaultTimeouts = this.vaultTimeouts.filter(t =>
-                t.value <= this.vaultTimeoutPolicy.data.minutes &&
-                (t.value > 0 || t.value === VaultTimeoutInputComponent.CUSTOM_VALUE) &&
-                t.value != null
-            );
-            this.validatorChange();
-        }
-
-        this.form.valueChanges.subscribe(async value => {
-            this.onChange(this.getVaultTimeout(value));
-        });
-
-        // Assign the previous value to the custom fields
-        this.form.get('vaultTimeout').valueChanges.subscribe(value => {
-            if (value !== VaultTimeoutInputComponent.CUSTOM_VALUE) {
-                return;
-            }
-
-            const current = Math.max(this.form.value.vaultTimeout, 0);
-            this.form.patchValue({
-                custom: {
-                    hours: Math.floor(current / 60),
-                    minutes: current % 60,
-                },
-            });
-        });
-    }
+  ngOnChanges() {
+    this.vaultTimeouts.push({
+      name: this.i18nService.t("custom"),
+      value: VaultTimeoutInputComponent.CUSTOM_VALUE,
+    });
+  }
 
-    ngOnChanges() {
-        this.vaultTimeouts.push({ name: this.i18nService.t('custom'), value: VaultTimeoutInputComponent.CUSTOM_VALUE });
+  getVaultTimeout(value: any) {
+    if (value.vaultTimeout !== VaultTimeoutInputComponent.CUSTOM_VALUE) {
+      return value.vaultTimeout;
     }
 
-    getVaultTimeout(value: any) {
-        if (value.vaultTimeout !== VaultTimeoutInputComponent.CUSTOM_VALUE) {
-            return value.vaultTimeout;
-        }
+    return value.custom.hours * 60 + value.custom.minutes;
+  }
 
-        return value.custom.hours * 60 + value.custom.minutes;
+  writeValue(value: number): void {
+    if (value == null) {
+      return;
     }
 
-    writeValue(value: number): void {
-        if (value == null) {
-            return;
-        }
-
-        if (this.vaultTimeouts.every(p => p.value !== value)) {
-            this.form.setValue({
-                vaultTimeout: VaultTimeoutInputComponent.CUSTOM_VALUE,
-                custom: {
-                    hours: Math.floor(value / 60),
-                    minutes: value % 60,
-                },
-            });
-            return;
-        }
-
-        this.form.patchValue({
-            vaultTimeout: value,
-        });
+    if (this.vaultTimeouts.every((p) => p.value !== value)) {
+      this.form.setValue({
+        vaultTimeout: VaultTimeoutInputComponent.CUSTOM_VALUE,
+        custom: {
+          hours: Math.floor(value / 60),
+          minutes: value % 60,
+        },
+      });
+      return;
     }
 
-    registerOnChange(onChange: any): void {
-        this.onChange = onChange;
-    }
+    this.form.patchValue({
+      vaultTimeout: value,
+    });
+  }
 
-    // tslint:disable-next-line
-    registerOnTouched(onTouched: any): void {}
+  registerOnChange(onChange: any): void {
+    this.onChange = onChange;
+  }
 
-    // tslint:disable-next-line
-    setDisabledState?(isDisabled: boolean): void { }
+  // tslint:disable-next-line
+  registerOnTouched(onTouched: any): void {}
 
-    validate(control: AbstractControl): ValidationErrors {
-        if (this.vaultTimeoutPolicy && this.vaultTimeoutPolicy?.data?.minutes < control.value) {
-            return { policyError: true };
-        }
+  // tslint:disable-next-line
+  setDisabledState?(isDisabled: boolean): void {}
 
-        return null;
+  validate(control: AbstractControl): ValidationErrors {
+    if (this.vaultTimeoutPolicy && this.vaultTimeoutPolicy?.data?.minutes < control.value) {
+      return { policyError: true };
     }
 
-    registerOnValidatorChange(fn: () => void): void {
-        this.validatorChange = fn;
-    }
+    return null;
+  }
+
+  registerOnValidatorChange(fn: () => void): void {
+    this.validatorChange = fn;
+  }
 }
diff --git a/jslib/angular/src/components/share.component.ts b/jslib/angular/src/components/share.component.ts
index e5badc37..6a13e0b2 100644
--- a/jslib/angular/src/components/share.component.ts
+++ b/jslib/angular/src/components/share.component.ts
@@ -1,108 +1,119 @@
-import {
-    Directive,
-    EventEmitter,
-    Input,
-    OnInit,
-    Output,
-} from '@angular/core';
+import { Directive, EventEmitter, Input, OnInit, Output } from "@angular/core";
 
-import { OrganizationUserStatusType } from 'jslib-common/enums/organizationUserStatusType';
+import { OrganizationUserStatusType } from "jslib-common/enums/organizationUserStatusType";
 
-import { CipherService } from 'jslib-common/abstractions/cipher.service';
-import { CollectionService } from 'jslib-common/abstractions/collection.service';
-import { I18nService } from 'jslib-common/abstractions/i18n.service';
-import { LogService } from 'jslib-common/abstractions/log.service';
-import { PlatformUtilsService } from 'jslib-common/abstractions/platformUtils.service';
-import { UserService } from 'jslib-common/abstractions/user.service';
+import { CipherService } from "jslib-common/abstractions/cipher.service";
+import { CollectionService } from "jslib-common/abstractions/collection.service";
+import { I18nService } from "jslib-common/abstractions/i18n.service";
+import { LogService } from "jslib-common/abstractions/log.service";
+import { OrganizationService } from "jslib-common/abstractions/organization.service";
+import { PlatformUtilsService } from "jslib-common/abstractions/platformUtils.service";
 
-import { Organization } from 'jslib-common/models/domain/organization';
-import { CipherView } from 'jslib-common/models/view/cipherView';
-import { CollectionView } from 'jslib-common/models/view/collectionView';
+import { Organization } from "jslib-common/models/domain/organization";
+import { CipherView } from "jslib-common/models/view/cipherView";
+import { CollectionView } from "jslib-common/models/view/collectionView";
 
-import { Utils } from 'jslib-common/misc/utils';
+import { Utils } from "jslib-common/misc/utils";
 
 @Directive()
 export class ShareComponent implements OnInit {
-    @Input() cipherId: string;
-    @Input() organizationId: string;
-    @Output() onSharedCipher = new EventEmitter();
-
-    formPromise: Promise<any>;
-    cipher: CipherView;
-    collections: CollectionView[] = [];
-    organizations: Organization[] = [];
-
-    protected writeableCollections: CollectionView[] = [];
-
-    constructor(protected collectionService: CollectionService, protected platformUtilsService: PlatformUtilsService,
-        protected i18nService: I18nService, protected userService: UserService,
-        protected cipherService: CipherService, private logService: LogService) { }
-
-    async ngOnInit() {
-        await this.load();
+  @Input() cipherId: string;
+  @Input() organizationId: string;
+  @Output() onSharedCipher = new EventEmitter();
+
+  formPromise: Promise<any>;
+  cipher: CipherView;
+  collections: CollectionView[] = [];
+  organizations: Organization[] = [];
+
+  protected writeableCollections: CollectionView[] = [];
+
+  constructor(
+    protected collectionService: CollectionService,
+    protected platformUtilsService: PlatformUtilsService,
+    protected i18nService: I18nService,
+    protected cipherService: CipherService,
+    private logService: LogService,
+    protected organizationService: OrganizationService
+  ) {}
+
+  async ngOnInit() {
+    await this.load();
+  }
+
+  async load() {
+    const allCollections = await this.collectionService.getAllDecrypted();
+    this.writeableCollections = allCollections.map((c) => c).filter((c) => !c.readOnly);
+    const orgs = await this.organizationService.getAll();
+    this.organizations = orgs
+      .sort(Utils.getSortFunction(this.i18nService, "name"))
+      .filter((o) => o.enabled && o.status === OrganizationUserStatusType.Confirmed);
+
+    const cipherDomain = await this.cipherService.get(this.cipherId);
+    this.cipher = await cipherDomain.decrypt();
+    if (this.organizationId == null && this.organizations.length > 0) {
+      this.organizationId = this.organizations[0].id;
     }
-
-    async load() {
-        const allCollections = await this.collectionService.getAllDecrypted();
-        this.writeableCollections = allCollections.map(c => c).filter(c => !c.readOnly);
-        const orgs = await this.userService.getAllOrganizations();
-        this.organizations = orgs.sort(Utils.getSortFunction(this.i18nService, 'name'))
-            .filter(o => o.enabled && o.status === OrganizationUserStatusType.Confirmed);
-
-        const cipherDomain = await this.cipherService.get(this.cipherId);
-        this.cipher = await cipherDomain.decrypt();
-        if (this.organizationId == null && this.organizations.length > 0) {
-            this.organizationId = this.organizations[0].id;
-        }
-        this.filterCollections();
+    this.filterCollections();
+  }
+
+  filterCollections() {
+    this.writeableCollections.forEach((c) => ((c as any).checked = false));
+    if (this.organizationId == null || this.writeableCollections.length === 0) {
+      this.collections = [];
+    } else {
+      this.collections = this.writeableCollections.filter(
+        (c) => c.organizationId === this.organizationId
+      );
     }
-
-    filterCollections() {
-        this.writeableCollections.forEach(c => (c as any).checked = false);
-        if (this.organizationId == null || this.writeableCollections.length === 0) {
-            this.collections = [];
-        } else {
-            this.collections = this.writeableCollections.filter(c => c.organizationId === this.organizationId);
-        }
+  }
+
+  async submit(): Promise<boolean> {
+    const selectedCollectionIds = this.collections
+      .filter((c) => !!(c as any).checked)
+      .map((c) => c.id);
+    if (selectedCollectionIds.length === 0) {
+      this.platformUtilsService.showToast(
+        "error",
+        this.i18nService.t("errorOccurred"),
+        this.i18nService.t("selectOneCollection")
+      );
+      return;
     }
 
-    async submit(): Promise<boolean> {
-        const selectedCollectionIds = this.collections
-            .filter(c => !!(c as any).checked)
-            .map(c => c.id);
-        if (selectedCollectionIds.length === 0) {
-            this.platformUtilsService.showToast('error', this.i18nService.t('errorOccurred'),
-                this.i18nService.t('selectOneCollection'));
-            return;
-        }
-
-        const cipherDomain = await this.cipherService.get(this.cipherId);
-        const cipherView = await cipherDomain.decrypt();
-        const orgName = this.organizations.find(o => o.id === this.organizationId)?.name ?? this.i18nService.t('organization');
-
-        try {
-            this.formPromise = this.cipherService.shareWithServer(cipherView, this.organizationId,
-                selectedCollectionIds).then(async () => {
-                    this.onSharedCipher.emit();
-                    this.platformUtilsService.showToast('success', null,
-                        this.i18nService.t('movedItemToOrg', cipherView.name, orgName));
-                });
-            await this.formPromise;
-            return true;
-        } catch (e) {
-            this.logService.error(e);
-        }
-        return false;
+    const cipherDomain = await this.cipherService.get(this.cipherId);
+    const cipherView = await cipherDomain.decrypt();
+    const orgName =
+      this.organizations.find((o) => o.id === this.organizationId)?.name ??
+      this.i18nService.t("organization");
+
+    try {
+      this.formPromise = this.cipherService
+        .shareWithServer(cipherView, this.organizationId, selectedCollectionIds)
+        .then(async () => {
+          this.onSharedCipher.emit();
+          this.platformUtilsService.showToast(
+            "success",
+            null,
+            this.i18nService.t("movedItemToOrg", cipherView.name, orgName)
+          );
+        });
+      await this.formPromise;
+      return true;
+    } catch (e) {
+      this.logService.error(e);
     }
-
-    get canSave() {
-        if (this.collections != null) {
-            for (let i = 0; i < this.collections.length; i++) {
-                if ((this.collections[i] as any).checked) {
-                    return true;
-                }
-            }
+    return false;
+  }
+
+  get canSave() {
+    if (this.collections != null) {
+      for (let i = 0; i < this.collections.length; i++) {
+        if ((this.collections[i] as any).checked) {
+          return true;
         }
-        return false;
+      }
     }
+    return false;
+  }
 }
diff --git a/jslib/angular/src/components/sso.component.ts b/jslib/angular/src/components/sso.component.ts
index 1ab8e2f4..b3628863 100644
--- a/jslib/angular/src/components/sso.component.ts
+++ b/jslib/angular/src/components/sso.component.ts
@@ -1,214 +1,263 @@
-import { Directive } from '@angular/core';
-import {
-    ActivatedRoute,
-    Router,
-} from '@angular/router';
+import { Directive } from "@angular/core";
+import { ActivatedRoute, Router } from "@angular/router";
 
-import { first } from 'rxjs/operators';
+import { first } from "rxjs/operators";
 
-import { ApiService } from 'jslib-common/abstractions/api.service';
-import { AuthService } from 'jslib-common/abstractions/auth.service';
-import { CryptoFunctionService } from 'jslib-common/abstractions/cryptoFunction.service';
-import { EnvironmentService } from 'jslib-common/abstractions/environment.service';
-import { I18nService } from 'jslib-common/abstractions/i18n.service';
-import { LogService } from 'jslib-common/abstractions/log.service';
-import { PasswordGenerationService } from 'jslib-common/abstractions/passwordGeneration.service';
-import { PlatformUtilsService } from 'jslib-common/abstractions/platformUtils.service';
-import { StateService } from 'jslib-common/abstractions/state.service';
-import { StorageService } from 'jslib-common/abstractions/storage.service';
+import { ApiService } from "jslib-common/abstractions/api.service";
+import { AuthService } from "jslib-common/abstractions/auth.service";
+import { CryptoFunctionService } from "jslib-common/abstractions/cryptoFunction.service";
+import { EnvironmentService } from "jslib-common/abstractions/environment.service";
+import { I18nService } from "jslib-common/abstractions/i18n.service";
+import { LogService } from "jslib-common/abstractions/log.service";
+import { PasswordGenerationService } from "jslib-common/abstractions/passwordGeneration.service";
+import { PlatformUtilsService } from "jslib-common/abstractions/platformUtils.service";
+import { StateService } from "jslib-common/abstractions/state.service";
 
-import { ConstantsService } from 'jslib-common/services/constants.service';
+import { Utils } from "jslib-common/misc/utils";
 
-import { Utils } from 'jslib-common/misc/utils';
+import { AuthResult } from "jslib-common/models/domain/authResult";
 
-import { AuthResult } from 'jslib-common/models/domain/authResult';
+import { switchMap } from 'rxjs/operators';
 
 @Directive()
 export class SsoComponent {
-    identifier: string;
-    loggingIn = false;
-
-    formPromise: Promise<AuthResult>;
-    initiateSsoFormPromise: Promise<any>;
-    onSuccessfulLogin: () => Promise<any>;
-    onSuccessfulLoginNavigate: () => Promise<any>;
-    onSuccessfulLoginTwoFactorNavigate: () => Promise<any>;
-    onSuccessfulLoginChangePasswordNavigate: () => Promise<any>;
-    onSuccessfulLoginForceResetNavigate: () => Promise<any>;
-
-    protected twoFactorRoute = '2fa';
-    protected successRoute = 'lock';
-    protected changePasswordRoute = 'set-password';
-    protected forcePasswordResetRoute = 'update-temp-password';
-    protected clientId: string;
-    protected redirectUri: string;
-    protected state: string;
-    protected codeChallenge: string;
-
-    constructor(protected authService: AuthService, protected router: Router,
-        protected i18nService: I18nService, protected route: ActivatedRoute,
-        protected storageService: StorageService, protected stateService: StateService,
-        protected platformUtilsService: PlatformUtilsService, protected apiService: ApiService,
-        protected cryptoFunctionService: CryptoFunctionService, protected environmentService: EnvironmentService,
-        protected passwordGenerationService: PasswordGenerationService, protected logService: LogService) { }
-
-    async ngOnInit() {
-        this.route.queryParams.pipe(first()).subscribe(async qParams => {
-            if (qParams.code != null && qParams.state != null) {
-                const codeVerifier = await this.storageService.get<string>(ConstantsService.ssoCodeVerifierKey);
-                const state = await this.storageService.get<string>(ConstantsService.ssoStateKey);
-                await this.storageService.remove(ConstantsService.ssoCodeVerifierKey);
-                await this.storageService.remove(ConstantsService.ssoStateKey);
-                if (qParams.code != null && codeVerifier != null && state != null && this.checkState(state, qParams.state)) {
-                    await this.logIn(qParams.code, codeVerifier, this.getOrgIdentifierFromState(qParams.state));
-                }
-            } else if (qParams.clientId != null && qParams.redirectUri != null && qParams.state != null &&
-                qParams.codeChallenge != null) {
-                this.redirectUri = qParams.redirectUri;
-                this.state = qParams.state;
-                this.codeChallenge = qParams.codeChallenge;
-                this.clientId = qParams.clientId;
-            }
-        });
-    }
+  identifier: string;
+  loggingIn = false;
+
+  formPromise: Promise<AuthResult>;
+  initiateSsoFormPromise: Promise<any>;
+  onSuccessfulLogin: () => Promise<any>;
+  onSuccessfulLoginNavigate: () => Promise<any>;
+  onSuccessfulLoginTwoFactorNavigate: () => Promise<any>;
+  onSuccessfulLoginChangePasswordNavigate: () => Promise<any>;
+  onSuccessfulLoginForceResetNavigate: () => Promise<any>;
+
+  protected twoFactorRoute = "2fa";
+  protected successRoute = "lock";
+  protected changePasswordRoute = "set-password";
+  protected forcePasswordResetRoute = "update-temp-password";
+  protected clientId: string;
+  protected redirectUri: string;
+  protected state: string;
+  protected codeChallenge: string;
 
-    async submit(returnUri?: string, includeUserIdentifier?: boolean) {
-        this.initiateSsoFormPromise = this.preValidate();
-        if (await this.initiateSsoFormPromise) {
-            const authorizeUrl = await this.buildAuthorizeUrl(returnUri, includeUserIdentifier);
-            this.platformUtilsService.launchUri(authorizeUrl, { sameWindow: true });
+  constructor(
+    protected authService: AuthService,
+    protected router: Router,
+    protected i18nService: I18nService,
+    protected route: ActivatedRoute,
+    protected stateService: StateService,
+    protected platformUtilsService: PlatformUtilsService,
+    protected apiService: ApiService,
+    protected cryptoFunctionService: CryptoFunctionService,
+    protected environmentService: EnvironmentService,
+    protected passwordGenerationService: PasswordGenerationService,
+    protected logService: LogService
+  ) {}
+
+  async ngOnInit() {
+    this.route.queryParams.pipe(first()).subscribe(async (qParams) => {
+        // I have no idea why the qParams is empty here - I've hacked in an alternative very messily, but it works.
+        const workingParams = (new URL(window.location.href)).searchParams;
+        const workingSwap = {
+            code: workingParams.get('code'),
+            state: workingParams.get('state'),
+        };
+        if (workingSwap.code != null && workingSwap.state != null) {
+        const codeVerifier = await this.stateService.getSsoCodeVerifier();
+        const state = await this.stateService.getSsoState();
+        await this.stateService.setSsoCodeVerifier(null);
+        await this.stateService.setSsoState(null);
+        if (
+          workingSwap.code != null &&
+          codeVerifier != null &&
+          state != null &&
+          this.checkState(state, workingSwap.state)
+        ) {
+          await this.logIn(
+            workingSwap.code,
+            codeVerifier,
+            this.getOrgIdentifierFromState(workingSwap.state)
+          );
         }
+      } else if (
+        qParams.clientId != null &&
+        qParams.redirectUri != null &&
+        qParams.state != null &&
+        qParams.codeChallenge != null
+      ) {
+        this.redirectUri = qParams.redirectUri;
+        this.state = qParams.state;
+        this.codeChallenge = qParams.codeChallenge;
+        this.clientId = qParams.clientId;
+      }
+    });
+  }
+
+  async submit(returnUri?: string, includeUserIdentifier?: boolean) {
+    this.initiateSsoFormPromise = this.preValidate();
+    if (await this.initiateSsoFormPromise) {
+      const authorizeUrl = await this.buildAuthorizeUrl(returnUri, includeUserIdentifier);
+      this.platformUtilsService.launchUri(authorizeUrl, { sameWindow: true });
     }
+  }
 
-    async preValidate(): Promise<boolean> {
-        if (this.identifier == null || this.identifier === '') {
-            this.platformUtilsService.showToast('error', this.i18nService.t('ssoValidationFailed'),
-                this.i18nService.t('ssoIdentifierRequired'));
-            return false;
-        }
-        return await this.apiService.preValidateSso(this.identifier);
+  async preValidate(): Promise<boolean> {
+    if (this.identifier == null || this.identifier === "") {
+      this.platformUtilsService.showToast(
+        "error",
+        this.i18nService.t("ssoValidationFailed"),
+        this.i18nService.t("ssoIdentifierRequired")
+      );
+      return false;
     }
+    return await this.apiService.preValidateSso(this.identifier);
+  }
 
-    protected async buildAuthorizeUrl(returnUri?: string, includeUserIdentifier?: boolean): Promise<string> {
-        let codeChallenge = this.codeChallenge;
-        let state = this.state;
-
-        const passwordOptions: any = {
-            type: 'password',
-            length: 64,
-            uppercase: true,
-            lowercase: true,
-            numbers: true,
-            special: false,
-        };
+  protected async buildAuthorizeUrl(
+    returnUri?: string,
+    includeUserIdentifier?: boolean
+  ): Promise<string> {
+    let codeChallenge = this.codeChallenge;
+    let state = this.state;
 
-        if (codeChallenge == null) {
-            const codeVerifier = await this.passwordGenerationService.generatePassword(passwordOptions);
-            const codeVerifierHash = await this.cryptoFunctionService.hash(codeVerifier, 'sha256');
-            codeChallenge = Utils.fromBufferToUrlB64(codeVerifierHash);
-            await this.storageService.save(ConstantsService.ssoCodeVerifierKey, codeVerifier);
-        }
+    const passwordOptions: any = {
+      type: "password",
+      length: 64,
+      uppercase: true,
+      lowercase: true,
+      numbers: true,
+      special: false,
+    };
 
-        if (state == null) {
-            state = await this.passwordGenerationService.generatePassword(passwordOptions);
-            if (returnUri) {
-                state += `_returnUri='${returnUri}'`;
-            }
-        }
+    if (codeChallenge == null) {
+      const codeVerifier = await this.passwordGenerationService.generatePassword(passwordOptions);
+      const codeVerifierHash = await this.cryptoFunctionService.hash(codeVerifier, "sha256");
+      codeChallenge = Utils.fromBufferToUrlB64(codeVerifierHash);
+      await this.stateService.setSsoCodeVerifier(codeVerifier);
+    }
 
-        // Add Organization Identifier to state
-        state += `_identifier=${this.identifier}`;
+    if (state == null) {
+      state = await this.passwordGenerationService.generatePassword(passwordOptions);
+      if (returnUri) {
+        state += `_returnUri='${returnUri}'`;
+      }
+    }
 
-        // Save state (regardless of new or existing)
-        await this.storageService.save(ConstantsService.ssoStateKey, state);
+    // Add Organization Identifier to state
+    state += `_identifier=${this.identifier}`;
 
-        let authorizeUrl = this.environmentService.getIdentityUrl() + '/connect/authorize?' +
-            'client_id=' + this.clientId + '&redirect_uri=' + encodeURIComponent(this.redirectUri) + '&' +
-            'response_type=code&scope=api offline_access&' +
-            'state=' + state + '&code_challenge=' + codeChallenge + '&' +
-            'code_challenge_method=S256&response_mode=query&' +
-            'domain_hint=' + encodeURIComponent(this.identifier);
+    // Save state (regardless of new or existing)
+    await this.stateService.setSsoState(state);
 
-        if (includeUserIdentifier) {
-            const userIdentifier = await this.apiService.getSsoUserIdentifier();
-            authorizeUrl += `&user_identifier=${encodeURIComponent(userIdentifier)}`;
-        }
+    let authorizeUrl =
+      this.environmentService.getIdentityUrl() +
+      "/connect/authorize?" +
+      "client_id=" +
+      this.clientId +
+      "&redirect_uri=" +
+      encodeURIComponent(this.redirectUri) +
+      "&" +
+      "response_type=code&scope=api offline_access&" +
+      "state=" +
+      // TODO needed to be encodeURIComponent'ed for me in previous version
+      state +
+      "&code_challenge=" +
+      codeChallenge +
+      "&" +
+      "code_challenge_method=S256&response_mode=query&" +
+      "domain_hint=" +
+      encodeURIComponent(this.identifier);
 
-        return authorizeUrl;
+    if (includeUserIdentifier) {
+      const userIdentifier = await this.apiService.getSsoUserIdentifier();
+      authorizeUrl += `&user_identifier=${encodeURIComponent(userIdentifier)}`;
     }
 
-    private async logIn(code: string, codeVerifier: string, orgIdFromState: string) {
-        this.loggingIn = true;
-        try {
-            this.formPromise = this.authService.logInSso(code, codeVerifier, this.redirectUri, orgIdFromState);
-            const response = await this.formPromise;
-            if (response.twoFactor) {
-                if (this.onSuccessfulLoginTwoFactorNavigate != null) {
-                    this.onSuccessfulLoginTwoFactorNavigate();
-                } else {
-                    this.router.navigate([this.twoFactorRoute], {
-                        queryParams: {
-                            identifier: orgIdFromState,
-                            sso: 'true',
-                        },
-                    });
-                }
-            } else if (response.resetMasterPassword) {
-                if (this.onSuccessfulLoginChangePasswordNavigate != null) {
-                    this.onSuccessfulLoginChangePasswordNavigate();
-                } else {
-                    this.router.navigate([this.changePasswordRoute], {
-                        queryParams: {
-                            identifier: orgIdFromState,
-                        },
-                    });
-                }
-            } else if (response.forcePasswordReset) {
-                if (this.onSuccessfulLoginForceResetNavigate != null) {
-                    this.onSuccessfulLoginForceResetNavigate();
-                } else {
-                    this.router.navigate([this.forcePasswordResetRoute]);
-                }
-            } else {
-                const disableFavicon = await this.storageService.get<boolean>(ConstantsService.disableFaviconKey);
-                await this.stateService.save(ConstantsService.disableFaviconKey, !!disableFavicon);
-                if (this.onSuccessfulLogin != null) {
-                    this.onSuccessfulLogin();
-                }
-                if (this.onSuccessfulLoginNavigate != null) {
-                    this.onSuccessfulLoginNavigate();
-                } else {
-                    this.router.navigate([this.successRoute]);
-                }
-            }
-        } catch (e) {
-            this.logService.error(e);
-            if (e.message === 'Unable to reach key connector') {
-                this.platformUtilsService.showToast('error', null, this.i18nService.t('ssoKeyConnectorUnavailable'));
-            }
-        }
-        this.loggingIn = false;
-    }
+    return authorizeUrl;
+  }
 
-    private getOrgIdentifierFromState(state: string): string {
-        if (state === null || state === undefined) {
-            return null;
+  private async logIn(code: string, codeVerifier: string, orgIdFromState: string) {
+    this.loggingIn = true;
+    try {
+      this.formPromise = this.authService.logInSso(
+        code,
+        codeVerifier,
+        this.redirectUri,
+        orgIdFromState
+      );
+      const response = await this.formPromise;
+      if (response.twoFactor) {
+        if (this.onSuccessfulLoginTwoFactorNavigate != null) {
+          this.onSuccessfulLoginTwoFactorNavigate();
+        } else {
+          this.router.navigate([this.twoFactorRoute], {
+            queryParams: {
+              identifier: orgIdFromState,
+              sso: "true",
+            },
+          });
+        }
+      } else if (response.resetMasterPassword) {
+        if (this.onSuccessfulLoginChangePasswordNavigate != null) {
+          this.onSuccessfulLoginChangePasswordNavigate();
+        } else {
+          this.router.navigate([this.changePasswordRoute], {
+            queryParams: {
+              identifier: orgIdFromState,
+            },
+          });
+        }
+      } else if (response.forcePasswordReset) {
+        if (this.onSuccessfulLoginForceResetNavigate != null) {
+          this.onSuccessfulLoginForceResetNavigate();
+        } else {
+          this.router.navigate([this.forcePasswordResetRoute]);
+        }
+      } else {
+        const disableFavicon = await this.stateService.getDisableFavicon();
+        await this.stateService.setDisableFavicon(!!disableFavicon);
+        if (this.onSuccessfulLogin != null) {
+          this.onSuccessfulLogin();
         }
+        if (this.onSuccessfulLoginNavigate != null) {
+          this.onSuccessfulLoginNavigate();
+        } else {
+          this.router.navigate([this.successRoute]);
+        }
+      }
+    } catch (e) {
+      this.logService.error(e);
+      if (e.message === "Unable to reach key connector") {
+        this.platformUtilsService.showToast(
+          "error",
+          null,
+          this.i18nService.t("ssoKeyConnectorUnavailable")
+        );
+      }
+    }
+    this.loggingIn = false;
+  }
 
-        const stateSplit = state.split('_identifier=');
-        return stateSplit.length > 1 ? stateSplit[1] : null;
+  private getOrgIdentifierFromState(state: string): string {
+    if (state === null || state === undefined) {
+      return null;
     }
 
-    private checkState(state: string, checkState: string): boolean {
-        if (state === null || state === undefined) {
-            return false;
-        }
-        if (checkState === null || checkState === undefined) {
-            return false;
-        }
+    const stateSplit = state.split("_identifier=");
+    return stateSplit.length > 1 ? stateSplit[1] : null;
+  }
 
-        const stateSplit = state.split('_identifier=');
-        const checkStateSplit = checkState.split('_identifier=');
-        return stateSplit[0] === checkStateSplit[0];
+  private checkState(state: string, checkState: string): boolean {
+    if (state === null || state === undefined) {
+      return false;
+    }
+    if (checkState === null || checkState === undefined) {
+      return false;
     }
+
+    const stateSplit = state.split("_identifier=");
+    const checkStateSplit = checkState.split("_identifier=");
+    return stateSplit[0] === checkStateSplit[0];
+  }
 }
diff --git a/jslib/angular/src/components/toastr.component.ts b/jslib/angular/src/components/toastr.component.ts
new file mode 100644
index 00000000..0e4ea4ea
--- /dev/null
+++ b/jslib/angular/src/components/toastr.component.ts
@@ -0,0 +1,95 @@
+import { animate, state, style, transition, trigger } from "@angular/animations";
+import { CommonModule } from "@angular/common";
+import { Component, ModuleWithProviders, NgModule } from "@angular/core";
+import {
+  DefaultNoComponentGlobalConfig,
+  GlobalConfig,
+  Toast as BaseToast,
+  ToastPackage,
+  ToastrService,
+  TOAST_CONFIG,
+} from "ngx-toastr";
+
+@Component({
+  selector: "[toast-component2]",
+  template: `
+    <button
+      *ngIf="options.closeButton"
+      (click)="remove()"
+      type="button"
+      class="toast-close-button"
+      aria-label="Close"
+    >
+      <span aria-hidden="true">&times;</span>
+    </button>
+    <div class="icon">
+      <i></i>
+    </div>
+    <div>
+      <div *ngIf="title" [class]="options.titleClass" [attr.aria-label]="title">
+        {{ title }} <ng-container *ngIf="duplicatesCount">[{{ duplicatesCount + 1 }}]</ng-container>
+      </div>
+      <div
+        *ngIf="message && options.enableHtml"
+        role="alertdialog"
+        aria-live="polite"
+        [class]="options.messageClass"
+        [innerHTML]="message"
+      ></div>
+      <div
+        *ngIf="message && !options.enableHtml"
+        role="alertdialog"
+        aria-live="polite"
+        [class]="options.messageClass"
+        [attr.aria-label]="message"
+      >
+        {{ message }}
+      </div>
+    </div>
+    <div *ngIf="options.progressBar">
+      <div class="toast-progress" [style.width]="width + '%'"></div>
+    </div>
+  `,
+  animations: [
+    trigger("flyInOut", [
+      state("inactive", style({ opacity: 0 })),
+      state("active", style({ opacity: 1 })),
+      state("removed", style({ opacity: 0 })),
+      transition("inactive => active", animate("{{ easeTime }}ms {{ easing }}")),
+      transition("active => removed", animate("{{ easeTime }}ms {{ easing }}")),
+    ]),
+  ],
+  preserveWhitespaces: false,
+})
+export class BitwardenToast extends BaseToast {
+  constructor(protected toastrService: ToastrService, public toastPackage: ToastPackage) {
+    super(toastrService, toastPackage);
+  }
+}
+
+export const BitwardenToastGlobalConfig: GlobalConfig = {
+  ...DefaultNoComponentGlobalConfig,
+  toastComponent: BitwardenToast,
+};
+
+@NgModule({
+  imports: [CommonModule],
+  declarations: [BitwardenToast],
+  exports: [BitwardenToast],
+})
+export class BitwardenToastModule {
+  static forRoot(config: Partial<GlobalConfig> = {}): ModuleWithProviders<BitwardenToastModule> {
+    return {
+      ngModule: BitwardenToastModule,
+      providers: [
+        {
+          provide: TOAST_CONFIG,
+          useValue: {
+            default: BitwardenToastGlobalConfig,
+            config: config,
+          },
+        },
+      ],
+    };
+  }
+}
diff --git a/jslib/angular/src/components/two-factor-options.component.ts b/jslib/angular/src/components/two-factor-options.component.ts
index 5f817a9e..4909757f 100644
--- a/jslib/angular/src/components/two-factor-options.component.ts
+++ b/jslib/angular/src/components/two-factor-options.component.ts
@@ -1,38 +1,37 @@
-import {
-    Directive,
-    EventEmitter,
-    OnInit,
-    Output,
-} from '@angular/core';
-import { Router } from '@angular/router';
+import { Directive, EventEmitter, OnInit, Output } from "@angular/core";
+import { Router } from "@angular/router";
 
-import { TwoFactorProviderType } from 'jslib-common/enums/twoFactorProviderType';
+import { TwoFactorProviderType } from "jslib-common/enums/twoFactorProviderType";
 
-import { AuthService } from 'jslib-common/abstractions/auth.service';
-import { I18nService } from 'jslib-common/abstractions/i18n.service';
-import { PlatformUtilsService } from 'jslib-common/abstractions/platformUtils.service';
+import { AuthService } from "jslib-common/abstractions/auth.service";
+import { I18nService } from "jslib-common/abstractions/i18n.service";
+import { PlatformUtilsService } from "jslib-common/abstractions/platformUtils.service";
 
 @Directive()
 export class TwoFactorOptionsComponent implements OnInit {
-    @Output() onProviderSelected = new EventEmitter<TwoFactorProviderType>();
-    @Output() onRecoverSelected = new EventEmitter();
-
-    providers: any[] = [];
-
-    constructor(protected authService: AuthService, protected router: Router,
-        protected i18nService: I18nService, protected platformUtilsService: PlatformUtilsService,
-        protected win: Window) { }
-
-    ngOnInit() {
-        this.providers = this.authService.getSupportedTwoFactorProviders(this.win);
-    }
-
-    choose(p: any) {
-        this.onProviderSelected.emit(p.type);
-    }
-
-    recover() {
-        this.platformUtilsService.launchUri('https://help.bitwarden.com/article/lost-two-step-device/');
-        this.onRecoverSelected.emit();
-    }
+  @Output() onProviderSelected = new EventEmitter<TwoFactorProviderType>();
+  @Output() onRecoverSelected = new EventEmitter();
+
+  providers: any[] = [];
+
+  constructor(
+    protected authService: AuthService,
+    protected router: Router,
+    protected i18nService: I18nService,
+    protected platformUtilsService: PlatformUtilsService,
+    protected win: Window
+  ) {}
+
+  ngOnInit() {
+    this.providers = this.authService.getSupportedTwoFactorProviders(this.win);
+  }
+
+  choose(p: any) {
+    this.onProviderSelected.emit(p.type);
+  }
+
+  recover() {
+    this.platformUtilsService.launchUri("https://help.bitwarden.com/article/lost-two-step-device/");
+    this.onRecoverSelected.emit();
+  }
 }
diff --git a/jslib/angular/src/components/two-factor.component.ts b/jslib/angular/src/components/two-factor.component.ts
index 5ad45a25..f3813a96 100644
--- a/jslib/angular/src/components/two-factor.component.ts
+++ b/jslib/angular/src/components/two-factor.component.ts
@@ -1,254 +1,280 @@
-import { Directive, OnDestroy, OnInit } from '@angular/core';
+import { Directive, OnDestroy, OnInit } from "@angular/core";
 
-import {
-    ActivatedRoute,
-    Router,
-} from '@angular/router';
+import { ActivatedRoute, Router } from "@angular/router";
 
-import { first } from 'rxjs/operators';
+import { first } from "rxjs/operators";
 
-import { TwoFactorProviderType } from 'jslib-common/enums/twoFactorProviderType';
+import { TwoFactorProviderType } from "jslib-common/enums/twoFactorProviderType";
 
-import { TwoFactorEmailRequest } from 'jslib-common/models/request/twoFactorEmailRequest';
+import { TwoFactorEmailRequest } from "jslib-common/models/request/twoFactorEmailRequest";
 
-import { AuthResult } from 'jslib-common/models/domain/authResult';
+import { AuthResult } from "jslib-common/models/domain/authResult";
 
-import { ApiService } from 'jslib-common/abstractions/api.service';
-import { AuthService } from 'jslib-common/abstractions/auth.service';
-import { EnvironmentService } from 'jslib-common/abstractions/environment.service';
-import { I18nService } from 'jslib-common/abstractions/i18n.service';
-import { LogService } from 'jslib-common/abstractions/log.service';
-import { PlatformUtilsService } from 'jslib-common/abstractions/platformUtils.service';
-import { StateService } from 'jslib-common/abstractions/state.service';
-import { StorageService } from 'jslib-common/abstractions/storage.service';
+import { ApiService } from "jslib-common/abstractions/api.service";
+import { AuthService } from "jslib-common/abstractions/auth.service";
+import { EnvironmentService } from "jslib-common/abstractions/environment.service";
+import { I18nService } from "jslib-common/abstractions/i18n.service";
+import { LogService } from "jslib-common/abstractions/log.service";
+import { PlatformUtilsService } from "jslib-common/abstractions/platformUtils.service";
+import { StateService } from "jslib-common/abstractions/state.service";
 
-import { TwoFactorProviders } from 'jslib-common/services/auth.service';
-import { ConstantsService } from 'jslib-common/services/constants.service';
+import { TwoFactorProviders } from "jslib-common/services/auth.service";
 
-import * as DuoWebSDK from 'duo_web_sdk';
-import { WebAuthnIFrame } from 'jslib-common/misc/webauthn_iframe';
+import * as DuoWebSDK from "duo_web_sdk";
+import { WebAuthnIFrame } from "jslib-common/misc/webauthn_iframe";
 
 @Directive()
 export class TwoFactorComponent implements OnInit, OnDestroy {
-    token: string = '';
-    remember: boolean = false;
-    webAuthnReady: boolean = false;
-    webAuthnNewTab: boolean = false;
-    providers = TwoFactorProviders;
-    providerType = TwoFactorProviderType;
-    selectedProviderType: TwoFactorProviderType = TwoFactorProviderType.Authenticator;
-    webAuthnSupported: boolean = false;
-    webAuthn: WebAuthnIFrame = null;
-    title: string = '';
-    twoFactorEmail: string = null;
-    formPromise: Promise<any>;
-    emailPromise: Promise<any>;
-    identifier: string = null;
-    onSuccessfulLogin: () => Promise<any>;
-    onSuccessfulLoginNavigate: () => Promise<any>;
-
-    get webAuthnAllow(): string {
-        return `publickey-credentials-get ${this.environmentService.getWebVaultUrl()}`;
-    }
-
-    protected loginRoute = 'login';
-    protected successRoute = 'vault';
-
-    constructor(protected authService: AuthService, protected router: Router,
-        protected i18nService: I18nService, protected apiService: ApiService,
-        protected platformUtilsService: PlatformUtilsService, protected win: Window,
-        protected environmentService: EnvironmentService, protected stateService: StateService,
-        protected storageService: StorageService, protected route: ActivatedRoute,
-        protected logService: LogService) {
-        this.webAuthnSupported = this.platformUtilsService.supportsWebAuthn(win);
-    }
-
-    async ngOnInit() {
-        if (!this.authing || this.authService.twoFactorProvidersData == null) {
-            this.router.navigate([this.loginRoute]);
-            return;
-        }
+  token: string = "";
+  remember: boolean = false;
+  webAuthnReady: boolean = false;
+  webAuthnNewTab: boolean = false;
+  providers = TwoFactorProviders;
+  providerType = TwoFactorProviderType;
+  selectedProviderType: TwoFactorProviderType = TwoFactorProviderType.Authenticator;
+  webAuthnSupported: boolean = false;
+  webAuthn: WebAuthnIFrame = null;
+  title: string = "";
+  twoFactorEmail: string = null;
+  formPromise: Promise<any>;
+  emailPromise: Promise<any>;
+  identifier: string = null;
+  onSuccessfulLogin: () => Promise<any>;
+  onSuccessfulLoginNavigate: () => Promise<any>;
+
+  get webAuthnAllow(): string {
+    return `publickey-credentials-get ${this.environmentService.getWebVaultUrl()}`;
+  }
+
+  protected loginRoute = "login";
+  protected successRoute = "vault";
+
+  constructor(
+    protected authService: AuthService,
+    protected router: Router,
+    protected i18nService: I18nService,
+    protected apiService: ApiService,
+    protected platformUtilsService: PlatformUtilsService,
+    protected win: Window,
+    protected environmentService: EnvironmentService,
+    protected stateService: StateService,
+    protected route: ActivatedRoute,
+    protected logService: LogService
+  ) {
+    this.webAuthnSupported = this.platformUtilsService.supportsWebAuthn(win);
+  }
+
+  async ngOnInit() {
+    if (!this.authing || this.authService.twoFactorProvidersData == null) {
+      this.router.navigate([this.loginRoute]);
+      return;
+    }
 
-        this.route.queryParams.pipe(first()).subscribe(qParams => {
-            if (qParams.identifier != null) {
-                this.identifier = qParams.identifier;
-            }
-        });
+    this.route.queryParams.pipe(first()).subscribe((qParams) => {
+      if (qParams.identifier != null) {
+        this.identifier = qParams.identifier;
+      }
+    });
 
-        if (this.needsLock) {
-            this.successRoute = 'lock';
-        }
+    if (this.needsLock) {
+      this.successRoute = "lock";
+    }
 
-        if (this.win != null && this.webAuthnSupported) {
-            const webVaultUrl = this.environmentService.getWebVaultUrl();
-            this.webAuthn = new WebAuthnIFrame(this.win, webVaultUrl, this.webAuthnNewTab, this.platformUtilsService,
-                this.i18nService, (token: string) => {
-                    this.token = token;
-                    this.submit();
-                }, (error: string) => {
-                    this.platformUtilsService.showToast('error', this.i18nService.t('errorOccurred'), error);
-                }, (info: string) => {
-                    if (info === 'ready') {
-                        this.webAuthnReady = true;
-                    }
-                }
-            );
+    if (this.win != null && this.webAuthnSupported) {
+      const webVaultUrl = this.environmentService.getWebVaultUrl();
+      this.webAuthn = new WebAuthnIFrame(
+        this.win,
+        webVaultUrl,
+        this.webAuthnNewTab,
+        this.platformUtilsService,
+        this.i18nService,
+        (token: string) => {
+          this.token = token;
+          this.submit();
+        },
+        (error: string) => {
+          this.platformUtilsService.showToast("error", this.i18nService.t("errorOccurred"), error);
+        },
+        (info: string) => {
+          if (info === "ready") {
+            this.webAuthnReady = true;
+          }
         }
-
-        this.selectedProviderType = this.authService.getDefaultTwoFactorProvider(this.webAuthnSupported);
-        await this.init();
+      );
     }
 
-    ngOnDestroy(): void {
-        this.cleanupWebAuthn();
-        this.webAuthn = null;
+    this.selectedProviderType = this.authService.getDefaultTwoFactorProvider(
+      this.webAuthnSupported
+    );
+    await this.init();
+  }
+
+  ngOnDestroy(): void {
+    this.cleanupWebAuthn();
+    this.webAuthn = null;
+  }
+
+  async init() {
+    if (this.selectedProviderType == null) {
+      this.title = this.i18nService.t("loginUnavailable");
+      return;
     }
 
-    async init() {
-        if (this.selectedProviderType == null) {
-            this.title = this.i18nService.t('loginUnavailable');
-            return;
+    this.cleanupWebAuthn();
+    this.title = (TwoFactorProviders as any)[this.selectedProviderType].name;
+    const providerData = this.authService.twoFactorProvidersData.get(this.selectedProviderType);
+    switch (this.selectedProviderType) {
+      case TwoFactorProviderType.WebAuthn:
+        if (!this.webAuthnNewTab) {
+          setTimeout(() => {
+            this.authWebAuthn();
+          }, 500);
         }
-
-        this.cleanupWebAuthn();
-        this.title = (TwoFactorProviders as any)[this.selectedProviderType].name;
-        const providerData = this.authService.twoFactorProvidersData.get(this.selectedProviderType);
-        switch (this.selectedProviderType) {
-            case TwoFactorProviderType.WebAuthn:
-                if (!this.webAuthnNewTab) {
-                    setTimeout(() => {
-                        this.authWebAuthn();
-                    }, 500);
-                }
-                break;
-            case TwoFactorProviderType.Duo:
-            case TwoFactorProviderType.OrganizationDuo:
-                setTimeout(() => {
-                    DuoWebSDK.init({
-                        iframe: undefined,
-                        host: providerData.Host,
-                        sig_request: providerData.Signature,
-                        submit_callback: async (f: HTMLFormElement) => {
-                            const sig = f.querySelector('input[name="sig_response"]') as HTMLInputElement;
-                            if (sig != null) {
-                                this.token = sig.value;
-                                await this.submit();
-                            }
-                        },
-                    });
-                }, 0);
-                break;
-            case TwoFactorProviderType.Email:
-                this.twoFactorEmail = providerData.Email;
-                if (this.authService.twoFactorProvidersData.size > 1) {
-                    await this.sendEmail(false);
-                }
-                break;
-            default:
-                break;
+        break;
+      case TwoFactorProviderType.Duo:
+      case TwoFactorProviderType.OrganizationDuo:
+        setTimeout(() => {
+          DuoWebSDK.init({
+            iframe: undefined,
+            host: providerData.Host,
+            sig_request: providerData.Signature,
+            submit_callback: async (f: HTMLFormElement) => {
+              const sig = f.querySelector('input[name="sig_response"]') as HTMLInputElement;
+              if (sig != null) {
+                this.token = sig.value;
+                await this.submit();
+              }
+            },
+          });
+        }, 0);
+        break;
+      case TwoFactorProviderType.Email:
+        this.twoFactorEmail = providerData.Email;
+        if (this.authService.twoFactorProvidersData.size > 1) {
+          await this.sendEmail(false);
         }
+        break;
+      default:
+        break;
     }
-
-    async submit() {
-        if (this.token == null || this.token === '') {
-            this.platformUtilsService.showToast('error', this.i18nService.t('errorOccurred'),
-                this.i18nService.t('verificationCodeRequired'));
-            return;
-        }
-
-        if (this.selectedProviderType === TwoFactorProviderType.WebAuthn) {
-            if (this.webAuthn != null) {
-                this.webAuthn.stop();
-            } else {
-                return;
-            }
-        } else if (this.selectedProviderType === TwoFactorProviderType.Email ||
-            this.selectedProviderType === TwoFactorProviderType.Authenticator) {
-            this.token = this.token.replace(' ', '').trim();
-        }
-
-        try {
-            await this.doSubmit();
-        } catch {
-            if (this.selectedProviderType === TwoFactorProviderType.WebAuthn && this.webAuthn != null) {
-                this.webAuthn.start();
-            }
-        }
+  }
+
+  async submit() {
+    if (this.token == null || this.token === "") {
+      this.platformUtilsService.showToast(
+        "error",
+        this.i18nService.t("errorOccurred"),
+        this.i18nService.t("verificationCodeRequired")
+      );
+      return;
     }
 
-    async doSubmit() {
-        this.formPromise = this.authService.logInTwoFactor(this.selectedProviderType, this.token, this.remember);
-        const response: AuthResult = await this.formPromise;
-        const disableFavicon = await this.storageService.get<boolean>(ConstantsService.disableFaviconKey);
-        await this.stateService.save(ConstantsService.disableFaviconKey, !!disableFavicon);
-        if (this.onSuccessfulLogin != null) {
-            this.onSuccessfulLogin();
-        }
-        if (response.resetMasterPassword) {
-            this.successRoute = 'set-password';
-        }
-        if (response.forcePasswordReset) {
-            this.successRoute = 'update-temp-password';
-        }
-        if (this.onSuccessfulLoginNavigate != null) {
-            this.onSuccessfulLoginNavigate();
-        } else {
-            this.router.navigate([this.successRoute], {
-                queryParams: {
-                    identifier: this.identifier,
-                },
-            });
-        }
+    if (this.selectedProviderType === TwoFactorProviderType.WebAuthn) {
+      if (this.webAuthn != null) {
+        this.webAuthn.stop();
+      } else {
+        return;
+      }
+    } else if (
+      this.selectedProviderType === TwoFactorProviderType.Email ||
+      this.selectedProviderType === TwoFactorProviderType.Authenticator
+    ) {
+      this.token = this.token.replace(" ", "").trim();
     }
 
-    async sendEmail(doToast: boolean) {
-        if (this.selectedProviderType !== TwoFactorProviderType.Email) {
-            return;
-        }
-
-        if (this.emailPromise != null) {
-            return;
-        }
+    try {
+      await this.doSubmit();
+    } catch {
+      if (this.selectedProviderType === TwoFactorProviderType.WebAuthn && this.webAuthn != null) {
+        this.webAuthn.start();
+      }
+    }
+  }
+
+  async doSubmit() {
+    this.formPromise = this.authService.logInTwoFactor(
+      this.selectedProviderType,
+      this.token,
+      this.remember
+    );
+    const response: AuthResult = await this.formPromise;
+    const disableFavicon = await this.stateService.getDisableFavicon();
+    await this.stateService.setDisableFavicon(!!disableFavicon);
+    if (this.onSuccessfulLogin != null) {
+      this.onSuccessfulLogin();
+    }
+    if (response.resetMasterPassword) {
+      this.successRoute = "set-password";
+    }
+    if (response.forcePasswordReset) {
+      this.successRoute = "update-temp-password";
+    }
+    if (this.onSuccessfulLoginNavigate != null) {
+      this.onSuccessfulLoginNavigate();
+    } else {
+      this.router.navigate([this.successRoute], {
+        queryParams: {
+          identifier: this.identifier,
+        },
+      });
+    }
+  }
 
-        try {
-            const request = new TwoFactorEmailRequest();
-            request.email = this.authService.email;
-            request.masterPasswordHash = this.authService.masterPasswordHash;
-            this.emailPromise = this.apiService.postTwoFactorEmail(request);
-            await this.emailPromise;
-            if (doToast) {
-                this.platformUtilsService.showToast('success', null,
-                    this.i18nService.t('verificationCodeEmailSent', this.twoFactorEmail));
-            }
-        } catch (e) {
-            this.logService.error(e);
-        }
+  async sendEmail(doToast: boolean) {
+    if (this.selectedProviderType !== TwoFactorProviderType.Email) {
+      return;
+    }
 
-        this.emailPromise = null;
+    if (this.emailPromise != null) {
+      return;
     }
 
-    authWebAuthn() {
-        const providerData = this.authService.twoFactorProvidersData.get(this.selectedProviderType);
+    try {
+      const request = new TwoFactorEmailRequest();
+      request.email = this.authService.email;
+      request.masterPasswordHash = this.authService.masterPasswordHash;
+      this.emailPromise = this.apiService.postTwoFactorEmail(request);
+      await this.emailPromise;
+      if (doToast) {
+        this.platformUtilsService.showToast(
+          "success",
+          null,
+          this.i18nService.t("verificationCodeEmailSent", this.twoFactorEmail)
+        );
+      }
+    } catch (e) {
+      this.logService.error(e);
+    }
 
-        if (!this.webAuthnSupported || this.webAuthn == null) {
-            return;
-        }
+    this.emailPromise = null;
+  }
 
-        this.webAuthn.init(providerData);
-    }
+  authWebAuthn() {
+    const providerData = this.authService.twoFactorProvidersData.get(this.selectedProviderType);
 
-    private cleanupWebAuthn() {
-        if (this.webAuthn != null) {
-            this.webAuthn.stop();
-            this.webAuthn.cleanup();
-        }
+    if (!this.webAuthnSupported || this.webAuthn == null) {
+      return;
     }
 
-    get authing(): boolean {
-        return this.authService.authingWithPassword() || this.authService.authingWithSso() || this.authService.authingWithApiKey();
-    }
+    this.webAuthn.init(providerData);
+  }
 
-    get needsLock(): boolean {
-        return this.authService.authingWithSso() || this.authService.authingWithApiKey();
+  private cleanupWebAuthn() {
+    if (this.webAuthn != null) {
+      this.webAuthn.stop();
+      this.webAuthn.cleanup();
     }
+  }
+
+  get authing(): boolean {
+    return (
+      this.authService.authingWithPassword() ||
+      this.authService.authingWithSso() ||
+      this.authService.authingWithApiKey()
+    );
+  }
+
+  get needsLock(): boolean {
+    return this.authService.authingWithSso() || this.authService.authingWithApiKey();
+  }
 }
diff --git a/jslib/angular/src/components/update-password.component.ts b/jslib/angular/src/components/update-password.component.ts
new file mode 100644
index 00000000..909831c5
--- /dev/null
+++ b/jslib/angular/src/components/update-password.component.ts
@@ -0,0 +1,130 @@
+import { Directive } from "@angular/core";
+import { Router } from "@angular/router";
+
+import { ApiService } from "jslib-common/abstractions/api.service";
+import { CryptoService } from "jslib-common/abstractions/crypto.service";
+import { I18nService } from "jslib-common/abstractions/i18n.service";
+import { LogService } from "jslib-common/abstractions/log.service";
+import { MessagingService } from "jslib-common/abstractions/messaging.service";
+import { PasswordGenerationService } from "jslib-common/abstractions/passwordGeneration.service";
+import { PlatformUtilsService } from "jslib-common/abstractions/platformUtils.service";
+import { PolicyService } from "jslib-common/abstractions/policy.service";
+import { StateService } from "jslib-common/abstractions/state.service";
+import { UserVerificationService } from "jslib-common/abstractions/userVerification.service";
+
+import { ChangePasswordComponent as BaseChangePasswordComponent } from "./change-password.component";
+
+import { EncString } from "jslib-common/models/domain/encString";
+import { MasterPasswordPolicyOptions } from "jslib-common/models/domain/masterPasswordPolicyOptions";
+import { PasswordRequest } from "jslib-common/models/request/passwordRequest";
+
+import { VerificationType } from "jslib-common/enums/verificationType";
+import { Verification } from "jslib-common/types/verification";
+
+import { SymmetricCryptoKey } from "jslib-common/models/domain/symmetricCryptoKey";
+
+@Directive()
+export class UpdatePasswordComponent extends BaseChangePasswordComponent {
+  hint: string;
+  key: string;
+  enforcedPolicyOptions: MasterPasswordPolicyOptions;
+  showPassword: boolean = false;
+  currentMasterPassword: string;
+
+  onSuccessfulChangePassword: () => Promise<any>;
+
+  constructor(
+    protected router: Router,
+    i18nService: I18nService,
+    platformUtilsService: PlatformUtilsService,
+    passwordGenerationService: PasswordGenerationService,
+    policyService: PolicyService,
+    cryptoService: CryptoService,
+    messagingService: MessagingService,
+    private apiService: ApiService,
+    stateService: StateService,
+    private userVerificationService: UserVerificationService,
+    private logService: LogService
+  ) {
+    super(
+      i18nService,
+      cryptoService,
+      messagingService,
+      passwordGenerationService,
+      platformUtilsService,
+      policyService,
+      stateService
+    );
+  }
+
+  togglePassword(confirmField: boolean) {
+    this.showPassword = !this.showPassword;
+    document.getElementById(confirmField ? "masterPasswordRetype" : "masterPassword").focus();
+  }
+
+  async cancel() {
+    await this.stateService.setOrganizationInvitation(null);
+    await this.stateService.setLoginRedirect(null);
+    this.router.navigate(["/vault"]);
+  }
+
+  async setupSubmitActions(): Promise<boolean> {
+    if (this.currentMasterPassword == null || this.currentMasterPassword === "") {
+      this.platformUtilsService.showToast(
+        "error",
+        this.i18nService.t("errorOccurred"),
+        this.i18nService.t("masterPassRequired")
+      );
+      return false;
+    }
+
+    const secret: Verification = {
+      type: VerificationType.MasterPassword,
+      secret: this.currentMasterPassword,
+    };
+    try {
+      await this.userVerificationService.verifyUser(secret);
+    } catch (e) {
+      this.platformUtilsService.showToast("error", this.i18nService.t("errorOccurred"), e.message);
+      return false;
+    }
+
+    this.kdf = await this.stateService.getKdfType();
+    this.kdfIterations = await this.stateService.getKdfIterations();
+    return true;
+  }
+
+  async performSubmitActions(
+    masterPasswordHash: string,
+    key: SymmetricCryptoKey,
+    encKey: [SymmetricCryptoKey, EncString]
+  ) {
+    try {
+      // Create Request
+      const request = new PasswordRequest();
+      request.masterPasswordHash = await this.cryptoService.hashPassword(
+        this.currentMasterPassword,
+        null
+      );
+      request.newMasterPasswordHash = masterPasswordHash;
+      request.key = encKey[1].encryptedString;
+
+      // Update user's password
+      this.apiService.postPassword(request);
+
+      this.platformUtilsService.showToast(
+        "success",
+        this.i18nService.t("masterPasswordChanged"),
+        this.i18nService.t("logBackIn")
+      );
+
+      if (this.onSuccessfulChangePassword != null) {
+        this.onSuccessfulChangePassword();
+      } else {
+        this.messagingService.send("logout");
+      }
+    } catch (e) {
+      this.logService.error(e);
+    }
+  }
+}
diff --git a/jslib/angular/src/components/update-temp-password.component.ts b/jslib/angular/src/components/update-temp-password.component.ts
index 29e54521..bff997e7 100644
--- a/jslib/angular/src/components/update-temp-password.component.ts
+++ b/jslib/angular/src/components/update-temp-password.component.ts
@@ -1,109 +1,134 @@
-import { Directive } from '@angular/core';
+import { Directive } from "@angular/core";
 
-import { ApiService } from 'jslib-common/abstractions/api.service';
-import { CryptoService } from 'jslib-common/abstractions/crypto.service';
-import { I18nService } from 'jslib-common/abstractions/i18n.service';
-import { LogService } from 'jslib-common/abstractions/log.service';
-import { MessagingService } from 'jslib-common/abstractions/messaging.service';
-import { PasswordGenerationService } from 'jslib-common/abstractions/passwordGeneration.service';
-import { PlatformUtilsService } from 'jslib-common/abstractions/platformUtils.service';
-import { PolicyService } from 'jslib-common/abstractions/policy.service';
-import { SyncService } from 'jslib-common/abstractions/sync.service';
-import { UserService } from 'jslib-common/abstractions/user.service';
+import { ApiService } from "jslib-common/abstractions/api.service";
+import { CryptoService } from "jslib-common/abstractions/crypto.service";
+import { I18nService } from "jslib-common/abstractions/i18n.service";
+import { LogService } from "jslib-common/abstractions/log.service";
+import { MessagingService } from "jslib-common/abstractions/messaging.service";
+import { PasswordGenerationService } from "jslib-common/abstractions/passwordGeneration.service";
+import { PlatformUtilsService } from "jslib-common/abstractions/platformUtils.service";
+import { PolicyService } from "jslib-common/abstractions/policy.service";
+import { StateService } from "jslib-common/abstractions/state.service";
+import { SyncService } from "jslib-common/abstractions/sync.service";
 
-import { ChangePasswordComponent as BaseChangePasswordComponent } from './change-password.component';
+import { ChangePasswordComponent as BaseChangePasswordComponent } from "./change-password.component";
 
-import { EncString } from 'jslib-common/models/domain/encString';
-import { MasterPasswordPolicyOptions } from 'jslib-common/models/domain/masterPasswordPolicyOptions';
-import { SymmetricCryptoKey } from 'jslib-common/models/domain/symmetricCryptoKey';
+import { EncString } from "jslib-common/models/domain/encString";
+import { MasterPasswordPolicyOptions } from "jslib-common/models/domain/masterPasswordPolicyOptions";
+import { SymmetricCryptoKey } from "jslib-common/models/domain/symmetricCryptoKey";
 
-import { UpdateTempPasswordRequest } from 'jslib-common/models/request/updateTempPasswordRequest';
+import { UpdateTempPasswordRequest } from "jslib-common/models/request/updateTempPasswordRequest";
 
 @Directive()
 export class UpdateTempPasswordComponent extends BaseChangePasswordComponent {
-    hint: string;
-    key: string;
-    enforcedPolicyOptions: MasterPasswordPolicyOptions;
-    showPassword: boolean = false;
-
-    onSuccessfulChangePassword: () => Promise<any>;
-
-    constructor(i18nService: I18nService, platformUtilsService: PlatformUtilsService,
-        passwordGenerationService: PasswordGenerationService, policyService: PolicyService,
-        cryptoService: CryptoService, userService: UserService,
-        messagingService: MessagingService, private apiService: ApiService,
-        private syncService: SyncService, private logService: LogService) {
-        super(i18nService, cryptoService, messagingService, userService, passwordGenerationService,
-            platformUtilsService, policyService);
+  hint: string;
+  key: string;
+  enforcedPolicyOptions: MasterPasswordPolicyOptions;
+  showPassword: boolean = false;
+
+  onSuccessfulChangePassword: () => Promise<any>;
+
+  constructor(
+    i18nService: I18nService,
+    platformUtilsService: PlatformUtilsService,
+    passwordGenerationService: PasswordGenerationService,
+    policyService: PolicyService,
+    cryptoService: CryptoService,
+    messagingService: MessagingService,
+    private apiService: ApiService,
+    stateService: StateService,
+    private syncService: SyncService,
+    private logService: LogService
+  ) {
+    super(
+      i18nService,
+      cryptoService,
+      messagingService,
+      passwordGenerationService,
+      platformUtilsService,
+      policyService,
+      stateService
+    );
+  }
+
+  async ngOnInit() {
+    await this.syncService.fullSync(true);
+    super.ngOnInit();
+  }
+
+  togglePassword(confirmField: boolean) {
+    this.showPassword = !this.showPassword;
+    document.getElementById(confirmField ? "masterPasswordRetype" : "masterPassword").focus();
+  }
+
+  async setupSubmitActions(): Promise<boolean> {
+    this.enforcedPolicyOptions = await this.policyService.getMasterPasswordPolicyOptions();
+    this.email = await this.stateService.getEmail();
+    this.kdf = await this.stateService.getKdfType();
+    this.kdfIterations = await this.stateService.getKdfIterations();
+    return true;
+  }
+
+  async submit() {
+    // Validation
+    if (!(await this.strongPassword())) {
+      return;
     }
 
-    async ngOnInit() {
-        await this.syncService.fullSync(true);
-        super.ngOnInit();
+    if (!(await this.setupSubmitActions())) {
+      return;
     }
 
-    togglePassword(confirmField: boolean) {
-        this.showPassword = !this.showPassword;
-        document.getElementById(confirmField ? 'masterPasswordRetype' : 'masterPassword').focus();
+    try {
+      // Create new key and hash new password
+      const newKey = await this.cryptoService.makeKey(
+        this.masterPassword,
+        this.email.trim().toLowerCase(),
+        this.kdf,
+        this.kdfIterations
+      );
+      const newPasswordHash = await this.cryptoService.hashPassword(this.masterPassword, newKey);
+
+      // Grab user's current enc key
+      const userEncKey = await this.cryptoService.getEncKey();
+
+      // Create new encKey for the User
+      const newEncKey = await this.cryptoService.remakeEncKey(newKey, userEncKey);
+
+      await this.performSubmitActions(newPasswordHash, newKey, newEncKey);
+    } catch (e) {
+      this.logService.error(e);
     }
-
-    async setupSubmitActions(): Promise<boolean> {
-        this.enforcedPolicyOptions = await this.policyService.getMasterPasswordPolicyOptions();
-        this.email = await this.userService.getEmail();
-        this.kdf = await this.userService.getKdf();
-        this.kdfIterations = await this.userService.getKdfIterations();
-        return true;
-    }
-
-    async submit() {
-        // Validation
-        if (!await this.strongPassword()) {
-            return;
-        }
-
-        if (!await this.setupSubmitActions()) {
-            return;
-        }
-
-        try {
-            // Create new key and hash new password
-            const newKey = await this.cryptoService.makeKey(this.masterPassword, this.email.trim().toLowerCase(),
-                this.kdf, this.kdfIterations);
-            const newPasswordHash = await this.cryptoService.hashPassword(this.masterPassword, newKey);
-
-            // Grab user's current enc key
-            const userEncKey = await this.cryptoService.getEncKey();
-
-            // Create new encKey for the User
-            const newEncKey = await this.cryptoService.remakeEncKey(newKey, userEncKey);
-
-            await this.performSubmitActions(newPasswordHash, newKey, newEncKey);
-        } catch (e) {
-            this.logService.error(e);
-        }
-    }
-
-    async performSubmitActions(masterPasswordHash: string, key: SymmetricCryptoKey,
-        encKey: [SymmetricCryptoKey, EncString]) {
-        try {
-            // Create request
-            const request = new UpdateTempPasswordRequest();
-            request.key = encKey[1].encryptedString;
-            request.newMasterPasswordHash = masterPasswordHash;
-            request.masterPasswordHint = this.hint;
-
-            // Update user's password
-            this.formPromise = this.apiService.putUpdateTempPassword(request);
-            await this.formPromise;
-            this.platformUtilsService.showToast('success', null, this.i18nService.t('updatedMasterPassword'));
-
-            if (this.onSuccessfulChangePassword != null) {
-                this.onSuccessfulChangePassword();
-            } else {
-                this.messagingService.send('logout');
-            }
-        } catch (e) {
-            this.logService.error(e);
-        }
+  }
+
+  async performSubmitActions(
+    masterPasswordHash: string,
+    key: SymmetricCryptoKey,
+    encKey: [SymmetricCryptoKey, EncString]
+  ) {
+    try {
+      // Create request
+      const request = new UpdateTempPasswordRequest();
+      request.key = encKey[1].encryptedString;
+      request.newMasterPasswordHash = masterPasswordHash;
+      request.masterPasswordHint = this.hint;
+
+      // Update user's password
+      this.formPromise = this.apiService.putUpdateTempPassword(request);
+      await this.formPromise;
+      this.platformUtilsService.showToast(
+        "success",
+        null,
+        this.i18nService.t("updatedMasterPassword")
+      );
+
+      if (this.onSuccessfulChangePassword != null) {
+        this.onSuccessfulChangePassword();
+      } else {
+        this.messagingService.send("logout");
+      }
+    } catch (e) {
+      this.logService.error(e);
     }
+  }
 }
diff --git a/jslib/angular/src/components/verify-master-password.component.html b/jslib/angular/src/components/verify-master-password.component.html
index c4160e97..b90c6074 100644
--- a/jslib/angular/src/components/verify-master-password.component.html
+++ b/jslib/angular/src/components/verify-master-password.component.html
@@ -1,25 +1,46 @@
 <ng-container *ngIf="!usesKeyConnector">
-    <label for="masterPassword">{{'masterPass' | i18n}}</label>
-    <input id="masterPassword" type="password" name="MasterPasswordHash" class="form-control"
-        [formControl]="secret" required appAutofocus appInputVerbatim>
-    <small class="form-text text-muted">{{'confirmIdentity' | i18n}}</small>
+  <label for="masterPassword">{{ "masterPass" | i18n }}</label>
+  <input
+    id="masterPassword"
+    type="password"
+    name="MasterPasswordHash"
+    class="form-control"
+    [formControl]="secret"
+    required
+    appAutofocus
+    appInputVerbatim
+  />
+  <small class="form-text text-muted">{{ "confirmIdentity" | i18n }}</small>
 </ng-container>
 <ng-container *ngIf="usesKeyConnector">
-    <div class="form-group">
-        <label class="d-block">{{'sendVerificationCode' | i18n}}</label>
-        <button type="button" class="btn btn-outline-secondary" (click)="requestOTP()" [disabled]="disableRequestOTP">
-            {{'sendCode' | i18n}}
-        </button>
-        <span class="ml-2 text-success" role="alert" @sent *ngIf="sentCode">
-            <i class="fa fa-check-circle-o" aria-hidden="true"></i>
-            {{'codeSent' | i18n}}
-        </span>
-    </div>
+  <div class="form-group">
+    <label class="d-block">{{ "sendVerificationCode" | i18n }}</label>
+    <button
+      type="button"
+      class="btn btn-outline-secondary"
+      (click)="requestOTP()"
+      [disabled]="disableRequestOTP"
+    >
+      {{ "sendCode" | i18n }}
+    </button>
+    <span class="ml-2 text-success" role="alert" @sent *ngIf="sentCode">
+      <i class="bwi bwi-check-circle" aria-hidden="true"></i>
+      {{ "codeSent" | i18n }}
+    </span>
+  </div>
 
-    <div class="form-group">
-        <label for="verificationCode">{{'verificationCode' | i18n}}</label>
-        <input id="verificationCode" type="input" name="verificationCode" class="form-control"
-            [formControl]="secret" required appAutofocus appInputVerbatim>
-        <small class="form-text text-muted">{{'confirmIdentity' | i18n}}</small>
-    </div>
+  <div class="form-group">
+    <label for="verificationCode">{{ "verificationCode" | i18n }}</label>
+    <input
+      id="verificationCode"
+      type="input"
+      name="verificationCode"
+      class="form-control"
+      [formControl]="secret"
+      required
+      appAutofocus
+      appInputVerbatim
+    />
+    <small class="form-text text-muted">{{ "confirmIdentity" | i18n }}</small>
+  </div>
 </ng-container>
diff --git a/jslib/angular/src/components/verify-master-password.component.ts b/jslib/angular/src/components/verify-master-password.component.ts
index 1975b4e2..43b64eb2 100644
--- a/jslib/angular/src/components/verify-master-password.component.ts
+++ b/jslib/angular/src/components/verify-master-password.component.ts
@@ -1,105 +1,92 @@
-import {
-    animate,
-    style,
-    transition,
-    trigger,
-} from '@angular/animations';
-import {
-    Component,
-    OnInit,
-} from '@angular/core';
-import {
-    ControlValueAccessor,
-    FormControl,
-    NG_VALUE_ACCESSOR,
-} from '@angular/forms';
-
-import { KeyConnectorService } from 'jslib-common/abstractions/keyConnector.service';
-import { UserVerificationService } from 'jslib-common/abstractions/userVerification.service';
-
-import { VerificationType } from 'jslib-common/enums/verificationType';
-
-import { Verification } from 'jslib-common/types/verification';
+import { animate, style, transition, trigger } from "@angular/animations";
+import { Component, OnInit } from "@angular/core";
+import { ControlValueAccessor, FormControl, NG_VALUE_ACCESSOR } from "@angular/forms";
 
-@Component({
-    selector: 'app-verify-master-password',
-    templateUrl: 'verify-master-password.component.html',
-    providers: [
-        {
-            provide: NG_VALUE_ACCESSOR,
-            multi: true,
-            useExisting: VerifyMasterPasswordComponent,
-        },
-    ],
-    animations: [
-        trigger('sent', [
-            transition(':enter', [
-                style({ opacity: 0 }),
-                animate('100ms', style({ opacity: 1 })),
-            ]),
-        ]),
-    ],
-})
-export class VerifyMasterPasswordComponent implements ControlValueAccessor, OnInit {
-    usesKeyConnector: boolean = false;
-    disableRequestOTP: boolean = false;
-    sentCode: boolean = false;
-
-    secret = new FormControl('');
-
-    private onChange: (value: Verification) => void;
+import { KeyConnectorService } from "jslib-common/abstractions/keyConnector.service";
+import { UserVerificationService } from "jslib-common/abstractions/userVerification.service";
 
-    constructor(private keyConnectorService: KeyConnectorService,
-        private userVerificationService: UserVerificationService) { }
+import { VerificationType } from "jslib-common/enums/verificationType";
 
-    async ngOnInit() {
-        this.usesKeyConnector = await this.keyConnectorService.getUsesKeyConnector();
-        this.processChanges(this.secret.value);
-
-        this.secret.valueChanges.subscribe(secret => this.processChanges(secret));
-    }
-
-    async requestOTP() {
-        if (this.usesKeyConnector) {
-            this.disableRequestOTP = true;
-            try {
-                await this.userVerificationService.requestOTP();
-                this.sentCode = true;
-            } finally {
-                this.disableRequestOTP = false;
-            }
-        }
-    }
+import { Verification } from "jslib-common/types/verification";
 
-    writeValue(obj: any): void {
-        this.secret.setValue(obj);
-    }
-
-    registerOnChange(fn: any): void {
-        this.onChange = fn;
+@Component({
+  selector: "app-verify-master-password",
+  templateUrl: "verify-master-password.component.html",
+  providers: [
+    {
+      provide: NG_VALUE_ACCESSOR,
+      multi: true,
+      useExisting: VerifyMasterPasswordComponent,
+    },
+  ],
+  animations: [
+    trigger("sent", [
+      transition(":enter", [style({ opacity: 0 }), animate("100ms", style({ opacity: 1 }))]),
+    ]),
+  ],
+})
+export class VerifyMasterPasswordComponent implements ControlValueAccessor, OnInit {
+  usesKeyConnector: boolean = false;
+  disableRequestOTP: boolean = false;
+  sentCode: boolean = false;
+
+  secret = new FormControl("");
+
+  private onChange: (value: Verification) => void;
+
+  constructor(
+    private keyConnectorService: KeyConnectorService,
+    private userVerificationService: UserVerificationService
+  ) {}
+
+  async ngOnInit() {
+    this.usesKeyConnector = await this.keyConnectorService.getUsesKeyConnector();
+    this.processChanges(this.secret.value);
+
+    this.secret.valueChanges.subscribe((secret) => this.processChanges(secret));
+  }
+
+  async requestOTP() {
+    if (this.usesKeyConnector) {
+      this.disableRequestOTP = true;
+      try {
+        await this.userVerificationService.requestOTP();
+        this.sentCode = true;
+      } finally {
+        this.disableRequestOTP = false;
+      }
     }
-
-    registerOnTouched(fn: any): void {
-        // Not implemented
+  }
+
+  writeValue(obj: any): void {
+    this.secret.setValue(obj);
+  }
+
+  registerOnChange(fn: any): void {
+    this.onChange = fn;
+  }
+
+  registerOnTouched(fn: any): void {
+    // Not implemented
+  }
+
+  setDisabledState?(isDisabled: boolean): void {
+    this.disableRequestOTP = isDisabled;
+    if (isDisabled) {
+      this.secret.disable();
+    } else {
+      this.secret.enable();
     }
+  }
 
-    setDisabledState?(isDisabled: boolean): void {
-        this.disableRequestOTP = isDisabled;
-        if (isDisabled) {
-            this.secret.disable();
-        } else {
-            this.secret.enable();
-        }
+  private processChanges(secret: string) {
+    if (this.onChange == null) {
+      return;
     }
 
-    private processChanges(secret: string) {
-        if (this.onChange == null) {
-            return;
-        }
-
-        this.onChange({
-            type: this.usesKeyConnector ? VerificationType.OTP : VerificationType.MasterPassword,
-            secret: secret,
-        });
-    }
+    this.onChange({
+      type: this.usesKeyConnector ? VerificationType.OTP : VerificationType.MasterPassword,
+      secret: secret,
+    });
+  }
 }
diff --git a/jslib/angular/src/components/view-custom-fields.component.ts b/jslib/angular/src/components/view-custom-fields.component.ts
index add22691..c955eeb8 100644
--- a/jslib/angular/src/components/view-custom-fields.component.ts
+++ b/jslib/angular/src/components/view-custom-fields.component.ts
@@ -1,35 +1,32 @@
-import {
-    Directive,
-    Input,
-} from '@angular/core';
+import { Directive, Input } from "@angular/core";
 
-import { EventType } from 'jslib-common/enums/eventType';
-import { FieldType } from 'jslib-common/enums/fieldType';
+import { EventType } from "jslib-common/enums/eventType";
+import { FieldType } from "jslib-common/enums/fieldType";
 
-import { EventService } from 'jslib-common/abstractions/event.service';
+import { EventService } from "jslib-common/abstractions/event.service";
 
-import { CipherView } from 'jslib-common/models/view/cipherView';
-import { FieldView } from 'jslib-common/models/view/fieldView';
+import { CipherView } from "jslib-common/models/view/cipherView";
+import { FieldView } from "jslib-common/models/view/fieldView";
 
 @Directive()
 export class ViewCustomFieldsComponent {
-    @Input() cipher: CipherView;
-    @Input() promptPassword: () => Promise<boolean>;
-    @Input() copy: (value: string, typeI18nKey: string, aType: string) => void;
+  @Input() cipher: CipherView;
+  @Input() promptPassword: () => Promise<boolean>;
+  @Input() copy: (value: string, typeI18nKey: string, aType: string) => void;
 
-    fieldType = FieldType;
+  fieldType = FieldType;
 
-    constructor(private eventService: EventService) { }
+  constructor(private eventService: EventService) {}
 
-    async toggleFieldValue(field: FieldView) {
-        if (!await this.promptPassword()) {
-            return;
-        }
+  async toggleFieldValue(field: FieldView) {
+    if (!(await this.promptPassword())) {
+      return;
+    }
 
-        const f = (field as any);
-        f.showValue = !f.showValue;
-        if (f.showValue) {
-            this.eventService.collect(EventType.Cipher_ClientToggledHiddenFieldVisible, this.cipher.id);
-        }
+    const f = field as any;
+    f.showValue = !f.showValue;
+    if (f.showValue) {
+      this.eventService.collect(EventType.Cipher_ClientToggledHiddenFieldVisible, this.cipher.id);
     }
+  }
 }
diff --git a/jslib/angular/src/components/view.component.ts b/jslib/angular/src/components/view.component.ts
index 8e12634f..9e2ea818 100644
--- a/jslib/angular/src/components/view.component.ts
+++ b/jslib/angular/src/components/view.component.ts
@@ -1,394 +1,447 @@
 import {
-    ChangeDetectorRef,
-    Directive,
-    EventEmitter,
-    Input,
-    NgZone,
-    OnDestroy,
-    OnInit,
-    Output,
-} from '@angular/core';
-
-import { CipherRepromptType } from 'jslib-common/enums/cipherRepromptType';
-import { CipherType } from 'jslib-common/enums/cipherType';
-import { EventType } from 'jslib-common/enums/eventType';
-import { FieldType } from 'jslib-common/enums/fieldType';
-
-import { ApiService } from 'jslib-common/abstractions/api.service';
-import { AuditService } from 'jslib-common/abstractions/audit.service';
-import { BroadcasterService } from 'jslib-common/abstractions/broadcaster.service';
-import { CipherService } from 'jslib-common/abstractions/cipher.service';
-import { CryptoService } from 'jslib-common/abstractions/crypto.service';
-import { EventService } from 'jslib-common/abstractions/event.service';
-import { I18nService } from 'jslib-common/abstractions/i18n.service';
-import { LogService } from 'jslib-common/abstractions/log.service';
-import { PasswordRepromptService } from 'jslib-common/abstractions/passwordReprompt.service';
-import { PlatformUtilsService } from 'jslib-common/abstractions/platformUtils.service';
-import { TokenService } from 'jslib-common/abstractions/token.service';
-import { TotpService } from 'jslib-common/abstractions/totp.service';
-import { UserService } from 'jslib-common/abstractions/user.service';
-
-import { ErrorResponse } from 'jslib-common/models/response/errorResponse';
-
-import { AttachmentView } from 'jslib-common/models/view/attachmentView';
-import { CipherView } from 'jslib-common/models/view/cipherView';
-import { LoginUriView } from 'jslib-common/models/view/loginUriView';
-
-const BroadcasterSubscriptionId = 'ViewComponent';
+  ChangeDetectorRef,
+  Directive,
+  EventEmitter,
+  Input,
+  NgZone,
+  OnDestroy,
+  OnInit,
+  Output,
+} from "@angular/core";
+
+import { CipherRepromptType } from "jslib-common/enums/cipherRepromptType";
+import { CipherType } from "jslib-common/enums/cipherType";
+import { EventType } from "jslib-common/enums/eventType";
+import { FieldType } from "jslib-common/enums/fieldType";
+
+import { ApiService } from "jslib-common/abstractions/api.service";
+import { AuditService } from "jslib-common/abstractions/audit.service";
+import { BroadcasterService } from "jslib-common/abstractions/broadcaster.service";
+import { CipherService } from "jslib-common/abstractions/cipher.service";
+import { CryptoService } from "jslib-common/abstractions/crypto.service";
+import { EventService } from "jslib-common/abstractions/event.service";
+import { I18nService } from "jslib-common/abstractions/i18n.service";
+import { LogService } from "jslib-common/abstractions/log.service";
+import { PasswordRepromptService } from "jslib-common/abstractions/passwordReprompt.service";
+import { PlatformUtilsService } from "jslib-common/abstractions/platformUtils.service";
+import { StateService } from "jslib-common/abstractions/state.service";
+import { TokenService } from "jslib-common/abstractions/token.service";
+import { TotpService } from "jslib-common/abstractions/totp.service";
+
+import { ErrorResponse } from "jslib-common/models/response/errorResponse";
+
+import { AttachmentView } from "jslib-common/models/view/attachmentView";
+import { CipherView } from "jslib-common/models/view/cipherView";
+import { LoginUriView } from "jslib-common/models/view/loginUriView";
+
+const BroadcasterSubscriptionId = "ViewComponent";
 
 @Directive()
 export class ViewComponent implements OnDestroy, OnInit {
-    @Input() cipherId: string;
-    @Output() onEditCipher = new EventEmitter<CipherView>();
-    @Output() onCloneCipher = new EventEmitter<CipherView>();
-    @Output() onShareCipher = new EventEmitter<CipherView>();
-    @Output() onDeletedCipher = new EventEmitter<CipherView>();
-    @Output() onRestoredCipher = new EventEmitter<CipherView>();
-
-    cipher: CipherView;
-    showPassword: boolean;
-    showCardNumber: boolean;
-    showCardCode: boolean;
-    canAccessPremium: boolean;
-    totpCode: string;
-    totpCodeFormatted: string;
-    totpDash: number;
-    totpSec: number;
-    totpLow: boolean;
-    fieldType = FieldType;
-    checkPasswordPromise: Promise<number>;
-
-    private totpInterval: any;
-    private previousCipherId: string;
-    private passwordReprompted: boolean = false;
-
-    constructor(protected cipherService: CipherService, protected totpService: TotpService,
-        protected tokenService: TokenService, protected i18nService: I18nService,
-        protected cryptoService: CryptoService, protected platformUtilsService: PlatformUtilsService,
-        protected auditService: AuditService, protected win: Window,
-        protected broadcasterService: BroadcasterService, protected ngZone: NgZone,
-        protected changeDetectorRef: ChangeDetectorRef, protected userService: UserService,
-        protected eventService: EventService, protected apiService: ApiService,
-        protected passwordRepromptService: PasswordRepromptService, private logService: LogService) { }
-
-    ngOnInit() {
-        this.broadcasterService.subscribe(BroadcasterSubscriptionId, (message: any) => {
-            this.ngZone.run(async () => {
-                switch (message.command) {
-                    case 'syncCompleted':
-                        if (message.successfully) {
-                            await this.load();
-                            this.changeDetectorRef.detectChanges();
-                        }
-                        break;
-                }
-            });
-        });
-    }
-
-    ngOnDestroy() {
-        this.broadcasterService.unsubscribe(BroadcasterSubscriptionId);
-        this.cleanUp();
-    }
-
-    async load() {
-        this.cleanUp();
-
-        const cipher = await this.cipherService.get(this.cipherId);
-        this.cipher = await cipher.decrypt();
-        this.canAccessPremium = await this.userService.canAccessPremium();
-
-        if (this.cipher.type === CipherType.Login && this.cipher.login.totp &&
-            (cipher.organizationUseTotp || this.canAccessPremium)) {
-            await this.totpUpdateCode();
-            const interval = this.totpService.getTimeInterval(this.cipher.login.totp);
-            await this.totpTick(interval);
-
-            this.totpInterval = setInterval(async () => {
-                await this.totpTick(interval);
-            }, 1000);
-        }
-
-        if (this.previousCipherId !== this.cipherId) {
-            this.eventService.collect(EventType.Cipher_ClientViewed, this.cipherId);
-        }
-        this.previousCipherId = this.cipherId;
+  @Input() cipherId: string;
+  @Output() onEditCipher = new EventEmitter<CipherView>();
+  @Output() onCloneCipher = new EventEmitter<CipherView>();
+  @Output() onShareCipher = new EventEmitter<CipherView>();
+  @Output() onDeletedCipher = new EventEmitter<CipherView>();
+  @Output() onRestoredCipher = new EventEmitter<CipherView>();
+
+  cipher: CipherView;
+  showPassword: boolean;
+  showCardNumber: boolean;
+  showCardCode: boolean;
+  canAccessPremium: boolean;
+  totpCode: string;
+  totpCodeFormatted: string;
+  totpDash: number;
+  totpSec: number;
+  totpLow: boolean;
+  fieldType = FieldType;
+  checkPasswordPromise: Promise<number>;
+
+  private totpInterval: any;
+  private previousCipherId: string;
+  private passwordReprompted: boolean = false;
+
+  constructor(
+    protected cipherService: CipherService,
+    protected totpService: TotpService,
+    protected tokenService: TokenService,
+    protected i18nService: I18nService,
+    protected cryptoService: CryptoService,
+    protected platformUtilsService: PlatformUtilsService,
+    protected auditService: AuditService,
+    protected win: Window,
+    protected broadcasterService: BroadcasterService,
+    protected ngZone: NgZone,
+    protected changeDetectorRef: ChangeDetectorRef,
+    protected eventService: EventService,
+    protected apiService: ApiService,
+    protected passwordRepromptService: PasswordRepromptService,
+    private logService: LogService,
+    protected stateService: StateService
+  ) {}
+
+  ngOnInit() {
+    this.broadcasterService.subscribe(BroadcasterSubscriptionId, (message: any) => {
+      this.ngZone.run(async () => {
+        switch (message.command) {
+          case "syncCompleted":
+            if (message.successfully) {
+              await this.load();
+              this.changeDetectorRef.detectChanges();
+            }
+            break;
+        }
+      });
+    });
+  }
+
+  ngOnDestroy() {
+    this.broadcasterService.unsubscribe(BroadcasterSubscriptionId);
+    this.cleanUp();
+  }
+
+  async load() {
+    this.cleanUp();
+
+    const cipher = await this.cipherService.get(this.cipherId);
+    this.cipher = await cipher.decrypt();
+    this.canAccessPremium = await this.stateService.getCanAccessPremium();
+
+    if (
+      this.cipher.type === CipherType.Login &&
+      this.cipher.login.totp &&
+      (cipher.organizationUseTotp || this.canAccessPremium)
+    ) {
+      await this.totpUpdateCode();
+      const interval = this.totpService.getTimeInterval(this.cipher.login.totp);
+      await this.totpTick(interval);
+
+      this.totpInterval = setInterval(async () => {
+        await this.totpTick(interval);
+      }, 1000);
     }
 
-    async edit() {
-        if (await this.promptPassword()) {
-            this.onEditCipher.emit(this.cipher);
-            return true;
-        }
-
-        return false;
+    if (this.previousCipherId !== this.cipherId) {
+      this.eventService.collect(EventType.Cipher_ClientViewed, this.cipherId);
     }
+    this.previousCipherId = this.cipherId;
+  }
 
-    async clone() {
-        if (await this.promptPassword()) {
-            this.onCloneCipher.emit(this.cipher);
-            return true;
-        }
-
-        return false;
+  async edit() {
+    if (await this.promptPassword()) {
+      this.onEditCipher.emit(this.cipher);
+      return true;
     }
 
-    async share() {
-        if (await this.promptPassword()) {
-            this.onShareCipher.emit(this.cipher);
-            return true;
-        }
+    return false;
+  }
 
-        return false;
+  async clone() {
+    if (await this.promptPassword()) {
+      this.onCloneCipher.emit(this.cipher);
+      return true;
     }
 
-    async delete(): Promise<boolean> {
-        if (!await this.promptPassword()) {
-            return;
-        }
+    return false;
+  }
 
-        const confirmed = await this.platformUtilsService.showDialog(
-            this.i18nService.t(this.cipher.isDeleted ? 'permanentlyDeleteItemConfirmation' : 'deleteItemConfirmation'),
-            this.i18nService.t('deleteItem'), this.i18nService.t('yes'), this.i18nService.t('no'), 'warning');
-        if (!confirmed) {
-            return false;
-        }
+  async share() {
+    if (await this.promptPassword()) {
+      this.onShareCipher.emit(this.cipher);
+      return true;
+    }
 
-        try {
-            await this.deleteCipher();
-            this.platformUtilsService.showToast('success', null,
-                this.i18nService.t(this.cipher.isDeleted ? 'permanentlyDeletedItem' : 'deletedItem'));
-            this.onDeletedCipher.emit(this.cipher);
-        } catch (e) {
-            this.logService.error(e);
-        }
+    return false;
+  }
 
-        return true;
+  async delete(): Promise<boolean> {
+    if (!(await this.promptPassword())) {
+      return;
     }
 
-    async restore(): Promise<boolean> {
-        if (!this.cipher.isDeleted) {
-            return false;
-        }
+    const confirmed = await this.platformUtilsService.showDialog(
+      this.i18nService.t(
+        this.cipher.isDeleted ? "permanentlyDeleteItemConfirmation" : "deleteItemConfirmation"
+      ),
+      this.i18nService.t("deleteItem"),
+      this.i18nService.t("yes"),
+      this.i18nService.t("no"),
+      "warning"
+    );
+    if (!confirmed) {
+      return false;
+    }
 
-        const confirmed = await this.platformUtilsService.showDialog(
-            this.i18nService.t('restoreItemConfirmation'), this.i18nService.t('restoreItem'),
-            this.i18nService.t('yes'), this.i18nService.t('no'), 'warning');
-        if (!confirmed) {
-            return false;
-        }
+    try {
+      await this.deleteCipher();
+      this.platformUtilsService.showToast(
+        "success",
+        null,
+        this.i18nService.t(this.cipher.isDeleted ? "permanentlyDeletedItem" : "deletedItem")
+      );
+      this.onDeletedCipher.emit(this.cipher);
+    } catch (e) {
+      this.logService.error(e);
+    }
 
-        try {
-            await this.restoreCipher();
-            this.platformUtilsService.showToast('success', null, this.i18nService.t('restoredItem'));
-            this.onRestoredCipher.emit(this.cipher);
-        } catch (e) {
-            this.logService.error(e);
-        }
+    return true;
+  }
 
-        return true;
+  async restore(): Promise<boolean> {
+    if (!this.cipher.isDeleted) {
+      return false;
     }
 
-    async togglePassword() {
-        if (!await this.promptPassword()) {
-            return;
-        }
+    const confirmed = await this.platformUtilsService.showDialog(
+      this.i18nService.t("restoreItemConfirmation"),
+      this.i18nService.t("restoreItem"),
+      this.i18nService.t("yes"),
+      this.i18nService.t("no"),
+      "warning"
+    );
+    if (!confirmed) {
+      return false;
+    }
 
-        this.showPassword = !this.showPassword;
-        if (this.showPassword) {
-            this.eventService.collect(EventType.Cipher_ClientToggledPasswordVisible, this.cipherId);
-        }
+    try {
+      await this.restoreCipher();
+      this.platformUtilsService.showToast("success", null, this.i18nService.t("restoredItem"));
+      this.onRestoredCipher.emit(this.cipher);
+    } catch (e) {
+      this.logService.error(e);
     }
 
-    async toggleCardNumber() {
-        if (!await this.promptPassword()) {
-            return;
-        }
+    return true;
+  }
 
-        this.showCardNumber = !this.showCardNumber;
-        if (this.showCardNumber) {
-            this.eventService.collect(EventType.Cipher_ClientToggledCardCodeVisible, this.cipherId);
-        }
+  async togglePassword() {
+    if (!(await this.promptPassword())) {
+      return;
     }
 
-    async toggleCardCode() {
-        if (!await this.promptPassword()) {
-            return;
-        }
-
-        this.showCardCode = !this.showCardCode;
-        if (this.showCardCode) {
-            this.eventService.collect(EventType.Cipher_ClientToggledCardCodeVisible, this.cipherId);
-        }
+    this.showPassword = !this.showPassword;
+    if (this.showPassword) {
+      this.eventService.collect(EventType.Cipher_ClientToggledPasswordVisible, this.cipherId);
     }
+  }
 
-    async checkPassword() {
-        if (this.cipher.login == null || this.cipher.login.password == null || this.cipher.login.password === '') {
-            return;
-        }
+  async toggleCardNumber() {
+    if (!(await this.promptPassword())) {
+      return;
+    }
 
-        this.checkPasswordPromise = this.auditService.passwordLeaked(this.cipher.login.password);
-        const matches = await this.checkPasswordPromise;
+    this.showCardNumber = !this.showCardNumber;
+    if (this.showCardNumber) {
+      this.eventService.collect(EventType.Cipher_ClientToggledCardCodeVisible, this.cipherId);
+    }
+  }
 
-        if (matches > 0) {
-            this.platformUtilsService.showToast('warning', null,
-                this.i18nService.t('passwordExposed', matches.toString()));
-        } else {
-            this.platformUtilsService.showToast('success', null, this.i18nService.t('passwordSafe'));
-        }
+  async toggleCardCode() {
+    if (!(await this.promptPassword())) {
+      return;
     }
 
-    launch(uri: LoginUriView, cipherId?: string) {
-        if (!uri.canLaunch) {
-            return;
-        }
+    this.showCardCode = !this.showCardCode;
+    if (this.showCardCode) {
+      this.eventService.collect(EventType.Cipher_ClientToggledCardCodeVisible, this.cipherId);
+    }
+  }
+
+  async checkPassword() {
+    if (
+      this.cipher.login == null ||
+      this.cipher.login.password == null ||
+      this.cipher.login.password === ""
+    ) {
+      return;
+    }
 
-        if (cipherId) {
-            this.cipherService.updateLastLaunchedDate(cipherId);
-        }
+    this.checkPasswordPromise = this.auditService.passwordLeaked(this.cipher.login.password);
+    const matches = await this.checkPasswordPromise;
+
+    if (matches > 0) {
+      this.platformUtilsService.showToast(
+        "warning",
+        null,
+        this.i18nService.t("passwordExposed", matches.toString())
+      );
+    } else {
+      this.platformUtilsService.showToast("success", null, this.i18nService.t("passwordSafe"));
+    }
+  }
 
-        this.platformUtilsService.launchUri(uri.launchUri);
+  launch(uri: LoginUriView, cipherId?: string) {
+    if (!uri.canLaunch) {
+      return;
     }
 
-    async copy(value: string, typeI18nKey: string, aType: string) {
-        if (value == null) {
-            return;
-        }
+    if (cipherId) {
+      this.cipherService.updateLastLaunchedDate(cipherId);
+    }
 
-        if (this.passwordRepromptService.protectedFields().includes(aType) && !await this.promptPassword()) {
-            return;
-        }
+    this.platformUtilsService.launchUri(uri.launchUri);
+  }
 
-        const copyOptions = this.win != null ? { window: this.win } : null;
-        this.platformUtilsService.copyToClipboard(value, copyOptions);
-        this.platformUtilsService.showToast('info', null,
-            this.i18nService.t('valueCopied', this.i18nService.t(typeI18nKey)));
-
-        if (typeI18nKey === 'password') {
-            this.eventService.collect(EventType.Cipher_ClientToggledHiddenFieldVisible, this.cipherId);
-        } else if (typeI18nKey === 'securityCode') {
-            this.eventService.collect(EventType.Cipher_ClientCopiedCardCode, this.cipherId);
-        } else if (aType === 'H_Field') {
-            this.eventService.collect(EventType.Cipher_ClientCopiedHiddenField, this.cipherId);
-        }
+  async copy(value: string, typeI18nKey: string, aType: string) {
+    if (value == null) {
+      return;
     }
 
-    setTextDataOnDrag(event: DragEvent, data: string) {
-        event.dataTransfer.setData('text', data);
+    if (
+      this.passwordRepromptService.protectedFields().includes(aType) &&
+      !(await this.promptPassword())
+    ) {
+      return;
     }
 
-    async downloadAttachment(attachment: AttachmentView) {
-        if (!await this.promptPassword()) {
-            return;
-        }
-        const a = (attachment as any);
-        if (a.downloading) {
-            return;
-        }
-
-        if (this.cipher.organizationId == null && !this.canAccessPremium) {
-            this.platformUtilsService.showToast('error', this.i18nService.t('premiumRequired'),
-                this.i18nService.t('premiumRequiredDesc'));
-            return;
-        }
+    const copyOptions = this.win != null ? { window: this.win } : null;
+    this.platformUtilsService.copyToClipboard(value, copyOptions);
+    this.platformUtilsService.showToast(
+      "info",
+      null,
+      this.i18nService.t("valueCopied", this.i18nService.t(typeI18nKey))
+    );
+
+    if (typeI18nKey === "password") {
+      this.eventService.collect(EventType.Cipher_ClientToggledHiddenFieldVisible, this.cipherId);
+    } else if (typeI18nKey === "securityCode") {
+      this.eventService.collect(EventType.Cipher_ClientCopiedCardCode, this.cipherId);
+    } else if (aType === "H_Field") {
+      this.eventService.collect(EventType.Cipher_ClientCopiedHiddenField, this.cipherId);
+    }
+  }
 
-        let url: string;
-        try {
-            const attachmentDownloadResponse = await this.apiService.getAttachmentData(this.cipher.id, attachment.id);
-            url = attachmentDownloadResponse.url;
-        } catch (e) {
-            if (e instanceof ErrorResponse && (e as ErrorResponse).statusCode === 404) {
-                url = attachment.url;
-            } else if (e instanceof ErrorResponse) {
-                throw new Error((e as ErrorResponse).getSingleMessage());
-            } else {
-                throw e;
-            }
-        }
+  setTextDataOnDrag(event: DragEvent, data: string) {
+    event.dataTransfer.setData("text", data);
+  }
 
-        a.downloading = true;
-        const response = await fetch(new Request(url, { cache: 'no-store' }));
-        if (response.status !== 200) {
-            this.platformUtilsService.showToast('error', null, this.i18nService.t('errorOccurred'));
-            a.downloading = false;
-            return;
-        }
+  async downloadAttachment(attachment: AttachmentView) {
+    if (!(await this.promptPassword())) {
+      return;
+    }
+    const a = attachment as any;
+    if (a.downloading) {
+      return;
+    }
 
-        try {
-            const buf = await response.arrayBuffer();
-            const key = attachment.key != null ? attachment.key :
-                await this.cryptoService.getOrgKey(this.cipher.organizationId);
-            const decBuf = await this.cryptoService.decryptFromBytes(buf, key);
-            this.platformUtilsService.saveFile(this.win, decBuf, null, attachment.fileName);
-        } catch (e) {
-            this.platformUtilsService.showToast('error', null, this.i18nService.t('errorOccurred'));
-        }
+    if (this.cipher.organizationId == null && !this.canAccessPremium) {
+      this.platformUtilsService.showToast(
+        "error",
+        this.i18nService.t("premiumRequired"),
+        this.i18nService.t("premiumRequiredDesc")
+      );
+      return;
+    }
 
-        a.downloading = false;
+    let url: string;
+    try {
+      const attachmentDownloadResponse = await this.apiService.getAttachmentData(
+        this.cipher.id,
+        attachment.id
+      );
+      url = attachmentDownloadResponse.url;
+    } catch (e) {
+      if (e instanceof ErrorResponse && (e as ErrorResponse).statusCode === 404) {
+        url = attachment.url;
+      } else if (e instanceof ErrorResponse) {
+        throw new Error((e as ErrorResponse).getSingleMessage());
+      } else {
+        throw e;
+      }
     }
 
-    protected deleteCipher() {
-        return this.cipher.isDeleted ? this.cipherService.deleteWithServer(this.cipher.id)
-            : this.cipherService.softDeleteWithServer(this.cipher.id);
+    a.downloading = true;
+    const response = await fetch(new Request(url, { cache: "no-store" }));
+    if (response.status !== 200) {
+      this.platformUtilsService.showToast("error", null, this.i18nService.t("errorOccurred"));
+      a.downloading = false;
+      return;
     }
 
-    protected restoreCipher() {
-        return this.cipherService.restoreWithServer(this.cipher.id);
+    try {
+      const buf = await response.arrayBuffer();
+      const key =
+        attachment.key != null
+          ? attachment.key
+          : await this.cryptoService.getOrgKey(this.cipher.organizationId);
+      const decBuf = await this.cryptoService.decryptFromBytes(buf, key);
+      this.platformUtilsService.saveFile(this.win, decBuf, null, attachment.fileName);
+    } catch (e) {
+      this.platformUtilsService.showToast("error", null, this.i18nService.t("errorOccurred"));
     }
 
-    protected async promptPassword() {
-        if (this.cipher.reprompt === CipherRepromptType.None || this.passwordReprompted) {
-            return true;
-        }
+    a.downloading = false;
+  }
 
-        return this.passwordReprompted = await this.passwordRepromptService.showPasswordPrompt();
-    }
+  protected deleteCipher() {
+    return this.cipher.isDeleted
+      ? this.cipherService.deleteWithServer(this.cipher.id)
+      : this.cipherService.softDeleteWithServer(this.cipher.id);
+  }
 
-    private cleanUp() {
-        this.totpCode = null;
-        this.cipher = null;
-        this.showPassword = false;
-        this.showCardNumber = false;
-        this.showCardCode = false;
-        this.passwordReprompted = false;
-        if (this.totpInterval) {
-            clearInterval(this.totpInterval);
-        }
+  protected restoreCipher() {
+    return this.cipherService.restoreWithServer(this.cipher.id);
+  }
+
+  protected async promptPassword() {
+    if (this.cipher.reprompt === CipherRepromptType.None || this.passwordReprompted) {
+      return true;
     }
 
-    private async totpUpdateCode() {
-        if (this.cipher == null || this.cipher.type !== CipherType.Login || this.cipher.login.totp == null) {
-            if (this.totpInterval) {
-                clearInterval(this.totpInterval);
-            }
-            return;
-        }
+    return (this.passwordReprompted = await this.passwordRepromptService.showPasswordPrompt());
+  }
+
+  private cleanUp() {
+    this.totpCode = null;
+    this.cipher = null;
+    this.showPassword = false;
+    this.showCardNumber = false;
+    this.showCardCode = false;
+    this.passwordReprompted = false;
+    if (this.totpInterval) {
+      clearInterval(this.totpInterval);
+    }
+  }
+
+  private async totpUpdateCode() {
+    if (
+      this.cipher == null ||
+      this.cipher.type !== CipherType.Login ||
+      this.cipher.login.totp == null
+    ) {
+      if (this.totpInterval) {
+        clearInterval(this.totpInterval);
+      }
+      return;
+    }
 
-        this.totpCode = await this.totpService.getCode(this.cipher.login.totp);
-        if (this.totpCode != null) {
-            if (this.totpCode.length > 4) {
-                const half = Math.floor(this.totpCode.length / 2);
-                this.totpCodeFormatted = this.totpCode.substring(0, half) + ' ' + this.totpCode.substring(half);
-            } else {
-                this.totpCodeFormatted = this.totpCode;
-            }
-        } else {
-            this.totpCodeFormatted = null;
-            if (this.totpInterval) {
-                clearInterval(this.totpInterval);
-            }
-        }
+    this.totpCode = await this.totpService.getCode(this.cipher.login.totp);
+    if (this.totpCode != null) {
+      if (this.totpCode.length > 4) {
+        const half = Math.floor(this.totpCode.length / 2);
+        this.totpCodeFormatted =
+          this.totpCode.substring(0, half) + " " + this.totpCode.substring(half);
+      } else {
+        this.totpCodeFormatted = this.totpCode;
+      }
+    } else {
+      this.totpCodeFormatted = null;
+      if (this.totpInterval) {
+        clearInterval(this.totpInterval);
+      }
     }
+  }
 
-    private async totpTick(intervalSeconds: number) {
-        const epoch = Math.round(new Date().getTime() / 1000.0);
-        const mod = epoch % intervalSeconds;
+  private async totpTick(intervalSeconds: number) {
+    const epoch = Math.round(new Date().getTime() / 1000.0);
+    const mod = epoch % intervalSeconds;
 
-        this.totpSec = intervalSeconds - mod;
-        this.totpDash = +(Math.round((((78.6 / intervalSeconds) * mod) + 'e+2') as any) + 'e-2');
-        this.totpLow = this.totpSec <= 7;
-        if (mod === 0) {
-            await this.totpUpdateCode();
-        }
+    this.totpSec = intervalSeconds - mod;
+    this.totpDash = +(Math.round(((78.6 / intervalSeconds) * mod + "e+2") as any) + "e-2");
+    this.totpLow = this.totpSec <= 7;
+    if (mod === 0) {
+      await this.totpUpdateCode();
     }
+  }
 }
diff --git a/jslib/angular/src/directives/a11y-title.directive.ts b/jslib/angular/src/directives/a11y-title.directive.ts
index e8d57669..20e53a55 100644
--- a/jslib/angular/src/directives/a11y-title.directive.ts
+++ b/jslib/angular/src/directives/a11y-title.directive.ts
@@ -1,28 +1,23 @@
-import {
-    Directive,
-    ElementRef,
-    Input,
-    Renderer2,
-} from '@angular/core';
+import { Directive, ElementRef, Input, Renderer2 } from "@angular/core";
 
 @Directive({
-    selector: '[appA11yTitle]',
+  selector: "[appA11yTitle]",
 })
 export class A11yTitleDirective {
-    @Input() set appA11yTitle(title: string) {
-        this.title = title;
-    }
+  @Input() set appA11yTitle(title: string) {
+    this.title = title;
+  }
 
-    private title: string;
+  private title: string;
 
-    constructor(private el: ElementRef, private renderer: Renderer2) { }
+  constructor(private el: ElementRef, private renderer: Renderer2) {}
 
-    ngOnInit() {
-        if (!this.el.nativeElement.hasAttribute('title')) {
-            this.renderer.setAttribute(this.el.nativeElement, 'title', this.title);
-        }
-        if (!this.el.nativeElement.hasAttribute('aria-label')) {
-            this.renderer.setAttribute(this.el.nativeElement, 'aria-label', this.title);
-        }
+  ngOnInit() {
+    if (!this.el.nativeElement.hasAttribute("title")) {
+      this.renderer.setAttribute(this.el.nativeElement, "title", this.title);
+    }
+    if (!this.el.nativeElement.hasAttribute("aria-label")) {
+      this.renderer.setAttribute(this.el.nativeElement, "aria-label", this.title);
     }
+  }
 }
diff --git a/jslib/angular/src/directives/api-action.directive.ts b/jslib/angular/src/directives/api-action.directive.ts
index 049d4b30..64f209c9 100644
--- a/jslib/angular/src/directives/api-action.directive.ts
+++ b/jslib/angular/src/directives/api-action.directive.ts
@@ -1,42 +1,46 @@
-import {
-    Directive,
-    ElementRef,
-    Input,
-    OnChanges,
-} from '@angular/core';
-import { LogService } from 'jslib-common/abstractions/log.service';
+import { Directive, ElementRef, Input, OnChanges } from "@angular/core";
+import { LogService } from "jslib-common/abstractions/log.service";
 
-import { ErrorResponse } from 'jslib-common/models/response/errorResponse';
+import { ErrorResponse } from "jslib-common/models/response/errorResponse";
 
-import { ValidationService } from '../services/validation.service';
+import { ValidationService } from "../services/validation.service";
 
 @Directive({
-    selector: '[appApiAction]',
+  selector: "[appApiAction]",
 })
 export class ApiActionDirective implements OnChanges {
-    @Input() appApiAction: Promise<any>;
+  @Input() appApiAction: Promise<any>;
 
-    constructor(private el: ElementRef, private validationService: ValidationService,
-        private logService: LogService) { }
+  constructor(
+    private el: ElementRef,
+    private validationService: ValidationService,
+    private logService: LogService
+  ) {}
 
-    ngOnChanges(changes: any) {
-        if (this.appApiAction == null || this.appApiAction.then == null) {
-            return;
-        }
-
-        this.el.nativeElement.loading = true;
-
-        this.appApiAction.then((response: any) => {
-            this.el.nativeElement.loading = false;
-        }, (e: any) => {
-            this.el.nativeElement.loading = false;
-
-            if ((e instanceof ErrorResponse || e.constructor.name === 'ErrorResponse') && (e as ErrorResponse).captchaRequired) {
-                this.logService.error('Captcha required error response: ' + e.getSingleMessage());
-                return;
-            }
-            this.logService?.error(`Received API exception: ${e}`);
-            this.validationService.showError(e);
-        });
+  ngOnChanges(changes: any) {
+    if (this.appApiAction == null || this.appApiAction.then == null) {
+      return;
     }
+
+    this.el.nativeElement.loading = true;
+
+    this.appApiAction.then(
+      (response: any) => {
+        this.el.nativeElement.loading = false;
+      },
+      (e: any) => {
+        this.el.nativeElement.loading = false;
+
+        if (
+          (e instanceof ErrorResponse || e.constructor.name === "ErrorResponse") &&
+          (e as ErrorResponse).captchaRequired
+        ) {
+          this.logService.error("Captcha required error response: " + e.getSingleMessage());
+          return;
+        }
+        this.logService?.error(`Received API exception: ${e}`);
+        this.validationService.showError(e);
+      }
+    );
+  }
 }
diff --git a/jslib/angular/src/directives/autofocus.directive.ts b/jslib/angular/src/directives/autofocus.directive.ts
index 89b0cfd9..a90a8075 100644
--- a/jslib/angular/src/directives/autofocus.directive.ts
+++ b/jslib/angular/src/directives/autofocus.directive.ts
@@ -1,33 +1,28 @@
-import {
-    Directive,
-    ElementRef,
-    Input,
-    NgZone,
-} from '@angular/core';
+import { Directive, ElementRef, Input, NgZone } from "@angular/core";
 
-import { take } from 'rxjs/operators';
+import { take } from "rxjs/operators";
 
-import { Utils } from 'jslib-common/misc/utils';
+import { Utils } from "jslib-common/misc/utils";
 
 @Directive({
-    selector: '[appAutofocus]',
+  selector: "[appAutofocus]",
 })
 export class AutofocusDirective {
-    @Input() set appAutofocus(condition: boolean | string) {
-        this.autofocus = condition === '' || condition === true;
-    }
+  @Input() set appAutofocus(condition: boolean | string) {
+    this.autofocus = condition === "" || condition === true;
+  }
 
-    private autofocus: boolean;
+  private autofocus: boolean;
 
-    constructor(private el: ElementRef, private ngZone: NgZone) { }
+  constructor(private el: ElementRef, private ngZone: NgZone) {}
 
-    ngOnInit() {
-        if (!Utils.isMobileBrowser && this.autofocus) {
-            if (this.ngZone.isStable) {
-                this.el.nativeElement.focus();
-            } else {
-                this.ngZone.onStable.pipe(take(1)).subscribe(() => this.el.nativeElement.focus());
-            }
-        }
+  ngOnInit() {
+    if (!Utils.isMobileBrowser && this.autofocus) {
+      if (this.ngZone.isStable) {
+        this.el.nativeElement.focus();
+      } else {
+        this.ngZone.onStable.pipe(take(1)).subscribe(() => this.el.nativeElement.focus());
+      }
     }
+  }
 }
diff --git a/jslib/angular/src/directives/blur-click.directive.ts b/jslib/angular/src/directives/blur-click.directive.ts
index 48555bb9..2fc1d367 100644
--- a/jslib/angular/src/directives/blur-click.directive.ts
+++ b/jslib/angular/src/directives/blur-click.directive.ts
@@ -1,17 +1,12 @@
-import {
-    Directive,
-    ElementRef,
-    HostListener,
-} from '@angular/core';
+import { Directive, ElementRef, HostListener } from "@angular/core";
 
 @Directive({
-    selector: '[appBlurClick]',
+  selector: "[appBlurClick]",
 })
 export class BlurClickDirective {
-    constructor(private el: ElementRef) {
-    }
+  constructor(private el: ElementRef) {}
 
-    @HostListener('click') onClick() {
-        this.el.nativeElement.blur();
-    }
+  @HostListener("click") onClick() {
+    this.el.nativeElement.blur();
+  }
 }
diff --git a/jslib/angular/src/directives/box-row.directive.ts b/jslib/angular/src/directives/box-row.directive.ts
index a7dd0bee..049f0434 100644
--- a/jslib/angular/src/directives/box-row.directive.ts
+++ b/jslib/angular/src/directives/box-row.directive.ts
@@ -1,51 +1,59 @@
-import {
-    Directive,
-    ElementRef,
-    HostListener,
-    OnInit,
-} from '@angular/core';
+import { Directive, ElementRef, HostListener, OnInit } from "@angular/core";
 
 @Directive({
-    selector: '[appBoxRow]',
+  selector: "[appBoxRow]",
 })
 export class BoxRowDirective implements OnInit {
-    el: HTMLElement = null;
-    formEls: Element[];
+  el: HTMLElement = null;
+  formEls: Element[];
 
-    constructor(private elRef: ElementRef) {
-        this.el = elRef.nativeElement;
-    }
+  constructor(private elRef: ElementRef) {
+    this.el = elRef.nativeElement;
+  }
 
-    ngOnInit(): void {
-        this.formEls = Array.from(this.el.querySelectorAll('input:not([type="hidden"]), select, textarea'));
-        this.formEls.forEach(formEl => {
-            formEl.addEventListener('focus', (event: Event) => {
-                this.el.classList.add('active');
-            }, false);
+  ngOnInit(): void {
+    this.formEls = Array.from(
+      this.el.querySelectorAll('input:not([type="hidden"]), select, textarea')
+    );
+    this.formEls.forEach((formEl) => {
+      formEl.addEventListener(
+        "focus",
+        (event: Event) => {
+          this.el.classList.add("active");
+        },
+        false
+      );
 
-            formEl.addEventListener('blur', (event: Event) => {
-                this.el.classList.remove('active');
-            }, false);
-        });
-    }
+      formEl.addEventListener(
+        "blur",
+        (event: Event) => {
+          this.el.classList.remove("active");
+        },
+        false
+      );
+    });
+  }
 
-    @HostListener('click', ['$event']) onClick(event: Event) {
-        const target = event.target as HTMLElement;
-        if (target !== this.el && !target.classList.contains('progress') &&
-            !target.classList.contains('progress-bar')) {
-            return;
-        }
+  @HostListener("click", ["$event"]) onClick(event: Event) {
+    const target = event.target as HTMLElement;
+    if (
+      target !== this.el &&
+      !target.classList.contains("progress") &&
+      !target.classList.contains("progress-bar")
+    ) {
+      return;
+    }
 
-        if (this.formEls.length > 0) {
-            const formEl = (this.formEls[0] as HTMLElement);
-            if (formEl.tagName.toLowerCase() === 'input') {
-                const inputEl = (formEl as HTMLInputElement);
-                if (inputEl.type != null && inputEl.type.toLowerCase() === 'checkbox') {
-                    inputEl.click();
-                    return;
-                }
-            }
-            formEl.focus();
+    if (this.formEls.length > 0) {
+      const formEl = this.formEls[0] as HTMLElement;
+      if (formEl.tagName.toLowerCase() === "input") {
+        const inputEl = formEl as HTMLInputElement;
+        if (inputEl.type != null && inputEl.type.toLowerCase() === "checkbox") {
+          inputEl.click();
+          return;
         }
+      }
+      formEl.focus();
     }
+  }
 }
diff --git a/jslib/angular/src/directives/cipherListVirtualScroll.directive.ts b/jslib/angular/src/directives/cipherListVirtualScroll.directive.ts
index a0c8a6f4..7b906b53 100644
--- a/jslib/angular/src/directives/cipherListVirtualScroll.directive.ts
+++ b/jslib/angular/src/directives/cipherListVirtualScroll.directive.ts
@@ -1,62 +1,76 @@
 import {
-    CdkFixedSizeVirtualScroll,
-    FixedSizeVirtualScrollStrategy,
-    VIRTUAL_SCROLL_STRATEGY,
-} from '@angular/cdk/scrolling';
-import {
-    Directive,
-    forwardRef,
-} from '@angular/core';
+  CdkFixedSizeVirtualScroll,
+  FixedSizeVirtualScrollStrategy,
+  VIRTUAL_SCROLL_STRATEGY,
+} from "@angular/cdk/scrolling";
+import { Directive, forwardRef } from "@angular/core";
 
 // Custom virtual scroll strategy for cdk-virtual-scroll
 // Uses a sample list item to set the itemSize for FixedSizeVirtualScrollStrategy
 // The use case is the same as FixedSizeVirtualScrollStrategy, but it avoids locking in pixel sizes in the template.
 export class CipherListVirtualScrollStrategy extends FixedSizeVirtualScrollStrategy {
-    private checkItemSizeCallback: any;
-    private timeout: any;
-
-    constructor(itemSize: number, minBufferPx: number, maxBufferPx: number, checkItemSizeCallback: any) {
-        super(itemSize, minBufferPx, maxBufferPx);
-        this.checkItemSizeCallback = checkItemSizeCallback;
-    }
+  private checkItemSizeCallback: any;
+  private timeout: any;
 
-    onContentRendered() {
-        if (this.timeout != null) {
-            clearTimeout(this.timeout);
-        }
+  constructor(
+    itemSize: number,
+    minBufferPx: number,
+    maxBufferPx: number,
+    checkItemSizeCallback: any
+  ) {
+    super(itemSize, minBufferPx, maxBufferPx);
+    this.checkItemSizeCallback = checkItemSizeCallback;
+  }
 
-        this.timeout = setTimeout(this.checkItemSizeCallback, 500);
+  onContentRendered() {
+    if (this.timeout != null) {
+      clearTimeout(this.timeout);
     }
+
+    this.timeout = setTimeout(this.checkItemSizeCallback, 500);
+  }
 }
 
 export function _cipherListVirtualScrollStrategyFactory(cipherListDir: CipherListVirtualScroll) {
-    return cipherListDir._scrollStrategy;
+  return cipherListDir._scrollStrategy;
 }
 
 @Directive({
-    selector: 'cdk-virtual-scroll-viewport[itemSize]',
-    providers: [{
-        provide: VIRTUAL_SCROLL_STRATEGY,
-        useFactory: _cipherListVirtualScrollStrategyFactory,
-        deps: [forwardRef(() => CipherListVirtualScroll)],
-    }],
+  selector: "cdk-virtual-scroll-viewport[itemSize]",
+  providers: [
+    {
+      provide: VIRTUAL_SCROLL_STRATEGY,
+      useFactory: _cipherListVirtualScrollStrategyFactory,
+      deps: [forwardRef(() => CipherListVirtualScroll)],
+    },
+  ],
 })
 export class CipherListVirtualScroll extends CdkFixedSizeVirtualScroll {
-    _scrollStrategy: CipherListVirtualScrollStrategy;
+  _scrollStrategy: CipherListVirtualScrollStrategy;
 
-    constructor() {
-        super();
-        this._scrollStrategy = new CipherListVirtualScrollStrategy(this.itemSize, this.minBufferPx, this.maxBufferPx,
-            this.checkAndUpdateItemSize);
-    }
+  constructor() {
+    super();
+    this._scrollStrategy = new CipherListVirtualScrollStrategy(
+      this.itemSize,
+      this.minBufferPx,
+      this.maxBufferPx,
+      this.checkAndUpdateItemSize
+    );
+  }
 
-    checkAndUpdateItemSize = () => {
-        const sampleItem = document.querySelector('cdk-virtual-scroll-viewport .virtual-scroll-item') as HTMLElement;
-        const newItemSize = sampleItem?.offsetHeight;
+  checkAndUpdateItemSize = () => {
+    const sampleItem = document.querySelector(
+      "cdk-virtual-scroll-viewport .virtual-scroll-item"
+    ) as HTMLElement;
+    const newItemSize = sampleItem?.offsetHeight;
 
-        if (newItemSize != null && newItemSize !== this.itemSize) {
-            this.itemSize = newItemSize;
-            this._scrollStrategy.updateItemAndBufferSize(this.itemSize, this.minBufferPx, this.maxBufferPx);
-        }
+    if (newItemSize != null && newItemSize !== this.itemSize) {
+      this.itemSize = newItemSize;
+      this._scrollStrategy.updateItemAndBufferSize(
+        this.itemSize,
+        this.minBufferPx,
+        this.maxBufferPx
+      );
     }
+  };
 }
diff --git a/jslib/angular/src/directives/fallback-src.directive.ts b/jslib/angular/src/directives/fallback-src.directive.ts
index 3e5e3381..11bce205 100644
--- a/jslib/angular/src/directives/fallback-src.directive.ts
+++ b/jslib/angular/src/directives/fallback-src.directive.ts
@@ -1,20 +1,14 @@
-import {
-    Directive,
-    ElementRef,
-    HostListener,
-    Input,
-} from '@angular/core';
+import { Directive, ElementRef, HostListener, Input } from "@angular/core";
 
 @Directive({
-    selector: '[appFallbackSrc]',
+  selector: "[appFallbackSrc]",
 })
 export class FallbackSrcDirective {
-    @Input('appFallbackSrc') appFallbackSrc: string;
+  @Input("appFallbackSrc") appFallbackSrc: string;
 
-    constructor(private el: ElementRef) {
-    }
+  constructor(private el: ElementRef) {}
 
-    @HostListener('error') onError() {
-        this.el.nativeElement.src = this.appFallbackSrc;
-    }
+  @HostListener("error") onError() {
+    this.el.nativeElement.src = this.appFallbackSrc;
+  }
 }
diff --git a/jslib/angular/src/directives/input-verbatim.directive.ts b/jslib/angular/src/directives/input-verbatim.directive.ts
index 9c94fbcb..3dd1975a 100644
--- a/jslib/angular/src/directives/input-verbatim.directive.ts
+++ b/jslib/angular/src/directives/input-verbatim.directive.ts
@@ -1,37 +1,32 @@
-import {
-    Directive,
-    ElementRef,
-    Input,
-    Renderer2,
-} from '@angular/core';
+import { Directive, ElementRef, Input, Renderer2 } from "@angular/core";
 
 @Directive({
-    selector: '[appInputVerbatim]',
+  selector: "[appInputVerbatim]",
 })
 export class InputVerbatimDirective {
-    @Input() set appInputVerbatim(condition: boolean | string) {
-        this.disableComplete = condition === '' || condition === true;
-    }
+  @Input() set appInputVerbatim(condition: boolean | string) {
+    this.disableComplete = condition === "" || condition === true;
+  }
 
-    private disableComplete: boolean;
+  private disableComplete: boolean;
 
-    constructor(private el: ElementRef, private renderer: Renderer2) { }
+  constructor(private el: ElementRef, private renderer: Renderer2) {}
 
-    ngOnInit() {
-        if (this.disableComplete && !this.el.nativeElement.hasAttribute('autocomplete')) {
-            this.renderer.setAttribute(this.el.nativeElement, 'autocomplete', 'off');
-        }
-        if (!this.el.nativeElement.hasAttribute('autocapitalize')) {
-            this.renderer.setAttribute(this.el.nativeElement, 'autocapitalize', 'none');
-        }
-        if (!this.el.nativeElement.hasAttribute('autocorrect')) {
-            this.renderer.setAttribute(this.el.nativeElement, 'autocorrect', 'none');
-        }
-        if (!this.el.nativeElement.hasAttribute('spellcheck')) {
-            this.renderer.setAttribute(this.el.nativeElement, 'spellcheck', 'false');
-        }
-        if (!this.el.nativeElement.hasAttribute('inputmode')) {
-            this.renderer.setAttribute(this.el.nativeElement, 'inputmode', 'verbatim');
-        }
+  ngOnInit() {
+    if (this.disableComplete && !this.el.nativeElement.hasAttribute("autocomplete")) {
+      this.renderer.setAttribute(this.el.nativeElement, "autocomplete", "off");
+    }
+    if (!this.el.nativeElement.hasAttribute("autocapitalize")) {
+      this.renderer.setAttribute(this.el.nativeElement, "autocapitalize", "none");
+    }
+    if (!this.el.nativeElement.hasAttribute("autocorrect")) {
+      this.renderer.setAttribute(this.el.nativeElement, "autocorrect", "none");
+    }
+    if (!this.el.nativeElement.hasAttribute("spellcheck")) {
+      this.renderer.setAttribute(this.el.nativeElement, "spellcheck", "false");
+    }
+    if (!this.el.nativeElement.hasAttribute("inputmode")) {
+      this.renderer.setAttribute(this.el.nativeElement, "inputmode", "verbatim");
     }
+  }
 }
diff --git a/jslib/angular/src/directives/select-copy.directive.ts b/jslib/angular/src/directives/select-copy.directive.ts
index 1edc0bdd..81d4928b 100644
--- a/jslib/angular/src/directives/select-copy.directive.ts
+++ b/jslib/angular/src/directives/select-copy.directive.ts
@@ -1,41 +1,37 @@
-import {
-    Directive,
-    ElementRef,
-    HostListener,
-} from '@angular/core';
+import { Directive, ElementRef, HostListener } from "@angular/core";
 
-import { PlatformUtilsService } from 'jslib-common/abstractions/platformUtils.service';
+import { PlatformUtilsService } from "jslib-common/abstractions/platformUtils.service";
 
 @Directive({
-    selector: '[appSelectCopy]',
+  selector: "[appSelectCopy]",
 })
 export class SelectCopyDirective {
-    constructor(private el: ElementRef, private platformUtilsService: PlatformUtilsService) { }
+  constructor(private el: ElementRef, private platformUtilsService: PlatformUtilsService) {}
 
-    @HostListener('copy') onCopy() {
-        if (window == null) {
-            return;
-        }
-        let copyText = '';
-        const selection = window.getSelection();
-        for (let i = 0; i < selection.rangeCount; i++) {
-            const range = selection.getRangeAt(i);
-            const text = range.toString();
+  @HostListener("copy") onCopy() {
+    if (window == null) {
+      return;
+    }
+    let copyText = "";
+    const selection = window.getSelection();
+    for (let i = 0; i < selection.rangeCount; i++) {
+      const range = selection.getRangeAt(i);
+      const text = range.toString();
 
-            // The selection should only contain one line of text. In some cases however, the
-            // selection contains newlines and space characters from the indentation of following
-            // sibling nodes. To avoid copying passwords containing trailing newlines and spaces
-            // that aren't part of the password, the selection has to be trimmed.
-            let stringEndPos = text.length;
-            const newLinePos = text.search(/(?:\r\n|\r|\n)/);
-            if (newLinePos > -1) {
-                const otherPart = text.substr(newLinePos).trim();
-                if (otherPart === '') {
-                    stringEndPos = newLinePos;
-                }
-            }
-            copyText += text.substring(0, stringEndPos);
+      // The selection should only contain one line of text. In some cases however, the
+      // selection contains newlines and space characters from the indentation of following
+      // sibling nodes. To avoid copying passwords containing trailing newlines and spaces
+      // that aren't part of the password, the selection has to be trimmed.
+      let stringEndPos = text.length;
+      const newLinePos = text.search(/(?:\r\n|\r|\n)/);
+      if (newLinePos > -1) {
+        const otherPart = text.substr(newLinePos).trim();
+        if (otherPart === "") {
+          stringEndPos = newLinePos;
         }
-        this.platformUtilsService.copyToClipboard(copyText, { window: window });
+      }
+      copyText += text.substring(0, stringEndPos);
     }
+    this.platformUtilsService.copyToClipboard(copyText, { window: window });
+  }
 }
diff --git a/jslib/angular/src/directives/stop-click.directive.ts b/jslib/angular/src/directives/stop-click.directive.ts
index 0529556b..0e88dde3 100644
--- a/jslib/angular/src/directives/stop-click.directive.ts
+++ b/jslib/angular/src/directives/stop-click.directive.ts
@@ -1,13 +1,10 @@
-import {
-    Directive,
-    HostListener,
-} from '@angular/core';
+import { Directive, HostListener } from "@angular/core";
 
 @Directive({
-    selector: '[appStopClick]',
+  selector: "[appStopClick]",
 })
 export class StopClickDirective {
-    @HostListener('click', ['$event']) onClick($event: MouseEvent) {
-        $event.preventDefault();
-    }
+  @HostListener("click", ["$event"]) onClick($event: MouseEvent) {
+    $event.preventDefault();
+  }
 }
diff --git a/jslib/angular/src/directives/stop-prop.directive.ts b/jslib/angular/src/directives/stop-prop.directive.ts
index b241f628..8393e799 100644
--- a/jslib/angular/src/directives/stop-prop.directive.ts
+++ b/jslib/angular/src/directives/stop-prop.directive.ts
@@ -1,13 +1,10 @@
-import {
-    Directive,
-    HostListener,
-} from '@angular/core';
+import { Directive, HostListener } from "@angular/core";
 
 @Directive({
-    selector: '[appStopProp]',
+  selector: "[appStopProp]",
 })
 export class StopPropDirective {
-    @HostListener('click', ['$event']) onClick($event: MouseEvent) {
-        $event.stopPropagation();
-    }
+  @HostListener("click", ["$event"]) onClick($event: MouseEvent) {
+    $event.stopPropagation();
+  }
 }
diff --git a/jslib/angular/src/directives/true-false-value.directive.ts b/jslib/angular/src/directives/true-false-value.directive.ts
index 6dcf628e..6b553c61 100644
--- a/jslib/angular/src/directives/true-false-value.directive.ts
+++ b/jslib/angular/src/directives/true-false-value.directive.ts
@@ -1,54 +1,49 @@
-import {
-    Directive,
-    ElementRef,
-    forwardRef,
-    HostListener,
-    Input,
-    Renderer2,
-} from '@angular/core';
-import {
-    ControlValueAccessor,
-    NgControl,
-    NG_VALUE_ACCESSOR,
-} from '@angular/forms';
+import { Directive, ElementRef, forwardRef, HostListener, Input, Renderer2 } from "@angular/core";
+import { ControlValueAccessor, NgControl, NG_VALUE_ACCESSOR } from "@angular/forms";
 
 // ref: https://juristr.com/blog/2018/02/ng-true-value-directive/
 @Directive({
-    selector: 'input[type=checkbox][appTrueFalseValue]',
-    providers: [
-        {
-            provide: NG_VALUE_ACCESSOR,
-            useExisting: forwardRef(() => TrueFalseValueDirective),
-            multi: true,
-        },
-    ],
+  selector: "input[type=checkbox][appTrueFalseValue]",
+  providers: [
+    {
+      provide: NG_VALUE_ACCESSOR,
+      useExisting: forwardRef(() => TrueFalseValueDirective),
+      multi: true,
+    },
+  ],
 })
 export class TrueFalseValueDirective implements ControlValueAccessor {
-    @Input() trueValue = true;
-    @Input() falseValue = false;
+  @Input() trueValue = true;
+  @Input() falseValue = false;
 
-    constructor(private elementRef: ElementRef, private renderer: Renderer2) { }
+  constructor(private elementRef: ElementRef, private renderer: Renderer2) {}
 
-    @HostListener('change', ['$event'])
-    onHostChange(ev: any) {
-        this.propagateChange(ev.target.checked ? this.trueValue : this.falseValue);
-    }
+  @HostListener("change", ["$event"])
+  onHostChange(ev: any) {
+    this.propagateChange(ev.target.checked ? this.trueValue : this.falseValue);
+  }
 
-    writeValue(obj: any): void {
-        if (obj === this.trueValue) {
-            this.renderer.setProperty(this.elementRef.nativeElement, 'checked', true);
-        } else {
-            this.renderer.setProperty(this.elementRef.nativeElement, 'checked', false);
-        }
+  writeValue(obj: any): void {
+    if (obj === this.trueValue) {
+      this.renderer.setProperty(this.elementRef.nativeElement, "checked", true);
+    } else {
+      this.renderer.setProperty(this.elementRef.nativeElement, "checked", false);
     }
+  }
 
-    registerOnChange(fn: any): void {
-        this.propagateChange = fn;
-    }
+  registerOnChange(fn: any): void {
+    this.propagateChange = fn;
+  }
 
-    registerOnTouched(fn: any): void { /* nothing */ }
+  registerOnTouched(fn: any): void {
+    /* nothing */
+  }
 
-    setDisabledState?(isDisabled: boolean): void { /* nothing */ }
+  setDisabledState?(isDisabled: boolean): void {
+    /* nothing */
+  }
 
-    private propagateChange = (_: any) => { /* nothing */ };
+  private propagateChange = (_: any) => {
+    /* nothing */
+  };
 }
diff --git a/jslib/angular/src/images/cards/amex-dark.png b/jslib/angular/src/images/cards/amex-dark.png
new file mode 100644
index 00000000..ac1b0759
Binary files /dev/null and b/jslib/angular/src/images/cards/amex-dark.png differ
diff --git a/jslib/angular/src/images/cards/amex-light.png b/jslib/angular/src/images/cards/amex-light.png
new file mode 100644
index 00000000..ac1b0759
Binary files /dev/null and b/jslib/angular/src/images/cards/amex-light.png differ
diff --git a/jslib/angular/src/images/cards/diners_club-dark.png b/jslib/angular/src/images/cards/diners_club-dark.png
new file mode 100644
index 00000000..a5d23233
Binary files /dev/null and b/jslib/angular/src/images/cards/diners_club-dark.png differ
diff --git a/jslib/angular/src/images/cards/diners_club-light.png b/jslib/angular/src/images/cards/diners_club-light.png
new file mode 100644
index 00000000..e2e33a24
Binary files /dev/null and b/jslib/angular/src/images/cards/diners_club-light.png differ
diff --git a/jslib/angular/src/images/cards/discover-dark.png b/jslib/angular/src/images/cards/discover-dark.png
new file mode 100644
index 00000000..2ed6f6f9
Binary files /dev/null and b/jslib/angular/src/images/cards/discover-dark.png differ
diff --git a/jslib/angular/src/images/cards/discover-light.png b/jslib/angular/src/images/cards/discover-light.png
new file mode 100644
index 00000000..755c6957
Binary files /dev/null and b/jslib/angular/src/images/cards/discover-light.png differ
diff --git a/jslib/angular/src/images/cards/jcb-dark.png b/jslib/angular/src/images/cards/jcb-dark.png
new file mode 100644
index 00000000..1cb484d9
Binary files /dev/null and b/jslib/angular/src/images/cards/jcb-dark.png differ
diff --git a/jslib/angular/src/images/cards/jcb-light.png b/jslib/angular/src/images/cards/jcb-light.png
new file mode 100644
index 00000000..2b89f5b9
Binary files /dev/null and b/jslib/angular/src/images/cards/jcb-light.png differ
diff --git a/jslib/angular/src/images/cards/maestro-dark.png b/jslib/angular/src/images/cards/maestro-dark.png
new file mode 100644
index 00000000..4a4879b5
Binary files /dev/null and b/jslib/angular/src/images/cards/maestro-dark.png differ
diff --git a/jslib/angular/src/images/cards/maestro-light.png b/jslib/angular/src/images/cards/maestro-light.png
new file mode 100644
index 00000000..2329738a
Binary files /dev/null and b/jslib/angular/src/images/cards/maestro-light.png differ
diff --git a/jslib/angular/src/images/cards/mastercard-dark.png b/jslib/angular/src/images/cards/mastercard-dark.png
new file mode 100644
index 00000000..cd806263
Binary files /dev/null and b/jslib/angular/src/images/cards/mastercard-dark.png differ
diff --git a/jslib/angular/src/images/cards/mastercard-light.png b/jslib/angular/src/images/cards/mastercard-light.png
new file mode 100644
index 00000000..f87ae259
Binary files /dev/null and b/jslib/angular/src/images/cards/mastercard-light.png differ
diff --git a/jslib/angular/src/images/cards/union_pay-dark.png b/jslib/angular/src/images/cards/union_pay-dark.png
new file mode 100644
index 00000000..248be7c3
Binary files /dev/null and b/jslib/angular/src/images/cards/union_pay-dark.png differ
diff --git a/jslib/angular/src/images/cards/union_pay-light.png b/jslib/angular/src/images/cards/union_pay-light.png
new file mode 100644
index 00000000..2d75aa90
Binary files /dev/null and b/jslib/angular/src/images/cards/union_pay-light.png differ
diff --git a/jslib/angular/src/images/cards/visa-dark.png b/jslib/angular/src/images/cards/visa-dark.png
new file mode 100644
index 00000000..0705b68e
Binary files /dev/null and b/jslib/angular/src/images/cards/visa-dark.png differ
diff --git a/jslib/angular/src/images/cards/visa-light.png b/jslib/angular/src/images/cards/visa-light.png
new file mode 100644
index 00000000..3dc8ae50
Binary files /dev/null and b/jslib/angular/src/images/cards/visa-light.png differ
diff --git a/jslib/angular/src/pipes/color-password.pipe.ts b/jslib/angular/src/pipes/color-password.pipe.ts
index a6b4d8ec..f3a87d12 100644
--- a/jslib/angular/src/pipes/color-password.pipe.ts
+++ b/jslib/angular/src/pipes/color-password.pipe.ts
@@ -1,53 +1,50 @@
-import {
-    Pipe,
-    PipeTransform,
-} from '@angular/core';
-import { Utils } from 'jslib-common/misc/utils';
+import { Pipe, PipeTransform } from "@angular/core";
+import { Utils } from "jslib-common/misc/utils";
 
 /*
  An updated pipe that sanitizes HTML, highlights numbers and special characters (in different colors each)
  and handles Unicode / Emoji characters correctly.
 */
-@Pipe({ name: 'colorPassword' })
+@Pipe({ name: "colorPassword" })
 export class ColorPasswordPipe implements PipeTransform {
-    transform(password: string) {
-        // Convert to an array to handle cases that stings have special characters, ie: emoji.
-        const passwordArray = Array.from(password);
-        let colorizedPassword = '';
-        for (let i = 0; i < passwordArray.length; i++) {
-            let character = passwordArray[i];
-            let isSpecial = false;
-            // Sanitize HTML first.
-            switch (character) {
-                case '&':
-                    character = '&amp;';
-                    isSpecial = true;
-                    break;
-                case '<':
-                    character = '&lt;';
-                    isSpecial = true;
-                    break;
-                case '>':
-                    character = '&gt;';
-                    isSpecial = true;
-                    break;
-                case ' ':
-                    character = '&nbsp;';
-                    isSpecial = true;
-                    break;
-                default:
-                    break;
-            }
-            let type = 'letter';
-            if (character.match(Utils.regexpEmojiPresentation)) {
-                type = 'emoji';
-            } else if (isSpecial || character.match(/[^\w ]/)) {
-                type = 'special';
-            } else if (character.match(/\d/)) {
-                type = 'number';
-            }
-            colorizedPassword += '<span class="password-' + type + '">' + character + '</span>';
-        }
-        return colorizedPassword;
+  transform(password: string) {
+    // Convert to an array to handle cases that stings have special characters, ie: emoji.
+    const passwordArray = Array.from(password);
+    let colorizedPassword = "";
+    for (let i = 0; i < passwordArray.length; i++) {
+      let character = passwordArray[i];
+      let isSpecial = false;
+      // Sanitize HTML first.
+      switch (character) {
+        case "&":
+          character = "&amp;";
+          isSpecial = true;
+          break;
+        case "<":
+          character = "&lt;";
+          isSpecial = true;
+          break;
+        case ">":
+          character = "&gt;";
+          isSpecial = true;
+          break;
+        case " ":
+          character = "&nbsp;";
+          isSpecial = true;
+          break;
+        default:
+          break;
+      }
+      let type = "letter";
+      if (character.match(Utils.regexpEmojiPresentation)) {
+        type = "emoji";
+      } else if (isSpecial || character.match(/[^\w ]/)) {
+        type = "special";
+      } else if (character.match(/\d/)) {
+        type = "number";
+      }
+      colorizedPassword += '<span class="password-' + type + '">' + character + "</span>";
     }
+    return colorizedPassword;
+  }
 }
diff --git a/jslib/angular/src/pipes/i18n.pipe.ts b/jslib/angular/src/pipes/i18n.pipe.ts
index 4f3e470b..8fc09434 100644
--- a/jslib/angular/src/pipes/i18n.pipe.ts
+++ b/jslib/angular/src/pipes/i18n.pipe.ts
@@ -1,17 +1,14 @@
-import {
-    Pipe,
-    PipeTransform,
-} from '@angular/core';
+import { Pipe, PipeTransform } from "@angular/core";
 
-import { I18nService } from 'jslib-common/abstractions/i18n.service';
+import { I18nService } from "jslib-common/abstractions/i18n.service";
 
 @Pipe({
-    name: 'i18n',
+  name: "i18n",
 })
 export class I18nPipe implements PipeTransform {
-    constructor(private i18nService: I18nService) { }
+  constructor(private i18nService: I18nService) {}
 
-    transform(id: string, p1?: string, p2?: string, p3?: string): string {
-        return this.i18nService.t(id, p1, p2, p3);
-    }
+  transform(id: string, p1?: string, p2?: string, p3?: string): string {
+    return this.i18nService.t(id, p1, p2, p3);
+  }
 }
diff --git a/jslib/angular/src/pipes/search-ciphers.pipe.ts b/jslib/angular/src/pipes/search-ciphers.pipe.ts
index 92783f32..0842954c 100644
--- a/jslib/angular/src/pipes/search-ciphers.pipe.ts
+++ b/jslib/angular/src/pipes/search-ciphers.pipe.ts
@@ -1,44 +1,41 @@
-import {
-    Pipe,
-    PipeTransform,
-} from '@angular/core';
+import { Pipe, PipeTransform } from "@angular/core";
 
-import { CipherView } from 'jslib-common/models/view/cipherView';
+import { CipherView } from "jslib-common/models/view/cipherView";
 
 @Pipe({
-    name: 'searchCiphers',
+  name: "searchCiphers",
 })
 export class SearchCiphersPipe implements PipeTransform {
-    transform(ciphers: CipherView[], searchText: string, deleted: boolean = false): CipherView[] {
-        if (ciphers == null || ciphers.length === 0) {
-            return [];
-        }
+  transform(ciphers: CipherView[], searchText: string, deleted: boolean = false): CipherView[] {
+    if (ciphers == null || ciphers.length === 0) {
+      return [];
+    }
 
-        if (searchText == null || searchText.length < 2) {
-            return ciphers.filter(c => {
-                return deleted !== c.isDeleted;
-            });
-        }
+    if (searchText == null || searchText.length < 2) {
+      return ciphers.filter((c) => {
+        return deleted !== c.isDeleted;
+      });
+    }
 
-        searchText = searchText.trim().toLowerCase();
-        return ciphers.filter(c => {
-            if (deleted !== c.isDeleted) {
-                return false;
-            }
-            if (c.name != null && c.name.toLowerCase().indexOf(searchText) > -1) {
-                return true;
-            }
-            if (searchText.length >= 8 && c.id.startsWith(searchText)) {
-                return true;
-            }
-            if (c.subTitle != null && c.subTitle.toLowerCase().indexOf(searchText) > -1) {
-                return true;
-            }
-            if (c.login && c.login.uri != null && c.login.uri.toLowerCase().indexOf(searchText) > -1) {
-                return true;
-            }
+    searchText = searchText.trim().toLowerCase();
+    return ciphers.filter((c) => {
+      if (deleted !== c.isDeleted) {
+        return false;
+      }
+      if (c.name != null && c.name.toLowerCase().indexOf(searchText) > -1) {
+        return true;
+      }
+      if (searchText.length >= 8 && c.id.startsWith(searchText)) {
+        return true;
+      }
+      if (c.subTitle != null && c.subTitle.toLowerCase().indexOf(searchText) > -1) {
+        return true;
+      }
+      if (c.login && c.login.uri != null && c.login.uri.toLowerCase().indexOf(searchText) > -1) {
+        return true;
+      }
 
-            return false;
-        });
-    }
+      return false;
+    });
+  }
 }
diff --git a/jslib/angular/src/pipes/search.pipe.ts b/jslib/angular/src/pipes/search.pipe.ts
index 6c9e140b..bf09d2de 100644
--- a/jslib/angular/src/pipes/search.pipe.ts
+++ b/jslib/angular/src/pipes/search.pipe.ts
@@ -1,33 +1,48 @@
-import {
-    Pipe,
-    PipeTransform,
-} from '@angular/core';
+import { Pipe, PipeTransform } from "@angular/core";
 
 @Pipe({
-    name: 'search',
+  name: "search",
 })
 export class SearchPipe implements PipeTransform {
-    transform(items: any[], searchText: string, prop1?: string, prop2?: string, prop3?: string): any[] {
-        if (items == null || items.length === 0) {
-            return [];
-        }
-
-        if (searchText == null || searchText.length < 2) {
-            return items;
-        }
+  transform(
+    items: any[],
+    searchText: string,
+    prop1?: string,
+    prop2?: string,
+    prop3?: string
+  ): any[] {
+    if (items == null || items.length === 0) {
+      return [];
+    }
 
-        searchText = searchText.trim().toLowerCase();
-        return items.filter(i => {
-            if (prop1 != null && i[prop1] != null && i[prop1].toString().toLowerCase().indexOf(searchText) > -1) {
-                return true;
-            }
-            if (prop2 != null && i[prop2] != null && i[prop2].toString().toLowerCase().indexOf(searchText) > -1) {
-                return true;
-            }
-            if (prop3 != null && i[prop3] != null && i[prop3].toString().toLowerCase().indexOf(searchText) > -1) {
-                return true;
-            }
-            return false;
-        });
+    if (searchText == null || searchText.length < 2) {
+      return items;
     }
+
+    searchText = searchText.trim().toLowerCase();
+    return items.filter((i) => {
+      if (
+        prop1 != null &&
+        i[prop1] != null &&
+        i[prop1].toString().toLowerCase().indexOf(searchText) > -1
+      ) {
+        return true;
+      }
+      if (
+        prop2 != null &&
+        i[prop2] != null &&
+        i[prop2].toString().toLowerCase().indexOf(searchText) > -1
+      ) {
+        return true;
+      }
+      if (
+        prop3 != null &&
+        i[prop3] != null &&
+        i[prop3].toString().toLowerCase().indexOf(searchText) > -1
+      ) {
+        return true;
+      }
+      return false;
+    });
+  }
 }
diff --git a/jslib/angular/src/pipes/user-name.pipe.ts b/jslib/angular/src/pipes/user-name.pipe.ts
index 43397528..22c214e4 100644
--- a/jslib/angular/src/pipes/user-name.pipe.ts
+++ b/jslib/angular/src/pipes/user-name.pipe.ts
@@ -1,22 +1,19 @@
-import {
-    Pipe,
-    PipeTransform,
-} from '@angular/core';
+import { Pipe, PipeTransform } from "@angular/core";
 
 interface User {
-    name?: string;
-    email: string;
+  name?: string;
+  email: string;
 }
 
 @Pipe({
-    name: 'userName',
+  name: "userName",
 })
 export class UserNamePipe implements PipeTransform {
-    transform(user?: User): string {
-        if (user == null) {
-            return null;
-        }
-
-        return user.name == null || user.name.trim() === '' ? user.email : user.name;
+  transform(user?: User): string {
+    if (user == null) {
+      return null;
     }
+
+    return user.name == null || user.name.trim() === "" ? user.email : user.name;
+  }
 }
diff --git a/jslib/angular/src/scss/bwicons/fonts/bwi-font.svg b/jslib/angular/src/scss/bwicons/fonts/bwi-font.svg
new file mode 100644
index 00000000..6084f2e3
--- /dev/null
+++ b/jslib/angular/src/scss/bwicons/fonts/bwi-font.svg
@@ -0,0 +1,169 @@
+<?xml version="1.0" standalone="no"?>
+<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd" >
+<svg xmlns="http://www.w3.org/2000/svg">
+<metadata>
+<json>
+<![CDATA[
+{
+	"fontFamily": "bwi-font",
+	"designer": "Bitwarden, Inc.",
+	"designerURL": "",
+	"description": "Font generated by IcoMoon.",
+	"copyright": "Bitwarden, Inc.",
+	"majorVersion": 1,
+	"minorVersion": 0,
+	"version": "Version 1.0",
+	"fontId": "bwi-font",
+	"psName": "bwi-font",
+	"subFamily": "Regular",
+	"fullName": "bwi-font"
+}
+]]>
+</json>
+</metadata>
+<defs>
+<font id="bwi-font" horiz-adv-x="1024">
+<font-face units-per-em="1024" ascent="880.64" descent="-143.36" />
+<missing-glyph horiz-adv-x="1024" />
+<glyph unicode="&#x20;" horiz-adv-x="512" d="" />
+<glyph unicode="&#xe900;" glyph-name="user" data-tags="bw-user" d="M989.577 3.36c-18.362 84.141-58.778 161.875-117.101 225.229-58.33 63.357-132.467 110.049-214.803 135.283 43.597 24.563 79.917 60.226 105.28 103.367 25.357 43.141 38.848 92.224 39.104 142.265 0 76.383-30.342 149.636-84.352 203.647-54.016 54.010-127.27 84.353-203.648 84.353-76.385 0-149.638-30.343-203.649-84.353s-84.353-127.265-84.353-203.647c0.26-49.777 13.615-98.609 38.723-141.59s61.085-78.598 104.317-103.274c-82.947-24.875-157.725-71.496-216.572-135.027-58.847-63.526-99.62-141.645-118.084-226.253-3.409-16.058-3.182-32.678 0.666-48.634 3.848-15.962 11.218-30.854 21.571-43.597s23.426-23.002 38.26-30.035c14.835-7.027 31.055-10.65 47.471-10.598h739.202c16.41-0.038 32.627 3.59 47.45 10.624 14.829 7.034 27.898 17.299 38.253 30.035 10.349 12.736 17.722 27.629 21.574 43.578 3.853 15.955 4.083 32.57 0.691 48.627v0zM295.175 609.504c-0.457 43.398 11.995 85.953 35.773 122.26s57.811 64.728 97.775 81.653c39.965 16.925 84.060 21.591 126.677 13.405 42.624-8.186 81.85-28.854 112.704-59.38 30.848-30.526 51.93-69.533 60.57-112.065 8.634-42.532 4.435-86.673-12.064-126.813-16.506-40.141-44.563-74.473-80.614-98.634-36.058-24.161-78.477-37.062-121.875-37.065-57.739-0.221-113.208 22.459-154.25 63.069s-64.307 95.836-64.696 153.571v0zM913.353-46.176c-3.853-4.755-8.736-8.576-14.278-11.174-5.542-2.592-11.603-3.891-17.722-3.802h-738.946c-6.069-0.064-12.074 1.254-17.561 3.846-5.487 2.598-10.315 6.4-14.119 11.13-4.038 4.902-6.918 10.656-8.425 16.832-1.507 6.17-1.603 12.602-0.279 18.816 20.543 93.44 72.389 177.062 146.95 237.011 74.561 59.946 167.363 92.627 263.034 92.627 95.669 0 188.476-32.681 263.036-92.627 74.56-59.949 126.406-143.571 146.95-237.011 1.331-6.208 1.248-12.64-0.25-18.81s-4.365-11.93-8.39-16.838v0z" />
+<glyph unicode="&#xe901;" glyph-name="user-f" data-tags="bw-user-f" d="M981.761 6.512c-17.741 83.315-57.318 160.416-114.675 223.398-57.357 62.979-130.426 109.572-211.725 135.002 53.965 31.146 96.16 79.217 120.045 136.77s28.122 121.375 12.064 181.582c-16.064 60.206-51.526 113.437-100.902 151.448s-109.907 58.68-172.218 58.806c-62.312 0.126-122.927-20.297-172.456-58.107s-85.21-90.896-101.514-151.037c-16.304-60.141-12.323-123.98 11.327-181.629s65.649-105.892 119.492-137.256c-81.841-25.103-155.487-71.617-213.322-134.726-57.836-63.117-97.758-140.531-115.638-224.25-3.407-16.038-3.174-32.64 0.68-48.576s11.233-30.81 21.592-43.52c10.128-12.499 22.926-22.579 37.456-29.491 14.53-6.906 30.422-10.477 46.512-10.445h727.043c16.090-0.032 31.981 3.539 46.509 10.445 14.528 6.912 27.328 16.992 37.459 29.491 10.355 12.71 17.734 27.584 21.587 43.52 3.859 15.936 4.090 32.538 0.685 48.576v0z" />
+<glyph unicode="&#xe902;" glyph-name="key" data-tags="bw-key" horiz-adv-x="1280" d="M1058.368 800.835c-29.51 30.134-64.736 54.074-103.616 70.418-38.886 16.344-80.634 24.763-122.816 24.763-42.176 0-83.93-8.419-122.81-24.763s-74.109-40.284-103.62-70.418c-39.034-40.12-67.122-89.584-81.576-143.661s-14.794-110.958-0.984-165.203c1.057-4.346 0.989-8.888-0.198-13.199s-3.453-8.249-6.586-11.441l-360.512-366.531c-5.603-5.683-9.101-13.114-9.92-21.056l-17.728-168.832c-0.692-5.357-0.115-10.803 1.686-15.898 1.8-5.101 4.772-9.702 8.676-13.44 3.905-3.731 8.633-6.502 13.803-8.077s10.638-1.907 15.963-0.986l219.456 38.4c7.571 1.357 14.484 5.171 19.668 10.848 5.184 5.683 8.349 12.915 9.004 20.576l4.608 52.224c0.518 5.926 3.082 11.482 7.251 15.725 4.169 4.237 9.684 6.893 15.597 7.507l51.2 4.736c8.146 0.806 15.748 4.454 21.471 10.31 5.724 5.85 9.202 13.53 9.825 21.69l5.312 59.584c0.324 3.891 1.999 7.546 4.735 10.323 2.736 2.784 6.359 4.525 10.241 4.909l58.944 5.056c8.103 0.717 15.684 4.301 21.376 10.112l105.533 107.264c2.618 2.662 5.888 4.582 9.485 5.571s7.392 1.011 10.995 0.064c26.662-6.998 54.106-10.55 81.664-10.563 41.696-0.090 82.995 8.147 121.459 24.237 38.47 16.090 73.331 39.707 102.541 69.462 60.038 61.578 93.638 144.175 93.638 230.176s-33.6 168.598-93.638 230.176l-0.128-0.064zM596.931 479.555c-17.154 46.074-20.847 96.079-10.648 144.173s33.869 92.296 68.245 127.443c23.104 23.697 50.72 42.529 81.216 55.388s63.258 19.483 96.352 19.483c33.101 0 65.862-6.625 96.358-19.483s58.106-31.692 81.21-55.388c47.226-48.218 73.677-113.021 73.677-180.512s-26.451-132.294-73.677-180.512c-34.054-34.755-77.542-58.772-125.101-69.089-47.552-10.316-97.082-6.478-142.483 11.041-6.195 2.253-12.909 2.678-19.341 1.226-6.438-1.452-12.314-4.721-16.947-9.418l-106.621-108.291c-7.769-7.898-18.085-12.8-29.12-13.824l-72-6.4c-8.141-0.813-15.737-4.467-21.458-10.317s-9.203-13.523-9.838-21.683l-4.48-50.816c-0.548-6.317-3.283-12.25-7.734-16.768-4.451-4.525-10.339-7.354-16.65-8l-49.984-4.544c-8.146-0.8-15.748-4.448-21.472-10.304-5.723-5.85-9.201-13.53-9.824-21.696l-5.184-59.008c-0.388-4.794-2.349-9.325-5.578-12.89s-7.546-5.958-12.278-6.822l-113.536-19.712c-2.186-0.358-4.425-0.205-6.542 0.448-2.117 0.646-4.054 1.779-5.66 3.309-1.606 1.523-2.836 3.398-3.596 5.478s-1.025 4.314-0.778 6.509l7.744 79.040c0.743 7.616 4.088 14.733 9.472 20.16l368.64 374.531c4.662 4.853 7.852 10.929 9.199 17.521s0.799 13.433-1.583 19.727v0zM894.726 534.661c-20.25 0-40.051 6.005-56.89 17.257s-29.965 27.245-37.715 45.956c-7.75 18.711-9.779 39.3-5.824 59.164 3.949 19.864 13.702 38.109 28.026 52.431 14.317 14.321 32.563 24.074 52.429 28.024s40.454 1.923 59.162-5.827c18.714-7.75 34.707-20.875 45.958-37.715s17.254-36.637 17.254-56.89c0-27.158-10.784-53.204-29.99-72.408s-45.248-29.992-72.41-29.992v0zM894.726 694.661c-11.392 0-22.528-3.379-32-9.708s-16.851-15.325-21.216-25.85c-4.358-10.525-5.498-22.106-3.277-33.28s7.712-21.436 15.763-29.492c8.058-8.056 18.323-13.541 29.491-15.764 11.174-2.223 22.758-1.082 33.28 3.277 10.528 4.36 19.526 11.743 25.856 21.215 6.323 9.473 9.702 20.609 9.702 32.001 0.013 7.569-1.472 15.066-4.365 22.062s-7.13 13.353-12.48 18.708c-5.35 5.356-11.706 9.604-18.694 12.502-6.995 2.899-14.49 4.391-22.061 4.391v-0.064z" />
+<glyph unicode="&#xe903;" glyph-name="share-square" data-tags="bw-share-square" horiz-adv-x="1280" d="M1120 364.416c-8.486 0-16.627-3.372-22.624-9.373-6.003-6.001-9.376-14.14-9.376-22.627v-354.24c0.173-10.982-4.013-21.587-11.642-29.491s-18.080-12.467-29.062-12.685h-814.59c-10.983 0.218-21.432 4.781-29.060 12.685s-11.815 18.509-11.644 29.491v811.648c-0.172 10.984 4.015 21.588 11.644 29.492s18.077 12.465 29.060 12.684h348.544c8.487 0 16.627 3.371 22.627 9.373s9.373 14.14 9.373 22.627c0 8.487-3.372 16.626-9.373 22.627s-14.14 9.373-22.627 9.373h-348.544c-27.956-0.22-54.684-11.524-74.314-31.43s-30.56-46.789-30.39-74.746v-811.648c-0.17-27.955 10.759-54.842 30.39-74.746s46.358-31.213 74.314-31.43h814.59c27.962 0.218 54.688 11.526 74.317 31.43s30.56 46.79 30.387 74.746v354.24c0 8.487-3.366 16.626-9.37 22.627s-14.144 9.373-22.63 9.373zM532.488 198.4c0-8.486 3.372-16.627 9.373-22.624 6.001-6.003 14.14-9.376 22.627-9.376s16.627 3.373 22.627 9.376c6.001 5.997 9.373 14.138 9.373 22.624-0.96 371.201 334.207 491.073 459.519 523.009l-49.728-102.72c-3.699-7.638-4.211-16.434-1.427-24.451s8.64-14.601 16.275-18.301c7.642-3.7 16.435-4.215 24.454-1.43 8.013 2.785 14.598 8.64 18.298 16.278l83.968 173.376c1.837 3.782 2.906 7.888 3.149 12.083s-0.339 8.398-1.715 12.368c-1.382 3.97-3.526 7.629-6.323 10.769-2.79 3.14-6.176 5.699-9.958 7.532l-174.272 84.544c-7.635 3.709-16.435 4.231-24.461 1.453-8.019-2.779-14.611-8.631-18.323-16.269-3.706-7.638-4.23-16.437-1.453-24.461s8.634-14.615 16.269-18.323l106.624-51.648c-141.376-38.592-506.175-177.536-504.895-583.809z" />
+<glyph unicode="&#xe904;" glyph-name="hashtag" data-tags="bw-hashtag" d="M990.049 586.607l-235.904 0.448 42.624 269.504c0.704 4.417 0.525 8.928-0.512 13.277-1.043 4.349-2.931 8.45-5.562 12.069-2.624 3.619-5.939 6.686-9.754 9.024-3.808 2.339-8.045 3.903-12.461 4.605s-8.928 0.527-13.28-0.515c-4.346-1.042-8.448-2.93-12.064-5.557-7.315-5.305-12.218-13.296-13.632-22.216l-44.416-280-279.296 0.576 42.112 265.92c0.898 4.504 0.877 9.143-0.061 13.639s-2.774 8.756-5.399 12.525c-2.625 3.769-5.983 6.969-9.874 9.409s-8.236 4.068-12.771 4.788c-4.536 0.72-9.171 0.517-13.626-0.598s-8.64-3.117-12.303-5.888c-3.663-2.771-6.728-6.253-9.012-10.237s-3.741-8.389-4.282-12.95l-43.712-276.48-248.832 0.512c-9.047 0-17.724-3.594-24.121-9.991s-9.991-15.074-9.991-24.121c0-9.047 3.594-17.724 9.991-24.121s15.074-9.991 24.121-9.991l238.144-0.448-44.8-284.035-246.976 0.512c-9.047 0-17.724-3.59-24.121-9.99-6.397-6.394-9.991-15.072-9.991-24.122 0-9.043 3.594-17.722 9.991-24.115 6.397-6.4 15.074-9.997 24.121-9.997l236.288-0.512-40.512-256c-1.42-8.922 0.762-18.048 6.066-25.37s13.297-12.237 22.222-13.67c1.649-0.282 3.319-0.429 4.992-0.448 8.117 0 15.967 2.899 22.13 8.186 6.163 5.28 10.232 12.595 11.47 20.614l42.24 266.56 279.36-0.576-39.936-252.48c-1.421-8.922 0.762-18.048 6.067-25.37s13.293-12.237 22.221-13.67c1.779-0.275 3.578-0.422 5.376-0.448 8.109 0.026 15.949 2.938 22.106 8.218 6.157 5.274 10.234 12.576 11.494 20.582l41.6 262.976 248.384-0.512c9.050 0 17.722 3.597 24.122 9.997 6.394 6.394 9.99 15.072 9.99 24.115 0 9.050-3.597 17.728-9.99 24.122-6.4 6.4-15.072 9.99-24.122 9.99l-237.696 0.512 44.8 284.035 246.528-0.512c9.050 0 17.722 3.594 24.122 9.991 6.394 6.397 9.99 15.074 9.99 24.121s-3.597 17.724-9.99 24.121c-6.4 6.397-15.072 9.991-24.122 9.991h0.448zM629.473 234.989l-279.424 0.576 44.8 284.035 279.36-0.576-44.736-284.035z" />
+<glyph unicode="&#xe905;" glyph-name="clone" data-tags="bw-clone" horiz-adv-x="1280" d="M1047.808 723.584h-43.008c-4.71 0-9.222 1.866-12.557 5.188s-5.216 7.832-5.235 12.54v50.496c0 27.567-10.925 54.011-30.381 73.539s-45.862 30.551-73.427 30.653h-650.048c-27.868-0.068-54.574-11.168-74.279-30.873s-30.805-46.412-30.873-74.279v-642.176c0-27.642 10.975-54.15 30.513-73.696 19.538-19.552 46.040-30.541 73.679-30.56h43.008c4.708 0 9.224-1.869 12.558-5.19s5.217-7.827 5.234-12.538v-50.496c0-27.565 10.924-54.010 30.381-73.542 19.457-19.526 45.86-30.547 73.427-30.65h650.048c27.866 0.070 54.573 11.168 74.278 30.874s30.803 46.413 30.874 74.278v642.176c-0.083 27.613-11.085 54.073-30.605 73.604s-45.971 30.55-73.587 30.652zM232.832 113.92c-9.206 0.032-18.026 3.706-24.536 10.214s-10.182 15.328-10.216 24.538v643.136c0.017 9.206 3.686 18.029 10.201 24.532s15.345 10.156 24.551 10.156h649.216c9.286-0.017 18.189-3.709 24.762-10.268 6.566-6.56 10.278-15.455 10.31-24.74v-50.176c0-2.333-0.461-4.644-1.357-6.799s-2.208-4.113-3.859-5.759c-1.651-1.647-3.616-2.952-5.773-3.839s-4.467-1.34-6.803-1.331h-501.376c-27.873-0.084-54.58-11.199-74.283-30.915s-30.802-46.428-30.869-74.301v-486.4c0-4.717-1.875-9.242-5.211-12.582-3.337-3.334-7.862-5.21-12.581-5.21l-42.176-0.256zM1081.92-23.808c-0.051-9.197-3.731-17.997-10.24-24.493s-15.315-10.163-24.512-10.195h-649.216c-9.285 0.019-18.187 3.706-24.758 10.266s-10.28 15.456-10.314 24.742v642.816c0 9.217 3.661 18.056 10.179 24.573s15.357 10.179 24.573 10.179h649.216c9.299 0 18.221-3.695 24.8-10.273s10.272-15.498 10.272-24.799v-642.816z" />
+<glyph unicode="&#xe906;" glyph-name="list-alt" data-tags="bw-list-alt" d="M849.286 497.92h-547.199c-5.941 0-11.638 2.36-15.839 6.561s-6.561 9.898-6.561 15.839c0 5.94 2.36 11.638 6.561 15.839s9.898 6.561 15.839 6.561h547.199c5.939 0 11.642-2.36 15.84-6.561s6.56-9.898 6.56-15.839c0-5.941-2.362-11.638-6.56-15.839s-9.901-6.561-15.84-6.561v0zM849.286 361.601h-547.199c-5.941 0-11.638 2.36-15.839 6.561s-6.561 9.898-6.561 15.839c0 5.94 2.36 11.638 6.561 15.839s9.898 6.561 15.839 6.561h547.199c5.939 0 11.642-2.36 15.84-6.561s6.56-9.898 6.56-15.839c0-5.941-2.362-11.638-6.56-15.839s-9.901-6.561-15.84-6.561v0zM849.286 225.664h-547.199c-5.941 0-11.638 2.362-15.839 6.56s-6.561 9.901-6.561 15.84c0 5.939 2.36 11.638 6.561 15.839s9.898 6.561 15.839 6.561h547.199c5.939 0 11.642-2.36 15.84-6.561s6.56-9.9 6.56-15.839c0-5.939-2.362-11.642-6.56-15.84s-9.901-6.56-15.84-6.56v0zM960 672v-576h-896v576h896zM960 736h-896c-16.974 0-33.252-6.743-45.255-18.745s-18.745-28.281-18.745-45.255v-576c0-16.973 6.743-33.254 18.745-45.254s28.281-18.746 45.255-18.746h896c16.973 0 33.254 6.746 45.254 18.746s18.746 28.282 18.746 45.254v576c0 16.974-6.746 33.252-18.746 45.255s-28.282 18.745-45.254 18.745v0zM164.483 493.697c14.704 0 26.624 11.919 26.624 26.624s-11.92 26.624-26.624 26.624c-14.704 0-26.624-11.92-26.624-26.624s11.92-26.624 26.624-26.624zM164.483 223.616c14.704 0 26.624 11.923 26.624 26.624 0 14.704-11.92 26.624-26.624 26.624s-26.624-11.92-26.624-26.624c0-14.701 11.92-26.624 26.624-26.624zM164.483 358.656c14.704 0 26.624 11.92 26.624 26.624s-11.92 26.624-26.624 26.624c-14.704 0-26.624-11.919-26.624-26.624s11.92-26.624 26.624-26.624z" />
+<glyph unicode="&#xe907;" glyph-name="id-card" data-tags="bw-id-card" d="M394.821 380.034c17.933 14.902 30.842 34.964 36.975 57.459s5.19 46.333-2.698 68.275c-7.889 21.941-22.341 40.922-41.394 54.362s-41.781 20.689-65.097 20.761c-23.316 0.072-46.089-7.037-65.224-20.36s-33.704-32.214-41.727-54.106c-8.023-21.892-9.112-45.724-3.118-68.257s18.78-42.673 36.62-57.686c-27.476-11.622-51.745-29.697-70.751-52.691s-32.189-50.232-38.433-79.407c-1.561-7.309-1.457-14.88 0.305-22.15 1.762-7.264 5.135-14.042 9.871-19.834 4.621-5.728 10.471-10.349 17.117-13.517s13.92-4.806 21.283-4.787h265.856c7.363-0.019 14.637 1.619 21.283 4.787s12.496 7.789 17.117 13.517c4.732 5.792 8.107 12.57 9.878 19.834s1.896 14.835 0.362 22.15c-6.211 28.995-19.279 56.077-38.108 78.982s-42.872 40.965-70.116 52.668v0zM322.245 535.362c13.595 0 26.884-4.031 38.188-11.584s20.113-18.288 25.316-30.847c5.203-12.56 6.564-26.381 3.912-39.714s-9.199-25.581-18.812-35.194c-9.613-9.613-21.86-16.159-35.194-18.812s-27.154-1.291-39.714 3.912c-12.56 5.202-23.295 14.012-30.847 25.316s-11.585 24.593-11.585 38.188c0.017 18.225 7.265 35.699 20.151 48.585s30.36 20.134 48.585 20.151v0zM454.405 232.896h-265.856l-4.736 6.4c6.817 31.429 24.187 59.576 49.22 79.761s56.223 31.193 88.38 31.193c32.158 0 63.347-11.008 88.38-31.193s42.403-48.332 49.22-79.761l-4.608-6.4zM610.752 491.645h160.576c5.651 0.427 10.931 2.973 14.778 7.126 3.853 4.154 5.997 9.609 5.997 15.274s-2.144 11.12-5.997 15.274c-3.846 4.154-9.126 6.699-14.778 7.126h-160.576c-5.645-0.428-10.925-2.973-14.778-7.126s-5.99-9.609-5.99-15.274c0-5.665 2.138-11.12 5.99-15.274s9.133-6.7 14.778-7.126v0zM840.89 276.602h-230.4c-5.651-0.428-10.931-2.973-14.778-7.126-3.853-4.154-5.99-9.609-5.99-15.274s2.138-11.117 5.99-15.277c3.846-4.154 9.126-6.694 14.778-7.123h230.4c5.645 0.429 10.925 2.97 14.778 7.123 3.853 4.16 5.99 9.613 5.99 15.277s-2.138 11.12-5.99 15.274c-3.853 4.154-9.133 6.699-14.778 7.126v0zM840.896 406.524h-230.4c-5.946 0-11.642-2.36-15.84-6.561-4.205-4.201-6.56-9.899-6.56-15.839s2.355-11.638 6.56-15.839c4.198-4.201 9.894-6.561 15.84-6.561h230.4c5.939 0 11.635 2.36 15.84 6.561 4.198 4.201 6.56 9.898 6.56 15.839s-2.362 11.638-6.56 15.839c-4.205 4.2-9.901 6.561-15.84 6.561v0zM960 736h-896c-16.974 0-33.252-6.743-45.255-18.745s-18.745-28.281-18.745-45.255v-576c0-16.973 6.743-33.254 18.745-45.254s28.281-18.746 45.255-18.746h896c16.973 0 33.254 6.746 45.254 18.746s18.746 28.282 18.746 45.254v576c0 16.974-6.746 33.252-18.746 45.255s-28.282 18.745-45.254 18.745v0zM928 96h-832c-8.487 0-16.627 3.373-22.627 9.37-6.001 6.003-9.373 14.144-9.373 22.63v512c0 8.487 3.372 16.627 9.373 22.627s14.14 9.373 22.627 9.373h836.8c5.632-1.28 26.752-7.424 27.2-27.648v-516.352c0-8.486-3.373-16.627-9.37-22.63-6.003-5.997-14.144-9.37-22.63-9.37z" />
+<glyph unicode="&#xe908;" glyph-name="credit-card" data-tags="bw-credit-card" d="M937.727 736h-851.455c-24.134-1.389-46.742-12.257-62.901-30.237s-24.559-41.617-23.371-65.763v-512c-1.188-24.147 7.212-47.782 23.371-65.76 16.159-17.984 38.767-28.851 62.901-30.24h851.199c24.179 1.325 46.854 12.166 63.066 30.15 16.218 17.99 24.653 41.664 23.462 65.85v512c1.19 24.145-7.213 47.782-23.366 65.763-16.16 17.98-38.771 28.849-62.906 30.237v0zM86.528 672h851.199c8.026-0.495 15.533-4.131 20.902-10.119 5.363-5.989 8.154-13.85 7.77-21.881v-57.6c0.371-6.93-2.022-13.724-6.656-18.893-4.627-5.17-11.117-8.294-18.048-8.691h-859.455c-6.917 0.413-13.39 3.545-18.006 8.712s-7.001 11.952-6.634 18.872v57.6c-0.385 8.031 2.407 15.892 7.773 21.881s12.874 9.624 20.899 10.119h0.256zM937.727 96.384h-851.455c-7.956 0.493-15.405 4.077-20.76 9.984-5.355 5.901-8.194 13.664-7.912 21.632v334.848c-0.367 6.93 2.027 13.724 6.657 18.893s11.119 8.294 18.047 8.691h859.519c6.931-0.397 13.421-3.521 18.048-8.691 4.634-5.169 7.027-11.963 6.656-18.893v-334.848c0.384-8.051-2.426-15.93-7.814-21.926-5.395-5.99-12.934-9.613-20.986-10.074v0.384zM860.991 214.080h-150.592c-5.434-0.717-10.426-3.379-14.042-7.501s-5.606-9.421-5.606-14.899c0-5.485 1.99-10.778 5.606-14.899s8.608-6.79 14.042-7.501h150.848c5.44 0.71 10.432 3.379 14.048 7.501s5.606 9.414 5.606 14.899c0 5.478-1.99 10.778-5.606 14.899s-8.608 6.784-14.048 7.501h-0.256z" />
+<glyph unicode="&#xe909;" glyph-name="globe" data-tags="bw-globe" d="M930.184 88.52c59.091 83.476 93.816 185.424 93.816 295.48 0 282.77-229.23 512-512 512s-512-229.23-512-512c0-282.77 229.23-512 512-512 171.145 0 322.676 83.971 415.642 212.961 1.006 1.061 1.935 2.19 2.784 3.385l-0.244 0.172zM832 70.465c-81.314-82.98-194.645-134.465-320-134.465-63.715 0-124.324 13.3-179.2 37.277-21.299 9.305-16.91 15.104-8.811 34.296 4.699 11.135 9.864 23.375 15.909 35.455 7.697 15.384 15.951 28.647 24.705 37.352 1.515 1.506 5.85 4.090 15.912 6.251 9.594 2.061 21.82 3.232 36.457 4.041 7.999 0.441 16.73 0.765 25.91 1.107 23.127 0.857 49.1 1.822 73.377 5.041 18.186 2.411 32.81 7.18 43.754 14.867 11.515 8.090 18.012 18.78 20.357 30.439 2.201 10.946 0.499 21.475-1.724 29.742-2.002 7.449-4.857 14.5-6.892 19.526l-0.636 1.576c-2.829 7.031-5.681 12.705-8.416 18.146-7.269 14.461-13.71 27.272-16.655 59.502-1.725 18.865 5.205 40.067 14.539 62.454 1.612 3.869 3.379 7.96 5.154 12.069 2.911 6.745 5.842 13.534 8.14 19.441 3.665 9.421 7.42 20.586 7.42 31.075 0 10.317-3.304 21.324-7.716 31.197-4.547 10.174-10.922 20.594-18.507 30.022-14.277 17.747-36.8 36.675-63.32 36.675-25.509 0-58.336-9.242-86.206-20.164-14.232-5.576-27.831-11.849-39.35-18.129-11.162-6.086-21.606-12.84-28.564-19.649-53.851-52.712-85.779-67.957-104.871-69.051-16.066-0.92-27.702 8.251-42.636 28.821-3.615 4.979-7.175 10.267-10.97 15.922l-0.392 0.584c-3.615 5.387-7.449 11.099-11.449 16.669-8.234 11.46-17.975 23.477-30.22 32.897-12.569 9.669-27.737 16.57-46.282 17.735-18.619 1.17-16.969 0.766-11.862 20.012 17.102 64.456 48.212 123.209 89.874 172.8 17.744 21.12 17.664 25.824 25.696 0 2.826-9.089 6.315-17.189 10.452-24.354 13.282-23.009 32.491-35.040 53.665-39.274 23.5-4.699 49.65 3.385 73.011 11.849 7.214 2.614 14.36 5.345 21.509 8.077l0.014 0.005c17.91 6.845 35.845 13.701 54.921 18.73 14.987 3.95 33.651 3.106 55.514-0.701 15.329-2.67 30.671-6.465 46.395-10.355 6.852-1.696 13.78-3.41 20.807-5.056 21.987-5.15 45.349-9.722 65.804-8.086 21.715 1.74 42.479 10.815 54.159 34.177 7.324 14.647 7.19 28.631 1.341 41.224-5.014 10.794-13.872 19.486-20.296 25.762-15.024 14.68-23.82 23.441-23.82 37.6 0 6.876 2.105 11.022 5.205 14.43 3.661 4.024 9.342 7.656 17.537 11.61 3.42 1.649 6.892 3.181 10.645 4.837l2.059 0.907c2.996 1.326 6.186 2.754 9.356 4.287 12.957 6.272 15.582 6.545 29.4 0.866 97.087-39.905 177.069-112.926 225.88-205.005 19.9-37.539-23.677-14.946-52.631-24.824-19.726-6.729-34.947-20.159-47.387-40.581-7.062-11.595-16.431-23.545-26.812-36.786l-0.020-0.027c-1.799-2.294-3.627-4.627-5.48-7.002-12.034-15.435-24.982-32.635-33.635-50.425-8.729-17.951-14.191-38.742-8.181-60.53 6.017-21.809 22.392-40.526 48.469-56.835 5.739-3.589 13.009-6.157 18.219-8l1.165-0.412c6.247-2.22 11.264-4.076 15.49-6.445 4.069-2.281 6.132-4.361 7.22-6.245 0.935-1.619 2.139-4.769 1.271-11.285-2.747-20.62-3.99-40.064-2.999-56.736 0.951-15.994 4.090-32.37 12.604-44.354 6.811-9.585 6.907-23.137 6.256-43.137l-0.019-0.567c-0.275-8.441-0.622-19.069 1.25-28.412 4.542-22.661 7.657-21.567-10.861-40.465zM866.675 205.289c-2.111 2.97-4.741 10.371-5.575 24.389-0.792 13.336 0.165 30.132 2.73 49.386 1.79 13.422-0.212 25.394-6.080 35.556-5.714 9.897-14.047 16.255-21.705 20.545-7.437 4.166-15.407 6.997-21.262 9.077l-0.142 0.051c-6.867 2.44-10.086 3.665-11.877 4.785-21.38 13.371-29.264 25.247-31.812 34.49-2.555 9.262-0.891 19.975 5.699 33.526 6.666 13.71 17.224 28.009 29.385 43.61 1.69 2.169 3.417 4.369 5.166 6.596 10.292 13.111 21.304 27.141 29.656 40.852 8.811 14.466 17.496 20.975 26.991 24.214 10.419 3.555 24.157 4.002 44.691 1.595 22.156-2.599 24.315-5.701 30.406-27.11 11.107-39.039 17.054-80.25 17.054-122.85 0-85.431-23.912-165.277-65.41-233.211-24.052-39.375-12.296 32.52-27.914 54.5zM579.575 826.937c38.434-5.815 25.674-2.582 5.221-25.070-9.301-10.226-15.197-23.502-15.197-40.267 0-30.954 20.262-50.482 32.855-62.617l0.011-0.011c0.879-0.847 1.72-1.659 2.515-2.436 7.179-7.012 10.719-11.054 12.306-14.471 0.751-1.617 1.417-3.324-0.859-7.877-3.991-7.981-10.349-12.067-22.88-13.071-13.791-1.105-31.8 2.002-53.981 7.196-6.016 1.407-12.354 2.976-18.882 4.59-16.281 4.027-33.767 8.351-50.487 11.262-23.575 4.106-48.821 6.082-71.89 0.002-21.224-5.595-42.181-13.605-60.704-20.686-6.697-2.559-13.074-4.997-19.032-7.155-24.369-8.827-40.82-12.615-52.402-10.297-10.83 2.166-20.422 7.795-27.94 20.817-4.525 7.837-8.469 18.681-11.049 33.505-3.355 19.265-4.226 26.485 11.049 38.294 75.709 58.529 170.672 93.355 273.771 93.355 22.97 0 45.536-1.729 67.575-5.062zM64.719 409.6c1.169 20.754-0.175 32.761 23.686 31.262 9.787-0.615 17.806-4.1 25.276-9.846 7.795-5.996 14.944-14.424 22.446-24.866 3.636-5.062 7.17-10.326 10.884-15.859l0.261-0.389c3.742-5.577 7.684-11.439 11.779-17.079 15.905-21.91 38.464-46.744 75.906-44.6 34.414 1.97 75.305 26.86 129.537 79.946 3.111 3.045 9.817 7.779 20.086 13.376 9.911 5.404 22.022 11.016 34.976 16.091 26.501 10.384 53.952 17.516 72.197 17.516 8.65 0 21.3-7.304 33.401-22.345 5.604-6.967 10.221-14.58 13.369-21.621 3.281-7.34 4.374-12.73 4.374-15.527 0-2.626-1.19-7.856-4.807-17.152-2.12-5.447-4.482-10.911-7.111-16.985-1.816-4.199-3.761-8.689-5.836-13.669-9.351-22.427-20.007-51.5-17.336-80.727 3.664-40.064 13.882-60.309 21.676-75.747 2.287-4.532 4.367-8.651 6.010-12.736l0.606-1.504c2.131-5.284 4.106-10.179 5.465-15.237 1.487-5.532 1.707-9.486 1.161-12.201-0.404-2.005-1.325-4.156-4.785-6.587-4.032-2.832-11.94-6.261-26.727-8.222-22.38-2.967-45.3-3.815-67.716-4.642-9.666-0.359-19.241-0.711-28.642-1.231-15.040-0.831-29.742-2.119-42.405-4.84-12.195-2.619-25.446-7.141-34.922-16.565-13.227-13.154-23.709-30.889-31.97-47.399-6.662-13.314-12.452-27.045-17.18-38.255l-0.005-0.012c-6.836-16.21-11.089-20.109-27.279-9.144-118.929 80.545-197.091 216.745-197.091 371.2 0 8.591 0.242 17.127 0.719 25.6z" />
+<glyph unicode="&#xe90a;" glyph-name="sticky-note" data-tags="bw-sticky-note" d="M896 896h-768c-16.974 0-33.252-6.743-45.255-18.745s-18.745-28.281-18.745-45.255v-896c0-16.973 6.743-33.254 18.745-45.254s28.281-18.746 45.255-18.746h489.92c8.557-0.032 17.030 1.651 24.922 4.947s15.040 8.147 21.030 14.253l278.080 286.592c11.635 12 18.112 28.083 18.048 44.8v609.408c0 16.974-6.746 33.252-18.746 45.255s-28.282 18.745-45.254 18.745v0zM160 832h704c8.486 0 16.627-3.372 22.63-9.373 5.997-6.001 9.37-14.14 9.37-22.627v-509.44c0-8.487-3.373-16.627-9.37-22.627-6.003-6.001-14.144-9.373-22.63-9.373h-178.368c-25.459 0-49.882-10.112-67.885-28.115s-28.115-42.426-28.115-67.885v-194.56c0-8.486-3.373-16.627-9.37-22.63-6.003-5.997-14.144-9.37-22.63-9.37h-397.632c-8.487 0-16.627 3.373-22.627 9.37-6.001 6.003-9.373 14.144-9.373 22.63v832c0 8.487 3.372 16.627 9.373 22.627s14.14 9.373 22.627 9.373v0zM653.632 3.2v159.36c0 8.486 3.373 16.627 9.37 22.63 6.003 5.997 14.144 9.37 22.63 9.37h153.984c2.419-0.013 4.781-0.73 6.797-2.074 2.010-1.344 3.584-3.245 4.525-5.478 0.941-2.227 1.21-4.685 0.762-7.059-0.442-2.381-1.574-4.576-3.251-6.317l-173.632-179.2c-1.722-1.766-3.936-2.97-6.355-3.469-2.413-0.493-4.922-0.256-7.2 0.691-2.278 0.941-4.224 2.547-5.581 4.602-1.363 2.061-2.074 4.48-2.048 6.944v0z" />
+<glyph unicode="&#xe90b;" glyph-name="folder" data-tags="bw-folder" d="M929.184 682.974h-339.968c-9.434 0.235-18.387 4.2-24.902 11.026-6.509 6.826-10.054 15.956-9.85 25.39v16.512c0.122 25.298-9.798 49.611-27.578 67.607s-41.971 28.207-67.268 28.394h-364.8c-25.276-0.22-49.434-10.445-67.187-28.438s-27.653-42.286-27.533-67.562v-703.166c-0.12-25.301 9.798-49.611 27.579-67.61s41.971-28.205 67.269-28.39l834.11-0.64c12.314-0.013 24.506 2.399 35.878 7.098 11.379 4.698 21.715 11.595 30.426 20.294 9.094 8.978 16.307 19.688 21.203 31.488 4.902 11.802 7.396 24.467 7.34 37.248v554.686c0.019 25.252-9.907 49.494-27.642 67.475-17.726 17.981-41.824 28.254-67.078 28.59zM94.946 772.318h364.8c9.416-0.252 18.348-4.226 24.839-11.052 6.489-6.826 10.008-15.948 9.784-25.364v-16.512c0-25.284 9.971-49.548 27.757-67.523 17.779-17.974 41.939-28.208 67.219-28.478h339.968c9.414-0.218 18.349-4.163 24.858-10.968 6.503-6.804 10.035-15.911 9.83-25.322v-71.104c-0.013-3.015-0.627-6.002-1.8-8.782-1.165-2.781-2.874-5.305-5.019-7.427-2.15-2.122-4.691-3.799-7.48-4.939-2.797-1.139-5.786-1.716-8.806-1.702h-857.534c-6.083-0.017-11.924 2.379-16.242 6.662s-6.764 10.104-6.797 16.186v219.904c-0.223 9.416 3.295 18.54 9.786 25.364s15.423 10.801 24.839 11.052v0zM953.056 5.728c-3.117-3.141-6.822-5.638-10.912-7.34-4.083-1.702-8.467-2.579-12.896-2.579v0l-834.302 0.576c-9.41 0.232-18.342 4.191-24.835 11.010s-10.013 15.93-9.789 25.344v377.598c0.008 3.018 0.611 6.003 1.773 8.788s2.861 5.313 5.001 7.438c2.14 2.127 4.677 3.813 7.466 4.96s5.78 1.732 8.796 1.724h857.598c6.099 0.017 11.962-2.385 16.288-6.68 4.331-4.295 6.784-10.132 6.816-16.232v-378.366c-0.008-4.883-0.988-9.722-2.874-14.229-1.888-4.499-4.655-8.589-8.134-12.013v0z" />
+<glyph unicode="&#xe90c;" glyph-name="lock" data-tags="bw-lock" d="M564.539 221.655c0.070 9.37-2.368 18.592-7.066 26.701-4.691 8.109-11.469 14.816-19.629 19.426s-17.402 6.953-26.769 6.788c-9.369-0.164-18.523-2.831-26.515-7.724s-14.529-11.834-18.935-20.103c-4.406-8.269-6.521-17.568-6.125-26.931s3.289-18.445 8.378-26.317c5.089-7.866 12.19-14.227 20.566-18.432v-86.208c-0.166-3.2 0.32-6.4 1.43-9.408 1.11-3.002 2.82-5.754 5.027-8.077s4.863-4.179 7.807-5.44c2.945-1.267 6.116-1.92 9.318-1.92 3.206 0 6.381 0.653 9.325 1.92 2.944 1.261 5.6 3.117 7.808 5.44 2.202 2.323 3.917 5.075 5.024 8.077 1.107 3.008 1.594 6.208 1.427 9.408v86.336c8.634 4.333 15.898 10.97 21.005 19.162 5.101 8.198 7.846 17.645 7.923 27.302v0zM840.641 569.24h-29.056c-2.285 0.008-4.55 0.467-6.656 1.35-2.112 0.883-4.026 2.172-5.632 3.795-1.613 1.622-2.886 3.546-3.757 5.661-0.864 2.115-1.306 4.38-1.299 6.666v12.8c1.35 71.833-23.814 141.645-70.682 196.095-46.874 54.45-112.166 89.721-183.398 99.073-39.37 3.779-79.094-0.726-116.618-13.226s-72.015-32.717-101.253-59.351c-29.238-26.634-52.577-59.094-68.513-95.293s-24.117-75.331-24.017-114.882v-20.736c0-0.384-1.536-21.824-20.16-22.144h-26.176c-23.232-0.068-45.487-9.353-61.879-25.816s-25.579-38.76-25.545-61.992v-521.153c-0.017-23.251 9.167-45.562 25.548-62.061s38.626-25.85 61.876-26.003h657.216c23.232 0.154 45.459 9.491 61.83 25.984 16.371 16.486 25.549 38.784 25.53 62.016v521.217c0.045 11.514-2.182 22.924-6.554 33.578-4.365 10.654-10.79 20.344-18.899 28.515-8.115 8.172-17.754 14.665-28.378 19.11s-22.016 6.755-33.53 6.796v0zM293.761 611.928c-0.099 32.637 7.099 64.884 21.069 94.381s34.357 55.497 59.67 76.099c25.313 20.602 54.913 35.284 86.632 42.972s64.757 8.187 96.693 1.46c49.683-11.643 93.888-39.944 125.254-80.196s48.013-90.028 47.162-141.052v-18.88c0.006-2.291-0.435-4.562-1.306-6.681s-2.15-4.046-3.77-5.67c-1.619-1.623-3.539-2.911-5.658-3.79-2.112-0.879-4.384-1.331-6.675-1.331h-392.32c-3.246-0.28-6.516 0.084-9.621 1.073s-5.983 2.582-8.47 4.687c-2.486 2.106-4.532 4.683-6.019 7.583s-2.385 6.065-2.643 9.313v20.032zM864.001-39.913c0-6.227-2.464-12.205-6.848-16.627-4.39-4.429-10.349-6.938-16.576-6.989h-657.152c-3.090 0.013-6.148 0.627-8.998 1.818-2.851 1.197-5.438 2.938-7.614 5.133s-3.898 4.794-5.066 7.654c-1.169 2.861-1.762 5.92-1.745 9.011v521.153c-0.017 3.082 0.575 6.136 1.74 8.989s2.883 5.447 5.053 7.635c2.17 2.188 4.75 3.926 7.593 5.116s5.892 1.805 8.974 1.813h657.28c6.214-0.051 12.154-2.554 16.531-6.966 4.371-4.411 6.829-10.372 6.829-16.586v-521.153z" />
+<glyph unicode="&#xe90d;" glyph-name="lock-f" data-tags="bw-lock-f" d="M840.639 569.141h-29.056c-2.285 0.008-4.55 0.467-6.656 1.349-2.112 0.883-4.026 2.172-5.632 3.795-1.613 1.622-2.886 3.546-3.757 5.661-0.864 2.115-1.306 4.381-1.299 6.667v12.8c1.35 71.832-23.814 141.644-70.682 196.095-46.874 54.45-112.166 89.721-183.398 99.073-39.371 3.789-79.1-0.709-116.628-13.205s-72.022-32.713-101.263-59.35c-29.24-26.636-52.579-59.1-68.511-95.303s-24.108-75.341-23.997-114.894v-20.48c0-0.448-1.536-21.888-20.16-22.208h-26.176c-11.52-0.034-22.92-2.337-33.549-6.778s-20.278-10.934-28.397-19.107c-8.119-8.172-14.548-17.864-18.92-28.523s-6.6-22.073-6.557-33.592v-521.152c0.050-23.213 9.263-45.466 25.634-61.92s38.579-25.786 61.79-25.952h657.215c23.2 0.154 45.402 9.466 61.766 25.914 16.358 16.448 25.562 38.694 25.594 61.894v521.216c0.045 11.514-2.182 22.924-6.554 33.578-4.365 10.654-10.79 20.344-18.899 28.515-8.115 8.172-17.754 14.665-28.378 19.11s-22.016 6.755-33.53 6.797v0zM535.615 113.909v-86.144c0.166-3.2-0.32-6.4-1.427-9.408-1.114-3.008-2.822-5.754-5.030-8.083-2.202-2.323-4.858-4.173-7.808-5.44-2.944-1.261-6.112-1.914-9.318-1.914-3.204 0-6.376 0.653-9.32 1.914-2.945 1.267-5.601 3.117-7.807 5.44-2.206 2.33-3.916 5.075-5.026 8.083s-1.597 6.208-1.43 9.408v86.144c-10.57 5.306-19.039 14.029-24.038 24.749s-6.234 22.816-3.506 34.323c2.728 11.507 9.26 21.76 18.538 29.101 9.279 7.334 20.761 11.322 32.589 11.322s23.309-3.987 32.589-11.322c9.28-7.341 15.808-17.594 18.541-29.101 2.726-11.507 1.491-23.603-3.507-34.323s-13.466-19.443-24.038-24.749v0zM730.239 586.613c0.006-2.292-0.435-4.563-1.306-6.682s-2.15-4.046-3.77-5.669c-1.619-1.624-3.539-2.911-5.658-3.79-2.112-0.879-4.384-1.332-6.675-1.331h-392.319c-3.247-0.281-6.516 0.084-9.621 1.073s-5.983 2.582-8.47 4.687c-2.487 2.106-4.532 4.683-6.019 7.583s-2.385 6.065-2.643 9.313v20.032c-0.086 32.635 7.121 64.877 21.094 94.37s34.358 55.491 59.667 76.095c25.309 20.604 54.902 35.293 86.615 42.994s64.751 8.219 96.687 1.517c49.683-11.667 93.882-39.983 125.248-80.243s48.006-90.040 47.168-141.069v-18.88z" />
+<glyph unicode="&#xe90e;" glyph-name="generate" data-tags="bw-generate" d="M940.98 328.351c-8.73 1.892-17.85 0.266-25.389-4.527-7.533-4.792-12.877-12.365-14.867-21.073-19.322-79.788-63.194-151.493-125.44-205.010-62.246-53.523-139.725-86.15-221.504-93.293-80.694-8.947-162.169 7.558-233.020 47.206s-127.533 100.454-162.115 173.914c-1.28 3.328 1.536 8.32 8.448 7.296l53.184-21.824c8.315-3.52 17.681-3.616 26.067-0.275s15.117 9.856 18.733 18.131c1.707 4.051 2.589 8.397 2.593 12.794s-0.868 8.742-2.566 12.8c-1.699 4.052-4.189 7.725-7.326 10.804s-6.856 5.499-10.941 7.121l-135.936 55.616c-7.997 3.268-16.93 3.411-25.027 0.399s-14.767-8.956-18.685-16.655l-63.616-128.575c-1.93-3.949-3.052-8.237-3.3-12.621-0.248-4.39 0.383-8.781 1.856-12.915 1.473-4.141 3.757-7.942 6.72-11.181 2.963-3.245 6.544-5.862 10.532-7.699 4.623-2.182 9.671-3.322 14.784-3.328 6.338-0.026 12.557 1.715 17.961 5.030 5.404 3.309 9.777 8.064 12.631 13.722l20.48 41.472c0.666 1.12 1.586 2.074 2.686 2.784 1.1 0.704 2.349 1.139 3.649 1.28 1.299 0.134 2.612-0.032 3.835-0.493s2.321-1.203 3.206-2.163c37.101-77.958 95.478-143.846 168.4-190.074 72.923-46.221 157.423-70.893 243.76-71.174 15.96 0 32.364 0.768 49.215 2.304 95.763 9.344 186.291 48.077 259.174 110.886s124.55 146.63 147.93 239.96c0.89 4.3 0.915 8.733 0.077 13.044-0.832 4.31-2.509 8.413-4.941 12.072-2.426 3.659-5.549 6.801-9.197 9.245s-7.744 4.144-12.051 4.999v0zM1004.987 628.96c-4.627 2.183-9.677 3.32-14.784 3.328-6.342 0.025-12.563-1.716-17.965-5.028s-9.779-8.065-12.627-13.724l-20.48-41.472c-0.672-1.124-1.587-2.077-2.688-2.782s-2.349-1.144-3.648-1.281c-1.299-0.137-2.611 0.032-3.834 0.493s-2.323 1.201-3.206 2.162c-37.069 78.007-95.43 143.948-168.352 190.218-72.928 46.269-157.446 70.981-243.808 71.286-15.939 0-32.323-0.704-49.219-2.304-95.794-9.36-186.345-48.13-259.233-110.991s-124.54-146.734-147.871-240.113c-0.894-4.31-0.922-8.754-0.083-13.075s2.529-8.431 4.97-12.093c2.442-3.662 5.587-6.803 9.252-9.239s7.779-4.12 12.101-4.952c8.729-1.892 17.852-0.266 25.389 4.527s12.879 12.365 14.867 21.073c19.317 79.792 63.192 151.509 125.437 205.039s139.722 86.174 221.507 93.329c80.7 8.923 162.172-7.6 233.020-47.259s127.526-100.468 162.118-173.925c1.216-3.264-1.536-8.32-8.448-7.232l-53.312 22.016c-8.32 3.501-17.677 3.59-26.061 0.25s-15.11-9.844-18.739-18.106c-1.709-4.054-2.592-8.408-2.598-12.808s0.864-8.756 2.566-12.814c1.696-4.058 4.186-7.737 7.322-10.821 3.142-3.085 6.861-5.512 10.95-7.141l135.616-55.552c7.987-3.288 16.915-3.448 25.018-0.447s14.771 8.941 18.694 16.639l63.616 128.64c1.894 3.914 3.002 8.164 3.251 12.508s-0.358 8.693-1.798 12.798c-1.44 4.106-3.68 7.885-6.586 11.121-2.912 3.236-6.432 5.864-10.355 7.734z" />
+<glyph unicode="&#xe90f;" glyph-name="generate-f" data-tags="bw-generate-f" d="M511.999-128c282.771 0 512 229.229 512 511.999s-229.229 512-512 512c-282.769 0-511.999-229.23-511.999-512s229.23-511.999 511.999-511.999zM846.719 339.836c6.63-1.591 12.397-5.664 16.109-11.379 3.718-5.715 5.094-12.637 3.859-19.341-17.773-73.98-57.952-140.668-115.059-190.947s-128.346-81.69-203.981-89.952c-12.8-1.28-25.6-1.856-38.399-1.856-68.14 0.614-134.698 20.602-191.897 57.638s-102.674 89.594-131.111 151.514c-0.679 0.774-1.535 1.376-2.496 1.754-0.96 0.371-1.996 0.506-3.021 0.39-1.024-0.109-2.006-0.467-2.861-1.043s-1.56-1.344-2.054-2.253l-16.064-33.152c-3.073-6.362-8.547-11.245-15.221-13.574s-13.998-1.914-20.363 1.158c-6.365 3.072-11.249 8.55-13.578 15.226-2.328 6.669-1.91 13.997 1.162 20.358l49.92 102.979c2.983 6.111 8.197 10.846 14.568 13.228s13.411 2.228 19.672-0.428l106.24-44.8c3.227-1.349 6.157-3.32 8.623-5.802s4.418-5.424 5.747-8.66c1.328-3.236 2.006-6.702 1.995-10.2s-0.712-6.959-2.060-10.187c-1.349-3.228-3.32-6.159-5.802-8.623s-5.424-4.416-8.66-5.747c-3.236-1.325-6.701-2.003-10.2-1.997-3.498 0.013-6.959 0.717-10.186 2.061l-41.664 17.475c-5.248 0.576-7.36-3.2-6.4-5.824 26.381-58.403 70.518-106.991 126.124-138.844s119.848-45.35 183.571-38.566c64.608 6.4 125.581 32.89 174.349 75.744s82.88 99.923 97.523 163.171c0.73 3.421 2.125 6.666 4.109 9.547s4.518 5.343 7.456 7.245c2.938 1.902 6.221 3.206 9.658 3.839 3.443 0.633 6.976 0.581 10.394-0.152zM876.613 582.048c6.662 2.326 13.978 1.923 20.346-1.121 3.245-1.493 6.15-3.622 8.55-6.262 2.406-2.639 4.25-5.734 5.434-9.102s1.677-6.938 1.453-10.499c-0.23-3.562-1.165-7.042-2.765-10.233l-49.856-102.976c-2.995-6.101-8.211-10.825-14.573-13.205-6.368-2.38-13.402-2.235-19.667 0.405l-106.304 44.8c-3.226 1.353-6.157 3.329-8.621 5.814s-4.41 5.431-5.741 8.67c-1.325 3.239-1.997 6.707-1.984 10.207 0.019 3.5 0.723 6.962 2.074 10.189 1.357 3.227 3.328 6.156 5.818 8.62 2.483 2.464 5.427 4.414 8.666 5.74s6.707 1.999 10.208 1.985c3.501-0.015 6.963-0.719 10.189-2.072l41.664-17.408c5.184-0.576 7.36 3.2 6.4 5.824-26.432 58.342-70.586 106.863-126.189 138.657s-119.821 45.242-183.506 38.431c-64.607-6.397-125.583-32.886-174.351-75.741s-82.874-99.922-97.521-163.171c-1.46-6.917-5.607-12.971-11.53-16.829s-13.137-5.206-20.054-3.747c-6.916 1.459-12.97 5.607-16.829 11.53s-5.206 13.137-3.747 20.054c17.839 73.949 58.077 140.586 115.216 190.805s128.388 81.571 204.016 89.771c12.8 1.28 25.6 1.856 38.399 1.856 68.109-0.566 134.65-20.504 191.846-57.484s102.694-89.474 131.162-151.348c0.678-0.789 1.536-1.4 2.509-1.782 0.966-0.381 2.010-0.522 3.046-0.408 1.030 0.113 2.022 0.477 2.886 1.059 0.858 0.582 1.568 1.366 2.054 2.283l16.064 33.152c3.098 6.346 8.57 11.212 15.238 13.537z" />
+<glyph unicode="&#xe910;" glyph-name="cog" data-tags="bw-cog" d="M937.907 316.224l-7.744 5.056c-6.394 3.732-11.488 9.334-14.598 16.051-3.117 6.717-4.096 14.226-2.81 21.517v49.28c-1.363 7.14-0.403 14.531 2.739 21.085s8.307 11.928 14.733 15.331l9.536 4.8c24.026 14.109 41.536 37.094 48.768 64 6.842 26.665 3.322 54.932-9.856 79.104l-50.112 87.744c-14.022 23.453-36.518 40.625-62.835 47.974-26.323 7.348-54.458 4.31-78.605-8.486l-8.768-4.416c-6.566-3.552-13.965-5.282-21.427-5.012-7.456 0.27-14.714 2.531-21.005 6.548-14.182 9.567-29.171 17.875-44.8 24.832-6.56 3.272-12.077 8.314-15.923 14.557s-5.869 13.438-5.837 20.771v13.056c0.198 13.929-2.394 27.757-7.616 40.671s-12.979 24.653-22.803 34.527c-9.83 9.874-21.53 17.684-34.419 22.971s-26.701 7.944-40.634 7.814h-102.399c-13.903 0.087-27.684-2.602-40.535-7.908s-24.515-13.123-34.307-22.993c-9.792-9.87-17.517-21.594-22.721-34.487s-7.784-26.694-7.588-40.596v-10.944c0.065-7.227-1.875-14.33-5.603-20.521s-9.1-11.228-15.517-14.551c-11.37-5.168-22.381-11.091-32.96-17.728l-12.16-7.168c-6.204-4.441-13.576-6.961-21.199-7.245s-15.164 1.678-21.681 5.645l-7.936 3.904c-11.711 7.032-24.755 11.555-38.305 13.285s-27.313 0.627-40.415-3.237c-26.891-7.432-49.77-25.16-63.68-49.344l-49.92-87.36c-7.125-12.099-11.728-25.514-13.532-39.439s-0.771-28.070 3.036-41.585c3.512-12.988 9.599-25.137 17.9-35.725s18.646-19.398 30.42-25.907l5.76-5.696 2.624-1.856c6.393-3.733 11.488-9.335 14.601-16.052s4.092-14.226 2.807-21.516v-49.408c0.653-7.065-0.627-14.174-3.705-20.566s-7.837-11.827-13.767-15.722l-9.536-4.8c-23.447-14.435-40.515-37.26-47.732-63.834s-4.040-54.893 8.884-79.206l50.176-87.744c13.613-23.91 36.116-41.478 62.615-48.89 26.499-7.405 54.851-4.051 78.889 9.338l8.704 4.352c6.579 3.571 13.99 5.318 21.471 5.075 7.48-0.25 14.76-2.49 21.089-6.483 14.163-9.594 29.156-17.907 44.8-24.832 6.562-3.27 12.077-8.314 15.923-14.56 3.846-6.24 5.868-13.434 5.837-20.768v-10.944c-0.205-13.907 2.371-27.718 7.576-40.621s12.936-24.634 22.737-34.502c9.801-9.875 21.475-17.69 34.338-22.989s26.654-7.974 40.565-7.872h102.399c13.914-0.102 27.712 2.573 40.576 7.872s24.544 13.114 34.349 22.982c9.805 9.875 17.542 21.6 22.758 34.502 5.21 12.902 7.795 26.714 7.597 40.627v10.944c-0.064 7.226 1.875 14.33 5.606 20.518 3.725 6.195 9.094 11.232 15.514 14.554 11.366 5.133 22.362 11.053 32.896 17.728l2.752 1.6 9.408 5.568c6.227 4.41 13.606 6.906 21.235 7.194 7.622 0.282 15.168-1.664 21.709-5.594l7.936-3.904c11.987-7.136 25.306-11.757 39.13-13.581 13.83-1.824 27.891-0.819 41.318 2.957 13.197 3.61 25.51 9.901 36.16 18.496 10.65 8.589 19.411 19.29 25.728 31.424l49.92 87.36c7.008 11.814 11.514 24.947 13.229 38.579 1.722 13.632 0.614 27.469-3.245 40.653-7.168 26.795-24.595 49.692-48.512 63.745zM359.923 82.879c-12.561 5.786-24.486 12.864-35.584 21.12-17.901 12.166-38.966 18.842-60.608 19.2-18.086 0.147-35.841-4.845-51.2-14.4l-9.536-4.8c-3.997-2.522-8.502-4.134-13.195-4.71-4.692-0.57-9.453-0.102-13.941 1.382-5.105 1.235-9.888 3.546-14.027 6.784-4.14 3.232-7.54 7.315-9.973 11.968l-49.536 87.488c-4.944 8.998-6.381 19.507-4.032 29.504 0.705 4.403 2.418 8.582 5.005 12.211s5.977 6.611 9.907 8.717c1.856 0.704 5.952 1.408 8.128 2.048 1.639 0.408 3.244 0.943 4.8 1.6 17.378 9.869 31.508 24.582 40.668 42.345s12.952 37.806 10.916 57.687v43.072c1.605 20.027-2.422 40.103-11.629 57.961s-23.223 32.785-40.467 43.095l-8.576 4.16c-4.384 2.396-8.223 5.675-11.274 9.631s-5.247 8.502-6.451 13.351c-1.203 4.849-1.387 9.894-0.54 14.818s2.708 9.617 5.464 13.784l49.92 87.296c5.517 9.053 14.067 15.857 24.128 19.2 4.647 1.503 9.572 1.944 14.413 1.291s9.473-2.385 13.555-5.067l8.128-4.032c17.392-9.515 37.054-14.097 56.861-13.251s39.005 7.088 55.523 18.051c11.516 7.832 23.555 14.867 36.032 21.056 17.917 8.92 33.040 22.591 43.717 39.521s16.497 36.467 16.827 56.479v8.576c-0.104 5.071 0.817 10.111 2.71 14.818s4.717 8.981 8.305 12.568c3.587 3.587 7.862 6.412 12.568 8.304s9.747 2.815 14.818 2.71h102.399c5.075 0.113 10.118-0.802 14.829-2.692s8.992-4.714 12.576-8.303c3.59-3.588 6.413-7.867 8.307-12.577 1.888-4.71 2.803-9.754 2.688-14.828v-10.944c0.192-20.092 5.997-39.73 16.768-56.694 10.765-16.965 26.061-30.58 44.16-39.306 12.659-5.812 24.666-12.934 35.84-21.248 16.416-10.868 35.475-17.079 55.142-17.969s39.206 3.572 56.538 12.913l9.088 4.608c9.363 5.204 20.397 6.515 30.72 3.648 4.403-1.24 8.518-3.352 12.090-6.211s6.534-6.405 8.71-10.429l49.92-87.744c2.502-4.042 4.096-8.579 4.672-13.298s0.115-9.507-1.344-14.030c-1.165-5.023-3.379-9.742-6.502-13.846s-7.078-7.499-11.61-9.962l-9.216-4.672c-17.069-10.204-30.95-24.979-40.064-42.655s-13.107-37.551-11.52-57.377v-43.072c-1.472-20.017 2.618-40.051 11.827-57.885 9.203-17.836 23.162-32.776 40.333-43.171l7.872-3.904c9.030-5.601 15.821-14.183 19.2-24.257 1.466-4.57 1.914-9.408 1.318-14.176-0.602-4.762-2.227-9.338-4.774-13.408l-50.176-87.744c-2.336-4.371-5.549-8.224-9.434-11.302-3.885-3.085-8.365-5.338-13.158-6.618-5.146-1.229-10.496-1.35-15.693-0.358-5.19 0.992-10.118 3.078-14.451 6.118l-9.92 3.776c-17.382 9.504-37.030 14.080-56.826 13.229-19.795-0.845-38.982-7.078-55.494-18.029-11.533-7.866-23.565-14.963-36.032-21.248-17.946-8.877-33.101-22.541-43.782-39.482-10.682-16.934-16.48-36.493-16.762-56.518v-10.944c0.102-5.069-0.819-10.112-2.707-14.816-1.894-4.71-4.717-8.986-8.307-12.57-3.584-3.584-7.859-6.413-12.57-8.307-4.704-1.888-9.741-2.81-14.816-2.707h-102.143c-5.076-0.122-10.125 0.787-14.839 2.675-4.714 1.882-8.996 4.71-12.588 8.301s-6.414 7.872-8.301 12.582c-1.886 4.717-2.796 9.766-2.673 14.842v10.944c-0.221 20.128-6.061 39.789-16.861 56.774s-26.128 30.618-44.259 39.354v0zM742.828 384c-0.288 45.622-14.086 90.136-39.642 127.926-25.562 37.791-61.741 67.167-103.974 84.421s-88.63 21.616-133.339 12.532c-44.709-9.083-85.727-31.203-117.88-63.569s-54.001-73.531-62.787-118.3c-8.787-44.768-4.118-91.136 13.416-133.254 17.535-42.116 47.149-78.103 85.109-103.409s82.564-38.81 128.186-38.797c61.426 0.269 120.236 24.896 163.525 68.474 43.29 43.58 67.52 102.55 67.386 163.975v0zM511.917 198.975c-36.645-0.243-72.536 10.406-103.123 30.592-30.586 20.179-54.49 48.994-68.681 82.781s-18.029 71.027-11.028 106.997c7.002 35.971 24.527 69.053 50.354 95.050s58.792 43.741 94.716 50.979c35.924 7.238 73.191 3.646 107.066-10.321 33.882-13.968 62.848-37.681 83.232-68.134 20.39-30.452 31.27-66.273 31.27-102.919 0.102-48.892-19.187-95.829-53.651-130.516-34.458-34.688-81.261-54.285-130.156-54.509v0z" />
+<glyph unicode="&#xe911;" glyph-name="cog-f" data-tags="bw-cog-f" d="M937.907 316.224l-7.744 5.056c-6.394 3.732-11.488 9.334-14.598 16.051-3.117 6.717-4.096 14.226-2.81 21.517v49.28c-1.363 7.14-0.403 14.531 2.739 21.085s8.307 11.928 14.733 15.331l9.536 4.8c24.026 14.109 41.536 37.094 48.768 64 6.842 26.665 3.322 54.932-9.856 79.104l-50.112 87.744c-14.022 23.453-36.518 40.625-62.835 47.974-26.323 7.348-54.458 4.31-78.605-8.486l-8.768-4.416c-6.573-3.539-13.965-5.261-21.421-4.991-7.462 0.269-14.714 2.523-21.011 6.527-14.163 9.591-29.158 17.901-44.8 24.832-6.56 3.272-12.077 8.314-15.923 14.557s-5.869 13.438-5.837 20.771v13.056c0.198 13.929-2.394 27.757-7.616 40.671s-12.979 24.653-22.803 34.527c-9.83 9.874-21.53 17.684-34.419 22.971s-26.701 7.944-40.634 7.814h-102.399c-13.903 0.087-27.684-2.602-40.535-7.908s-24.515-13.123-34.307-22.993c-9.792-9.87-17.517-21.594-22.721-34.487s-7.784-26.694-7.588-40.596v-10.944c0.065-7.227-1.875-14.33-5.603-20.521s-9.1-11.228-15.517-14.551c-11.382-5.143-22.395-11.066-32.96-17.728l-12.16-7.168c-6.204-4.441-13.576-6.961-21.199-7.245s-15.164 1.678-21.681 5.645l-7.936 3.904c-11.711 7.032-24.755 11.555-38.305 13.285s-27.313 0.627-40.415-3.237c-26.891-7.432-49.77-25.16-63.68-49.344l-49.92-87.36c-7.132-12.097-11.734-25.515-13.527-39.442s-0.74-28.074 3.095-41.582c3.487-12.99 9.558-25.142 17.85-35.732s18.633-19.398 30.406-25.9l5.76-5.696 2.624-1.856c6.393-3.733 11.488-9.335 14.601-16.052s4.092-14.226 2.807-21.516v-49.408c0.653-7.065-0.627-14.174-3.705-20.566s-7.837-11.827-13.767-15.722l-9.536-4.8c-23.447-14.435-40.515-37.26-47.732-63.834s-4.040-54.893 8.884-79.206l50.176-87.744c13.613-23.91 36.116-41.478 62.615-48.89 26.499-7.405 54.851-4.051 78.889 9.338l8.704 4.352c6.575 3.584 13.988 5.338 21.472 5.094 7.483-0.25 14.764-2.496 21.088-6.502 14.163-9.594 29.156-17.907 44.8-24.832 6.562-3.27 12.077-8.314 15.923-14.56 3.846-6.24 5.868-13.434 5.837-20.768v-10.944c-0.205-13.907 2.371-27.718 7.576-40.621s12.936-24.634 22.737-34.502c9.801-9.875 21.475-17.69 34.338-22.989s26.654-7.974 40.565-7.872h102.399c13.914-0.102 27.712 2.573 40.576 7.872s24.544 13.114 34.349 22.982c9.805 9.875 17.542 21.6 22.758 34.502 5.21 12.902 7.795 26.714 7.597 40.627v10.944c-0.064 7.226 1.875 14.33 5.606 20.518 3.725 6.195 9.094 11.232 15.514 14.554 11.366 5.133 22.362 11.053 32.896 17.728l2.752 1.6 9.408 5.568c6.221 4.422 13.606 6.931 21.235 7.213 7.629 0.288 15.174-1.664 21.709-5.613l7.936-3.904c11.987-7.136 25.306-11.757 39.13-13.581 13.83-1.824 27.891-0.819 41.318 2.957 13.197 3.61 25.51 9.901 36.16 18.496 10.65 8.589 19.411 19.29 25.728 31.424l49.92 87.36c7.008 11.814 11.514 24.947 13.229 38.579 1.722 13.632 0.614 27.469-3.245 40.653-7.168 26.795-24.595 49.692-48.512 63.745zM511.923 202.495c-35.898 0-70.99 10.643-100.838 30.592-29.848 19.942-53.112 48.288-66.849 81.454s-17.332 69.66-10.329 104.868c7.004 35.208 24.29 67.549 49.674 92.933s57.724 42.671 92.932 49.674c35.208 7.004 71.704 3.409 104.868-10.328s61.51-37.002 81.459-66.85c19.942-29.848 30.586-64.94 30.586-100.838 0-48.138-19.123-94.305-53.158-128.34-34.042-34.042-80.205-53.165-128.345-53.165z" />
+<glyph unicode="&#xe912;" glyph-name="check-circle" data-tags="bw-check-circle" d="M512.001-127.998c-101.264 0-200.254 30.029-284.452 86.285-84.198 56.262-149.822 136.224-188.574 229.779s-48.892 196.502-29.136 295.821 68.519 190.548 140.124 262.152c71.604 71.604 162.835 120.368 262.152 140.123s202.264 9.616 295.82-29.136c93.555-38.752 173.523-104.377 229.779-188.574 56.262-84.198 86.285-183.188 86.285-284.452-0.147-135.743-54.144-265.887-150.125-361.868-95.987-95.987-226.131-149.978-361.872-150.131v0zM512.001 832.001c-88.606 0-175.222-26.275-248.895-75.502s-131.095-119.195-165.003-201.056c-33.908-81.861-42.78-171.939-25.494-258.843 17.286-86.902 59.954-166.729 122.608-229.385 62.654-62.65 142.48-105.318 229.383-122.605s176.979-8.416 258.841 25.491c81.862 33.907 151.834 91.328 201.056 165.005 49.229 73.67 75.501 160.289 75.501 248.895-0.134 118.775-47.373 232.647-131.36 316.634s-197.862 131.23-316.637 131.366v0zM425.529 155.836c-5.866-0.013-11.5 2.285-15.68 6.4l-144.448 141.315c-2.088 2.076-3.745 4.544-4.876 7.262s-1.713 5.634-1.713 8.578c0 2.944 0.582 5.859 1.713 8.578s2.788 5.187 4.876 7.262c4.191 4.183 9.853 6.558 15.775 6.618s11.63-2.201 15.905-6.298l117.952-115.203c1.054-1.037 2.317-1.843 3.706-2.355s2.871-0.73 4.348-0.627c1.477 0.102 2.916 0.518 4.22 1.222s2.444 1.677 3.343 2.848l295.87 384.707c1.754 2.438 3.974 4.5 6.541 6.062 2.56 1.562 5.414 2.594 8.384 3.032s5.997 0.276 8.902-0.478c2.906-0.754 5.626-2.084 8.006-3.912s4.371-4.115 5.856-6.727c1.478-2.612 2.419-5.494 2.758-8.476 0.346-2.982 0.090-6.003-0.762-8.883-0.845-2.88-2.259-5.56-4.166-7.882l-318.462-414.083c-1.929-2.515-4.369-4.602-7.159-6.112s-5.869-2.413-9.033-2.656l-1.856-0.192z" />
+<glyph unicode="&#xe913;" glyph-name="eye" data-tags="bw-eye" d="M102.37 409.92c-15.296-14.208-15.296-37.76 0-51.904 76.032-70.080 232.448-190.4 409.088-190.4 176.96 0 332.992 120.256 408.96 190.208 15.36 14.080 15.36 37.696 0.064 51.84-76.096 70.144-232.512 190.464-409.024 190.464-177.088 0.192-333.12-120.128-409.088-190.208zM511.458 96c-282.112 0-489.728 247.040-499.136 257.792-17.408 17.088-15.744 45.312 0.96 64.896 9.408 10.688 216.064 253.312 498.176 253.312s486.144-236.16 495.552-246.912c21.504-21.12 23.296-59.392 1.408-80.896-9.408-10.688-214.848-248.192-496.96-248.192zM511.433 486.17c-57.472 0-104.192-45.888-104.192-102.208 0-56.384 46.72-102.208 104.192-102.208s104.192 45.824 104.192 102.208c0 56.32-46.72 102.208-104.192 102.208zM511.433 234.33c-84.096 0-152.512 67.136-152.512 149.632s68.416 149.632 152.512 149.632c84.096 0 152.512-67.136 152.512-149.632s-68.416-149.632-152.512-149.632z" />
+<glyph unicode="&#xe914;" glyph-name="pencil-square" data-tags="bw-pencil-square" d="M764.915-127.758h-658.176c-28.279 0.051-55.382 11.322-75.361 31.334s-31.199 47.136-31.199 75.418v659.585c0 28.279 11.22 55.403 31.199 75.417s47.082 31.284 75.361 31.335h348.736c9.437 0 18.488-3.749 25.162-10.422s10.422-15.724 10.422-25.162c0-9.437-3.749-18.489-10.422-25.162s-15.724-10.422-25.162-10.422h-348.736c-9.427-0.017-18.461-3.773-25.12-10.445s-10.4-15.713-10.4-25.139v-659.585c0-9.427 3.74-18.47 10.4-25.139s15.693-10.426 25.12-10.445h658.176c9.427 0.019 18.464 3.776 25.12 10.445 6.662 6.669 10.4 15.712 10.4 25.139v288.001c-0.205 4.787 0.563 9.565 2.253 14.049 1.696 4.483 4.275 8.577 7.59 12.036s7.296 6.212 11.706 8.092c4.403 1.88 9.146 2.85 13.939 2.85s9.536-0.97 13.939-2.85c4.41-1.88 8.39-4.633 11.706-8.092s5.894-7.554 7.59-12.036c1.69-4.483 2.458-9.261 2.253-14.049v-288.001c0.019-28.275-11.187-55.398-31.155-75.411-19.968-20.019-47.066-31.29-75.341-31.341v0zM391.668 238.258c-5.855 0.026-11.614 1.491-16.769 4.269s-9.545 6.784-12.784 11.661c-3.239 4.876-5.227 10.476-5.788 16.304s0.323 11.705 2.572 17.111l57.6 138.112c5.273 12.673 12.968 24.195 22.656 33.92l404.991 405.696c19.846 19.59 46.643 30.528 74.528 30.426s54.598-11.238 74.298-30.974c19.706-19.736 30.79-46.467 30.848-74.353s-10.931-54.661-30.554-74.474l-402.496-403.2c-11.942-11.922-26.554-20.829-42.624-25.984l-145.663-46.529c-3.478-1.222-7.129-1.894-10.816-1.984zM918.707 825.075c-4.512 0.008-8.986-0.876-13.158-2.6-4.179-1.724-7.968-4.255-11.162-7.448l-404.863-405.696c-3.14-3.185-5.64-6.944-7.36-11.072l-28.032-67.072 72.511 23.168c5.222 1.66 9.965 4.559 13.824 8.448v0l402.624 403.2c4.832 4.815 8.122 10.957 9.459 17.646 1.331 6.689 0.653 13.624-1.965 19.924-2.611 6.301-7.034 11.684-12.71 15.466s-12.346 5.793-19.168 5.779v0.256z" />
+<glyph unicode="&#xe915;" glyph-name="bookmark" data-tags="bw-bookmark" d="M201.022 896.095v-64l621.891-1.984c2.547-0.181 4.922-1.356 6.605-3.272 1.69-1.916 2.56-4.419 2.419-6.968v-873.408c0.064-1.299-0.122-2.598-0.557-3.827-0.442-1.229-1.114-2.355-1.99-3.315-0.87-0.966-1.933-1.747-3.11-2.298-1.178-0.557-2.451-0.87-3.75-0.928-0.557-0.083-1.114-0.083-1.664 0l-218.176 274.048-5.12 4.288c-24.499 20.294-55.334 31.366-87.144 31.296-31.812-0.070-62.595-11.277-87.003-31.68l-5.184-4.288-4.16-5.312-211.2-268.224c-0.573-0.083-1.155-0.083-1.728 0-1.307 0.090-2.583 0.435-3.754 1.024s-2.213 1.402-3.065 2.4c-0.852 0.992-1.498 2.15-1.898 3.398s-0.548 2.56-0.435 3.866v874.944c-0.141 2.55 0.726 5.052 2.415 6.968s4.062 3.091 6.609 3.272v64zM201.022 896.095c-9.67-0.075-19.232-2.056-28.137-5.828s-16.979-9.263-23.761-16.158c-6.782-6.895-12.138-15.058-15.763-24.025s-5.448-18.558-5.363-28.229v-874.944c-0.101-9.715 1.722-19.354 5.363-28.358s9.029-17.203 15.853-24.115c6.824-6.912 14.95-12.403 23.907-16.166 8.958-3.757 18.571-5.702 28.285-5.728 16.845 0.019 33.133 6.035 45.952 16.96l217.088 275.968c12.968 10.816 29.32 16.742 46.208 16.742 16.886 0 33.238-5.926 46.211-16.742l220.032-276.8c12.774-10.803 28.96-16.742 45.696-16.768 9.728 0.032 19.354 1.99 28.32 5.766 8.966 3.77 17.094 9.286 23.917 16.218 6.829 6.931 12.211 15.149 15.846 24.173 3.629 9.024 5.44 18.675 5.325 28.403v873.408c0.154 19.493-7.43 38.252-21.082 52.168s-32.262 21.852-51.75 22.072l-622.147 1.984z" />
+<glyph unicode="&#xe916;" glyph-name="files" data-tags="bw-files" d="M980.351 567.298h-332.416c-5.811-0.008-11.565-1.179-16.915-3.443s-10.195-5.576-14.253-9.741l-8.768-9.664v308.096c0.006 5.704-1.107 11.353-3.283 16.625s-5.37 10.063-9.402 14.099c-4.032 4.036-8.819 7.238-14.086 9.423s-10.918 3.309-16.621 3.309h-332.735c-5.814 0.006-11.57-1.158-16.924-3.423s-10.199-5.585-14.244-9.761l-188.672-194.624c-7.784-8.148-12.098-19.003-12.032-30.272v-413.763c0-5.702 1.124-11.354 3.308-16.627s5.385-10.061 9.42-14.099c4.035-4.032 8.826-7.232 14.098-9.421 5.272-2.182 10.923-3.309 16.63-3.309h372.544v-285.248c0-5.702 1.124-11.354 3.308-16.627s5.385-10.061 9.42-14.099c4.035-4.032 8.826-7.232 14.098-9.421 5.272-2.182 10.923-3.309 16.63-3.309h521.087c5.709-0.006 11.366 1.114 16.64 3.296 5.274 2.176 10.074 5.376 14.106 9.414 4.038 4.038 7.238 8.832 9.421 14.106 2.182 5.28 3.296 10.931 3.29 16.64v608.387c0.006 5.725-1.114 11.396-3.309 16.685s-5.408 10.091-9.466 14.131c-4.058 4.039-8.877 7.236-14.176 9.405s-10.97 3.269-16.698 3.235zM613.247 443.778v-73.792c0-3.038-1.203-5.952-3.354-8.1s-5.062-3.356-8.102-3.356h-71.104c-9.728 1.28-5.696 8.576-5.12 9.472l77.44 79.936c3.008 1.024 8.832 2.24 10.24-4.16v0zM109.44 696.77l77.504 79.872c3.008 1.088 8.832 2.24 10.24-4.16v-73.728c0-3.038-1.207-5.952-3.356-8.1s-5.062-3.356-8.1-3.356h-71.104c-9.728 1.216-5.824 8.576-5.184 9.472zM428.096 359.49c-7.866-8.116-12.272-18.97-12.288-30.272v-64.448h-320c-8.487 0-16.626 3.372-22.627 9.373s-9.373 14.14-9.373 22.627v294.4c0 8.487 3.372 16.627 9.373 22.627s14.14 9.373 22.627 9.373h90.112c9.909 0.008 19.72 1.969 28.871 5.768s17.465 9.365 24.466 16.378c7.001 7.012 12.552 15.336 16.336 24.493s5.727 18.972 5.719 28.881v101.248c0 8.487 3.372 16.627 9.373 22.628s14.14 9.372 22.627 9.372h218.368c8.486 0 16.627-3.372 22.63-9.372 5.997-6.001 9.37-14.141 9.37-22.628v-321.216l-115.583-119.232zM959.999-31.937c0-8.486-3.373-16.621-9.37-22.624-6.003-6.003-14.144-9.376-22.63-9.376h-416c-8.486 0-16.625 3.373-22.627 9.376s-9.373 14.138-9.373 22.624v294.787c0 8.487 3.372 16.627 9.373 22.628s14.14 9.372 22.627 9.372h90.176c20.013 0 39.206 7.95 53.357 22.1s22.099 33.343 22.099 53.356v100.928c0 8.487 3.373 16.627 9.376 22.627 5.997 6.001 14.138 9.373 22.624 9.373h218.368c8.486 0 16.627-3.372 22.63-9.373 5.997-6.001 9.37-14.14 9.37-22.627v-503.171zM607.999 523.587c-25.6-11.52-38.080-75.904-64-86.592z" />
+<glyph unicode="&#xe917;" glyph-name="trash" data-tags="bw-trash" d="M989.89 791.488h-279.936c-6.144-0.005-12.198 1.462-17.651 4.28-5.459 2.817-10.163 6.902-13.709 11.912l-41.088 57.6c-6.707 9.469-15.578 17.198-25.875 22.542s-21.728 8.148-33.325 8.178h-139.395c-12.215 0.016-24.237-3.049-34.954-8.91s-19.782-14.331-26.358-24.626l-33.92-53.184c-3.472-5.459-8.266-9.952-13.939-13.062s-12.039-4.737-18.509-4.73h-277.12c-9.013 0-17.657-3.581-24.030-9.954s-9.954-15.017-9.954-24.030c0-9.013 3.581-17.657 9.954-24.030s15.017-9.954 24.030-9.954h61.888l79.232-786.432c1.839-17.862 10.239-34.406 23.576-46.432s30.66-18.669 48.616-18.656h558.403c18.189-0.032 35.731 6.784 49.133 19.091 13.395 12.314 21.67 29.21 23.187 47.341l64.384 784.768h47.36c4.461 0 8.877 0.879 13.005 2.587 4.122 1.708 7.866 4.211 11.021 7.367s5.658 6.902 7.366 11.025c1.709 4.124 2.592 8.543 2.592 13.005s-0.883 8.882-2.592 13.005c-1.709 4.124-4.211 7.869-7.366 11.025s-6.899 5.659-11.021 7.367c-4.128 1.708-8.544 2.587-13.005 2.587v0.32zM436.479 828.032h144.067l25.92-36.544h-193.219l23.232 36.544zM774.402-60.032h-496.131c-9.542-0.051-18.762 3.456-25.86 9.83-7.099 6.381-11.569 15.174-12.54 24.666l-70.784 706.944c-0.519 5.346 0.089 10.741 1.785 15.837s4.442 9.78 8.061 13.748c3.619 3.969 8.030 7.134 12.948 9.292s10.235 3.26 15.606 3.235h625.027c5.306 0.016 10.554-1.068 15.424-3.183 4.864-2.115 9.242-5.215 12.845-9.106 3.61-3.891 6.374-8.487 8.115-13.499s2.426-10.331 2.016-15.62l-58.112-706.944c-0.806-9.619-5.203-18.586-12.32-25.107s-16.429-10.125-26.080-10.093v0zM364.796 129.472c-3.132-0.006-6.234 0.602-9.13 1.792-2.896 1.197-5.528 2.944-7.746 5.158s-3.977 4.838-5.177 7.731c-1.201 2.893-1.819 5.997-1.819 9.126v365.119c0 6.332 2.515 12.403 6.992 16.88s10.549 6.992 16.88 6.992c6.332 0 12.403-2.515 16.88-6.992s6.992-10.548 6.992-16.88v-365.183c-0.008-3.13-0.632-6.221-1.836-9.107s-2.965-5.504-5.182-7.712c-2.217-2.202-4.846-3.949-7.738-5.139-2.892-1.184-5.989-1.792-9.116-1.786v0zM687.938 129.472c-3.136-0.006-6.234 0.602-9.133 1.792-2.893 1.197-5.53 2.944-7.744 5.158-2.221 2.214-3.981 4.838-5.178 7.731-1.203 2.893-1.818 5.997-1.818 9.126v365.12c0.314 6.125 2.97 11.896 7.418 16.12s10.349 6.579 16.486 6.579c6.131 0 12.032-2.355 16.48-6.579s7.104-9.994 7.424-16.12v-365.184c-0.013-3.13-0.634-6.234-1.843-9.12-1.21-2.893-2.976-5.51-5.197-7.718-2.227-2.208-4.864-3.949-7.763-5.139-2.899-1.184-6.003-1.786-9.133-1.766zM526.408 129.472c-3.136-0.019-6.246 0.589-9.152 1.773-2.906 1.19-5.543 2.944-7.767 5.152-2.225 2.214-3.99 4.845-5.194 7.744-1.204 2.893-1.825 6.003-1.825 9.139v365.12c0.317 6.125 2.974 11.896 7.422 16.12 4.445 4.224 10.346 6.579 16.484 6.579 6.131 0 12.032-2.355 16.48-6.579s7.104-9.994 7.424-16.12v-365.184c-0.013-3.13-0.634-6.221-1.837-9.107s-2.97-5.504-5.184-7.712c-2.214-2.202-4.845-3.949-7.738-5.139-2.893-1.184-5.99-1.792-9.114-1.786v0z" />
+<glyph unicode="&#xe918;" glyph-name="plus" data-tags="bw-plus" d="M992 420.864h-416c-8.486 0-16.627 3.372-22.63 9.373-5.997 6.001-9.37 14.14-9.37 22.627v411.136c0 8.487-3.373 16.626-9.37 22.627-6.003 6.001-14.144 9.373-22.63 9.373s-16.627-3.371-22.627-9.373c-6.001-6.001-9.373-14.14-9.373-22.627v-411.136c0-8.487-3.372-16.627-9.373-22.627s-14.14-9.373-22.627-9.373h-416c-4.202 0-8.364-0.828-12.246-2.436s-7.41-3.965-10.381-6.937c-2.972-2.972-5.329-6.499-6.937-10.381s-2.436-8.044-2.436-12.246c0-4.202 0.828-8.364 2.436-12.246s3.965-7.41 6.937-10.381c2.972-2.972 6.499-5.329 10.381-6.937s8.044-2.436 12.246-2.436h416c8.487 0 16.627-3.372 22.627-9.373s9.373-14.14 9.373-22.627v-420.864c0-8.486 3.372-16.627 9.373-22.63 6.001-5.997 14.14-9.37 22.627-9.37s16.627 3.373 22.63 9.37c5.997 6.003 9.37 14.144 9.37 22.63v420.864c0 8.487 3.373 16.626 9.37 22.627 6.003 6.001 14.144 9.373 22.63 9.373h416c8.486 0 16.627 3.372 22.63 9.373 5.997 6.001 9.37 14.14 9.37 22.627s-3.373 16.627-9.37 22.627c-6.003 6.001-14.144 9.373-22.63 9.373v0z" />
+<glyph unicode="&#xe919;" glyph-name="star" data-tags="bw-star" d="M251.392-96c-19.539 0.038-38.554 6.317-54.272 17.92-13.35 9.728-23.703 23.008-29.88 38.323-6.177 15.322-7.932 32.064-5.064 48.333l39.296 223.488c0.672 3.962 0.351 8.032-0.932 11.84s-3.493 7.238-6.428 9.984l-166.528 158.272c-12.113 11.374-20.749 25.951-24.907 42.038s-3.665 33.023 1.419 48.842c5.174 16.164 14.832 30.525 27.851 41.414s28.861 17.855 45.685 20.090l230.4 32.64c4.243 0.558 8.289 2.129 11.798 4.58s6.376 5.709 8.362 9.5l102.528 203.328c7.606 14.958 19.226 27.503 33.559 36.229s30.813 13.29 47.596 13.178v0c16.768 0.114 33.242-4.449 47.565-13.176s25.933-21.274 33.523-36.232v0l102.976-203.392c1.958-3.78 4.8-7.029 8.288-9.47 3.494-2.441 7.52-4.001 11.744-4.546l230.4-32.64c16.819-2.235 32.666-9.202 45.683-20.090s22.675-25.25 27.853-41.414c5.082-15.819 5.574-32.755 1.414-48.842-4.154-16.087-12.794-30.664-24.902-42.038l-166.4-158.272c-2.944-2.746-5.158-6.17-6.458-9.978-1.293-3.808-1.626-7.878-0.966-11.846l39.36-223.488c2.867-16.269 1.114-33.011-5.069-48.333-6.176-15.315-16.525-28.595-29.875-38.323-13.702-10.086-29.946-16.154-46.899-17.523-16.96-1.363-33.965 2.022-49.101 9.779l-206.336 105.536c-3.917 1.99-8.25 3.027-12.64 3.027-4.396 0-8.726-1.037-12.643-3.027l-205.888-105.6c-13.039-6.656-27.472-10.125-42.112-10.112v0zM511.874 800c-4.938 0.063-9.793-1.244-14.030-3.774s-7.689-6.187-9.972-10.562l-102.912-203.264c-6.607-12.996-16.265-24.197-28.147-32.646s-25.633-13.892-40.077-15.866l-230.080-32.64c-4.906-0.575-9.546-2.535-13.377-5.652s-6.694-7.261-8.255-11.948c-1.462-4.344-1.636-9.018-0.5-13.459s3.532-8.457 6.9-11.565l166.4-158.336c10.595-10.017 18.547-22.5 23.148-36.335 4.6-13.834 5.707-28.593 3.22-42.961l-38.976-223.552c-0.807-4.531-0.302-9.197 1.456-13.446 1.757-4.256 4.694-7.917 8.464-10.554 4.132-3.091 9.058-4.941 14.203-5.338s10.296 0.678 14.853 3.098l205.824 105.6c12.972 6.656 27.341 10.125 41.923 10.125 14.579 0 28.947-3.469 41.92-10.125l205.696-105.6c4.55-2.432 9.702-3.507 14.854-3.11 5.146 0.397 10.074 2.253 14.202 5.35 3.763 2.656 6.694 6.33 8.448 10.592s2.266 8.934 1.472 13.472l-39.296 223.424c-2.534 14.362-1.459 29.126 3.13 42.971 4.595 13.843 12.557 26.326 23.174 36.325l166.4 158.336c3.386 3.094 5.798 7.11 6.931 11.556 1.139 4.445 0.954 9.126-0.531 13.468-1.517 4.701-4.358 8.865-8.186 11.988s-8.474 5.072-13.382 5.612l-230.080 32.64c-14.4 2.024-28.090 7.498-39.917 15.956-11.821 8.458-21.427 19.649-27.987 32.62l-102.848 203.264c-2.298 4.38-5.76 8.038-10.010 10.569s-9.114 3.835-14.054 3.767v0z" />
+<glyph unicode="&#xe91a;" glyph-name="list" data-tags="bw-list" d="M992.003 426.693h-773.694c-8.487 0-16.626 3.372-22.627 9.373s-9.373 14.14-9.373 22.627c0 8.487 3.372 16.627 9.373 22.628s14.14 9.372 22.627 9.372h773.694c8.486 0 16.627-3.372 22.63-9.372s9.37-14.141 9.37-22.628c0-8.487-3.366-16.626-9.37-22.627s-14.144-9.373-22.63-9.373zM32.001 426.95c-4.215-0.072-8.392 0.803-12.224 2.56-3.764 1.512-7.231 3.679-10.24 6.4-5.846 6.242-9.076 14.488-9.024 23.040-0.033 8.358 3.206 16.399 9.024 22.4 4.641 4.36 10.412 7.33 16.657 8.575s12.714 0.713 18.671-1.535c3.789-1.746 7.252-4.127 10.24-7.040 5.771-6.022 8.963-14.060 8.896-22.4 0.052-8.552-3.178-16.798-9.024-23.040-3.009-2.721-6.476-4.888-10.24-6.4-3.997-1.808-8.352-2.684-12.736-2.56zM991.991 576.006h-773.697c-8.487 0-16.627 3.372-22.627 9.373s-9.373 14.14-9.373 22.627c0 8.487 3.372 16.627 9.373 22.627s14.14 9.373 22.627 9.373h773.697c8.486 0 16.627-3.372 22.624-9.373 6.003-6.001 9.376-14.14 9.376-22.627s-3.373-16.627-9.376-22.627c-5.997-6.001-14.138-9.373-22.624-9.373zM32.765 576.006c-4.405-0.126-8.782 0.749-12.8 2.56-3.903 1.51-7.406 3.897-10.24 6.976-3.060 2.902-5.48 6.412-7.104 10.304-1.547 3.878-2.433 7.988-2.624 12.16 0.229 4.139 1.092 8.219 2.56 12.096 1.592 3.91 4.015 7.426 7.104 10.304 2.849 3.076 6.347 5.481 10.24 7.040 5.933 2.406 12.44 3.021 18.718 1.77s12.052-4.314 16.61-8.81c2.906-3.031 5.304-6.51 7.104-10.304 1.178-3.921 1.74-8.002 1.664-12.096 0.039-4.132-0.61-8.241-1.92-12.16-1.601-3.905-4.023-7.42-7.104-10.304-2.834-3.079-6.337-5.466-10.24-6.976-3.752-1.725-7.839-2.598-11.968-2.56zM991.991 277.382h-773.697c-8.487 0-16.627 3.372-22.627 9.373s-9.373 14.14-9.373 22.627c0 8.487 3.372 16.627 9.373 22.627s14.14 9.373 22.627 9.373h773.697c8.486 0 16.627-3.372 22.624-9.373 6.003-6.001 9.376-14.14 9.376-22.627s-3.373-16.626-9.376-22.627c-5.997-6.001-14.138-9.373-22.624-9.373zM32.765 277.255c-4.378 0.152-8.701 1.017-12.8 2.56-3.8 1.699-7.268 4.061-10.24 6.976-5.936 6.009-9.407 14.023-9.728 22.464 0.17 4.147 1.036 8.236 2.56 12.096 1.741 3.999 4.143 7.677 7.104 10.88 6.272 5.591 14.381 8.68 22.784 8.68s16.512-3.089 22.784-8.68c5.662-6.312 8.785-14.497 8.768-22.976 0.050-8.381-3.19-16.447-9.024-22.464-2.972-2.915-6.44-5.277-10.24-6.976-3.833-1.466-7.871-2.33-11.968-2.56v0zM992.003 128.006h-773.694c-8.487 0-16.626 3.373-22.627 9.37-6.001 6.003-9.373 14.144-9.373 22.63s3.372 16.627 9.373 22.63c6.001 5.997 14.14 9.37 22.627 9.37h773.694c8.486 0 16.627-3.373 22.63-9.37 6.003-6.003 9.37-14.144 9.37-22.63s-3.366-16.627-9.37-22.63c-6.003-5.997-14.144-9.37-22.63-9.37zM32.767 128.006c-4.406-0.128-8.782 0.749-12.8 2.56-3.903 1.51-7.406 3.898-10.24 6.976-5.857 6.010-9.121 14.074-9.088 22.464-0.072 8.346 3.174 16.384 9.024 22.336 6.126 5.882 14.291 9.165 22.784 9.165s16.657-3.283 22.784-9.165c5.756-5.997 8.908-14.022 8.768-22.336 0.050-8.378-3.19-16.448-9.024-22.464-2.835-3.078-6.338-5.466-10.24-6.976-3.752-1.722-7.839-2.598-11.968-2.56v0z" />
+<glyph unicode="&#xe91b;" glyph-name="angle-right" data-tags="bw-angle-right" d="M736.519 382.952c-0.019-27.323-9.754-53.748-27.456-74.56l-359.937-425.666c-2.714-3.206-6.035-5.85-9.772-7.782-3.737-1.926-7.816-3.098-12.006-3.45s-8.407 0.128-12.412 1.408c-4.005 1.28-7.719 3.334-10.93 6.048-3.21 2.72-5.855 6.035-7.782 9.773s-3.1 7.814-3.451 12.006c-0.35 4.192 0.127 8.41 1.407 12.416 1.279 4 3.335 7.718 6.049 10.925l359.937 425.73c8.077 9.229 12.531 21.078 12.531 33.344s-4.454 24.115-12.531 33.344l-363.969 426.176c-2.975 3.156-5.277 6.883-6.768 10.956s-2.138 8.406-1.901 12.737c0.236 4.331 1.349 8.568 3.273 12.455s4.618 7.342 7.917 10.156c3.3 2.814 7.138 4.927 11.28 6.213s8.502 1.715 12.816 1.263c4.313-0.452 8.49-1.776 12.275-3.891s7.103-4.979 9.748-8.415l363.841-426.176c17.946-20.874 27.821-47.482 27.84-75.008v0z" />
+<glyph unicode="&#xe91c;" glyph-name="external-link" data-tags="bw-external-link" d="M992.002 364.351c-8.493 0-16.627-3.372-22.63-9.373s-9.37-14.14-9.37-22.627v-354.176c0.166-10.982-4.019-21.587-11.648-29.491s-18.074-12.467-29.056-12.685h-814.595c-10.983 0.218-21.432 4.781-29.060 12.685s-11.815 18.509-11.644 29.491v811.456c-0.11 5.455 0.855 10.878 2.841 15.96s4.954 9.722 8.734 13.657c3.78 3.934 8.298 7.085 13.296 9.274s10.378 3.37 15.833 3.478h348.544c8.487 0 16.627 3.371 22.628 9.373s9.372 14.14 9.372 22.627c0 8.487-3.372 16.626-9.372 22.627s-14.141 9.373-22.628 9.373h-348.544c-13.859-0.109-27.562-2.946-40.324-8.351s-24.336-13.27-34.058-23.147c-9.723-9.877-17.405-21.573-22.607-34.419s-7.824-26.591-7.715-40.451v-811.456c-0.17-27.955 10.759-54.842 30.39-74.746s46.358-31.213 74.314-31.43h814.595c27.955 0.218 54.682 11.526 74.31 31.43s30.56 46.79 30.394 74.746v354.176c0 8.487-3.373 16.627-9.376 22.627s-14.138 9.373-22.624 9.373zM958.844 895.999l-174.976-0.576c-8.448-0.373-16.422-3.992-22.272-10.102-5.843-6.11-9.107-14.241-9.107-22.698s3.264-16.587 9.107-22.698c5.85-6.11 13.824-9.729 22.272-10.102l97.856 0.384c0 0 12.8 0 8.128-10.496l-316.608-338.304c-5.536-6.422-8.378-14.739-7.917-23.207 0.454-8.468 4.166-16.433 10.362-22.223 6.202-5.791 14.394-8.959 22.874-8.842s16.589 3.512 22.618 9.472l319.168 341.12c0.787 0.602 1.709 1.002 2.682 1.164s1.978 0.081 2.912-0.235c0.934-0.316 1.779-0.859 2.458-1.579s1.165-1.596 1.421-2.55v0-107.456c-0.192-4.429 0.512-8.852 2.074-13.002 1.555-4.15 3.942-7.941 7.008-11.144s6.746-5.753 10.822-7.495c4.077-1.741 8.467-2.639 12.896-2.639 4.435 0 8.826 0.898 12.902 2.639s7.757 4.291 10.822 7.495c3.066 3.203 5.453 6.995 7.008 11.144 1.562 4.15 2.266 8.573 2.067 13.002l-0.576 172.8c-0.032 14.854-5.939 29.091-16.429 39.606s-24.717 16.454-39.571 16.522v0z" />
+<glyph unicode="&#xe91d;" glyph-name="refresh" data-tags="bw-refresh" d="M1009.622 638.015c-6.669 3.825-14.566 4.895-22.016 2.983-7.443-1.913-13.85-6.657-17.856-13.223l-57.6-96.832c-1.005-1.662-2.451-3.009-4.186-3.887s-3.68-1.251-5.613-1.078c-1.933 0.173-3.782 0.886-5.331 2.058s-2.733 2.756-3.43 4.57c-36.41 101.348-108.269 186.097-202.304 238.592-105.747 60.056-230.767 76.43-348.413 45.632-117.227-29.444-217.977-104.207-280.128-207.872-30.484-50.468-50.396-106.604-58.526-165s-4.31-117.836 11.23-174.712c15.533-57.318 42.372-110.944 78.94-157.734s82.124-85.792 133.988-114.714c105.749-60.051 230.769-76.422 348.413-45.632 97.837 24.672 184.755 81.043 247.168 160.32 2.323 2.95 4.026 6.336 5.011 9.952 0.986 3.622 1.235 7.405 0.736 11.123s-1.741 7.296-3.654 10.528c-1.907 3.226-4.448 6.042-7.469 8.269-6.176 4.582-13.888 6.592-21.517 5.6s-14.573-4.902-19.379-10.912c-54.477-69.203-130.342-118.419-215.744-139.968-102.709-26.867-211.85-12.582-304.189 39.808-45.217 25.299-84.925 59.373-116.796 100.224s-55.263 87.654-68.804 137.664c-13.568 49.663-16.905 101.565-9.809 152.557s24.477 100.010 51.089 144.083c54.184 90.289 141.929 155.436 244.032 181.184 102.732 26.861 211.889 12.579 304.253-39.808 80.314-44.867 142.176-116.682 174.656-202.752 0.685-1.968 0.742-4.098 0.179-6.102-0.57-2.004-1.734-3.786-3.347-5.104s-3.59-2.111-5.67-2.271c-2.074-0.159-4.147 0.323-5.946 1.38l-99.776 56.256c-6.81 3.921-14.886 5.024-22.502 3.075s-14.17-6.796-18.266-13.507c-1.85-3.218-3.046-6.773-3.507-10.458-0.467-3.685-0.186-7.425 0.813-11.002 1.005-3.576 2.707-6.916 5.018-9.825s5.178-5.328 8.429-7.114l182.4-103.36c6.701-3.617 14.534-4.532 21.888-2.56 3.68 0.925 7.136 2.566 10.176 4.829 3.046 2.262 5.613 5.101 7.552 8.355l106.112 177.6c1.939 3.206 3.206 6.769 3.731 10.476 0.531 3.707 0.307 7.482-0.653 11.101s-2.643 7.007-4.941 9.964c-2.298 2.956-5.171 5.42-8.442 7.243z" />
+<glyph unicode="&#xe91e;" glyph-name="discourse" data-tags="bw-discourse" d="M516.343 896c-280.229 0-516.343-225.143-516.343-503.086 0-8.914 0.229-520.914 0.229-520.914l516.114 0.457c280.457 0 507.657 233.829 507.657 511.771s-227.2 511.771-507.657 511.771zM512 91.429c-44.343 0-86.629 9.829-124.343 27.657l-185.371-45.943 52.343 171.429c-22.4 41.371-35.2 88.914-35.2 139.429 0 161.6 130.971 292.571 292.571 292.571s292.571-130.971 292.571-292.571c0-161.6-130.971-292.571-292.571-292.571z" />
+<glyph unicode="&#xe91f;" glyph-name="search" data-tags="bw-search" d="M993.098 99.194l-180.608 181.12c-9.018 8.745-15.379 19.864-18.349 32.074s-2.419 25.008 1.581 36.918c27.098 77.043 30.541 160.426 9.894 239.441-20.653 79.015-64.448 150.054-125.766 203.993s-137.363 88.316-218.369 98.716c-81.003 10.4-163.266-3.652-236.223-40.352s-133.279-94.371-173.217-165.607c-39.938-71.236-57.67-152.785-50.917-234.174s37.681-158.9 88.813-222.58c51.132-63.68 120.132-110.624 198.14-134.797 85.818-26.765 178.080-24.378 262.397 6.784 11.949 4.128 24.826 4.755 37.12 1.805 12.288-2.944 23.482-9.344 32.256-18.445l179.2-179.904c9.811-9.818 21.459-17.613 34.278-22.925 12.819-5.318 26.566-8.051 40.442-8.051 13.882 0 27.622 2.733 40.448 8.051 12.819 5.312 24.467 13.107 34.272 22.925l44.8 44.8c19.846 19.885 30.989 46.822 30.989 74.912s-11.142 55.027-30.989 74.912l-0.192 0.384zM80.716 393.658c-16.362 58.535-16.881 120.366-1.505 179.168s46.097 112.464 89.019 155.496c42.922 43.032 96.504 73.891 155.267 89.419s120.595 15.168 179.171-1.043c56.605-15.481 108.196-45.47 149.655-87.001 41.466-41.532 71.373-93.166 86.758-149.799 16.365-58.535 16.883-120.366 1.51-179.168-15.379-58.802-46.099-112.464-89.024-155.494-42.918-43.034-96.499-73.894-155.264-89.421-58.762-15.526-120.595-15.168-179.172 1.043-56.607 15.482-108.194 45.472-149.658 87.002s-71.369 93.165-86.758 149.798zM944.714-2.182l-44.8-44.8c-3.456-3.488-7.565-6.253-12.096-8.141s-9.395-2.854-14.304-2.854c-4.909 0-9.766 0.966-14.298 2.854s-8.64 4.653-12.102 8.141l-177.536 177.984c-2.701 2.752-4.787 6.048-6.138 9.664-1.344 3.616-1.914 7.469-1.67 11.322 0.237 3.853 1.286 7.61 3.072 11.027 1.792 3.418 4.275 6.426 7.296 8.819 19.616 16.442 37.658 34.675 53.888 54.464 2.381 3.053 5.376 5.574 8.794 7.392s7.181 2.886 11.040 3.149c3.859 0.262 7.738-0.301 11.366-1.645 3.629-1.338 6.938-3.437 9.696-6.144l177.792-178.176c6.976-7.059 10.886-16.576 10.886-26.496s-3.91-19.443-10.886-26.496v-0.064z" />
+<glyph unicode="&#xe920;" glyph-name="filter" data-tags="bw-filter" d="M228.028 607.421h-169.664c-15.526 0.068-30.391 6.292-41.334 17.306s-17.069 25.92-17.034 41.446v171.008c-0.051 15.537 6.067 30.459 17.012 41.487s25.819 17.261 41.356 17.329h169.664c15.537-0.068 30.412-6.3 41.356-17.329s17.063-25.95 17.012-41.487v-171.008c0.034-15.526-6.093-30.431-17.035-41.446s-25.807-17.238-41.333-17.306v0zM63.804 671.421h158.848v160.32h-158.848v-160.32zM596.919 607.421h-169.79c-15.52 0.068-30.378 6.294-41.311 17.31s-17.044 25.922-16.993 41.442v171.008c-0.034 7.69 1.448 15.312 4.36 22.43s7.197 13.592 12.611 19.054c5.414 5.462 11.851 9.803 18.943 12.777s14.7 4.522 22.39 4.555h169.79c15.52-0.085 30.374-6.327 41.293-17.355s17.018-25.941 16.947-41.461v-171.008c0.051-15.509-6.048-30.405-16.966-41.42s-25.76-17.248-41.274-17.332v0zM432.569 671.421h158.846v160.32h-158.846v-160.32zM965.687 607.421h-169.728c-15.52 0.084-30.368 6.316-41.293 17.329-10.931 11.012-17.050 25.908-17.011 41.423v171.008c-0.051 15.526 6.054 30.438 16.986 41.465s25.792 17.267 41.318 17.351h169.728c7.686-0.034 15.296-1.581 22.387-4.555s13.53-7.316 18.944-12.777c5.414-5.462 9.696-11.936 12.608-19.054s4.397-14.739 4.365-22.43v-171.008c0.051-15.52-6.061-30.426-16.998-41.442-10.931-11.016-25.786-17.242-41.306-17.31v0zM801.399 671.421h158.848v160.32h-158.976l0.128-160.32zM965.699 239.741h-169.728c-15.507 0.070-30.355 6.285-41.286 17.289s-17.050 25.892-17.018 41.401v171.072c-0.032 15.515 6.086 30.411 17.011 41.423 10.931 11.012 25.779 17.244 41.293 17.329h169.728c15.52-0.068 30.381-6.294 41.312-17.31s17.043-25.922 16.992-41.442v-171.072c0.026-7.682-1.459-15.293-4.378-22.4s-7.206-13.57-12.621-19.020c-5.414-5.45-11.846-9.782-18.931-12.739-7.091-2.963-14.694-4.506-22.374-4.531v0zM801.411 303.743h158.848v160h-158.976l0.128-160zM597.949 239.741h-169.663c-15.52 0.051-30.385 6.266-41.329 17.267-10.944 11.004-17.073 25.903-17.039 41.423v171.072c-0.034 15.526 6.092 30.431 17.035 41.446s25.807 17.238 41.333 17.306h169.663c15.526-0.068 30.394-6.292 41.331-17.306 10.944-11.014 17.069-25.92 17.037-41.446v-171.072c0.032-15.52-6.093-30.419-17.037-41.423-10.944-11.001-25.811-17.215-41.331-17.267v0zM433.726 303.743h158.783v160h-158.783v-160zM230.262 239.741h-169.728c-15.508 0.070-30.357 6.285-41.288 17.289s-17.050 25.892-17.016 41.401v171.072c-0.034 15.515 6.084 30.411 17.012 41.423s25.777 17.244 41.292 17.329h169.728c15.526-0.068 30.391-6.292 41.334-17.306s17.069-25.92 17.034-41.446v-171.072c0.035-15.52-6.094-30.419-17.038-41.423-10.945-11.001-25.81-17.215-41.33-17.267v0zM66.038 303.743h158.848v160h-158.848v-160zM965.687-127.997h-169.728c-15.507 0.083-30.342 6.304-41.274 17.306-10.925 10.995-17.050 25.875-17.030 41.382v171.072c-0.051 15.52 6.061 30.426 16.992 41.44s25.792 17.242 41.312 17.312h169.728c15.52-0.070 30.374-6.298 41.306-17.312 10.938-11.014 17.050-25.92 16.998-41.44v-171.072c0.032-15.514-6.086-30.4-17.018-41.402s-25.779-17.222-41.286-17.286v0zM801.399-63.997h158.848v160h-158.976l0.128-160zM598.967-127.997h-169.729c-15.503 0.083-30.342 6.304-41.269 17.306-10.927 10.995-17.052 25.875-17.035 41.382v171.072c-0.051 15.52 6.061 30.426 16.993 41.44s25.791 17.242 41.311 17.312h169.729c15.52-0.070 30.374-6.298 41.312-17.312 10.931-11.014 17.043-25.92 16.992-41.44v-171.072c0.032-15.514-6.086-30.4-17.018-41.402s-25.779-17.222-41.286-17.286v0zM434.677-63.997h158.849v160h-158.849v-160zM232.183-127.997h-169.728c-15.498 0.083-30.33 6.304-41.247 17.306s-17.028 25.882-16.993 41.382v171.072c-0.034 7.68 1.446 15.29 4.355 22.4s7.189 13.581 12.597 19.034c5.408 5.459 11.838 9.792 18.922 12.768 7.084 2.97 14.684 4.512 22.366 4.55h169.728c15.52-0.070 30.378-6.298 41.311-17.312s17.044-25.92 16.993-41.44v-171.072c0.017-15.507-6.108-30.387-17.035-41.382-10.927-11.002-25.766-17.222-41.269-17.306v0zM67.959-63.997h158.784v160h-158.784v-160z" />
+<glyph unicode="&#xe921;" glyph-name="plus-circle" data-tags="bw-plus-circle" horiz-adv-x="1280" d="M640-128c-101.264 0-200.254 30.029-284.452 86.285-84.198 56.262-149.822 136.224-188.574 229.779-38.752 93.558-48.892 196.504-29.136 295.822s68.519 190.548 140.124 262.152c71.604 71.604 162.834 120.368 262.152 140.123s202.267 9.616 295.822-29.136c93.555-38.752 173.517-104.377 229.779-188.574 56.256-84.198 86.285-183.188 86.285-284.452-0.154-135.744-54.144-265.888-150.131-361.869-95.981-95.987-226.125-149.978-361.869-150.131zM640 827.84c-87.783 0-173.595-26.031-246.584-74.801s-129.877-118.088-163.47-199.189c-33.593-81.101-42.383-170.343-25.257-256.439s59.397-165.181 121.469-227.254c62.072-62.074 141.156-104.346 227.253-121.472 86.097-17.12 175.338-8.333 256.438 25.261s150.419 90.483 199.187 163.469c48.774 72.992 74.803 158.802 74.803 246.586-0.134 117.672-46.938 230.486-130.144 313.692-83.213 83.207-196.026 130.012-313.696 130.148v0zM904.698 407.872h-207.104c-4.41 0-8.781 0.869-12.858 2.557s-7.776 4.163-10.899 7.283c-3.117 3.121-5.594 6.824-7.283 10.901s-2.56 8.445-2.56 12.858v207.168c0 6.331-2.515 12.403-6.989 16.88-4.48 4.477-10.547 6.992-16.883 6.992-6.328 0-12.401-2.515-16.877-6.992s-6.992-10.549-6.992-16.88v-207.040c0-4.413-0.869-8.782-2.557-12.858s-4.163-7.78-7.284-10.901c-3.12-3.12-6.824-5.595-10.9-7.283s-8.445-2.557-12.858-2.557h-207.296c-6.331 0-12.403-2.515-16.88-6.992s-6.992-10.549-6.992-16.88c0-6.332 2.515-12.403 6.992-16.881s10.549-6.991 16.88-6.991h207.040c8.911 0 17.458-3.54 23.759-9.841s9.841-14.848 9.841-23.759v-207.168c0-6.33 2.515-12.403 6.992-16.883 4.477-4.474 10.549-6.989 16.88-6.989 6.333 0 12.401 2.515 16.881 6.989 4.474 4.48 6.989 10.554 6.989 16.883v206.912c0 8.911 3.546 17.457 9.843 23.759 6.304 6.301 14.848 9.841 23.757 9.841h207.232c6.336 0 12.403 2.515 16.883 6.991 4.474 4.477 6.989 10.549 6.989 16.881s-2.515 12.403-6.989 16.88c-4.48 4.477-10.547 6.992-16.883 6.992l0.128 0.128z" />
+<glyph unicode="&#xe922;" glyph-name="user-circle" data-tags="bw-user-circle" d="M512 896.001c-101.264 0-200.254-30.028-284.452-86.287s-149.822-136.223-188.574-229.779c-38.752-93.556-48.892-196.502-29.136-295.82 19.756-99.32 68.519-190.546 140.124-262.156 71.604-71.603 162.834-120.365 262.152-140.122s202.267-9.613 295.822 29.139c93.555 38.752 173.517 104.371 229.779 188.57 56.256 84.198 86.285 183.19 86.285 284.454-0.154 135.744-54.144 265.885-150.131 361.87-95.981 95.986-226.125 149.977-361.869 150.13v0zM208.896 55.233c31.104 51.776 132.672 195.264 303.104 195.52h0.384c166.976 0 273.408-136.832 308.608-190.272-82.054-78.88-191.187-123.366-305.005-124.346-113.816-0.973-223.693 41.638-307.091 119.098v0zM512 295.489c-31.524-0.013-62.344 9.329-88.557 26.842s-46.64 42.41-58.695 71.539c-12.056 29.129-15.197 61.18-9.026 92.095s21.375 59.304 43.688 81.573c22.314 22.269 50.733 37.416 81.661 43.524s62.973 2.902 92.074-9.211c29.107-12.114 53.965-32.591 71.424-58.839s26.739-57.087 26.662-88.611c-0.134-42.16-16.966-82.55-46.81-112.332-29.837-29.781-70.259-46.53-112.422-46.58v0zM852.736 93.953c-56.486 86.464-140.064 151.738-237.632 185.6 38.752 22.589 68.986 57.316 86.022 98.811 17.030 41.495 19.923 87.446 8.224 130.749s-37.338 81.546-72.954 108.815c-35.616 27.269-79.219 42.046-124.077 42.046-44.856 0-88.462-14.777-124.077-42.046s-61.254-65.512-72.954-108.815c-11.7-43.303-8.808-89.254 8.228-130.749s47.267-76.221 86.019-98.811c-97.411-34.95-179.738-102.515-233.024-191.232-56.918 64.39-94.114 143.795-107.151 228.745-13.037 84.948-1.365 171.853 33.624 250.35s91.818 145.274 163.71 192.366c71.891 47.092 155.811 72.512 241.75 73.228 85.942 0.716 170.268-23.303 242.934-69.191 72.672-45.889 130.605-111.709 166.893-189.613 36.294-77.904 49.408-164.602 37.792-249.756-11.622-85.154-47.488-165.167-103.328-230.498v0z" />
+<glyph unicode="&#xe923;" glyph-name="question-circle" data-tags="bw-question-circle" d="M512.002-127.999c-101.267 0-200.257 30.029-284.455 86.285-84.198 56.262-149.822 136.224-188.574 229.779-38.752 93.558-48.892 196.504-29.136 295.822s68.519 190.548 140.124 262.152c71.604 71.604 162.834 120.368 262.152 140.123 99.32 19.756 202.264 9.616 295.819-29.136s173.523-104.377 229.779-188.574c56.262-84.198 86.291-183.188 86.291-284.452-0.154-135.744-54.144-265.888-150.131-361.869-95.987-95.987-226.125-149.978-361.869-150.131zM512.002 832.001c-88.609 0-175.225-26.275-248.899-75.502s-131.094-119.195-165.002-201.056c-33.908-81.861-42.78-171.939-25.494-258.843s59.954-166.73 122.608-229.386c62.653-62.65 142.479-105.318 229.383-122.605s176.984-8.416 258.84 25.491c81.862 33.914 151.834 91.334 201.056 165.005 49.229 73.67 75.507 160.29 75.507 248.896-0.141 118.775-47.379 232.647-131.366 316.634s-197.862 131.23-316.634 131.366v0zM506.95 169.601c-5.941 0-11.638 2.362-15.839 6.56s-6.561 9.901-6.561 15.84c0 9.152 0 17.792-0.448 25.984-4.57 29.69 0.268 60.063 13.835 86.863s35.179 48.682 61.816 62.577c24.915 16.75 48.013 36.054 68.928 57.6 20.909 28.975 33.574 63.079 36.64 98.682s-3.584 71.37-19.232 103.494c-12.947 23.256-32.147 42.422-55.424 55.329-23.283 12.906-49.709 19.036-76.288 17.695h-1.472c-19.96 2.297-40.177 0.309-59.305-5.832s-36.724-16.293-51.614-29.778c-14.891-13.485-26.732-29.992-34.733-48.419s-11.977-38.349-11.663-58.435c0.051-5.936-2.249-11.651-6.399-15.896s-9.81-6.676-15.745-6.76v0c-5.881 0.015-11.521 2.337-15.709 6.465s-6.59 9.734-6.691 15.615c0.919 49.106 19.767 96.18 52.992 132.352 19.741 18.84 43.105 33.472 68.672 43.011s52.806 13.783 80.067 12.477c35.181 1.883 70.182-6.289 100.896-23.561 30.707-17.272 55.872-42.931 72.544-73.975 19.994-40.466 28.205-85.743 23.674-130.653-4.525-44.91-21.6-87.639-49.274-123.299-22.707-23.377-47.782-44.332-74.816-62.528-20.41-9.711-37.030-25.899-47.277-46.042-10.24-20.143-13.536-43.11-9.363-65.318 0-8.768 0.512-18.048 0.448-27.84-0.026-2.95-0.634-5.862-1.786-8.576-1.152-2.707-2.829-5.165-4.934-7.232-2.106-2.061-4.595-3.686-7.334-4.787-2.733-1.101-5.658-1.645-8.604-1.613v0zM511.362 45.377c17.709 0 32.064 14.355 32.064 32.064s-14.355 32.064-32.064 32.064c-17.711 0-32.067-14.355-32.067-32.064s14.356-32.064 32.067-32.064z" />
+<glyph unicode="&#xe924;" glyph-name="cogs" data-tags="bw-cogs" d="M347.011-127.913c-4.352 0-7.36 0-8.576 0l-34.176 1.344c-21.151 0.288-41.56 7.834-57.813 21.37s-27.361 32.25-31.467 52.998c-0.488 5.069-2.198 9.939-4.986 14.195-2.787 4.262-6.567 7.776-11.014 10.253l-33.792 16.896c-3.642 1.843-7.643 2.867-11.723 3.002s-8.139-0.634-11.893-2.234c-14.389-4.922-29.721-6.458-44.8-4.48-11.32 2.093-22.095 6.464-31.668 12.858s-17.743 14.669-24.012 24.326l-37.76 75.008c-2.165 4.448-3.282 9.325-3.264 14.272-0.387 11.174 0.278 22.362 1.984 33.408 5.274 16.525 15.155 31.2 28.48 42.304 4.024 2.688 7.353 6.298 9.712 10.528 2.358 4.224 3.68 8.954 3.856 13.792v40.704c0.031 4.081-0.828 8.12-2.52 11.834s-4.173 7.014-7.272 9.67c-16.733 14.667-27.648 34.852-30.76 56.884s1.784 44.451 13.8 63.18l22.272 34.688c11.164 17.378 27.866 30.479 47.404 37.181s40.764 6.613 60.244-0.253c4.253-1.807 8.857-2.641 13.474-2.442s9.132 1.427 13.214 3.594l31.168 17.856c9.792 5.568 12.416 10.368 13.376 14.464 1.241 14.285 5.729 28.097 13.12 40.384 11.706 17.389 28.556 30.681 48.192 38.016 24.649 5.351 50.006 6.648 75.072 3.84 20.244-0.41 39.802-7.413 55.706-19.944s27.287-29.909 32.422-49.496l2.624-9.792c0.995-3.989 2.851-7.713 5.438-10.908s5.843-5.785 9.538-7.588l38.976-18.88c6.287-3.18 13.564-3.777 20.291-1.664l7.36 2.112c20.243 5.948 41.907 4.813 61.421-3.215s35.706-22.472 45.907-40.945l20.672-37.76c9.51-17.55 13.133-37.695 10.317-57.459-2.81-19.764-11.904-38.101-25.933-52.301l-7.36-7.36c-2.707-2.729-4.832-5.98-6.24-9.556s-2.074-7.404-1.952-11.244l1.344-46.144c0.128-3.808 1.011-7.552 2.605-11.014s3.866-6.573 6.675-9.146c11.155-9.402 19.117-22.035 22.784-36.16 5.606-24.602 3.373-50.336-6.4-73.6l-26.624-43.968c-10.554-17.446-26.592-30.906-45.606-38.272s-39.93-8.218-59.482-2.432l-10.883 3.2c-3.976 1.229-8.179 1.542-12.292 0.909-4.113-0.627-8.029-2.189-11.452-4.557l-26.944-18.24c-2.603-1.478-4.975-3.334-7.040-5.504-1.773-18.515-7.962-36.339-18.048-51.968-10.74-11.987-23.982-21.478-38.789-27.789-14.807-6.317-30.819-9.306-46.907-8.755v0zM151.747 56.919c14.6-0.032 28.993-3.45 42.048-9.984l33.792-16.96c12.607-6.336 23.604-15.462 32.155-26.682 8.55-11.226 14.429-24.25 17.189-38.086 0.661-7.232 3.927-13.978 9.189-18.982 5.263-4.998 12.163-7.923 19.419-8.218l37.056-1.472c7.221-0.774 14.524-0.038 21.444 2.17 6.92 2.202 13.305 5.824 18.748 10.63 1.417 4.934 2.486 9.958 3.2 15.040 1.207 11.386 5.082 22.323 11.309 31.936 6.227 9.606 14.632 17.606 24.531 23.36l26.944 18.176c11.283 7.699 24.142 12.781 37.64 14.874s27.291 1.146 40.379-2.778l10.816-3.2c5.997-1.702 12.39-1.37 18.176 0.947 5.792 2.317 10.65 6.483 13.824 11.853l24.704 40.512c2.298 9.728 2.451 19.84 0.448 29.632-10.048 8.442-18.227 18.886-24.006 30.669-5.786 11.782-9.056 24.634-9.594 37.747l-1.408 46.272c-0.333 12.591 1.901 25.118 6.554 36.823s11.635 22.343 20.518 31.273l7.296 7.36c4.275 4.329 7.053 9.918 7.917 15.944s-0.23 12.17-3.117 17.528l-20.736 37.76c-3.149 5.593-8.083 9.965-14.016 12.414s-12.512 2.833-18.688 1.090l-7.296-2.24c-22.163-6.614-45.998-4.625-66.755 5.568l-38.912 18.432c-12.052 5.863-22.682 14.283-31.148 24.673s-14.566 22.5-17.876 35.487l-2.56 9.664c-1.524 6.080-5.034 11.478-9.972 15.338s-11.024 5.962-17.292 5.974h-0.384c-17.323 1.716-34.773 1.716-52.096 0-5.18-2.347-9.887-5.622-13.888-9.664-2.116-3.522-3.631-7.372-4.48-11.392-1.447-14.137-6.364-27.697-14.313-39.476s-18.686-21.412-31.255-28.044l-31.232-17.984c-11.478-6.483-24.2-10.462-37.326-11.676s-26.362 0.366-38.834 4.636c-6.27 2.836-13.34 3.372-19.965 1.51s-12.383-5.999-16.259-11.686l-22.336-34.56c-3.657-5.724-5.132-12.572-4.157-19.293s4.336-12.867 9.469-17.315c10.099-8.73 18.188-19.542 23.712-31.695s8.351-25.357 8.288-38.705v-40.64c-0.121-14.304-3.539-28.384-9.988-41.146-6.449-12.768-15.756-23.872-27.196-32.454-2.718-2.758-5.181-5.76-7.36-8.96 0-1.28 0-4.992 0-8.576l33.152-66.048c3.295-2.669 7.143-4.57 11.264-5.568 3.981 0.192 7.93 0.813 11.776 1.856 9.958 4.224 20.671 6.381 31.488 6.336v0zM333.255 59.601c-33.192-0.006-65.642 9.824-93.247 28.256-27.604 18.426-49.123 44.634-61.834 75.296s-16.043 64.403-9.575 96.957c6.468 32.556 22.445 62.463 45.91 85.937s53.366 39.463 85.919 45.943c32.554 6.481 66.298 3.161 96.964-9.538s56.879-34.207 75.32-61.805c18.442-27.597 28.285-60.044 28.285-93.239-0.017-44.486-17.693-87.149-49.146-118.611-31.452-31.469-74.109-49.158-118.598-49.197zM333.255 350.292c-24.306 0.013-48.070-7.183-68.286-20.678s-35.976-32.682-45.286-55.134c-9.311-22.451-11.753-47.161-7.019-71.001s16.432-45.741 33.615-62.931c17.183-17.197 39.078-28.902 62.916-33.651 23.838-4.742 48.548-2.317 71.005 6.982s41.652 25.050 55.157 45.261c13.505 20.205 20.714 43.968 20.714 68.269-0.034 32.572-12.982 63.797-36.006 86.833s-54.242 36-86.81 36.051zM807.232 414.424c-2.944 0-4.992 0-5.824 0l-23.040 0.896c-14.515 0.199-28.518 5.402-39.642 14.73s-18.688 22.211-21.414 36.47c-0.288 3.287-1.376 6.453-3.174 9.22s-4.243 5.052-7.13 6.652l-22.848 11.392c-2.368 1.172-4.954 1.824-7.59 1.912-2.643 0.088-5.267-0.389-7.706-1.4-9.843-3.494-20.39-4.526-30.72-3.008-7.763 1.43-15.149 4.441-21.702 8.845-6.547 4.404-12.122 10.107-16.378 16.755l-25.6 50.624c-1.581 3.068-2.394 6.471-2.368 9.92-0.262 7.578 0.186 15.163 1.344 22.656 3.469 11.296 10.138 21.345 19.2 28.928 2.643 1.731 4.838 4.068 6.394 6.818 1.562 2.75 2.438 5.832 2.566 8.99v27.456c0.006 2.66-0.563 5.29-1.664 7.709-1.107 2.419-2.72 4.571-4.736 6.307-11.334 10.044-18.701 23.811-20.762 38.812-2.067 15.002 1.299 30.247 9.498 42.98l15.040 23.36c7.68 11.889 19.117 20.868 32.486 25.507 13.376 4.639 27.91 4.672 41.306 0.093 2.739-1.191 5.715-1.758 8.704-1.658s5.92 0.863 8.576 2.234l21.056 12.096c6.4 3.584 8.128 6.4 8.704 9.216 0.858 9.804 3.942 19.283 9.024 27.712 7.962 11.814 19.488 20.781 32.896 25.6 16.794 3.791 34.106 4.7 51.2 2.688h0.896c13.69-0.324 26.893-5.125 37.6-13.666 10.701-8.541 18.31-20.354 21.664-33.63l1.728-6.784c0.672-2.548 1.888-4.923 3.552-6.965s3.75-3.704 6.112-4.875l26.368-12.8c4.077-2.008 8.768-2.396 13.12-1.088 14.368 5.137 30.080 5.075 44.403-0.175s26.355-15.357 33.997-28.561l13.952-25.6c6.522-11.996 9.005-25.772 7.091-39.292s-8.122-26.064-17.715-35.78l-5.12-4.992c-1.747-1.763-3.11-3.865-4.013-6.177s-1.325-4.783-1.235-7.263l0.96-31.104c0.070-2.493 0.646-4.947 1.69-7.213 1.050-2.266 2.541-4.296 4.39-5.971 7.629-6.453 13.082-15.102 15.616-24.768 3.827-16.796 2.285-34.37-4.416-50.24l-17.984-29.824c-7.226-11.952-18.221-21.165-31.251-26.193-13.037-5.027-27.366-5.584-40.749-1.583l-7.296 2.496c-2.592 0.828-5.338 1.046-8.026 0.635-2.682-0.411-5.242-1.439-7.462-3.003l-18.176-12.288c-1.638-1.005-3.162-2.185-4.544-3.52-1.203-12.521-5.395-24.571-12.224-35.136-7.334-8.229-16.384-14.748-26.515-19.094s-21.094-6.414-32.109-6.058v0zM675.392 540.824c9.997 0.003 19.853-2.319 28.8-6.784l22.784-11.392c8.646-4.3 16.192-10.529 22.054-18.209 5.856-7.679 9.875-16.602 11.738-26.079 0.326-4.736 2.4-9.183 5.818-12.48s7.936-5.213 12.678-5.376l25.024-0.96c4.755-0.55 9.581-0.1 14.15 1.322 4.576 1.421 8.8 3.784 12.41 6.934 0.851 3.201 1.51 6.45 1.984 9.728 0.845 7.791 3.501 15.276 7.757 21.855s9.997 12.070 16.755 16.033l18.24 12.352c7.725 5.247 16.525 8.715 25.754 10.154s18.662 0.813 27.622-1.834l7.232-2.176c3.866-1.164 8.006-1.010 11.77 0.438s6.944 4.109 9.030 7.562l16.768 27.392c1.318 6.332 1.318 12.868 0 19.2-6.81 5.738-12.352 12.834-16.262 20.835s-6.112 16.73-6.458 25.629l-0.896 31.104c-0.256 8.627 1.248 17.215 4.429 25.238s7.968 15.311 14.067 21.418l4.992 4.992c2.79 2.772 4.595 6.381 5.139 10.277s-0.205 7.862-2.131 11.291l-13.952 25.6c-1.984 3.702-5.203 6.594-9.094 8.172s-8.218 1.743-12.218 0.468c-16.493-5.812-34.598-4.986-50.496 2.304l-26.368 12.8c-8.211 4.006-15.462 9.74-21.248 16.81-5.792 7.070-9.984 15.308-12.288 24.15l-1.536 7.104c-0.998 3.924-3.277 7.403-6.477 9.884s-7.136 3.823-11.187 3.812v0c-11.642 1.161-23.366 1.161-35.008 0-3.315-1.637-6.336-3.798-8.96-6.4-1.325-2.31-2.278-4.816-2.816-7.424-1.075-9.598-4.48-18.787-9.926-26.764s-12.762-14.499-21.306-18.996l-20.992-12.096c-7.834-4.472-16.538-7.225-25.517-8.074-8.986-0.85-18.042 0.223-26.579 3.146-4.051 1.924-8.659 2.337-12.992 1.163-4.326-1.173-8.096-3.855-10.624-7.563l-15.104-23.232c-2.355-3.701-3.309-8.124-2.688-12.468s2.778-8.321 6.080-11.212c6.925-5.978 12.467-13.39 16.25-21.722 3.776-8.332 5.702-17.386 5.638-26.534v-27.52c-0.128-9.795-2.502-19.429-6.944-28.162-4.435-8.732-10.816-16.329-18.656-22.206-1.709-1.752-3.251-3.659-4.608-5.696 0-0.832 0-3.072 0-5.312l22.464-44.8c2.061-1.499 4.416-2.546 6.912-3.072 2.566-0.249 5.158 0.124 7.552 1.088 6.784 2.861 14.080 4.319 21.44 4.288zM798.016 548.374c-21.146-0.013-41.811 6.245-59.398 17.981s-31.296 28.424-39.392 47.953c-8.102 19.528-10.227 41.021-6.112 61.757 4.122 20.737 14.291 39.787 29.242 54.741 14.944 14.954 33.984 25.139 54.72 29.268s42.227 2.017 61.76-6.071c19.533-8.088 36.23-21.787 47.981-39.364 11.744-17.578 18.016-38.244 18.016-59.386-0.019-28.33-11.277-55.496-31.302-75.534s-47.187-31.312-75.514-31.346v0zM798.016 717.206c-12.256 0-24.23-3.633-34.419-10.441s-18.131-16.483-22.816-27.803c-4.691-11.32-5.92-23.777-3.526-35.795 2.387-12.017 8.288-23.056 16.954-31.72s19.706-14.564 31.718-16.955c12.019-2.39 24.474-1.164 35.795 3.526s20.998 12.629 27.802 22.817c6.81 10.188 10.445 22.166 10.445 34.419-0.102 16.37-6.675 32.036-18.278 43.581s-27.302 18.034-43.674 18.051v0.32z" />
+<glyph unicode="&#xe925;" glyph-name="minus-circle" data-tags="bw-minus-circle" d="M512-127.999c-101.264 0-200.254 30.029-284.452 86.285-84.198 56.262-149.822 136.224-188.574 229.779-38.752 93.558-48.892 196.504-29.136 295.822s68.519 190.548 140.124 262.152c71.604 71.604 162.834 120.368 262.152 140.123s202.267 9.616 295.822-29.136c93.555-38.752 173.517-104.377 229.779-188.574 56.256-84.198 86.285-183.188 86.285-284.452-0.154-135.744-54.144-265.888-150.131-361.869-95.981-95.987-226.125-149.978-361.869-150.131zM512 832.001c-88.606 0-175.222-26.275-248.895-75.502s-131.094-119.195-165.002-201.056c-33.908-81.861-42.78-171.939-25.494-258.843s59.954-166.73 122.608-229.386c62.653-62.65 142.479-105.318 229.383-122.605s176.981-8.416 258.844 25.491c81.862 33.914 151.827 91.334 201.056 165.005s75.501 160.29 75.501 248.896c-0.154 118.77-47.398 232.632-131.386 316.615-83.981 83.983-197.843 131.233-316.614 131.385v0zM774.4 361.6h-524.797c-5.941 0-11.638 2.36-15.839 6.561s-6.561 9.899-6.561 15.839c0 5.941 2.36 11.638 6.561 15.839s9.898 6.561 15.839 6.561h524.797c5.946 0 11.642-2.36 15.84-6.561 4.205-4.201 6.56-9.898 6.56-15.839s-2.355-11.638-6.56-15.839c-4.198-4.2-9.894-6.561-15.84-6.561v0z" />
+<glyph unicode="&#xe926;" glyph-name="send" data-tags="bw-send" d="M1009.705 889.604c-5.325 3.834-11.635 6.048-18.189 6.377s-13.056-1.241-18.739-4.521l-955.647-546.688c-5.464-3.115-9.955-7.688-12.971-13.208s-4.436-11.77-4.104-18.051c0.332-6.281 2.404-12.346 5.985-17.517s8.528-9.246 14.291-11.767l240.768-106.112c4.11-2.029 8.588-3.213 13.165-3.469 4.577-0.262 9.16 0.41 13.472 1.965s8.266 3.968 11.625 7.085c3.358 3.123 6.052 6.886 7.919 11.078 1.867 4.186 2.87 8.704 2.947 13.293 0.077 4.582-0.772 9.133-2.497 13.382-1.725 4.243-4.289 8.102-7.54 11.334s-7.121 5.773-11.379 7.475l-150.080 66.112c-2.73 1.192-5.075 3.119-6.772 5.567s-2.681 5.32-2.84 8.294c-0.159 2.975 0.511 5.935 1.938 8.55s3.551 4.783 6.138 6.26l773.631 442.624c2.682 1.564 5.76 2.319 8.864 2.175s6.099-1.18 8.627-2.984c2.528-1.805 4.48-4.301 5.626-7.189 1.139-2.888 1.427-6.044 0.819-9.090l-142.336-714.752c-0.48-2.323-1.459-4.512-2.874-6.413-1.414-1.907-3.226-3.475-5.312-4.602-2.086-1.133-4.39-1.792-6.758-1.933s-4.736 0.237-6.944 1.107l-203.648 80.192c-10.342 4.064-21.741 4.614-32.429 1.562s-20.072-9.542-26.707-18.458l-49.024-66.368c0 0-13.76-13.76-16.64 4.032l-0.64 83.2c-0.058 3.981 1.329 7.846 3.904 10.88l369.023 429.44c2.912 3.386 5.126 7.315 6.509 11.561s1.914 8.724 1.555 13.176c-0.358 4.452-1.594 8.788-3.635 12.759s-4.851 7.498-8.269 10.376c-6.906 5.859-15.846 8.749-24.87 8.042-9.030-0.707-17.414-4.956-23.322-11.818l-377.279-439.296c-7.817-9.171-12.086-20.845-12.032-32.896l1.6-224.576c0.075-7.168 2.402-14.131 6.652-19.904s10.207-10.061 17.029-12.262c6.822-2.202 14.163-2.202 20.986 0s12.78 6.49 17.029 12.262l110.847 149.952c2.15 2.906 5.197 5.011 8.672 5.997s7.174 0.787 10.528-0.557l235.392-92.928c4.659-1.83 9.658-2.624 14.656-2.33 4.998 0.301 9.869 1.683 14.272 4.058 4.397 2.368 8.211 5.677 11.181 9.696 2.963 4.013 5.005 8.64 5.971 13.536l175.488 882.112c1.28 6.405 0.678 13.044-1.747 19.111-2.419 6.067-6.547 11.301-11.885 15.065v0z" />
+<glyph unicode="&#xe927;" glyph-name="send-f" data-tags="bw-send-f" d="M709.737 580.418c0 0 18.56 15.104 30.72 1.024 10.688-12.288-2.944-28.224-2.944-28.224l-352.451-389.952c-7.873-9.139-12.15-20.832-12.032-32.896l1.536-224.64c0.091-7.142 2.426-14.080 6.676-19.821s10.198-10.003 17.004-12.179c3.384-1.133 6.927-1.722 10.496-1.728 5.364-0.006 10.655 1.248 15.447 3.654 4.791 2.413 8.948 5.92 12.137 10.234l99.331 134.4c5.44 7.328 13.152 12.659 21.939 15.162 8.781 2.496 18.144 2.029 26.637-1.338l217.28-85.76c4.666-1.843 9.677-2.65 14.682-2.349 5.011 0.301 9.894 1.69 14.31 4.077 4.39 2.368 8.211 5.677 11.174 9.696 2.963 4.013 5.005 8.64 5.978 13.536l175.68 882.112c1.267 6.405 0.659 13.041-1.76 19.106s-6.541 11.3-11.872 15.070c-5.331 3.819-11.648 6.024-18.195 6.353s-13.050-1.232-18.733-4.497l-955.715-546.752c-5.444-3.131-9.915-7.708-12.915-13.226s-4.413-11.758-4.082-18.029c0.332-6.271 2.394-12.328 5.96-17.499s8.493-9.251 14.237-11.79l212.16-96.512c11.254-7.674 24.781-11.29 38.362-10.266 13.581 1.018 26.412 6.624 36.39 15.898z" />
+<glyph unicode="&#xe928;" glyph-name="download" data-tags="bw-download" d="M546.17 187.072l128.384 119.231c3.155 2.931 5.69 6.455 7.475 10.371s2.778 8.145 2.918 12.446c0.141 4.3-0.563 8.586-2.086 12.612-1.517 4.025-3.821 7.711-6.771 10.844-5.99 6.333-14.234 10.047-22.944 10.335-8.717 0.287-17.19-2.874-23.584-8.799l-71.744-66.688c0 0-9.6-8.576-13.184 2.176l1.6 462.144c-0.371 8.482-4.006 16.492-10.138 22.362-6.138 5.869-14.298 9.146-22.79 9.146-8.488 0-16.651-3.276-22.785-9.146s-9.767-13.88-10.141-22.362l-1.408-465.664c-0.163-0.979-0.566-1.903-1.172-2.689s-1.398-1.409-2.305-1.815c-0.906-0.405-1.898-0.58-2.888-0.509s-1.948 0.386-2.787 0.917l-73.856 78.272c-5.989 6.333-14.236 10.047-22.948 10.335s-17.185-2.874-23.58-8.799c-3.149-2.925-5.687-6.444-7.469-10.355s-2.774-8.134-2.917-12.43c-0.143-4.295 0.566-8.576 2.085-12.596s3.818-7.7 6.765-10.828l118.528-126.015c10.283-10.835 24.427-17.178 39.359-17.645s29.446 4.973 40.383 15.149zM923.904-15.232h-823.808c-25.996-0.518-51.134 9.299-69.9 27.296s-29.626 42.707-30.196 68.704v292.413c0 8.487 3.372 16.627 9.373 22.627s14.14 9.373 22.627 9.373c8.487 0 16.627-3.372 22.627-9.373s9.373-14.14 9.373-22.627v-292.413c0.577-9.018 4.695-17.446 11.456-23.437 6.762-5.997 15.619-9.075 24.64-8.563h823.808c9.024-0.512 17.875 2.566 24.64 8.563 6.758 5.99 10.88 14.419 11.456 23.437v288.573c0 8.487 3.373 16.627 9.37 22.628 6.003 6.001 14.144 9.372 22.63 9.372s16.627-3.372 22.63-9.372c5.997-6.001 9.37-14.141 9.37-22.628v-288.573c-0.57-25.997-11.43-50.707-30.195-68.704s-43.904-27.814-69.901-27.296v0z" />
+<glyph unicode="&#xe929;" glyph-name="pencil" data-tags="bw-pencil" d="M989.595 861.512c-12.685 12.794-28.166 22.479-45.216 28.296-17.056 5.818-35.226 7.611-53.088 5.239-40.851-6.365-78.355-26.347-106.432-56.704l-647.614-647.744c-23.809-23.744-43.955-50.906-59.776-80.576l-67.392-129.28c-8.157-13.914-11.586-30.093-9.774-46.118s8.765-31.034 19.822-42.778c6.527-6.432 14.267-11.507 22.771-14.925s17.601-5.107 26.765-4.979c13.716 0.134 27.197 3.584 39.296 10.048l129.024 67.264c29.851 15.776 57.146 35.968 80.959 59.904l647.487 647.616c30.374 28.043 50.381 65.526 56.768 106.368 2.317 17.875 0.493 36.043-5.338 53.099-5.824 17.057-15.494 32.545-28.262 45.269v0zM839.515 620.744l-566.206-565.952c-19.149-19.264-41.091-35.533-65.088-48.256l-129.152-67.328c-6.4-3.52-11.52-3.2-13.312-1.472s-1.984 6.4 1.536 13.376l67.456 129.024c12.71 23.898 28.933 45.747 48.128 64.832l565.95 565.376c1.197 1.249 2.63 2.243 4.224 2.922 1.587 0.679 3.296 1.029 5.024 1.029s3.443-0.35 5.030-1.029c1.587-0.679 3.027-1.673 4.218-2.922l72.064-70.4c1.318-1.224 2.374-2.705 3.098-4.351s1.101-3.423 1.114-5.222c0.013-1.798-0.339-3.58-1.043-5.236s-1.734-3.15-3.040-4.392v0zM920.795 702.088l-32.704-32.768c-2.067-1.763-4.704-2.731-7.424-2.731s-5.35 0.968-7.424 2.731l-76.8 75.136c-1.606 1.702-2.573 3.913-2.72 6.25-0.154 2.337 0.512 4.653 1.888 6.55l34.752 34.752c17.811 20.063 41.83 33.582 68.224 38.4 2.445 0.305 4.902 0.454 7.36 0.448 7.034 0.092 14.010-1.232 20.518-3.893s12.416-6.604 17.37-11.595c27.52-26.944 18.432-71.488-23.040-112.96v-0.32z" />
+<glyph unicode="&#xe92a;" glyph-name="sign-out" data-tags="bw-sign-out" d="M929.28 417.6l-119.616 128c-5.946 6.348-14.163 10.076-22.854 10.364-8.685 0.288-17.133-2.888-23.482-8.828s-10.080-14.16-10.368-22.85c-0.288-8.69 2.886-17.138 8.832-23.486l66.816-71.488c0 0 8.576-9.536-2.176-13.12l-463.427 1.664c-4.308 0.017-8.578-0.816-12.564-2.451s-7.611-4.041-10.666-7.078c-3.055-3.037-5.482-6.648-7.14-10.625s-2.516-8.241-2.525-12.55c-0.017-8.696 3.417-17.044 9.548-23.212s14.46-9.65 23.156-9.684l467.203-1.6c0.973-0.153 1.901-0.547 2.688-1.147s1.408-1.386 1.818-2.289c0.41-0.902 0.582-1.891 0.512-2.878-0.077-0.988-0.39-1.941-0.922-2.774v0l-78.464-73.536c-3.149-2.941-5.69-6.474-7.469-10.397-1.786-3.92-2.778-8.157-2.918-12.464-0.147-4.307 0.557-8.595 2.067-12.627 1.517-4.038 3.808-7.731 6.752-10.88 2.938-3.149 6.47-5.683 10.394-7.469 3.923-1.779 8.16-2.771 12.461-2.918 4.307-0.147 8.602 0.557 12.634 2.074 4.032 1.51 7.731 3.802 10.88 6.746l126.208 118.080c10.861 10.193 17.242 24.28 17.734 39.169s-4.947 29.366-15.11 40.255v0zM928-128h-832c-25.46 0-49.879 10.112-67.882 28.115s-28.118 42.426-28.118 67.885v832c0 25.46 10.115 49.879 28.118 67.882s42.422 28.118 67.882 28.118h827.136c25.459 0 49.882-10.114 67.885-28.118s28.115-42.422 28.115-67.882v-137.92c0-8.487-3.373-16.627-9.37-22.627-6.003-6.001-14.144-9.373-22.63-9.373s-16.627 3.372-22.63 9.373c-5.997 6.001-9.37 14.14-9.37 22.627v137.92c0 8.487-3.373 16.627-9.37 22.627-6.003 6.001-14.144 9.373-22.63 9.373h-827.136c-8.487 0-16.627-3.372-22.627-9.373s-9.373-14.14-9.373-22.627v-832c0-8.486 3.372-16.627 9.373-22.63 6.001-5.997 14.14-9.37 22.627-9.37h832c8.486 0 16.627 3.373 22.63 9.37 5.997 6.003 9.37 14.144 9.37 22.63v135.36c0 8.486 3.373 16.627 9.37 22.63 6.003 5.997 14.144 9.37 22.63 9.37s16.627-3.373 22.63-9.37c5.997-6.003 9.37-14.144 9.37-22.63v-135.36c0-25.459-10.112-49.882-28.115-67.885s-42.426-28.115-67.885-28.115z" />
+<glyph unicode="&#xe92b;" glyph-name="share" data-tags="bw-share" d="M885.207 149.567c-23.891-0.077-47.36-6.33-68.122-18.163-20.755-11.834-38.099-28.838-50.342-49.357l-504.126 239.68c9.807 18.616 15.087 39.283 15.409 60.322s-4.321 41.858-13.553 60.766l504.254 240.064c18.035-27.951 45.542-48.461 77.478-57.769s66.157-6.788 96.384 7.096c30.227 13.884 54.432 38.202 68.179 68.492s16.115 64.522 6.662 96.413c-9.453 31.892-30.093 59.307-58.125 77.214s-61.581 25.107-94.49 20.277c-32.909-4.83-62.976-21.364-84.685-46.571-21.702-25.206-33.594-57.394-33.485-90.657 0.096-10.926 1.517-21.8 4.224-32.384l-512.766-244.032c-19.144 19.636-43.676 33.163-70.5 38.871s-54.738 3.344-80.219-6.796c-25.482-10.14-47.389-27.599-62.957-50.177s-24.1-49.26-24.52-76.682c-0.419-27.421 7.293-54.353 22.164-77.395s36.234-41.164 61.394-52.077c25.16-10.913 52.988-14.132 79.974-9.242 26.986 4.883 51.92 17.655 71.655 36.698l514.43-244.48c-5.978-28.070-3.11-57.306 8.211-83.68 11.315-26.374 30.534-48.589 55.002-63.59 24.474-15.002 52.986-22.054 81.626-20.179s55.994 12.582 78.298 30.65c22.304 18.061 38.464 42.592 46.246 70.221 7.782 27.622 6.816 56.986-2.778 84.032-9.587 27.053-27.328 50.47-50.771 67.021-23.45 16.557-51.45 25.434-80.154 25.414v0zM885.207 850.495c18.432 0 36.454-5.467 51.776-15.709 15.328-10.242 27.27-24.799 34.323-41.83s8.89-35.77 5.293-53.848c-3.603-18.078-12.48-34.682-25.523-47.711-13.037-13.029-29.645-21.899-47.725-25.487s-36.819-1.734-53.843 5.329c-17.030 7.063-31.578 19.016-41.811 34.349-10.227 15.332-15.686 33.355-15.674 51.788 0.038 24.719 9.882 48.414 27.379 65.876s41.216 27.261 65.933 27.244h-0.128zM139.097 290.815c-18.427 0-36.441 5.463-51.763 15.7s-27.267 24.786-34.321 41.809c-7.055 17.023-8.904 35.756-5.313 53.83s12.459 34.678 25.484 47.713c13.026 13.035 29.624 21.914 47.695 25.517s36.806 1.766 53.834-5.277c17.028-7.043 31.586-18.977 41.833-34.292s15.723-33.325 15.735-51.752c0-24.72-9.815-48.428-27.289-65.914s-41.175-27.317-65.895-27.334zM885.207-82.369c-18.432 0-36.448 5.466-51.776 15.706-15.322 10.246-27.27 24.8-34.317 41.83-7.053 17.030-8.896 35.776-5.293 53.85 3.597 18.080 12.48 34.682 25.517 47.712 13.043 13.030 29.651 21.901 47.731 25.485 18.080 3.59 36.819 1.734 53.843-5.325 17.024-7.066 31.578-19.021 41.805-34.349 10.234-15.334 15.686-33.357 15.674-51.789-0.051-24.691-9.882-48.358-27.354-65.811-17.466-17.453-41.133-27.277-65.83-27.309v0z" />
+<glyph unicode="&#xe92c;" glyph-name="clock" data-tags="bw-clock" d="M512-127.999c-101.264 0-200.254 30.029-284.452 86.285-84.198 56.262-149.822 136.224-188.574 229.779-38.752 93.558-48.892 196.504-29.136 295.822s68.519 190.548 140.124 262.152c71.604 71.604 162.834 120.368 262.152 140.123s202.267 9.616 295.822-29.136c93.555-38.752 173.517-104.377 229.779-188.574 56.256-84.198 86.285-183.188 86.285-284.452-0.154-135.744-54.144-265.888-150.131-361.869-95.981-95.987-226.125-149.978-361.869-150.131zM512 832.001c-88.606 0-175.222-26.275-248.895-75.502s-131.094-119.195-165.002-201.056c-33.908-81.861-42.78-171.939-25.494-258.843s59.954-166.73 122.608-229.386c62.653-62.65 142.479-105.318 229.383-122.605s176.981-8.416 258.844 25.491c81.862 33.914 151.827 91.334 201.056 165.005s75.501 160.29 75.501 248.896c-0.134 118.775-47.379 232.647-131.366 316.634s-197.856 131.23-316.634 131.366v0zM387.197 225.793c-6.404 0-12.661 1.92-17.962 5.51s-9.403 8.691-11.774 14.643c-2.371 5.946-2.903 12.468-1.526 18.723s4.597 11.951 9.246 16.355l116.416 110.4v323.264c0 8.487 3.372 16.627 9.372 22.628s14.141 9.372 22.63 9.372c8.486 0 16.621-3.372 22.624-9.372s9.376-14.141 9.376-22.628v-337.088c-0.013-4.337-0.896-8.627-2.618-12.609-1.715-3.983-4.224-7.575-7.366-10.559l-126.403-119.807c-5.937-5.658-13.817-8.819-22.016-8.832v0z" />
+<glyph unicode="&#xe92d;" glyph-name="angle-down" data-tags="bw-angle-down" d="M512.167 160.521c-27.323 0.019-53.749 9.747-74.56 27.456l-425.664 359.934c-3.211 2.715-5.855 6.035-7.782 9.772s-3.1 7.816-3.45 12.006c-0.351 4.19 0.127 8.408 1.407 12.413s3.335 7.719 6.050 10.929c2.715 3.211 6.035 5.855 9.772 7.782s7.816 3.1 12.006 3.45c4.189 0.351 8.408-0.127 12.413-1.407s7.718-3.335 10.929-6.050l425.728-359.934c9.229-8.083 21.078-12.531 33.344-12.531 12.268 0 24.115 4.448 33.343 12.531l426.176 363.966c6.509 5.008 14.688 7.324 22.854 6.468s15.686-4.816 21.018-11.064c5.325-6.248 8.045-14.303 7.603-22.502-0.448-8.198-4.032-15.91-10.003-21.543l-426.176-363.838c-20.87-17.946-47.482-27.821-75.007-27.84v0z" />
+<glyph unicode="&#xe92e;" glyph-name="caret-down" data-tags="bw-caret-down" d="M511.679 128c-30.309 0.090-59.563 11.142-82.368 31.104l-404.416 350.528c-11.246 9.779-19.213 22.779-22.819 37.239s-2.678 29.679 2.659 43.593c4.637 13.217 13.23 24.685 24.611 32.849s25 12.627 39.005 12.783l886.723 3.904c14.010-0.021 27.68-4.365 39.13-12.44 11.456-8.075 20.141-19.487 24.87-32.68 5.446-13.892 6.483-29.128 2.95-43.629-3.526-14.5-11.443-27.56-22.662-37.395l-404.864-354.304c-22.842-20.256-52.294-31.475-82.819-31.552v0zM66.751 558.016l404.416-350.528c11.156-10.010 25.619-15.552 40.608-15.552 14.991 0 29.449 5.542 40.611 15.552l404.864 354.304c1.312 1.329 2.195 3.021 2.541 4.858 0.339 1.837 0.122 3.734-0.621 5.446h-890.499c-4.288-4.928-6.016-10.432-1.92-14.080v0z" />
+<glyph unicode="&#xe92f;" glyph-name="square" data-tags="bw-square" horiz-adv-x="1280" d="M1056-127.616h-832c-25.46 0-49.879 10.112-67.882 28.115s-28.118 42.426-28.118 67.885v832c0 25.46 10.115 49.879 28.118 67.882s42.422 28.118 67.882 28.118h832c25.459 0 49.882-10.114 67.885-28.118s28.115-42.422 28.115-67.882v-832c0-25.459-10.112-49.882-28.115-67.885s-42.426-28.115-67.885-28.115zM224 832.384c-8.487 0-16.627-3.371-22.627-9.373s-9.373-14.141-9.373-22.627v-832c0-8.486 3.372-16.627 9.373-22.63 6.001-5.997 14.14-9.37 22.627-9.37h832c8.486 0 16.627 3.373 22.63 9.37 5.997 6.003 9.37 14.144 9.37 22.63v832c0 8.486-3.373 16.626-9.37 22.627-6.003 6.001-14.144 9.373-22.63 9.373h-832z" />
+<glyph unicode="&#xe930;" glyph-name="collection" data-tags="bw-collection" d="M928-64h-831.999c-25.586 0.166-50.061 10.477-68.057 28.666s-28.045 42.771-27.943 68.358v491.072c-0.017 25.531 10.069 50.031 28.056 68.15s42.413 28.385 67.944 28.554h831.999c25.53-0.169 49.958-10.435 67.942-28.554 17.99-18.119 28.077-42.62 28.058-68.15v-491.072c0.102-25.587-9.946-50.17-27.942-68.358s-42.47-28.499-68.058-28.666v0zM96.001 556.416c-8.487 0-16.626-3.372-22.627-9.373s-9.373-14.14-9.373-22.627v-491.072c-0.042-4.23 0.755-8.422 2.344-12.346 1.589-3.917 3.939-7.482 6.915-10.49s6.518-5.389 10.421-7.021c3.903-1.626 8.091-2.464 12.32-2.464h831.999c4.23 0 8.416 0.838 12.32 2.464 3.904 1.632 7.45 4.013 10.419 7.021 2.976 3.008 5.331 6.573 6.918 10.49 1.587 3.923 2.387 8.115 2.342 12.346v490.752c0 8.487-3.373 16.626-9.37 22.627-6.003 6.001-14.144 9.373-22.63 9.373l-831.999 0.32zM906.88 682.752h-798.787c-5.792 0.308-11.245 2.826-15.236 7.035s-6.216 9.789-6.216 15.589c0 5.8 2.225 11.38 6.216 15.589s9.444 6.726 15.236 7.035h798.787c5.792-0.308 11.245-2.826 15.232-7.035 3.994-4.209 6.214-9.789 6.214-15.589s-2.221-11.38-6.214-15.589c-3.987-4.209-9.44-6.726-15.232-7.035v0zM858.24 786.752h-701.507c-5.792 0.308-11.245 2.826-15.236 7.035s-6.216 9.789-6.216 15.589c0 5.8 2.225 11.38 6.216 15.589s9.444 6.726 15.236 7.035h701.507c5.792-0.308 11.245-2.826 15.232-7.035 3.994-4.209 6.221-9.789 6.221-15.589s-2.227-11.38-6.221-15.589c-3.987-4.209-9.44-6.726-15.232-7.035v0z" />
+<glyph unicode="&#xe931;" glyph-name="bank" data-tags="bw-bank" d="M992.745 66.585h-77.696c-8.659 0.186-16.896 3.795-22.899 10.048-5.997 6.253-9.274 14.63-9.101 23.296v374.974c-0.173 8.664 3.104 17.041 9.101 23.292 6.003 6.252 14.24 9.868 22.899 10.052h75.328c7.558 0.054 14.861 2.783 20.602 7.703 5.734 4.92 9.549 11.714 10.758 19.177 1.53 7.468 0.461 15.233-3.034 22.009s-9.197 12.152-16.166 15.239l-433.92 183.616c-18.477 7.949-38.381 12.048-58.495 12.048s-40.019-4.099-58.496-12.048l-430.016-182.464c-6.918-3.151-12.573-8.54-16.056-15.296s-4.591-14.489-3.144-21.952c1.292-7.442 5.135-14.202 10.87-19.119s13.002-7.684 20.554-7.825h77.44c8.652-0.185 16.877-3.791 22.875-10.029s9.279-14.598 9.125-23.251v-375.998c0.172-8.666-3.102-17.043-9.102-23.296s-14.236-9.862-22.898-10.048h-78.528c-8.852 0-17.341-3.52-23.601-9.779s-9.775-14.746-9.775-23.597c0-8.851 3.516-17.344 9.775-23.603s14.749-9.773 23.601-9.773h959.999c8.582 0.378 16.691 4.051 22.63 10.253 5.939 6.208 9.254 14.464 9.254 23.059 0 8.589-3.315 16.845-9.254 23.053s-14.048 9.882-22.63 10.259v0zM786.985 66.585h-97.28c-8.659 0.186-16.896 3.795-22.899 10.048-5.997 6.253-9.274 14.63-9.101 23.296v375.294c-0.083 4.287 0.678 8.548 2.24 12.541s3.898 7.638 6.867 10.729c2.97 3.090 6.522 5.565 10.451 7.283s8.154 2.644 12.442 2.728h97.216c4.288-0.083 8.518-1.010 12.442-2.728 3.93-1.718 7.482-4.193 10.451-7.283 2.976-3.091 5.306-6.737 6.867-10.729 1.568-3.993 2.323-8.254 2.24-12.541v-375.166c0.102-4.294-0.64-8.57-2.195-12.576-1.549-4.006-3.872-7.667-6.835-10.778-2.97-3.11-6.515-5.6-10.445-7.341-3.93-1.734-8.166-2.682-12.461-2.778v0zM593.641 475.351v-375.422c0.173-8.666-3.104-17.043-9.101-23.296s-14.234-9.862-22.899-10.048h-97.151c-8.663 0.186-16.899 3.795-22.899 10.048s-9.273 14.63-9.101 23.296v375.55c-0.155 8.659 3.124 17.026 9.121 23.274s14.221 9.868 22.879 10.070h97.215c4.294-0.099 8.531-1.044 12.461-2.781s7.475-4.23 10.445-7.338c2.963-3.108 5.286-6.771 6.835-10.778 1.555-4.007 2.298-8.28 2.195-12.575v0zM475.754 694.167c10.856 4.625 22.535 7.009 34.336 7.009s23.48-2.384 34.335-7.009l281.6-119.168-629.439 0.96 279.168 118.208zM238.954 509.079h97.216c8.662-0.184 16.898-3.8 22.898-10.052s9.274-14.628 9.102-23.292v-375.678c0.172-8.666-3.102-17.043-9.102-23.296s-14.236-9.862-22.898-10.048h-97.024c-8.663 0.186-16.899 3.795-22.899 10.048s-9.273 14.63-9.101 23.296v375.678c-0.085 4.295 0.677 8.564 2.243 12.565s3.904 7.653 6.881 10.749c2.978 3.096 6.536 5.576 10.472 7.297s8.173 2.65 12.468 2.733h-0.256z" />
+<glyph unicode="&#xe932;" glyph-name="shield" data-tags="bw-shield" d="M925.982 883.203c-3.859 4.059-8.506 7.289-13.651 9.49-5.152 2.201-10.701 3.327-16.301 3.31h-767.997c-5.603 0.032-11.153-1.087-16.306-3.289s-9.797-5.439-13.646-9.511c-4.063-3.856-7.294-8.503-9.495-13.653s-3.326-10.697-3.305-16.299v-512c0.15-38.978 7.709-77.572 22.272-113.727 13.859-35.686 32.481-69.338 55.36-100.032 23.516-30.739 49.848-59.213 78.656-85.056 26.735-24.512 54.879-47.443 84.288-68.672 25.6-18.176 52.48-35.392 80.64-51.648s48.042-27.245 59.648-32.96c11.712-5.76 21.184-10.304 28.224-13.312 5.504-2.65 11.556-3.968 17.661-3.84 6.022-0.083 11.974 1.306 17.344 4.032 7.168 3.136 16.512 7.552 28.352 13.312s32 16.768 59.648 32.96c27.648 16.192 54.848 33.472 80.64 51.648 29.446 21.235 57.632 44.166 84.416 68.672 28.838 25.811 55.174 54.291 78.656 85.056 22.861 30.707 41.478 64.352 55.36 100.032 14.586 36.148 22.144 74.747 22.272 113.727v512c0.026 5.568-1.088 11.082-3.283 16.201-2.189 5.119-5.408 9.734-9.453 13.559v0zM826.974 336.579c0-185.599-314.944-345.023-314.944-345.023v794.751h314.944v-449.728z" />
+<glyph unicode="&#xe933;" glyph-name="stop" data-tags="bw-stop" d="M800 0h-576c-25.46 0-49.879 10.112-67.882 28.115s-28.118 42.426-28.118 67.885v576c0 25.46 10.115 49.879 28.118 67.882s42.422 28.118 67.882 28.118h576c25.459 0 49.882-10.115 67.885-28.118s28.115-42.422 28.115-67.882v-576c0-25.459-10.112-49.882-28.115-67.885s-42.426-28.115-67.885-28.115v0zM224 704c-8.487 0-16.627-3.372-22.627-9.373s-9.373-14.14-9.373-22.627v-576c0-8.486 3.372-16.627 9.373-22.63 6.001-5.997 14.14-9.37 22.627-9.37h576c8.486 0 16.627 3.373 22.63 9.37 5.997 6.003 9.37 14.144 9.37 22.63v576c0 8.487-3.373 16.627-9.37 22.627-6.003 6.001-14.144 9.373-22.63 9.373h-576z" />
+<glyph unicode="&#xe934;" glyph-name="plus-square" data-tags="bw-plus-square" d="M776.698 407.872h-207.104c-4.41 0-8.781 0.869-12.858 2.557s-7.776 4.163-10.899 7.283c-3.117 3.121-5.594 6.824-7.283 10.901s-2.56 8.445-2.56 12.858v207.168c0 6.331-2.515 12.403-6.989 16.88-4.48 4.477-10.547 6.992-16.883 6.992-6.328 0-12.401-2.515-16.877-6.992s-6.992-10.549-6.992-16.88v-207.040c0-4.413-0.869-8.782-2.557-12.858s-4.163-7.78-7.284-10.901c-3.12-3.12-6.824-5.595-10.9-7.283s-8.445-2.557-12.858-2.557h-207.296c-6.331 0-12.403-2.515-16.88-6.992s-6.992-10.549-6.992-16.88c0-6.332 2.515-12.403 6.992-16.881s10.549-6.991 16.88-6.991h207.040c8.911 0 17.458-3.54 23.759-9.841s9.841-14.848 9.841-23.759v-207.168c0-6.33 2.515-12.403 6.992-16.883 4.477-4.474 10.549-6.989 16.88-6.989 6.333 0 12.401 2.515 16.881 6.989 4.474 4.48 6.989 10.554 6.989 16.883v206.912c0 8.911 3.546 17.457 9.843 23.759 6.304 6.301 14.848 9.841 23.757 9.841h207.232c6.336 0 12.403 2.515 16.883 6.991 4.474 4.477 6.989 10.549 6.989 16.881s-2.515 12.403-6.989 16.88c-4.48 4.477-10.547 6.992-16.883 6.992l0.128 0.128zM928-128h-832c-25.46 0-49.879 10.112-67.882 28.115s-28.118 42.426-28.118 67.885v832c0 25.46 10.115 49.879 28.118 67.882s42.422 28.118 67.882 28.118h832c25.459 0 49.882-10.114 67.885-28.118s28.115-42.422 28.115-67.882v-832c0-25.459-10.112-49.882-28.115-67.885s-42.426-28.115-67.885-28.115zM96 832c-8.487 0-16.627-3.372-22.627-9.373s-9.373-14.14-9.373-22.627v-832c0-8.486 3.372-16.627 9.373-22.63 6.001-5.997 14.14-9.37 22.627-9.37h832c8.486 0 16.627 3.373 22.63 9.37 5.997 6.003 9.37 14.144 9.37 22.63v832c0 8.487-3.373 16.627-9.37 22.627-6.003 6.001-14.144 9.373-22.63 9.373h-832z" />
+<glyph unicode="&#xe935;" glyph-name="save" data-tags="bw-save" d="M120.705 895.978h782.591c31.571 0.393 62.003-11.75 84.634-33.765 22.624-22.016 35.597-52.107 36.070-83.675v-460.032c0.378-30.821-11.488-60.534-32.986-82.623-21.498-22.086-50.88-34.746-81.702-35.2h-152.256c-4.704-0.205-9.395 0.55-13.798 2.208-4.403 1.664-8.429 4.198-11.827 7.456-3.398 3.251-6.099 7.162-7.949 11.488-1.85 4.333-2.797 8.992-2.797 13.696s0.947 9.363 2.797 13.69c1.85 4.333 4.55 8.241 7.949 11.496s7.424 5.79 11.827 7.451c4.403 1.66 9.094 2.412 13.798 2.211h152.256c12.307 0.484 23.93 5.815 32.32 14.831s12.877 20.986 12.48 33.297v460.032c-0.224 6.498-1.722 12.888-4.416 18.806s-6.534 11.245-11.29 15.679c-4.755 4.435-10.336 7.887-16.429 10.163-6.086 2.275-12.57 3.327-19.066 3.096h-782.207c-6.498 0.231-12.977-0.821-19.068-3.096s-11.674-5.728-16.429-10.163c-4.755-4.434-8.589-9.762-11.284-15.679s-4.196-12.308-4.419-18.806v-444.672c-0.415-14.134 4.775-27.858 14.438-38.18s23.016-16.406 37.146-16.924h149.824c4.702 0.202 9.396-0.55 13.8-2.211s8.426-4.195 11.824-7.451c3.398-3.256 6.102-7.165 7.95-11.494s2.8-8.988 2.8-13.692c0-4.704-0.952-9.363-2.8-13.696-1.848-4.326-4.552-8.237-7.95-11.488-3.398-3.258-7.42-5.792-11.824-7.456-4.404-1.658-9.098-2.413-13.8-2.208h-149.312c-32.67 0.435-63.83 13.83-86.631 37.229-22.801 23.404-35.379 54.9-34.969 87.571v444.672c0.472 31.567 13.444 61.659 36.072 83.675s53.063 34.159 84.632 33.765v0zM546.625-112.726l127.36 120.256c3.475 2.848 6.33 6.381 8.39 10.381 2.054 3.994 3.27 8.371 3.565 12.858s-0.333 8.986-1.85 13.222c-1.51 4.23-3.878 8.109-6.957 11.386-3.072 3.283-6.784 5.894-10.912 7.68s-8.576 2.707-13.069 2.701c-4.499 0-8.947-0.928-13.069-2.72s-7.834-4.416-10.899-7.699l-71.168-67.2c0 0-9.536-8.64-13.12 2.112v464.127c0.192 4.429-0.512 8.852-2.067 13.002-1.562 4.15-3.949 7.941-7.014 11.144-3.059 3.204-6.746 5.753-10.822 7.495s-8.461 2.64-12.896 2.64c-4.435 0-8.822-0.898-12.899-2.64s-7.759-4.291-10.824-7.495c-3.065-3.203-5.45-6.994-7.010-11.144s-2.264-8.573-2.068-13.002v-468.159c-0.158-0.973-0.555-1.894-1.153-2.682s-1.382-1.414-2.281-1.824c-0.898-0.41-1.884-0.595-2.87-0.531-0.986 0.058-1.942 0.358-2.784 0.877v0l-73.856 78.656c-2.833 3.526-6.365 6.426-10.373 8.525-4.008 2.093-8.406 3.341-12.918 3.654-4.512 0.32-9.041-0.301-13.302-1.818-4.262-1.51-8.164-3.891-11.462-6.989s-5.922-6.835-7.706-10.995c-1.784-4.154-2.689-8.634-2.66-13.158s0.993-8.992 2.831-13.126c1.837-4.134 4.509-7.84 7.847-10.893l118.592-126.272c10.228-10.829 24.333-17.158 39.222-17.606 14.891-0.442 29.348 5.037 40.203 15.238v0z" />
+<glyph unicode="&#xe936;" glyph-name="sign-in" data-tags="bw-sign-in" d="M720.876 418.177l-119.872 128c-6.054 5.865-14.138 9.18-22.566 9.26-8.435 0.079-16.576-3.082-22.746-8.831-6.163-5.75-9.888-13.648-10.4-22.065-0.518-8.417 2.221-16.708 7.648-23.164l67.136-71.616c0 0 8.64-9.6-2.176-13.12l-489.663 1.792c-8.482-0.374-16.493-4.007-22.362-10.141s-9.146-14.297-9.146-22.787c0-8.49 3.276-16.653 9.146-22.787s13.88-9.767 22.362-10.141l493.311-1.6c0.979-0.153 1.901-0.547 2.688-1.147s1.414-1.386 1.824-2.289c0.403-0.902 0.582-1.891 0.506-2.879-0.070-0.987-0.39-1.94-0.922-2.774v0l-78.848-73.792c-5.862-6.059-9.178-14.138-9.261-22.567-0.077-8.435 3.085-16.576 8.832-22.746 5.754-6.17 13.651-9.894 22.067-10.406s16.71 2.227 23.162 7.654l126.528 118.401c10.906 10.231 17.312 24.362 17.83 39.304 0.512 14.942-4.909 29.481-15.078 40.44v0zM857.318-128h-487.741c-8.487 0-16.626 3.373-22.627 9.37-6.001 6.003-9.373 14.144-9.373 22.63s3.372 16.627 9.373 22.63c6.001 5.997 14.14 9.37 22.627 9.37h487.741c2.97 10.451 4.877 21.171 5.696 32v832c0.966 11.903-2.522 23.74-9.792 33.216l-486.461-1.216c-8.486 0-16.626 3.371-22.627 9.373s-9.373 14.14-9.373 22.627c0 8.487 3.372 16.626 9.373 22.627s14.141 9.373 22.627 9.373h490.557c39.872 0 69.952-41.344 69.952-96v-832c0-54.656-30.080-96-69.952-96z" />
+<glyph unicode="&#xe937;" glyph-name="spinner" data-tags="bw-spinner" d="M311.647-64.832c20.784 0 37.632 16.845 37.632 37.632 0 20.781-16.848 37.632-37.632 37.632s-37.632-16.851-37.632-37.632c0-20.787 16.849-37.632 37.632-37.632zM528.163-127.872c20.783 0 37.634 16.845 37.634 37.632 0 20.781-16.851 37.632-37.634 37.632s-37.632-16.851-37.632-37.632c0-20.787 16.849-37.632 37.632-37.632zM763.807-69.568c20.781 0 37.632 16.851 37.632 37.632s-16.851 37.632-37.632 37.632c-20.787 0-37.632-16.851-37.632-37.632s16.845-37.632 37.632-37.632zM155.618 71.616c24.495 0 44.352 19.859 44.352 44.352s-19.857 44.352-44.352 44.352c-24.495 0-44.352-19.859-44.352-44.352s19.857-44.352 44.352-44.352zM84.449 272.768c28.984 0 52.48 23.496 52.48 52.48s-23.496 52.48-52.48 52.48c-28.984 0-52.48-23.496-52.48-52.48s23.496-52.48 52.48-52.48zM128.671 501.76c34.215 0 61.952 27.736 61.952 61.952s-27.737 61.952-61.952 61.952c-34.215 0-61.952-27.737-61.952-61.952s27.737-61.952 61.952-61.952zM307.872 682.368c41.532 0 75.2 33.668 75.2 75.2s-33.668 75.2-75.2 75.2c-41.532 0-75.2-33.668-75.2-75.2s33.668-75.2 75.2-75.2zM602.008 725.632c47.014 0 85.12 38.109 85.12 85.12s-38.106 85.12-85.12 85.12c-47.008 0-85.117-38.11-85.117-85.12s38.109-85.12 85.117-85.12zM892.703 536.576c54.861 0 99.328 44.471 99.328 99.328s-44.467 99.328-99.328 99.328c-54.854 0-99.328-44.47-99.328-99.328s44.474-99.328 99.328-99.328z" />
+<glyph unicode="&#xe938;" glyph-name="paypal" data-tags="bw-paypal" d="M938.667 479.531c0-22.87-2.771-46.251-7.206-69.419-36.141-188.544-159.834-253.696-317.826-253.696h-24.406c-19.328 0-35.754-14.253-38.741-33.664l-34.261-217.171c-3.030-19.328-19.456-33.581-38.742-33.581h-116.736c-16.64 0-29.354 14.848-26.794 31.232l59.136 378.88 2.645 2.389h91.947c223.362 0 363.048 111.702 404.181 322.902 34.643-34.731 46.803-80.043 46.803-127.872v0zM332.12 298.112c4.949 35.243 19.584 50.219 59.093 50.304l96.427 0.085c195.155 0 307.117 89.174 342.317 272.64 34.131 176.384-89.69 274.859-257.325 274.859h-313.344c-22.059 0-40.875-16.299-44.288-38.443-98.304-632.962-126.72-793.897-129.621-843.010-0.896-15.443 11.477-28.672 27.093-28.672h170.197l49.451 312.237z" />
+<glyph unicode="&#xe939;" glyph-name="dollar" data-tags="bw-dollar" d="M728.748 342.592c-59.776 41.757-127.686 70.435-199.296 84.16-64.64 10.025-126.144 34.648-179.842 72-13.534 11.619-24.354 26.065-31.697 42.321s-11.029 33.924-10.799 51.759c0.374 19.17 5.138 37.999 13.925 55.041s21.363 31.841 36.763 43.263c44.83 32.288 99.587 47.784 154.69 43.776 58.752 3.217 116.736-14.569 163.584-50.176 18.33-13.967 33.178-31.988 43.379-52.651 10.208-20.663 15.488-43.408 15.437-66.453 0 0-0.384-46.528 31.104-45.184 28.544 1.216 28.288 49.024 28.288 49.024 2.080 31.727-3.565 63.487-16.467 92.549-12.896 29.062-32.659 54.559-57.581 74.299-50.893 38.365-112.602 59.667-176.32 60.864v66.816c0 8.487-3.373 16.626-9.376 22.627-5.997 6.001-14.138 9.373-22.626 9.373-8.486 0-16.626-3.371-22.627-9.373s-9.373-14.14-9.373-22.627v-66.88c-58.676-1.808-115.372-21.652-162.368-56.832-23.172-17.289-41.974-39.764-54.9-65.626s-19.614-54.39-19.532-83.302c-1.752-28.090 3.384-56.184 14.962-81.838s29.247-48.092 51.47-65.362c61.558-39.629 130.696-66.003 203.010-77.44 64.090-9.558 124.589-35.628 175.552-75.648 14.733-12.758 26.624-28.462 34.912-46.099 8.294-17.638 12.794-36.819 13.216-56.301-0.595-20.909-6.125-41.376-16.134-59.738s-24.218-34.099-41.466-45.926c-46.554-33.638-103.232-50.291-160.576-47.168-57.287-1.408-113.958 12.070-164.482 39.104-21.7 12.019-39.775 29.645-52.339 51.034s-19.155 45.76-19.085 70.566c0 0-1.728 37.696-31.68 35.008-30.4-1.536-26.304-39.36-26.304-39.36-1.67-30.554 4.433-61.037 17.741-88.589 13.308-27.558 33.385-51.29 58.355-68.979 52.382-37.92 115.005-59.11 179.648-60.8v-69.824c0-8.486 3.372-16.627 9.373-22.624 6.001-6.003 14.141-9.376 22.627-9.376 8.488 0 16.629 3.373 22.626 9.376 6.003 5.997 9.376 14.138 9.376 22.624v69.12c63.584 0.774 125.434 20.864 177.344 57.6 24.794 17.92 44.89 41.562 58.586 68.922 13.696 27.354 20.576 57.613 20.070 88.198 1.312 29.6-4.454 59.085-16.838 85.999-12.378 26.916-31.002 50.488-54.33 68.753v0z" />
+<glyph unicode="&#xe93a;" glyph-name="check" data-tags="bw-check" d="M331.969-63.536c-8.191-0.006-16.070 3.136-22.016 8.768l-299.584 283.904c-6.17 5.837-9.768 13.888-10.002 22.381-0.234 8.49 2.915 16.726 8.754 22.897s13.89 9.768 22.381 10.002c8.492 0.234 16.728-2.915 22.899-8.754l274.24-259.965 638.658 804.605c5.376 6.307 12.992 10.28 21.242 11.084 8.256 0.803 16.493-1.627 22.989-6.778s10.739-12.621 11.834-20.838c1.094-8.216-1.037-16.538-5.952-23.212l-660.418-831.997c-2.751-3.488-6.196-6.368-10.119-8.448s-8.236-3.328-12.665-3.648h-2.24z" />
+<glyph unicode="&#xe93b;" glyph-name="check-square" data-tags="bw-check-square" d="M404.038 104.774c-5.86 0.013-11.485 2.304-15.68 6.4l-179.2 175.357c-2.113 2.051-3.8 4.499-4.964 7.203s-1.781 5.613-1.816 8.557c-0.036 2.945 0.511 5.867 1.608 8.599s2.725 5.22 4.788 7.321c2.077 2.127 4.554 3.822 7.288 4.989s5.672 1.784 8.645 1.813c2.973 0.030 5.923-0.527 8.679-1.64s5.268-2.758 7.388-4.843l161.088-157.629 379.649 493.693c3.686 4.499 8.979 7.388 14.758 8.054s11.59-0.942 16.205-4.484c4.614-3.542 7.667-8.74 8.518-14.495s-0.57-11.614-3.962-16.339l-395.265-513.853c-1.927-2.522-4.367-4.595-7.159-6.099-2.792-1.498-5.871-2.387-9.033-2.605h-1.536zM928-128h-832c-25.46 0-49.879 10.112-67.882 28.115s-28.118 42.426-28.118 67.885v832c0 25.46 10.115 49.879 28.118 67.882s42.422 28.118 67.882 28.118h832c25.459 0 49.882-10.114 67.885-28.118s28.115-42.422 28.115-67.882v-832c0-25.459-10.112-49.882-28.115-67.885s-42.426-28.115-67.885-28.115zM96 832c-8.487 0-16.627-3.372-22.627-9.373s-9.373-14.14-9.373-22.627v-832c0-8.486 3.372-16.627 9.373-22.63 6.001-5.997 14.14-9.37 22.627-9.37h832c8.486 0 16.627 3.373 22.63 9.37 5.997 6.003 9.37 14.144 9.37 22.63v832c0 8.487-3.373 16.627-9.37 22.627-6.003 6.001-14.144 9.373-22.63 9.373h-832z" />
+<glyph unicode="&#xe93c;" glyph-name="minus-square" data-tags="bw-minus-square" d="M774.4 361.601h-524.797c-5.941 0-11.638 2.36-15.839 6.561s-6.561 9.898-6.561 15.839c0 5.94 2.36 11.638 6.561 15.839s9.898 6.561 15.839 6.561h524.797c5.946 0 11.642-2.36 15.84-6.561 4.205-4.2 6.56-9.898 6.56-15.839s-2.355-11.638-6.56-15.839c-4.198-4.201-9.894-6.561-15.84-6.561v0zM928-128h-832c-25.46 0-49.879 10.112-67.882 28.115s-28.118 42.426-28.118 67.885v832c0 25.46 10.115 49.879 28.118 67.882s42.422 28.118 67.882 28.118h832c25.459 0 49.882-10.114 67.885-28.118s28.115-42.422 28.115-67.882v-832c0-25.459-10.112-49.882-28.115-67.885s-42.426-28.115-67.885-28.115zM96 832c-8.487 0-16.627-3.372-22.627-9.373s-9.373-14.14-9.373-22.627v-832c0-8.486 3.372-16.627 9.373-22.63 6.001-5.997 14.14-9.37 22.627-9.37h832c8.486 0 16.627 3.373 22.63 9.37 5.997 6.003 9.37 14.144 9.37 22.63v832c0 8.487-3.373 16.627-9.37 22.627-6.003 6.001-14.144 9.373-22.63 9.373h-832z" />
+<glyph unicode="&#xe93d;" glyph-name="close" data-tags="bw-close" d="M1016.594-73.344l-436.544 437.056c-5.997 6.001-9.37 14.139-9.37 22.624s3.373 16.623 9.37 22.624l431.168 431.936c5.83 6.035 9.056 14.119 8.986 22.509-0.077 8.39-3.443 16.416-9.376 22.349s-13.958 9.298-22.349 9.371c-8.39 0.073-16.474-3.153-22.509-8.982l-431.232-431.744c-5.997-5.999-14.138-9.369-22.624-9.369-8.483 0-16.621 3.37-22.622 9.369l-432.576 432.192c-2.952 3.056-6.483 5.494-10.387 7.171s-8.104 2.56-12.353 2.597c-4.249 0.037-8.462-0.773-12.395-2.382s-7.506-3.985-10.51-6.99c-3.005-3.005-5.381-6.577-6.99-10.51s-2.419-8.146-2.381-12.395c0.037-4.249 0.92-8.448 2.596-12.352s4.115-7.435 7.171-10.387l432.576-432.384c5.999-6.001 9.37-14.139 9.37-22.624s-3.37-16.623-9.37-22.624l-437.248-437.056c-2.971-2.976-5.327-6.509-6.933-10.394s-2.431-8.051-2.428-12.256c0.006-8.486 3.385-16.627 9.393-22.63s14.156-9.37 22.647-9.363c8.492 0.006 16.633 3.386 22.633 9.395l437.184 437.056c6.001 5.999 14.139 9.37 22.622 9.37 8.486 0 16.627-3.37 22.624-9.37l436.608-437.056c2.957-3.059 6.483-5.491 10.387-7.168 3.904-1.683 8.102-2.56 12.352-2.598s8.467 0.774 12.397 2.381c3.936 1.606 7.507 3.987 10.509 6.989 3.008 3.008 5.382 6.579 6.989 10.509 1.613 3.936 2.419 8.147 2.387 12.397-0.038 4.25-0.922 8.448-2.598 12.352s-4.115 7.437-7.174 10.387v0z" />
+<glyph unicode="&#xe93e;" glyph-name="bw-folder-open-f1" data-tags="bw-folder-open-f" d="M997.265 369.664c8.576 0 16.512-4.8 20.416-12.48s3.264-16.896-1.792-23.872c-0.064-0.064-0.064-0.064-0.128-0.128l-188.352-260.736c-1.088-1.6-8.96-12.8-12.736-16.384-15.872-15.488-36.864-24.064-59.264-24.064 0 0-556.096 0.128-677.44 0.128-4.672 0-8.96 2.56-11.2 6.656-2.304 4.096-2.112 9.024 0.384 12.992 44.16 70.016 191.488 303.488 191.488 303.488 6.208 10.048 17.344 16 29.312 16 0 0 571.584-1.28 709.312-1.6zM27.665 109.248c-3.072-4.864-8.896-7.104-14.4-5.504-5.44 1.6-9.216 6.592-9.216 12.288-0.064 135.808-0.256 537.728-0.256 537.728 0 46.4 37.632 82.24 84.032 82.24h291.648c46.464 0 84.096-36.8 84.096-82.304v-12.736c0-10.624 8.768-19.264 19.648-19.264h272.128c46.4 0 84.032-36.864 84.032-82.304 0 0-0.128-64.32-0.192-92.352 0-7.104-5.76-12.8-12.8-12.8-21.76 0.064-63.744 0.064-63.744 0.064l-474.752-0.064c-34.304 0-66.048-17.408-84.032-45.888 0 0-123.328-195.392-176.192-279.104z" />
+<glyph unicode="&#xe93f;" glyph-name="paperclip" data-tags="bw-paperclip" d="M970.017 150.848l-583.805 669.569c-19.054 22.152-42.374 40.24-68.57 53.184s-54.73 20.481-83.901 22.159c-29.171 1.678-58.381-2.536-85.889-12.39s-52.748-25.149-74.217-44.969c-43.72-40.725-69.972-96.797-73.254-156.455s16.664-118.271 55.654-163.545l461.181-529.089c2.995-3.488 6.694-6.298 10.854-8.25s8.685-3.002 13.274-3.078v0c4.134-0.013 8.224 0.838 12.006 2.502s7.168 4.102 9.946 7.162c6.387 5.837 10.227 13.946 10.707 22.586 0.474 8.634-2.445 17.114-8.147 23.622l-461.181 528.897c-27.578 31.923-41.701 73.297-39.397 115.42s20.854 81.711 51.749 110.436c15.158 13.959 32.97 24.726 52.375 31.659s40.008 9.89 60.579 8.696c20.572-1.194 40.693-6.516 59.166-15.648s34.919-21.887 48.36-37.507l583.869-669.441c19.264-19.994 32.154-45.248 37.056-72.576 1.235-12.454-0.627-25.018-5.434-36.576-4.8-11.558-12.384-21.754-22.086-29.664-10.682-9.856-23.238-17.459-36.922-22.355-13.683-4.902-28.211-7.002-42.72-6.17s-28.704 4.57-41.741 11.002c-13.037 6.426-24.646 15.411-34.138 26.419l-579.965 665.153c-3.624 4.328-6.351 9.334-8.019 14.728s-2.245 11.065-1.697 16.684c0.548 5.619 2.211 11.071 4.889 16.040s6.321 9.354 10.714 12.9c3.529 2.902 7.604 5.067 11.984 6.367s8.977 1.708 13.517 1.201c4.54-0.508 8.933-1.92 12.918-4.154s7.482-5.245 10.284-8.854l457.533-524.801c2.771-3.187 6.138-5.792 9.92-7.667 3.776-1.882 7.891-2.995 12.096-3.277 4.23-0.448 8.499 0.070 12.493 1.53 3.994 1.453 7.603 3.795 10.547 6.854 6.624 5.875 10.784 14.035 11.648 22.848 0.333 4.32-0.205 8.666-1.581 12.774-1.37 4.115-3.552 7.904-6.419 11.162l-457.661 525.185c-8.533 9.962-18.948 18.143-30.648 24.073s-24.455 9.494-37.535 10.488c-13.079 0.993-26.226-0.605-38.687-4.701s-23.991-10.611-33.93-19.171c-19.142-20.646-30.687-47.192-32.734-75.272s5.524-56.020 21.47-79.224l579.965-665.601c15.13-17.51 33.619-31.802 54.374-42.029 20.749-10.227 43.347-16.186 66.451-17.517 23.098-1.331 46.227 1.99 68.019 9.766s41.798 19.853 58.835 35.507c16.563 14.061 29.658 31.75 38.259 51.699 8.608 19.949 12.486 41.613 11.341 63.309-4.269 44.339-23.187 85.997-53.76 118.4z" />
+<glyph unicode="&#xe940;" glyph-name="bitcoin" data-tags="bw-bitcoin" d="M732.552 402.56c20.518 19.356 36.858 42.708 48.006 68.619s16.877 53.83 16.826 82.037c0.998 53.012-19.053 104.26-55.757 142.524s-87.072 60.426-140.083 61.636h-19.904v106.624c0 8.487-3.373 16.626-9.37 22.627-6.003 6.001-14.144 9.373-22.63 9.373s-16.627-3.371-22.63-9.373c-5.997-6.001-9.37-14.14-9.37-22.627v-106.624h-79.104v106.624c0 8.487-3.372 16.626-9.373 22.627s-14.14 9.373-22.627 9.373c-8.487 0-16.627-3.371-22.627-9.373s-9.373-14.14-9.373-22.627v-106.624h-182.592c-8.487 0-16.627-3.372-22.627-9.373s-9.373-14.14-9.373-22.627c0-8.487 3.372-16.627 9.373-22.627s14.14-9.373 22.627-9.373h86.848v-624.256h-86.848c-8.487 0-16.627-3.373-22.627-9.37-6.001-6.003-9.373-14.144-9.373-22.63s3.372-16.627 9.373-22.63c6.001-5.997 14.14-9.37 22.627-9.37h182.592v-101.12c0-8.486 3.372-16.627 9.373-22.63 6.001-5.997 14.14-9.37 22.627-9.37s16.627 3.373 22.627 9.37c6.001 6.003 9.373 14.144 9.373 22.63v101.12h78.976v-101.12c0-8.486 3.373-16.627 9.37-22.63 6.003-5.997 14.144-9.37 22.63-9.37s16.627 3.373 22.63 9.37c5.997 6.003 9.37 14.144 9.37 22.63v101.12h92.544c52.218 2.035 101.504 24.659 137.088 62.931 35.584 38.266 54.566 89.069 52.8 141.293 0.691 41.824-11.565 82.835-35.085 117.423-23.526 34.588-57.158 61.060-96.307 75.793v0zM601.544 693.376c36.064-1.154 70.202-16.552 94.938-42.822 24.73-26.27 38.048-61.271 37.030-97.338 0.922-35.217-11.814-69.425-35.539-95.466s-56.608-41.896-91.757-44.246h-250.816c-0.896 0-1.664-0.448-2.496-0.512h-10.112v280.384h258.752zM674.184 69.12h-331.392v279.872h258.752c1.664 0 3.136 0.448 4.8 0.512h67.84c35.232-2.017 68.243-17.884 91.827-44.14 23.578-26.256 35.827-60.769 34.061-96.020 1.766-35.277-10.496-69.818-34.106-96.090-23.61-26.266-56.646-42.131-91.91-44.134h0.128z" />
+<glyph unicode="&#xe941;" glyph-name="cut" data-tags="bw-cut" d="M1018.038 754.644c-2.458 3.426-5.574 6.332-9.158 8.551s-7.578 3.708-11.738 4.38c-4.166 0.673-8.422 0.515-12.525-0.463s-7.968-2.757-11.379-5.235l-479.105-347.264-176.576 125.568c12.113 29.564 14.883 62.127 7.936 93.312-4.664 20.991-13.512 40.827-26.015 58.322s-28.404 32.291-46.753 43.502c-36.76 22.764-80.919 30.376-123.178 21.231s-79.322-34.331-103.382-70.255c-11.651-17.618-19.629-37.405-23.456-58.179s-3.424-42.104 1.184-62.717c4.694-21.012 13.582-40.861 26.129-58.358s28.498-32.28 46.895-43.466c31.812-19.731 69.366-28.117 106.55-23.795s71.812 21.1 98.25 47.603l157.76-112.384-151.36-109.504c-26.264 29.398-62.093 48.543-101.13 54.038s-78.758-3.016-112.118-24.022c-18.211-11.366-33.937-26.296-46.233-43.891-12.296-17.6-20.908-37.498-25.319-58.509-4.389-20.666-4.56-41.997-0.502-62.733 4.058-20.73 12.261-40.422 24.118-57.907 24.497-35.597 61.818-60.333 104.145-69.030s86.379-0.678 122.927 22.374c18.198 11.334 33.932 26.214 46.268 43.75s21.021 37.37 25.54 58.33c5.523 27.155 3.734 55.296-5.184 81.536l173.952 126.080 463.105-329.216c5.389-3.878 11.859-5.958 18.496-5.952 6.778 0.006 13.376 2.163 18.854 6.163 5.472 4 9.53 9.632 11.597 16.090s2.022 13.402-0.115 19.834c-2.138 6.438-6.259 12.026-11.776 15.962l-445.504 317.056 461.632 334.528c6.874 4.975 11.488 12.475 12.832 20.852s-0.691 16.945-5.664 23.82v0zM110.325 517.972c-11.073 6.74-20.674 15.644-28.228 26.179s-12.908 22.484-15.74 35.133c-2.732 12.259-2.962 24.944-0.675 37.294s7.044 24.111 13.987 34.578c9.319 13.994 21.972 25.45 36.819 33.338s31.425 11.958 48.237 11.846c19.188 0.036 38.006-5.283 54.336-15.36 11.063-6.76 20.652-15.677 28.195-26.222s12.886-22.5 15.709-35.154c2.733-12.245 2.968-24.915 0.692-37.254s-7.018-24.090-13.94-34.554v0c-14.807-22.106-37.636-37.581-63.654-43.148s-53.181-0.788-75.738 13.324v0zM263.157 141.46c-2.662-12.678-7.862-24.685-15.286-35.296-7.424-10.618-16.92-19.616-27.914-26.464-22.435-14.195-49.486-19.181-75.507-13.907s-49 20.39-64.141 42.195c-7.067 10.413-11.962 22.144-14.392 34.496-2.43 12.346-2.346 25.062 0.248 37.376 2.685 12.659 7.902 24.646 15.337 35.232 7.435 10.592 16.934 19.571 27.927 26.4 16.488 10.49 35.626 16.063 55.168 16.064 16.631 0.099 33.032-3.885 47.763-11.61s27.338-18.944 36.717-32.678c7.057-10.406 11.942-22.131 14.362-34.47s2.324-25.037-0.282-37.338v0z" />
+<glyph unicode="&#xe942;" glyph-name="frown" data-tags="bw-frown" d="M512-127.999c-101.263 0-200.253 30.029-284.451 86.285-84.198 56.262-149.823 136.224-188.575 229.779-38.752 93.558-48.891 196.504-29.135 295.822s68.519 190.548 140.124 262.152c71.604 71.604 162.834 120.368 262.152 140.123 99.316 19.756 202.266 9.616 295.821-29.136s173.517-104.377 229.779-188.574c56.256-84.198 86.285-183.188 86.285-284.452-0.154-135.744-54.144-265.888-150.131-361.869-95.981-95.987-226.125-149.978-361.869-150.131v0zM512 832.001c-88.605 0-175.222-26.275-248.895-75.502s-131.094-119.195-165.003-201.056c-33.908-81.861-42.78-171.939-25.494-258.843s59.954-166.73 122.608-229.386c62.654-62.65 142.48-105.318 229.384-122.605 86.9-17.286 176.98-8.416 258.843 25.491 81.862 33.914 151.827 91.334 201.056 165.005s75.501 160.29 75.501 248.896c-0.134 118.775-47.379 232.647-131.366 316.634s-197.856 131.23-316.634 131.366v0zM333.885 482.943c21.208 0 38.4 17.192 38.4 38.4s-17.192 38.4-38.4 38.4c-21.208 0-38.4-17.192-38.4-38.4s17.192-38.4 38.4-38.4zM686.138 482.943c21.203 0 38.4 17.192 38.4 38.4s-17.197 38.4-38.4 38.4c-21.21 0-38.4-17.192-38.4-38.4s17.19-38.4 38.4-38.4zM768.634 185.595c-3.718 0.013-7.373 0.934-10.65 2.701-3.27 1.766-6.054 4.314-8.102 7.411-27.866 37.862-64.32 68.563-106.368 89.581s-88.48 31.752-135.488 31.317c-46.272 0.899-92.072-9.439-133.472-30.127s-77.164-51.11-104.224-88.659c-3.316-4.704-8.315-7.962-13.964-9.088-5.648-1.133-11.514-0.045-16.385 3.027s-8.377 7.898-9.792 13.478c-1.415 5.587-0.631 11.501 2.189 16.518 31.156 43.905 72.537 79.557 120.564 103.877s101.256 36.577 155.083 35.709c54.406 0.433 108.128-12.115 156.717-36.602 48.582-24.487 90.63-60.208 122.643-104.2 2.202-3.379 3.45-7.29 3.61-11.315 0.166-4.032-0.762-8.026-2.682-11.571s-4.762-6.509-8.224-8.576c-3.469-2.067-7.424-3.155-11.456-3.162v-0.32z" />
+<glyph unicode="&#xe943;" glyph-name="folder-open" data-tags="bw-folder-open" d="M1016.764 399.741c-5.645 10.527-14.061 19.311-24.339 25.402-10.272 6.091-22.022 9.258-33.965 9.158h-110.208c-3.328-0.002-6.528 1.294-8.915 3.612-2.394 2.318-3.782 5.476-3.885 8.804v92.8c-0.256 22.033-9.235 43.066-24.979 58.483-15.738 15.418-36.954 23.962-58.989 23.757h-272c-5.15-0.035-10.107 1.961-13.796 5.555s-5.814 8.496-5.916 13.645v12.8c-0.32 21.944-9.297 42.872-24.977 58.227s-36.79 23.894-58.735 23.757h-292.032c-21.978 0.205-43.146-8.294-58.878-23.644s-24.753-36.3-25.090-58.276v-538.878c0.253-22.022 9.228-43.046 24.956-58.464s36.926-23.968 58.948-23.776l667.52-0.448c22.144-0.064 43.43 8.576 59.264 24.064 4.557 5.229 8.826 10.694 12.8 16.384l188.288 260.798c6.925 9.479 11.059 20.708 11.93 32.415s-1.555 23.425-7.002 33.825v0zM84.092 673.149h291.968c5.155 0.051 10.122-1.939 13.814-5.536s5.814-8.509 5.898-13.664v-12.8c0.237-21.999 9.177-43.010 24.865-58.434s36.847-24.007 58.847-23.87h272.064c5.158 0.035 10.118-1.959 13.818-5.551s5.843-8.494 5.958-13.649v-92.928c-0.102-3.328-1.491-6.486-3.885-8.804-2.387-2.318-5.587-3.614-8.915-3.612h-474.496c-16.714 0.054-33.171-4.118-47.841-12.13s-27.075-19.603-36.063-33.694l-121.6-193.15c-0.876-1.357-2.163-2.394-3.671-2.963s-3.159-0.64-4.711-0.205c-1.552 0.435-2.924 1.357-3.914 2.63s-1.549 2.829-1.592 4.442v454.398c0.033 5.156 2.092 10.092 5.732 13.743s8.569 5.726 13.724 5.777zM765.564 100.671c-1.837-1.818-4.019-3.251-6.413-4.218s-4.954-1.446-7.539-1.414v0l-633.6 0.384c-2.662-0.006-5.277 0.698-7.576 2.042s-4.197 3.277-5.501 5.6c-1.304 2.317-1.965 4.947-1.917 7.603 0.049 2.662 0.806 5.267 2.194 7.539l149.76 237.182c3.132 4.93 7.464 8.985 12.591 11.783s10.881 4.25 16.721 4.217l656.768-1.664c1.741 0.022 3.462-0.438 4.96-1.329s2.72-2.178 3.533-3.72c0.819-1.542 1.19-3.279 1.082-5.019-0.115-1.74-0.698-3.416-1.702-4.844l-173.824-240.51z" />
+<glyph unicode="&#xe944;" glyph-name="android" data-tags="bw-android" d="M256 554.667l0.043-402.942c0-36.736 29.696-66.394 66.432-66.394h18.858v-151.123c0-34.304 30.166-62.208 64.427-62.208 34.389 0 63.573 27.904 63.573 62.253v151.078h85.334v-151.123c0-34.304 30.165-62.208 64.469-62.208 34.392 0 63.532 27.904 63.532 62.253v151.078l18.944 0.045c36.608 0 66.387 29.696 66.387 66.432v402.859h-511.999zM938.667 491.904c0 34.347-29.651 62.763-64 62.763-34.349 0.042-64-28.459-64-62.806v-260.52c0-34.394 29.613-60.672 64-60.672 34.349 0 64 26.24 64 60.672v260.563zM213.333 491.904c0 34.347-29.653 62.763-64 62.763-34.346 0.042-64-28.459-64-62.806v-260.52c0-34.394 29.611-60.672 64-60.672 34.347 0 64 26.24 64 60.672v260.563zM637.909 803.883l40.106 79.317c2.906 5.632-0.806 12.8-6.95 12.8-2.816 0-5.549-1.621-7.002-4.48l-40.49-80.128c-65.322 31.445-151.21 34.645-223.104 0l-40.533 80.128c-1.408 2.859-4.139 4.48-6.997 4.48-6.144 0-9.856-7.168-6.955-12.8l40.107-79.317c-78.72-44.118-130.091-110.251-130.091-206.507h511.999c0 96.256-51.366 162.389-130.090 206.507zM405.376 682.667c-11.776 0-21.376 9.557-21.376 21.333 0 11.691 9.6 21.333 21.376 21.333s21.291-9.642 21.291-21.333c0-11.776-9.515-21.333-21.291-21.333zM618.624 682.667c-11.776 0-21.291 9.557-21.291 21.333 0 11.691 9.515 21.333 21.291 21.333s21.376-9.642 21.376-21.333c0-11.776-9.6-21.333-21.376-21.333z" />
+<glyph unicode="&#xe945;" glyph-name="apple" data-tags="bw-apple" d="M938.668 144.753c-33.536-97.28-133.933-269.523-237.357-271.405-68.607-1.318-90.666 40.666-169.087 40.666-78.379 0-102.912-39.386-167.765-41.946-109.739-4.224-279.126 248.621-279.126 469.122 0 202.539 141.142 302.934 264.448 304.768 66.134 1.195 128.598-44.586 168.918-44.586 40.49 0 116.352 55.040 196.097 46.976 33.363-1.408 127.104-13.44 187.264-101.419-159.616-104.192-134.739-322.093 36.608-402.176zM715.865 895.985c-120.579-4.864-218.968-131.371-205.229-235.989 111.445-8.662 218.369 116.266 205.229 235.989z" />
+<glyph unicode="&#xe946;" glyph-name="bug" data-tags="bw-bug" d="M1001.185 258.211h-108.8c-8.538 0.18-16.698 3.575-22.842 9.507-6.15 5.932-9.83 13.965-10.31 22.493-3.789 36.756-13.382 72.678-28.416 106.432-3.706 7.939-4.25 16.992-1.51 25.315 2.733 8.324 8.538 15.292 16.23 19.485l129.984 66.56c5.414 2.815 9.51 7.651 11.392 13.46 1.875 5.809 1.395 12.124-1.344 17.58-1.344 2.689-3.206 5.085-5.478 7.052-2.278 1.967-4.915 3.467-7.77 4.412s-5.869 1.318-8.864 1.097c-3.002-0.221-5.926-1.032-8.608-2.385l-139.392-71.36c-6.739-3.343-14.413-4.296-21.76-2.703-7.354 1.593-13.939 5.638-18.688 11.471-26.605 26.435-55.712 50.226-86.912 71.040-12.8 7.36-8.128 25.088-8.128 25.088 7.174 19.372 10.982 39.826 11.264 60.48 0.032 26.319-5.741 52.322-16.896 76.16-3.302 6.433-4.506 13.741-3.437 20.894 1.062 7.153 4.352 13.791 9.389 18.978l67.072 65.088c4.403 4.235 6.944 10.046 7.066 16.156s-2.189 12.016-6.426 16.421c-2.054 2.148-4.518 3.869-7.238 5.064-2.726 1.195-5.658 1.841-8.627 1.9-2.976 0.059-5.933-0.469-8.698-1.554-2.771-1.085-5.299-2.706-7.437-4.77l-61.312-59.584c-5.414-5.565-12.576-9.104-20.288-10.024s-15.507 0.834-22.080 4.968c-28.672 20.127-62.752 31.139-97.779 31.596-35.031 0.456-69.384-9.663-98.573-29.036-6.399-3.842-13.908-5.409-21.309-4.444s-14.259 4.403-19.459 9.756l-57.344 55.424c-4.332 4.153-10.133 6.417-16.132 6.297s-11.706-2.615-15.868-6.937c-4.204-4.421-6.493-10.321-6.374-16.42s2.64-11.904 7.014-16.157l59.456-57.6c5.245-5.433 8.614-12.401 9.616-19.885s-0.417-15.094-4.048-21.715c-12.571-24.98-19.144-52.547-19.2-80.512 0.339-20.636 4.259-41.057 11.584-60.352 0 0 2.496-19.2-8.704-25.6-31.325-20.872-60.521-44.774-87.168-71.36-4.743-5.858-11.34-9.925-18.705-11.531s-15.057-0.653-21.807 2.699l-135.552 69.504c-2.683 1.363-5.608 2.18-8.609 2.405s-6.016-0.145-8.872-1.091c-2.856-0.947-5.497-2.449-7.769-4.42s-4.132-4.375-5.471-7.069c-2.685-5.428-3.144-11.692-1.279-17.453s5.907-10.568 11.263-13.395l126.272-64.896c7.715-4.171 13.544-11.134 16.292-19.462s2.209-17.394-1.508-25.338c-14.84-33.533-24.321-69.189-28.096-105.664-0.482-8.528-4.163-16.561-10.309-22.493s-14.303-9.327-22.843-9.507h-108.16c-5.909-0.311-11.473-2.876-15.546-7.171s-6.343-9.984-6.343-15.904c0-5.914 2.271-11.603 6.343-15.898s9.636-6.861 15.546-7.174h116.032c7.818-0.134 15.345-2.982 21.29-8.064s9.935-12.070 11.286-19.776c7.785-37.997 21.821-74.438 41.536-107.84 2.213-4.038 3.587-8.48 4.040-13.062s-0.026-9.21-1.407-13.606c-1.381-4.39-3.636-8.461-6.628-11.962s-6.663-6.362-10.788-8.41l-140.16-71.872c-5.417-2.816-9.511-7.642-11.402-13.453-1.891-5.805-1.428-12.115 1.29-17.587 2.742-5.421 7.522-9.536 13.291-11.443s12.059-1.446 17.493 1.267l154.112 79.040c8.549 3.206 17.736 4.333 26.805 3.283 9.069-1.043 17.759-4.23 25.355-9.299 63.076-55.245 144.156-85.562 228.006-85.242 83.853 0.32 164.698 31.245 227.354 86.97h0.384c7.795 5.299 16.883 8.384 26.298 8.928 9.408 0.538 18.79-1.485 27.142-5.856v0l154.816-79.424c3.219-1.606 6.771-2.438 10.368-2.432 4.25 0.019 8.41 1.229 12.006 3.488 3.597 2.266 6.49 5.491 8.346 9.312 2.739 5.459 3.219 11.776 1.344 17.581-1.882 5.811-5.978 10.643-11.392 13.459l-144.064 73.792c-4.109 2.054-7.77 4.915-10.746 8.416-2.982 3.494-5.235 7.552-6.611 11.936-1.382 4.384-1.862 9.005-1.421 13.574 0.442 4.576 1.798 9.011 3.994 13.050 19.558 33.267 33.485 69.53 41.216 107.328 1.35 7.706 5.344 14.694 11.283 19.776 5.946 5.082 13.472 7.93 21.293 8.064h116.48c5.907 0.314 11.475 2.88 15.546 7.174s6.342 9.984 6.342 15.898c0 5.92-2.272 11.61-6.342 15.904s-9.638 6.86-15.546 7.171h0.064zM508.385 758.499c20.838 1.030 41.491-4.329 59.2-15.36 23.379-14.010 41.12-35.754 50.157-61.468s8.794-53.778-0.685-79.332c-2.56-2.88-8.192-9.856-24.384-4.544-26.272 7.297-53.376 11.19-80.64 11.584-24.648-0.414-49.159-3.744-73.024-9.92-21.504-4.992-30.272 2.112-33.216 6.4-4.998 11.868-7.733 24.566-8.064 37.44-0.027 29.729 11.441 58.317 32.004 79.786s48.63 34.159 78.332 35.414h0.32zM236.385 328.419c6.901 27.297 18.886 53.048 35.328 75.904 21.074 37.431 50.733 69.325 86.537 93.057s76.732 38.626 119.415 43.455c1.51 0.135 3.031-0.049 4.465-0.54s2.749-1.278 3.859-2.31c1.11-1.032 1.991-2.285 2.586-3.68s0.89-2.898 0.866-4.413v-539.011c0.016-2.438-0.486-4.851-1.472-7.078s-2.435-4.224-4.25-5.85c-1.815-1.632-3.955-2.854-6.279-3.59-2.323-0.742-4.777-0.973-7.199-0.698-39.544 6.138-77.366 20.48-111.036 42.112-33.67 21.626-62.442 50.061-84.467 83.469-22.025 33.414-36.815 71.059-43.421 110.528s-4.879 79.884 5.068 118.646v0zM787.233 185.632c-6.835-27.296-18.778-53.050-35.2-75.904-20.422-36.269-48.858-67.392-83.142-90.995s-73.51-39.059-114.682-45.197c-2.451-0.25-4.922 0.019-7.258 0.787-2.336 0.774-4.486 2.035-6.298 3.699-1.818 1.664-3.258 3.693-4.23 5.952s-1.453 4.704-1.414 7.162v539.587c0 1.399 0.294 2.782 0.864 4.061s1.395 2.424 2.432 3.364c1.037 0.94 2.259 1.653 3.584 2.094 1.331 0.44 2.733 0.599 4.128 0.465 40.237-5.196 78.912-18.87 113.472-40.119s64.224-49.589 87.021-83.148c22.797-33.559 38.214-71.574 45.235-111.532s5.485-80.954-4.512-120.275z" />
+<glyph unicode="&#xe947;" glyph-name="chain-broken" data-tags="bw-chain-broken" d="M307.296 363.982c-8.48 0.019-16.605 3.402-22.592 9.407l-252.992 252.993c-19.386 18.156-30.788 43.254-31.712 69.798s8.707 52.374 26.784 71.834l101.44 101.376c19.504 17.997 45.343 27.535 71.862 26.527s51.56-12.479 69.642-31.903l252.735-252.928c5.83-6.036 9.056-14.119 8.979-22.509-0.070-8.39-3.437-16.416-9.37-22.349s-13.958-9.299-22.348-9.372c-8.39-0.073-16.474 3.153-22.509 8.982l-252.736 253.376c-6.154 7.403-14.972 12.089-24.552 13.047s-19.15-1.89-26.648-7.927l-101.184-101.696c-6.045-7.491-8.903-17.057-7.957-26.636s5.62-18.402 13.013-24.564l252.8-252.8c4.487-4.476 7.544-10.183 8.783-16.397s0.605-12.658-1.821-18.513c-2.426-5.854-6.537-10.856-11.81-14.371s-11.471-5.386-17.808-5.375v0zM830.054-127.987c-28.582 0.179-55.923 11.686-76.032 32l-254.787 255.36c-5.829 6.035-9.055 14.118-8.982 22.509s3.439 16.416 9.372 22.349c5.933 5.933 13.962 9.299 22.346 9.37 8.39 0.077 16.474-3.149 22.515-8.979l254.784-254.976c6.125-7.411 14.906-12.141 24.467-13.184 9.562-1.037 19.149 1.69 26.733 7.616l101.504 101.504c5.856 7.603 8.55 17.178 7.514 26.72s-5.728 18.31-13.082 24.48l-254.656 255.231c-6.003 6.009-9.37 14.155-9.363 22.646s3.386 16.634 9.395 22.634c6.003 6.001 14.15 9.368 22.643 9.362s16.634-3.385 22.637-9.394l254.656-254.975c19.59-18.131 31.194-43.29 32.262-69.958 1.069-26.675-8.486-52.678-26.566-72.314l-101.696-101.184c-8.634-8.589-18.88-15.379-30.15-19.981s-23.341-6.925-35.514-6.835v0zM725.222 542.608c-4.461-0.026-8.832 1.28-12.544 3.752s-6.605 5.996-8.301 10.121c-1.702 4.125-2.125 8.663-1.229 13.033s3.078 8.372 6.266 11.494l140.032 140.096c4.198 4.243 9.914 6.644 15.885 6.674s11.712-2.313 15.955-6.514c4.243-4.201 6.643-9.916 6.675-15.887 0.026-5.971-2.317-11.71-6.515-15.953l-140.352-140.224c-2.074-2.099-4.55-3.762-7.27-4.894-2.726-1.132-5.651-1.709-8.602-1.698zM614.886 600.458c-1.946-0.028-3.891 0.231-5.76 0.768-2.848 0.758-5.517 2.070-7.859 3.86-2.336 1.791-4.301 4.025-5.773 6.575s-2.432 5.366-2.816 8.287c-0.384 2.921-0.192 5.889 0.576 8.733l51.2 191.424c1.542 5.737 5.306 10.626 10.451 13.59 5.152 2.965 11.264 3.762 17.005 2.218 5.734-1.545 10.624-5.305 13.587-10.454 2.97-5.149 3.763-11.265 2.221-17.002l-51.2-191.424c-1.274-4.763-4.083-8.971-7.994-11.969-3.917-2.998-8.71-4.618-13.638-4.607v0zM795.43 424.78c-5.459-0.049-10.739 1.901-14.861 5.481-4.115 3.58-6.778 8.543-7.488 13.953s0.589 10.892 3.642 15.411c3.059 4.52 7.661 7.765 12.947 9.123l191.232 51.2c2.842 0.81 5.811 1.041 8.749 0.681 2.931-0.361 5.76-1.306 8.32-2.78s4.8-3.447 6.586-5.802c1.779-2.355 3.072-5.044 3.802-7.907 1.523-5.745 0.71-11.861-2.266-17.007s-7.866-8.904-13.606-10.449l-191.232-51.2c-1.901-0.512-3.859-0.749-5.824-0.704zM162.777 21.517c-5.921-0.006-11.614 2.285-15.872 6.4-2.113 2.093-3.79 4.589-4.935 7.334s-1.734 5.69-1.734 8.666c0 2.976 0.589 5.92 1.734 8.666 1.145 2.752 2.822 5.242 4.935 7.334l140.032 140.096c4.201 4.205 9.899 6.56 15.84 6.56s11.639-2.355 15.84-6.56c4.201-4.198 6.561-9.894 6.561-15.84 0-5.939-2.36-11.635-6.561-15.84l-139.712-140.288c-2.119-2.106-4.637-3.77-7.406-4.89s-5.734-1.677-8.722-1.638v0zM374.182-99.955c-1.948-0.026-3.888 0.23-5.76 0.768-2.847 0.762-5.516 2.074-7.855 3.866-2.339 1.786-4.302 4.026-5.776 6.573s-2.431 5.37-2.816 8.288c-0.384 2.918-0.189 5.888 0.575 8.73l51.2 191.296c0.705 2.906 1.983 5.632 3.758 8.032s4.013 4.422 6.58 5.946c2.568 1.523 5.414 2.515 8.371 2.925s5.966 0.218 8.85-0.55c2.884-0.774 5.584-2.112 7.942-3.942 2.358-1.837 4.326-4.115 5.789-6.72 1.463-2.598 2.391-5.472 2.73-8.435 0.339-2.97 0.081-5.971-0.757-8.838l-51.2-191.36c-1.271-4.762-4.083-8.966-7.996-11.968-3.912-2.995-8.707-4.614-13.636-4.608v0zM40.167 229.389c-5.461-0.064-10.757 1.875-14.886 5.446-4.129 3.578-6.806 8.544-7.523 13.958s0.574 10.901 3.63 15.428c3.056 4.527 7.665 7.777 12.955 9.136l191.232 51.2c2.841 0.819 5.818 1.057 8.753 0.701s5.768-1.3 8.331-2.776c2.563-1.475 4.801-3.452 6.584-5.811s3.070-5.053 3.788-7.922c1.528-5.736 0.723-11.844-2.24-16.989s-7.84-8.908-13.568-10.467l-191.296-51.201c-1.876-0.512-3.816-0.749-5.76-0.704v0z" />
+<glyph unicode="&#xe948;" glyph-name="dashboard" data-tags="bw-dashboard" d="M512.254 768.036c-138.102-2.575-269.549-59.803-365.526-159.139s-148.65-232.673-146.474-370.78c-0.232-75.341 15.29-149.894 45.568-218.88 3.561-7.52 9.908-13.35 17.697-16.269s16.406-2.688 24.028 0.64c7.622 3.328 13.648 9.498 16.803 17.19s3.189 16.314 0.097 24.038c-26.711 60.877-40.401 126.669-40.192 193.152 0 1.664 0 3.327 0 5.055h75.392c5.941 0 11.638 2.36 15.839 6.561s6.561 9.898 6.561 15.839c0 5.94-2.36 11.638-6.561 15.839s-9.898 6.561-15.839 6.561h-72.768c8.288 81.057 37.389 158.595 84.48 225.088l40.704-42.24c4.236-3.734 9.725-5.73 15.37-5.59s11.027 2.407 15.072 6.347c4.045 3.939 6.452 9.261 6.741 14.9s-1.562 11.178-5.183 15.511l-44.8 46.72c38.625 45.405 86.072 82.49 139.462 109.004s111.612 41.904 171.13 45.236v-53.76c0.428-5.649 2.973-10.927 7.126-14.778s9.61-5.992 15.274-5.992c5.667 0 11.119 2.14 15.273 5.992s6.701 9.13 7.13 14.778v53.76c57.862-3.204 114.522-17.82 166.714-43.005 52.198-25.186 98.899-60.444 137.414-103.747l-53.696-55.744c-3.533-4.344-5.312-9.853-4.986-15.443s2.733-10.854 6.746-14.757c4.013-3.902 9.344-6.16 14.944-6.327 5.594-0.168 11.053 1.767 15.296 5.423l49.984 51.84c50.419-68.232 81.581-148.755 90.24-233.152h-74.88c-2.944 0-5.856-0.58-8.576-1.706-2.714-1.125-5.184-2.776-7.264-4.856s-3.731-4.549-4.858-7.267c-1.126-2.718-1.702-5.631-1.702-8.572s0.576-5.855 1.702-8.572c1.126-2.718 2.778-5.187 4.858-7.267s4.55-3.73 7.264-4.856c2.72-1.126 5.632-1.705 8.576-1.705h77.312c0-1.728 0-3.391 0-5.055-1.306-66.528-14.643-132.269-39.36-194.048-3.194-7.853-3.136-16.646 0.154-24.461 3.283-7.808 9.536-13.997 17.382-17.203 3.891-1.594 8.058-2.4 12.256-2.374 4.205 0.019 8.365 0.87 12.237 2.496 3.878 1.632 7.392 4.006 10.349 6.995 2.957 2.982 5.299 6.528 6.886 10.419 27.936 69.408 42.886 143.36 44.096 218.176 2.189 138.032-50.406 271.309-146.272 370.644s-227.194 156.63-365.219 159.339v0zM515.264 303.137c-0.365 0.031-0.73 0.031-1.088 0l-145.409 161.92c-4.018 4.212-9.517 6.694-15.333 6.922s-11.492-1.818-15.827-5.703c-4.334-3.885-6.986-9.305-7.394-15.111s1.461-11.544 5.21-15.996l148.928-166.4c0.582-5.997 2.895-11.697 6.655-16.404s8.808-8.222 14.528-10.116c5.72-1.894 11.868-2.085 17.692-0.55 5.83 1.534 11.085 4.728 15.13 9.192 4.051 4.465 6.707 10.009 7.667 15.958 0.954 5.949 0.16 12.048-2.285 17.555-2.451 5.507-6.445 10.184-11.494 13.465-5.056 3.28-10.957 5.021-16.979 5.012v0.256z" />
+<glyph unicode="&#xe949;" glyph-name="envelope" data-tags="bw-envelope" d="M916.801 736h-809.538c-28.449 0-55.731-11.301-75.847-31.417s-31.417-47.398-31.417-75.847v-489.537c0-14.080 2.774-28.026 8.166-41.037s13.293-24.832 23.255-34.784c9.961-9.958 21.786-17.85 34.799-23.238 13.014-5.382 26.961-8.147 41.044-8.141h809.538c14.074 0 28.013 2.771 41.024 8.16 13.005 5.389 24.819 13.286 34.778 23.238 9.952 9.958 17.85 21.773 23.238 34.778 5.382 13.005 8.16 26.95 8.16 41.024v489.537c0.006 14.083-2.758 28.030-8.141 41.043-5.389 13.014-13.28 24.839-23.238 34.8-9.952 9.962-21.773 17.864-34.784 23.255s-26.957 8.166-41.037 8.166v0zM705.601 440.32l236.352 170.24c1.683 1.197 3.661 1.908 5.722 2.056s4.122-0.274 5.958-1.219c1.837-0.945 3.379-2.376 4.454-4.138s1.651-3.786 1.658-5.852v-417.345c-0.019-2.214-0.698-4.378-1.946-6.208s-3.008-3.251-5.069-4.083c-2.054-0.832-4.307-1.030-6.477-0.576-2.176 0.454-4.16 1.542-5.709 3.123l-235.968 247.105c-1.126 1.146-1.99 2.518-2.541 4.024s-0.774 3.114-0.653 4.714c0.122 1.599 0.582 3.155 1.357 4.562 0.768 1.407 1.83 2.633 3.117 3.596h-0.256zM916.801 647.616l-373.888-269.504c-9.088-6.559-20.026-10.058-31.233-9.989s-22.1 3.702-31.105 10.373l-368.064 271.232c-1.954 1.355-3.423 3.299-4.193 5.549s-0.799 4.686-0.083 6.954c0.715 2.268 2.137 4.246 4.058 5.647s4.24 2.15 6.618 2.138c136.96 0.512 655.874 0 792.258-2.176 2.31-0.122 4.525-0.963 6.336-2.403 1.818-1.441 3.13-3.411 3.776-5.635 0.64-2.225 0.57-4.594-0.198-6.778s-2.202-4.074-4.090-5.407h-0.192zM63.999 178.559v429.185c-0.001 2.081 0.576 4.122 1.665 5.895s2.648 3.211 4.504 4.152c1.856 0.941 3.937 1.35 6.011 1.181s4.061-0.909 5.74-2.14l240.704-177.472c1.284-0.942 2.353-2.148 3.135-3.536s1.258-2.927 1.397-4.515c0.139-1.587-0.062-3.186-0.589-4.689s-1.37-2.877-2.47-4.029l-240.768-251.777c-1.544-1.626-3.541-2.752-5.733-3.232s-4.477-0.294-6.561 0.544c-2.083 0.832-3.867 2.272-5.121 4.134s-1.921 4.058-1.913 6.298v0zM104.127 100.671c-2.226 0-4.401 0.666-6.243 1.914s-3.27 3.021-4.097 5.088c-0.826 2.067-1.015 4.333-0.541 6.509s1.588 4.154 3.201 5.69l272.384 284.801v0.64l91.84-67.712c14.695-10.899 32.479-16.836 50.775-16.952s36.152 5.598 50.987 16.312l88.32 63.616c2.189 1.584 4.883 2.321 7.578 2.074s5.21-1.461 7.078-3.418l265.728-277.825c1.581-1.549 2.662-3.526 3.123-5.69 0.454-2.163 0.256-4.416-0.563-6.47s-2.234-3.814-4.058-5.069c-1.818-1.254-3.974-1.939-6.182-1.971-125.504-2.88-692.482-3.456-819.33-1.536v0z" />
+<glyph unicode="&#xe94a;" glyph-name="exclamation-circle" data-tags="bw-exclamation-circle" d="M512-127.999c-101.264 0-200.254 30.029-284.452 86.285-84.198 56.262-149.822 136.224-188.574 229.779-38.752 93.558-48.892 196.504-29.136 295.822s68.519 190.548 140.124 262.152c71.604 71.604 162.834 120.368 262.152 140.123s202.267 9.616 295.822-29.136c93.555-38.752 173.517-104.377 229.779-188.574 56.256-84.198 86.285-183.188 86.285-284.452-0.154-135.744-54.144-265.888-150.131-361.869-95.981-95.987-226.125-149.978-361.869-150.131zM512 832.001c-88.606 0-175.222-26.275-248.895-75.502s-131.094-119.195-165.002-201.056c-33.908-81.861-42.78-171.939-25.494-258.843s59.954-166.73 122.608-229.386c62.653-62.65 142.479-105.318 229.383-122.605s176.981-8.416 258.844 25.491c81.862 33.914 151.827 91.334 201.056 165.005s75.501 160.29 75.501 248.896c-0.154 118.77-47.398 232.632-131.386 316.615-83.981 83.983-197.843 131.232-316.614 131.385zM512 257.668c-8.487 0-16.627 3.372-22.627 9.373s-9.373 14.14-9.373 22.627v383.552c0 8.487 3.372 16.627 9.373 22.628s14.14 9.372 22.627 9.372c8.486 0 16.627-3.372 22.63-9.372 5.997-6.001 9.37-14.141 9.37-22.628v-383.552c0-8.487-3.373-16.626-9.37-22.627-6.003-6.001-14.144-9.373-22.63-9.373zM511.999 62.785c20.961 0 37.953 16.992 37.953 37.952s-16.992 37.952-37.953 37.952c-20.96 0-37.952-16.992-37.952-37.952s16.992-37.952 37.952-37.952z" />
+<glyph unicode="&#xe94b;" glyph-name="exclamation-triangle" data-tags="bw-exclamation-triangle" d="M922.753-64.010h-821.505c-17.88-0.166-35.477 4.461-50.964 13.395-15.487 8.941-28.297 21.862-37.1 37.421-8.746 15.059-13.3 32.179-13.187 49.594s4.887 34.477 13.827 49.414l410.752 696.579c9.034 15.128 21.838 27.653 37.162 36.351s32.643 13.27 50.264 13.27c17.619 0 34.938-4.573 50.259-13.27 15.328-8.698 28.128-21.222 37.165-36.351l410.752-696.579c8.941-14.938 13.715-32 13.824-49.414 0.115-17.414-4.442-34.534-13.184-49.594-8.806-15.558-21.613-28.48-37.101-37.421-15.488-8.934-33.088-13.562-50.963-13.395v0zM512.001 767.993c-6.506 0.096-12.922-1.529-18.597-4.71s-10.41-7.804-13.724-13.402l-410.688-696.579c-3.147-5.248-4.81-11.251-4.81-17.376 0-6.118 1.663-12.122 4.81-17.376 3.263-5.715 8.001-10.458 13.72-13.722s12.209-4.934 18.792-4.838h821.249c6.586-0.096 13.075 1.574 18.79 4.838 5.722 3.264 10.458 8.006 13.722 13.722 3.149 5.254 4.806 11.258 4.806 17.376 0 6.125-1.658 12.128-4.806 17.376l-410.944 696.579c-3.315 5.599-8.051 10.222-13.728 13.402-5.67 3.181-12.090 4.806-18.592 4.71zM511.995 219.836c-8.487 0-16.627 3.366-22.627 9.37s-9.373 14.138-9.373 22.63v292.669c0 8.486 3.372 16.626 9.373 22.627s14.14 9.373 22.627 9.373c8.486 0 16.627-3.372 22.63-9.373 5.997-6.001 9.37-14.141 9.37-22.627v-292.669c0-8.493-3.373-16.627-9.37-22.63-6.003-6.003-14.144-9.37-22.63-9.37v0zM511.994 61.622c20.961 0 37.953 16.992 37.953 37.952 0 20.966-16.992 37.952-37.953 37.952s-37.952-16.986-37.952-37.952c0-20.96 16.992-37.952 37.952-37.952z" />
+<glyph unicode="&#xe94c;" glyph-name="caret-right" data-tags="bw-caret-right" d="M331.91-128.043c-9 0.013-17.927 1.619-26.368 4.736-13.271 4.666-24.774 13.318-32.932 24.774-8.159 11.462-12.572 25.165-12.636 39.226l-3.968 886.339c0.035 14.019 4.392 27.687 12.478 39.14s19.507 20.134 32.706 24.86c13.892 5.451 29.128 6.484 43.629 2.956s27.56-11.444 37.395-22.668l354.304-404.864c20.211-22.744 31.405-52.094 31.475-82.52s-10.989-59.827-31.091-82.664l-350.528-404.419c-6.744-7.834-15.103-14.112-24.505-18.413-9.402-4.294-19.622-6.509-29.959-6.483zM327.878 831.96c-1.4-0.012-2.787-0.272-4.096-0.768v-890.499c4.864-4.288 10.304-6.016 14.016-1.92l350.528 404.419c10.054 11.137 15.616 25.606 15.616 40.608s-5.562 29.471-15.616 40.608l-354.304 404.8c-0.76 0.881-1.704 1.584-2.765 2.060s-2.215 0.712-3.379 0.692v0z" />
+<glyph unicode="&#xe94d;" glyph-name="facebook" data-tags="bw-facebook" d="M967.468 896h-910.935c-31.232 0-56.533-25.301-56.533-56.533v-910.974c0-31.194 25.301-56.493 56.533-56.493h490.454v396.544h-133.462v154.539h133.462v113.962c0 132.267 80.768 204.288 198.786 204.288 56.531 0 105.088-4.224 119.251-6.101v-138.24l-81.837-0.043c-64.166 0-76.582-30.506-76.582-75.221v-98.688h153.043l-19.923-154.539h-133.12v-396.501h260.947c31.149 0 56.448 25.299 56.448 56.531v910.935c0 31.232-25.299 56.533-56.531 56.533v0z" />
+<glyph unicode="&#xe94e;" glyph-name="file-pdf" data-tags="bw-file-pdf" d="M941.952 589.951l-278.080 286.848c-5.99 6.109-13.139 10.955-21.030 14.253s-16.365 4.98-24.922 4.947h-489.92c-16.974 0-33.252-6.743-45.255-18.745s-18.745-28.281-18.745-45.255v-895.999c0-16.973 6.743-33.254 18.745-45.254 12.003-12.006 28.281-18.746 45.255-18.746h768c16.973 0 33.254 6.739 45.254 18.746 12 12 18.746 28.282 18.746 45.254v609.343c0.013 16.651-6.458 32.653-18.048 44.608v0zM653.632 764.799c0.013 2.45 0.749 4.841 2.125 6.869s3.322 3.602 5.594 4.522c2.272 0.919 4.762 1.142 7.162 0.641 2.394-0.501 4.589-1.704 6.304-3.456l173.632-179.2c1.677-1.741 2.81-3.937 3.251-6.316 0.448-2.378 0.179-4.834-0.762-7.063s-2.515-4.132-4.525-5.475c-2.016-1.342-4.378-2.063-6.797-2.075h-153.984c-8.486 0-16.627 3.372-22.63 9.373-5.997 6.001-9.37 14.14-9.37 22.627v159.552zM896-32c0-8.486-3.373-16.627-9.37-22.63-6.003-5.997-14.144-9.37-22.63-9.37h-704c-8.487 0-16.627 3.373-22.627 9.37-6.001 6.003-9.373 14.144-9.373 22.63v831.999c0 8.487 3.372 16.627 9.373 22.628s14.14 9.372 22.627 9.372h397.632c8.486 0 16.627-3.372 22.63-9.372 5.997-6.001 9.37-14.141 9.37-22.628v-194.56c0-25.46 10.112-49.878 28.115-67.882s42.426-28.118 67.885-28.118h178.368c8.486 0 16.627-3.372 22.63-9.372 5.997-6.001 9.37-14.141 9.37-22.628v-509.439zM707.206 198.4c-13.434-3.034-27.334-3.36-40.896-0.96-17.824 2.694-35.187 7.866-51.584 15.36 24.768 4.806 50.342 3.398 74.432-4.096 6.432-2.643 12.499-6.106 18.048-10.304v0zM536.838 226.432l-3.648-0.96c-8.256-2.24-16.256-4.416-23.935-6.4l-10.368-2.624c-20.928-5.312-42.24-10.688-63.36-17.152 8 19.2 15.488 38.912 22.784 58.051 5.376 14.144 10.88 28.608 16.576 42.88 2.944-4.8 5.952-9.6 9.088-14.4 14.699-22.217 32.499-42.218 52.863-59.395v0zM483.719 444.803c0.74-23.452-3.108-46.823-11.328-68.8-11.318 26.090-12.324 55.501-2.816 82.304 1.917 3.96 4.567 7.521 7.808 10.496 3.991-7.386 6.184-15.608 6.4-24h-0.064zM374.983 142.592c-5.248-9.408-10.56-18.112-16.064-26.368-13.184-19.904-34.752-41.216-45.824-41.216-0.849 0.013-1.683 0.224-2.438 0.614-0.755 0.384-1.41 0.947-1.914 1.626-0.505 0.429-0.898 0.973-1.143 1.587s-0.337 1.28-0.265 1.933c4.422 13.075 12.868 24.41 24.128 32.384 13.385 11.379 27.979 21.254 43.52 29.44v0zM742.854 197.696c-1.728 24.384-42.688 40-43.136 40.128-16.915 5.824-34.72 8.659-52.608 8.384-24.474-0.454-48.806-3.763-72.512-9.856-25.53 17.984-47.488 40.553-64.767 66.563-7.36 11.2-13.952 22.4-19.712 33.344 16.532 34.404 24.876 72.168 24.383 110.336-1.856 32.448-16.447 54.272-36.415 54.272-13.632 0-25.6-10.112-34.944-30.080-8.141-22.147-11.172-45.848-8.867-69.332s9.887-46.143 22.179-66.284c-9.344-21.888-18.048-44.8-26.432-66.624-10.432-27.331-21.184-55.555-33.28-82.435-31.021-11.667-59.844-28.499-85.248-49.792-17.947-12.998-30.333-32.282-34.688-54.016-0.275-4.787 0.447-9.581 2.122-14.074 1.674-4.499 4.265-8.595 7.606-12.038 3.361-3.68 7.453-6.63 12.015-8.646s9.494-3.059 14.481-3.066c33.28 0 65.28 45.696 71.36 54.848 13.098 20.026 24.734 40.96 34.816 62.656 28.224 10.176 58.304 17.792 87.488 25.152l10.431 2.688c7.872 1.984 16 4.16 24.384 6.4s17.92 4.864 27.2 7.232c28.307-18.413 60.16-30.688 93.504-36.032 22.099-4.525 45.043-2.291 65.856 6.4 4.57 1.933 8.442 5.222 11.085 9.421 2.643 4.205 3.936 9.114 3.699 14.067z" />
+<glyph unicode="&#xe94f;" glyph-name="file-text" data-tags="bw-file-text" d="M704.314 398.656h-384.32c-5.94 0-11.638-2.36-15.839-6.561s-6.561-9.898-6.561-15.839c0-5.94 2.36-11.638 6.561-15.839s9.899-6.561 15.839-6.561h384.64c5.939 0 11.642 2.36 15.84 6.561s6.56 9.898 6.56 15.839c0 5.941-2.362 11.638-6.56 15.839s-9.901 6.561-15.84 6.561h-0.32zM704.314 261.891h-384.32c-5.94 0-11.638-2.36-15.839-6.563-4.2-4.198-6.561-9.894-6.561-15.84 0-5.939 2.36-11.635 6.561-15.834 4.201-4.205 9.899-6.566 15.839-6.566h384.64c5.939 0 11.642 2.362 15.84 6.566 4.198 4.198 6.56 9.894 6.56 15.834 0 5.946-2.362 11.642-6.56 15.84-4.198 4.203-9.901 6.563-15.84 6.563h-0.32zM704.314 125.056h-384.32c-5.94 0-11.638-2.362-15.839-6.56-4.2-4.205-6.561-9.901-6.561-15.84s2.36-11.642 6.561-15.84c4.201-4.198 9.899-6.56 15.839-6.56h384.64c5.939 0 11.642 2.362 15.84 6.56s6.56 9.901 6.56 15.84c0 5.939-2.362 11.635-6.56 15.84-4.198 4.198-9.901 6.56-15.84 6.56h-0.32zM941.952 589.951l-278.080 286.848c-5.99 6.109-13.139 10.955-21.030 14.253s-16.365 4.98-24.922 4.947h-489.92c-16.974 0-33.252-6.743-45.255-18.745s-18.745-28.281-18.745-45.255v-895.999c0-16.973 6.743-33.254 18.745-45.254 12.003-12.006 28.281-18.746 45.255-18.746h768c16.973 0 33.254 6.739 45.254 18.746 12 12 18.746 28.282 18.746 45.254v609.343c0.013 16.651-6.458 32.653-18.048 44.608v0zM653.632 764.799c0.013 2.45 0.749 4.841 2.125 6.869s3.322 3.602 5.594 4.522c2.272 0.919 4.762 1.142 7.162 0.641 2.394-0.501 4.589-1.704 6.304-3.456l173.632-179.2c1.677-1.741 2.81-3.937 3.251-6.316 0.448-2.378 0.179-4.834-0.762-7.063s-2.515-4.132-4.525-5.475c-2.016-1.342-4.378-2.063-6.797-2.075h-153.984c-8.486 0-16.627 3.372-22.63 9.373-5.997 6.001-9.37 14.14-9.37 22.627v159.552zM896-32c0-8.486-3.373-16.627-9.37-22.63-6.003-5.997-14.144-9.37-22.63-9.37h-704c-8.487 0-16.627 3.373-22.627 9.37-6.001 6.003-9.373 14.144-9.373 22.63v831.999c0 8.487 3.372 16.627 9.373 22.628s14.14 9.372 22.627 9.372h397.632c8.486 0 16.627-3.372 22.63-9.372 5.997-6.001 9.37-14.141 9.37-22.628v-194.56c0-25.46 10.112-49.878 28.115-67.882s42.426-28.118 67.885-28.118h178.368c8.486 0 16.627-3.372 22.63-9.372 5.997-6.001 9.37-14.141 9.37-22.628v-509.439z" />
+<glyph unicode="&#xe950;" glyph-name="github" data-tags="bw-github" d="M512 883.376c-282.709 0-512-229.248-512-512 0-226.221 146.688-418.131 350.165-485.843 25.558-4.736 33.835 11.136 33.835 24.614v95.322c-142.421-30.976-172.075 60.416-172.075 60.416-23.296 59.174-56.874 74.918-56.874 74.918-46.464 31.789 3.541 31.104 3.541 31.104 51.413-3.584 78.464-52.774 78.464-52.774 45.653-78.253 119.765-55.642 148.992-42.541 4.565 33.069 17.835 55.68 32.512 68.435-113.707 13.018-233.259 56.922-233.259 253.058 0 55.936 20.011 101.59 52.736 137.43-5.29 12.928-22.826 65.024 4.992 135.509 0 0 43.008 13.739 140.843-52.48 40.832 11.349 84.608 17.024 128.128 17.237 43.52-0.213 87.339-5.888 128.256-17.237 97.747 66.219 140.672 52.48 140.672 52.48 27.859-70.528 10.323-122.624 5.037-135.509 32.851-35.84 52.691-81.536 52.691-137.43 0-196.648-119.763-239.957-233.771-252.629 18.347-15.872 35.115-47.021 35.115-94.803v-140.506c0-13.606 8.192-29.606 34.176-24.576 203.309 67.802 349.824 259.674 349.824 485.805 0 282.752-229.248 512-512 512z" />
+<glyph unicode="&#xe951;" glyph-name="google" data-tags="bw-google" d="M522.087 455.886h473.699c5.222-29.184 7.885-57.037 7.885-83.661 0-94.515-19.866-178.893-59.494-253.133s-96.154-132.301-169.574-174.080c-73.421-41.779-157.591-62.771-252.515-62.771-68.403 0-133.53 13.21-195.379 39.526s-115.2 61.952-160.051 106.803c-44.851 44.851-80.486 98.202-106.803 160.051s-39.526 126.976-39.526 195.379c0 68.403 13.21 133.53 39.526 195.379s61.952 115.2 106.803 160.051c44.851 44.851 98.201 80.486 160.051 106.803s126.976 39.526 195.379 39.526c130.659 0 242.787-43.725 336.483-131.277l-136.602-131.379c-53.555 51.814-120.214 77.722-199.882 77.722-56.218 0-108.134-14.131-155.853-42.496-47.718-28.262-85.504-66.765-113.357-115.302s-41.779-101.581-41.779-159.13c0-57.549 13.926-110.49 41.779-159.13s65.638-87.040 113.357-115.302c47.718-28.262 99.635-42.496 155.853-42.496 37.888 0 72.703 5.222 104.55 15.667 31.844 10.445 57.956 23.552 78.436 39.219s38.298 33.587 53.555 53.555c15.258 20.070 26.419 39.014 33.69 56.832 7.168 17.818 12.083 34.816 14.746 50.995h-284.976v172.646z" />
+<glyph unicode="&#xe952;" glyph-name="info-circle" data-tags="bw-info-circle" d="M512 52.475c-8.487 0-16.627 3.373-22.627 9.376s-9.373 14.138-9.373 22.624v384.003c0 8.486 3.372 16.626 9.373 22.627s14.14 9.373 22.627 9.373c8.486 0 16.627-3.372 22.63-9.373 5.997-6.001 9.37-14.141 9.37-22.627v-384.003c0-8.486-3.373-16.621-9.37-22.624-6.003-6.003-14.144-9.376-22.63-9.376zM511.999 611.902c20.961 0 37.953 16.991 37.953 37.952s-16.992 37.952-37.953 37.952c-20.96 0-37.952-16.992-37.952-37.952s16.992-37.952 37.952-37.952zM512-127.999c-101.264 0-200.254 30.029-284.452 86.285-84.198 56.262-149.822 136.224-188.574 229.779-38.752 93.558-48.892 196.504-29.136 295.822s68.519 190.548 140.124 262.152c71.604 71.604 162.834 120.368 262.152 140.123s202.267 9.616 295.822-29.136c93.555-38.752 173.517-104.377 229.779-188.574 56.256-84.198 86.285-183.188 86.285-284.452-0.154-135.744-54.144-265.888-150.131-361.869-95.981-95.987-226.125-149.978-361.869-150.131zM512 832.001c-88.606 0-175.222-26.275-248.895-75.502s-131.094-119.195-165.002-201.056c-33.908-81.861-42.78-171.939-25.494-258.843s59.954-166.73 122.608-229.386c62.653-62.65 142.479-105.318 229.383-122.605s176.981-8.416 258.844 25.491c81.862 33.914 151.827 91.334 201.056 165.005s75.501 160.29 75.501 248.896c-0.134 118.775-47.379 232.647-131.366 316.634s-197.856 131.23-316.634 131.366v0z" />
+<glyph unicode="&#xe953;" glyph-name="lightbulb" data-tags="bw-lightbulb" d="M754.055 796.598c-34.163 33.93-75.104 60.269-120.141 77.296-45.043 17.028-93.165 24.361-141.234 21.52-90.502-6.699-175.107-47.433-236.784-114.003s-95.847-154.031-95.632-244.781c-0.673-56.582 11.674-112.561 36.089-163.61s60.241-95.798 104.711-130.79c14.015-10.643 25.391-24.371 33.249-40.122s11.985-33.094 12.063-50.694v-165.248c-0.164-25.306 8.099-49.952 23.488-70.048 15.389-20.090 37.027-34.49 61.504-40.928l47.424-3.2h67.647l48.512 3.584c24.115 6.739 45.331 21.242 60.371 41.254 15.040 20.019 23.066 44.429 22.829 69.466v165.312c0.006 17.523 4.051 34.81 11.821 50.515s19.053 29.408 32.979 40.045c44.224 34.336 79.936 78.408 104.358 128.791 24.416 50.383 36.89 105.718 36.442 161.705 0.358 49.103-9.171 97.775-28.019 143.119-18.842 45.343-46.624 86.431-81.677 120.817v0zM340.36 296.503c-36.412 28.22-65.726 64.558-85.604 106.115s-29.772 87.185-28.892 133.244c-0.234 73.844 27.528 145.033 77.692 199.222s119.002 87.354 192.644 92.81c5.44 0 10.816 0.448 16.064 0.448 77.151-1.347 150.623-33.227 204.306-88.652s83.206-129.874 82.093-207.028c0.333-45.569-9.843-90.602-29.728-131.603-19.891-41-48.966-76.867-84.96-104.813-22.080-17.117-39.974-39.036-52.326-64.096-12.358-25.062-18.842-52.602-18.97-80.544v-47.296h-200.831v47.296c0.004 28.019-6.442 55.661-18.838 80.787-12.397 25.128-30.412 47.064-52.65 64.109v0zM612.679 48.694v-62.336c0.192-12.192-4.467-23.962-12.954-32.723s-20.102-13.792-32.294-13.997h-110.335c-12.193 0.205-23.808 5.235-32.292 13.997s-13.144 20.531-12.956 32.723v62.336h200.831z" />
+<glyph unicode="&#xe954;" glyph-name="link" data-tags="bw-link" d="M990.659 143.391l-239.296 239.296c-18.278 21.248-44.154 34.488-72.077 36.881s-55.674-6.252-77.299-24.081l-27.136-27.072-80.32 79.68 27.52 27.52c18.010 20.005 27.373 46.324 26.042 73.21s-13.248 52.15-33.146 70.278l-239.296 239.296c-18.221 21.325-44.096 34.632-72.041 37.051s-55.721-6.245-77.335-24.123l-101.504-101.504c-17.892-21.598-26.578-49.364-24.184-77.309s15.677-53.828 36.984-72.067l239.488-239.296c20.639-20.981 48.716-32.984 78.144-33.408v0c12.116-0.164 24.144 2.082 35.384 6.609s21.468 11.244 30.088 19.759l28.736 28.736 80.064-79.616-29.056-29.12c-9.584-9.951-16.755-21.969-20.96-35.13-4.205-13.158-5.333-27.11-3.296-40.774 3.894-27.923 16.951-53.766 37.12-73.472l239.296-239.296c20.653-20.986 48.768-32.947 78.208-33.28 12.077-0.147 24.058 2.093 35.264 6.598 11.2 4.499 21.402 11.181 30.016 19.642l101.568 101.504c17.997 20.006 27.36 46.304 26.048 73.178-1.306 26.88-13.171 52.147-33.024 70.31v0zM375.235 419.423c-2.668-2.532-5.813-4.51-9.252-5.818s-7.103-1.919-10.78-1.798c-12.447 0.394-24.25 5.629-32.896 14.592l-239.296 239.36c-21.12 21.12-23.808 47.936-12.8 58.816l101.312 101.44c4.89 4.422 11.334 6.724 17.92 6.4 15.607-0.851 30.272-7.735 40.896-19.2l239.36-239.296c7.707-6.271 12.728-15.249 14.036-25.099s-1.194-19.827-6.996-27.893l-27.712-27.712-48 47.552c-2.911 3.277-6.463 5.921-10.437 7.769s-8.286 2.858-12.667 2.971c-4.381 0.113-8.739-0.676-12.803-2.317s-7.747-4.099-10.822-7.222c-3.075-3.123-5.475-6.845-7.052-10.934s-2.298-8.458-2.117-12.838c0.18-4.379 1.26-8.674 3.169-12.619s4.608-7.456 7.93-10.315l47.744-47.296-28.736-28.544zM952.451 45.151l-101.504-101.44c-8.058-5.702-17.984-8.122-27.763-6.784-9.779 1.344-18.682 6.355-24.909 14.016l-239.36 239.36c-10.022 9.658-16.646 22.298-18.88 36.032-0.742 4.006-0.589 8.128 0.454 12.064 1.037 3.942 2.938 7.603 5.562 10.72l29.312 29.312 38.976-38.4c2.95-2.944 6.451-5.274 10.31-6.854 3.853-1.581 7.987-2.387 12.154-2.362 6.342 0 12.538 1.888 17.805 5.414s9.363 8.544 11.776 14.406c2.419 5.862 3.034 12.307 1.779 18.52s-4.333 11.915-8.832 16.379l-38.4 38.4 26.88 26.88c4.89 4.422 11.334 6.724 17.92 6.4 15.622-0.867 30.298-7.748 40.96-19.2l238.784-239.872c7.699-6.278 12.704-15.264 14.003-25.114 1.293-9.85-1.216-19.821-7.027-27.878v0z" />
+<glyph unicode="&#xe955;" glyph-name="linkedin" data-tags="bw-linkedin" d="M810.669 896h-597.336c-117.802 0-213.333-95.531-213.333-213.333v-597.336c0-117.798 95.531-213.331 213.333-213.331h597.336c117.843 0 213.331 95.533 213.331 213.331v597.336c0 117.802-95.488 213.333-213.331 213.333zM341.333 85.331h-128v469.336h128v-469.336zM277.333 608.768c-41.216 0-74.666 33.707-74.666 75.264s33.45 75.264 74.666 75.264c41.216 0 74.667-33.707 74.667-75.264s-33.408-75.264-74.667-75.264zM853.331 85.331h-128v239.106c0 143.702-170.664 132.822-170.664 0v-239.106h-128v469.336h128v-75.307c59.562 110.336 298.664 118.485 298.664-105.643v-288.386z" />
+<glyph unicode="&#xe956;" glyph-name="linux" data-tags="bw-linux" d="M497.002 637.419c0-3.282-3.283-3.282-3.283-3.282h-3.282c-3.282 0-3.282 3.282-6.564 6.564 0 0-3.283 3.282-3.283 6.564s0.001 3.282 3.283 3.282l6.564-3.282c3.282-3.282 6.564-6.564 6.564-9.846zM437.925 670.24c0 16.41-6.564 26.256-16.41 26.256 0 0 0-3.282-3.282-3.282v-6.564h9.846c0-6.564 3.282-9.846 3.282-16.41h6.564zM552.797 686.65c6.564 0 9.846-6.564 13.128-16.41h6.564c-3.282 3.282-3.282 6.564-3.282 9.846s0 6.564-3.282 9.846c-3.282 3.282-6.564 6.564-9.846 6.564 0 0-3.282-3.282-6.564-3.282 0-3.282 3.282-3.282 3.282-6.564zM454.335 634.137c-3.282 0-3.282 0-3.282 3.282s0 6.564 3.282 9.846c6.564 0 9.846 3.282 9.846 3.282 3.283 0 3.283-3.282 3.283-3.282 0-3.282-3.283-6.564-9.846-13.128h-3.282zM418.233 637.419c-13.128 6.564-16.41 16.411-16.41 32.821 0 9.846-0.001 16.41 6.564 22.974 3.282 6.564 9.846 9.846 16.41 9.846s9.846-3.283 16.41-9.846c3.282-9.846 6.564-19.692 6.564-29.539v-6.564h3.283v3.282c3.282 0 3.282 6.564 3.282 19.692 0 9.846 0 19.692-6.564 29.539s-13.128 16.41-26.256 16.41c-9.846 0-19.693-6.564-22.975-16.41-6.564-13.128-7.876-22.974-7.876-39.384 0-13.128 4.595-26.257 17.723-39.385 3.282 3.282 6.564 3.282 9.846 6.564zM828.487 174.648c3.283 0 3.283 1.312 3.283 4.269 0 7.219-3.283 15.75-13.126 25.274-9.85 9.843-26.259 16.077-45.952 18.707-3.283 0.326-6.56 0.326-6.56 0.326-3.283 0.659-3.283 0.659-6.566 0.659-3.283 0.326-9.843 0.979-13.126 1.638 9.843 30.522 13.126 57.436 13.126 81.066 0 32.82-6.566 55.795-19.693 75.487s-26.256 29.539-42.666 32.82c-3.282-3.282-3.282-3.282-3.282-6.564 16.41-6.564 32.822-19.692 42.665-39.385 9.85-22.974 13.133-42.666 13.133-65.641 0-18.38-3.283-45.62-16.416-80.408-13.126-5.254-26.253-17.395-36.1-36.435 0-2.95 0-4.595 3.282-4.595 0 0 3.283 2.957 6.564 8.538 6.564 5.581 9.844 11.155 16.41 16.736 9.843 5.581 16.41 8.538 26.259 8.538 16.41 0 32.819-2.298 42.662-6.893 13.133-4.269 19.693-8.864 22.976-14.118 3.283-4.922 6.566-9.517 9.843-13.779 0-4.269 3.283-6.24 3.283-6.24v0zM526.54 650.547c-3.282 3.283-3.282 9.846-3.282 16.41 0 13.128 0 19.693 6.564 29.539 6.564 6.564 13.128 9.846 19.692 9.846 9.846 0 16.41-6.564 22.974-13.128 3.282-9.846 6.564-16.41 6.564-26.257 0-16.41-6.564-26.256-19.693-29.539 0 0 3.283-3.282 6.564-3.282 6.564 0 9.846-3.282 16.41-6.564 3.282 19.692 6.564 32.82 6.564 49.231 0 19.692-3.282 32.82-9.846 42.667-9.846 9.846-19.693 13.128-32.82 13.128-9.846 0-19.693-3.282-29.539-9.846-6.564-9.846-9.846-16.41-9.846-26.257 0-16.41 3.282-29.539 9.846-42.666 3.282 0 6.564-3.283 9.846-3.283zM565.925 598.035c-42.667-29.539-75.487-42.667-101.744-42.667-22.974 0-45.948 9.846-65.641 26.257 3.282-6.564 6.564-13.128 9.846-16.41l19.692-19.692c13.128-13.128 29.539-19.692 45.949-19.692 22.975 0 49.231 13.128 82.051 36.102l29.539 19.692c6.564 6.564 13.128 13.128 13.128 22.974 0 3.283 0 6.564-3.282 6.564-3.282 6.564-19.693 16.41-52.513 26.256-29.538 13.128-52.513 19.693-65.641 19.693-9.846 0-26.256-6.564-49.231-19.693-19.692-13.128-32.82-26.256-32.82-39.384 0 0 3.282-3.282 6.564-9.846 19.692-16.41 39.384-26.256 59.076-26.256 26.257 0 59.077 13.128 101.744 45.949v-6.564c3.282 0 3.282-3.282 3.282-3.282zM641.412-64.942c13.128-24.678 36.102-37.082 62.359-37.082 6.564 0 13.126 0.979 19.692 2.95 6.566 1.312 13.126 3.61 16.41 6.234 3.283 2.298 6.566 4.595 9.85 7.226 6.56 2.298 6.56 3.936 9.843 5.574l55.795 48.25c13.126 10.47 26.259 19.629 42.669 27.571 13.126 7.872 26.253 13.126 32.819 16.077 9.843 2.63 16.41 6.566 22.976 11.821 3.277 4.922 6.56 11.155 6.56 19.034 0 9.517-6.56 16.736-13.126 21.99-6.566 5.248-13.126 8.858-19.693 11.155s-13.126 7.552-22.976 16.41c-6.56 8.538-13.126 20.352-16.41 35.776l-3.283 19.040c-3.277 8.858-3.277 15.424-6.56 19.034 0 0.986 0 1.312-3.283 1.312s-9.85-2.95-13.126-8.531c-6.566-5.581-13.133-11.814-19.693-18.381-3.283-6.566-13.133-12.474-19.693-18.054-9.85-5.574-19.693-8.531-26.259-8.531-26.253 0-39.386 7.219-49.229 21.331-6.564 10.502-9.846 22.65-13.128 36.435-6.564 5.581-9.846 8.531-16.41 8.531-16.41 0-22.974-17.069-22.974-51.526v-102.074c0-2.95-3.283-9.517-3.283-19.693-3.282-10.176-3.282-21.728-3.282-34.79l-6.564-36.429v-0.659zM165.515-47.476c30.523-4.467 65.641-14.016 105.354-28.589 39.713-14.445 64-21.99 72.861-21.99 22.975 0 42.010 10.176 57.764 29.837 3.282 6.362 3.282 13.85 3.282 22.445 0 31.014-18.708 70.24-56.123 117.824l-22.318 29.869c-4.595 6.24-10.175 15.757-17.395 28.557-6.892 12.8-13.128 22.643-18.051 29.536-4.267 7.552-11.159 15.098-20.020 22.65-8.533 7.546-18.38 12.467-29.21 15.098-13.785-2.63-23.302-7.226-27.898-13.459s-7.22-13.126-7.877-20.352c-0.984-6.886-2.954-11.482-6.236-13.779-3.282-1.971-8.861-3.61-16.41-5.254-1.641 0-4.595 0-8.861-0.326h-8.861c-17.395 0-29.211-1.971-35.446-5.254-8.205-9.517-12.472-20.346-12.472-31.834 0-5.254 1.313-14.112 3.938-26.586 2.626-12.141 3.938-21.99 3.938-28.883 0-13.453-3.938-26.912-12.144-40.365-8.205-14.118-12.472-24.621-12.472-32.102 3.282-12.736 24.944-21.696 64.657-26.944v-0.096zM274.807 250.956c0 22.648 5.908 47.592 18.051 77.13 11.816 29.539 23.631 49.231 35.118 62.359-0.657 3.282-2.298 3.282-4.923 3.282l-3.283 3.282c-9.518-9.846-21.005-32.82-34.79-65.641-13.784-29.538-21.005-56.78-21.005-76.803 0-14.765 3.61-27.565 10.174-38.726 7.22-10.829 24.616-26.586 52.185-46.605l34.79-22.643c37.087-32.166 56.78-54.483 56.78-67.61 0-6.893-3.282-13.786-13.128-21.338-6.564-7.878-15.426-11.814-22.975-11.814-0.656 0-0.984-0.659-0.984-2.298 0-0.326 3.282-6.893 10.174-19.693 13.785-18.707 43.324-27.898 82.708-27.898 72.205 0 128 29.542 170.667 88.614 0 16.41 0 26.586-3.282 30.854v12.141c0 21.338 3.282 37.414 9.846 47.917s13.128 15.43 22.975 15.43c6.564 0 13.128-2.298 19.692-7.219 3.282 25.267 3.282 47.258 3.282 66.95 0 29.867 0 54.483-6.564 77.457-3.282 19.692-9.846 36.102-16.41 49.231-6.564 9.846-13.128 19.692-19.692 29.539s-9.846 19.692-16.41 29.539c-3.283 13.128-6.564 22.974-6.564 39.384-9.846 16.41-16.41 32.82-26.256 49.231-6.564 16.41-13.128 32.821-19.693 45.949l-29.539-22.974c-32.82-22.975-59.076-32.82-82.051-32.82-19.692 0-36.102 3.282-45.949 16.41l-19.692 16.41c0-9.846-3.282-22.975-9.846-36.102l-20.676-39.385c-9.19-22.974-14.113-36.102-15.098-45.949-1.313-6.564-2.298-13.128-2.954-13.128l-24.616-49.231c-26.584-49.231-40.041-94.851-40.041-132.593 0-7.552 0.657-15.43 1.969-23.302-14.769 10.17-21.99 24.288-21.99 42.662v0zM509.802-59.521c-42.667 0-75.487-5.779-98.462-17.235v0.986c-16.41-19.693-34.79-29.869-60.39-29.869-16.082 0-41.354 6.24-75.487 18.707-34.461 11.821-64.984 20.877-91.569 26.848-2.625 0.755-8.533 1.875-18.051 3.386-9.19 1.472-17.723 2.982-25.272 4.493-6.892 1.478-14.769 3.712-23.303 6.726-8.205 2.598-14.769 5.978-19.692 10.080-4.529 4.134-6.761 8.794-6.761 14.010 0 5.254 1.116 10.867 3.348 16.838 2.1 3.61 4.398 7.219 6.695 10.502 2.297 3.61 4.267 6.893 5.58 10.176 1.969 2.957 3.282 5.907 4.595 9.19 1.313 2.95 2.626 5.907 3.282 9.517 0.656 3.283 1.313 6.566 1.313 9.85 0 3.277-1.313 13.126-3.938 30.522-2.626 17.062-3.938 27.898-3.938 32.493 0 14.438 3.282 25.926 10.503 34.131s14.113 12.474 21.334 12.474h37.743c2.954 0 7.549 1.638 14.441 5.581 2.298 5.248 4.267 9.517 5.58 13.453 1.641 3.942 2.298 6.893 2.954 8.205 0.656 1.971 1.313 3.942 1.969 5.581 1.313 2.298 2.954 4.922 5.252 7.546-2.626 3.283-3.939 7.552-3.939 12.8 0 3.616 0 6.893 0.656 8.864 0 11.814 5.58 28.557 17.395 50.544l11.487 20.677c9.517 17.723 16.738 30.851 21.99 43.98 5.58 13.128 11.487 32.82 18.051 59.076 5.251 22.975 17.723 45.949 37.415 68.924l24.616 29.539c17.067 19.692 28.225 36.102 34.461 49.231s9.518 29.539 9.518 42.666c0 6.564-1.641 26.257-5.251 59.077-3.282 32.82-4.924 65.641-4.924 95.18 0 22.974 1.969 39.384 6.236 55.795s11.816 32.82 22.974 45.949c9.846 13.128 22.975 26.256 42.667 32.82s42.667 9.846 68.924 9.846c9.846 0 19.692 0 29.538-3.282 9.846 0 22.975-3.282 39.385-9.846 13.128-6.564 26.257-13.128 36.102-22.974 13.128-9.846 22.975-26.256 32.82-42.667 6.564-19.692 13.128-39.384 16.41-65.641 3.283-16.41 3.282-32.82 6.564-55.795 0-19.693 3.282-32.821 3.282-42.667 3.282-9.846 3.282-22.975 6.564-39.385 3.282-13.128 6.564-26.256 13.128-36.102 6.564-13.128 13.128-26.257 22.974-39.384 9.85-16.41 22.976-32.82 36.102-52.513 29.536-32.82 52.512-68.923 65.645-105.025 16.41-32.82 26.253-75.487 26.253-121.109 0-22.643-3.283-44.634-9.843-65.965 6.56 0 9.843-2.63 13.126-7.226s6.566-14.438 9.843-29.862l3.283-24.288c3.283-7.219 6.566-14.112 16.41-20.019 6.566-5.914 13.133-10.835 22.976-14.771 6.566-3.283 16.41-7.878 22.976-13.786 6.56-6.566 9.843-13.459 9.843-20.678 0-11.155-3.283-19.36-9.843-25.267-6.566-6.566-13.133-11.162-22.976-14.118-6.566-3.277-19.693-9.843-39.386-19.098-16.41-9.715-32.819-21.498-49.229-35.45l-32.819-27.93c-13.133-12.8-26.259-21.99-36.102-27.565-9.85-5.914-22.976-8.864-36.105-8.864l-22.975 2.624c-26.256 6.893-42.666 20.019-52.513 40.045-52.513 6.362-95.18 9.517-121.436 9.517z" />
+<glyph unicode="&#xe957;" glyph-name="long-arrow-right" data-tags="bw-long-arrow-right" d="M1005.451 429.772l-111.232 105.344c-6.163 5.708-14.253 8.879-22.656 8.879s-16.493-3.171-22.656-8.879c-2.97-2.733-5.338-6.052-6.963-9.748-1.619-3.695-2.458-7.688-2.458-11.724s0.838-8.028 2.458-11.724c1.626-3.695 3.994-7.015 6.963-9.748l65.408-62.016c6.4-12.8-7.744-15.744-7.936-15.744h-874.176c-4.158 0.27-8.327-0.316-12.25-1.722s-7.516-3.601-10.556-6.45c-3.041-2.849-5.464-6.292-7.121-10.116s-2.512-7.946-2.512-12.113c0-4.166 0.855-8.289 2.512-12.113s4.080-7.266 7.121-10.115c3.040-2.849 6.633-5.044 10.556-6.451s8.092-1.991 12.25-1.722h871.168c0 0 15.616-1.92 9.28-11.648l-69.632-66.112c-2.97-2.733-5.338-6.052-6.963-9.748-1.619-3.695-2.458-7.688-2.458-11.724 0-4.038 0.838-8.026 2.458-11.725 1.626-3.693 3.994-7.014 6.963-9.747 6.157-5.722 14.253-8.902 22.656-8.902s16.499 3.181 22.656 8.902l117.12 110.912c5.926 5.483 10.65 12.131 13.882 19.526s4.902 15.38 4.902 23.45c0 8.071-1.67 16.055-4.902 23.451s-7.955 14.043-13.882 19.525v0z" />
+<glyph unicode="&#xe958;" glyph-name="money" data-tags="bw-money" d="M910.016 736h-796.032c-30.23 0-59.222-12.009-80.599-33.385s-33.385-50.369-33.385-80.599v-476.032c0-30.234 12.009-59.226 33.385-80.602s50.369-33.382 80.599-33.382h796.032c30.234 0 59.226 12.006 80.602 33.382s33.382 50.368 33.382 80.602v476.032c0 30.23-12.006 59.222-33.382 80.599s-50.368 33.385-80.602 33.385zM80.32 455.68c51.938 3.195 100.936 25.192 137.837 61.882s59.18 85.56 62.675 137.478c0.211 4.518 2.134 8.787 5.38 11.937s7.569 4.947 12.092 5.023h434.112c4.454-0.054 8.723-1.782 11.962-4.842s5.203-7.226 5.51-11.67c3.789-50.737 25.242-98.541 60.621-135.103 35.386-36.562 82.458-59.57 133.043-65.025 4.435-0.321 8.582-2.294 11.629-5.53s4.768-7.498 4.819-11.942v-108.032c-0.051-4.424-1.754-8.668-4.774-11.901-3.014-3.233-7.136-5.22-11.546-5.571-50.33-5.693-97.12-28.717-132.333-65.126-35.219-36.41-56.672-83.93-60.691-134.426-0.23-4.499-2.163-8.749-5.408-11.872-3.245-3.13-7.558-4.902-12.064-4.96h-437.504c-4.479 0.058-8.768 1.818-12 4.915-3.232 3.104-5.165 7.315-5.408 11.789-4.206 51.194-26.317 99.264-62.449 135.77s-83.973 59.113-135.119 63.846c-4.478 0.259-8.692 2.205-11.791 5.448s-4.855 7.539-4.913 12.024v108.416c0.065 4.419 1.771 8.656 4.788 11.885s7.128 5.221 11.532 5.587v0zM960 622.016v-102.912c0.026-2.563-0.493-5.101-1.523-7.45-1.024-2.348-2.541-4.452-4.435-6.175-1.901-1.723-4.141-3.025-6.573-3.82-2.438-0.795-5.018-1.066-7.565-0.796-37.254 6.026-71.533 24.041-97.626 51.311s-42.573 62.307-46.95 99.793c-0.25 2.541 0.032 5.107 0.838 7.532s2.106 4.653 3.827 6.541c1.722 1.889 3.814 3.395 6.157 4.421 2.336 1.027 4.864 1.551 7.418 1.539h96.448c13.248-0.034 25.939-5.311 35.309-14.677 9.363-9.366 14.643-22.061 14.675-35.307zM113.984 672h103.616c2.512 0.005 4.998-0.506 7.306-1.5s4.386-2.451 6.108-4.281c1.722-1.83 3.050-3.993 3.901-6.356s1.211-4.876 1.053-7.384c-3.694-38.947-20.87-75.382-48.563-103.016s-64.163-44.732-103.117-48.344c-2.559-0.279-5.149-0.015-7.6 0.775s-4.707 2.088-6.621 3.809c-1.915 1.722-3.445 3.828-4.49 6.18s-1.583 4.9-1.576 7.475v102.4c-0.017 6.581 1.263 13.101 3.766 19.187s6.18 11.62 10.821 16.285c4.641 4.666 10.156 8.371 16.23 10.904s12.586 3.847 19.167 3.864zM64 145.984v102.976c-0.033 2.483 0.45 4.941 1.418 7.227s2.399 4.344 4.204 6.046 3.944 3.012 6.281 3.845c2.337 0.833 4.822 1.171 7.297 0.994 38.292-5.068 73.804-22.752 100.924-50.253 27.121-27.507 44.304-63.258 48.836-101.619 0.177-2.47-0.16-4.947-0.989-7.283-0.829-2.33-2.132-4.467-3.828-6.272s-3.747-3.238-6.024-4.205c-2.278-0.973-4.732-1.466-7.207-1.44h-100.928c-13.246 0.032-25.94 5.312-35.307 14.675-9.366 9.37-14.643 22.061-14.677 35.309zM910.016 96h-96c-2.515-0.013-5.011 0.493-7.328 1.485-2.31 0.998-4.39 2.458-6.112 4.301-1.722 1.837-3.040 4.013-3.878 6.387-0.832 2.374-1.171 4.902-0.986 7.411 4.358 37.389 20.742 72.346 46.694 99.61 25.946 27.264 60.051 45.36 97.178 51.558 2.554 0.3 5.146 0.052 7.597-0.726s4.71-2.071 6.624-3.791c1.914-1.72 3.437-3.827 4.474-6.182s1.555-4.904 1.53-7.476v-102.4c0.019-13.248-5.21-25.958-14.541-35.36-9.331-9.408-22.003-14.733-35.251-14.816v0zM512.006 243.904c27.757-0.256 54.97 7.744 78.176 22.986 23.206 15.239 41.363 37.029 52.16 62.605 10.803 25.576 13.76 53.784 8.499 81.043s-18.502 52.342-38.042 72.063c-19.539 19.721-44.499 33.192-71.712 38.701-27.206 5.51-55.443 2.812-81.116-7.753s-47.63-28.52-63.082-51.585c-15.451-23.066-23.701-50.202-23.702-77.965-0.12-36.971 14.427-72.48 40.449-98.742s61.397-41.136 98.369-41.354v0zM512.006 479.36c18.912 0.254 37.472-5.122 53.318-15.445 15.853-10.323 28.275-25.126 35.686-42.527 7.418-17.4 9.485-36.613 5.952-55.195s-12.512-35.692-25.798-49.157c-13.28-13.465-30.272-22.675-48.8-26.46-18.534-3.784-37.772-1.972-55.272 5.206s-32.468 19.399-43.005 35.107c-10.536 15.709-16.163 34.195-16.164 53.11-0.136 25.112 9.691 49.252 27.327 67.128s41.642 28.029 66.755 28.232v0z" />
+<glyph unicode="&#xe959;" glyph-name="play" data-tags="bw-play" d="M163.704-128.022c-17.193 0.032-34.076 4.576-48.96 13.184-15.557 8.819-28.468 21.645-37.393 37.146-8.925 15.494-13.537 33.101-13.359 50.982v821.376c-0.167 17.872 4.451 35.463 13.375 50.948s21.829 28.3 37.377 37.116c15.046 8.811 32.189 13.402 49.624 13.289s34.518-4.925 49.448-13.929l696.577-410.688c15.13-9.034 27.654-21.838 36.352-37.162s13.267-32.643 13.267-50.262c0-17.62-4.57-34.939-13.267-50.262s-21.222-28.129-36.352-37.162l-696.577-410.688c-15.155-9.043-32.465-13.843-50.112-13.888v0zM163.704 831.978c-6.097-0.033-12.077-1.666-17.344-4.736-5.698-3.288-10.408-8.045-13.64-13.776s-4.864-12.223-4.728-18.8v-821.376c-0.105-6.586 1.562-13.075 4.828-18.797s8.008-10.458 13.732-13.715c5.256-3.13 11.26-4.781 17.376-4.781s12.12 1.651 17.376 4.781l696.577 410.88c5.53 3.386 10.106 8.135 13.28 13.795 3.168 5.659 4.832 12.038 4.832 18.525s-1.664 12.867-4.832 18.525c-3.174 5.659-7.75 10.409-13.28 13.795l-696.577 410.688c-5.244 3.208-11.261 4.933-17.408 4.992h-0.192z" />
+<glyph unicode="&#xe95a;" glyph-name="reddit" data-tags="bw-reddit" d="M607.488 241.152c3.627-3.584 3.627-9.427 0-13.056-19.84-19.712-50.944-29.312-95.189-29.312l-0.342 0.083-0.341-0.083c-44.203 0-75.349 9.6-95.189 29.357-3.627 3.584-3.627 9.427 0 13.011 3.584 3.584 9.472 3.584 13.098 0 16.171-16.083 43.008-23.936 82.091-23.936l0.341-0.083 0.342 0.083c39.040 0 65.877 7.853 82.090 23.936 3.627 3.584 9.515 3.584 13.099 0zM460.715 344.32c0 21.632-17.664 39.211-39.339 39.211-21.717 0-39.381-17.579-39.381-39.211 0-21.589 17.664-39.168 39.381-39.168 21.675-0.043 39.339 17.536 39.339 39.168zM1024 384c0-282.752-229.248-512-512-512s-512 229.248-512 512c0 282.752 229.248 512 512 512s512-229.248 512-512zM810.669 389.504c0 36.309-29.658 65.835-66.138 65.835-17.792 0-33.92-7.126-45.824-18.56-45.056 29.653-106.024 48.512-173.48 50.944l36.906 116.224 99.966-23.424-0.128-1.451c0-29.696 24.282-53.845 54.106-53.845s54.054 24.149 54.054 53.845c0 29.696-24.23 53.845-54.054 53.845-22.912 0-42.413-14.293-50.304-34.304l-107.736 25.259c-4.693 1.152-9.514-1.579-10.965-6.187l-41.173-129.621c-70.656-0.853-134.614-19.883-181.675-50.389-11.819 10.88-27.477 17.706-44.8 17.706-36.437-0.042-66.091-29.568-66.091-65.877 0-24.149 13.27-45.056 32.768-56.533-1.28-6.998-2.133-14.123-2.133-21.334 0-97.32 119.68-176.514 266.795-176.514 147.112 0 266.792 79.194 266.792 176.514 0 6.827-0.723 13.526-1.875 20.139 20.736 11.136 34.989 32.683 34.989 57.728v0zM602.795 383.488c-21.718 0-39.339-17.579-39.339-39.211 0-21.589 17.664-39.168 39.339-39.168s39.336 17.579 39.336 39.168c0 21.632-17.619 39.211-39.336 39.211z" />
+<glyph unicode="&#xe95b;" glyph-name="refresh-tab" data-tags="bw-refresh-tab" d="M1005.311 680.323l-110.784 110.784c-6.17 4.921-13.939 7.389-21.811 6.931-7.878-0.458-15.309-3.811-20.864-9.415-5.562-5.604-8.851-13.062-9.242-20.944s2.144-15.629 7.117-21.756l64.832-65.152c0.922-1.564 1.446-3.331 1.523-5.146s-0.288-3.619-1.075-5.256c-0.781-1.638-1.958-3.057-3.418-4.134-1.466-1.077-3.168-1.778-4.966-2.040h-808.702c-25.461 0-49.879-10.115-67.882-28.118s-28.118-42.422-28.118-67.882v-166.656c0-8.487 3.372-16.627 9.373-22.628s14.14-9.372 22.627-9.372c8.487 0 16.626 3.371 22.627 9.372s9.373 14.141 9.373 22.628v166.912c0 8.486 3.372 16.626 9.373 22.627s14.14 9.373 22.627 9.373h805.758c0 0 15.552-2.048 9.216-12.288l-69.376-69.632c-5.331-6.115-8.141-14.027-7.866-22.136 0.282-8.109 3.629-15.809 9.37-21.542s13.446-9.071 21.555-9.339c8.109-0.268 16.019 2.555 22.125 7.897l116.608 116.608c11.942 11.994 18.643 28.228 18.643 45.152s-6.701 33.158-18.643 45.152v0zM18.688 88.578l110.784-110.784c6.115-5.331 14.027-8.147 22.136-7.866s15.809 3.629 21.542 9.37c5.733 5.741 9.071 13.446 9.339 21.555s-2.555 16.019-7.897 22.125l-65.152 65.152c-0.922 1.562-1.444 3.334-1.523 5.146s0.291 3.616 1.075 5.254c0.784 1.638 1.959 3.059 3.421 4.134s3.166 1.779 4.963 2.042h808.703c25.459 0 49.882 10.112 67.885 28.115s28.115 42.426 28.115 67.885v166.656c0 8.487-3.373 16.627-9.37 22.628-6.003 6.001-14.144 9.372-22.63 9.372s-16.627-3.372-22.624-9.372c-6.003-6.001-9.376-14.141-9.376-22.628v-166.912c0-8.486-3.373-16.627-9.37-22.63-6.003-5.997-14.144-9.37-22.63-9.37h-805.759c0 0-15.552 2.048-9.216 12.288l69.376 69.312c4.922 6.17 7.389 13.938 6.931 21.816s-3.812 15.309-9.415 20.865c-5.604 5.556-13.063 8.845-20.944 9.237s-15.629-2.143-21.756-7.117l-116.608-115.968c-11.939-11.994-18.643-28.23-18.643-45.152s6.703-33.158 18.643-45.152v0z" />
+<glyph unicode="&#xe95c;" glyph-name="sitemap" data-tags="bw-sitemap" d="M928 266.304h-33.344v41.344c-0.102 23.017-9.331 45.054-25.658 61.276-16.333 16.222-38.432 25.304-61.446 25.252h-276.352v107.456h33.344c25.459 0 49.882 10.115 67.885 28.118s28.115 42.422 28.115 67.882v106.368c0 25.46-10.112 49.879-28.115 67.882s-42.426 28.118-67.885 28.118h-108.032c-25.46 0-49.879-10.115-67.882-28.118s-28.118-42.422-28.118-67.882v-106.368c0-25.46 10.115-49.879 28.118-67.882s42.422-28.118 67.882-28.118h29.888v-107.456h-270.72c-23.005 0.051-45.090-9.035-61.399-25.26s-25.509-38.262-25.577-61.268v-41.344h-32.704c-25.46 0-49.879-10.114-67.882-28.115-18.003-18.003-28.118-42.426-28.118-67.885v-106.304c0-25.459 10.115-49.882 28.118-67.885s42.422-28.115 67.882-28.115h108.096c25.46 0 49.879 10.112 67.882 28.115s28.118 42.426 28.118 67.885v106.304c0 25.459-10.115 49.882-28.118 67.885-18.003 18.001-42.422 28.115-67.882 28.115h-30.656v41.344c0.068 11.14 4.554 21.799 12.474 29.635s18.625 12.208 29.766 12.157h270.72v-83.2h-30.080c-25.46 0-49.879-10.115-67.882-28.115-18.003-18.003-28.118-42.426-28.118-67.885v-106.24c0-25.459 10.115-49.882 28.118-67.885s42.422-28.115 67.882-28.115h108.16c25.459 0 49.882 10.112 67.885 28.115s28.115 42.426 28.115 67.885v106.304c0 25.459-10.112 49.882-28.115 67.885-18.003 18.001-42.426 28.115-67.885 28.115h-33.28v83.136h276.224c11.149 0.051 21.856-4.319 29.792-12.153 7.93-7.834 12.429-18.492 12.512-29.639v-41.344h-29.952c-25.459 0-49.882-10.114-67.885-28.115-18.003-18.003-28.115-42.426-28.115-67.885v-106.304c0-25.459 10.112-49.882 28.115-67.885s42.426-28.115 67.885-28.115h108.224c25.459 0 49.882 10.112 67.885 28.115s28.115 42.426 28.115 67.885v106.304c0 25.459-10.112 49.882-28.115 67.885-18.003 18.001-42.426 28.115-67.885 28.115v0zM424.512 597.632v106.368c0 8.487 3.372 16.627 9.373 22.627s14.14 9.373 22.627 9.373h108.16c8.486 0 16.627-3.372 22.63-9.373 5.997-6.001 9.37-14.14 9.37-22.627v-106.368c0-8.487-3.373-16.627-9.37-22.627-6.003-6.001-14.144-9.373-22.63-9.373h-108.16c-8.487 0-16.627 3.372-22.627 9.373s-9.373 14.14-9.373 22.627zM236.096 170.304v-106.304c0-8.486-3.372-16.627-9.373-22.63-6.001-5.997-14.14-9.37-22.627-9.37h-108.096c-8.487 0-16.627 3.373-22.627 9.37-6.001 6.003-9.373 14.144-9.373 22.63v106.304c0 8.486 3.372 16.627 9.373 22.63 6.001 5.997 14.14 9.37 22.627 9.37h108.096c8.487 0 16.627-3.373 22.627-9.37 6.001-6.003 9.373-14.144 9.373-22.63zM596.672 170.304v-106.304c0-8.486-3.373-16.627-9.37-22.63-6.003-5.997-14.144-9.37-22.63-9.37h-108.16c-8.487 0-16.627 3.373-22.627 9.37-6.001 6.003-9.373 14.144-9.373 22.63v106.304c0 8.486 3.372 16.627 9.373 22.63 6.001 5.997 14.14 9.37 22.627 9.37h108.16c4.205 0 8.365-0.826 12.243-2.438 3.885-1.606 7.411-3.962 10.387-6.931 2.97-2.976 5.325-6.502 6.931-10.387 1.613-3.878 2.438-8.038 2.438-12.243zM960 64c0-8.486-3.373-16.627-9.37-22.63-6.003-5.997-14.144-9.37-22.63-9.37h-108.096c-8.486 0-16.627 3.373-22.63 9.37-5.997 6.003-9.37 14.144-9.37 22.63v106.304c0 8.486 3.373 16.627 9.37 22.63 6.003 5.997 14.144 9.37 22.63 9.37h108.096c8.486 0 16.627-3.373 22.63-9.37 5.997-6.003 9.37-14.144 9.37-22.63v-106.304z" />
+<glyph unicode="&#xe95d;" glyph-name="sliders" data-tags="bw-sliders" d="M22.849 615.811h105.152c4.588-12.538 12.918-23.363 23.86-31.012s23.972-11.75 37.324-11.75c13.351 0 26.38 4.102 37.323 11.75s19.273 18.474 23.861 31.012h750.721c3.078-0.163 6.163 0.302 9.056 1.368s5.542 2.711 7.782 4.834c2.24 2.123 4.019 4.679 5.242 7.514 1.216 2.835 1.843 5.887 1.843 8.972s-0.627 6.138-1.843 8.973c-1.222 2.834-3.002 5.391-5.242 7.514s-4.89 3.768-7.782 4.834c-2.893 1.066-5.978 1.532-9.056 1.368h-750.657c-4.576 12.56-12.904 23.408-23.855 31.073s-23.994 11.777-37.361 11.777c-13.367 0-26.411-4.111-37.361-11.777s-19.279-18.513-23.855-31.073h-105.152c-3.081 0.164-6.163-0.301-9.058-1.368s-5.542-2.711-7.781-4.834c-2.239-2.123-4.021-4.68-5.24-7.514s-1.847-5.887-1.847-8.973c0-3.085 0.628-6.138 1.847-8.972s3.001-5.391 5.24-7.514c2.239-2.123 4.886-3.768 7.781-4.834s5.977-1.532 9.058-1.368v0zM1001.154 406.595h-156.992c-4.589 12.538-12.915 23.364-23.859 31.012s-23.974 11.75-37.325 11.75c-13.35 0-26.381-4.102-37.325-11.75s-19.27-18.474-23.859-31.012h-698.945c-3.081 0.164-6.163-0.301-9.058-1.368s-5.542-2.711-7.781-4.834c-2.239-2.123-4.021-4.68-5.24-7.514s-1.847-5.887-1.847-8.973c0-3.085 0.628-6.138 1.847-8.972s3.001-5.391 5.24-7.514c2.239-2.123 4.886-3.768 7.781-4.834s5.977-1.532 9.058-1.368h698.945c4.589-12.538 12.915-23.363 23.859-31.012s23.974-11.75 37.325-11.75c13.35 0 26.381 4.102 37.325 11.75s19.27 18.474 23.859 31.012h156.992c3.078-0.163 6.163 0.302 9.056 1.368 2.899 1.066 5.542 2.711 7.782 4.834s4.019 4.679 5.242 7.514c1.216 2.835 1.843 5.887 1.843 8.972s-0.627 6.138-1.843 8.973c-1.222 2.834-3.002 5.391-5.242 7.514s-4.883 3.768-7.782 4.834c-2.893 1.066-5.978 1.532-9.056 1.368v0zM1001.34 148.483l-512.895 3.328c-4.502 12.57-12.758 23.456-23.649 31.174-10.892 7.725-23.892 11.917-37.244 12.006s-26.408-3.923-37.404-11.494c-10.995-7.578-19.398-18.349-24.070-30.854l-343.104 2.24c-6.026 0-11.805-2.394-16.066-6.656-4.26-4.256-6.654-10.035-6.654-16.064 0-6.022 2.394-11.802 6.654-16.064s10.040-6.656 16.066-6.656l343.104-2.24c4.496-12.589 12.756-23.488 23.659-31.226 10.902-7.731 23.921-11.923 37.288-12.013 13.367-0.083 26.436 3.949 37.436 11.546s19.395 18.394 24.049 30.925l512.831-3.392c6.029 0 11.808 2.394 16.064 6.656 4.262 4.262 6.656 10.042 6.656 16.064 0 6.029-2.394 11.808-6.656 16.064-4.256 4.262-10.035 6.656-16.064 6.656v0z" />
+<glyph unicode="&#xe95e;" glyph-name="tag" data-tags="bw-tag" d="M669.65-128.036c-26.406 0.064-51.718 10.579-70.4 29.248l-526.719 525.568c-15.377 15.341-25.35 35.265-28.416 56.768l-43.2 306.816c-1.987 14.271-0.626 28.809 3.975 42.464s12.317 26.051 22.537 36.208c10.22 10.158 22.663 17.798 36.345 22.316s28.228 5.791 42.487 3.717l305.536-44.8c21.338-3.092 41.099-13.018 56.32-28.288l526.527-525.696c9.299-9.274 16.678-20.292 21.709-32.422 5.037-12.129 7.622-25.133 7.622-38.266s-2.586-26.138-7.622-38.266c-5.030-12.128-12.41-23.149-21.709-32.422v0l-254.208-253.888c-9.312-9.254-20.358-16.582-32.499-21.568-12.147-4.986-25.158-7.533-38.285-7.488v0zM92.819 831.964c-4.114 0.013-8.182-0.859-11.929-2.557s-7.085-4.183-9.786-7.285c-2.702-3.103-4.704-6.75-5.871-10.694s-1.472-8.095-0.893-12.168l43.2-306.816c1.1-7.725 4.67-14.886 10.176-20.416l526.399-525.504c6.803-6.771 16.006-10.566 25.6-10.566s18.803 3.795 25.6 10.566l254.272 253.824c3.347 3.334 6.010 7.302 7.821 11.667 1.818 4.365 2.746 9.043 2.746 13.773s-0.928 9.408-2.746 13.773c-1.811 4.365-4.474 8.333-7.821 11.667l-526.655 525.696c-5.492 5.532-12.636 9.127-20.352 10.24l-305.536 44.8c-1.405 0.127-2.819 0.127-4.224 0v0zM275.218 537.117c-16.548 0.051-32.71 5.005-46.444 14.237s-24.424 22.327-30.719 37.632c-6.295 15.304-7.912 32.131-4.648 48.355s11.263 31.115 22.988 42.794c11.724 11.679 26.646 19.622 42.882 22.824s33.056 1.521 48.337-4.833c15.28-6.353 28.335-17.093 37.514-30.862s14.072-29.95 14.059-46.499c-0.017-11.007-2.202-21.903-6.432-32.065s-10.42-19.391-18.218-27.159c-7.798-7.768-17.050-13.924-27.228-18.115s-21.082-6.335-32.090-6.31v0zM275.218 659.741c-7.714 0.025-15.262-2.239-21.688-6.506s-11.442-10.346-14.412-17.466c-2.97-7.119-3.76-14.961-2.271-22.529s5.192-14.526 10.637-19.99c5.446-5.464 12.39-9.188 19.955-10.703s15.407-0.75 22.536 2.196c7.13 2.946 13.224 7.942 17.513 14.354s6.577 13.953 6.577 21.667c-0.017 10.31-4.111 20.195-11.389 27.496s-17.149 11.429-27.459 11.48v0z" />
+<glyph unicode="&#xe95f;" glyph-name="thumb-tack" data-tags="bw-thumb-tack" d="M1014.363-72.284l-252.032 249.6c-6.054 6.022-9.491 14.189-9.574 22.726s3.194 16.762 9.126 22.906l128 131.519c13.696 13.981 23.046 31.632 26.918 50.817 3.878 19.184 2.106 39.080-5.094 57.279-6.829 18.269-18.854 34.141-34.592 45.661s-34.502 18.184-53.984 19.171c-55.744 2.683-111.552-3.583-165.312-18.56l-275.711 231.68c19.2 74.88-0.768 130.816-52.8 149.696-81.216 29.184-186.048-64-216.128-93.312-67.968-65.92-132.032-163.264-108.096-237.952 17.984-55.744 73.792-75.136 151.296-52.672l235.648-275.199c-14.337-54.125-21.121-109.971-20.16-165.952 0.586-19.501 6.952-38.381 18.29-54.253s27.136-28.019 45.39-34.899c18.529-7.277 38.798-8.909 58.252-4.685 19.457 4.23 37.223 14.118 51.060 28.429l127.232 130.88c2.944 3.027 6.464 5.446 10.342 7.11 3.885 1.658 8.058 2.541 12.282 2.579 4.23 0.045 8.416-0.755 12.333-2.342 3.917-1.581 7.482-3.93 10.483-6.899l251.84-249.6c3.002-2.963 6.554-5.306 10.464-6.893 3.904-1.587 8.090-2.387 12.307-2.349 4.211 0.032 8.384 0.902 12.262 2.554s7.392 4.058 10.342 7.072c6.016 6.144 9.357 14.419 9.286 23.021s-3.552 16.826-9.67 22.867v0zM498.972 44.772c-5.119-5.261-11.678-8.883-18.853-10.419-7.174-1.542-14.644-0.922-21.467 1.779-6.43 2.381-12.006 6.624-16.017 12.186s-6.278 12.192-6.511 19.046c-0.833 49.664 5.241 99.206 18.048 147.2 2.744 10.573 2.915 21.658 0.499 32.314-2.416 10.653-7.349 20.576-14.387 28.934l-235.52 272.704c-8.288 9.715-19.229 16.801-31.482 20.394s-25.289 3.533-37.51-0.17c-27.584-8.512-61.888-13.696-69.632 9.92-11.456 35.904 27.904 109.824 91.648 171.904 64.768 63.296 125.504 87.808 149.824 78.976s18.176-49.344 12.288-72.704c-3.003-12.188-2.531-24.972 1.359-36.906s11.047-22.539 20.657-30.614l275.199-230.4c8.454-7.039 18.522-11.866 29.306-14.045 10.778-2.179 21.933-1.641 32.454 1.565 45.677 13.332 93.28 18.85 140.8 16.32 7.085-0.502 13.882-3.012 19.59-7.236s10.099-9.988 12.646-16.617c2.554-6.628 3.168-13.846 1.76-20.809-1.402-6.963-4.755-13.382-9.677-18.506l-345.023-354.815z" />
+<glyph unicode="&#xe960;" glyph-name="thumbs-up" data-tags="bw-thumbs-up" d="M1023.55 405.344c-0.032 13.688-2.803 27.231-8.154 39.828-5.357 12.598-13.184 23.994-23.014 33.516-19.616 17.996-45.19 28.115-71.808 28.416l-184.192-4.032c-11.36 0.784-21.958 6.002-29.504 14.528-3.821 4.957-6.4 10.758-7.514 16.916s-0.73 12.495 1.114 18.476l19.2 63.36c15.418 50.566 20.55 103.706 15.104 156.288-2.336 24.975-13.875 48.188-32.378 65.127-18.496 16.939-42.637 26.392-67.718 26.521h-23.168c-19.379-0.086-38.317-5.751-54.56-16.317s-29.094-25.587-37.024-43.267l-123.712-273.216c-3.137-6.698-8.123-12.359-14.371-16.317s-13.497-6.046-20.893-6.019l-20.608-3.072c-8.57 13.881-20.536 25.35-34.769 33.322s-30.262 12.188-46.575 12.246h-163.008c-25.461 0-49.879-10.115-67.882-28.118s-28.118-42.422-28.118-67.882v-442.56c0-25.459 10.114-49.882 28.118-67.885s42.421-28.115 67.882-28.115h163.008c17.533 0.090 34.705 4.986 49.654 14.144 14.949 9.165 27.104 22.246 35.146 37.824 8.832-4.352 20.224-10.112 40.192-20.544 55.97-29.254 118.156-44.621 181.312-44.8h1.28l210.24 0.768c33.51 0.403 66.234 10.214 94.432 28.32s50.746 43.776 65.056 74.080l37.056 78.4c33.658 71.469 50.95 149.549 50.624 228.544l-0.448 91.52zM291.006 13.088c0-8.486-3.372-16.627-9.373-22.63-6.001-5.997-14.141-9.37-22.627-9.37h-163.008c-8.487 0-16.627 3.373-22.628 9.37-6.001 6.003-9.372 14.144-9.372 22.63v442.816c0 8.487 3.372 16.627 9.372 22.627s14.141 9.373 22.628 9.373h163.008c8.486 0 16.626-3.372 22.627-9.373s9.373-14.14 9.373-22.627v-442.816zM915.582 113.248l-37.12-78.4c-9.101-19.424-23.482-35.891-41.498-47.526-18.016-11.629-38.944-17.965-60.39-18.266l-211.264-0.768c-52.819 0.064-104.842 12.838-151.68 37.248-32.32 16.832-43.712 22.336-55.552 28.032l-3.072 1.472v408.896l12.032 1.856c18.72 0.754 36.856 6.727 52.362 17.245s27.76 25.16 35.382 42.275l123.776 273.024c2.861 6.465 7.514 11.971 13.414 15.863s12.8 6.006 19.866 6.089h23.168c9.254-0.145 18.131-3.732 24.883-10.062 6.758-6.33 10.912-14.95 11.661-24.178 4.576-44.107 0.224-88.684-12.8-131.072l-19.2-63.36c-4.736-15.368-5.786-31.635-3.059-47.484 2.72-15.848 9.139-30.833 18.733-43.74 9.587-12.907 22.086-23.373 36.474-30.552 14.394-7.179 30.266-10.868 46.349-10.768l183.936 4.032c9.466-0.391 18.502-4.030 25.6-10.304 3.706-3.616 6.65-7.936 8.659-12.706s3.046-9.894 3.053-15.070l0.704-91.136c0.301-69.35-14.874-137.894-44.416-200.64v0z" />
+<glyph unicode="&#xe961;" glyph-name="twitter" data-tags="bw-twitter" d="M1024 701.567c-37.677-16.725-78.163-27.989-120.659-33.066 43.392 25.984 76.71 67.157 92.371 116.224-40.576-24.064-85.549-41.558-133.421-50.987-38.272 40.832-92.928 66.347-153.344 66.347-135.635 0-235.304-126.55-204.67-257.92-174.549 8.746-329.344 92.373-432.981 219.477-55.040-94.421-28.544-217.941 64.981-280.491-34.389 1.11-66.816 10.539-95.104 26.283-2.304-97.323 67.456-188.373 168.491-208.64-29.568-8.021-61.952-9.899-94.891-3.584 26.71-83.453 104.278-144.17 196.267-145.879-88.32-69.248-199.595-100.179-311.040-87.040 92.971-59.603 203.435-94.374 322.048-94.374 390.061 0 610.432 329.427 597.12 624.893 41.043 29.653 76.672 66.645 104.832 108.757v0z" />
+<glyph unicode="&#xe962;" glyph-name="unlock" data-tags="bw-unlock" d="M512 203.76c-5.823 0.070-11.606-1.018-17.014-3.187s-10.333-5.389-14.495-9.466c-4.162-4.077-7.478-8.941-9.758-14.304-2.28-5.357-3.48-11.117-3.53-16.947 0.102-8.006 2.415-15.834 6.685-22.611 4.269-6.771 10.328-12.237 17.507-15.789v-72.256c0-5.939 2.36-11.635 6.561-15.84 4.201-4.198 9.898-6.56 15.836-6.56 5.946 0 11.642 2.362 15.84 6.56 4.205 4.205 6.56 9.901 6.56 15.84v74.816c6.131 3.789 11.206 9.056 14.758 15.322 3.558 6.259 5.485 13.318 5.594 20.518-0.096 11.725-4.845 22.931-13.197 31.162-8.346 8.23-19.622 12.813-31.347 12.742zM806.4 501.808h-459.648c-5.516-0.065-10.931 1.473-15.589 4.427s-8.358 7.197-10.651 12.213c-22.348 48.353-28.086 102.737-16.32 154.688 7.206 27.87 20.157 53.926 38.023 76.497s40.251 41.161 65.721 54.575c31.899 17.325 67.501 26.714 103.795 27.371s72.212-7.436 104.717-23.595c41.958-21.642 76.352-55.523 98.624-97.152l21.12-37.696c4.218-7.558 11.258-13.144 19.571-15.54 8.32-2.397 17.248-1.412 24.845 2.74 3.731 2.010 7.027 4.74 9.69 8.032 2.669 3.293 4.653 7.082 5.85 11.149 1.19 4.067 1.562 8.329 1.088 12.54-0.467 4.211-1.773 8.287-3.827 11.991l-19.84 35.264c-31.558 58.914-81.779 105.689-142.784 132.992-40.538 17.451-84.512 25.454-128.596 23.403s-87.127-14.103-125.868-35.243c-33.316-17.599-62.589-41.964-85.943-71.533s-40.273-63.692-49.673-100.179c-13.417-57.002-9.789-116.69 10.432-171.648 0.629-1.725 0.832-3.576 0.591-5.397s-0.918-3.556-1.974-5.058c-1.056-1.502-2.46-2.727-4.091-3.57s-3.443-1.279-5.279-1.271h-22.784c-11.659 0.135-23.229-2.033-34.049-6.38s-20.673-10.787-28.998-18.951c-8.324-8.164-14.956-17.891-19.512-28.623s-6.949-22.259-7.041-33.918v-454.4c0.125-11.635 2.543-23.13 7.116-33.83s11.21-20.39 19.532-28.525c8.322-8.128 18.166-14.541 28.968-18.867 10.802-4.32 22.351-6.47 33.985-6.33h589.44c23.424-0.102 45.939 9.082 62.611 25.536s26.144 38.848 26.349 62.272v454.4c-0.339 23.476-9.946 45.866-26.733 62.282s-39.392 25.523-62.867 25.334v0zM830.336-40.208c-0.070-6.272-2.618-12.269-7.091-16.672-4.474-4.397-10.502-6.848-16.781-6.816h-588.864c-6.286-0.032-12.33 2.426-16.804 6.842s-7.017 10.426-7.068 16.71v454.080c0.051 6.286 2.592 12.296 7.068 16.711s10.518 6.876 16.804 6.841h589.376c3.11 0.026 6.195-0.562 9.075-1.729 2.886-1.167 5.51-2.89 7.725-5.071s3.981-4.778 5.197-7.641c1.21-2.863 1.85-5.938 1.875-9.048l-0.512-454.208z" />
+<glyph unicode="&#xe963;" glyph-name="users" data-tags="bw-users" d="M834.011 472.896c24.998 16.161 45.549 38.342 59.75 64.509s21.6 55.48 21.53 85.251c0 45.889-18.234 89.898-50.682 122.346s-76.454 50.678-122.342 50.678c-45.888 0-89.901-18.229-122.349-50.678s-50.675-76.458-50.675-122.346c0.006-12.124 1.229-24.216 3.648-36.096-38.982 15.873-82.623 15.873-121.602 0 2.42 11.88 3.642 23.972 3.648 36.096 0.529 46.444-17.388 91.2-49.82 124.448s-76.73 52.272-123.172 52.896c-46.404-0.691-90.643-19.742-123.030-52.981s-50.284-77.957-49.77-124.363c-0.096-29.661 7.225-58.876 21.298-84.987s34.449-48.289 59.278-64.517c-45.997-20.819-86.719-51.723-119.148-90.422s-55.731-84.2-68.18-133.13c-2.687-9.472-3.138-19.437-1.316-29.107 1.821-9.677 5.865-18.79 11.812-26.637 5.6-7.52 12.879-13.632 21.256-17.843s17.623-6.406 27-6.413h229.632c-26.050-37.005-45.734-78.106-58.24-121.6-2.644-9.478-3.066-19.437-1.235-29.107 1.831-9.664 5.868-18.784 11.795-26.637 5.593-7.526 12.87-13.645 21.249-17.856s17.628-6.4 27.007-6.4h441.602c9.094 0.019 18.067 2.093 26.246 6.074s15.354 9.76 20.986 16.902c5.997 7.539 10.221 16.333 12.352 25.728 2.125 9.402 2.106 19.155-0.064 28.544-11.283 44.89-31.29 87.123-58.88 124.288h229.248c9.107 0.006 18.093 2.080 26.285 6.061s15.373 9.76 21.011 16.915c5.965 7.558 10.163 16.352 12.288 25.747 2.125 9.389 2.125 19.136 0 28.525-11.898 49.642-35.091 95.871-67.77 135.088s-73.965 70.367-120.646 91.024v0zM742.299 754.176c34.317-0.589 66.995-14.767 90.874-39.424s36.998-57.777 36.486-92.096c0.666-17.146-2.138-34.249-8.243-50.285-6.099-16.036-15.379-30.676-27.27-43.043-11.898-12.366-26.163-22.204-41.952-28.924s-32.768-10.183-49.926-10.183c-17.158 0-34.144 3.464-49.933 10.183-15.782 6.72-30.054 16.557-41.952 28.924-11.891 12.366-21.171 27.006-27.27 43.043-6.106 16.036-8.902 33.14-8.237 50.285-0.499 34.324 12.634 67.445 36.525 92.1 23.885 24.655 56.576 38.831 90.899 39.42v0zM639.515 421.376c-0.742-25.043-8.851-49.313-23.302-69.777-14.458-20.464-34.618-36.216-57.978-45.286-23.354-9.071-48.861-11.059-73.34-5.716s-46.839 17.779-64.291 35.756c-17.451 17.978-29.219 40.698-33.832 65.324s-1.869 50.065 7.891 73.14c9.76 23.075 26.102 42.763 46.987 56.604s45.383 21.222 70.438 21.22c34.319-0.606 66.997-14.788 90.882-39.439 23.878-24.651 37.024-57.762 36.544-92.081v0.256zM154.521 622.656c-0.48 34.319 12.661 67.43 36.544 92.081s56.562 38.833 90.88 39.439c34.312-0.606 66.984-14.79 90.857-39.443s36.999-57.764 36.503-92.077c0.497-34.32-12.628-67.437-36.499-92.1s-56.543-38.861-90.861-39.484c-34.324 0.623-67.002 14.819-90.884 39.48s-37.020 57.779-36.54 92.104v0zM49.241 221.504c-1.662 2.234-2.781 4.832-3.27 7.571-0.489 2.746-0.333 5.562 0.454 8.237 9.408 34.56 65.6 207.040 240.448 207.040 18.181-0.244 36.245-2.957 53.696-8.064-0.448-5.056-1.536-9.984-1.536-15.168-0.073-29.693 7.292-58.931 21.423-85.046s34.577-48.275 59.473-64.458c-33.393-12.44-63.886-31.584-89.6-56.256h-269.184c-2.324 0.032-4.609 0.608-6.674 1.67-2.065 1.069-3.856 2.598-5.23 4.474v0zM744.283 19.648c-1.363-1.792-3.11-3.245-5.12-4.256-2.003-1.011-4.218-1.549-6.464-1.568h-441.602c-2.346 0.064-4.644 0.678-6.712 1.786-2.067 1.114-3.845 2.694-5.192 4.614-1.686 2.227-2.826 4.813-3.327 7.558s-0.347 5.574 0.447 8.25c9.408 34.56 65.6 207.040 240.514 207.040 150.016 0 218.432-153.6 230.4-207.68 0.736-2.675 0.858-5.485 0.346-8.211s-1.638-5.306-3.29-7.533zM974.683 221.184c-1.35-1.798-3.098-3.264-5.107-4.275s-4.23-1.542-6.477-1.549h-270.976c-25.549 24.262-55.597 43.286-88.448 56 25.030 16.141 45.6 38.316 59.827 64.484s21.645 55.492 21.581 85.276c0 4.8-1.024 9.344-1.344 14.016 20.653 5.989 42.042 9.091 63.552 9.216 149.952 0 218.432-153.6 230.4-207.68 0.666-2.662 0.717-5.44 0.154-8.122s-1.734-5.203-3.418-7.366h0.256z" />
+<glyph unicode="&#xe964;" glyph-name="windows" data-tags="bw-windows" d="M0 384v368.896l426.667 57.813v-426.709h-426.667zM469.333 384h554.667v512l-554.667-77.099v-434.901zM426.667 341.333h-426.667v-326.229l426.667-57.811v384.040zM469.333 341.333v-392.277l554.667-77.056v469.333h-554.667z" />
+<glyph unicode="&#xe965;" glyph-name="wrench" data-tags="bw-wrench" d="M874.441-128.135h-4.288c-20.23 0.486-40.154 5.107-58.534 13.581-18.381 8.48-34.835 20.627-48.346 35.699l-343.55 379.52c-4.287 4.552-9.633 7.973-15.562 9.96s-12.257 2.479-18.422 1.432c-49.99-11.681-101.906-12.485-152.234-2.36s-97.894 30.945-139.478 61.048c-30.904 29.471-55.233 65.14-71.391 104.669s-23.781 82.026-22.369 124.707c-0.368 13.978 3.434 27.749 10.923 39.558s18.324 21.12 31.125 26.746c12.968 5.849 27.371 7.754 41.413 5.478s27.107-8.632 37.563-18.278l70.016-64c10.365-9.554 22.963-16.353 36.639-19.775s27.99-3.356 41.633 0.191c15.494 3.345 29.775 10.87 41.294 21.758s19.837 24.722 24.050 40.002c3.634 14.137 3.576 28.97-0.166 43.079s-11.046 27.020-21.21 37.497l-58.752 60.096c-10.084 10.256-16.86 23.301-19.45 37.449s-0.876 28.748 4.922 41.911c6.122 12.981 15.758 23.987 27.816 31.77s26.057 12.031 40.407 12.262c41.062 1.804 82.019-5.435 119.974-21.205s71.982-39.687 99.672-70.059c29.318-42.586 49.645-90.701 59.75-141.405 10.099-50.705 9.76-102.937-0.998-153.507-0.851-5.881-0.23-11.882 1.798-17.466 2.035-5.585 5.421-10.578 9.85-14.534l377.024-345.6c22.163-20.422 37.658-47.046 44.467-76.41 6.803-29.357 4.608-60.083-6.31-88.179-10.912-28.090-30.042-52.237-54.886-69.299-24.845-17.056-54.253-26.234-84.39-26.336v0zM467.211 343.481l343.486-379.392c7.712-8.608 17.094-15.552 27.584-20.41 10.49-4.851 21.856-7.514 33.408-7.814 11.603-0.307 23.142 1.728 33.933 5.997s20.602 10.675 28.851 18.835c8.269 8.186 14.79 17.965 19.168 28.742 4.378 10.784 6.522 22.342 6.298 33.971-0.224 11.635-2.803 23.104-7.584 33.709-4.787 10.605-11.674 20.128-20.25 27.994l-377.024 345.6c-12.179 11.043-21.44 24.926-26.95 40.413-5.517 15.487-7.117 32.099-4.666 48.355 17.69 84.071 1.594 171.725-44.798 244.032-21.918 23.137-48.604 41.233-78.209 53.036s-61.421 17.029-93.246 15.316c-5.312-2.752-7.105-2.816-8.257-5.376-0.723-1.469-0.958-3.131-0.67-4.742s1.084-3.090 2.27-4.218l58.688-60.032c26.048-28.447 40.198-65.798 39.539-104.364s-16.081-75.41-43.087-102.949c-27.006-27.539-63.542-43.676-102.087-45.090s-76.166 12.004-105.117 37.491l-70.080 64c-1.271 1.226-2.902 2.012-4.653 2.242s-3.53-0.107-5.075-0.962c-1.405-0.449-2.612-1.369-3.416-2.605s-1.158-2.712-1-4.179c-1.395-33.588 4.238-67.099 16.536-98.386s30.994-59.662 54.888-83.31c34.836-23.971 74.355-40.287 115.954-47.877s84.335-6.279 125.39 3.845c16.53 2.411 33.398 0.756 49.144-4.819s29.896-14.905 41.224-27.181l-0.192 0.128z" />
+<glyph unicode="&#xe966;" glyph-name="youtube" data-tags="bw-youtube" d="M836.909 760.15c-153.773 10.496-496.258 10.453-649.816 0-166.272-11.349-185.856-111.787-187.093-376.149 1.237-263.892 20.651-364.756 187.093-376.148 153.6-10.458 496.043-10.496 649.816 0 166.272 11.347 185.856 111.782 187.091 376.148-1.235 263.893-20.653 364.757-187.091 376.149v0zM384 213.331v341.336l341.331-170.368-341.331-170.968z" />
+<glyph unicode="&#xe967;" glyph-name="ban" data-tags="bw-ban" d="M512 832c-246.976 0-448-201.024-448-448s201.024-448 448-448c246.976 0 448 201.024 448 448s-201.024 448-448 448zM512-128c-282.304 0-512 229.696-512 512s229.696 512 512 512c282.304 0 512-229.696 512-512s-229.696-512-512-512zM859.271 686.007l-649.28-649.28c-15.269-15.269-37.789-17.59-50.349-5.030-12.495 12.495-10.174 35.016 5.094 50.285l649.28 649.28c15.269 15.269 37.789 17.59 50.285 5.094 12.56-12.56 10.239-35.081-5.030-50.349z" />
+<glyph unicode="&#xe968;" glyph-name="camera" data-tags="bw-camera" d="M924.352 704h-821.952c-27.136 0-53.184-11.264-72.384-31.36s-30.016-47.296-30.016-75.712v-553.856c0-28.416 10.816-55.616 30.016-75.712s45.248-31.36 72.384-31.36h819.2c27.136 0 53.184 11.264 72.384 31.36s30.016 47.296 30.016 75.712v553.856c0 27.904-10.432 54.72-28.992 74.752-18.624 19.968-43.968 31.552-70.656 32.32zM955.712 43.072c0-9.472-3.584-18.56-9.984-25.216-6.4-6.72-15.104-10.496-24.128-10.496h-819.2c-9.024 0-17.728 3.776-24.128 10.496-6.4 6.656-9.984 15.744-9.984 25.216v553.856c0 9.472 3.584 18.56 9.984 25.216 6.4 6.72 15.104 10.496 24.128 10.496h819.2c9.024 0 17.728-3.776 24.128-10.496 6.4-6.656 9.984-15.744 9.984-25.216v-553.856zM876.806 571.565h-139.14c-3.567 0-6.989-2.624-9.511-7.296-2.522-4.736-3.927-11.072-3.927-17.664 0-6.656 1.405-12.992 3.927-17.664 2.522-4.736 5.945-7.36 9.511-7.36h137.987c3.567 0 6.989 2.624 9.511 7.36 2.522 4.672 3.927 11.008 3.927 17.664 0 6.592-1.405 12.928-3.927 17.664-2.522 4.672-5.945 7.296-9.511 7.296h1.153zM185.6 652.8l76.8 102.4c6.016 8.064 15.552 12.8 25.6 12.8 0 0 448 0 448 0 10.048 0 19.584-4.736 25.6-12.8l76.8-102.4 51.2 38.4-76.8 102.4c-18.112 24.192-46.592 38.4-76.8 38.4h-448c-30.208 0-58.688-14.208-76.8-38.4 0 0-76.8-102.4-76.8-102.4l51.2-38.4zM512 544c-123.648 0-224-100.352-224-224s100.352-224 224-224c123.648 0 224 100.352 224 224s-100.352 224-224 224zM512 499.2c98.88 0 179.2-80.32 179.2-179.2s-80.32-179.2-179.2-179.2c-98.88 0-179.2 80.32-179.2 179.2s80.32 179.2 179.2 179.2z" />
+<glyph unicode="&#xe969;" glyph-name="chevron-up" data-tags="bw-chevron-up" d="M512.424 607.987c26.496 0 52.928-9.152 74.56-27.456l425.664-359.936c13.44-11.392 15.232-31.616 3.776-45.12-11.456-13.44-31.616-15.040-45.12-3.712l-425.664 359.936c-19.648 16.64-47.104 16.512-66.688-0.128l-426.24-363.84c-13.312-11.584-33.6-9.92-45.056 3.584-11.456 13.44-9.856 33.6 3.584 45.056l426.176 363.776c21.696 18.56 48.384 27.84 75.008 27.84z" />
+<glyph unicode="&#xe96a;" glyph-name="desktop" data-tags="bwi-desktop" d="M270.651 0.733c0 14.498 11.753 26.252 26.252 26.252h438.020c14.498 0 26.252-11.754 26.252-26.252s-11.754-26.252-26.252-26.252h-438.020c-14.499 0-26.252 11.754-26.252 26.252zM411.444 0.733v125.15h52.502v-125.15h-52.502zM552.235 0.733v125.15h52.502v-125.15h-52.502zM-10.935 725.265c0 37.695 30.558 68.254 68.254 68.254h909.364c37.695 0 68.253-30.557 68.253-68.254v-557.383c0-37.695-30.557-68.254-68.253-68.254h-909.364c-37.695 0-68.254 30.557-68.254 68.254v557.383zM57.319 741.017c-8.698 0-15.75-7.052-15.75-15.75v-557.383c0-8.699 7.052-15.75 15.75-15.75h909.364c8.698 0 15.75 7.051 15.75 15.75v557.383c0 8.698-7.052 15.75-15.75 15.75h-909.364zM82.93 662.262c0 20.298 16.453 36.751 36.751 36.751h787.537c20.298 0 36.751-16.453 36.751-36.751v-430.52c0-20.298-16.453-36.751-36.751-36.751h-787.537c-20.298 0-36.751 16.453-36.751 36.751v430.52zM119.681 667.513c-2.899 0-5.251-2.35-5.251-5.251v-430.52c0-2.899 2.35-5.251 5.251-5.251h787.537c2.899 0 5.251 2.35 5.251 5.251v430.52c0 2.899-2.35 5.251-5.251 5.251h-787.537z" />
+<glyph unicode="&#xe96b;" glyph-name="angle-left" data-tags="bw-angle-left" d="M287.481 385.048c0.019 27.323 9.754 53.748 27.456 74.56l359.937 425.666c2.714 3.206 6.035 5.85 9.772 7.782 3.737 1.926 7.816 3.098 12.006 3.45s8.407-0.128 12.412-1.408c4.005-1.28 7.719-3.334 10.93-6.048 3.21-2.72 5.855-6.035 7.782-9.773s3.1-7.814 3.451-12.006c0.35-4.192-0.127-8.41-1.407-12.416-1.279-4-3.335-7.718-6.049-10.925l-359.937-425.73c-8.077-9.229-12.531-21.078-12.531-33.344s4.454-24.115 12.531-33.344l363.969-426.176c2.975-3.156 5.277-6.883 6.768-10.956s2.138-8.406 1.901-12.737c-0.236-4.331-1.349-8.568-3.273-12.455s-4.618-7.342-7.917-10.156c-3.3-2.814-7.138-4.927-11.28-6.213s-8.502-1.715-12.816-1.263c-4.313 0.452-8.49 1.776-12.275 3.891s-7.103 4.979-9.748 8.415l-363.841 426.176c-17.946 20.874-27.821 47.482-27.84 75.008v0z" />
+<glyph unicode="&#xe96c;" glyph-name="share-arrow" data-tags="bw-share-arrow" d="M926.469 752.44l-232.749 134.772c-7.044 4.125-15.434 5.29-23.337 3.242s-14.675-7.143-18.83-14.17c-2.043-3.454-3.383-7.281-3.939-11.258s-0.314-8.024 0.71-11.907c1.019-3.883 2.803-7.524 5.248-10.711 2.439-3.188 5.489-5.859 8.97-7.858l165.023-95.507c-115.078-23.892-751.894-183.976-750.165-804.989 0.114-8.113 3.416-15.854 9.193-21.546 5.776-5.698 13.564-8.89 21.675-8.89v0c8.134 0 15.939 3.21 21.719 8.934s9.069 13.495 9.15 21.626c-2.814 124.382 28.738 247.127 91.184 354.733s153.366 195.9 262.755 255.167c109.934 65.243 230.062 111.513 355.357 136.871l-99.705-168.48c-2.037-3.457-3.37-7.284-3.92-11.258s-0.309-8.020 0.716-11.9c1.019-3.881 2.803-7.52 5.235-10.708 2.439-3.188 5.482-5.862 8.958-7.868 4.025-2.316 8.52-3.707 13.15-4.075 5.767-0.476 11.551 0.678 16.694 3.331 5.137 2.652 9.433 6.696 12.384 11.671l135.821 229.044c2.025 3.476 3.34 7.319 3.871 11.306 0.525 3.988 0.253 8.040-0.797 11.923s-2.865 7.517-5.328 10.694c-2.469 3.177-5.544 5.832-9.044 7.812v0zM-44.466 1588.254c-0.005 0-0.010-0.006-0.015-0.006l-0.030-0.006-0.297-0.043-1.379-0.241c-1.262-0.216-3.202-0.561-5.773-1.050-5.143-0.975-12.811-2.506-22.643-4.705-19.67-4.402-47.951-11.446-81.963-21.966-68.134-21.065-158.667-55.883-248.88-110.841-179.916-109.608-356.857-297.814-355.968-618.218 0.049-17.048-13.736-30.907-30.782-30.954-17.052-0.047-30.905 13.736-30.955 30.784-0.963 348.516 193.567 554.131 385.585 671.113 95.755 58.334 191.304 95.006 262.762 117.102 35.784 11.063 65.676 18.521 86.729 23.231 10.531 2.352 18.863 4.019 24.628 5.112 2.883 0.55 5.126 0.951 6.682 1.222l1.814 0.309 0.666 0.105 0.052 0.013c0.018 0 0.035 0.006 4.894-30.48l-4.859 30.486c16.836 2.68 32.66-8.792 35.343-25.627 2.683-16.829-8.781-32.646-25.606-35.339-0.001 0-0.001 0-0.003 0z" />
+<glyph unicode="&#xe96d;" glyph-name="eye-slash" data-tags="bw-eye-slash" d="M919.609 358.255c-76.096-69.696-229.952-189.504-406.976-189.504-51.2 0-97.792 9.024-144.576 24.896l63.808 63.872c24.576-14.144 49.984-22.272 80.192-22.080 84.096 0.704 151.232 63.936 151.808 147.776 0.192 30.144-8.512 58.944-23.936 82.304l82.752 82.752c84.544-41.088 155.136-97.92 198.4-138.432 15.36-14.336 14.144-37.312-1.472-51.584zM407.417 383.279c-1.28 58.432 46.784 104 104.256 104 17.28 0 33.6-4.224 48.064-11.584l-139.712-139.712c-7.808 14.016-12.608 30.080-12.608 47.296zM615.545 383.279c-1.216-55.616-46.592-99.584-103.168-100.416-16.768-0.192-29.568 2.88-45.376 9.792l137.792 137.792c7.232-13.888 10.752-30.464 10.752-47.168zM103.609 357.999c-16.384 14.72-16.96 38.336-1.6 52.672 76.16 71.36 231.168 189.568 410.048 190.592 52.032 0.256 100.224-9.536 146.816-26.432l-64.384-64.384c-24.384 15.232-51.84 24.32-82.56 24.32-84.096 0-154.24-67.2-153.024-151.488 0.448-30.528 10.048-58.56 26.24-82.176l-81.28-81.28c-85.824 40.512-155.904 98.304-200.256 138.176zM1007.545 425.583c-6.016 7.040-93.248 108.224-229.312 178.304l174.144 173.952c12.544 12.544 13.504 32 0.96 44.48-12.48 12.672-33.472 13.376-46.016 0.896l-190.976-190.912c-62.592 25.088-130.496 40.96-205.44 40.96-278.848 0.192-482.688-236.48-498.048-253.952-17.472-19.776-17.088-49.024 0.32-66.304 6.080-7.104 113.728-124.288 236.928-187.008l-176.384-176.384c-12.48-12.48-13.248-31.872-0.768-44.416 6.272-6.272 14.464-9.408 22.656-9.408s17.088 2.432 23.296 8.576l192.96 193.088c62.080-24.448 126.464-40.64 200.384-40.192 280.064 1.728 478.72 228.608 494.976 246.784 1.408 1.6 3.584 3.648 4.864 5.312 17.664 22.464 15.488 56.32-4.544 76.224z" />
+<glyph unicode="&#xe96e;" glyph-name="file" data-tags="bw-file" d="M896-32c0-17.664-14.336-32-32-32h-704c-17.664 0-32 14.336-32 32v832c0 17.664 14.336 32 32 32h397.632c17.664 0 32-14.336 32-32v-194.496c0-53.056 43.008-96 96-96h178.368c17.664 0 32-14.4 32-32v-509.504zM653.632 764.8c0 11.072 13.504 16.512 21.184 8.576l173.632-179.008c7.616-7.808 2.048-20.864-8.832-20.864h-153.984c-17.664 0-32 14.336-32 32v159.296zM941.952 589.952l-278.080 286.592c-12.032 12.48-28.608 19.456-45.952 19.456h-489.92c-35.392 0-64-28.608-64-64v-896c0-35.392 28.608-64 64-64h768c35.392 0 64 28.608 64 64v609.344c0 16.64-6.528 32.64-18.048 44.608z" />
+<glyph unicode="&#xe96f;" glyph-name="paste" data-tags="bw-paste" d="M980.622 567.040c24.32 0 43.52-19.2 43.52-43.52v-608.64c0-23.68-19.2-42.88-43.52-42.88h-520.96c-23.68 0-43.52 19.2-43.52 42.88v285.44h-372.48c-23.68 0-43.52 19.84-43.52 43.52v414.080c0 0-0.64 122.88 0 192.64 0.64 24.96 23.68 45.44 49.28 45.44 133.76 0 515.2 0 515.2 0 24.32 0 43.52-19.84 43.52-43.52v-307.84l8.96 8.96c8.32 8.96 19.84 13.44 31.36 13.44h332.16zM960.142-32v503.040c0 17.28-14.080 32-32 32h-218.24c-17.92 0-32-14.72-32-32v-101.12c0-41.6-33.92-75.52-75.52-75.52h-90.24c-17.28 0-32-14.72-32-32v-294.4c0-17.92 14.72-32 32-32h416c17.92 0 32 14.080 32 32zM136.462 832.64l-27.52 0.64c-11.52 0-23.040-5.12-31.36-12.8-8.32-8.32-12.8-19.84-12.8-31.36 0-69.76-0.64-198.4-0.64-198.4v-294.4c0-17.28 14.72-32 32-32h320v64.64c0 11.52 4.48 22.4 12.16 30.080l115.84 119.68v321.28c0 17.28-14.080 32-32 32h-39.040l-42.88-94.080c-8.96-20.48-29.44-33.28-51.84-33.28h-149.12c-21.76 0-41.6 12.8-50.56 32.64l-42.24 95.36zM613.902 443.52c-1.28 6.4-7.040 5.12-10.24 4.48l-77.44-80c-0.64-1.28-4.48-8.32 5.12-9.6h71.040c6.4 0 11.52 5.12 11.52 11.52v73.6c0 0 0 0 0 0zM185.742 832.64l33.92-77.44c1.92-3.2 5.76-5.76 9.6-5.76 0 0 149.12 0 149.12 0 5.12 0 8.96 2.56 11.52 7.040l33.92 75.52-238.080 0.64z" />
+<glyph unicode="&#xe970;" glyph-name="dbl-angle-left" data-tags="dbl-angle-left" d="M194.154 384.81c0.026 21.862 7.808 43.008 21.965 59.648l287.949 340.531c2.176 2.56 4.838 4.685 7.808 6.221s6.246 2.483 9.6 2.765c3.354 0.282 6.733-0.102 9.933-1.126s6.17-2.662 8.755-4.838c2.586-2.176 4.685-4.838 6.221-7.808s2.483-6.246 2.765-9.6c0.282-3.354-0.102-6.733-1.126-9.933s-2.662-6.17-4.838-8.73l-287.949-340.582c-6.451-7.373-10.035-16.87-10.035-26.675s3.558-19.302 10.035-26.675l291.174-340.941c2.381-2.534 4.224-5.504 5.402-8.755s1.715-6.733 1.51-10.189c-0.179-3.456-1.075-6.861-2.611-9.958s-3.686-5.862-6.323-8.115c-2.637-2.253-5.709-3.942-9.011-4.966s-6.81-1.382-10.24-0.998c-3.456 0.358-6.784 1.434-9.83 3.123s-5.683 3.994-7.808 6.733l-291.072 340.941c-14.362 16.691-22.246 37.99-22.272 60.006v-0.077zM470.634 384.81c0.026 21.862 7.808 43.008 21.965 59.648l287.949 340.531c2.176 2.56 4.838 4.685 7.808 6.221s6.246 2.483 9.6 2.765c3.354 0.282 6.733-0.102 9.933-1.126s6.17-2.662 8.755-4.838c2.586-2.176 4.685-4.838 6.221-7.808s2.483-6.246 2.765-9.6c0.282-3.354-0.102-6.733-1.126-9.933s-2.662-6.17-4.838-8.73l-287.949-340.582c-6.451-7.373-10.035-16.87-10.035-26.675s3.558-19.302 10.035-26.675l291.174-340.941c2.381-2.534 4.224-5.504 5.402-8.755s1.715-6.733 1.51-10.189c-0.179-3.456-1.075-6.861-2.611-9.958s-3.686-5.862-6.323-8.115c-2.637-2.253-5.709-3.942-9.011-4.966s-6.81-1.382-10.24-0.998c-3.456 0.358-6.784 1.434-9.83 3.123s-5.683 3.994-7.808 6.733l-291.072 340.941c-14.362 16.691-22.246 37.99-22.272 60.006v-0.077z" />
+<glyph unicode="&#xe971;" glyph-name="dbl-angle-right" data-tags="dbl-angle-right" d="M829.846 383.19c-0.026-21.862-7.808-43.008-21.965-59.648l-287.95-340.531c-2.176-2.56-4.838-4.685-7.808-6.221s-6.246-2.483-9.6-2.765c-3.354-0.282-6.732 0.102-9.932 1.126s-6.17 2.662-8.755 4.838c-2.586 2.176-4.685 4.838-6.221 7.808s-2.483 6.246-2.765 9.6c-0.282 3.354 0.102 6.733 1.126 9.933s2.662 6.17 4.838 8.73l287.949 340.582c6.451 7.373 10.035 16.87 10.035 26.675s-3.558 19.302-10.035 26.675l-291.174 340.941c-2.381 2.534-4.224 5.504-5.402 8.755s-1.715 6.733-1.51 10.189c0.179 3.456 1.075 6.861 2.611 9.958s3.686 5.862 6.323 8.115c2.637 2.253 5.709 3.942 9.011 4.966s6.81 1.383 10.24 0.998c3.456-0.358 6.784-1.434 9.83-3.123s5.683-3.994 7.808-6.733l291.072-340.941c14.362-16.691 22.246-37.99 22.272-60.006v0.077zM553.366 383.19c-0.026-21.862-7.808-43.008-21.965-59.648l-287.95-340.531c-2.176-2.56-4.838-4.685-7.808-6.221s-6.246-2.483-9.6-2.765c-3.354-0.282-6.732 0.102-9.932 1.126s-6.17 2.662-8.755 4.838c-2.586 2.176-4.685 4.838-6.221 7.808s-2.483 6.246-2.765 9.6c-0.282 3.354 0.102 6.733 1.126 9.933s2.662 6.17 4.838 8.73l287.949 340.582c6.451 7.373 10.035 16.87 10.035 26.675s-3.558 19.302-10.035 26.675l-291.174 340.941c-2.381 2.534-4.224 5.504-5.402 8.755s-1.715 6.733-1.51 10.189c0.179 3.456 1.075 6.861 2.611 9.958s3.686 5.862 6.323 8.115c2.637 2.253 5.709 3.942 9.011 4.966s6.81 1.383 10.24 0.998c3.456-0.358 6.784-1.434 9.83-3.123s5.683-3.994 7.808-6.733l291.072-340.941c14.362-16.691 22.246-37.99 22.272-60.006v0.077z" />
+<glyph unicode="&#xe972;" glyph-name="hamburger" data-tags="hamburger" d="M124.592 570.944c250.267 0 514.297 0 774.767 0 2.433-0.128 4.891 0.23 7.172 1.101 2.28 0.87 4.385 2.176 6.158 3.866 1.775 1.69 3.194 3.738 4.156 6.016 0.964 2.278 1.47 4.71 1.47 7.168s-0.507 4.915-1.47 7.168c-0.963 2.278-2.382 4.301-4.156 6.016s-3.878 3.021-6.158 3.866c-2.281 0.845-4.739 1.229-7.172 1.101-268.743 0-533.679 0-774.767 0-2.433 0.128-4.892-0.23-7.172-1.101s-4.385-2.176-6.158-3.866c-1.775-1.69-3.194-3.738-4.156-6.016-0.964-2.278-1.47-4.71-1.47-7.168s0.507-4.915 1.47-7.168c0.963-2.253 2.382-4.301 4.156-6.016 1.774-1.69 3.877-3.021 6.158-3.866s4.739-1.229 7.172-1.101zM899.409 403.571c-255.803 0-508.137 0-774.817 0-2.433 0.128-4.892-0.23-7.172-1.101s-4.385-2.176-6.158-3.866c-1.775-1.69-3.194-3.738-4.156-6.016-0.964-2.278-1.47-4.71-1.47-7.168s0.507-4.915 1.47-7.168c0.963-2.253 2.382-4.301 4.156-6.016 1.774-1.69 3.877-3.021 6.158-3.866s4.739-1.229 7.172-1.101c267.311 0 522.181 0 774.817 0 2.433-0.128 4.892 0.23 7.172 1.101s4.385 2.176 6.159 3.866c1.774 1.69 3.193 3.738 4.156 6.016s1.469 4.71 1.469 7.168-0.507 4.915-1.469 7.168c-0.964 2.278-2.383 4.301-4.156 6.016-1.775 1.715-3.878 3.021-6.159 3.866s-4.739 1.229-7.172 1.101zM899.562 197.081c-279.925 1.835-505.576 3.344-774.868 5.12-4.765 0-9.352-1.92-12.722-5.325s-5.273-8.038-5.273-12.851 1.902-9.446 5.273-12.851c3.37-3.405 7.958-5.325 12.722-5.325 274.017-1.807 495.671-3.254 774.868-5.12 4.765 0 9.351 1.92 12.722 5.325s5.272 8.038 5.272 12.851c0 4.813-1.901 9.446-5.272 12.851s-7.958 5.325-12.722 5.325z" />
+<glyph unicode="&#xe973;" glyph-name="rss" data-tags="rss" d="M113.92 751.458c0 16.913 13.709 30.622 30.622 30.622 422.796 0 765.538-342.743 765.538-765.538 0-16.913-13.709-30.622-30.622-30.622s-30.622 13.709-30.622 30.622c0 388.972-315.324 704.295-704.295 704.295-16.913 0-30.622 13.709-30.622 30.622zM113.92 539.891c0 16.913 13.709 30.622 30.622 30.622 305.95 0 553.971-248.021 553.971-553.971 0-16.913-13.709-30.622-30.622-30.622s-30.622 13.709-30.622 30.622c0 272.126-220.602 492.728-492.728 492.728-16.913 0-30.622 13.709-30.622 30.622zM278.163 253.162c-56.885 0-103-46.115-103-103s46.115-103 103-103c56.885 0 103 46.115 103 103s-46.115 103-103 103zM113.92 150.163c0 90.709 73.534 164.243 164.243 164.243s164.243-73.534 164.243-164.243c0-90.709-73.534-164.243-164.243-164.243s-164.243 73.534-164.243 164.243z" />
+<glyph unicode="&#xe974;" glyph-name="safari" data-tags="safari" d="M921.979 384c0-226.425-183.554-409.979-409.979-409.979s-409.979 183.554-409.979 409.979c0 226.425 183.554 409.979 409.979 409.979s409.979-183.554 409.979-409.979zM512 741.641c-4.818 0-8.723-3.906-8.723-8.722v-52.338c0-4.818 3.906-8.723 8.723-8.723s8.723 3.906 8.723 8.723v52.338c0 4.817-3.906 8.722-8.723 8.722zM754.937 597.737l-269.173-183.683-219.92-240.475 269.173 183.683 219.92 240.475zM503.277 87.419v-52.338c0-4.817 3.906-8.722 8.723-8.722s8.723 3.906 8.723 8.722v52.338c0 4.818-3.906 8.723-8.723 8.723s-8.723-3.906-8.723-8.723zM869.641 384c0 4.818-3.906 8.723-8.722 8.723h-52.338c-4.818 0-8.723-3.906-8.723-8.723s3.906-8.723 8.723-8.723h52.338c4.817 0 8.722 3.906 8.722 8.723zM215.419 392.723h-52.338c-4.817 0-8.722-3.906-8.722-8.723s3.906-8.723 8.722-8.723h52.338c4.818 0 8.723 3.906 8.723 8.723s-3.906 8.723-8.723 8.723zM690.819 693.726c-4.172 2.409-9.507 0.98-11.915-3.193l-26.169-45.325c-2.408-4.173-0.979-9.508 3.193-11.916s9.507-0.979 11.916 3.193l26.168 45.326c2.408 4.172 0.979 9.507-3.193 11.915zM356.153 131.514l-26.168-45.325c-2.409-4.172-0.98-9.507 3.193-11.916 4.172-2.408 9.507-0.979 11.915 3.193l26.169 45.326c2.408 4.172 0.979 9.507-3.193 11.915s-9.507 0.98-11.916-3.193zM821.725 205.179c2.408 4.173 0.979 9.508-3.193 11.916l-45.326 26.168c-4.172 2.409-9.507 0.98-11.915-3.193s-0.98-9.507 3.193-11.915l45.325-26.169c4.172-2.408 9.507-0.979 11.916 3.193zM259.513 539.845l-45.326 26.169c-4.172 2.408-9.507 0.979-11.915-3.193-2.408-4.173-0.979-9.507 3.193-11.916l45.325-26.168c4.173-2.409 9.508-0.98 11.916 3.193s0.979 9.507-3.193 11.915zM821.725 562.82c-2.409 4.172-7.745 5.601-11.916 3.193l-45.325-26.168c-4.173-2.409-5.602-7.745-3.193-11.916 2.408-4.172 7.743-5.601 11.915-3.193l45.326 26.169c4.172 2.408 5.601 7.743 3.193 11.915zM250.79 243.263l-45.325-26.169c-4.172-2.408-5.601-7.743-3.193-11.915s7.743-5.601 11.915-3.193l45.326 26.168c4.172 2.409 5.601 7.745 3.193 11.916s-7.743 5.601-11.916 3.193zM690.818 74.273c4.172 2.409 5.601 7.743 3.193 11.916l-26.168 45.325c-2.409 4.173-7.745 5.602-11.916 3.193s-5.601-7.743-3.193-11.915l26.169-45.326c2.408-4.172 7.743-5.601 11.915-3.193zM371.261 645.208l-26.169 45.325c-2.408 4.172-7.743 5.601-11.915 3.193s-5.601-7.743-3.193-11.915l26.168-45.326c2.409-4.172 7.745-5.601 11.916-3.193s5.601 7.743 3.193 11.916zM983.040 384c0 260.148-210.892 471.040-471.040 471.040s-471.040-210.892-471.040-471.040c0-260.148 210.892-471.040 471.040-471.040s471.040 210.892 471.040 471.040zM956.871 384c0-245.695-199.175-444.871-444.871-444.871s-444.871 199.175-444.871 444.871c0 245.695 199.176 444.871 444.871 444.871s444.871-199.176 444.871-444.871z" />
+<glyph unicode="&#xe975;" glyph-name="opera" data-tags="opera" d="M356.979 643.125c-52.14-60.305-85.879-149.451-88.176-249.45v-21.623c2.444-100 36.036-189.145 88.176-249.452 67.596-85.999 167.902-140.56 280.278-140.56 68.862 0 133.426 20.583 188.628 56.553-83.112-73.239-193.221-117.581-313.87-117.581-7.507 0-15.044 0.144-22.374 0.606-249.983 11.403-448.68 213.481-448.68 461.287 0 255.167 210.826 461.894 471.054 461.894h1.855c119.912-0.462 229.256-44.804 312.044-117.581-55.201 35.797-119.765 56.553-188.746 56.553-112.258 0-212.681-54.59-280.307-140.56l0.118-0.087zM983.040 382.849c0-136.836-60.737-259.671-157.185-344.313-120.678-57.737-233.378-17.321-270.621 7.968 118.676 25.548 208.353 166.137 208.353 336.345s-89.706 310.768-208.353 336.345c37.243 25.289 149.942 65.56 270.621 7.968 96.449-84.498 157.185-207.477 157.185-344.313z" />
+<glyph unicode="&#xe976;" glyph-name="firefox" data-tags="firefox" d="M965.079 513.058v0.147c-0.463 1.598-0.947 3.196-1.431 4.794-0.105 0.399-0.231 0.799-0.357 1.178-0.904 3.028-1.83 6.057-2.798 9.063l-0.126 0.421c-5.901 18.332-12.925 36.282-21.032 53.752-7.853 17.302-16.92 34.026-27.131 50.050-39.443 63.355-93.305 116.489-157.192 155.071v0c-73.338 44.289-157.41 67.636-243.086 67.505-14.722 0-29.444-0.715-43.788-2.103-50.729-5.341-136.244-23.574-205.628-84.496 252.572 128.953 590.006-26.329 561.298-315.064-10.222-103.044-97.714-173.851-179.17-185.796-14.489-2.214-29.217-2.362-43.746-0.441-198.941 27.653-186.763 190.695-126.318 260.408-79.921 0.505-141.902-98.397-111.784-195.575-69.3 128.658 0.735 330.163 149.178 391.149-174.459 25.235-338.003-59.303-390.562-206.236 6.277 53.708 18.806 106.499 37.332 157.301 0 0-95.106-75.16-114.497-233.218-0.295-2.439-0.568-4.878-0.82-7.339-0.105-0.841-0.189-1.682-0.274-2.545-0.743-7.361-1.304-14.769-1.683-22.228 0-0.567 0-1.136 0-1.703-0.147-3.113-0.273-6.309-0.357-9.38v-2.629c0-3.701-0.147-7.402-0.147-11.125 0-260.155 210.929-471.060 471.114-471.060s470.966 210.863 470.966 471.018c0.023 43.651-6.022 87.093-17.961 129.079v0z" />
+<glyph unicode="&#xe977;" glyph-name="edge" data-tags="edge" d="M941.273 614.819c-78 152.513-246.369 240.221-429.445 240.221-225.847 0-414.985-158.932-460.664-371.614 49.403 88.297 163.828 150.31 283.991 150.31 150.622 0 230.085-92.932 232.289-95.307 41.802-45.202 62.704-95.704 62.704-157.83 0-19.752-10.089-49.039-28.711-73.255-2.983-3.799-12.142-9.192-12.142-20.892 0-9.611 6.252-18.842 17.367-26.59 52.937-36.789 152.712-31.927 152.978-31.927 39.203 0.108 77.659 10.719 111.365 30.73 34.018 19.857 62.251 48.259 81.9 82.387 19.649 34.129 30.029 72.799 30.113 112.176 0.95 82.485-29.452 137.317-41.745 161.59zM429.857-33.197c-35.24 21.924-65.442 51.050-88.621 85.468-62.59 90.064-65.060 181.571-38.192 258.302 19.106 60.255 57.048 112.794 108.249 149.891 112.106 85.848 180.207 10.732 188.226 1.9-2.641 6.629-5.746 13.065-9.292 19.258-17.556 30.256-45.603 69.153-107.471 101.631-64.072 33.598-134.129 35.308-147.525 35.308-73.553 0-148.019-24.691-204.319-67.786-37.547-28.679-81.078-76.959-89.002-142.066-2.052-23.38-5.225-119.274 43.703-224.628 41.269-88.010 108.766-161.104 193.233-209.256 84.469-48.153 181.771-69.006 278.565-59.701-72.433 12.574-125.123 50.597-127.555 51.679zM906.253 153.56c-2.237 1.417-4.816 2.206-7.464 2.282s-5.268-0.561-7.585-1.846c-12.559-6.564-25.511-12.348-38.781-17.321-42.264-15.802-87.031-23.857-132.153-23.779-174.183 0-325.907 119.769-325.907 273.496 0.21 17.657 4.447 35.033 12.388 50.806-30.32-26.729-55.308-58.951-73.648-94.964-28.349-55.781-62.704-167.384 25.329-288.045 12.37-16.923 43.702-56.978 106.406-90.539 44.786-24.025 93.106-37.245 136.238-37.245 66.771 0 219.331 63.513 309.719 206.775 1.047 1.634 1.759 3.459 2.097 5.37s0.295 3.87-0.127 5.764c-0.422 1.893-1.214 3.685-2.333 5.273-1.117 1.586-2.537 2.937-4.179 3.973v0z" />
+<glyph unicode="&#xe978;" glyph-name="chrome" data-tags="chrome" d="M779.171 618.655c45.014-0.13 90.080-0.261 135.269-0.261 2.846 8.531-14.939 30.041-25.659 43.008-2.59 3.132-4.768 5.766-6.143 7.598-12.956 17.653-28.268 35.306-43.579 50.606-30.625 30.599-65.96 56.491-103.65 77.675-131.919 74.144-297.994 76.498-433.446 9.415-31.801-16.477-62.425-36.484-89.516-58.845-14.134-11.769-28.268-24.714-41.224-38.837-1.95-2.226-4.492-4.781-7.253-7.557-8.916-8.961-20.115-20.219-21.016-30.104-0.852-11.924 11.251-28.78 21.129-42.537 3.77-5.252 7.217-10.052 9.495-13.953 5.888-10 11.775-19.707 17.663-29.413 5.889-9.71 11.783-19.428 17.672-29.432 7.46-12.553 14.789-25.238 22.117-37.922 14.658-25.368 29.316-50.737 45.020-75.059 35.335 107.097 118.962 174.179 233.213 175.357 90.255 0.783 179.987 0.523 269.894 0.261h0.014zM572.884 7.976c-18.499-31.531-36.983-63.035-55.376-94.54 85.982-4.707 176.677 25.892 248.525 74.144 126.029 82.383 209.656 220.079 216.722 370.721 1.179 41.191-1.178 83.559-9.423 123.573-4.71 18.829-9.423 37.662-16.489 56.491-7.067 21.183-11.778 22.361-34.158 22.361h-247.346c36.513-42.368 67.137-87.090 75.382-143.581 8.245-58.844-7.067-112.981-35.335-163.587-46.717-82.324-94.661-164.041-142.502-245.582zM578.756 153.522c-23.557-41.191-47.113-82.383-71.848-123.574-5.3-9.415-10.6-18.534-15.901-27.655l-0.008-0.014c-5.298-9.117-10.595-18.233-15.894-27.644l-17.667-31.776c-0.435-0.87-0.906-1.847-1.413-2.899-3.608-7.481-9.026-18.721-16.255-21.816-9.84-3.932-27.899 1.991-40.445 6.106-2.472 0.811-4.73 1.551-6.668 2.132-16.489 4.708-32.98 9.416-49.469 15.3-31.801 11.77-61.247 27.069-89.516 45.9-122.495 80.028-199.055 211.84-210.834 356.597-8.245 91.798 10.601 191.833 57.714 271.862 37.305-60.65 71.895-123.337 106.503-186.055 29.86-54.114 59.733-108.252 91.375-161.127 28.269-48.253 67.137-85.914 117.785-108.274 54.18-22.361 106.006-20.008 162.542-7.062zM450.373 547.78c-70.67-27.068-122.496-100.036-114.251-176.534 3.141-3.139 3.141-10.984 3.141-17.61 0-3.313 0-6.32 0.393-8.281 2.355-11.77 7.067-24.715 11.778-35.308 9.423-20.007 22.38-38.837 38.869-54.137 32.979-31.776 73.026-47.075 117.784-49.43 74.204-4.707 144.874 48.253 169.609 116.513 23.557 65.906 4.711 143.58-48.291 190.655-48.292 43.546-117.785 57.668-179.032 34.13z" />
+<glyph unicode="&#xe979;" glyph-name="star-f" data-tags="star-f" d="M286.238-26.455c-16.945 0.028-33.419 5.463-47.036 15.531-11.565 8.43-20.551 19.94-25.902 33.225s-6.878 27.789-4.382 41.877l34.057 193.689c0.583 3.438 0.305 6.961-0.804 10.261s-3.022 6.268-5.575 8.653l-144.324 137.169c-10.51 9.845-17.971 22.492-21.577 36.441s-3.189 28.621 1.22 42.321c4.493 14.005 12.841 26.457 24.128 35.886s25.015 15.475 39.603 17.417l199.68 28.288c3.689 0.471 7.182 1.858 10.233 3.966s5.518 4.937 7.239 8.237l88.857 176.217c6.601 12.951 16.668 23.822 29.092 31.394s26.707 11.509 41.239 11.426c14.532 0.11 28.814-3.854 41.212-11.426s22.464-18.443 29.065-31.394l89.246-176.273c1.692-3.273 4.16-6.101 7.182-8.209s6.517-3.467 10.178-3.938l199.68-28.288c14.588-1.941 28.316-7.987 39.603-17.417s19.662-21.881 24.128-35.886c4.409-13.7 4.825-28.398 1.22-42.321s-11.093-26.569-21.577-36.441l-144.213-137.169c-2.551-2.385-4.465-5.353-5.602-8.653s-1.415-6.823-0.832-10.261l34.112-193.689c2.496-14.089 0.971-28.621-4.382-41.877s-14.311-24.793-25.902-33.225c-11.87-8.736-25.959-14.005-40.657-15.198s-29.425 1.747-42.542 8.487l-178.825 91.465c-3.383 1.719-7.155 2.635-10.955 2.635s-7.571-0.887-10.955-2.635l-178.436-91.52c-11.287-5.769-23.795-8.764-36.497-8.764z" />
+<glyph unicode="&#xe97a;" glyph-name="arrow-circle-up" data-tags="arrow-circle-up" d="M959.114 383.998c0-87.354-26.212-172.721-75.339-245.336s-118.961-129.223-200.673-162.647c-81.711-33.424-171.611-42.173-258.324-25.116s-166.413 59.092-228.926 120.86c-62.541 61.769-105.101 140.456-122.37 226.099s-8.384 174.46 25.43 255.134c33.842 80.702 91.157 149.647 164.68 198.196 73.523 48.548 159.985 74.41 248.402 74.41 118.543-0.138 232.196-46.699 316.003-129.499s130.978-195.022 131.117-312.101zM120.765 383.998c0-76.424 22.943-151.138 65.922-214.673s104.095-113.077 175.578-142.306c71.484-29.256 150.148-36.901 226.047-21.997s145.593 51.722 200.31 105.736c54.716 54.041 91.966 122.875 107.057 197.837s7.35 152.656-22.272 223.256c-29.621 70.601-79.755 130.962-144.084 173.411-64.33 42.449-139.977 65.108-217.357 65.108-103.732-0.11-203.161-40.876-276.515-113.298s-114.603-170.651-114.715-273.102l0.029 0.028zM370.936 538.601l110.455 102.383c9.467 8.689 21.997 13.306 34.886 12.87s25.061-5.902 33.893-15.22l102.12-108.039c4.664-5.52 7.038-12.597 6.596-19.783s-3.643-13.936-8.97-18.854c-5.327-4.918-12.365-7.595-19.624-7.541s-14.242 2.897-19.458 7.897l-63.646 67.327c-0.718 0.465-1.546 0.737-2.401 0.792-0.856 0.054-1.711-0.082-2.484-0.438-0.8-0.356-1.463-0.874-1.987-1.558s-0.856-1.448-0.994-2.295l-1.38-421.227c-0.331-7.241-3.45-14.072-8.749-19.099s-12.337-7.815-19.651-7.815c-7.314 0-14.352 2.788-19.651 7.815s-8.418 11.858-8.749 19.099l1.546 418.112c-3.036 9.235-11.316 1.858-11.316 1.858l-61.769-57.326c-5.575-4.645-12.724-6.967-19.982-6.53s-14.076 3.606-19.044 8.881c-4.968 5.273-7.673 12.241-7.618 19.427s2.926 14.1 7.976 19.264z" />
+<glyph unicode="&#xe97b;" glyph-name="arrow-circle-right" data-tags="arrow-circle-right" d="M511.998-62.715c-87.276 0-172.567 26.19-245.117 75.273s-129.107 118.855-162.502 200.493c-33.394 81.638-42.134 171.457-25.094 258.093 17.042 86.635 59.039 166.264 120.752 228.721 61.714 62.485 140.33 105.007 225.897 122.261s174.304 8.376 254.906-25.407c80.63-33.812 149.513-91.076 198.019-164.533s74.344-159.842 74.344-248.181c-0.138-118.436-46.657-231.987-129.383-315.719s-194.848-130.861-311.822-131.001zM511.998 774.886c-76.356 0-151.003-22.922-214.481-65.863s-112.976-104.002-142.179-175.421c-29.23-71.42-36.868-150.014-21.977-225.845s51.676-145.463 105.642-200.131c53.993-54.667 122.765-91.884 197.66-106.961s152.52-7.343 223.056 22.252c70.538 29.595 130.845 79.684 173.256 143.955s65.050 139.851 65.050 217.162c-0.11 103.639-40.839 202.979-113.197 276.268s-170.498 114.499-272.858 114.612l0.028-0.029zM666.463 524.933l102.293-110.356c8.681-9.459 13.294-21.977 12.858-34.855s-5.896-25.039-15.206-33.863l-107.942-102.029c-5.515-4.66-12.586-7.032-19.765-6.59s-13.923 3.64-18.837 8.962-7.589 12.354-7.535 19.606c0.055 7.253 2.894 14.229 7.89 19.441l67.267 63.589c0.464 0.717 0.737 1.545 0.792 2.399 0.054 0.855-0.083 1.709-0.437 2.482-0.355 0.799-0.874 1.462-1.556 1.985s-1.447 0.855-2.293 0.993l-420.85 1.379c-7.234 0.331-14.060 3.447-19.083 8.741s-7.807 12.326-7.807 19.633c0 7.307 2.784 14.339 7.807 19.633s11.849 8.41 19.083 8.741l417.737-1.545c9.228 3.033 1.856 11.306 1.856 11.306l-57.274 61.714c-4.641 5.57-6.961 12.713-6.524 19.964s3.603 14.063 8.872 19.027c5.269 4.964 12.23 7.666 19.41 7.611s14.087-2.923 19.246-7.969z" />
+<glyph unicode="&#xe97c;" glyph-name="arrow-circle-left" data-tags="arrow-circle-left" d="M512.002 830.714c87.276 0 172.567-26.189 245.117-75.272s129.107-118.856 162.502-200.493c33.394-81.638 42.135-171.457 25.094-258.093s-59.039-166.264-120.752-228.721c-61.714-62.485-140.33-105.007-225.897-122.261s-174.304-8.376-254.906 25.407c-80.63 33.812-149.513 91.075-198.019 164.533-48.505 73.457-74.344 159.842-74.344 248.18 0.138 118.437 46.657 231.988 129.383 315.72s194.848 130.861 311.822 131.001zM512.002-6.886c76.356 0 151.003 22.923 214.481 65.864s112.976 104.002 142.179 175.421c29.23 71.419 36.868 150.014 21.977 225.845s-51.676 145.463-105.642 200.131c-53.993 54.667-122.765 91.884-197.66 106.961s-152.52 7.343-223.056-22.252c-70.538-29.595-130.845-79.684-173.256-143.955s-65.050-139.852-65.050-217.162c0.11-103.639 40.839-202.979 113.197-276.268s170.498-114.5 272.858-114.612l-0.028 0.028zM357.537 243.069l-102.292 110.356c-8.682 9.459-13.295 21.977-12.859 34.855s5.896 25.039 15.206 33.863l107.943 102.029c5.514 4.66 12.584 7.032 19.765 6.59 7.179-0.442 13.922-3.64 18.836-8.962s7.59-12.354 7.535-19.606c-0.054-7.253-2.893-14.229-7.89-19.441l-67.267-63.589c-0.463-0.717-0.737-1.545-0.791-2.399-0.055-0.855 0.082-1.709 0.437-2.482 0.354-0.799 0.874-1.462 1.555-1.985 0.683-0.524 1.447-0.855 2.293-0.993l420.85-1.379c7.234-0.331 14.060-3.447 19.083-8.741s7.807-12.326 7.807-19.633c0-7.307-2.784-14.339-7.807-19.633s-11.849-8.41-19.083-8.741l-417.737 1.545c-9.228-3.033-1.856-11.306-1.856-11.306l57.274-61.714c4.641-5.57 6.962-12.713 6.525-19.964s-3.603-14.063-8.873-19.027c-5.269-4.964-12.23-7.666-19.409-7.611-7.18 0.055-14.087 2.923-19.247 7.969z" />
+<glyph unicode="&#xe97d;" glyph-name="arrow-circle-down" data-tags="arrow-circle-down" d="M64.886 384.002c0 87.354 26.212 172.721 75.339 245.336s118.963 129.223 200.673 162.647c81.711 33.424 171.611 42.173 258.324 25.116s166.413-59.092 228.926-120.86c62.541-61.769 105.101-140.456 122.37-226.099s8.384-174.46-25.43-255.134c-33.842-80.702-91.157-149.647-164.68-198.196s-159.985-74.41-248.402-74.41c-118.543 0.138-232.196 46.699-316.003 129.499s-130.978 195.022-131.118 312.101zM903.236 384.002c0 76.424-22.944 151.138-65.923 214.673-42.978 63.535-104.095 113.077-175.578 142.306-71.483 29.256-150.148 36.901-226.047 21.997s-145.593-51.722-200.31-105.736c-54.716-54.041-91.966-122.875-107.057-197.837s-7.35-152.656 22.272-223.256c29.621-70.601 79.755-130.962 144.084-173.411s139.977-65.108 217.357-65.108c103.732 0.11 203.161 40.876 276.515 113.298s114.603 170.651 114.715 273.102l-0.028-0.028zM653.057 229.399l-110.455-102.383c-9.467-8.69-21.997-13.306-34.886-12.87s-25.061 5.902-33.893 15.219l-102.12 108.040c-4.664 5.519-7.038 12.597-6.596 19.783s3.643 13.935 8.97 18.853c5.327 4.918 12.365 7.596 19.624 7.541s14.242-2.896 19.458-7.896l63.646-67.327c0.718-0.465 1.546-0.739 2.401-0.792 0.856-0.055 1.711 0.082 2.484 0.438 0.8 0.356 1.463 0.874 1.987 1.558 0.524 0.682 0.856 1.447 0.994 2.295l1.38 421.227c0.331 7.24 3.45 14.072 8.749 19.099s12.337 7.814 19.651 7.814c7.314 0 14.352-2.787 19.651-7.814s8.418-11.859 8.749-19.099l-1.546-418.112c3.036-9.235 11.316-1.858 11.316-1.858l61.769 57.326c5.575 4.645 12.724 6.967 19.982 6.53s14.076-3.606 19.044-8.881c4.968-5.274 7.673-12.241 7.618-19.427s-2.926-14.1-7.976-19.264z" />
+<glyph unicode="&#xe97e;" glyph-name="undo" data-tags="undo" d="M69.695 605.356c5.916 3.346 12.942 4.267 19.569 2.594s12.316-5.8 15.873-11.517l51.197-84.382c0.882-1.45 2.191-2.621 3.726-3.375s3.27-1.087 4.977-0.948c1.707 0.139 3.356 0.781 4.75 1.784s2.417 2.399 3.042 3.988c32.368 88.313 96.224 162.183 179.818 207.915 94.006 52.341 205.105 66.591 309.69 39.765 104.188-25.655 193.756-90.796 248.992-181.145 27.107-43.975 44.799-92.887 52.023-143.778s3.84-102.674-9.984-152.255c-13.795-49.943-37.659-96.679-70.169-137.447-32.512-40.768-72.985-74.762-119.092-99.97-94.005-52.341-205.133-66.591-309.69-39.765-86.951 21.5-164.232 70.634-219.696 139.707-2.076 2.565-3.584 5.522-4.465 8.673-0.882 3.151-1.11 6.442-0.655 9.704s1.536 6.358 3.243 9.174c1.707 2.817 3.954 5.27 6.628 7.195 5.489 3.988 12.345 5.745 19.114 4.88s12.941-4.267 17.237-9.509c48.411-60.317 115.849-103.205 191.764-121.971 91.303-23.424 188.294-10.959 270.382 34.689 40.19 22.058 75.488 51.728 103.818 87.337s49.121 76.378 61.153 119.963c12.059 43.278 15.018 88.508 8.732 132.93-6.285 44.422-21.758 87.142-45.423 125.569-48.155 78.693-126.146 135.44-216.908 157.888-91.303 23.396-188.352 10.959-270.439-34.689-71.392-39.095-126.374-101.671-155.243-176.683-0.598-1.729-0.655-3.57-0.171-5.327s1.536-3.291 2.986-4.433c1.451-1.144 3.186-1.841 5.035-1.98s3.698 0.279 5.291 1.199l88.686 49.023c6.057 3.43 13.226 4.378 19.995 2.677s12.601-5.912 16.241-11.767c1.649-2.817 2.701-5.912 3.128-9.118s0.171-6.469-0.711-9.592c-0.881-3.123-2.417-6.024-4.465-8.561s-4.608-4.629-7.481-6.19l-162.126-90.070c-5.944-3.151-12.913-3.96-19.456-2.231-3.27 0.808-6.342 2.231-9.045 4.211-2.701 1.98-4.977 4.433-6.712 7.279l-94.317 154.765c-1.735 2.789-2.844 5.912-3.328 9.118s-0.284 6.525 0.569 9.676c0.853 3.151 2.36 6.106 4.38 8.673 2.048 2.565 4.608 4.712 7.509 6.303l0.028 0.028z" />
+<glyph unicode="&#xe97f;" glyph-name="bolt" data-tags="bolt" d="M448.516 795.501c7.573 12.793 21.336 20.64 36.204 20.64h298.561c35.466 0 55.019-41.191 32.595-68.671l-202.206-247.769h86.171c36.547 0 55.711-43.393 31.098-70.408l-422.23-463.373c-32.024-35.144-88.63 1.491-69.683 45.102l134.125 308.712h-132.447c-32.589 0-52.803 35.457-36.205 63.5l244.021 412.265zM494.999 756.041l-222.675-376.205h128.316c30.293 0 50.656-31.050 38.585-58.835l-101.814-234.343 321.606 352.941h-83.335c-35.467 0-55.020 41.191-32.595 68.67l202.205 247.77h-250.294z" />
+<glyph unicode="&#xe980;" glyph-name="puzzle" data-tags="puzzle" d="M605.009-1.28h-20.535c-8.31 0-143.271 0-402.207 0-35.465 0-69.476 14.028-94.553 38.998s-39.166 58.837-39.166 94.151l1.624 580.15c0.325 6.707 2.118 13.265 5.252 19.211s7.535 11.14 12.895 15.218c32.952 27.581 103.060 30.244 214.428 7.609 33.524-6.848 56.448-24.157 62.944-47.554 4.297-15.312 3.247-39.374-26.459-66.574-11.41-10.296-20.057-23.266-25.156-37.734s-6.488-29.973-4.043-45.113c2.446-15.137 8.65-29.427 18.050-41.572s21.696-21.759 35.774-27.971c14.078-6.211 29.491-8.824 44.841-7.599s30.148 6.246 43.053 14.609c12.905 8.365 23.509 19.806 30.847 33.284 7.339 13.481 11.178 28.571 11.174 43.905 0 25.203-11.748 49.17-35.913 73.042-0.956 0.951-4.298 3.424-6.782 5.23-14.136 10.367-38.205 27.772-31.902 54.021 5.349 24.442 32.665 39.089 93.699 50.977 137.538 25.394 198.858-15.501 218.82-34.334s12.322-48.504 1.911-90.066-24.26-97.294-14.518-152.171c5.348-30.339 11.94-40.801 14.518-43.938 4.986 3.181 9.545 6.985 13.562 11.317l0.573 0.57c32.57 32.812 69.057 49.456 107.166 49.456 23.346 0.039 46.332-5.722 66.875-16.763s37.998-27.010 50.776-46.465c12.781-19.453 20.483-41.775 22.413-64.941s-1.978-46.446-11.366-67.73-23.962-39.897-42.401-54.156c-18.437-14.257-40.157-23.71-63.19-27.499s-46.652-1.797-68.715 5.8c-22.065 7.595-41.877 20.552-57.641 37.697-11.079 11.887-17.862 13.315-19.104 12.934s-9.551-8.464-13.658-26.534c-18.243-88.449-2.674-138 10.697-167.672 11.175-24.919 5.731-42.037-0.859-52.119-17.766-26.535-59.696-29.674-103.727-29.674zM98.024 709.261l-1.528-577.392c0-22.702 9.057-44.474 25.177-60.526s37.986-25.070 60.785-25.070c262.375 0 394.088 0 402.683 0 23.878 0 72.686-0.761 83.002 7.704-0.449 2.358-1.254 4.635-2.387 6.753-25.598 57.063-29.609 119.453-13.85 197.060 6.877 33.382 24.165 56.208 47.756 62.676 15.473 4.279 39.638 3.232 66.859-26.344 10.369-11.351 23.418-19.945 37.967-25s30.134-6.417 45.343-3.956 29.561 8.664 41.753 18.046c12.193 9.383 21.839 21.648 28.065 35.684s8.835 29.397 7.588 44.689c-1.247 15.294-6.308 30.035-14.724 42.887s-19.924 23.408-33.475 30.712c-13.552 7.303-28.72 11.12-44.129 11.106-25.12 0-48.999-11.603-72.876-35.378l-0.574-0.57c-9.55-9.511-33.334-33.288-61.893-24.252-31.328 9.51-42.12 51.358-47.755 81.792-11.462 65.052 3.915 126.967 15.186 172.141 4.535 15.155 7.668 30.69 9.359 46.412-13.181 10.652-61.702 40.611-173.93 19.022-17.411-2.55-34.485-7.016-50.908-13.315 2.77-2.283 5.731-4.47 7.737-5.897 4.231-2.883 8.252-6.061 12.035-9.511 33.239-33.096 50.241-68.952 50.241-106.994-0.022-23.22-5.855-46.068-16.973-66.48s-27.169-37.741-46.703-50.423c-19.533-12.682-41.933-20.317-65.174-22.213s-46.59 2.004-67.937 11.351c-21.347 9.346-40.017 23.842-54.323 42.179s-23.798 39.933-27.616 62.839c-3.818 22.905-1.842 46.399 5.75 68.353 7.59 21.956 20.557 41.681 37.726 57.392v0c11.94 10.936 13.372 17.689 12.99 19.021s-8.501 9.511-26.648 13.505c-141.36 28.723-170.587 6.182-174.599 1.998z" />
+<glyph unicode="&#xe981;" glyph-name="error" data-tags="error" d="M272.7 631.363c4.077 1.62 8.41 2.425 12.767 2.391 4.445-0.033 8.775-0.946 12.765-2.608 3.973-1.657 7.666-4.091 10.795-7.235l183.667-179.385c7.284-7.114 18.916-7.107 26.19 0.014l183.395 179.484c6.342 6.003 14.763 9.246 23.393 9.181 8.691-0.065 17.046-3.491 23.258-9.565 6.224-6.084 9.892-14.444 9.961-23.319 0.068-8.842-3.424-17.233-9.534-23.436l-0.118-0.119-182.091-178.318c-7.501-7.346-7.5-19.424 0.005-26.769l184.318-180.38c3.071-2.938 5.7-6.547 7.526-10.735 1.753-4.017 2.721-8.416 2.756-12.912 0.035-4.507-0.87-8.901-2.543-12.921l-0.019-0.050c-1.708-4.071-4.237-7.795-7.398-10.885-3.13-3.059-6.877-5.514-11.019-7.158-4.103-1.636-8.452-2.425-12.767-2.391-4.445 0.033-8.777 0.946-12.765 2.608-3.977 1.658-7.67 4.094-10.803 7.242l-185.534 181.554c-7.278 7.122-18.911 7.125-26.193 0.009l-185.89-181.662c-6.305-6.186-14.793-9.593-23.543-9.593-8.79 0-17.228 3.423-23.509 9.531-6.354 6.178-10.012 14.682-10.012 23.631 0 4.337 0.849 8.726 2.63 12.893 1.701 3.977 4.167 7.625 7.333 10.72l184.715 180.487c7.521 7.347 7.521 19.446 0 26.795l-182.5 178.323c-3.035 2.924-5.632 6.503-7.441 10.655-1.738 3.986-2.71 8.342-2.756 12.841-0.060 4.554 0.853 9.005 2.547 13.044 1.702 4.060 4.212 7.77 7.398 10.885 3.13 3.059 6.877 5.514 11.019 7.158zM1024 384c0 282.769-229.231 512-512 512s-512-229.231-512-512c0-282.769 229.231-512 512-512s512 229.231 512 512zM961.561 384c0-248.287-201.275-449.561-449.561-449.561s-449.561 201.275-449.561 449.561c0 248.287 201.275 449.561 449.561 449.561s449.561-201.275 449.561-449.561z" />
+<glyph unicode="&#xe982;" glyph-name="folder-closed-f" data-tags="bw-folder-closed-f" d="M589.227 683.038h340.031c25.254-0.32 49.35-10.594 67.084-28.583 17.733-17.987 27.687-42.248 27.659-67.503v-554.809c0.065-12.768-2.431-25.447-7.331-37.254-4.903-11.811-12.134-22.507-21.222-31.495-8.703-8.703-19.078-15.591-30.439-20.295s-23.558-7.107-35.878-7.107l-834.264 0.639c-25.285 0.191-49.485 10.369-67.279 28.39s-27.717 42.311-27.589 67.629v703.321c-0.128 25.285 9.762 49.547 27.525 67.567s41.927 28.233 67.212 28.457h364.868c25.285-0.192 49.485-10.37 67.279-28.39s27.717-42.317 27.589-67.63v-16.515c-0.191-9.411 3.361-18.532 9.858-25.382s15.46-10.818 24.901-11.042zM459.727 772.401l-364.868 0.037c-9.409-0.224-18.339-4.195-24.837-11.041s-10.019-15.972-9.795-25.382v-100.182c-0.051-0.737-0.079-1.479-0.079-2.23v-601.598c0-17.671 14.331-31.999 32-31.999s31.999 14.331 31.999 31.999v494.078c0 17.677 14.331 31.999 31.999 31.999h255.999c0.598 0 1.193-0.017 1.787-0.051h527.030c3.008-0.037 6.023 0.576 8.806 1.697s5.343 2.817 7.488 4.929c2.144 2.112 3.873 4.672 5.024 7.429s1.792 5.763 1.792 8.773v6.295c0.224 9.41-3.299 18.503-9.823 25.321s-15.465 10.755-24.873 10.979h-340.031c-25.285 0.289-49.485 10.498-67.244 28.486s-27.749 42.249-27.749 67.535v16.515c0.224 9.445-3.299 18.564-9.795 25.381s-15.426 10.789-24.837 11.042z" />
+<glyph unicode="&#xe983;" glyph-name="providers" data-tags="bw-providers" d="M795.946 895.999c-68.137 0-123.373-55.236-123.373-123.373 0-26.887 8.6-51.764 23.2-72.032 5.421-7.527 5.928-17.864 0.072-25.057l-78.409-96.295c-5.865-7.204-16.129-8.871-24.347-4.54-33.264 17.525-71.159 27.444-111.37 27.444-65.26 0-124.418-26.127-167.584-68.491-6.851-6.723-17.598-7.916-25.311-2.203l-43.869 32.484c-7.393 5.474-9.491 15.502-6.223 24.099 5.178 13.62 8.013 28.396 8.013 43.833 0 68.137-55.236 123.373-123.373 123.373s-123.373-55.237-123.373-123.373c0-68.138 55.236-123.373 123.373-123.373 25.493 0 49.178 7.732 68.842 20.977 7.179 4.836 16.702 5.327 23.659 0.175l46.671-34.559c7.637-5.655 9.676-16.143 5.398-24.629-16.308-32.342-25.491-68.889-25.491-107.582 0-60.534 22.479-115.818 59.545-157.959 6.345-7.212 6.945-18.022 0.806-25.412l-52.717-63.466c-5.597-6.739-15.107-8.483-23.293-5.359-13.659 5.211-28.482 8.066-43.972 8.066-68.137 0-123.373-55.236-123.373-123.373s55.236-123.373 123.373-123.373c68.138 0 123.373 55.236 123.373 123.373 0 25.451-7.706 49.1-20.912 68.745-5.074 7.547-5.342 17.651 0.469 24.646l51.951 62.544c6.069 7.305 16.644 8.761 24.876 4.024 35.082-20.183 75.765-31.727 119.143-31.727 67.152 0 127.843 27.664 171.299 72.217 6.851 7.025 17.879 8.346 25.73 2.459l102.412-76.81c7.559-5.669 9.482-16.073 5.8-24.775-6.25-14.768-9.706-31.005-9.706-48.049 0-68.138 55.236-123.373 123.373-123.373s123.373 55.236 123.373 123.373c0 68.137-55.237 123.373-123.373 123.373-23.816 0-46.054-6.749-64.91-18.436-7.147-4.43-16.358-4.684-23.084 0.36l-109.29 81.968c-7.431 5.573-9.506 15.76-5.509 24.144 14.846 31.149 23.156 66.013 23.156 102.818 0 63.709-24.9 121.603-65.499 164.48-6.747 7.126-7.628 18.199-1.432 25.809l78.978 96.995c5.415 6.651 14.649 8.563 22.759 5.773 12.588-4.33 26.095-6.681 40.152-6.681 68.138 0 123.373 55.237 123.373 123.373s-55.236 123.373-123.373 123.373zM709.641 772.626c0 47.665 38.639 86.305 86.305 86.305s86.306-38.64 86.306-86.305c0-47.665-38.641-86.305-86.306-86.305s-86.305 38.639-86.305 86.305zM110.305 546.545c-41.677 6.139-73.666 42.052-73.666 85.435 0 47.696 38.665 86.361 86.361 86.361 13.198 0 25.705-2.961 36.891-8.254 29.41-13.755 49.785-43.609 49.785-78.22 0-47.665-38.641-86.306-86.306-86.306-4.441 0-8.804 0.336-13.065 0.983zM481.718 540.459c83.906 0 154.219-58.19 172.787-136.417 3.378-13.734 5.169-28.091 5.169-42.867 0-98.799-80.093-178.892-178.892-178.892s-178.892 80.093-178.892 178.892c0 78.88 51.053 145.837 121.919 169.629 18.151 6.258 37.633 9.655 57.908 9.655zM814.321 48.648c0 20.601 7.219 39.515 19.264 54.353 1.489 1.178 2.854 2.565 4.047 4.156 0.415 0.551 0.798 1.117 1.154 1.691 15.678 16.103 37.592 26.103 61.842 26.103 47.665 0 86.305-38.639 86.305-86.305s-38.639-86.306-86.305-86.306c-47.665 0-86.306 38.641-86.306 86.306zM96.513-4.628c0 47.665 38.64 86.305 86.305 86.305s86.306-38.639 86.306-86.305c0-47.665-38.641-86.305-86.306-86.305s-86.305 38.639-86.305 86.305z" />
+<glyph unicode="&#xe984;" glyph-name="vault" data-tags="bw-vault" d="M418.067 645.284c-9.153 0-16.572-7.42-16.572-16.572v-57.561c0-5.573-4.163-10.223-9.627-11.318-29.41-5.9-55.303-21.534-74.176-43.397-3.666-4.249-9.823-5.568-14.686-2.762l-50.385 29.090c-7.925 4.576-18.061 1.861-22.637-6.066-4.576-7.925-1.861-18.061 6.065-22.637l50.881-29.377c4.78-2.76 6.741-8.612 5.036-13.863-4.189-12.901-6.453-26.672-6.453-40.97 0-15.287 2.587-29.97 7.349-43.635 1.849-5.305-0.085-11.304-4.95-14.112l-51.864-29.945c-7.925-4.576-10.641-14.712-6.065-22.637s14.712-10.642 22.637-6.065l52.418 30.263c4.776 2.759 10.821 1.533 14.514-2.565 18.697-20.758 43.859-35.576 72.314-41.287 5.463-1.096 9.627-5.746 9.627-11.318v-61.043c0-9.153 7.42-16.572 16.572-16.572s16.572 7.42 16.572 16.572v61.035c0 5.574 4.165 10.223 9.63 11.318 28.465 5.701 53.638 20.517 72.342 41.276 3.693 4.097 9.737 5.322 14.512 2.564l52.383-30.243c7.927-4.576 18.061-1.861 22.639 6.066 4.576 7.925 1.861 18.061-6.066 22.637l-51.82 29.918c-4.866 2.809-6.799 8.809-4.948 14.115 4.766 13.671 7.355 28.362 7.355 43.657 0 14.307-2.266 28.085-6.458 40.995-1.706 5.251 0.254 11.104 5.035 13.866l50.837 29.351c7.927 4.576 10.642 14.712 6.066 22.639-4.578 7.925-14.712 10.641-22.639 6.065l-50.351-29.070c-4.859-2.807-11.014-1.488-14.683 2.761-18.881 21.864-44.782 37.494-74.204 43.386-5.466 1.095-9.631 5.746-9.631 11.318v57.553c0 9.153-7.419 16.572-16.572 16.572zM517.524 429.848c0-54.914-44.517-99.432-99.432-99.432s-99.432 44.517-99.432 99.432 44.517 99.432 99.432 99.432c54.914 0 99.432-44.517 99.432-99.432zM119.798 683.951v-519.253c0-24.405 19.787-44.192 44.192-44.192h662.877c24.405 0 44.192 19.787 44.192 44.192v0.038c29.484 1.045 53.029 22.886 53.029 49.677v88.384c0 26.791-23.546 48.634-53.029 49.677v143.7c29.484 1.045 53.029 22.886 53.029 49.677v99.432c0 27.211-24.291 49.317-54.421 49.711-4.904 19.064-22.208 33.15-42.8 33.15h-662.877c-24.405 0-44.192-19.787-44.192-44.192zM163.99 694.999h662.877c6.102 0 11.048-4.946 11.048-11.048v-519.253c0-6.102-4.946-11.048-11.048-11.048h-662.877c-6.102 0-11.048 4.946-11.048 11.048v519.253c0 6.102 4.946 11.048 11.048 11.048zM871.058 316.177c0 1.643 1.435 2.936 3.022 2.515 7.622-2.029 13.182-8.377 13.182-15.893v-88.384c0-7.518-5.561-13.866-13.182-15.893-1.587-0.423-3.022 0.873-3.022 2.515v115.142zM874.080 529.958c-1.587-0.423-3.022 0.873-3.022 2.515v126.19c0 1.643 1.435 2.936 3.022 2.515 7.622-2.029 13.182-8.377 13.182-15.893v-99.432c0-7.518-5.561-13.866-13.182-15.893zM86.654 827.575h850.692c36.61 0 66.288-29.678 66.288-66.288v-673.924c0-31.251-21.624-57.45-50.726-64.45-5.591-1.346-10.038-6.036-10.038-11.785v-9.939c0-33.559-27.204-60.763-60.763-60.763h-66.288c-33.559 0-60.763 27.204-60.763 60.763v8.838c0 6.102-4.946 11.048-11.048 11.048h-464.014c-6.102 0-11.048-4.946-11.048-11.048v-8.838c0-33.559-27.204-60.763-60.763-60.763h-66.288c-33.559 0-60.763 27.204-60.763 60.763v9.939c0 5.749-4.448 10.439-10.039 11.785-29.102 7.001-50.726 33.2-50.726 64.45v673.924c0 36.61 29.678 66.288 66.288 66.288zM937.346 783.383h-850.692c-12.204 0-22.096-9.892-22.096-22.096v-673.924c0-12.204 9.892-22.096 22.096-22.096h850.692c12.204 0 22.096 9.892 22.096 22.096v673.924c0 12.204-9.892 22.096-22.096 22.096zM909.727 10.027c0 6.102-4.946 11.048-11.048 11.048h-99.432c-6.102 0-11.048-4.946-11.048-11.048v-8.838c0-15.255 12.366-27.619 27.619-27.619h66.288c15.255 0 27.619 12.366 27.619 27.619v8.838zM114.273 1.188c0-15.255 12.366-27.619 27.619-27.619h66.288c15.255 0 27.619 12.366 27.619 27.619v8.838c0 6.102-4.946 11.048-11.048 11.048h-99.432c-6.102 0-11.048-4.946-11.048-11.048v-8.838z" />
+<glyph unicode="&#xe985;" glyph-name="browser" data-tags="bw-browser" d="M935.28 729.6h-846.557c-23.99-1.351-46.483-12.034-62.549-29.691s-24.403-40.874-23.226-64.565v-502.692c-1.177-23.722 7.158-46.91 23.226-64.566 16.065-17.658 38.529-28.339 62.549-29.691h846.304c24.053 1.289 46.578 11.939 62.711 29.598s24.5 40.905 23.323 64.658v502.692c1.177 23.722-7.158 46.909-23.226 64.565s-38.562 28.339-62.549 29.691zM935.28 666.763c7.987-0.47 15.43-4.054 20.774-9.93s8.114-13.603 7.731-21.489v-18.375c0.383-6.819-2.003-13.478-6.616-18.538-4.614-5.059-11.041-8.138-17.944-8.547h-854.512c-6.874 0.408-13.3 3.488-17.912 8.547-4.614 5.060-6.968 11.72-6.585 18.538v18.375c-0.383 7.887 2.386 15.614 7.731 21.489s12.791 9.455 20.774 9.93h846.557zM935.28 101.613h-846.557c-7.922 0.471-15.303 3.991-20.648 9.802s-8.146 13.415-7.857 21.238v366.938c-0.351 6.819 2.003 13.477 6.616 18.537s11.041 8.138 17.944 8.547h854.576c6.905-0.376 13.333-3.457 17.944-8.547s7-11.75 6.616-18.537v-366.938c0.383-7.919-2.417-15.646-7.762-21.52-5.345-5.876-12.854-9.425-20.871-9.898v0.376zM662.415 234.057l-47.904 130.649c-3.818 10.406 6.572 20.378 16.813 16.141l125.055-51.748c11.021-4.563 10.276-20.417-1.122-23.923l-42.823-13.175c-3.838-1.183-6.892-4.103-8.242-7.884l-17.845-49.959c-4.002-11.213-19.834-11.279-23.933-0.102z" />
+<glyph unicode="&#xe986;" glyph-name="mobile" data-tags="bw-mobile" d="M517.369-31.195c14.501 0 26.256 11.756 26.256 26.256s-11.755 26.256-26.256 26.256-26.256-11.755-26.256-26.256c0-14.5 11.755-26.256 26.256-26.256zM239.492 861.091c16.574 18.214 39.779 29.234 64.526 30.627h415.965c24.747-1.393 47.951-12.413 64.525-30.627s25.173-42.166 23.958-66.603v-175.116c0.151-3.031 0.152-6.081 0-9.14v-452.461c0.152-3.059 0.151-6.11 0-9.141v-175.116c1.216-24.438-7.385-48.389-23.958-66.603s-39.778-29.234-64.525-30.628h-415.965c-24.747 1.394-47.952 12.414-64.526 30.628s-25.173 42.165-23.958 66.603v175.13c-0.151 3.027-0.152 6.072 0 9.127v452.461c-0.152 3.059-0.151 6.109 0 9.14v175.116c-1.215 24.437 7.385 48.389 23.958 66.603zM284.75 816.656c-5.514-6.060-8.369-14.034-7.976-22.168v-32.082c-0.393-7.033 2.069-13.904 6.827-19.123 4.76-5.217 11.389-8.394 18.511-8.816h419.776c7.122 0.421 13.752 3.598 18.511 8.816s7.221 12.090 6.828 19.123v32.082c0.393 8.135-2.462 16.108-7.977 22.168-5.514 6.061-13.194 9.756-21.433 10.242h-411.634c-8.239-0.486-15.918-4.181-21.433-10.242zM301.242 112.908c0.917-0.137 1.843-0.234 2.776-0.289h415.965c0.932 0.055 1.856 0.154 2.774 0.29 6.372 1.386 12.193 4.696 16.591 9.53 4.853 5.335 7.672 12.153 8.010 19.28 0.045 0.958 0.045 1.922 0 2.888l-0.003 0.034v494.801c-0.343 7.114-3.161 13.919-8.007 19.246-4.398 4.835-10.216 8.145-16.59 9.532-0.916 0.135-1.843 0.232-2.775 0.288h-415.965c-0.933-0.055-1.857-0.154-2.774-0.29-6.373-1.386-12.194-4.695-16.591-9.53-4.846-5.327-7.665-12.132-8.008-19.246v-497.756c0.343-7.115 3.162-13.92 8.008-19.247 4.398-4.834 10.216-8.145 16.59-9.531zM739.25-48.655c5.515 6.060 8.369 14.034 7.977 22.168v45.21c0.393 7.034-2.069 13.905-6.828 19.123s-11.389 8.394-18.511 8.816h-419.776c-7.122-0.421-13.752-3.597-18.511-8.816-4.758-5.217-7.22-12.088-6.827-19.123v-45.21c-0.393-8.134 2.462-16.108 7.976-22.168s13.194-9.756 21.433-10.243h411.637c8.237 0.487 15.917 4.181 21.43 10.243z" />
+<glyph unicode="&#xe987;" glyph-name="cli" data-tags="bw-cli" d="M564.293 401.426c8.527 6.203 20.465 4.315 26.668-4.209l76.359-104.993c4.994-6.865 4.854-16.203-0.343-22.912l-76.359-98.631c-6.453-8.337-18.443-9.864-26.78-3.408-8.335 6.453-9.862 18.443-3.407 26.78l67.589 87.302-67.932 93.405c-6.203 8.527-4.315 20.465 4.209 26.666zM709.15 207.82c-10.543 0-19.089-8.548-19.089-19.089s8.548-19.089 19.089-19.089h139.99c10.543 0 19.089 8.548 19.089 19.089s-8.548 19.089-19.089 19.089h-139.99zM935.28 729.6h-846.557c-23.99-1.351-46.483-12.034-62.549-29.691s-24.403-40.874-23.226-64.565v-502.692c-1.177-23.722 7.158-46.91 23.226-64.566 16.065-17.658 38.529-28.339 62.549-29.691h846.304c24.053 1.289 46.578 11.939 62.711 29.598s24.5 40.905 23.323 64.658v502.692c1.177 23.722-7.158 46.909-23.226 64.565s-38.562 28.339-62.549 29.691zM935.28 666.763c7.987-0.47 15.43-4.054 20.774-9.93s8.114-13.603 7.731-21.489v-18.375c0.383-6.819-2.003-13.478-6.616-18.538-4.614-5.059-11.041-8.138-17.944-8.547h-854.512c-6.874 0.408-13.3 3.488-17.912 8.547-4.614 5.060-6.968 11.72-6.585 18.538v18.375c-0.383 7.887 2.386 15.614 7.731 21.489s12.791 9.455 20.774 9.93h846.557zM935.28 101.613h-846.557c-7.922 0.471-15.303 3.991-20.648 9.802s-8.146 13.415-7.857 21.238v366.938c-0.351 6.819 2.003 13.477 6.616 18.537s11.041 8.138 17.944 8.547h854.576c6.905-0.376 13.333-3.457 17.944-8.547s7-11.75 6.616-18.537v-366.938c0.383-7.919-2.417-15.646-7.762-21.52-5.345-5.876-12.854-9.425-20.871-9.898v0.376z" />
+<glyph unicode="&#xe988;" glyph-name="save-changes" data-tags="bw-save-changes" d="M37.926 839.11v-910.222c0-31.42 25.47-56.889 56.889-56.889h834.37c31.42 0 56.889 25.469 56.889 56.889v754.218c0 26.878-11.408 52.494-31.387 70.475l-131.199 118.079c-17.41 15.669-40.004 24.34-63.427 24.34h-665.245c-31.419 0-56.889-25.47-56.889-56.889zM884.983 688.755c3.995-3.595 6.277-8.719 6.277-14.095v-688.883c0-10.473-8.49-18.963-18.963-18.963h-37.926c-10.473 0-18.963 8.49-18.963 18.963v334.127c0 14.454-12.736 26.169-28.444 26.169h-549.926c-15.709 0-28.444-11.715-28.444-26.169v-334.127c0-10.473-8.49-18.963-18.963-18.963h-37.926c-10.473 0-18.963 8.49-18.963 18.963v796.444c0 10.473 8.49 18.963 18.963 18.963h37.926c10.473 0 18.963-8.49 18.963-18.963v-199.111c0-15.709 12.245-28.444 27.35-28.444h476.262c15.106 0 27.35 12.736 27.35 28.444v203.255c0 8.184 6.635 14.819 14.82 14.819 3.66 0 7.191-1.355 9.912-3.804l120.695-108.626zM282.256 611.555c-10.473 0-18.963 8.49-18.963 18.963v170.667h229.744c10.473 0 18.963-8.49 18.963-18.963v-75.852c0-20.946 16.979-37.926 37.926-37.926h37.926c20.946 0 37.926 16.979 37.926 37.926v75.852c0 10.473 8.49 18.963 18.963 18.963h21.151c10.473 0 18.963-8.49 18.963-18.963v-151.704c0-10.473-8.49-18.963-18.963-18.963h-383.636zM265.482-14.223v288.996c0 10.473 8.49 18.963 18.963 18.963h474.074v-307.959c0-10.473-8.49-18.963-18.963-18.963h-455.111c-10.473 0-18.963 8.49-18.963 18.963z" />
+<glyph unicode="&#xe9ee;" glyph-name="rocket" data-tags="rocket" d="M650.515 648.267c33.538 33.532 87.904 33.532 121.443 0 33.538-33.538 33.538-87.904 0-121.443s-87.904-33.538-121.443 0c-33.532 33.538-33.532 87.904 0 121.443zM750.801 627.113c-21.855 21.856-57.284 21.856-79.134 0-21.856-21.855-21.856-57.284 0-79.134 21.855-21.855 57.284-21.855 79.134 0s21.855 57.284 0 79.134zM493.141 680.645c113.184 90.608 223.416 148.836 310.181 180.552 43.273 15.818 81.527 25.336 111.933 28.691 15.138 1.668 29.339 1.929 41.709 0.19 11.507-1.615 25.903-5.552 36.583-16.232l3.981-3.981c10.68-10.679 14.617-25.076 16.232-36.582 1.739-12.377 1.478-26.572-0.19-41.71-3.356-30.406-12.874-68.659-28.691-111.932-31.716-86.771-89.944-196.998-180.552-310.187-29.487-36.837-59.902-73.855-91.847-111.076l30.789-145.412c4.388-20.715-0.21-42.314-12.654-59.447l-89.489-123.202c-35.299-48.598-110.586-37.857-130.894 18.67l-31.576 87.886-74.269-74.269c-5.844-5.844-15.313-5.844-21.151 0-5.844 5.845-5.844 15.313 0 21.152l80.747 80.747-47.795 47.794-162.229-162.229c-5.844-5.844-15.313-5.844-21.151 0s-5.844 15.313 0 21.151l162.229 162.229-54.059 54.060-306.392-306.392c-5.844-5.844-15.313-5.844-21.151 0-5.844 5.845-5.844 15.313 0 21.151l306.391 306.392-54.059 54.060-61.939-61.939c-5.845-5.844-15.313-5.844-21.151 0-5.845 5.844-5.845 15.313 0 21.151l61.938 61.939-47.794 47.794-112.086-112.086c-5.844-5.844-15.312-5.844-21.151 0-5.844 5.845-5.844 15.313 0 21.152l109.675 109.669-100.568 36.13c-56.526 20.307-67.261 95.6-18.663 130.894l123.202 89.489c17.132 12.444 38.73 17.041 59.446 12.654l145.412-30.789c37.221 31.945 74.238 62.36 111.076 91.847zM952.797 829.985c-0.744 0.223-2.062 0.551-4.14 0.84-5.79 0.812-14.652 0.934-26.837-0.411-24.234-2.675-57.643-10.683-97.952-25.414-80.389-29.379-184.973-84.318-293.329-171.062-38.013-30.432-76.092-61.749-114.295-94.665-2.919-4.249-6.879-7.644-11.433-9.895-54.88-47.714-110.027-98.85-165.607-155.478l258.391-258.39c56.628 55.58 107.765 110.728 155.48 165.609 2.25 4.551 5.643 8.51 9.89 11.427 32.912 38.205 64.235 76.284 94.667 114.298 86.744 108.362 141.683 212.941 171.063 293.329 14.73 40.309 22.744 73.723 25.414 97.952 1.345 12.179 1.222 21.047 0.411 26.837-0.29 2.078-0.619 3.397-0.84 4.14l-0.875 0.875zM224.258 561.056c-4.141 0.875-8.464-0.045-11.889-2.533l-123.202-89.489c-9.719-7.058-7.573-22.117 3.736-26.177l96.234-34.573c45.935 47.161 91.519 90.548 136.803 131.242l-101.677 21.529zM663.214 202.25c-40.694-45.278-84.081-90.868-131.243-136.803l34.574-96.235c4.061-11.304 19.119-13.455 26.177-3.736l89.489 123.202c2.488 3.425 3.408 7.748 2.533 11.889l-21.529 101.678z" />
+<glyph unicode="&#xe9ef;" glyph-name="ellipsis-h" data-tags="ellipsis-h" d="M919.751 314.596c-43.122 0-78.080 34.958-78.080 78.080s34.958 78.080 78.080 78.080c43.122 0 78.080-34.958 78.080-78.080s-34.958-78.080-78.080-78.080zM520.676 314.596c-43.122 0-78.080 34.958-78.080 78.080s34.958 78.080 78.080 78.080c43.122 0 78.080-34.958 78.080-78.080s-34.958-78.080-78.080-78.080zM121.6 314.596c-43.122 0-78.080 34.958-78.080 78.080s34.958 78.080 78.080 78.080c43.122 0 78.080-34.958 78.080-78.080s-34.958-78.080-78.080-78.080z" />
+<glyph unicode="&#xe9f0;" glyph-name="ellipsis-v" data-tags="ellipsis-v" d="M586.472 734.020c0-37.017-30.007-67.024-67.024-67.024s-67.024 30.007-67.024 67.024c0 37.017 30.007 67.024 67.024 67.024s67.024-30.007 67.024-67.024zM586.472 391.448c0-37.017-30.007-67.024-67.024-67.024s-67.024 30.007-67.024 67.024c0 37.017 30.007 67.024 67.024 67.024s67.024-30.007 67.024-67.024zM586.472 48.872c0-37.017-30.007-67.024-67.024-67.024s-67.024 30.007-67.024 67.024c0 37.017 30.007 67.024 67.024 67.024s67.024-30.007 67.024-67.024z" />
+</font></defs></svg>
\ No newline at end of file
diff --git a/jslib/angular/src/scss/bwicons/fonts/bwi-font.ttf b/jslib/angular/src/scss/bwicons/fonts/bwi-font.ttf
new file mode 100644
index 00000000..900da5ca
Binary files /dev/null and b/jslib/angular/src/scss/bwicons/fonts/bwi-font.ttf differ
diff --git a/jslib/angular/src/scss/bwicons/fonts/bwi-font.woff b/jslib/angular/src/scss/bwicons/fonts/bwi-font.woff
new file mode 100644
index 00000000..8cde2bac
Binary files /dev/null and b/jslib/angular/src/scss/bwicons/fonts/bwi-font.woff differ
diff --git a/jslib/angular/src/scss/bwicons/fonts/bwi-font.woff2 b/jslib/angular/src/scss/bwicons/fonts/bwi-font.woff2
new file mode 100644
index 00000000..898cf2c3
Binary files /dev/null and b/jslib/angular/src/scss/bwicons/fonts/bwi-font.woff2 differ
diff --git a/jslib/angular/src/scss/bwicons/styles/style.scss b/jslib/angular/src/scss/bwicons/styles/style.scss
new file mode 100644
index 00000000..24504d88
--- /dev/null
+++ b/jslib/angular/src/scss/bwicons/styles/style.scss
@@ -0,0 +1,255 @@
+$icomoon-font-family: "bwi-font" !default;
+$icomoon-font-path: "~@bitwarden/jslib-angular/src/scss/bwicons/fonts/" !default;
+
+// New font sheet? Update the font-face information below
+@font-face {
+  font-family: "#{$icomoon-font-family}";
+  src: url($icomoon-font-path + "bwi-font.svg") format("svg"),
+    url($icomoon-font-path + "bwi-font.ttf") format("truetype"),
+    url($icomoon-font-path + "bwi-font.woff") format("woff"),
+    url($icomoon-font-path + "bwi-font.woff2") format("woff2");
+  font-weight: normal;
+  font-style: normal;
+  font-display: block;
+}
+
+// Base Class
+.bwi {
+  /* use !important to prevent issues with browser extensions that change fonts */
+  font-family: "#{$icomoon-font-family}" !important;
+  speak: never;
+  font-style: normal;
+  font-weight: normal;
+  font-variant: normal;
+  text-transform: none;
+  line-height: 1;
+  display: inline-block;
+  /* Better Font Rendering */
+  -webkit-font-smoothing: antialiased;
+  -moz-osx-font-smoothing: grayscale;
+}
+
+// Fixed Width Icons
+.bwi-fw {
+  width: (18em / 14);
+  text-align: center;
+}
+
+// Sizing Changes
+.bwi-sm {
+  font-size: 0.875em;
+}
+
+.bwi-lg {
+  font-size: (4em / 3);
+  line-height: (3em / 4);
+  vertical-align: -15%;
+}
+
+.bwi-2x {
+  font-size: 2em;
+}
+
+.bwi-3x {
+  font-size: 3em;
+}
+
+.bwi-4x {
+  font-size: 4em;
+}
+
+// Spin Animations
+.bwi-spin {
+  animation: bwi-spin 2s infinite linear;
+}
+
+@keyframes bwi-spin {
+  0% {
+    transform: rotate(0deg);
+  }
+  100% {
+    transform: rotate(359deg);
+  }
+}
+
+// List Icons
+.bwi-ul {
+  padding-left: 0;
+  margin-left: (30em / 14);
+  list-style-type: none;
+  > li {
+    position: relative;
+  }
+}
+
+.bwi-li {
+  position: absolute;
+  left: -(30em / 14);
+  width: (30em / 14);
+  top: (2em / 14);
+  text-align: center;
+  &.bwi-lg {
+    left: -(30em / 14) + (4em / 14);
+  }
+}
+
+// Rotation
+.bwi-rotate-270 {
+  transform: rotate(270deg);
+}
+
+// For new icons - add their glyph name and value to the map below
+$icons: (
+  "save-changes": "\e988",
+  "browser": "\e985",
+  "mobile": "\e986",
+  "cli": "\e987",
+  "providers": "\e983",
+  "vault": "\e984",
+  "folder-closed-f": "\e982",
+  "rocket": "\e9ee",
+  "ellipsis-h": "\e9ef",
+  "ellipsis-v": "\e9f0",
+  "safari": "\e974",
+  "opera": "\e975",
+  "firefox": "\e976",
+  "edge": "\e977",
+  "chrome": "\e978",
+  "star-f": "\e979",
+  "arrow-circle-up": "\e97a",
+  "arrow-circle-right": "\e97b",
+  "arrow-circle-left": "\e97c",
+  "arrow-circle-down": "\e97d",
+  "undo": "\e97e",
+  "bolt": "\e97f",
+  "puzzle": "\e980",
+  "rss": "\e973",
+  "dbl-angle-left": "\e970",
+  "dbl-angle-right": "\e971",
+  "hamburger": "\e972",
+  "bw-folder-open-f": "\e93e",
+  "desktop": "\e96a",
+  "angle-left": "\e96b",
+  "user": "\e900",
+  "user-f": "\e901",
+  "key": "\e902",
+  "share-square": "\e903",
+  "hashtag": "\e904",
+  "clone": "\e905",
+  "list-alt": "\e906",
+  "id-card": "\e907",
+  "credit-card": "\e908",
+  "globe": "\e909",
+  "sticky-note": "\e90a",
+  "folder": "\e90b",
+  "lock": "\e90c",
+  "lock-f": "\e90d",
+  "generate": "\e90e",
+  "generate-f": "\e90f",
+  "cog": "\e910",
+  "cog-f": "\e911",
+  "check-circle": "\e912",
+  "eye": "\e913",
+  "pencil-square": "\e914",
+  "bookmark": "\e915",
+  "files": "\e916",
+  "trash": "\e917",
+  "plus": "\e918",
+  "star": "\e919",
+  "list": "\e91a",
+  "angle-right": "\e91b",
+  "external-link": "\e91c",
+  "refresh": "\e91d",
+  "search": "\e91f",
+  "filter": "\e920",
+  "plus-circle": "\e921",
+  "user-circle": "\e922",
+  "question-circle": "\e923",
+  "cogs": "\e924",
+  "minus-circle": "\e925",
+  "send": "\e926",
+  "send-f": "\e927",
+  "download": "\e928",
+  "pencil": "\e929",
+  "sign-out": "\e92a",
+  "share": "\e92b",
+  "clock": "\e92c",
+  "angle-down": "\e92d",
+  "caret-down": "\e92e",
+  "square": "\e92f",
+  "collection": "\e930",
+  "bank": "\e931",
+  "shield": "\e932",
+  "stop": "\e933",
+  "plus-square": "\e934",
+  "save": "\e935",
+  "sign-in": "\e936",
+  "spinner": "\e937",
+  "dollar": "\e939",
+  "check": "\e93a",
+  "check-square": "\e93b",
+  "minus-square": "\e93c",
+  "close": "\e93d",
+  "share-arrow": "\e96c",
+  "paperclip": "\e93f",
+  "bitcoin": "\e940",
+  "cut": "\e941",
+  "frown": "\e942",
+  "folder-open": "\e943",
+  "bug": "\e946",
+  "chain-broken": "\e947",
+  "dashboard": "\e948",
+  "envelope": "\e949",
+  "exclamation-circle": "\e94a",
+  "exclamation-triangle": "\e94b",
+  "caret-right": "\e94c",
+  "file-pdf": "\e94e",
+  "file-text": "\e94f",
+  "info-circle": "\e952",
+  "lightbulb": "\e953",
+  "link": "\e954",
+  "linux": "\e956",
+  "long-arrow-right": "\e957",
+  "money": "\e958",
+  "play": "\e959",
+  "reddit": "\e95a",
+  "refresh-tab": "\e95b",
+  "sitemap": "\e95c",
+  "sliders": "\e95d",
+  "tag": "\e95e",
+  "thumb-tack": "\e95f",
+  "thumbs-up": "\e960",
+  "unlock": "\e962",
+  "users": "\e963",
+  "wrench": "\e965",
+  "ban": "\e967",
+  "camera": "\e968",
+  "chevron-up": "\e969",
+  "eye-slash": "\e96d",
+  "file": "\e96e",
+  "paste": "\e96f",
+  "github": "\e950",
+  "facebook": "\e94d",
+  "paypal": "\e938",
+  "google": "\e951",
+  "linkedin": "\e955",
+  "discourse": "\e91e",
+  "twitter": "\e961",
+  "youtube": "\e966",
+  "windows": "\e964",
+  "apple": "\e945",
+  "android": "\e944",
+  "error": "\e981",
+);
+
+@each $name, $glyph in $icons {
+  .bwi-#{$name}:before {
+    content: $glyph;
+  }
+}
+
+:export {
+  @each $name, $glyph in $icons {
+    #{$name}: $glyph;
+  }
+}
diff --git a/jslib/angular/src/scss/icons.scss b/jslib/angular/src/scss/icons.scss
new file mode 100644
index 00000000..4d2ea459
--- /dev/null
+++ b/jslib/angular/src/scss/icons.scss
@@ -0,0 +1,44 @@
+$card-icons-base: "~@bitwarden/jslib-angular/src/images/cards/";
+$card-icons: (
+  "visa": $card-icons-base + "visa-light.png",
+  "amex": $card-icons-base + "amex-light.png",
+  "diners-club": $card-icons-base + "diners_club-light.png",
+  "discover": $card-icons-base + "discover-light.png",
+  "jcb": $card-icons-base + "jcb-light.png",
+  "maestro": $card-icons-base + "maestro-light.png",
+  "mastercard": $card-icons-base + "mastercard-light.png",
+  "union-pay": $card-icons-base + "union_pay-light.png",
+);
+
+$card-icons-dark: (
+  "visa": $card-icons-base + "visa-dark.png",
+  "amex": $card-icons-base + "amex-dark.png",
+  "diners-club": $card-icons-base + "diners_club-dark.png",
+  "discover": $card-icons-base + "discover-dark.png",
+  "jcb": $card-icons-base + "jcb-dark.png",
+  "maestro": $card-icons-base + "maestro-dark.png",
+  "mastercard": $card-icons-base + "mastercard-dark.png",
+  "union-pay": $card-icons-base + "union_pay-dark.png",
+);
+
+.credit-card-icon {
+  display: block; // Resolves the parent container being slighly to big
+  height: 19px;
+  width: 24px;
+  background-size: contain;
+  background-repeat: no-repeat;
+}
+
+@each $name, $url in $card-icons {
+  .card-#{$name} {
+    background-image: url("#{$url}");
+  }
+}
+
+@each $theme in $dark-icon-themes {
+  @each $name, $url in $card-icons-dark {
+    .#{$theme} .card-#{$name} {
+      background-image: url("#{$url}");
+    }
+  }
+}
diff --git a/jslib/angular/src/scss/webfonts.css b/jslib/angular/src/scss/webfonts.css
index c8a72d4b..fe9bb7e1 100644
--- a/jslib/angular/src/scss/webfonts.css
+++ b/jslib/angular/src/scss/webfonts.css
@@ -1,90 +1,89 @@
 @font-face {
-	font-family: 'Open Sans';
-	font-style: italic;
-	font-weight: 300;
-	font-display: auto;
-	src: url(webfonts/Open_Sans-italic-300.woff) format('woff');
-	unicode-range: U+0-10FFFF;
+  font-family: "Open Sans";
+  font-style: italic;
+  font-weight: 300;
+  font-display: auto;
+  src: url(webfonts/Open_Sans-italic-300.woff) format("woff");
+  unicode-range: U+0-10FFFF;
 }
 
 @font-face {
-	font-family: 'Open Sans';
-	font-style: italic;
-	font-weight: 400;
-	font-display: auto;
-	src: url(webfonts/Open_Sans-italic-400.woff) format('woff');
-	unicode-range: U+0-10FFFF;
+  font-family: "Open Sans";
+  font-style: italic;
+  font-weight: 400;
+  font-display: auto;
+  src: url(webfonts/Open_Sans-italic-400.woff) format("woff");
+  unicode-range: U+0-10FFFF;
 }
 
 @font-face {
-	font-family: 'Open Sans';
-	font-style: italic;
-	font-weight: 600;
-	font-display: auto;
-	src: url(webfonts/Open_Sans-italic-600.woff) format('woff');
-	unicode-range: U+0-10FFFF;
+  font-family: "Open Sans";
+  font-style: italic;
+  font-weight: 600;
+  font-display: auto;
+  src: url(webfonts/Open_Sans-italic-600.woff) format("woff");
+  unicode-range: U+0-10FFFF;
 }
 
 @font-face {
-	font-family: 'Open Sans';
-	font-style: italic;
-	font-weight: 700;
-	font-display: auto;
-	src: url(webfonts/Open_Sans-italic-700.woff) format('woff');
-	unicode-range: U+0-10FFFF;
+  font-family: "Open Sans";
+  font-style: italic;
+  font-weight: 700;
+  font-display: auto;
+  src: url(webfonts/Open_Sans-italic-700.woff) format("woff");
+  unicode-range: U+0-10FFFF;
 }
 
 @font-face {
-	font-family: 'Open Sans';
-	font-style: italic;
-	font-weight: 800;
-	font-display: auto;
-	src: url(webfonts/Open_Sans-italic-800.woff) format('woff');
-	unicode-range: U+0-10FFFF;
+  font-family: "Open Sans";
+  font-style: italic;
+  font-weight: 800;
+  font-display: auto;
+  src: url(webfonts/Open_Sans-italic-800.woff) format("woff");
+  unicode-range: U+0-10FFFF;
 }
 
 @font-face {
-	font-family: 'Open Sans';
-	font-style: normal;
-	font-weight: 300;
-	font-display: auto;
-	src: url(webfonts/Open_Sans-normal-300.woff) format('woff');
-	unicode-range: U+0-10FFFF;
+  font-family: "Open Sans";
+  font-style: normal;
+  font-weight: 300;
+  font-display: auto;
+  src: url(webfonts/Open_Sans-normal-300.woff) format("woff");
+  unicode-range: U+0-10FFFF;
 }
 
 @font-face {
-	font-family: 'Open Sans';
-	font-style: normal;
-	font-weight: 400;
-	font-display: auto;
-	src: url(webfonts/Open_Sans-normal-400.woff) format('woff');
-	unicode-range: U+0-10FFFF;
+  font-family: "Open Sans";
+  font-style: normal;
+  font-weight: 400;
+  font-display: auto;
+  src: url(webfonts/Open_Sans-normal-400.woff) format("woff");
+  unicode-range: U+0-10FFFF;
 }
 
 @font-face {
-	font-family: 'Open Sans';
-	font-style: normal;
-	font-weight: 600;
-	font-display: auto;
-	src: url(webfonts/Open_Sans-normal-600.woff) format('woff');
-	unicode-range: U+0-10FFFF;
+  font-family: "Open Sans";
+  font-style: normal;
+  font-weight: 600;
+  font-display: auto;
+  src: url(webfonts/Open_Sans-normal-600.woff) format("woff");
+  unicode-range: U+0-10FFFF;
 }
 
 @font-face {
-	font-family: 'Open Sans';
-	font-style: normal;
-	font-weight: 700;
-	font-display: auto;
-	src: url(webfonts/Open_Sans-normal-700.woff) format('woff');
-	unicode-range: U+0-10FFFF;
+  font-family: "Open Sans";
+  font-style: normal;
+  font-weight: 700;
+  font-display: auto;
+  src: url(webfonts/Open_Sans-normal-700.woff) format("woff");
+  unicode-range: U+0-10FFFF;
 }
 
 @font-face {
-	font-family: 'Open Sans';
-	font-style: normal;
-	font-weight: 800;
-	font-display: auto;
-	src: url(webfonts/Open_Sans-normal-800.woff) format('woff');
-	unicode-range: U+0-10FFFF;
+  font-family: "Open Sans";
+  font-style: normal;
+  font-weight: 800;
+  font-display: auto;
+  src: url(webfonts/Open_Sans-normal-800.woff) format("woff");
+  unicode-range: U+0-10FFFF;
 }
-
diff --git a/jslib/angular/src/services/auth-guard.service.ts b/jslib/angular/src/services/auth-guard.service.ts
index 56561577..8c06e438 100644
--- a/jslib/angular/src/services/auth-guard.service.ts
+++ b/jslib/angular/src/services/auth-guard.service.ts
@@ -1,42 +1,45 @@
-import { Injectable } from '@angular/core';
-import {
-    ActivatedRouteSnapshot,
-    CanActivate,
-    Router,
-    RouterStateSnapshot,
-} from '@angular/router';
+import { Injectable } from "@angular/core";
+import { ActivatedRouteSnapshot, CanActivate, Router, RouterStateSnapshot } from "@angular/router";
 
-import { KeyConnectorService } from 'jslib-common/abstractions/keyConnector.service';
-import { MessagingService } from 'jslib-common/abstractions/messaging.service';
-import { UserService } from 'jslib-common/abstractions/user.service';
-import { VaultTimeoutService } from 'jslib-common/abstractions/vaultTimeout.service';
+import { KeyConnectorService } from "jslib-common/abstractions/keyConnector.service";
+import { MessagingService } from "jslib-common/abstractions/messaging.service";
+import { StateService } from "jslib-common/abstractions/state.service";
+import { VaultTimeoutService } from "jslib-common/abstractions/vaultTimeout.service";
 
 @Injectable()
 export class AuthGuardService implements CanActivate {
-    constructor(private vaultTimeoutService: VaultTimeoutService, private userService: UserService,
-        private router: Router, private messagingService: MessagingService, private keyConnectorService: KeyConnectorService) { }
+  constructor(
+    private vaultTimeoutService: VaultTimeoutService,
+    private router: Router,
+    private messagingService: MessagingService,
+    private keyConnectorService: KeyConnectorService,
+    private stateService: StateService
+  ) {}
 
-    async canActivate(route: ActivatedRouteSnapshot, routerState: RouterStateSnapshot) {
-        const isAuthed = await this.userService.isAuthenticated();
-        if (!isAuthed) {
-            this.messagingService.send('authBlocked');
-            return false;
-        }
-
-        const locked = await this.vaultTimeoutService.isLocked();
-        if (locked) {
-            if (routerState != null) {
-                this.messagingService.send('lockedUrl', { url: routerState.url });
-            }
-            this.router.navigate(['lock'], { queryParams: { promptBiometric: true }});
-            return false;
-        }
+  async canActivate(route: ActivatedRouteSnapshot, routerState: RouterStateSnapshot) {
+    const isAuthed = await this.stateService.getIsAuthenticated();
+    if (!isAuthed) {
+      this.messagingService.send("authBlocked");
+      return false;
+    }
 
-        if (!routerState.url.includes('remove-password') && await this.keyConnectorService.getConvertAccountRequired()) {
-            this.router.navigate(['/remove-password']);
-            return false;
-        }
+    const locked = await this.vaultTimeoutService.isLocked();
+    if (locked) {
+      if (routerState != null) {
+        this.messagingService.send("lockedUrl", { url: routerState.url });
+      }
+      this.router.navigate(["lock"], { queryParams: { promptBiometric: true } });
+      return false;
+    }
 
-        return true;
+    if (
+      !routerState.url.includes("remove-password") &&
+      (await this.keyConnectorService.getConvertAccountRequired())
+    ) {
+      this.router.navigate(["/remove-password"]);
+      return false;
     }
+
+    return true;
+  }
 }
diff --git a/jslib/angular/src/services/broadcaster.service.ts b/jslib/angular/src/services/broadcaster.service.ts
index 6a9bdf9b..36218405 100644
--- a/jslib/angular/src/services/broadcaster.service.ts
+++ b/jslib/angular/src/services/broadcaster.service.ts
@@ -1,7 +1,6 @@
-import { Injectable } from '@angular/core';
+import { Injectable } from "@angular/core";
 
-import { BroadcasterService as BaseBroadcasterService } from 'jslib-common/services/broadcaster.service';
+import { BroadcasterService as BaseBroadcasterService } from "jslib-common/services/broadcaster.service";
 
 @Injectable()
-export class BroadcasterService extends BaseBroadcasterService {
-}
+export class BroadcasterService extends BaseBroadcasterService {}
diff --git a/jslib/angular/src/services/jslib-services.module.ts b/jslib/angular/src/services/jslib-services.module.ts
new file mode 100644
index 00000000..a08bce24
--- /dev/null
+++ b/jslib/angular/src/services/jslib-services.module.ts
@@ -0,0 +1,478 @@
+import { Injector, LOCALE_ID, NgModule } from "@angular/core";
+
+import { ApiService } from "jslib-common/services/api.service";
+import { AppIdService } from "jslib-common/services/appId.service";
+import { AuditService } from "jslib-common/services/audit.service";
+import { AuthService } from "jslib-common/services/auth.service";
+import { CipherService } from "jslib-common/services/cipher.service";
+import { CollectionService } from "jslib-common/services/collection.service";
+import { ConsoleLogService } from "jslib-common/services/consoleLog.service";
+import { CryptoService } from "jslib-common/services/crypto.service";
+import { EnvironmentService } from "jslib-common/services/environment.service";
+import { EventService } from "jslib-common/services/event.service";
+import { ExportService } from "jslib-common/services/export.service";
+import { FileUploadService } from "jslib-common/services/fileUpload.service";
+import { FolderService } from "jslib-common/services/folder.service";
+import { KeyConnectorService } from "jslib-common/services/keyConnector.service";
+import { NotificationsService } from "jslib-common/services/notifications.service";
+import { OrganizationService } from "jslib-common/services/organization.service";
+import { PasswordGenerationService } from "jslib-common/services/passwordGeneration.service";
+import { PolicyService } from "jslib-common/services/policy.service";
+import { ProviderService } from "jslib-common/services/provider.service";
+import { SearchService } from "jslib-common/services/search.service";
+import { SendService } from "jslib-common/services/send.service";
+import { SettingsService } from "jslib-common/services/settings.service";
+import { StateService } from "jslib-common/services/state.service";
+import { StateMigrationService } from "jslib-common/services/stateMigration.service";
+import { SyncService } from "jslib-common/services/sync.service";
+import { TokenService } from "jslib-common/services/token.service";
+import { TotpService } from "jslib-common/services/totp.service";
+import { UserVerificationService } from "jslib-common/services/userVerification.service";
+import { VaultTimeoutService } from "jslib-common/services/vaultTimeout.service";
+import { WebCryptoFunctionService } from "jslib-common/services/webCryptoFunction.service";
+
+import { ApiService as ApiServiceAbstraction } from "jslib-common/abstractions/api.service";
+import { AppIdService as AppIdServiceAbstraction } from "jslib-common/abstractions/appId.service";
+import { AuditService as AuditServiceAbstraction } from "jslib-common/abstractions/audit.service";
+import { AuthService as AuthServiceAbstraction } from "jslib-common/abstractions/auth.service";
+import { BroadcasterService as BroadcasterServiceAbstraction } from "jslib-common/abstractions/broadcaster.service";
+import { CipherService as CipherServiceAbstraction } from "jslib-common/abstractions/cipher.service";
+import { CollectionService as CollectionServiceAbstraction } from "jslib-common/abstractions/collection.service";
+import { CryptoService as CryptoServiceAbstraction } from "jslib-common/abstractions/crypto.service";
+import { CryptoFunctionService as CryptoFunctionServiceAbstraction } from "jslib-common/abstractions/cryptoFunction.service";
+import { EnvironmentService as EnvironmentServiceAbstraction } from "jslib-common/abstractions/environment.service";
+import { EventService as EventServiceAbstraction } from "jslib-common/abstractions/event.service";
+import { ExportService as ExportServiceAbstraction } from "jslib-common/abstractions/export.service";
+import { FileUploadService as FileUploadServiceAbstraction } from "jslib-common/abstractions/fileUpload.service";
+import { FolderService as FolderServiceAbstraction } from "jslib-common/abstractions/folder.service";
+import { I18nService as I18nServiceAbstraction } from "jslib-common/abstractions/i18n.service";
+import { KeyConnectorService as KeyConnectorServiceAbstraction } from "jslib-common/abstractions/keyConnector.service";
+import { LogService } from "jslib-common/abstractions/log.service";
+import { MessagingService as MessagingServiceAbstraction } from "jslib-common/abstractions/messaging.service";
+import { NotificationsService as NotificationsServiceAbstraction } from "jslib-common/abstractions/notifications.service";
+import { OrganizationService as OrganizationServiceAbstraction } from "jslib-common/abstractions/organization.service";
+import { PasswordGenerationService as PasswordGenerationServiceAbstraction } from "jslib-common/abstractions/passwordGeneration.service";
+import { PasswordRepromptService as PasswordRepromptServiceAbstraction } from "jslib-common/abstractions/passwordReprompt.service";
+import { PlatformUtilsService as PlatformUtilsServiceAbstraction } from "jslib-common/abstractions/platformUtils.service";
+import { PolicyService as PolicyServiceAbstraction } from "jslib-common/abstractions/policy.service";
+import { ProviderService as ProviderServiceAbstraction } from "jslib-common/abstractions/provider.service";
+import { SearchService as SearchServiceAbstraction } from "jslib-common/abstractions/search.service";
+import { SendService as SendServiceAbstraction } from "jslib-common/abstractions/send.service";
+import { SettingsService as SettingsServiceAbstraction } from "jslib-common/abstractions/settings.service";
+import { StateService as StateServiceAbstraction } from "jslib-common/abstractions/state.service";
+import { StateMigrationService as StateMigrationServiceAbstraction } from "jslib-common/abstractions/stateMigration.service";
+import { StorageService as StorageServiceAbstraction } from "jslib-common/abstractions/storage.service";
+import { SyncService as SyncServiceAbstraction } from "jslib-common/abstractions/sync.service";
+import { TokenService as TokenServiceAbstraction } from "jslib-common/abstractions/token.service";
+import { TotpService as TotpServiceAbstraction } from "jslib-common/abstractions/totp.service";
+import { UserVerificationService as UserVerificationServiceAbstraction } from "jslib-common/abstractions/userVerification.service";
+import { VaultTimeoutService as VaultTimeoutServiceAbstraction } from "jslib-common/abstractions/vaultTimeout.service";
+
+import { AuthGuardService } from "./auth-guard.service";
+import { BroadcasterService } from "./broadcaster.service";
+import { LockGuardService } from "./lock-guard.service";
+import { ModalService } from "./modal.service";
+import { PasswordRepromptService } from "./passwordReprompt.service";
+import { UnauthGuardService } from "./unauth-guard.service";
+import { ValidationService } from "./validation.service";
+
+import { Account } from "jslib-common/models/domain/account";
+import { GlobalState } from "jslib-common/models/domain/globalState";
+
+import { GlobalStateFactory } from "jslib-common/factories/globalStateFactory";
+import { StateFactory } from "jslib-common/factories/stateFactory";
+
+@NgModule({
+  declarations: [],
+  providers: [
+    { provide: "WINDOW", useValue: window },
+    {
+      provide: LOCALE_ID,
+      useFactory: (i18nService: I18nServiceAbstraction) => i18nService.translationLocale,
+      deps: [I18nServiceAbstraction],
+    },
+    ValidationService,
+    AuthGuardService,
+    UnauthGuardService,
+    LockGuardService,
+    ModalService,
+    {
+      provide: AppIdServiceAbstraction,
+      useClass: AppIdService,
+      deps: [StorageServiceAbstraction],
+    },
+    {
+      provide: AuditServiceAbstraction,
+      useClass: AuditService,
+      deps: [CryptoFunctionServiceAbstraction, ApiServiceAbstraction],
+    },
+    {
+      provide: AuthServiceAbstraction,
+      useClass: AuthService,
+      deps: [
+        CryptoServiceAbstraction,
+        ApiServiceAbstraction,
+        TokenServiceAbstraction,
+        AppIdServiceAbstraction,
+        I18nServiceAbstraction,
+        PlatformUtilsServiceAbstraction,
+        MessagingServiceAbstraction,
+        VaultTimeoutServiceAbstraction,
+        LogService,
+        CryptoFunctionServiceAbstraction,
+        KeyConnectorServiceAbstraction,
+        EnvironmentServiceAbstraction,
+        StateServiceAbstraction,
+      ],
+    },
+    {
+      provide: CipherServiceAbstraction,
+      useFactory: (
+        cryptoService: CryptoServiceAbstraction,
+        settingsService: SettingsServiceAbstraction,
+        apiService: ApiServiceAbstraction,
+        fileUploadService: FileUploadServiceAbstraction,
+        i18nService: I18nServiceAbstraction,
+        injector: Injector,
+        logService: LogService,
+        stateService: StateServiceAbstraction
+      ) =>
+        new CipherService(
+          cryptoService,
+          settingsService,
+          apiService,
+          fileUploadService,
+          i18nService,
+          () => injector.get(SearchServiceAbstraction),
+          logService,
+          stateService
+        ),
+      deps: [
+        CryptoServiceAbstraction,
+        SettingsServiceAbstraction,
+        ApiServiceAbstraction,
+        FileUploadServiceAbstraction,
+        I18nServiceAbstraction,
+        Injector, // TODO: Get rid of this circular dependency!
+        LogService,
+        StateServiceAbstraction,
+      ],
+    },
+    {
+      provide: FolderServiceAbstraction,
+      useClass: FolderService,
+      deps: [
+        CryptoServiceAbstraction,
+        ApiServiceAbstraction,
+        I18nServiceAbstraction,
+        CipherServiceAbstraction,
+        StateServiceAbstraction,
+      ],
+    },
+    { provide: LogService, useFactory: () => new ConsoleLogService(false) },
+    {
+      provide: CollectionServiceAbstraction,
+      useClass: CollectionService,
+      deps: [CryptoServiceAbstraction, I18nServiceAbstraction, StateServiceAbstraction],
+    },
+    {
+      provide: EnvironmentServiceAbstraction,
+      useClass: EnvironmentService,
+      deps: [StateServiceAbstraction],
+    },
+    {
+      provide: TotpServiceAbstraction,
+      useClass: TotpService,
+      deps: [CryptoFunctionServiceAbstraction, LogService, StateServiceAbstraction],
+    },
+    { provide: TokenServiceAbstraction, useClass: TokenService, deps: [StateServiceAbstraction] },
+    {
+      provide: CryptoServiceAbstraction,
+      useClass: CryptoService,
+      deps: [
+        CryptoFunctionServiceAbstraction,
+        PlatformUtilsServiceAbstraction,
+        LogService,
+        StateServiceAbstraction,
+      ],
+    },
+    {
+      provide: PasswordGenerationServiceAbstraction,
+      useClass: PasswordGenerationService,
+      deps: [CryptoServiceAbstraction, PolicyServiceAbstraction, StateServiceAbstraction],
+    },
+    {
+      provide: ApiServiceAbstraction,
+      useFactory: (
+        tokenService: TokenServiceAbstraction,
+        platformUtilsService: PlatformUtilsServiceAbstraction,
+        environmentService: EnvironmentServiceAbstraction,
+        messagingService: MessagingServiceAbstraction
+      ) =>
+        new ApiService(
+          tokenService,
+          platformUtilsService,
+          environmentService,
+          async (expired: boolean) => messagingService.send("logout", { expired: expired })
+        ),
+      deps: [
+        TokenServiceAbstraction,
+        PlatformUtilsServiceAbstraction,
+        EnvironmentServiceAbstraction,
+        MessagingServiceAbstraction,
+      ],
+    },
+    {
+      provide: FileUploadServiceAbstraction,
+      useClass: FileUploadService,
+      deps: [LogService, ApiServiceAbstraction],
+    },
+    {
+      provide: SyncServiceAbstraction,
+      useFactory: (
+        apiService: ApiServiceAbstraction,
+        settingsService: SettingsServiceAbstraction,
+        folderService: FolderServiceAbstraction,
+        cipherService: CipherServiceAbstraction,
+        cryptoService: CryptoServiceAbstraction,
+        collectionService: CollectionServiceAbstraction,
+        messagingService: MessagingServiceAbstraction,
+        policyService: PolicyServiceAbstraction,
+        sendService: SendServiceAbstraction,
+        logService: LogService,
+        keyConnectorService: KeyConnectorServiceAbstraction,
+        stateService: StateServiceAbstraction,
+        organizationService: OrganizationServiceAbstraction,
+        providerService: ProviderServiceAbstraction
+      ) =>
+        new SyncService(
+          apiService,
+          settingsService,
+          folderService,
+          cipherService,
+          cryptoService,
+          collectionService,
+          messagingService,
+          policyService,
+          sendService,
+          logService,
+          keyConnectorService,
+          stateService,
+          organizationService,
+          providerService,
+          async (expired: boolean) => messagingService.send("logout", { expired: expired })
+        ),
+      deps: [
+        ApiServiceAbstraction,
+        SettingsServiceAbstraction,
+        FolderServiceAbstraction,
+        CipherServiceAbstraction,
+        CryptoServiceAbstraction,
+        CollectionServiceAbstraction,
+        MessagingServiceAbstraction,
+        PolicyServiceAbstraction,
+        SendServiceAbstraction,
+        LogService,
+        KeyConnectorServiceAbstraction,
+        StateServiceAbstraction,
+        OrganizationServiceAbstraction,
+        ProviderServiceAbstraction,
+      ],
+    },
+    { provide: BroadcasterServiceAbstraction, useClass: BroadcasterService },
+    {
+      provide: SettingsServiceAbstraction,
+      useClass: SettingsService,
+      deps: [StateServiceAbstraction],
+    },
+    {
+      provide: VaultTimeoutServiceAbstraction,
+      useFactory: (
+        cipherService: CipherServiceAbstraction,
+        folderService: FolderServiceAbstraction,
+        collectionService: CollectionServiceAbstraction,
+        cryptoService: CryptoServiceAbstraction,
+        platformUtilsService: PlatformUtilsServiceAbstraction,
+        messagingService: MessagingServiceAbstraction,
+        searchService: SearchServiceAbstraction,
+        tokenService: TokenServiceAbstraction,
+        policyService: PolicyServiceAbstraction,
+        keyConnectorService: KeyConnectorServiceAbstraction,
+        stateService: StateServiceAbstraction
+      ) =>
+        new VaultTimeoutService(
+          cipherService,
+          folderService,
+          collectionService,
+          cryptoService,
+          platformUtilsService,
+          messagingService,
+          searchService,
+          tokenService,
+          policyService,
+          keyConnectorService,
+          stateService,
+          null,
+          async () => messagingService.send("logout", { expired: false })
+        ),
+      deps: [
+        CipherServiceAbstraction,
+        FolderServiceAbstraction,
+        CollectionServiceAbstraction,
+        CryptoServiceAbstraction,
+        PlatformUtilsServiceAbstraction,
+        MessagingServiceAbstraction,
+        SearchServiceAbstraction,
+        TokenServiceAbstraction,
+        PolicyServiceAbstraction,
+        KeyConnectorServiceAbstraction,
+        StateServiceAbstraction,
+      ],
+    },
+    {
+      provide: StateServiceAbstraction,
+      useFactory: (
+        storageService: StorageServiceAbstraction,
+        secureStorageService: StorageServiceAbstraction,
+        logService: LogService,
+        stateMigrationService: StateMigrationServiceAbstraction
+      ) =>
+        new StateService(
+          storageService,
+          secureStorageService,
+          logService,
+          stateMigrationService,
+          new StateFactory(GlobalState, Account)
+        ),
+      deps: [
+        StorageServiceAbstraction,
+        "SECURE_STORAGE",
+        LogService,
+        StateMigrationServiceAbstraction,
+      ],
+    },
+    {
+      provide: StateMigrationServiceAbstraction,
+      useFactory: (
+        storageService: StorageServiceAbstraction,
+        secureStorageService: StorageServiceAbstraction
+      ) =>
+        new StateMigrationService(
+          storageService,
+          secureStorageService,
+          new GlobalStateFactory(GlobalState)
+        ),
+      deps: [StorageServiceAbstraction, "SECURE_STORAGE"],
+    },
+    {
+      provide: ExportServiceAbstraction,
+      useClass: ExportService,
+      deps: [
+        FolderServiceAbstraction,
+        CipherServiceAbstraction,
+        ApiServiceAbstraction,
+        CryptoServiceAbstraction,
+      ],
+    },
+    {
+      provide: SearchServiceAbstraction,
+      useClass: SearchService,
+      deps: [CipherServiceAbstraction, LogService, I18nServiceAbstraction],
+    },
+    {
+      provide: NotificationsServiceAbstraction,
+      useFactory: (
+        syncService: SyncServiceAbstraction,
+        appIdService: AppIdServiceAbstraction,
+        apiService: ApiServiceAbstraction,
+        vaultTimeoutService: VaultTimeoutServiceAbstraction,
+        environmentService: EnvironmentServiceAbstraction,
+        messagingService: MessagingServiceAbstraction,
+        logService: LogService,
+        stateService: StateServiceAbstraction
+      ) =>
+        new NotificationsService(
+          syncService,
+          appIdService,
+          apiService,
+          vaultTimeoutService,
+          environmentService,
+          async () => messagingService.send("logout", { expired: true }),
+          logService,
+          stateService
+        ),
+      deps: [
+        SyncServiceAbstraction,
+        AppIdServiceAbstraction,
+        ApiServiceAbstraction,
+        VaultTimeoutServiceAbstraction,
+        EnvironmentServiceAbstraction,
+        MessagingServiceAbstraction,
+        LogService,
+        StateServiceAbstraction,
+      ],
+    },
+    {
+      provide: CryptoFunctionServiceAbstraction,
+      useClass: WebCryptoFunctionService,
+      deps: ["WINDOW", PlatformUtilsServiceAbstraction],
+    },
+    {
+      provide: EventServiceAbstraction,
+      useClass: EventService,
+      deps: [
+        ApiServiceAbstraction,
+        CipherServiceAbstraction,
+        StateServiceAbstraction,
+        LogService,
+        OrganizationServiceAbstraction,
+      ],
+    },
+    {
+      provide: PolicyServiceAbstraction,
+      useClass: PolicyService,
+      deps: [StateServiceAbstraction, OrganizationServiceAbstraction, ApiServiceAbstraction],
+    },
+    {
+      provide: SendServiceAbstraction,
+      useClass: SendService,
+      deps: [
+        CryptoServiceAbstraction,
+        ApiServiceAbstraction,
+        FileUploadServiceAbstraction,
+        I18nServiceAbstraction,
+        CryptoFunctionServiceAbstraction,
+        StateServiceAbstraction,
+      ],
+    },
+    {
+      provide: KeyConnectorServiceAbstraction,
+      useClass: KeyConnectorService,
+      deps: [
+        StateServiceAbstraction,
+        CryptoServiceAbstraction,
+        ApiServiceAbstraction,
+        TokenServiceAbstraction,
+        LogService,
+        OrganizationServiceAbstraction,
+      ],
+    },
+    {
+      provide: UserVerificationServiceAbstraction,
+      useClass: UserVerificationService,
+      deps: [CryptoServiceAbstraction, I18nServiceAbstraction, ApiServiceAbstraction],
+    },
+    { provide: PasswordRepromptServiceAbstraction, useClass: PasswordRepromptService },
+    {
+      provide: OrganizationServiceAbstraction,
+      useClass: OrganizationService,
+      deps: [StateServiceAbstraction],
+    },
+    {
+      provide: ProviderServiceAbstraction,
+      useClass: ProviderService,
+      deps: [StateServiceAbstraction],
+    },
+  ],
+})
+export class JslibServicesModule {}
diff --git a/jslib/angular/src/services/lock-guard.service.ts b/jslib/angular/src/services/lock-guard.service.ts
index 400eedc5..992c6e5d 100644
--- a/jslib/angular/src/services/lock-guard.service.ts
+++ b/jslib/angular/src/services/lock-guard.service.ts
@@ -1,32 +1,29 @@
-import { Injectable } from '@angular/core';
-import {
-    CanActivate,
-    Router,
-} from '@angular/router';
+import { Injectable } from "@angular/core";
+import { CanActivate, Router } from "@angular/router";
 
-import { UserService } from 'jslib-common/abstractions/user.service';
-import { VaultTimeoutService } from 'jslib-common/abstractions/vaultTimeout.service';
+import { StateService } from "jslib-common/abstractions/state.service";
+import { VaultTimeoutService } from "jslib-common/abstractions/vaultTimeout.service";
 
 @Injectable()
 export class LockGuardService implements CanActivate {
+  protected homepage = "vault";
+  protected loginpage = "login";
+  constructor(
+    private vaultTimeoutService: VaultTimeoutService,
+    private router: Router,
+    private stateService: StateService
+  ) {}
 
-    protected homepage = 'vault';
-    constructor(private vaultTimeoutService: VaultTimeoutService, private userService: UserService,
-        private router: Router) { }
+  async canActivate() {
+    if (await this.vaultTimeoutService.isLocked()) {
+      return true;
+    }
 
-    async canActivate() {
-        const isAuthed = await this.userService.isAuthenticated();
-        if (isAuthed) {
-            const locked = await this.vaultTimeoutService.isLocked();
-            if (locked) {
-                return true;
-            } else {
-                this.router.navigate([this.homepage]);
-                return false;
-            }
-        }
+    const redirectUrl = (await this.stateService.getIsAuthenticated())
+      ? [this.homepage]
+      : [this.loginpage];
 
-        this.router.navigate(['']);
-        return false;
-    }
+    this.router.navigate(redirectUrl);
+    return false;
+  }
 }
diff --git a/jslib/angular/src/services/modal.service.ts b/jslib/angular/src/services/modal.service.ts
index 9674cd1a..f487c579 100644
--- a/jslib/angular/src/services/modal.service.ts
+++ b/jslib/angular/src/services/modal.service.ts
@@ -1,164 +1,179 @@
 import {
-    ApplicationRef,
-    ComponentFactory,
-    ComponentFactoryResolver,
-    ComponentRef,
-    EmbeddedViewRef,
-    Injectable,
-    Injector,
-    Type,
-    ViewContainerRef
-} from '@angular/core';
-import { first } from 'rxjs/operators';
-
-import { DynamicModalComponent } from '../components/modal/dynamic-modal.component';
-import { ModalInjector } from '../components/modal/modal-injector';
-import { ModalRef } from '../components/modal/modal.ref';
+  ApplicationRef,
+  ComponentFactory,
+  ComponentFactoryResolver,
+  ComponentRef,
+  EmbeddedViewRef,
+  Injectable,
+  Injector,
+  Type,
+  ViewContainerRef,
+} from "@angular/core";
+import { first } from "rxjs/operators";
+
+import { DynamicModalComponent } from "../components/modal/dynamic-modal.component";
+import { ModalInjector } from "../components/modal/modal-injector";
+import { ModalRef } from "../components/modal/modal.ref";
 
 export class ModalConfig<D = any> {
-    data?: D;
-    allowMultipleModals: boolean = false;
+  data?: D;
+  allowMultipleModals: boolean = false;
 }
 
 @Injectable()
 export class ModalService {
-    protected modalList: ComponentRef<DynamicModalComponent>[] = [];
-
-    // Lazy loaded modules are not available in componentFactoryResolver,
-    // therefore modules needs to manually initialize their resolvers.
-    private factoryResolvers: Map<Type<any>, ComponentFactoryResolver> = new Map();
-
-    constructor(private componentFactoryResolver: ComponentFactoryResolver, private applicationRef: ApplicationRef,
-        private injector: Injector) {
-        document.addEventListener('keyup', event => {
-            if (event.key === 'Escape' && this.modalCount > 0) {
-                this.topModal.instance.close();
-            }
-        });
-    }
-
-    get modalCount() {
-        return this.modalList.length;
+  protected modalList: ComponentRef<DynamicModalComponent>[] = [];
+
+  // Lazy loaded modules are not available in componentFactoryResolver,
+  // therefore modules needs to manually initialize their resolvers.
+  private factoryResolvers: Map<Type<any>, ComponentFactoryResolver> = new Map();
+
+  constructor(
+    private componentFactoryResolver: ComponentFactoryResolver,
+    private applicationRef: ApplicationRef,
+    private injector: Injector
+  ) {
+    document.addEventListener("keyup", (event) => {
+      if (event.key === "Escape" && this.modalCount > 0) {
+        this.topModal.instance.close();
+      }
+    });
+  }
+
+  get modalCount() {
+    return this.modalList.length;
+  }
+
+  private get topModal() {
+    return this.modalList[this.modalCount - 1];
+  }
+
+  async openViewRef<T>(
+    componentType: Type<T>,
+    viewContainerRef: ViewContainerRef,
+    setComponentParameters: (component: T) => void = null
+  ): Promise<[ModalRef, T]> {
+    const [modalRef, modalComponentRef] = this.openInternal(componentType, null, false);
+    modalComponentRef.instance.setComponentParameters = setComponentParameters;
+
+    viewContainerRef.insert(modalComponentRef.hostView);
+
+    await modalRef.onCreated.pipe(first()).toPromise();
+
+    return [modalRef, modalComponentRef.instance.componentRef.instance];
+  }
+
+  open(componentType: Type<any>, config?: ModalConfig) {
+    if (!(config?.allowMultipleModals ?? false) && this.modalCount > 0) {
+      return;
     }
 
-    private get topModal() {
-        return this.modalList[this.modalCount - 1];
-    }
-
-    async openViewRef<T>(componentType: Type<T>, viewContainerRef: ViewContainerRef,
-        setComponentParameters: (component: T) => void = null): Promise<[ModalRef, T]> {
-
-        const [modalRef, modalComponentRef] = this.openInternal(componentType, null, false);
-        modalComponentRef.instance.setComponentParameters = setComponentParameters;
-
-        viewContainerRef.insert(modalComponentRef.hostView);
+    const [modalRef, _] = this.openInternal(componentType, config, true);
 
-        await modalRef.onCreated.pipe(first()).toPromise();
+    return modalRef;
+  }
 
-        return [modalRef, modalComponentRef.instance.componentRef.instance];
-    }
-
-    open(componentType: Type<any>, config?: ModalConfig) {
-        if (!(config?.allowMultipleModals ?? false) && this.modalCount > 0) {
-            return;
-        }
+  registerComponentFactoryResolver<T>(
+    componentType: Type<T>,
+    componentFactoryResolver: ComponentFactoryResolver
+  ): void {
+    this.factoryResolvers.set(componentType, componentFactoryResolver);
+  }
 
-        const [modalRef, _] = this.openInternal(componentType, config, true);
-
-        return modalRef;
+  resolveComponentFactory<T>(componentType: Type<T>): ComponentFactory<T> {
+    if (this.factoryResolvers.has(componentType)) {
+      return this.factoryResolvers.get(componentType).resolveComponentFactory(componentType);
     }
 
-    registerComponentFactoryResolver<T>(componentType: Type<T>, componentFactoryResolver: ComponentFactoryResolver): void {
-        this.factoryResolvers.set(componentType, componentFactoryResolver);
+    return this.componentFactoryResolver.resolveComponentFactory(componentType);
+  }
+
+  protected openInternal(
+    componentType: Type<any>,
+    config?: ModalConfig,
+    attachToDom?: boolean
+  ): [ModalRef, ComponentRef<DynamicModalComponent>] {
+    const [modalRef, componentRef] = this.createModalComponent(config);
+    componentRef.instance.childComponentType = componentType;
+
+    if (attachToDom) {
+      this.applicationRef.attachView(componentRef.hostView);
+      const domElem = (componentRef.hostView as EmbeddedViewRef<any>).rootNodes[0] as HTMLElement;
+      document.body.appendChild(domElem);
     }
 
-    resolveComponentFactory<T>(componentType: Type<T>): ComponentFactory<T> {
-        if (this.factoryResolvers.has(componentType)) {
-            return this.factoryResolvers.get(componentType).resolveComponentFactory(componentType);
-        }
+    modalRef.onClosed.pipe(first()).subscribe(() => {
+      if (attachToDom) {
+        this.applicationRef.detachView(componentRef.hostView);
+      }
+      componentRef.destroy();
 
-        return this.componentFactoryResolver.resolveComponentFactory(componentType);
-    }
+      this.modalList.pop();
+      if (this.modalCount > 0) {
+        this.topModal.instance.getFocus();
+      }
+    });
 
-    protected openInternal(componentType: Type<any>, config?: ModalConfig, attachToDom?: boolean):
-        [ModalRef, ComponentRef<DynamicModalComponent>] {
+    this.setupHandlers(modalRef);
 
-        const [modalRef, componentRef] = this.createModalComponent(config);
-        componentRef.instance.childComponentType = componentType;
+    this.modalList.push(componentRef);
 
-        if (attachToDom) {
-            this.applicationRef.attachView(componentRef.hostView);
-            const domElem = (componentRef.hostView as EmbeddedViewRef<any>).rootNodes[0] as HTMLElement;
-            document.body.appendChild(domElem);
-        }
+    return [modalRef, componentRef];
+  }
 
-        modalRef.onClosed.pipe(first()).subscribe(() => {
-            if (attachToDom) {
-                this.applicationRef.detachView(componentRef.hostView);
-            }
-            componentRef.destroy();
+  protected setupHandlers(modalRef: ModalRef) {
+    let backdrop: HTMLElement = null;
 
-            this.modalList.pop();
-            if (this.modalCount > 0) {
-                this.topModal.instance.getFocus();
-            }
-        });
-
-        this.setupHandlers(modalRef);
+    // Add backdrop, setup [data-dismiss] handler.
+    modalRef.onCreated.pipe(first()).subscribe((el) => {
+      document.body.classList.add("modal-open");
 
-        this.modalList.push(componentRef);
+      const modalEl: HTMLElement = el.querySelector(".modal");
+      const dialogEl = modalEl.querySelector(".modal-dialog") as HTMLElement;
 
-        return [modalRef, componentRef];
-    }
+      backdrop = document.createElement("div");
+      backdrop.className = "modal-backdrop fade";
+      backdrop.style.zIndex = `${this.modalCount}040`;
+      modalEl.prepend(backdrop);
 
-    protected setupHandlers(modalRef: ModalRef) {
-        let backdrop: HTMLElement = null;
+      dialogEl.addEventListener("click", (e: Event) => {
+        e.stopPropagation();
+      });
+      dialogEl.style.zIndex = `${this.modalCount}050`;
 
-        // Add backdrop, setup [data-dismiss] handler.
-        modalRef.onCreated.pipe(first()).subscribe(el => {
-            document.body.classList.add('modal-open');
-
-            const modalEl: HTMLElement = el.querySelector('.modal');
-            const dialogEl = modalEl.querySelector('.modal-dialog') as HTMLElement;
-
-            backdrop = document.createElement('div');
-            backdrop.className = 'modal-backdrop fade';
-            backdrop.style.zIndex = `${this.modalCount}040`;
-            modalEl.prepend(backdrop);
-
-            dialogEl.addEventListener('click', (e: Event) => {
-                e.stopPropagation();
-            });
-            dialogEl.style.zIndex = `${this.modalCount}050`;
-
-            const modals = Array.from(el.querySelectorAll('.modal-backdrop, .modal *[data-dismiss="modal"]'));
-            for (const closeElement of modals) {
-                closeElement.addEventListener('click', event => {
-                    modalRef.close();
-                });
-            }
-        });
-
-        // onClose is used in Web to hook into bootstrap. On other projects we pipe it directly to closed.
-        modalRef.onClose.pipe(first()).subscribe(() => {
-            modalRef.closed();
-
-            if (this.modalCount === 0) {
-                document.body.classList.remove('modal-open');
-            }
+      const modals = Array.from(
+        el.querySelectorAll('.modal-backdrop, .modal *[data-dismiss="modal"]')
+      );
+      for (const closeElement of modals) {
+        closeElement.addEventListener("click", (event) => {
+          modalRef.close();
         });
-    }
-
-    protected createModalComponent(config: ModalConfig): [ModalRef, ComponentRef<DynamicModalComponent>] {
-        const modalRef = new ModalRef();
-
-        const map = new WeakMap();
-        map.set(ModalConfig, config);
-        map.set(ModalRef, modalRef);
-
-        const componentFactory = this.componentFactoryResolver.resolveComponentFactory(DynamicModalComponent);
-        const componentRef = componentFactory.create(new ModalInjector(this.injector, map));
-
-        return [modalRef, componentRef];
-    }
+      }
+    });
+
+    // onClose is used in Web to hook into bootstrap. On other projects we pipe it directly to closed.
+    modalRef.onClose.pipe(first()).subscribe(() => {
+      modalRef.closed();
+
+      if (this.modalCount === 0) {
+        document.body.classList.remove("modal-open");
+      }
+    });
+  }
+
+  protected createModalComponent(
+    config: ModalConfig
+  ): [ModalRef, ComponentRef<DynamicModalComponent>] {
+    const modalRef = new ModalRef();
+
+    const map = new WeakMap();
+    map.set(ModalConfig, config);
+    map.set(ModalRef, modalRef);
+
+    const componentFactory =
+      this.componentFactoryResolver.resolveComponentFactory(DynamicModalComponent);
+    const componentRef = componentFactory.create(new ModalInjector(this.injector, map));
+
+    return [modalRef, componentRef];
+  }
 }
diff --git a/jslib/angular/src/services/passwordReprompt.service.ts b/jslib/angular/src/services/passwordReprompt.service.ts
index 03e04531..58ae5190 100644
--- a/jslib/angular/src/services/passwordReprompt.service.ts
+++ b/jslib/angular/src/services/passwordReprompt.service.ts
@@ -1,37 +1,40 @@
-import { Injectable } from '@angular/core';
+import { Injectable } from "@angular/core";
 
-import { KeyConnectorService } from 'jslib-common/abstractions/keyConnector.service';
-import { PasswordRepromptService as PasswordRepromptServiceAbstraction } from 'jslib-common/abstractions/passwordReprompt.service';
+import { KeyConnectorService } from "jslib-common/abstractions/keyConnector.service";
+import { PasswordRepromptService as PasswordRepromptServiceAbstraction } from "jslib-common/abstractions/passwordReprompt.service";
 
-import { PasswordRepromptComponent } from '../components/password-reprompt.component';
-import { ModalService } from './modal.service';
+import { PasswordRepromptComponent } from "../components/password-reprompt.component";
+import { ModalService } from "./modal.service";
 
 @Injectable()
 export class PasswordRepromptService implements PasswordRepromptServiceAbstraction {
-    protected component = PasswordRepromptComponent;
+  protected component = PasswordRepromptComponent;
 
-    constructor(private modalService: ModalService, private keyConnectorService: KeyConnectorService) { }
+  constructor(
+    private modalService: ModalService,
+    private keyConnectorService: KeyConnectorService
+  ) {}
 
-    protectedFields() {
-        return ['TOTP', 'Password', 'H_Field', 'Card Number', 'Security Code'];
-    }
-
-    async showPasswordPrompt() {
-        if (!await this.enabled()) {
-            return true;
-        }
+  protectedFields() {
+    return ["TOTP", "Password", "H_Field", "Card Number", "Security Code"];
+  }
 
-        const ref = this.modalService.open(this.component, {allowMultipleModals: true});
+  async showPasswordPrompt() {
+    if (!(await this.enabled())) {
+      return true;
+    }
 
-        if (ref == null) {
-            return false;
-        }
+    const ref = this.modalService.open(this.component, { allowMultipleModals: true });
 
-        const result = await ref.onClosedPromise();
-        return result === true;
+    if (ref == null) {
+      return false;
     }
 
-    async enabled() {
-        return !await this.keyConnectorService.getUsesKeyConnector();
-    }
+    const result = await ref.onClosedPromise();
+    return result === true;
+  }
+
+  async enabled() {
+    return !(await this.keyConnectorService.getUsesKeyConnector());
+  }
 }
diff --git a/jslib/angular/src/services/unauth-guard.service.ts b/jslib/angular/src/services/unauth-guard.service.ts
index 786241b8..ee2da045 100644
--- a/jslib/angular/src/services/unauth-guard.service.ts
+++ b/jslib/angular/src/services/unauth-guard.service.ts
@@ -1,32 +1,29 @@
-import { Injectable } from '@angular/core';
-import {
-    ActivatedRouteSnapshot,
-    CanActivate,
-    Router,
-} from '@angular/router';
+import { Injectable } from "@angular/core";
+import { CanActivate, Router } from "@angular/router";
 
-import { UserService } from 'jslib-common/abstractions/user.service';
-import { VaultTimeoutService } from 'jslib-common/abstractions/vaultTimeout.service';
+import { StateService } from "jslib-common/abstractions/state.service";
+import { VaultTimeoutService } from "jslib-common/abstractions/vaultTimeout.service";
 
 @Injectable()
 export class UnauthGuardService implements CanActivate {
+  protected homepage = "vault";
+  constructor(
+    private vaultTimeoutService: VaultTimeoutService,
+    private router: Router,
+    private stateService: StateService
+  ) {}
 
-    protected homepage = 'vault';
-    constructor(private vaultTimeoutService: VaultTimeoutService, private userService: UserService,
-        private router: Router) { }
-
-    async canActivate() {
-        const isAuthed = await this.userService.isAuthenticated();
-        if (isAuthed) {
-            const locked = await this.vaultTimeoutService.isLocked();
-            if (locked) {
-                this.router.navigate(['lock']);
-            } else {
-                this.router.navigate([this.homepage]);
-            }
-            return false;
-        }
-
-        return true;
+  async canActivate() {
+    const isAuthed = await this.stateService.getIsAuthenticated();
+    if (isAuthed) {
+      const locked = await this.vaultTimeoutService.isLocked();
+      if (locked) {
+        this.router.navigate(["lock"]);
+      } else {
+        this.router.navigate([this.homepage]);
+      }
+      return false;
     }
+    return true;
+  }
 }
diff --git a/jslib/angular/src/services/validation.service.ts b/jslib/angular/src/services/validation.service.ts
index 1fa38119..9cb04b38 100644
--- a/jslib/angular/src/services/validation.service.ts
+++ b/jslib/angular/src/services/validation.service.ts
@@ -1,36 +1,39 @@
-import { Injectable } from '@angular/core';
+import { Injectable } from "@angular/core";
 
-import { I18nService } from 'jslib-common/abstractions/i18n.service';
-import { PlatformUtilsService } from 'jslib-common/abstractions/platformUtils.service';
+import { I18nService } from "jslib-common/abstractions/i18n.service";
+import { PlatformUtilsService } from "jslib-common/abstractions/platformUtils.service";
 
-import { ErrorResponse } from 'jslib-common/models/response/errorResponse';
+import { ErrorResponse } from "jslib-common/models/response/errorResponse";
 
 @Injectable()
 export class ValidationService {
-    constructor(private i18nService: I18nService, private platformUtilsService: PlatformUtilsService) { }
+  constructor(
+    private i18nService: I18nService,
+    private platformUtilsService: PlatformUtilsService
+  ) {}
 
-    showError(data: any): string[] {
-        const defaultErrorMessage = this.i18nService.t('unexpectedError');
-        let errors: string[] = [];
+  showError(data: any): string[] {
+    const defaultErrorMessage = this.i18nService.t("unexpectedError");
+    let errors: string[] = [];
 
-        if (data != null && typeof data === 'string') {
-            errors.push(data);
-        } else if (data == null || typeof data !== 'object') {
-            errors.push(defaultErrorMessage);
-        } else if (data.validationErrors != null) {
-            errors = errors.concat((data as ErrorResponse).getAllMessages());
-        } else {
-            errors.push(data.message ? data.message : defaultErrorMessage);
-        }
-
-        if (errors.length === 1) {
-            this.platformUtilsService.showToast('error', this.i18nService.t('errorOccurred'), errors[0]);
-        } else if (errors.length > 1) {
-            this.platformUtilsService.showToast('error', this.i18nService.t('errorOccurred'), errors, {
-                timeout: 5000 * errors.length,
-            });
-        }
+    if (data != null && typeof data === "string") {
+      errors.push(data);
+    } else if (data == null || typeof data !== "object") {
+      errors.push(defaultErrorMessage);
+    } else if (data.validationErrors != null) {
+      errors = errors.concat((data as ErrorResponse).getAllMessages());
+    } else {
+      errors.push(data.message ? data.message : defaultErrorMessage);
+    }
 
-        return errors;
+    if (errors.length === 1) {
+      this.platformUtilsService.showToast("error", this.i18nService.t("errorOccurred"), errors[0]);
+    } else if (errors.length > 1) {
+      this.platformUtilsService.showToast("error", this.i18nService.t("errorOccurred"), errors, {
+        timeout: 5000 * errors.length,
+      });
     }
+
+    return errors;
+  }
 }
diff --git a/jslib/angular/tsconfig.json b/jslib/angular/tsconfig.json
index 3d41e86c..07c6a21d 100644
--- a/jslib/angular/tsconfig.json
+++ b/jslib/angular/tsconfig.json
@@ -1,30 +1,10 @@
 {
+  "extends": "../shared/tsconfig",
   "compilerOptions": {
-    "pretty": true,
-    "moduleResolution": "node",
-    "noImplicitAny": true,
-    "target": "ES6",
-    "module": "commonjs",
-    "lib": ["es5", "es6", "es7", "dom"],
-    "sourceMap": true,
-    "declaration": true,
-    "allowSyntheticDefaultImports": true,
-    "experimentalDecorators": true,
-    "emitDecoratorMetadata": true,
-    "declarationDir": "dist/types",
-    "outDir": "dist",
     "paths": {
-      "jslib-common/*": [
-        "../common/src/*"
-      ]
+      "jslib-common/*": ["../common/src/*"]
     }
   },
-  "include": [
-    "src",
-    "spec"
-  ],
-  "exclude": [
-    "node_modules",
-    "dist"
-  ]
+  "include": ["src", "spec"],
+  "exclude": ["node_modules", "dist"]
 }
diff --git a/jslib/common/package-lock.json b/jslib/common/package-lock.json
index f19395f3..b97b5406 100644
--- a/jslib/common/package-lock.json
+++ b/jslib/common/package-lock.json
@@ -16,19 +16,19 @@
         "lunr": "^2.3.9",
         "node-forge": "^0.10.0",
         "papaparse": "^5.3.0",
-        "rxjs": "6.6.7",
+        "rxjs": "^7.4.0",
         "tldjs": "^2.3.1",
         "zxcvbn": "^4.4.2"
       },
       "devDependencies": {
         "@types/lunr": "^2.3.3",
-        "@types/node": "^14.17.1",
+        "@types/node": "^16.11.12",
         "@types/node-forge": "^0.9.7",
         "@types/papaparse": "^5.2.5",
         "@types/tldjs": "^2.3.0",
         "@types/zxcvbn": "^4.4.1",
         "rimraf": "^3.0.2",
-        "typescript": "4.1.5"
+        "typescript": "4.3.5"
       }
     },
     "node_modules/@microsoft/signalr": {
@@ -59,9 +59,9 @@
       "dev": true
     },
     "node_modules/@types/node": {
-      "version": "14.17.19",
-      "resolved": "https://registry.npmjs.org/@types/node/-/node-14.17.19.tgz",
-      "integrity": "sha512-jjYI6NkyfXykucU6ELEoT64QyKOdvaA6enOqKtP4xUsGY0X0ZUZz29fUmrTRo+7v7c6TgDu82q3GHHaCEkqZwA==",
+      "version": "16.11.12",
+      "resolved": "https://registry.npmjs.org/@types/node/-/node-16.11.12.tgz",
+      "integrity": "sha512-+2Iggwg7PxoO5Kyhvsq9VarmPbIelXP070HMImEpbtGCoyWNINQj4wzjbQCXzdHTRXnqufutJb5KAURZANNBAw==",
       "dev": true
     },
     "node_modules/@types/node-forge": {
@@ -74,9 +74,9 @@
       }
     },
     "node_modules/@types/papaparse": {
-      "version": "5.2.6",
-      "resolved": "https://registry.npmjs.org/@types/papaparse/-/papaparse-5.2.6.tgz",
-      "integrity": "sha512-xGKSd0UTn58N1h0+zf8mW863Rv8BvXcGibEgKFtBIXZlcDXAmX/T4RdDO2mwmrmOypUDt5vRgo2v32a78JdqUA==",
+      "version": "5.3.1",
+      "resolved": "https://registry.npmjs.org/@types/papaparse/-/papaparse-5.3.1.tgz",
+      "integrity": "sha512-1lbngk9wty2kCyQB42LjqSa12SEop3t9wcEC7/xYr3ujTSTmv7HWKjKYXly0GkMfQ42PRb2lFPFEibDOiMXS0g==",
       "dev": true,
       "dependencies": {
         "@types/node": "*"
@@ -267,9 +267,9 @@
       }
     },
     "node_modules/node-fetch": {
-      "version": "2.6.5",
-      "resolved": "https://registry.npmjs.org/node-fetch/-/node-fetch-2.6.5.tgz",
-      "integrity": "sha512-mmlIVHJEu5rnIxgEgez6b9GgWXbkZj5YZ7fx+2r94a2E+Uirsp6HsPTPlomfdHtpt/B0cdKviwkoaM6pyvUOpQ==",
+      "version": "2.6.6",
+      "resolved": "https://registry.npmjs.org/node-fetch/-/node-fetch-2.6.6.tgz",
+      "integrity": "sha512-Z8/6vRlTUChSdIgMa51jxQ4lrw/Jy5SOW10ObaA47/RElsAN2c5Pn8bTgFGWn/ibwzXTE8qwr1Yzx28vsecXEA==",
       "dependencies": {
         "whatwg-url": "^5.0.0"
       },
@@ -376,14 +376,11 @@
       }
     },
     "node_modules/rxjs": {
-      "version": "6.6.7",
-      "resolved": "https://registry.npmjs.org/rxjs/-/rxjs-6.6.7.tgz",
-      "integrity": "sha512-hTdwr+7yYNIT5n4AMYp85KA6yw2Va0FLa3Rguvbpa4W3I5xynaBZo41cM3XM+4Q6fRMj3sBYIR1VAmZMXYJvRQ==",
+      "version": "7.4.0",
+      "resolved": "https://registry.npmjs.org/rxjs/-/rxjs-7.4.0.tgz",
+      "integrity": "sha512-7SQDi7xeTMCJpqViXh8gL/lebcwlp3d831F05+9B44A4B0WfsEwUQHR64gsH1kvJ+Ep/J9K2+n1hVl1CsGN23w==",
       "dependencies": {
-        "tslib": "^1.9.0"
-      },
-      "engines": {
-        "npm": ">=2.0.0"
+        "tslib": "~2.1.0"
       }
     },
     "node_modules/safe-buffer": {
@@ -456,14 +453,14 @@
       "integrity": "sha1-gYT9NH2snNwYWZLzpmIuFLnZq2o="
     },
     "node_modules/tslib": {
-      "version": "1.14.1",
-      "resolved": "https://registry.npmjs.org/tslib/-/tslib-1.14.1.tgz",
-      "integrity": "sha512-Xni35NKzjgMrwevysHTCArtLDpPvye8zV/0E4EyYn43P7/7qvQwPh9BGkHewbMulVntbigmcT7rdX3BNo9wRJg=="
+      "version": "2.1.0",
+      "resolved": "https://registry.npmjs.org/tslib/-/tslib-2.1.0.tgz",
+      "integrity": "sha512-hcVC3wYEziELGGmEEXue7D75zbwIIVUMWAVbHItGPx0ziyXxrOMQx4rQEVEV45Ut/1IotuEvwqPopzIOkDMf0A=="
     },
     "node_modules/typescript": {
-      "version": "4.1.5",
-      "resolved": "https://registry.npmjs.org/typescript/-/typescript-4.1.5.tgz",
-      "integrity": "sha512-6OSu9PTIzmn9TCDiovULTnET6BgXtDYL4Gg4szY+cGsc3JP1dQL8qvE8kShTRx1NIw4Q9IBHlwODjkjWEtMUyA==",
+      "version": "4.3.5",
+      "resolved": "https://registry.npmjs.org/typescript/-/typescript-4.3.5.tgz",
+      "integrity": "sha512-DqQgihaQ9cUrskJo9kIyW/+g0Vxsk8cDtZ52a3NGh0YNTfpUSArXSohyUGnvbPazEPLu398C0UxmKSOrPumUzA==",
       "dev": true,
       "bin": {
         "tsc": "bin/tsc",
@@ -550,9 +547,9 @@
       "dev": true
     },
     "@types/node": {
-      "version": "14.17.19",
-      "resolved": "https://registry.npmjs.org/@types/node/-/node-14.17.19.tgz",
-      "integrity": "sha512-jjYI6NkyfXykucU6ELEoT64QyKOdvaA6enOqKtP4xUsGY0X0ZUZz29fUmrTRo+7v7c6TgDu82q3GHHaCEkqZwA==",
+      "version": "16.11.12",
+      "resolved": "https://registry.npmjs.org/@types/node/-/node-16.11.12.tgz",
+      "integrity": "sha512-+2Iggwg7PxoO5Kyhvsq9VarmPbIelXP070HMImEpbtGCoyWNINQj4wzjbQCXzdHTRXnqufutJb5KAURZANNBAw==",
       "dev": true
     },
     "@types/node-forge": {
@@ -565,9 +562,9 @@
       }
     },
     "@types/papaparse": {
-      "version": "5.2.6",
-      "resolved": "https://registry.npmjs.org/@types/papaparse/-/papaparse-5.2.6.tgz",
-      "integrity": "sha512-xGKSd0UTn58N1h0+zf8mW863Rv8BvXcGibEgKFtBIXZlcDXAmX/T4RdDO2mwmrmOypUDt5vRgo2v32a78JdqUA==",
+      "version": "5.3.1",
+      "resolved": "https://registry.npmjs.org/@types/papaparse/-/papaparse-5.3.1.tgz",
+      "integrity": "sha512-1lbngk9wty2kCyQB42LjqSa12SEop3t9wcEC7/xYr3ujTSTmv7HWKjKYXly0GkMfQ42PRb2lFPFEibDOiMXS0g==",
       "dev": true,
       "requires": {
         "@types/node": "*"
@@ -737,9 +734,9 @@
       }
     },
     "node-fetch": {
-      "version": "2.6.5",
-      "resolved": "https://registry.npmjs.org/node-fetch/-/node-fetch-2.6.5.tgz",
-      "integrity": "sha512-mmlIVHJEu5rnIxgEgez6b9GgWXbkZj5YZ7fx+2r94a2E+Uirsp6HsPTPlomfdHtpt/B0cdKviwkoaM6pyvUOpQ==",
+      "version": "2.6.6",
+      "resolved": "https://registry.npmjs.org/node-fetch/-/node-fetch-2.6.6.tgz",
+      "integrity": "sha512-Z8/6vRlTUChSdIgMa51jxQ4lrw/Jy5SOW10ObaA47/RElsAN2c5Pn8bTgFGWn/ibwzXTE8qwr1Yzx28vsecXEA==",
       "requires": {
         "whatwg-url": "^5.0.0"
       }
@@ -833,11 +830,11 @@
       }
     },
     "rxjs": {
-      "version": "6.6.7",
-      "resolved": "https://registry.npmjs.org/rxjs/-/rxjs-6.6.7.tgz",
-      "integrity": "sha512-hTdwr+7yYNIT5n4AMYp85KA6yw2Va0FLa3Rguvbpa4W3I5xynaBZo41cM3XM+4Q6fRMj3sBYIR1VAmZMXYJvRQ==",
+      "version": "7.4.0",
+      "resolved": "https://registry.npmjs.org/rxjs/-/rxjs-7.4.0.tgz",
+      "integrity": "sha512-7SQDi7xeTMCJpqViXh8gL/lebcwlp3d831F05+9B44A4B0WfsEwUQHR64gsH1kvJ+Ep/J9K2+n1hVl1CsGN23w==",
       "requires": {
-        "tslib": "^1.9.0"
+        "tslib": "~2.1.0"
       }
     },
     "safe-buffer": {
@@ -890,14 +887,14 @@
       "integrity": "sha1-gYT9NH2snNwYWZLzpmIuFLnZq2o="
     },
     "tslib": {
-      "version": "1.14.1",
-      "resolved": "https://registry.npmjs.org/tslib/-/tslib-1.14.1.tgz",
-      "integrity": "sha512-Xni35NKzjgMrwevysHTCArtLDpPvye8zV/0E4EyYn43P7/7qvQwPh9BGkHewbMulVntbigmcT7rdX3BNo9wRJg=="
+      "version": "2.1.0",
+      "resolved": "https://registry.npmjs.org/tslib/-/tslib-2.1.0.tgz",
+      "integrity": "sha512-hcVC3wYEziELGGmEEXue7D75zbwIIVUMWAVbHItGPx0ziyXxrOMQx4rQEVEV45Ut/1IotuEvwqPopzIOkDMf0A=="
     },
     "typescript": {
-      "version": "4.1.5",
-      "resolved": "https://registry.npmjs.org/typescript/-/typescript-4.1.5.tgz",
-      "integrity": "sha512-6OSu9PTIzmn9TCDiovULTnET6BgXtDYL4Gg4szY+cGsc3JP1dQL8qvE8kShTRx1NIw4Q9IBHlwODjkjWEtMUyA==",
+      "version": "4.3.5",
+      "resolved": "https://registry.npmjs.org/typescript/-/typescript-4.3.5.tgz",
+      "integrity": "sha512-DqQgihaQ9cUrskJo9kIyW/+g0Vxsk8cDtZ52a3NGh0YNTfpUSArXSohyUGnvbPazEPLu398C0UxmKSOrPumUzA==",
       "dev": true
     },
     "url-parse": {
diff --git a/jslib/common/package.json b/jslib/common/package.json
index 3e1e8044..95b2f817 100644
--- a/jslib/common/package.json
+++ b/jslib/common/package.json
@@ -21,13 +21,13 @@
   },
   "devDependencies": {
     "@types/lunr": "^2.3.3",
-    "@types/node": "^14.17.1",
+    "@types/node": "^16.11.12",
     "@types/node-forge": "^0.9.7",
     "@types/papaparse": "^5.2.5",
     "@types/tldjs": "^2.3.0",
     "@types/zxcvbn": "^4.4.1",
     "rimraf": "^3.0.2",
-    "typescript": "4.1.5"
+    "typescript": "4.3.5"
   },
   "dependencies": {
     "@microsoft/signalr": "5.0.10",
@@ -37,7 +37,7 @@
     "lunr": "^2.3.9",
     "node-forge": "^0.10.0",
     "papaparse": "^5.3.0",
-    "rxjs": "6.6.7",
+    "rxjs": "^7.4.0",
     "tldjs": "^2.3.1",
     "zxcvbn": "^4.4.2"
   }
diff --git a/jslib/common/src/abstractions/api.service.ts b/jslib/common/src/abstractions/api.service.ts
index 1c6aa0ef..f0b157bc 100644
--- a/jslib/common/src/abstractions/api.service.ts
+++ b/jslib/common/src/abstractions/api.service.ts
@@ -1,468 +1,685 @@
-import { PolicyType } from '../enums/policyType';
-import { SetKeyConnectorKeyRequest } from '../models/request/account/setKeyConnectorKeyRequest';
-import { VerifyOTPRequest } from '../models/request/account/verifyOTPRequest';
+import { PolicyType } from "../enums/policyType";
+import { SetKeyConnectorKeyRequest } from "../models/request/account/setKeyConnectorKeyRequest";
+import { VerifyOTPRequest } from "../models/request/account/verifyOTPRequest";
 
-import { AttachmentRequest } from '../models/request/attachmentRequest';
+import { AttachmentRequest } from "../models/request/attachmentRequest";
 
-import { BitPayInvoiceRequest } from '../models/request/bitPayInvoiceRequest';
-import { CipherBulkDeleteRequest } from '../models/request/cipherBulkDeleteRequest';
-import { CipherBulkMoveRequest } from '../models/request/cipherBulkMoveRequest';
-import { CipherBulkRestoreRequest } from '../models/request/cipherBulkRestoreRequest';
-import { CipherBulkShareRequest } from '../models/request/cipherBulkShareRequest';
-import { CipherCollectionsRequest } from '../models/request/cipherCollectionsRequest';
-import { CipherCreateRequest } from '../models/request/cipherCreateRequest';
-import { CipherRequest } from '../models/request/cipherRequest';
-import { CipherShareRequest } from '../models/request/cipherShareRequest';
-import { CollectionRequest } from '../models/request/collectionRequest';
-import { DeleteRecoverRequest } from '../models/request/deleteRecoverRequest';
-import { EmailRequest } from '../models/request/emailRequest';
-import { EmailTokenRequest } from '../models/request/emailTokenRequest';
-import { EmergencyAccessAcceptRequest } from '../models/request/emergencyAccessAcceptRequest';
-import { EmergencyAccessConfirmRequest } from '../models/request/emergencyAccessConfirmRequest';
-import { EmergencyAccessInviteRequest } from '../models/request/emergencyAccessInviteRequest';
-import { EmergencyAccessPasswordRequest } from '../models/request/emergencyAccessPasswordRequest';
-import { EmergencyAccessUpdateRequest } from '../models/request/emergencyAccessUpdateRequest';
-import { EventRequest } from '../models/request/eventRequest';
-import { FolderRequest } from '../models/request/folderRequest';
-import { GroupRequest } from '../models/request/groupRequest';
-import { IapCheckRequest } from '../models/request/iapCheckRequest';
-import { ImportCiphersRequest } from '../models/request/importCiphersRequest';
-import { ImportDirectoryRequest } from '../models/request/importDirectoryRequest';
-import { ImportOrganizationCiphersRequest } from '../models/request/importOrganizationCiphersRequest';
-import { KdfRequest } from '../models/request/kdfRequest';
-import { KeyConnectorUserKeyRequest } from '../models/request/keyConnectorUserKeyRequest';
-import { KeysRequest } from '../models/request/keysRequest';
-import { OrganizationSponsorshipCreateRequest } from '../models/request/organization/organizationSponsorshipCreateRequest';
-import { OrganizationSponsorshipRedeemRequest } from '../models/request/organization/organizationSponsorshipRedeemRequest';
-import { OrganizationSsoRequest } from '../models/request/organization/organizationSsoRequest';
-import { OrganizationCreateRequest } from '../models/request/organizationCreateRequest';
-import { OrganizationImportRequest } from '../models/request/organizationImportRequest';
-import { OrganizationKeysRequest } from '../models/request/organizationKeysRequest';
-import { OrganizationSubscriptionUpdateRequest } from '../models/request/organizationSubscriptionUpdateRequest';
-import { OrganizationTaxInfoUpdateRequest } from '../models/request/organizationTaxInfoUpdateRequest';
-import { OrganizationUpdateRequest } from '../models/request/organizationUpdateRequest';
-import { OrganizationUpgradeRequest } from '../models/request/organizationUpgradeRequest';
-import { OrganizationUserAcceptRequest } from '../models/request/organizationUserAcceptRequest';
-import { OrganizationUserBulkConfirmRequest } from '../models/request/organizationUserBulkConfirmRequest';
-import { OrganizationUserBulkRequest } from '../models/request/organizationUserBulkRequest';
-import { OrganizationUserConfirmRequest } from '../models/request/organizationUserConfirmRequest';
-import { OrganizationUserInviteRequest } from '../models/request/organizationUserInviteRequest';
-import { OrganizationUserResetPasswordEnrollmentRequest } from '../models/request/organizationUserResetPasswordEnrollmentRequest';
-import { OrganizationUserResetPasswordRequest } from '../models/request/organizationUserResetPasswordRequest';
-import { OrganizationUserUpdateGroupsRequest } from '../models/request/organizationUserUpdateGroupsRequest';
-import { OrganizationUserUpdateRequest } from '../models/request/organizationUserUpdateRequest';
-import { PasswordHintRequest } from '../models/request/passwordHintRequest';
-import { PasswordRequest } from '../models/request/passwordRequest';
-import { PaymentRequest } from '../models/request/paymentRequest';
-import { PolicyRequest } from '../models/request/policyRequest';
-import { PreloginRequest } from '../models/request/preloginRequest';
-import { ProviderAddOrganizationRequest } from '../models/request/provider/providerAddOrganizationRequest';
-import { ProviderOrganizationCreateRequest } from '../models/request/provider/providerOrganizationCreateRequest';
-import { ProviderSetupRequest } from '../models/request/provider/providerSetupRequest';
-import { ProviderUpdateRequest } from '../models/request/provider/providerUpdateRequest';
-import { ProviderUserAcceptRequest } from '../models/request/provider/providerUserAcceptRequest';
-import { ProviderUserBulkConfirmRequest } from '../models/request/provider/providerUserBulkConfirmRequest';
-import { ProviderUserBulkRequest } from '../models/request/provider/providerUserBulkRequest';
-import { ProviderUserConfirmRequest } from '../models/request/provider/providerUserConfirmRequest';
-import { ProviderUserInviteRequest } from '../models/request/provider/providerUserInviteRequest';
-import { ProviderUserUpdateRequest } from '../models/request/provider/providerUserUpdateRequest';
-import { RegisterRequest } from '../models/request/registerRequest';
-import { SeatRequest } from '../models/request/seatRequest';
-import { SecretVerificationRequest } from '../models/request/secretVerificationRequest';
-import { SelectionReadOnlyRequest } from '../models/request/selectionReadOnlyRequest';
-import { SendAccessRequest } from '../models/request/sendAccessRequest';
-import { SendRequest } from '../models/request/sendRequest';
-import { SetPasswordRequest } from '../models/request/setPasswordRequest';
-import { StorageRequest } from '../models/request/storageRequest';
-import { TaxInfoUpdateRequest } from '../models/request/taxInfoUpdateRequest';
-import { TokenRequest } from '../models/request/tokenRequest';
-import { TwoFactorEmailRequest } from '../models/request/twoFactorEmailRequest';
-import { TwoFactorProviderRequest } from '../models/request/twoFactorProviderRequest';
-import { TwoFactorRecoveryRequest } from '../models/request/twoFactorRecoveryRequest';
-import { UpdateDomainsRequest } from '../models/request/updateDomainsRequest';
-import { UpdateKeyRequest } from '../models/request/updateKeyRequest';
-import { UpdateProfileRequest } from '../models/request/updateProfileRequest';
-import { UpdateTempPasswordRequest } from '../models/request/updateTempPasswordRequest';
-import { UpdateTwoFactorAuthenticatorRequest } from '../models/request/updateTwoFactorAuthenticatorRequest';
-import { UpdateTwoFactorDuoRequest } from '../models/request/updateTwoFactorDuoRequest';
-import { UpdateTwoFactorEmailRequest } from '../models/request/updateTwoFactorEmailRequest';
-import { UpdateTwoFactorWebAuthnDeleteRequest } from '../models/request/updateTwoFactorWebAuthnDeleteRequest';
-import { UpdateTwoFactorWebAuthnRequest } from '../models/request/updateTwoFactorWebAuthnRequest';
-import { UpdateTwoFactorYubioOtpRequest } from '../models/request/updateTwoFactorYubioOtpRequest';
-import { VerifyBankRequest } from '../models/request/verifyBankRequest';
-import { VerifyDeleteRecoverRequest } from '../models/request/verifyDeleteRecoverRequest';
-import { VerifyEmailRequest } from '../models/request/verifyEmailRequest';
+import { BitPayInvoiceRequest } from "../models/request/bitPayInvoiceRequest";
+import { CipherBulkDeleteRequest } from "../models/request/cipherBulkDeleteRequest";
+import { CipherBulkMoveRequest } from "../models/request/cipherBulkMoveRequest";
+import { CipherBulkRestoreRequest } from "../models/request/cipherBulkRestoreRequest";
+import { CipherBulkShareRequest } from "../models/request/cipherBulkShareRequest";
+import { CipherCollectionsRequest } from "../models/request/cipherCollectionsRequest";
+import { CipherCreateRequest } from "../models/request/cipherCreateRequest";
+import { CipherRequest } from "../models/request/cipherRequest";
+import { CipherShareRequest } from "../models/request/cipherShareRequest";
+import { CollectionRequest } from "../models/request/collectionRequest";
+import { DeleteRecoverRequest } from "../models/request/deleteRecoverRequest";
+import { EmailRequest } from "../models/request/emailRequest";
+import { EmailTokenRequest } from "../models/request/emailTokenRequest";
+import { EmergencyAccessAcceptRequest } from "../models/request/emergencyAccessAcceptRequest";
+import { EmergencyAccessConfirmRequest } from "../models/request/emergencyAccessConfirmRequest";
+import { EmergencyAccessInviteRequest } from "../models/request/emergencyAccessInviteRequest";
+import { EmergencyAccessPasswordRequest } from "../models/request/emergencyAccessPasswordRequest";
+import { EmergencyAccessUpdateRequest } from "../models/request/emergencyAccessUpdateRequest";
+import { EventRequest } from "../models/request/eventRequest";
+import { FolderRequest } from "../models/request/folderRequest";
+import { GroupRequest } from "../models/request/groupRequest";
+import { IapCheckRequest } from "../models/request/iapCheckRequest";
+import { ImportCiphersRequest } from "../models/request/importCiphersRequest";
+import { ImportDirectoryRequest } from "../models/request/importDirectoryRequest";
+import { ImportOrganizationCiphersRequest } from "../models/request/importOrganizationCiphersRequest";
+import { KdfRequest } from "../models/request/kdfRequest";
+import { KeyConnectorUserKeyRequest } from "../models/request/keyConnectorUserKeyRequest";
+import { KeysRequest } from "../models/request/keysRequest";
+import { OrganizationSponsorshipCreateRequest } from "../models/request/organization/organizationSponsorshipCreateRequest";
+import { OrganizationSponsorshipRedeemRequest } from "../models/request/organization/organizationSponsorshipRedeemRequest";
+import { OrganizationSsoRequest } from "../models/request/organization/organizationSsoRequest";
+import { OrganizationCreateRequest } from "../models/request/organizationCreateRequest";
+import { OrganizationImportRequest } from "../models/request/organizationImportRequest";
+import { OrganizationKeysRequest } from "../models/request/organizationKeysRequest";
+import { OrganizationSsoUpdateRequest } from '../models/request/organizationSsoUpdateRequest';
+import { OrganizationSubscriptionUpdateRequest } from "../models/request/organizationSubscriptionUpdateRequest";
+import { OrganizationTaxInfoUpdateRequest } from "../models/request/organizationTaxInfoUpdateRequest";
+import { OrganizationUpdateRequest } from "../models/request/organizationUpdateRequest";
+import { OrganizationUpgradeRequest } from "../models/request/organizationUpgradeRequest";
+import { OrganizationUserAcceptRequest } from "../models/request/organizationUserAcceptRequest";
+import { OrganizationUserBulkConfirmRequest } from "../models/request/organizationUserBulkConfirmRequest";
+import { OrganizationUserBulkRequest } from "../models/request/organizationUserBulkRequest";
+import { OrganizationUserConfirmRequest } from "../models/request/organizationUserConfirmRequest";
+import { OrganizationUserInviteRequest } from "../models/request/organizationUserInviteRequest";
+import { OrganizationUserResetPasswordEnrollmentRequest } from "../models/request/organizationUserResetPasswordEnrollmentRequest";
+import { OrganizationUserResetPasswordRequest } from "../models/request/organizationUserResetPasswordRequest";
+import { OrganizationUserUpdateGroupsRequest } from "../models/request/organizationUserUpdateGroupsRequest";
+import { OrganizationUserUpdateRequest } from "../models/request/organizationUserUpdateRequest";
+import { PasswordHintRequest } from "../models/request/passwordHintRequest";
+import { PasswordRequest } from "../models/request/passwordRequest";
+import { PaymentRequest } from "../models/request/paymentRequest";
+import { PolicyRequest } from "../models/request/policyRequest";
+import { PreloginRequest } from "../models/request/preloginRequest";
+import { ProviderAddOrganizationRequest } from "../models/request/provider/providerAddOrganizationRequest";
+import { ProviderOrganizationCreateRequest } from "../models/request/provider/providerOrganizationCreateRequest";
+import { ProviderSetupRequest } from "../models/request/provider/providerSetupRequest";
+import { ProviderUpdateRequest } from "../models/request/provider/providerUpdateRequest";
+import { ProviderUserAcceptRequest } from "../models/request/provider/providerUserAcceptRequest";
+import { ProviderUserBulkConfirmRequest } from "../models/request/provider/providerUserBulkConfirmRequest";
+import { ProviderUserBulkRequest } from "../models/request/provider/providerUserBulkRequest";
+import { ProviderUserConfirmRequest } from "../models/request/provider/providerUserConfirmRequest";
+import { ProviderUserInviteRequest } from "../models/request/provider/providerUserInviteRequest";
+import { ProviderUserUpdateRequest } from "../models/request/provider/providerUserUpdateRequest";
+import { RegisterRequest } from "../models/request/registerRequest";
+import { SeatRequest } from "../models/request/seatRequest";
+import { SecretVerificationRequest } from "../models/request/secretVerificationRequest";
+import { SelectionReadOnlyRequest } from "../models/request/selectionReadOnlyRequest";
+import { SendAccessRequest } from "../models/request/sendAccessRequest";
+import { SendRequest } from "../models/request/sendRequest";
+import { SetPasswordRequest } from "../models/request/setPasswordRequest";
+import { StorageRequest } from "../models/request/storageRequest";
+import { TaxInfoUpdateRequest } from "../models/request/taxInfoUpdateRequest";
+import { TokenRequest } from "../models/request/tokenRequest";
+import { TwoFactorEmailRequest } from "../models/request/twoFactorEmailRequest";
+import { TwoFactorProviderRequest } from "../models/request/twoFactorProviderRequest";
+import { TwoFactorRecoveryRequest } from "../models/request/twoFactorRecoveryRequest";
+import { UpdateDomainsRequest } from "../models/request/updateDomainsRequest";
+import { UpdateKeyRequest } from "../models/request/updateKeyRequest";
+import { UpdateProfileRequest } from "../models/request/updateProfileRequest";
+import { UpdateTempPasswordRequest } from "../models/request/updateTempPasswordRequest";
+import { UpdateTwoFactorAuthenticatorRequest } from "../models/request/updateTwoFactorAuthenticatorRequest";
+import { UpdateTwoFactorDuoRequest } from "../models/request/updateTwoFactorDuoRequest";
+import { UpdateTwoFactorEmailRequest } from "../models/request/updateTwoFactorEmailRequest";
+import { UpdateTwoFactorWebAuthnDeleteRequest } from "../models/request/updateTwoFactorWebAuthnDeleteRequest";
+import { UpdateTwoFactorWebAuthnRequest } from "../models/request/updateTwoFactorWebAuthnRequest";
+import { UpdateTwoFactorYubioOtpRequest } from "../models/request/updateTwoFactorYubioOtpRequest";
+import { VerifyBankRequest } from "../models/request/verifyBankRequest";
+import { VerifyDeleteRecoverRequest } from "../models/request/verifyDeleteRecoverRequest";
+import { VerifyEmailRequest } from "../models/request/verifyEmailRequest";
 
-import { ApiKeyResponse } from '../models/response/apiKeyResponse';
-import { AttachmentResponse } from '../models/response/attachmentResponse';
-import { AttachmentUploadDataResponse } from '../models/response/attachmentUploadDataResponse';
-import { BillingResponse } from '../models/response/billingResponse';
-import { BreachAccountResponse } from '../models/response/breachAccountResponse';
-import { CipherResponse } from '../models/response/cipherResponse';
+import { ApiKeyResponse } from "../models/response/apiKeyResponse";
+import { AttachmentResponse } from "../models/response/attachmentResponse";
+import { AttachmentUploadDataResponse } from "../models/response/attachmentUploadDataResponse";
+import { BillingResponse } from "../models/response/billingResponse";
+import { BreachAccountResponse } from "../models/response/breachAccountResponse";
+import { CipherResponse } from "../models/response/cipherResponse";
 import {
-    CollectionGroupDetailsResponse,
-    CollectionResponse,
-} from '../models/response/collectionResponse';
-import { DomainsResponse } from '../models/response/domainsResponse';
+  CollectionGroupDetailsResponse,
+  CollectionResponse,
+} from "../models/response/collectionResponse";
+import { DomainsResponse } from "../models/response/domainsResponse";
 import {
-    EmergencyAccessGranteeDetailsResponse,
-    EmergencyAccessGrantorDetailsResponse,
-    EmergencyAccessTakeoverResponse,
-    EmergencyAccessViewResponse
-} from '../models/response/emergencyAccessResponse';
-import { EventResponse } from '../models/response/eventResponse';
-import { FolderResponse } from '../models/response/folderResponse';
+  EmergencyAccessGranteeDetailsResponse,
+  EmergencyAccessGrantorDetailsResponse,
+  EmergencyAccessTakeoverResponse,
+  EmergencyAccessViewResponse,
+} from "../models/response/emergencyAccessResponse";
+import { EventResponse } from "../models/response/eventResponse";
+import { FolderResponse } from "../models/response/folderResponse";
+import { GroupDetailsResponse, GroupResponse } from "../models/response/groupResponse";
+import { IdentityCaptchaResponse } from "../models/response/identityCaptchaResponse";
+import { IdentityTokenResponse } from "../models/response/identityTokenResponse";
+import { IdentityTwoFactorResponse } from "../models/response/identityTwoFactorResponse";
+import { KeyConnectorUserKeyResponse } from "../models/response/keyConnectorUserKeyResponse";
+import { ListResponse } from "../models/response/listResponse";
+import { OrganizationSsoResponse } from "../models/response/organization/organizationSsoResponse";
+import { OrganizationAutoEnrollStatusResponse } from "../models/response/organizationAutoEnrollStatusResponse";
+import { OrganizationKeysResponse } from "../models/response/organizationKeysResponse";
+import { OrganizationResponse } from "../models/response/organizationResponse";
+import { OrganizationSubscriptionResponse } from "../models/response/organizationSubscriptionResponse";
+import { OrganizationUserBulkPublicKeyResponse } from "../models/response/organizationUserBulkPublicKeyResponse";
+import { OrganizationUserBulkResponse } from "../models/response/organizationUserBulkResponse";
 import {
-    GroupDetailsResponse,
-    GroupResponse,
-} from '../models/response/groupResponse';
-import { IdentityCaptchaResponse } from '../models/response/identityCaptchaResponse';
-import { IdentityTokenResponse } from '../models/response/identityTokenResponse';
-import { IdentityTwoFactorResponse } from '../models/response/identityTwoFactorResponse';
-import { KeyConnectorUserKeyResponse } from '../models/response/keyConnectorUserKeyResponse';
-import { ListResponse } from '../models/response/listResponse';
-import { OrganizationSsoResponse } from '../models/response/organization/organizationSsoResponse';
-import { OrganizationAutoEnrollStatusResponse } from '../models/response/organizationAutoEnrollStatusResponse';
-import { OrganizationKeysResponse } from '../models/response/organizationKeysResponse';
-import { OrganizationResponse } from '../models/response/organizationResponse';
-import { OrganizationSubscriptionResponse } from '../models/response/organizationSubscriptionResponse';
-import { OrganizationUserBulkPublicKeyResponse } from '../models/response/organizationUserBulkPublicKeyResponse';
-import { OrganizationUserBulkResponse } from '../models/response/organizationUserBulkResponse';
+  OrganizationUserDetailsResponse,
+  OrganizationUserResetPasswordDetailsReponse,
+  OrganizationUserUserDetailsResponse,
+} from "../models/response/organizationUserResponse";
+import { PaymentResponse } from "../models/response/paymentResponse";
+import { PlanResponse } from "../models/response/planResponse";
+import { PolicyResponse } from "../models/response/policyResponse";
+import { PreloginResponse } from "../models/response/preloginResponse";
+import { ProfileResponse } from "../models/response/profileResponse";
 import {
-    OrganizationUserDetailsResponse,
-    OrganizationUserResetPasswordDetailsReponse,
-    OrganizationUserUserDetailsResponse,
-} from '../models/response/organizationUserResponse';
-import { PaymentResponse } from '../models/response/paymentResponse';
-import { PlanResponse } from '../models/response/planResponse';
-import { PolicyResponse } from '../models/response/policyResponse';
-import { PreloginResponse } from '../models/response/preloginResponse';
-import { ProfileResponse } from '../models/response/profileResponse';
-import { ProviderOrganizationOrganizationDetailsResponse, ProviderOrganizationResponse } from '../models/response/provider/providerOrganizationResponse';
-import { ProviderResponse } from '../models/response/provider/providerResponse';
-import { ProviderUserBulkPublicKeyResponse } from '../models/response/provider/providerUserBulkPublicKeyResponse';
-import { ProviderUserBulkResponse } from '../models/response/provider/providerUserBulkResponse';
-import { ProviderUserResponse, ProviderUserUserDetailsResponse } from '../models/response/provider/providerUserResponse';
-import { SelectionReadOnlyResponse } from '../models/response/selectionReadOnlyResponse';
-import { SendAccessResponse } from '../models/response/sendAccessResponse';
-import { SendFileDownloadDataResponse } from '../models/response/sendFileDownloadDataResponse';
-import { SendFileUploadDataResponse } from '../models/response/sendFileUploadDataResponse';
-import { SendResponse } from '../models/response/sendResponse';
-import { SubscriptionResponse } from '../models/response/subscriptionResponse';
-import { SyncResponse } from '../models/response/syncResponse';
-import { TaxInfoResponse } from '../models/response/taxInfoResponse';
-import { TaxRateResponse } from '../models/response/taxRateResponse';
-import { TwoFactorAuthenticatorResponse } from '../models/response/twoFactorAuthenticatorResponse';
-import { TwoFactorDuoResponse } from '../models/response/twoFactorDuoResponse';
-import { TwoFactorEmailResponse } from '../models/response/twoFactorEmailResponse';
-import { TwoFactorProviderResponse } from '../models/response/twoFactorProviderResponse';
-import { TwoFactorRecoverResponse } from '../models/response/twoFactorRescoverResponse';
-import { ChallengeResponse, TwoFactorWebAuthnResponse } from '../models/response/twoFactorWebAuthnResponse';
-import { TwoFactorYubiKeyResponse } from '../models/response/twoFactorYubiKeyResponse';
-import { UserKeyResponse } from '../models/response/userKeyResponse';
+  ProviderOrganizationOrganizationDetailsResponse,
+  ProviderOrganizationResponse,
+} from "../models/response/provider/providerOrganizationResponse";
+import { ProviderResponse } from "../models/response/provider/providerResponse";
+import { ProviderUserBulkPublicKeyResponse } from "../models/response/provider/providerUserBulkPublicKeyResponse";
+import { ProviderUserBulkResponse } from "../models/response/provider/providerUserBulkResponse";
+import {
+  ProviderUserResponse,
+  ProviderUserUserDetailsResponse,
+} from "../models/response/provider/providerUserResponse";
+import { SelectionReadOnlyResponse } from "../models/response/selectionReadOnlyResponse";
+import { SendAccessResponse } from "../models/response/sendAccessResponse";
+import { SendFileDownloadDataResponse } from "../models/response/sendFileDownloadDataResponse";
+import { SendFileUploadDataResponse } from "../models/response/sendFileUploadDataResponse";
+import { SendResponse } from "../models/response/sendResponse";
+import { SsoConfigResponse } from '../models/response/ssoConfigResponse';
+import { SubscriptionResponse } from "../models/response/subscriptionResponse";
+import { SyncResponse } from "../models/response/syncResponse";
+import { TaxInfoResponse } from "../models/response/taxInfoResponse";
+import { TaxRateResponse } from "../models/response/taxRateResponse";
+import { TwoFactorAuthenticatorResponse } from "../models/response/twoFactorAuthenticatorResponse";
+import { TwoFactorDuoResponse } from "../models/response/twoFactorDuoResponse";
+import { TwoFactorEmailResponse } from "../models/response/twoFactorEmailResponse";
+import { TwoFactorProviderResponse } from "../models/response/twoFactorProviderResponse";
+import { TwoFactorRecoverResponse } from "../models/response/twoFactorRescoverResponse";
+import {
+  ChallengeResponse,
+  TwoFactorWebAuthnResponse,
+} from "../models/response/twoFactorWebAuthnResponse";
+import { TwoFactorYubiKeyResponse } from "../models/response/twoFactorYubiKeyResponse";
+import { UserKeyResponse } from "../models/response/userKeyResponse";
 
-import { SendAccessView } from '../models/view/sendAccessView';
+import { SendAccessView } from "../models/view/sendAccessView";
 
 export abstract class ApiService {
-    postIdentityToken: (request: TokenRequest) => Promise<IdentityTokenResponse | IdentityTwoFactorResponse | IdentityCaptchaResponse>;
-    refreshIdentityToken: () => Promise<any>;
+  postIdentityToken: (
+    request: TokenRequest
+  ) => Promise<IdentityTokenResponse | IdentityTwoFactorResponse | IdentityCaptchaResponse>;
+  refreshIdentityToken: () => Promise<any>;
 
-    getProfile: () => Promise<ProfileResponse>;
-    getUserBilling: () => Promise<BillingResponse>;
-    getUserSubscription: () => Promise<SubscriptionResponse>;
-    getTaxInfo: () => Promise<TaxInfoResponse>;
-    putProfile: (request: UpdateProfileRequest) => Promise<ProfileResponse>;
-    putTaxInfo: (request: TaxInfoUpdateRequest) => Promise<any>;
-    postPrelogin: (request: PreloginRequest) => Promise<PreloginResponse>;
-    postEmailToken: (request: EmailTokenRequest) => Promise<any>;
-    postEmail: (request: EmailRequest) => Promise<any>;
-    postPassword: (request: PasswordRequest) => Promise<any>;
-    setPassword: (request: SetPasswordRequest) => Promise<any>;
-    postSetKeyConnectorKey: (request: SetKeyConnectorKeyRequest) => Promise<any>;
-    postSecurityStamp: (request: SecretVerificationRequest) => Promise<any>;
-    deleteAccount: (request: SecretVerificationRequest) => Promise<any>;
-    getAccountRevisionDate: () => Promise<number>;
-    postPasswordHint: (request: PasswordHintRequest) => Promise<any>;
-    postRegister: (request: RegisterRequest) => Promise<any>;
-    postPremium: (data: FormData) => Promise<PaymentResponse>;
-    postIapCheck: (request: IapCheckRequest) => Promise<any>;
-    postReinstatePremium: () => Promise<any>;
-    postCancelPremium: () => Promise<any>;
-    postAccountStorage: (request: StorageRequest) => Promise<PaymentResponse>;
-    postAccountPayment: (request: PaymentRequest) => Promise<any>;
-    postAccountLicense: (data: FormData) => Promise<any>;
-    postAccountKey: (request: UpdateKeyRequest) => Promise<any>;
-    postAccountKeys: (request: KeysRequest) => Promise<any>;
-    postAccountVerifyEmail: () => Promise<any>;
-    postAccountVerifyEmailToken: (request: VerifyEmailRequest) => Promise<any>;
-    postAccountVerifyPassword: (request: SecretVerificationRequest) => Promise<any>;
-    postAccountRecoverDelete: (request: DeleteRecoverRequest) => Promise<any>;
-    postAccountRecoverDeleteToken: (request: VerifyDeleteRecoverRequest) => Promise<any>;
-    postAccountKdf: (request: KdfRequest) => Promise<any>;
-    postUserApiKey: (id: string, request: SecretVerificationRequest) => Promise<ApiKeyResponse>;
-    postUserRotateApiKey: (id: string, request: SecretVerificationRequest) => Promise<ApiKeyResponse>;
-    putUpdateTempPassword: (request: UpdateTempPasswordRequest) => Promise<any>;
-    postAccountRequestOTP: () => Promise<void>;
-    postAccountVerifyOTP: (request: VerifyOTPRequest) => Promise<void>;
-    postConvertToKeyConnector: () => Promise<void>;
+  getProfile: () => Promise<ProfileResponse>;
+  getUserBilling: () => Promise<BillingResponse>;
+  getUserSubscription: () => Promise<SubscriptionResponse>;
+  getTaxInfo: () => Promise<TaxInfoResponse>;
+  putProfile: (request: UpdateProfileRequest) => Promise<ProfileResponse>;
+  putTaxInfo: (request: TaxInfoUpdateRequest) => Promise<any>;
+  postPrelogin: (request: PreloginRequest) => Promise<PreloginResponse>;
+  postEmailToken: (request: EmailTokenRequest) => Promise<any>;
+  postEmail: (request: EmailRequest) => Promise<any>;
+  postPassword: (request: PasswordRequest) => Promise<any>;
+  setPassword: (request: SetPasswordRequest) => Promise<any>;
+  postSetKeyConnectorKey: (request: SetKeyConnectorKeyRequest) => Promise<any>;
+  postSecurityStamp: (request: SecretVerificationRequest) => Promise<any>;
+  deleteAccount: (request: SecretVerificationRequest) => Promise<any>;
+  getAccountRevisionDate: () => Promise<number>;
+  postPasswordHint: (request: PasswordHintRequest) => Promise<any>;
+  postRegister: (request: RegisterRequest) => Promise<any>;
+  postPremium: (data: FormData) => Promise<PaymentResponse>;
+  postIapCheck: (request: IapCheckRequest) => Promise<any>;
+  postReinstatePremium: () => Promise<any>;
+  postCancelPremium: () => Promise<any>;
+  postAccountStorage: (request: StorageRequest) => Promise<PaymentResponse>;
+  postAccountPayment: (request: PaymentRequest) => Promise<any>;
+  postAccountLicense: (data: FormData) => Promise<any>;
+  postAccountKey: (request: UpdateKeyRequest) => Promise<any>;
+  postAccountKeys: (request: KeysRequest) => Promise<any>;
+  postAccountVerifyEmail: () => Promise<any>;
+  postAccountVerifyEmailToken: (request: VerifyEmailRequest) => Promise<any>;
+  postAccountVerifyPassword: (request: SecretVerificationRequest) => Promise<any>;
+  postAccountRecoverDelete: (request: DeleteRecoverRequest) => Promise<any>;
+  postAccountRecoverDeleteToken: (request: VerifyDeleteRecoverRequest) => Promise<any>;
+  postAccountKdf: (request: KdfRequest) => Promise<any>;
+  postUserApiKey: (id: string, request: SecretVerificationRequest) => Promise<ApiKeyResponse>;
+  postUserRotateApiKey: (id: string, request: SecretVerificationRequest) => Promise<ApiKeyResponse>;
+  putUpdateTempPassword: (request: UpdateTempPasswordRequest) => Promise<any>;
+  postAccountRequestOTP: () => Promise<void>;
+  postAccountVerifyOTP: (request: VerifyOTPRequest) => Promise<void>;
+  postConvertToKeyConnector: () => Promise<void>;
 
-    getFolder: (id: string) => Promise<FolderResponse>;
-    postFolder: (request: FolderRequest) => Promise<FolderResponse>;
-    putFolder: (id: string, request: FolderRequest) => Promise<FolderResponse>;
-    deleteFolder: (id: string) => Promise<any>;
+  getFolder: (id: string) => Promise<FolderResponse>;
+  postFolder: (request: FolderRequest) => Promise<FolderResponse>;
+  putFolder: (id: string, request: FolderRequest) => Promise<FolderResponse>;
+  deleteFolder: (id: string) => Promise<any>;
 
-    getSend: (id: string) => Promise<SendResponse>;
-    postSendAccess: (id: string, request: SendAccessRequest, apiUrl?: string) => Promise<SendAccessResponse>;
-    getSends: () => Promise<ListResponse<SendResponse>>;
-    postSend: (request: SendRequest) => Promise<SendResponse>;
-    postFileTypeSend: (request: SendRequest) => Promise<SendFileUploadDataResponse>;
-    postSendFile: (sendId: string, fileId: string, data: FormData) => Promise<any>;
-    /**
-     * @deprecated Mar 25 2021: This method has been deprecated in favor of direct uploads.
-     * This method still exists for backward compatibility with old server versions.
-     */
-    postSendFileLegacy: (data: FormData) => Promise<SendResponse>;
-    putSend: (id: string, request: SendRequest) => Promise<SendResponse>;
-    putSendRemovePassword: (id: string) => Promise<SendResponse>;
-    deleteSend: (id: string) => Promise<any>;
-    getSendFileDownloadData: (send: SendAccessView, request: SendAccessRequest, apiUrl?: string) => Promise<SendFileDownloadDataResponse>;
-    renewSendFileUploadUrl: (sendId: string, fileId: string) => Promise<SendFileUploadDataResponse>;
+  getSend: (id: string) => Promise<SendResponse>;
+  postSendAccess: (
+    id: string,
+    request: SendAccessRequest,
+    apiUrl?: string
+  ) => Promise<SendAccessResponse>;
+  getSends: () => Promise<ListResponse<SendResponse>>;
+  postSend: (request: SendRequest) => Promise<SendResponse>;
+  postFileTypeSend: (request: SendRequest) => Promise<SendFileUploadDataResponse>;
+  postSendFile: (sendId: string, fileId: string, data: FormData) => Promise<any>;
+  /**
+   * @deprecated Mar 25 2021: This method has been deprecated in favor of direct uploads.
+   * This method still exists for backward compatibility with old server versions.
+   */
+  postSendFileLegacy: (data: FormData) => Promise<SendResponse>;
+  putSend: (id: string, request: SendRequest) => Promise<SendResponse>;
+  putSendRemovePassword: (id: string) => Promise<SendResponse>;
+  deleteSend: (id: string) => Promise<any>;
+  getSendFileDownloadData: (
+    send: SendAccessView,
+    request: SendAccessRequest,
+    apiUrl?: string
+  ) => Promise<SendFileDownloadDataResponse>;
+  renewSendFileUploadUrl: (sendId: string, fileId: string) => Promise<SendFileUploadDataResponse>;
 
-    getCipher: (id: string) => Promise<CipherResponse>;
-    getCipherAdmin: (id: string) => Promise<CipherResponse>;
-    getAttachmentData: (cipherId: string, attachmentId: string, emergencyAccessId?: string) => Promise<AttachmentResponse>;
-    getCiphersOrganization: (organizationId: string) => Promise<ListResponse<CipherResponse>>;
-    postCipher: (request: CipherRequest) => Promise<CipherResponse>;
-    postCipherCreate: (request: CipherCreateRequest) => Promise<CipherResponse>;
-    postCipherAdmin: (request: CipherCreateRequest) => Promise<CipherResponse>;
-    putCipher: (id: string, request: CipherRequest) => Promise<CipherResponse>;
-    putCipherAdmin: (id: string, request: CipherRequest) => Promise<CipherResponse>;
-    deleteCipher: (id: string) => Promise<any>;
-    deleteCipherAdmin: (id: string) => Promise<any>;
-    deleteManyCiphers: (request: CipherBulkDeleteRequest) => Promise<any>;
-    deleteManyCiphersAdmin: (request: CipherBulkDeleteRequest) => Promise<any>;
-    putMoveCiphers: (request: CipherBulkMoveRequest) => Promise<any>;
-    putShareCipher: (id: string, request: CipherShareRequest) => Promise<CipherResponse>;
-    putShareCiphers: (request: CipherBulkShareRequest) => Promise<any>;
-    putCipherCollections: (id: string, request: CipherCollectionsRequest) => Promise<any>;
-    putCipherCollectionsAdmin: (id: string, request: CipherCollectionsRequest) => Promise<any>;
-    postPurgeCiphers: (request: SecretVerificationRequest, organizationId?: string) => Promise<any>;
-    postImportCiphers: (request: ImportCiphersRequest) => Promise<any>;
-    postImportOrganizationCiphers: (organizationId: string, request: ImportOrganizationCiphersRequest) => Promise<any>;
-    putDeleteCipher: (id: string) => Promise<any>;
-    putDeleteCipherAdmin: (id: string) => Promise<any>;
-    putDeleteManyCiphers: (request: CipherBulkDeleteRequest) => Promise<any>;
-    putDeleteManyCiphersAdmin: (request: CipherBulkDeleteRequest) => Promise<any>;
-    putRestoreCipher: (id: string) => Promise<CipherResponse>;
-    putRestoreCipherAdmin: (id: string) => Promise<CipherResponse>;
-    putRestoreManyCiphers: (request: CipherBulkRestoreRequest) => Promise<ListResponse<CipherResponse>>;
+  getCipher: (id: string) => Promise<CipherResponse>;
+  getCipherAdmin: (id: string) => Promise<CipherResponse>;
+  getAttachmentData: (
+    cipherId: string,
+    attachmentId: string,
+    emergencyAccessId?: string
+  ) => Promise<AttachmentResponse>;
+  getCiphersOrganization: (organizationId: string) => Promise<ListResponse<CipherResponse>>;
+  postCipher: (request: CipherRequest) => Promise<CipherResponse>;
+  postCipherCreate: (request: CipherCreateRequest) => Promise<CipherResponse>;
+  postCipherAdmin: (request: CipherCreateRequest) => Promise<CipherResponse>;
+  putCipher: (id: string, request: CipherRequest) => Promise<CipherResponse>;
+  putCipherAdmin: (id: string, request: CipherRequest) => Promise<CipherResponse>;
+  deleteCipher: (id: string) => Promise<any>;
+  deleteCipherAdmin: (id: string) => Promise<any>;
+  deleteManyCiphers: (request: CipherBulkDeleteRequest) => Promise<any>;
+  deleteManyCiphersAdmin: (request: CipherBulkDeleteRequest) => Promise<any>;
+  putMoveCiphers: (request: CipherBulkMoveRequest) => Promise<any>;
+  putShareCipher: (id: string, request: CipherShareRequest) => Promise<CipherResponse>;
+  putShareCiphers: (request: CipherBulkShareRequest) => Promise<any>;
+  putCipherCollections: (id: string, request: CipherCollectionsRequest) => Promise<any>;
+  putCipherCollectionsAdmin: (id: string, request: CipherCollectionsRequest) => Promise<any>;
+  postPurgeCiphers: (request: SecretVerificationRequest, organizationId?: string) => Promise<any>;
+  postImportCiphers: (request: ImportCiphersRequest) => Promise<any>;
+  postImportOrganizationCiphers: (
+    organizationId: string,
+    request: ImportOrganizationCiphersRequest
+  ) => Promise<any>;
+  putDeleteCipher: (id: string) => Promise<any>;
+  putDeleteCipherAdmin: (id: string) => Promise<any>;
+  putDeleteManyCiphers: (request: CipherBulkDeleteRequest) => Promise<any>;
+  putDeleteManyCiphersAdmin: (request: CipherBulkDeleteRequest) => Promise<any>;
+  putRestoreCipher: (id: string) => Promise<CipherResponse>;
+  putRestoreCipherAdmin: (id: string) => Promise<CipherResponse>;
+  putRestoreManyCiphers: (
+    request: CipherBulkRestoreRequest
+  ) => Promise<ListResponse<CipherResponse>>;
 
-    /**
-     * @deprecated Mar 25 2021: This method has been deprecated in favor of direct uploads.
-     * This method still exists for backward compatibility with old server versions.
-     */
-    postCipherAttachmentLegacy: (id: string, data: FormData) => Promise<CipherResponse>;
-    /**
-     * @deprecated Mar 25 2021: This method has been deprecated in favor of direct uploads.
-     * This method still exists for backward compatibility with old server versions.
-     */
-    postCipherAttachmentAdminLegacy: (id: string, data: FormData) => Promise<CipherResponse>;
-    postCipherAttachment: (id: string, request: AttachmentRequest) => Promise<AttachmentUploadDataResponse>;
-    deleteCipherAttachment: (id: string, attachmentId: string) => Promise<any>;
-    deleteCipherAttachmentAdmin: (id: string, attachmentId: string) => Promise<any>;
-    postShareCipherAttachment: (id: string, attachmentId: string, data: FormData,
-        organizationId: string) => Promise<any>;
-    renewAttachmentUploadUrl: (id: string, attachmentId: string) => Promise<AttachmentUploadDataResponse>;
-    postAttachmentFile: (id: string, attachmentId: string, data: FormData) => Promise<any>;
+  /**
+   * @deprecated Mar 25 2021: This method has been deprecated in favor of direct uploads.
+   * This method still exists for backward compatibility with old server versions.
+   */
+  postCipherAttachmentLegacy: (id: string, data: FormData) => Promise<CipherResponse>;
+  /**
+   * @deprecated Mar 25 2021: This method has been deprecated in favor of direct uploads.
+   * This method still exists for backward compatibility with old server versions.
+   */
+  postCipherAttachmentAdminLegacy: (id: string, data: FormData) => Promise<CipherResponse>;
+  postCipherAttachment: (
+    id: string,
+    request: AttachmentRequest
+  ) => Promise<AttachmentUploadDataResponse>;
+  deleteCipherAttachment: (id: string, attachmentId: string) => Promise<any>;
+  deleteCipherAttachmentAdmin: (id: string, attachmentId: string) => Promise<any>;
+  postShareCipherAttachment: (
+    id: string,
+    attachmentId: string,
+    data: FormData,
+    organizationId: string
+  ) => Promise<any>;
+  renewAttachmentUploadUrl: (
+    id: string,
+    attachmentId: string
+  ) => Promise<AttachmentUploadDataResponse>;
+  postAttachmentFile: (id: string, attachmentId: string, data: FormData) => Promise<any>;
 
-    getCollectionDetails: (organizationId: string, id: string) => Promise<CollectionGroupDetailsResponse>;
-    getUserCollections: () => Promise<ListResponse<CollectionResponse>>;
-    getCollections: (organizationId: string) => Promise<ListResponse<CollectionResponse>>;
-    getCollectionUsers: (organizationId: string, id: string) => Promise<SelectionReadOnlyResponse[]>;
-    postCollection: (organizationId: string, request: CollectionRequest) => Promise<CollectionResponse>;
-    putCollectionUsers: (organizationId: string, id: string, request: SelectionReadOnlyRequest[]) => Promise<any>;
-    putCollection: (organizationId: string, id: string, request: CollectionRequest) => Promise<CollectionResponse>;
-    deleteCollection: (organizationId: string, id: string) => Promise<any>;
-    deleteCollectionUser: (organizationId: string, id: string, organizationUserId: string) => Promise<any>;
+  getCollectionDetails: (
+    organizationId: string,
+    id: string
+  ) => Promise<CollectionGroupDetailsResponse>;
+  getUserCollections: () => Promise<ListResponse<CollectionResponse>>;
+  getCollections: (organizationId: string) => Promise<ListResponse<CollectionResponse>>;
+  getCollectionUsers: (organizationId: string, id: string) => Promise<SelectionReadOnlyResponse[]>;
+  postCollection: (
+    organizationId: string,
+    request: CollectionRequest
+  ) => Promise<CollectionResponse>;
+  putCollectionUsers: (
+    organizationId: string,
+    id: string,
+    request: SelectionReadOnlyRequest[]
+  ) => Promise<any>;
+  putCollection: (
+    organizationId: string,
+    id: string,
+    request: CollectionRequest
+  ) => Promise<CollectionResponse>;
+  deleteCollection: (organizationId: string, id: string) => Promise<any>;
+  deleteCollectionUser: (
+    organizationId: string,
+    id: string,
+    organizationUserId: string
+  ) => Promise<any>;
 
-    getGroupDetails: (organizationId: string, id: string) => Promise<GroupDetailsResponse>;
-    getGroups: (organizationId: string) => Promise<ListResponse<GroupResponse>>;
-    getGroupUsers: (organizationId: string, id: string) => Promise<string[]>;
-    postGroup: (organizationId: string, request: GroupRequest) => Promise<GroupResponse>;
-    putGroup: (organizationId: string, id: string, request: GroupRequest) => Promise<GroupResponse>;
-    putGroupUsers: (organizationId: string, id: string, request: string[]) => Promise<any>;
-    deleteGroup: (organizationId: string, id: string) => Promise<any>;
-    deleteGroupUser: (organizationId: string, id: string, organizationUserId: string) => Promise<any>;
+  getGroupDetails: (organizationId: string, id: string) => Promise<GroupDetailsResponse>;
+  getGroups: (organizationId: string) => Promise<ListResponse<GroupResponse>>;
+  getGroupUsers: (organizationId: string, id: string) => Promise<string[]>;
+  postGroup: (organizationId: string, request: GroupRequest) => Promise<GroupResponse>;
+  putGroup: (organizationId: string, id: string, request: GroupRequest) => Promise<GroupResponse>;
+  putGroupUsers: (organizationId: string, id: string, request: string[]) => Promise<any>;
+  deleteGroup: (organizationId: string, id: string) => Promise<any>;
+  deleteGroupUser: (organizationId: string, id: string, organizationUserId: string) => Promise<any>;
 
-    getPolicy: (organizationId: string, type: PolicyType) => Promise<PolicyResponse>;
-    getPolicies: (organizationId: string) => Promise<ListResponse<PolicyResponse>>;
-    getPoliciesByToken: (organizationId: string, token: string, email: string, organizationUserId: string) =>
-        Promise<ListResponse<PolicyResponse>>;
-    putPolicy: (organizationId: string, type: PolicyType, request: PolicyRequest) => Promise<PolicyResponse>;
+  getPolicy: (organizationId: string, type: PolicyType) => Promise<PolicyResponse>;
+  getPolicies: (organizationId: string) => Promise<ListResponse<PolicyResponse>>;
+  getPoliciesByToken: (
+    organizationId: string,
+    token: string,
+    email: string,
+    organizationUserId: string
+  ) => Promise<ListResponse<PolicyResponse>>;
+  getPoliciesByInvitedUser: (
+    organizationId: string,
+    userId: string
+  ) => Promise<ListResponse<PolicyResponse>>;
+  putPolicy: (
+    organizationId: string,
+    type: PolicyType,
+    request: PolicyRequest
+  ) => Promise<PolicyResponse>;
 
-    getOrganizationUser: (organizationId: string, id: string) => Promise<OrganizationUserDetailsResponse>;
-    getOrganizationUserGroups: (organizationId: string, id: string) => Promise<string[]>;
-    getOrganizationUsers: (organizationId: string) => Promise<ListResponse<OrganizationUserUserDetailsResponse>>;
-    getOrganizationUserResetPasswordDetails: (organizationId: string, id: string)
-        => Promise<OrganizationUserResetPasswordDetailsReponse>;
-    postOrganizationUserInvite: (organizationId: string, request: OrganizationUserInviteRequest) => Promise<any>;
-    postOrganizationUserReinvite: (organizationId: string, id: string) => Promise<any>;
-    postManyOrganizationUserReinvite: (organizationId: string, request: OrganizationUserBulkRequest) => Promise<ListResponse<OrganizationUserBulkResponse>>;
-    postOrganizationUserAccept: (organizationId: string, id: string,
-        request: OrganizationUserAcceptRequest) => Promise<any>;
-    postOrganizationUserConfirm: (organizationId: string, id: string,
-        request: OrganizationUserConfirmRequest) => Promise<any>;
-    postOrganizationUsersPublicKey: (organizationId: string, request: OrganizationUserBulkRequest) =>
-        Promise<ListResponse<OrganizationUserBulkPublicKeyResponse>>;
-    postOrganizationUserBulkConfirm: (organizationId: string, request: OrganizationUserBulkConfirmRequest) => Promise<ListResponse<OrganizationUserBulkResponse>>;
+  getOrganizationUser: (
+    organizationId: string,
+    id: string
+  ) => Promise<OrganizationUserDetailsResponse>;
+  getOrganizationUserGroups: (organizationId: string, id: string) => Promise<string[]>;
+  getOrganizationUsers: (
+    organizationId: string
+  ) => Promise<ListResponse<OrganizationUserUserDetailsResponse>>;
+  getOrganizationUserResetPasswordDetails: (
+    organizationId: string,
+    id: string
+  ) => Promise<OrganizationUserResetPasswordDetailsReponse>;
+  postOrganizationUserInvite: (
+    organizationId: string,
+    request: OrganizationUserInviteRequest
+  ) => Promise<any>;
+  postOrganizationUserReinvite: (organizationId: string, id: string) => Promise<any>;
+  postManyOrganizationUserReinvite: (
+    organizationId: string,
+    request: OrganizationUserBulkRequest
+  ) => Promise<ListResponse<OrganizationUserBulkResponse>>;
+  postOrganizationUserAccept: (
+    organizationId: string,
+    id: string,
+    request: OrganizationUserAcceptRequest
+  ) => Promise<any>;
+  postOrganizationUserConfirm: (
+    organizationId: string,
+    id: string,
+    request: OrganizationUserConfirmRequest
+  ) => Promise<any>;
+  postOrganizationUsersPublicKey: (
+    organizationId: string,
+    request: OrganizationUserBulkRequest
+  ) => Promise<ListResponse<OrganizationUserBulkPublicKeyResponse>>;
+  postOrganizationUserBulkConfirm: (
+    organizationId: string,
+    request: OrganizationUserBulkConfirmRequest
+  ) => Promise<ListResponse<OrganizationUserBulkResponse>>;
 
-    putOrganizationUser: (organizationId: string, id: string, request: OrganizationUserUpdateRequest) => Promise<any>;
-    putOrganizationUserGroups: (organizationId: string, id: string,
-        request: OrganizationUserUpdateGroupsRequest) => Promise<any>;
-    putOrganizationUserResetPasswordEnrollment: (organizationId: string, userId: string,
-        request: OrganizationUserResetPasswordEnrollmentRequest) => Promise<any>;
-    putOrganizationUserResetPassword: (organizationId: string, id: string,
-        request: OrganizationUserResetPasswordRequest) => Promise<any>;
-    deleteOrganizationUser: (organizationId: string, id: string) => Promise<any>;
-    deleteManyOrganizationUsers: (organizationId: string, request: OrganizationUserBulkRequest) => Promise<ListResponse<OrganizationUserBulkResponse>>;
+  putOrganizationUser: (
+    organizationId: string,
+    id: string,
+    request: OrganizationUserUpdateRequest
+  ) => Promise<any>;
+  getSsoConfig: (id: string) => Promise<SsoConfigResponse>;
+  putOrganizationSso: (id: string, request: OrganizationSsoUpdateRequest) => Promise<SsoConfigResponse>;
+  putOrganizationUserGroups: (
+    organizationId: string,
+    id: string,
+    request: OrganizationUserUpdateGroupsRequest
+  ) => Promise<any>;
+  putOrganizationUserResetPasswordEnrollment: (
+    organizationId: string,
+    userId: string,
+    request: OrganizationUserResetPasswordEnrollmentRequest
+  ) => Promise<any>;
+  putOrganizationUserResetPassword: (
+    organizationId: string,
+    id: string,
+    request: OrganizationUserResetPasswordRequest
+  ) => Promise<any>;
+  deleteOrganizationUser: (organizationId: string, id: string) => Promise<any>;
+  deleteManyOrganizationUsers: (
+    organizationId: string,
+    request: OrganizationUserBulkRequest
+  ) => Promise<ListResponse<OrganizationUserBulkResponse>>;
 
-    getSync: () => Promise<SyncResponse>;
-    postImportDirectory: (organizationId: string, request: ImportDirectoryRequest) => Promise<any>;
-    postPublicImportDirectory: (request: OrganizationImportRequest) => Promise<any>;
+  getSync: () => Promise<SyncResponse>;
+  postImportDirectory: (organizationId: string, request: ImportDirectoryRequest) => Promise<any>;
+  postPublicImportDirectory: (request: OrganizationImportRequest) => Promise<any>;
 
-    getSettingsDomains: () => Promise<DomainsResponse>;
-    putSettingsDomains: (request: UpdateDomainsRequest) => Promise<DomainsResponse>;
+  getSettingsDomains: () => Promise<DomainsResponse>;
+  putSettingsDomains: (request: UpdateDomainsRequest) => Promise<DomainsResponse>;
 
-    getTwoFactorProviders: () => Promise<ListResponse<TwoFactorProviderResponse>>;
-    getTwoFactorOrganizationProviders: (organizationId: string) => Promise<ListResponse<TwoFactorProviderResponse>>;
-    getTwoFactorAuthenticator: (request: SecretVerificationRequest) => Promise<TwoFactorAuthenticatorResponse>;
-    getTwoFactorEmail: (request: SecretVerificationRequest) => Promise<TwoFactorEmailResponse>;
-    getTwoFactorDuo: (request: SecretVerificationRequest) => Promise<TwoFactorDuoResponse>;
-    getTwoFactorOrganizationDuo: (organizationId: string,
-        request: SecretVerificationRequest) => Promise<TwoFactorDuoResponse>;
-    getTwoFactorYubiKey: (request: SecretVerificationRequest) => Promise<TwoFactorYubiKeyResponse>;
-    getTwoFactorWebAuthn: (request: SecretVerificationRequest) => Promise<TwoFactorWebAuthnResponse>;
-    getTwoFactorWebAuthnChallenge: (request: SecretVerificationRequest) => Promise<ChallengeResponse>;
-    getTwoFactorRecover: (request: SecretVerificationRequest) => Promise<TwoFactorRecoverResponse>;
-    putTwoFactorAuthenticator: (
-        request: UpdateTwoFactorAuthenticatorRequest) => Promise<TwoFactorAuthenticatorResponse>;
-    putTwoFactorEmail: (request: UpdateTwoFactorEmailRequest) => Promise<TwoFactorEmailResponse>;
-    putTwoFactorDuo: (request: UpdateTwoFactorDuoRequest) => Promise<TwoFactorDuoResponse>;
-    putTwoFactorOrganizationDuo: (organizationId: string,
-        request: UpdateTwoFactorDuoRequest) => Promise<TwoFactorDuoResponse>;
-    putTwoFactorYubiKey: (request: UpdateTwoFactorYubioOtpRequest) => Promise<TwoFactorYubiKeyResponse>;
-    putTwoFactorWebAuthn: (request: UpdateTwoFactorWebAuthnRequest) => Promise<TwoFactorWebAuthnResponse>;
-    deleteTwoFactorWebAuthn: (request: UpdateTwoFactorWebAuthnDeleteRequest) => Promise<TwoFactorWebAuthnResponse>;
-    putTwoFactorDisable: (request: TwoFactorProviderRequest) => Promise<TwoFactorProviderResponse>;
-    putTwoFactorOrganizationDisable: (organizationId: string,
-        request: TwoFactorProviderRequest) => Promise<TwoFactorProviderResponse>;
-    postTwoFactorRecover: (request: TwoFactorRecoveryRequest) => Promise<any>;
-    postTwoFactorEmailSetup: (request: TwoFactorEmailRequest) => Promise<any>;
-    postTwoFactorEmail: (request: TwoFactorEmailRequest) => Promise<any>;
+  getTwoFactorProviders: () => Promise<ListResponse<TwoFactorProviderResponse>>;
+  getTwoFactorOrganizationProviders: (
+    organizationId: string
+  ) => Promise<ListResponse<TwoFactorProviderResponse>>;
+  getTwoFactorAuthenticator: (
+    request: SecretVerificationRequest
+  ) => Promise<TwoFactorAuthenticatorResponse>;
+  getTwoFactorEmail: (request: SecretVerificationRequest) => Promise<TwoFactorEmailResponse>;
+  getTwoFactorDuo: (request: SecretVerificationRequest) => Promise<TwoFactorDuoResponse>;
+  getTwoFactorOrganizationDuo: (
+    organizationId: string,
+    request: SecretVerificationRequest
+  ) => Promise<TwoFactorDuoResponse>;
+  getTwoFactorYubiKey: (request: SecretVerificationRequest) => Promise<TwoFactorYubiKeyResponse>;
+  getTwoFactorWebAuthn: (request: SecretVerificationRequest) => Promise<TwoFactorWebAuthnResponse>;
+  getTwoFactorWebAuthnChallenge: (request: SecretVerificationRequest) => Promise<ChallengeResponse>;
+  getTwoFactorRecover: (request: SecretVerificationRequest) => Promise<TwoFactorRecoverResponse>;
+  putTwoFactorAuthenticator: (
+    request: UpdateTwoFactorAuthenticatorRequest
+  ) => Promise<TwoFactorAuthenticatorResponse>;
+  putTwoFactorEmail: (request: UpdateTwoFactorEmailRequest) => Promise<TwoFactorEmailResponse>;
+  putTwoFactorDuo: (request: UpdateTwoFactorDuoRequest) => Promise<TwoFactorDuoResponse>;
+  putTwoFactorOrganizationDuo: (
+    organizationId: string,
+    request: UpdateTwoFactorDuoRequest
+  ) => Promise<TwoFactorDuoResponse>;
+  putTwoFactorYubiKey: (
+    request: UpdateTwoFactorYubioOtpRequest
+  ) => Promise<TwoFactorYubiKeyResponse>;
+  putTwoFactorWebAuthn: (
+    request: UpdateTwoFactorWebAuthnRequest
+  ) => Promise<TwoFactorWebAuthnResponse>;
+  deleteTwoFactorWebAuthn: (
+    request: UpdateTwoFactorWebAuthnDeleteRequest
+  ) => Promise<TwoFactorWebAuthnResponse>;
+  putTwoFactorDisable: (request: TwoFactorProviderRequest) => Promise<TwoFactorProviderResponse>;
+  putTwoFactorOrganizationDisable: (
+    organizationId: string,
+    request: TwoFactorProviderRequest
+  ) => Promise<TwoFactorProviderResponse>;
+  postTwoFactorRecover: (request: TwoFactorRecoveryRequest) => Promise<any>;
+  postTwoFactorEmailSetup: (request: TwoFactorEmailRequest) => Promise<any>;
+  postTwoFactorEmail: (request: TwoFactorEmailRequest) => Promise<any>;
 
-    getEmergencyAccessTrusted: () => Promise<ListResponse<EmergencyAccessGranteeDetailsResponse>>;
-    getEmergencyAccessGranted: () => Promise<ListResponse<EmergencyAccessGrantorDetailsResponse>>;
-    getEmergencyAccess: (id: string) => Promise<EmergencyAccessGranteeDetailsResponse>;
-    getEmergencyGrantorPolicies: (id: string) => Promise<ListResponse<PolicyResponse>>;
-    putEmergencyAccess: (id: string, request: EmergencyAccessUpdateRequest) => Promise<any>;
-    deleteEmergencyAccess: (id: string) => Promise<any>;
-    postEmergencyAccessInvite: (request: EmergencyAccessInviteRequest) => Promise<any>;
-    postEmergencyAccessReinvite: (id: string) => Promise<any>;
-    postEmergencyAccessAccept: (id: string, request: EmergencyAccessAcceptRequest) => Promise<any>;
-    postEmergencyAccessConfirm: (id: string, request: EmergencyAccessConfirmRequest) => Promise<any>;
-    postEmergencyAccessInitiate: (id: string) => Promise<any>;
-    postEmergencyAccessApprove: (id: string) => Promise<any>;
-    postEmergencyAccessReject: (id: string) => Promise<any>;
-    postEmergencyAccessTakeover: (id: string) => Promise<EmergencyAccessTakeoverResponse>;
-    postEmergencyAccessPassword: (id: string, request: EmergencyAccessPasswordRequest) => Promise<any>;
-    postEmergencyAccessView: (id: string) => Promise<EmergencyAccessViewResponse>;
+  getEmergencyAccessTrusted: () => Promise<ListResponse<EmergencyAccessGranteeDetailsResponse>>;
+  getEmergencyAccessGranted: () => Promise<ListResponse<EmergencyAccessGrantorDetailsResponse>>;
+  getEmergencyAccess: (id: string) => Promise<EmergencyAccessGranteeDetailsResponse>;
+  getEmergencyGrantorPolicies: (id: string) => Promise<ListResponse<PolicyResponse>>;
+  putEmergencyAccess: (id: string, request: EmergencyAccessUpdateRequest) => Promise<any>;
+  deleteEmergencyAccess: (id: string) => Promise<any>;
+  postEmergencyAccessInvite: (request: EmergencyAccessInviteRequest) => Promise<any>;
+  postEmergencyAccessReinvite: (id: string) => Promise<any>;
+  postEmergencyAccessAccept: (id: string, request: EmergencyAccessAcceptRequest) => Promise<any>;
+  postEmergencyAccessConfirm: (id: string, request: EmergencyAccessConfirmRequest) => Promise<any>;
+  postEmergencyAccessInitiate: (id: string) => Promise<any>;
+  postEmergencyAccessApprove: (id: string) => Promise<any>;
+  postEmergencyAccessReject: (id: string) => Promise<any>;
+  postEmergencyAccessTakeover: (id: string) => Promise<EmergencyAccessTakeoverResponse>;
+  postEmergencyAccessPassword: (
+    id: string,
+    request: EmergencyAccessPasswordRequest
+  ) => Promise<any>;
+  postEmergencyAccessView: (id: string) => Promise<EmergencyAccessViewResponse>;
 
-    getOrganization: (id: string) => Promise<OrganizationResponse>;
-    getOrganizationBilling: (id: string) => Promise<BillingResponse>;
-    getOrganizationSubscription: (id: string) => Promise<OrganizationSubscriptionResponse>;
-    getOrganizationLicense: (id: string, installationId: string) => Promise<any>;
-    getOrganizationTaxInfo: (id: string) => Promise<TaxInfoResponse>;
-    getOrganizationAutoEnrollStatus: (identifier: string) => Promise<OrganizationAutoEnrollStatusResponse>;
-    getOrganizationSso: (id: string) => Promise<OrganizationSsoResponse>;
-    postOrganization: (request: OrganizationCreateRequest) => Promise<OrganizationResponse>;
-    putOrganization: (id: string, request: OrganizationUpdateRequest) => Promise<OrganizationResponse>;
-    putOrganizationTaxInfo: (id: string, request: OrganizationTaxInfoUpdateRequest) => Promise<any>;
-    postLeaveOrganization: (id: string) => Promise<any>;
-    postOrganizationLicense: (data: FormData) => Promise<OrganizationResponse>;
-    postOrganizationLicenseUpdate: (id: string, data: FormData) => Promise<any>;
-    postOrganizationApiKey: (id: string, request: SecretVerificationRequest) => Promise<ApiKeyResponse>;
-    postOrganizationRotateApiKey: (id: string, request: SecretVerificationRequest) => Promise<ApiKeyResponse>;
-    postOrganizationSso: (id: string, request: OrganizationSsoRequest) => Promise<OrganizationSsoResponse>;
-    postOrganizationUpgrade: (id: string, request: OrganizationUpgradeRequest) => Promise<PaymentResponse>;
-    postOrganizationUpdateSubscription: (id: string, request: OrganizationSubscriptionUpdateRequest) => Promise<void>;
-    postOrganizationSeat: (id: string, request: SeatRequest) => Promise<PaymentResponse>;
-    postOrganizationStorage: (id: string, request: StorageRequest) => Promise<any>;
-    postOrganizationPayment: (id: string, request: PaymentRequest) => Promise<any>;
-    postOrganizationVerifyBank: (id: string, request: VerifyBankRequest) => Promise<any>;
-    postOrganizationCancel: (id: string) => Promise<any>;
-    postOrganizationReinstate: (id: string) => Promise<any>;
-    deleteOrganization: (id: string, request: SecretVerificationRequest) => Promise<any>;
-    getPlans: () => Promise<ListResponse<PlanResponse>>;
-    getTaxRates: () => Promise<ListResponse<TaxRateResponse>>;
-    getOrganizationKeys: (id: string) => Promise<OrganizationKeysResponse>;
-    postOrganizationKeys: (id: string, request: OrganizationKeysRequest) => Promise<OrganizationKeysResponse>;
+  getOrganization: (id: string) => Promise<OrganizationResponse>;
+  getOrganizationBilling: (id: string) => Promise<BillingResponse>;
+  getOrganizationSubscription: (id: string) => Promise<OrganizationSubscriptionResponse>;
+  getOrganizationLicense: (id: string, installationId: string) => Promise<any>;
+  getOrganizationTaxInfo: (id: string) => Promise<TaxInfoResponse>;
+  getOrganizationAutoEnrollStatus: (
+    identifier: string
+  ) => Promise<OrganizationAutoEnrollStatusResponse>;
+  getOrganizationSso: (id: string) => Promise<OrganizationSsoResponse>;
+  postOrganization: (request: OrganizationCreateRequest) => Promise<OrganizationResponse>;
+  putOrganization: (
+    id: string,
+    request: OrganizationUpdateRequest
+  ) => Promise<OrganizationResponse>;
+  putOrganizationTaxInfo: (id: string, request: OrganizationTaxInfoUpdateRequest) => Promise<any>;
+  postLeaveOrganization: (id: string) => Promise<any>;
+  postOrganizationLicense: (data: FormData) => Promise<OrganizationResponse>;
+  postOrganizationLicenseUpdate: (id: string, data: FormData) => Promise<any>;
+  postOrganizationApiKey: (
+    id: string,
+    request: SecretVerificationRequest
+  ) => Promise<ApiKeyResponse>;
+  postOrganizationRotateApiKey: (
+    id: string,
+    request: SecretVerificationRequest
+  ) => Promise<ApiKeyResponse>;
+  postOrganizationSso: (
+    id: string,
+    request: OrganizationSsoRequest
+  ) => Promise<OrganizationSsoResponse>;
+  postOrganizationUpgrade: (
+    id: string,
+    request: OrganizationUpgradeRequest
+  ) => Promise<PaymentResponse>;
+  postOrganizationUpdateSubscription: (
+    id: string,
+    request: OrganizationSubscriptionUpdateRequest
+  ) => Promise<void>;
+  postOrganizationSeat: (id: string, request: SeatRequest) => Promise<PaymentResponse>;
+  postOrganizationStorage: (id: string, request: StorageRequest) => Promise<any>;
+  postOrganizationPayment: (id: string, request: PaymentRequest) => Promise<any>;
+  postOrganizationVerifyBank: (id: string, request: VerifyBankRequest) => Promise<any>;
+  postOrganizationCancel: (id: string) => Promise<any>;
+  postOrganizationReinstate: (id: string) => Promise<any>;
+  deleteOrganization: (id: string, request: SecretVerificationRequest) => Promise<any>;
+  getPlans: () => Promise<ListResponse<PlanResponse>>;
+  getTaxRates: () => Promise<ListResponse<TaxRateResponse>>;
+  getOrganizationKeys: (id: string) => Promise<OrganizationKeysResponse>;
+  postOrganizationKeys: (
+    id: string,
+    request: OrganizationKeysRequest
+  ) => Promise<OrganizationKeysResponse>;
 
-    postProviderSetup: (id: string, request: ProviderSetupRequest) => Promise<ProviderResponse>;
-    getProvider: (id: string) => Promise<ProviderResponse>;
-    putProvider: (id: string, request: ProviderUpdateRequest) => Promise<ProviderResponse>;
+  postProviderSetup: (id: string, request: ProviderSetupRequest) => Promise<ProviderResponse>;
+  getProvider: (id: string) => Promise<ProviderResponse>;
+  putProvider: (id: string, request: ProviderUpdateRequest) => Promise<ProviderResponse>;
 
-    getProviderUsers: (providerId: string) => Promise<ListResponse<ProviderUserUserDetailsResponse>>;
-    getProviderUser: (providerId: string, id: string) => Promise<ProviderUserResponse>;
-    postProviderUserInvite: (providerId: string, request: ProviderUserInviteRequest) => Promise<any>;
-    postProviderUserReinvite: (providerId: string, id: string) => Promise<any>;
-    postManyProviderUserReinvite: (providerId: string, request: ProviderUserBulkRequest) => Promise<ListResponse<ProviderUserBulkResponse>>;
-    postProviderUserAccept: (providerId: string, id: string, request: ProviderUserAcceptRequest) => Promise<any>;
-    postProviderUserConfirm: (providerId: string, id: string, request: ProviderUserConfirmRequest) => Promise<any>;
-    postProviderUsersPublicKey: (providerId: string, request: ProviderUserBulkRequest) =>
-        Promise<ListResponse<ProviderUserBulkPublicKeyResponse>>;
-    postProviderUserBulkConfirm: (providerId: string, request: ProviderUserBulkConfirmRequest) => Promise<ListResponse<ProviderUserBulkResponse>>;
-    putProviderUser: (providerId: string, id: string, request: ProviderUserUpdateRequest) => Promise<any>;
-    deleteProviderUser: (organizationId: string, id: string) => Promise<any>;
-    deleteManyProviderUsers: (providerId: string, request: ProviderUserBulkRequest) => Promise<ListResponse<ProviderUserBulkResponse>>;
-    getProviderClients: (providerId: string) => Promise<ListResponse<ProviderOrganizationOrganizationDetailsResponse>>;
-    postProviderAddOrganization: (providerId: string, request: ProviderAddOrganizationRequest) => Promise<any>;
-    postProviderCreateOrganization: (providerId: string, request: ProviderOrganizationCreateRequest) => Promise<ProviderOrganizationResponse>;
-    deleteProviderOrganization: (providerId: string, organizationId: string) => Promise<any>;
+  getProviderUsers: (providerId: string) => Promise<ListResponse<ProviderUserUserDetailsResponse>>;
+  getProviderUser: (providerId: string, id: string) => Promise<ProviderUserResponse>;
+  postProviderUserInvite: (providerId: string, request: ProviderUserInviteRequest) => Promise<any>;
+  postProviderUserReinvite: (providerId: string, id: string) => Promise<any>;
+  postManyProviderUserReinvite: (
+    providerId: string,
+    request: ProviderUserBulkRequest
+  ) => Promise<ListResponse<ProviderUserBulkResponse>>;
+  postProviderUserAccept: (
+    providerId: string,
+    id: string,
+    request: ProviderUserAcceptRequest
+  ) => Promise<any>;
+  postProviderUserConfirm: (
+    providerId: string,
+    id: string,
+    request: ProviderUserConfirmRequest
+  ) => Promise<any>;
+  postProviderUsersPublicKey: (
+    providerId: string,
+    request: ProviderUserBulkRequest
+  ) => Promise<ListResponse<ProviderUserBulkPublicKeyResponse>>;
+  postProviderUserBulkConfirm: (
+    providerId: string,
+    request: ProviderUserBulkConfirmRequest
+  ) => Promise<ListResponse<ProviderUserBulkResponse>>;
+  putProviderUser: (
+    providerId: string,
+    id: string,
+    request: ProviderUserUpdateRequest
+  ) => Promise<any>;
+  deleteProviderUser: (organizationId: string, id: string) => Promise<any>;
+  deleteManyProviderUsers: (
+    providerId: string,
+    request: ProviderUserBulkRequest
+  ) => Promise<ListResponse<ProviderUserBulkResponse>>;
+  getProviderClients: (
+    providerId: string
+  ) => Promise<ListResponse<ProviderOrganizationOrganizationDetailsResponse>>;
+  postProviderAddOrganization: (
+    providerId: string,
+    request: ProviderAddOrganizationRequest
+  ) => Promise<any>;
+  postProviderCreateOrganization: (
+    providerId: string,
+    request: ProviderOrganizationCreateRequest
+  ) => Promise<ProviderOrganizationResponse>;
+  deleteProviderOrganization: (providerId: string, organizationId: string) => Promise<any>;
 
-    getEvents: (start: string, end: string, token: string) => Promise<ListResponse<EventResponse>>;
-    getEventsCipher: (id: string, start: string, end: string, token: string) => Promise<ListResponse<EventResponse>>;
-    getEventsOrganization: (id: string, start: string, end: string,
-        token: string) => Promise<ListResponse<EventResponse>>;
-    getEventsOrganizationUser: (organizationId: string, id: string,
-        start: string, end: string, token: string) => Promise<ListResponse<EventResponse>>;
-    getEventsProvider: (id: string, start: string, end: string, token: string) => Promise<ListResponse<EventResponse>>;
-    getEventsProviderUser: (providerId: string, id: string, start: string, end: string, token: string) => Promise<ListResponse<EventResponse>>;
-    postEventsCollect: (request: EventRequest[]) => Promise<any>;
+  getEvents: (start: string, end: string, token: string) => Promise<ListResponse<EventResponse>>;
+  getEventsCipher: (
+    id: string,
+    start: string,
+    end: string,
+    token: string
+  ) => Promise<ListResponse<EventResponse>>;
+  getEventsOrganization: (
+    id: string,
+    start: string,
+    end: string,
+    token: string
+  ) => Promise<ListResponse<EventResponse>>;
+  getEventsOrganizationUser: (
+    organizationId: string,
+    id: string,
+    start: string,
+    end: string,
+    token: string
+  ) => Promise<ListResponse<EventResponse>>;
+  getEventsProvider: (
+    id: string,
+    start: string,
+    end: string,
+    token: string
+  ) => Promise<ListResponse<EventResponse>>;
+  getEventsProviderUser: (
+    providerId: string,
+    id: string,
+    start: string,
+    end: string,
+    token: string
+  ) => Promise<ListResponse<EventResponse>>;
+  postEventsCollect: (request: EventRequest[]) => Promise<any>;
 
-    deleteSsoUser: (organizationId: string) => Promise<any>;
-    getSsoUserIdentifier: () => Promise<string>;
+  deleteSsoUser: (organizationId: string) => Promise<any>;
+  getSsoUserIdentifier: () => Promise<string>;
 
-    getUserPublicKey: (id: string) => Promise<UserKeyResponse>;
+  getUserPublicKey: (id: string) => Promise<UserKeyResponse>;
 
-    getHibpBreach: (username: string) => Promise<BreachAccountResponse[]>;
+  getHibpBreach: (username: string) => Promise<BreachAccountResponse[]>;
 
-    postBitPayInvoice: (request: BitPayInvoiceRequest) => Promise<string>;
-    postSetupPayment: () => Promise<string>;
+  postBitPayInvoice: (request: BitPayInvoiceRequest) => Promise<string>;
+  postSetupPayment: () => Promise<string>;
 
-    getActiveBearerToken: () => Promise<string>;
-    fetch: (request: Request) => Promise<Response>;
-    nativeFetch: (request: Request) => Promise<Response>;
+  getActiveBearerToken: () => Promise<string>;
+  fetch: (request: Request) => Promise<Response>;
+  nativeFetch: (request: Request) => Promise<Response>;
 
-    preValidateSso: (identifier: string) => Promise<boolean>;
+  preValidateSso: (identifier: string) => Promise<boolean>;
 
-    postCreateSponsorship: (sponsorshipOrgId: string, request: OrganizationSponsorshipCreateRequest) => Promise<void>;
-    deleteRevokeSponsorship: (sponsoringOrganizationId: string) => Promise<void>;
-    deleteRemoveSponsorship: (sponsoringOrgId: string) => Promise<void>;
-    postPreValidateSponsorshipToken: (sponsorshipToken: string) => Promise<boolean>;
-    postRedeemSponsorship: (sponsorshipToken: string, request: OrganizationSponsorshipRedeemRequest) => Promise<void>;
-    postResendSponsorshipOffer: (sponsoringOrgId: string) => Promise<void>;
+  postCreateSponsorship: (
+    sponsorshipOrgId: string,
+    request: OrganizationSponsorshipCreateRequest
+  ) => Promise<void>;
+  deleteRevokeSponsorship: (sponsoringOrganizationId: string) => Promise<void>;
+  deleteRemoveSponsorship: (sponsoringOrgId: string) => Promise<void>;
+  postPreValidateSponsorshipToken: (sponsorshipToken: string) => Promise<boolean>;
+  postRedeemSponsorship: (
+    sponsorshipToken: string,
+    request: OrganizationSponsorshipRedeemRequest
+  ) => Promise<void>;
+  postResendSponsorshipOffer: (sponsoringOrgId: string) => Promise<void>;
 
-    getUserKeyFromKeyConnector: (keyConnectorUrl: string) => Promise<KeyConnectorUserKeyResponse>;
-    postUserKeyToKeyConnector: (keyConnectorUrl: string, request: KeyConnectorUserKeyRequest) => Promise<void>;
-    getKeyConnectorAlive: (keyConnectorUrl: string) => Promise<void>;
+  getUserKeyFromKeyConnector: (keyConnectorUrl: string) => Promise<KeyConnectorUserKeyResponse>;
+  postUserKeyToKeyConnector: (
+    keyConnectorUrl: string,
+    request: KeyConnectorUserKeyRequest
+  ) => Promise<void>;
+  getKeyConnectorAlive: (keyConnectorUrl: string) => Promise<void>;
 }
diff --git a/jslib/common/src/abstractions/apiKey.service.ts b/jslib/common/src/abstractions/apiKey.service.ts
deleted file mode 100644
index bc4b8a44..00000000
--- a/jslib/common/src/abstractions/apiKey.service.ts
+++ /dev/null
@@ -1,9 +0,0 @@
-export abstract class ApiKeyService {
-    setInformation: (clientId: string, clientSecret: string) => Promise<any>;
-    clear: () => Promise<any>;
-    getClientId: () => Promise<string>;
-    getClientSecret: () => Promise<string>;
-    getEntityType: () => Promise<string>;
-    getEntityId: () => Promise<string>;
-    isAuthenticated: () => Promise<boolean>;
-}
diff --git a/jslib/common/src/abstractions/appId.service.ts b/jslib/common/src/abstractions/appId.service.ts
index d087478a..99bc6c9e 100644
--- a/jslib/common/src/abstractions/appId.service.ts
+++ b/jslib/common/src/abstractions/appId.service.ts
@@ -1,4 +1,4 @@
 export abstract class AppIdService {
-    getAppId: () => Promise<string>;
-    getAnonymousAppId: () => Promise<string>;
+  getAppId: () => Promise<string>;
+  getAnonymousAppId: () => Promise<string>;
 }
diff --git a/jslib/common/src/abstractions/audit.service.ts b/jslib/common/src/abstractions/audit.service.ts
index b8c40bc2..6b6b81f6 100644
--- a/jslib/common/src/abstractions/audit.service.ts
+++ b/jslib/common/src/abstractions/audit.service.ts
@@ -1,6 +1,6 @@
-import { BreachAccountResponse } from '../models/response/breachAccountResponse';
+import { BreachAccountResponse } from "../models/response/breachAccountResponse";
 
 export abstract class AuditService {
-    passwordLeaked: (password: string) => Promise<number>;
-    breachedAccounts: (username: string) => Promise<BreachAccountResponse[]>;
+  passwordLeaked: (password: string) => Promise<number>;
+  breachedAccounts: (username: string) => Promise<BreachAccountResponse[]>;
 }
diff --git a/jslib/common/src/abstractions/auth.service.ts b/jslib/common/src/abstractions/auth.service.ts
index 58f72fc7..10dff3a8 100644
--- a/jslib/common/src/abstractions/auth.service.ts
+++ b/jslib/common/src/abstractions/auth.service.ts
@@ -1,35 +1,60 @@
-import { TwoFactorProviderType } from '../enums/twoFactorProviderType';
+import { TwoFactorProviderType } from "../enums/twoFactorProviderType";
 
-import { AuthResult } from '../models/domain/authResult';
-import { SymmetricCryptoKey } from '../models/domain/symmetricCryptoKey';
+import { AuthResult } from "../models/domain/authResult";
+import { SymmetricCryptoKey } from "../models/domain/symmetricCryptoKey";
 
 export abstract class AuthService {
-    email: string;
-    masterPasswordHash: string;
-    code: string;
-    codeVerifier: string;
-    ssoRedirectUrl: string;
-    clientId: string;
-    clientSecret: string;
-    twoFactorProvidersData: Map<TwoFactorProviderType, { [key: string]: string; }>;
-    selectedTwoFactorProviderType: TwoFactorProviderType;
+  email: string;
+  masterPasswordHash: string;
+  code: string;
+  codeVerifier: string;
+  ssoRedirectUrl: string;
+  clientId: string;
+  clientSecret: string;
+  twoFactorProvidersData: Map<TwoFactorProviderType, { [key: string]: string }>;
+  selectedTwoFactorProviderType: TwoFactorProviderType;
 
-    logIn: (email: string, masterPassword: string, captchaToken?: string) => Promise<AuthResult>;
-    logInSso: (code: string, codeVerifier: string, redirectUrl: string, orgId: string) => Promise<AuthResult>;
-    logInApiKey: (clientId: string, clientSecret: string) => Promise<AuthResult>;
-    logInTwoFactor: (twoFactorProvider: TwoFactorProviderType, twoFactorToken: string,
-        remember?: boolean) => Promise<AuthResult>;
-    logInComplete: (email: string, masterPassword: string, twoFactorProvider: TwoFactorProviderType,
-        twoFactorToken: string, remember?: boolean, captchaToken?: string) => Promise<AuthResult>;
-    logInSsoComplete: (code: string, codeVerifier: string, redirectUrl: string,
-        twoFactorProvider: TwoFactorProviderType, twoFactorToken: string, remember?: boolean) => Promise<AuthResult>;
-    logInApiKeyComplete: (clientId: string, clientSecret: string, twoFactorProvider: TwoFactorProviderType,
-        twoFactorToken: string, remember?: boolean) => Promise<AuthResult>;
-    logOut: (callback: Function) => void;
-    getSupportedTwoFactorProviders: (win: Window) => any[];
-    getDefaultTwoFactorProvider: (webAuthnSupported: boolean) => TwoFactorProviderType;
-    makePreloginKey: (masterPassword: string, email: string) => Promise<SymmetricCryptoKey>;
-    authingWithApiKey: () => boolean;
-    authingWithSso: () => boolean;
-    authingWithPassword: () => boolean;
+  logIn: (email: string, masterPassword: string, captchaToken?: string) => Promise<AuthResult>;
+  logInSso: (
+    code: string,
+    codeVerifier: string,
+    redirectUrl: string,
+    orgId: string
+  ) => Promise<AuthResult>;
+  logInApiKey: (clientId: string, clientSecret: string) => Promise<AuthResult>;
+  logInTwoFactor: (
+    twoFactorProvider: TwoFactorProviderType,
+    twoFactorToken: string,
+    remember?: boolean
+  ) => Promise<AuthResult>;
+  logInComplete: (
+    email: string,
+    masterPassword: string,
+    twoFactorProvider: TwoFactorProviderType,
+    twoFactorToken: string,
+    remember?: boolean,
+    captchaToken?: string
+  ) => Promise<AuthResult>;
+  logInSsoComplete: (
+    code: string,
+    codeVerifier: string,
+    redirectUrl: string,
+    twoFactorProvider: TwoFactorProviderType,
+    twoFactorToken: string,
+    remember?: boolean
+  ) => Promise<AuthResult>;
+  logInApiKeyComplete: (
+    clientId: string,
+    clientSecret: string,
+    twoFactorProvider: TwoFactorProviderType,
+    twoFactorToken: string,
+    remember?: boolean
+  ) => Promise<AuthResult>;
+  logOut: (callback: Function) => void;
+  getSupportedTwoFactorProviders: (win: Window) => any[];
+  getDefaultTwoFactorProvider: (webAuthnSupported: boolean) => TwoFactorProviderType;
+  makePreloginKey: (masterPassword: string, email: string) => Promise<SymmetricCryptoKey>;
+  authingWithApiKey: () => boolean;
+  authingWithSso: () => boolean;
+  authingWithPassword: () => boolean;
 }
diff --git a/jslib/common/src/abstractions/biometric.main.ts b/jslib/common/src/abstractions/biometric.main.ts
index 65a4eb5c..a8557c40 100644
--- a/jslib/common/src/abstractions/biometric.main.ts
+++ b/jslib/common/src/abstractions/biometric.main.ts
@@ -1,6 +1,6 @@
 export abstract class BiometricMain {
-    isError: boolean;
-    init: () => Promise<void>;
-    supportsBiometric: () => Promise<boolean>;
-    authenticateBiometric: () => Promise<boolean>;
+  isError: boolean;
+  init: () => Promise<void>;
+  supportsBiometric: () => Promise<boolean>;
+  authenticateBiometric: () => Promise<boolean>;
 }
diff --git a/jslib/common/src/abstractions/broadcaster.service.ts b/jslib/common/src/abstractions/broadcaster.service.ts
index 9d0c8de9..1b9d0899 100644
--- a/jslib/common/src/abstractions/broadcaster.service.ts
+++ b/jslib/common/src/abstractions/broadcaster.service.ts
@@ -1,5 +1,5 @@
 export abstract class BroadcasterService {
-    send: (message: any, id?: string) => void;
-    subscribe: (id: string, messageCallback: (message: any) => any) => void;
-    unsubscribe: (id: string) => void;
+  send: (message: any, id?: string) => void;
+  subscribe: (id: string, messageCallback: (message: any) => any) => void;
+  unsubscribe: (id: string) => void;
 }
diff --git a/jslib/common/src/abstractions/cipher.service.ts b/jslib/common/src/abstractions/cipher.service.ts
index 941c3826..c1c1437a 100644
--- a/jslib/common/src/abstractions/cipher.service.ts
+++ b/jslib/common/src/abstractions/cipher.service.ts
@@ -1,59 +1,82 @@
-import { CipherType } from '../enums/cipherType';
-import { UriMatchType } from '../enums/uriMatchType';
+import { CipherType } from "../enums/cipherType";
+import { UriMatchType } from "../enums/uriMatchType";
 
-import { CipherData } from '../models/data/cipherData';
+import { CipherData } from "../models/data/cipherData";
 
-import { Cipher } from '../models/domain/cipher';
-import { Field } from '../models/domain/field';
-import { SymmetricCryptoKey } from '../models/domain/symmetricCryptoKey';
+import { Cipher } from "../models/domain/cipher";
+import { Field } from "../models/domain/field";
+import { SymmetricCryptoKey } from "../models/domain/symmetricCryptoKey";
 
-import { CipherView } from '../models/view/cipherView';
-import { FieldView } from '../models/view/fieldView';
+import { CipherView } from "../models/view/cipherView";
+import { FieldView } from "../models/view/fieldView";
 
 export abstract class CipherService {
-    decryptedCipherCache: CipherView[];
-
-    clearCache: () => void;
-    encrypt: (model: CipherView, key?: SymmetricCryptoKey, originalCipher?: Cipher) => Promise<Cipher>;
-    encryptFields: (fieldsModel: FieldView[], key: SymmetricCryptoKey) => Promise<Field[]>;
-    encryptField: (fieldModel: FieldView, key: SymmetricCryptoKey) => Promise<Field>;
-    get: (id: string) => Promise<Cipher>;
-    getAll: () => Promise<Cipher[]>;
-    getAllDecrypted: () => Promise<CipherView[]>;
-    getAllDecryptedForGrouping: (groupingId: string, folder?: boolean) => Promise<CipherView[]>;
-    getAllDecryptedForUrl: (url: string, includeOtherTypes?: CipherType[],
-        defaultMatch?: UriMatchType) => Promise<CipherView[]>;
-    getAllFromApiForOrganization: (organizationId: string) => Promise<CipherView[]>;
-    getLastUsedForUrl: (url: string, autofillOnPageLoad: boolean) => Promise<CipherView>;
-    getLastLaunchedForUrl: (url: string, autofillOnPageLoad: boolean) => Promise<CipherView>;
-    getNextCipherForUrl: (url: string) => Promise<CipherView>;
-    updateLastUsedIndexForUrl: (url: string) => void;
-    updateLastUsedDate: (id: string) => Promise<void>;
-    updateLastLaunchedDate: (id: string) => Promise<void>;
-    saveNeverDomain: (domain: string) => Promise<void>;
-    saveWithServer: (cipher: Cipher) => Promise<any>;
-    shareWithServer: (cipher: CipherView, organizationId: string, collectionIds: string[]) => Promise<any>;
-    shareManyWithServer: (ciphers: CipherView[], organizationId: string, collectionIds: string[]) => Promise<any>;
-    saveAttachmentWithServer: (cipher: Cipher, unencryptedFile: any, admin?: boolean) => Promise<Cipher>;
-    saveAttachmentRawWithServer: (cipher: Cipher, filename: string, data: ArrayBuffer,
-        admin?: boolean) => Promise<Cipher>;
-    saveCollectionsWithServer: (cipher: Cipher) => Promise<any>;
-    upsert: (cipher: CipherData | CipherData[]) => Promise<any>;
-    replace: (ciphers: { [id: string]: CipherData; }) => Promise<any>;
-    clear: (userId: string) => Promise<any>;
-    moveManyWithServer: (ids: string[], folderId: string) => Promise<any>;
-    delete: (id: string | string[]) => Promise<any>;
-    deleteWithServer: (id: string) => Promise<any>;
-    deleteManyWithServer: (ids: string[]) => Promise<any>;
-    deleteAttachment: (id: string, attachmentId: string) => Promise<void>;
-    deleteAttachmentWithServer: (id: string, attachmentId: string) => Promise<void>;
-    sortCiphersByLastUsed: (a: any, b: any) => number;
-    sortCiphersByLastUsedThenName: (a: any, b: any) => number;
-    getLocaleSortingFunction: () => (a: CipherView, b: CipherView) => number;
-    softDelete: (id: string | string[]) => Promise<any>;
-    softDeleteWithServer: (id: string) => Promise<any>;
-    softDeleteManyWithServer: (ids: string[]) => Promise<any>;
-    restore: (cipher: { id: string, revisionDate: string; } | { id: string, revisionDate: string; }[]) => Promise<any>;
-    restoreWithServer: (id: string) => Promise<any>;
-    restoreManyWithServer: (ids: string[]) => Promise<any>;
+  clearCache: (userId?: string) => Promise<void>;
+  encrypt: (
+    model: CipherView,
+    key?: SymmetricCryptoKey,
+    originalCipher?: Cipher
+  ) => Promise<Cipher>;
+  encryptFields: (fieldsModel: FieldView[], key: SymmetricCryptoKey) => Promise<Field[]>;
+  encryptField: (fieldModel: FieldView, key: SymmetricCryptoKey) => Promise<Field>;
+  get: (id: string) => Promise<Cipher>;
+  getAll: () => Promise<Cipher[]>;
+  getAllDecrypted: () => Promise<CipherView[]>;
+  getAllDecryptedForGrouping: (groupingId: string, folder?: boolean) => Promise<CipherView[]>;
+  getAllDecryptedForUrl: (
+    url: string,
+    includeOtherTypes?: CipherType[],
+    defaultMatch?: UriMatchType
+  ) => Promise<CipherView[]>;
+  getAllFromApiForOrganization: (organizationId: string) => Promise<CipherView[]>;
+  getLastUsedForUrl: (url: string, autofillOnPageLoad: boolean) => Promise<CipherView>;
+  getLastLaunchedForUrl: (url: string, autofillOnPageLoad: boolean) => Promise<CipherView>;
+  getNextCipherForUrl: (url: string) => Promise<CipherView>;
+  updateLastUsedIndexForUrl: (url: string) => void;
+  updateLastUsedDate: (id: string) => Promise<void>;
+  updateLastLaunchedDate: (id: string) => Promise<void>;
+  saveNeverDomain: (domain: string) => Promise<void>;
+  saveWithServer: (cipher: Cipher) => Promise<any>;
+  shareWithServer: (
+    cipher: CipherView,
+    organizationId: string,
+    collectionIds: string[]
+  ) => Promise<any>;
+  shareManyWithServer: (
+    ciphers: CipherView[],
+    organizationId: string,
+    collectionIds: string[]
+  ) => Promise<any>;
+  saveAttachmentWithServer: (
+    cipher: Cipher,
+    unencryptedFile: any,
+    admin?: boolean
+  ) => Promise<Cipher>;
+  saveAttachmentRawWithServer: (
+    cipher: Cipher,
+    filename: string,
+    data: ArrayBuffer,
+    admin?: boolean
+  ) => Promise<Cipher>;
+  saveCollectionsWithServer: (cipher: Cipher) => Promise<any>;
+  upsert: (cipher: CipherData | CipherData[]) => Promise<any>;
+  replace: (ciphers: { [id: string]: CipherData }) => Promise<any>;
+  clear: (userId: string) => Promise<any>;
+  moveManyWithServer: (ids: string[], folderId: string) => Promise<any>;
+  delete: (id: string | string[]) => Promise<any>;
+  deleteWithServer: (id: string) => Promise<any>;
+  deleteManyWithServer: (ids: string[]) => Promise<any>;
+  deleteAttachment: (id: string, attachmentId: string) => Promise<void>;
+  deleteAttachmentWithServer: (id: string, attachmentId: string) => Promise<void>;
+  sortCiphersByLastUsed: (a: any, b: any) => number;
+  sortCiphersByLastUsedThenName: (a: any, b: any) => number;
+  getLocaleSortingFunction: () => (a: CipherView, b: CipherView) => number;
+  softDelete: (id: string | string[]) => Promise<any>;
+  softDeleteWithServer: (id: string) => Promise<any>;
+  softDeleteManyWithServer: (ids: string[]) => Promise<any>;
+  restore: (
+    cipher: { id: string; revisionDate: string } | { id: string; revisionDate: string }[]
+  ) => Promise<any>;
+  restoreWithServer: (id: string) => Promise<any>;
+  restoreManyWithServer: (ids: string[]) => Promise<any>;
 }
diff --git a/jslib/common/src/abstractions/collection.service.ts b/jslib/common/src/abstractions/collection.service.ts
index 09045537..f5880e47 100644
--- a/jslib/common/src/abstractions/collection.service.ts
+++ b/jslib/common/src/abstractions/collection.service.ts
@@ -1,23 +1,21 @@
-import { CollectionData } from '../models/data/collectionData';
+import { CollectionData } from "../models/data/collectionData";
 
-import { Collection } from '../models/domain/collection';
-import { TreeNode } from '../models/domain/treeNode';
+import { Collection } from "../models/domain/collection";
+import { TreeNode } from "../models/domain/treeNode";
 
-import { CollectionView } from '../models/view/collectionView';
+import { CollectionView } from "../models/view/collectionView";
 
 export abstract class CollectionService {
-    decryptedCollectionCache: CollectionView[];
-
-    clearCache: () => void;
-    encrypt: (model: CollectionView) => Promise<Collection>;
-    decryptMany: (collections: Collection[]) => Promise<CollectionView[]>;
-    get: (id: string) => Promise<Collection>;
-    getAll: () => Promise<Collection[]>;
-    getAllDecrypted: () => Promise<CollectionView[]>;
-    getAllNested: (collections?: CollectionView[]) => Promise<TreeNode<CollectionView>[]>;
-    getNested: (id: string) => Promise<TreeNode<CollectionView>>;
-    upsert: (collection: CollectionData | CollectionData[]) => Promise<any>;
-    replace: (collections: { [id: string]: CollectionData; }) => Promise<any>;
-    clear: (userId: string) => Promise<any>;
-    delete: (id: string | string[]) => Promise<any>;
+  clearCache: (userId?: string) => Promise<void>;
+  encrypt: (model: CollectionView) => Promise<Collection>;
+  decryptMany: (collections: Collection[]) => Promise<CollectionView[]>;
+  get: (id: string) => Promise<Collection>;
+  getAll: () => Promise<Collection[]>;
+  getAllDecrypted: () => Promise<CollectionView[]>;
+  getAllNested: (collections?: CollectionView[]) => Promise<TreeNode<CollectionView>[]>;
+  getNested: (id: string) => Promise<TreeNode<CollectionView>>;
+  upsert: (collection: CollectionData | CollectionData[]) => Promise<any>;
+  replace: (collections: { [id: string]: CollectionData }) => Promise<any>;
+  clear: (userId: string) => Promise<any>;
+  delete: (id: string | string[]) => Promise<any>;
 }
diff --git a/jslib/common/src/abstractions/crypto.service.ts b/jslib/common/src/abstractions/crypto.service.ts
index 841e61ab..3397d0d5 100644
--- a/jslib/common/src/abstractions/crypto.service.ts
+++ b/jslib/common/src/abstractions/crypto.service.ts
@@ -1,64 +1,88 @@
-import { EncArrayBuffer } from '../models/domain/encArrayBuffer';
-import { EncString } from '../models/domain/encString';
-import { SymmetricCryptoKey } from '../models/domain/symmetricCryptoKey';
+import { EncArrayBuffer } from "../models/domain/encArrayBuffer";
+import { EncString } from "../models/domain/encString";
+import { SymmetricCryptoKey } from "../models/domain/symmetricCryptoKey";
 
-import { ProfileOrganizationResponse } from '../models/response/profileOrganizationResponse';
-import { ProfileProviderOrganizationResponse } from '../models/response/profileProviderOrganizationResponse';
-import { ProfileProviderResponse } from '../models/response/profileProviderResponse';
+import { ProfileOrganizationResponse } from "../models/response/profileOrganizationResponse";
+import { ProfileProviderOrganizationResponse } from "../models/response/profileProviderOrganizationResponse";
+import { ProfileProviderResponse } from "../models/response/profileProviderResponse";
 
-import { HashPurpose } from '../enums/hashPurpose';
-import { KdfType } from '../enums/kdfType';
-
-import { KeySuffixOptions } from './storage.service';
+import { HashPurpose } from "../enums/hashPurpose";
+import { KdfType } from "../enums/kdfType";
+import { KeySuffixOptions } from "../enums/keySuffixOptions";
 
 export abstract class CryptoService {
-    setKey: (key: SymmetricCryptoKey) => Promise<any>;
-    setKeyHash: (keyHash: string) => Promise<{}>;
-    setEncKey: (encKey: string) => Promise<{}>;
-    setEncPrivateKey: (encPrivateKey: string) => Promise<{}>;
-    setOrgKeys: (orgs: ProfileOrganizationResponse[], providerOrgs: ProfileProviderOrganizationResponse[]) => Promise<{}>;
-    setProviderKeys: (orgs: ProfileProviderResponse[]) => Promise<{}>;
-    getKey: (keySuffix?: KeySuffixOptions) => Promise<SymmetricCryptoKey>;
-    getKeyFromStorage: (keySuffix: KeySuffixOptions) => Promise<SymmetricCryptoKey>;
-    getKeyHash: () => Promise<string>;
-    compareAndUpdateKeyHash: (masterPassword: string, key: SymmetricCryptoKey) => Promise<boolean>;
-    getEncKey: (key?: SymmetricCryptoKey) => Promise<SymmetricCryptoKey>;
-    getPublicKey: () => Promise<ArrayBuffer>;
-    getPrivateKey: () => Promise<ArrayBuffer>;
-    getFingerprint: (userId: string, publicKey?: ArrayBuffer) => Promise<string[]>;
-    getOrgKeys: () => Promise<Map<string, SymmetricCryptoKey>>;
-    getOrgKey: (orgId: string) => Promise<SymmetricCryptoKey>;
-    getProviderKey: (providerId: string) => Promise<SymmetricCryptoKey>;
-    hasKey: () => Promise<boolean>;
-    hasKeyInMemory: () => boolean;
-    hasKeyStored: (keySuffix?: KeySuffixOptions) => Promise<boolean>;
-    hasEncKey: () => Promise<boolean>;
-    clearKey: (clearSecretStorage?: boolean) => Promise<any>;
-    clearKeyHash: () => Promise<any>;
-    clearEncKey: (memoryOnly?: boolean) => Promise<any>;
-    clearKeyPair: (memoryOnly?: boolean) => Promise<any>;
-    clearOrgKeys: (memoryOnly?: boolean) => Promise<any>;
-    clearProviderKeys: (memoryOnly?: boolean) => Promise<any>;
-    clearPinProtectedKey: () => Promise<any>;
-    clearKeys: () => Promise<any>;
-    toggleKey: () => Promise<any>;
-    makeKey: (password: string, salt: string, kdf: KdfType, kdfIterations: number) => Promise<SymmetricCryptoKey>;
-    makeKeyFromPin: (pin: string, salt: string, kdf: KdfType, kdfIterations: number,
-        protectedKeyCs?: EncString) => Promise<SymmetricCryptoKey>;
-    makeShareKey: () => Promise<[EncString, SymmetricCryptoKey]>;
-    makeKeyPair: (key?: SymmetricCryptoKey) => Promise<[string, EncString]>;
-    makePinKey: (pin: string, salt: string, kdf: KdfType, kdfIterations: number) => Promise<SymmetricCryptoKey>;
-    makeSendKey: (keyMaterial: ArrayBuffer) => Promise<SymmetricCryptoKey>;
-    hashPassword: (password: string, key: SymmetricCryptoKey, hashPurpose?: HashPurpose) => Promise<string>;
-    makeEncKey: (key: SymmetricCryptoKey) => Promise<[SymmetricCryptoKey, EncString]>;
-    remakeEncKey: (key: SymmetricCryptoKey, encKey?: SymmetricCryptoKey) => Promise<[SymmetricCryptoKey, EncString]>;
-    encrypt: (plainValue: string | ArrayBuffer, key?: SymmetricCryptoKey) => Promise<EncString>;
-    encryptToBytes: (plainValue: ArrayBuffer, key?: SymmetricCryptoKey) => Promise<EncArrayBuffer>;
-    rsaEncrypt: (data: ArrayBuffer, publicKey?: ArrayBuffer) => Promise<EncString>;
-    rsaDecrypt: (encValue: string, privateKeyValue?: ArrayBuffer) => Promise<ArrayBuffer>;
-    decryptToBytes: (encString: EncString, key?: SymmetricCryptoKey) => Promise<ArrayBuffer>;
-    decryptToUtf8: (encString: EncString, key?: SymmetricCryptoKey) => Promise<string>;
-    decryptFromBytes: (encBuf: ArrayBuffer, key: SymmetricCryptoKey) => Promise<ArrayBuffer>;
-    randomNumber: (min: number, max: number) => Promise<number>;
-    validateKey: (key: SymmetricCryptoKey) => Promise<boolean>;
+  setKey: (key: SymmetricCryptoKey) => Promise<any>;
+  setKeyHash: (keyHash: string) => Promise<void>;
+  setEncKey: (encKey: string) => Promise<void>;
+  setEncPrivateKey: (encPrivateKey: string) => Promise<void>;
+  setOrgKeys: (
+    orgs: ProfileOrganizationResponse[],
+    providerOrgs: ProfileProviderOrganizationResponse[]
+  ) => Promise<void>;
+  setProviderKeys: (orgs: ProfileProviderResponse[]) => Promise<void>;
+  getKey: (keySuffix?: KeySuffixOptions, userId?: string) => Promise<SymmetricCryptoKey>;
+  getKeyFromStorage: (keySuffix: KeySuffixOptions, userId?: string) => Promise<SymmetricCryptoKey>;
+  getKeyHash: () => Promise<string>;
+  compareAndUpdateKeyHash: (masterPassword: string, key: SymmetricCryptoKey) => Promise<boolean>;
+  getEncKey: (key?: SymmetricCryptoKey) => Promise<SymmetricCryptoKey>;
+  getPublicKey: () => Promise<ArrayBuffer>;
+  getPrivateKey: () => Promise<ArrayBuffer>;
+  getFingerprint: (userId: string, publicKey?: ArrayBuffer) => Promise<string[]>;
+  getOrgKeys: () => Promise<Map<string, SymmetricCryptoKey>>;
+  getOrgKey: (orgId: string) => Promise<SymmetricCryptoKey>;
+  getProviderKey: (providerId: string) => Promise<SymmetricCryptoKey>;
+  hasKey: () => Promise<boolean>;
+  hasKeyInMemory: (userId?: string) => Promise<boolean>;
+  hasKeyStored: (keySuffix?: KeySuffixOptions, userId?: string) => Promise<boolean>;
+  hasEncKey: () => Promise<boolean>;
+  clearKey: (clearSecretStorage?: boolean, userId?: string) => Promise<any>;
+  clearKeyHash: () => Promise<any>;
+  clearEncKey: (memoryOnly?: boolean, userId?: string) => Promise<any>;
+  clearKeyPair: (memoryOnly?: boolean, userId?: string) => Promise<any>;
+  clearOrgKeys: (memoryOnly?: boolean, userId?: string) => Promise<any>;
+  clearProviderKeys: (memoryOnly?: boolean) => Promise<any>;
+  clearPinProtectedKey: () => Promise<any>;
+  clearKeys: (userId?: string) => Promise<any>;
+  toggleKey: () => Promise<any>;
+  makeKey: (
+    password: string,
+    salt: string,
+    kdf: KdfType,
+    kdfIterations: number
+  ) => Promise<SymmetricCryptoKey>;
+  makeKeyFromPin: (
+    pin: string,
+    salt: string,
+    kdf: KdfType,
+    kdfIterations: number,
+    protectedKeyCs?: EncString
+  ) => Promise<SymmetricCryptoKey>;
+  makeShareKey: () => Promise<[EncString, SymmetricCryptoKey]>;
+  makeKeyPair: (key?: SymmetricCryptoKey) => Promise<[string, EncString]>;
+  makePinKey: (
+    pin: string,
+    salt: string,
+    kdf: KdfType,
+    kdfIterations: number
+  ) => Promise<SymmetricCryptoKey>;
+  makeSendKey: (keyMaterial: ArrayBuffer) => Promise<SymmetricCryptoKey>;
+  hashPassword: (
+    password: string,
+    key: SymmetricCryptoKey,
+    hashPurpose?: HashPurpose
+  ) => Promise<string>;
+  makeEncKey: (key: SymmetricCryptoKey) => Promise<[SymmetricCryptoKey, EncString]>;
+  remakeEncKey: (
+    key: SymmetricCryptoKey,
+    encKey?: SymmetricCryptoKey
+  ) => Promise<[SymmetricCryptoKey, EncString]>;
+  encrypt: (plainValue: string | ArrayBuffer, key?: SymmetricCryptoKey) => Promise<EncString>;
+  encryptToBytes: (plainValue: ArrayBuffer, key?: SymmetricCryptoKey) => Promise<EncArrayBuffer>;
+  rsaEncrypt: (data: ArrayBuffer, publicKey?: ArrayBuffer) => Promise<EncString>;
+  rsaDecrypt: (encValue: string, privateKeyValue?: ArrayBuffer) => Promise<ArrayBuffer>;
+  decryptToBytes: (encString: EncString, key?: SymmetricCryptoKey) => Promise<ArrayBuffer>;
+  decryptToUtf8: (encString: EncString, key?: SymmetricCryptoKey) => Promise<string>;
+  decryptFromBytes: (encBuf: ArrayBuffer, key: SymmetricCryptoKey) => Promise<ArrayBuffer>;
+  randomNumber: (min: number, max: number) => Promise<number>;
+  validateKey: (key: SymmetricCryptoKey) => Promise<boolean>;
 }
diff --git a/jslib/common/src/abstractions/cryptoFunction.service.ts b/jslib/common/src/abstractions/cryptoFunction.service.ts
index 7573050c..21ed33cb 100644
--- a/jslib/common/src/abstractions/cryptoFunction.service.ts
+++ b/jslib/common/src/abstractions/cryptoFunction.service.ts
@@ -1,27 +1,62 @@
-import { DecryptParameters } from '../models/domain/decryptParameters';
-import { SymmetricCryptoKey } from '../models/domain/symmetricCryptoKey';
+import { DecryptParameters } from "../models/domain/decryptParameters";
+import { SymmetricCryptoKey } from "../models/domain/symmetricCryptoKey";
 
 export abstract class CryptoFunctionService {
-    pbkdf2: (password: string | ArrayBuffer, salt: string | ArrayBuffer, algorithm: 'sha256' | 'sha512',
-        iterations: number) => Promise<ArrayBuffer>;
-    hkdf: (ikm: ArrayBuffer, salt: string | ArrayBuffer, info: string | ArrayBuffer,
-        outputByteSize: number, algorithm: 'sha256' | 'sha512') => Promise<ArrayBuffer>;
-    hkdfExpand: (prk: ArrayBuffer, info: string | ArrayBuffer, outputByteSize: number,
-        algorithm: 'sha256' | 'sha512') => Promise<ArrayBuffer>;
-    hash: (value: string | ArrayBuffer, algorithm: 'sha1' | 'sha256' | 'sha512' | 'md5') => Promise<ArrayBuffer>;
-    hmac: (value: ArrayBuffer, key: ArrayBuffer, algorithm: 'sha1' | 'sha256' | 'sha512') => Promise<ArrayBuffer>;
-    compare: (a: ArrayBuffer, b: ArrayBuffer) => Promise<boolean>;
-    hmacFast: (value: ArrayBuffer | string, key: ArrayBuffer | string, algorithm: 'sha1' | 'sha256' | 'sha512') =>
-        Promise<ArrayBuffer | string>;
-    compareFast: (a: ArrayBuffer | string, b: ArrayBuffer | string) => Promise<boolean>;
-    aesEncrypt: (data: ArrayBuffer, iv: ArrayBuffer, key: ArrayBuffer) => Promise<ArrayBuffer>;
-    aesDecryptFastParameters: (data: string, iv: string, mac: string, key: SymmetricCryptoKey) =>
-        DecryptParameters<ArrayBuffer | string>;
-    aesDecryptFast: (parameters: DecryptParameters<ArrayBuffer | string>) => Promise<string>;
-    aesDecrypt: (data: ArrayBuffer, iv: ArrayBuffer, key: ArrayBuffer) => Promise<ArrayBuffer>;
-    rsaEncrypt: (data: ArrayBuffer, publicKey: ArrayBuffer, algorithm: 'sha1' | 'sha256') => Promise<ArrayBuffer>;
-    rsaDecrypt: (data: ArrayBuffer, privateKey: ArrayBuffer, algorithm: 'sha1' | 'sha256') => Promise<ArrayBuffer>;
-    rsaExtractPublicKey: (privateKey: ArrayBuffer) => Promise<ArrayBuffer>;
-    rsaGenerateKeyPair: (length: 1024 | 2048 | 4096) => Promise<[ArrayBuffer, ArrayBuffer]>;
-    randomBytes: (length: number) => Promise<ArrayBuffer>;
+  pbkdf2: (
+    password: string | ArrayBuffer,
+    salt: string | ArrayBuffer,
+    algorithm: "sha256" | "sha512",
+    iterations: number
+  ) => Promise<ArrayBuffer>;
+  hkdf: (
+    ikm: ArrayBuffer,
+    salt: string | ArrayBuffer,
+    info: string | ArrayBuffer,
+    outputByteSize: number,
+    algorithm: "sha256" | "sha512"
+  ) => Promise<ArrayBuffer>;
+  hkdfExpand: (
+    prk: ArrayBuffer,
+    info: string | ArrayBuffer,
+    outputByteSize: number,
+    algorithm: "sha256" | "sha512"
+  ) => Promise<ArrayBuffer>;
+  hash: (
+    value: string | ArrayBuffer,
+    algorithm: "sha1" | "sha256" | "sha512" | "md5"
+  ) => Promise<ArrayBuffer>;
+  hmac: (
+    value: ArrayBuffer,
+    key: ArrayBuffer,
+    algorithm: "sha1" | "sha256" | "sha512"
+  ) => Promise<ArrayBuffer>;
+  compare: (a: ArrayBuffer, b: ArrayBuffer) => Promise<boolean>;
+  hmacFast: (
+    value: ArrayBuffer | string,
+    key: ArrayBuffer | string,
+    algorithm: "sha1" | "sha256" | "sha512"
+  ) => Promise<ArrayBuffer | string>;
+  compareFast: (a: ArrayBuffer | string, b: ArrayBuffer | string) => Promise<boolean>;
+  aesEncrypt: (data: ArrayBuffer, iv: ArrayBuffer, key: ArrayBuffer) => Promise<ArrayBuffer>;
+  aesDecryptFastParameters: (
+    data: string,
+    iv: string,
+    mac: string,
+    key: SymmetricCryptoKey
+  ) => DecryptParameters<ArrayBuffer | string>;
+  aesDecryptFast: (parameters: DecryptParameters<ArrayBuffer | string>) => Promise<string>;
+  aesDecrypt: (data: ArrayBuffer, iv: ArrayBuffer, key: ArrayBuffer) => Promise<ArrayBuffer>;
+  rsaEncrypt: (
+    data: ArrayBuffer,
+    publicKey: ArrayBuffer,
+    algorithm: "sha1" | "sha256"
+  ) => Promise<ArrayBuffer>;
+  rsaDecrypt: (
+    data: ArrayBuffer,
+    privateKey: ArrayBuffer,
+    algorithm: "sha1" | "sha256"
+  ) => Promise<ArrayBuffer>;
+  rsaExtractPublicKey: (privateKey: ArrayBuffer) => Promise<ArrayBuffer>;
+  rsaGenerateKeyPair: (length: 1024 | 2048 | 4096) => Promise<[ArrayBuffer, ArrayBuffer]>;
+  randomBytes: (length: number) => Promise<ArrayBuffer>;
 }
diff --git a/jslib/common/src/abstractions/environment.service.ts b/jslib/common/src/abstractions/environment.service.ts
index db335016..8398b4c6 100644
--- a/jslib/common/src/abstractions/environment.service.ts
+++ b/jslib/common/src/abstractions/environment.service.ts
@@ -1,34 +1,34 @@
-import { Observable } from 'rxjs';
+import { Observable } from "rxjs";
 
 export type Urls = {
-    base?: string;
-    webVault?: string;
-    api?: string;
-    identity?: string;
-    icons?: string;
-    notifications?: string;
-    events?: string;
-    keyConnector?: string;
+  base?: string;
+  webVault?: string;
+  api?: string;
+  identity?: string;
+  icons?: string;
+  notifications?: string;
+  events?: string;
+  keyConnector?: string;
 };
 
 export type PayPalConfig = {
-    businessId?: string;
-    buttonAction?: string;
+  businessId?: string;
+  buttonAction?: string;
 };
 
 export abstract class EnvironmentService {
-    urls: Observable<Urls>;
+  urls: Observable<Urls>;
 
-    hasBaseUrl: () => boolean;
-    getNotificationsUrl: () => string;
-    getWebVaultUrl: () => string;
-    getSendUrl: () => string;
-    getIconsUrl: () => string;
-    getApiUrl: () => string;
-    getIdentityUrl: () => string;
-    getEventsUrl: () => string;
-    getKeyConnectorUrl: () => string;
-    setUrlsFromStorage: () => Promise<void>;
-    setUrls: (urls: any, saveSettings?: boolean) => Promise<Urls>;
-    getUrls: () => Urls;
+  hasBaseUrl: () => boolean;
+  getNotificationsUrl: () => string;
+  getWebVaultUrl: () => string;
+  getSendUrl: () => string;
+  getIconsUrl: () => string;
+  getApiUrl: () => string;
+  getIdentityUrl: () => string;
+  getEventsUrl: () => string;
+  getKeyConnectorUrl: () => string;
+  setUrlsFromStorage: () => Promise<void>;
+  setUrls: (urls: Urls) => Promise<Urls>;
+  getUrls: () => Urls;
 }
diff --git a/jslib/common/src/abstractions/event.service.ts b/jslib/common/src/abstractions/event.service.ts
index 40c08027..2f7660fb 100644
--- a/jslib/common/src/abstractions/event.service.ts
+++ b/jslib/common/src/abstractions/event.service.ts
@@ -1,7 +1,7 @@
-import { EventType } from '../enums/eventType';
+import { EventType } from "../enums/eventType";
 
 export abstract class EventService {
-    collect: (eventType: EventType, cipherId?: string, uploadImmediately?: boolean) => Promise<any>;
-    uploadEvents: () => Promise<any>;
-    clearEvents: () => Promise<any>;
+  collect: (eventType: EventType, cipherId?: string, uploadImmediately?: boolean) => Promise<any>;
+  uploadEvents: (userId?: string) => Promise<any>;
+  clearEvents: (userId?: string) => Promise<any>;
 }
diff --git a/jslib/common/src/abstractions/export.service.ts b/jslib/common/src/abstractions/export.service.ts
index 4e23823a..fa0b63ff 100644
--- a/jslib/common/src/abstractions/export.service.ts
+++ b/jslib/common/src/abstractions/export.service.ts
@@ -1,8 +1,11 @@
-import { EventView } from '../models/view/eventView';
+import { EventView } from "../models/view/eventView";
 
 export abstract class ExportService {
-    getExport: (format?: 'csv' | 'json' | 'encrypted_json') => Promise<string>;
-    getOrganizationExport: (organizationId: string, format?: 'csv' | 'json' | 'encrypted_json') => Promise<string>;
-    getEventExport: (events: EventView[]) => Promise<string>;
-    getFileName: (prefix?: string, extension?: string) => string;
+  getExport: (format?: "csv" | "json" | "encrypted_json") => Promise<string>;
+  getOrganizationExport: (
+    organizationId: string,
+    format?: "csv" | "json" | "encrypted_json"
+  ) => Promise<string>;
+  getEventExport: (events: EventView[]) => Promise<string>;
+  getFileName: (prefix?: string, extension?: string) => string;
 }
diff --git a/jslib/common/src/abstractions/fileUpload.service.ts b/jslib/common/src/abstractions/fileUpload.service.ts
index b24ed9f0..fcd3c22c 100644
--- a/jslib/common/src/abstractions/fileUpload.service.ts
+++ b/jslib/common/src/abstractions/fileUpload.service.ts
@@ -1,11 +1,18 @@
-import { EncArrayBuffer } from '../models/domain/encArrayBuffer';
-import { EncString } from '../models/domain/encString';
-import { AttachmentUploadDataResponse } from '../models/response/attachmentUploadDataResponse';
-import { SendFileUploadDataResponse } from '../models/response/sendFileUploadDataResponse';
+import { EncArrayBuffer } from "../models/domain/encArrayBuffer";
+import { EncString } from "../models/domain/encString";
+import { AttachmentUploadDataResponse } from "../models/response/attachmentUploadDataResponse";
+import { SendFileUploadDataResponse } from "../models/response/sendFileUploadDataResponse";
 
 export abstract class FileUploadService {
-    uploadSendFile: (uploadData: SendFileUploadDataResponse, fileName: EncString,
-        encryptedFileData: EncArrayBuffer) => Promise<any>;
-    uploadCipherAttachment: (admin: boolean, uploadData: AttachmentUploadDataResponse, fileName: EncString,
-        encryptedFileData: EncArrayBuffer) => Promise<any>;
+  uploadSendFile: (
+    uploadData: SendFileUploadDataResponse,
+    fileName: EncString,
+    encryptedFileData: EncArrayBuffer
+  ) => Promise<any>;
+  uploadCipherAttachment: (
+    admin: boolean,
+    uploadData: AttachmentUploadDataResponse,
+    fileName: EncString,
+    encryptedFileData: EncArrayBuffer
+  ) => Promise<any>;
 }
diff --git a/jslib/common/src/abstractions/folder.service.ts b/jslib/common/src/abstractions/folder.service.ts
index f1997ffe..139525e0 100644
--- a/jslib/common/src/abstractions/folder.service.ts
+++ b/jslib/common/src/abstractions/folder.service.ts
@@ -1,25 +1,23 @@
-import { FolderData } from '../models/data/folderData';
+import { FolderData } from "../models/data/folderData";
 
-import { Folder } from '../models/domain/folder';
-import { SymmetricCryptoKey } from '../models/domain/symmetricCryptoKey';
-import { TreeNode } from '../models/domain/treeNode';
+import { Folder } from "../models/domain/folder";
+import { SymmetricCryptoKey } from "../models/domain/symmetricCryptoKey";
+import { TreeNode } from "../models/domain/treeNode";
 
-import { FolderView } from '../models/view/folderView';
+import { FolderView } from "../models/view/folderView";
 
 export abstract class FolderService {
-    decryptedFolderCache: FolderView[];
-
-    clearCache: () => void;
-    encrypt: (model: FolderView, key?: SymmetricCryptoKey) => Promise<Folder>;
-    get: (id: string) => Promise<Folder>;
-    getAll: () => Promise<Folder[]>;
-    getAllDecrypted: () => Promise<FolderView[]>;
-    getAllNested: () => Promise<TreeNode<FolderView>[]>;
-    getNested: (id: string) => Promise<TreeNode<FolderView>>;
-    saveWithServer: (folder: Folder) => Promise<any>;
-    upsert: (folder: FolderData | FolderData[]) => Promise<any>;
-    replace: (folders: { [id: string]: FolderData; }) => Promise<any>;
-    clear: (userId: string) => Promise<any>;
-    delete: (id: string | string[]) => Promise<any>;
-    deleteWithServer: (id: string) => Promise<any>;
+  clearCache: (userId?: string) => Promise<void>;
+  encrypt: (model: FolderView, key?: SymmetricCryptoKey) => Promise<Folder>;
+  get: (id: string) => Promise<Folder>;
+  getAll: () => Promise<Folder[]>;
+  getAllDecrypted: () => Promise<FolderView[]>;
+  getAllNested: () => Promise<TreeNode<FolderView>[]>;
+  getNested: (id: string) => Promise<TreeNode<FolderView>>;
+  saveWithServer: (folder: Folder) => Promise<any>;
+  upsert: (folder: FolderData | FolderData[]) => Promise<any>;
+  replace: (folders: { [id: string]: FolderData }) => Promise<any>;
+  clear: (userId: string) => Promise<any>;
+  delete: (id: string | string[]) => Promise<any>;
+  deleteWithServer: (id: string) => Promise<any>;
 }
diff --git a/jslib/common/src/abstractions/i18n.service.ts b/jslib/common/src/abstractions/i18n.service.ts
index d53494dd..4706e0d1 100644
--- a/jslib/common/src/abstractions/i18n.service.ts
+++ b/jslib/common/src/abstractions/i18n.service.ts
@@ -1,9 +1,9 @@
 export abstract class I18nService {
-    locale: string;
-    supportedTranslationLocales: string[];
-    translationLocale: string;
-    collator: Intl.Collator;
-    localeNames: Map<string, string>;
-    t: (id: string, p1?: string, p2?: string, p3?: string) => string;
-    translate: (id: string, p1?: string, p2?: string, p3?: string) => string;
+  locale: string;
+  supportedTranslationLocales: string[];
+  translationLocale: string;
+  collator: Intl.Collator;
+  localeNames: Map<string, string>;
+  t: (id: string, p1?: string, p2?: string, p3?: string) => string;
+  translate: (id: string, p1?: string, p2?: string, p3?: string) => string;
 }
diff --git a/jslib/common/src/abstractions/import.service.ts b/jslib/common/src/abstractions/import.service.ts
index 8115c2c0..e9c92a18 100644
--- a/jslib/common/src/abstractions/import.service.ts
+++ b/jslib/common/src/abstractions/import.service.ts
@@ -1,13 +1,13 @@
-import { Importer } from '../importers/importer';
+import { Importer } from "../importers/importer";
 
 export interface ImportOption {
-    id: string;
-    name: string;
+  id: string;
+  name: string;
 }
 export abstract class ImportService {
-    featuredImportOptions: ImportOption[];
-    regularImportOptions: ImportOption[];
-    getImportOptions: () => ImportOption[];
-    import: (importer: Importer, fileContents: string, organizationId?: string) => Promise<Error>;
-    getImporter: (format: string, organizationId: string) => Importer;
+  featuredImportOptions: ImportOption[];
+  regularImportOptions: ImportOption[];
+  getImportOptions: () => ImportOption[];
+  import: (importer: Importer, fileContents: string, organizationId?: string) => Promise<Error>;
+  getImporter: (format: string, organizationId: string) => Importer;
 }
diff --git a/jslib/common/src/abstractions/keyConnector.service.ts b/jslib/common/src/abstractions/keyConnector.service.ts
index a4fbbf5a..ca57bbf6 100644
--- a/jslib/common/src/abstractions/keyConnector.service.ts
+++ b/jslib/common/src/abstractions/keyConnector.service.ts
@@ -1,14 +1,14 @@
-import { Organization } from '../models/domain/organization';
+import { Organization } from "../models/domain/organization";
 
 export abstract class KeyConnectorService {
-    getAndSetKey: (url?: string) => Promise<void>;
-    getManagingOrganization: () => Promise<Organization>;
-    getUsesKeyConnector: () => Promise<boolean>;
-    migrateUser: () => Promise<void>;
-    userNeedsMigration: () => Promise<boolean>;
-    setUsesKeyConnector: (enabled: boolean) => Promise<void>;
-    setConvertAccountRequired: (status: boolean) => Promise<void>;
-    getConvertAccountRequired: () => Promise<boolean>;
-    removeConvertAccountRequired: () => Promise<void>;
-    clear: () => Promise<void>;
+  getAndSetKey: (url?: string) => Promise<void>;
+  getManagingOrganization: () => Promise<Organization>;
+  getUsesKeyConnector: () => Promise<boolean>;
+  migrateUser: () => Promise<void>;
+  userNeedsMigration: () => Promise<boolean>;
+  setUsesKeyConnector: (enabled: boolean) => Promise<void>;
+  setConvertAccountRequired: (status: boolean) => Promise<void>;
+  getConvertAccountRequired: () => Promise<boolean>;
+  removeConvertAccountRequired: () => Promise<void>;
+  clear: () => Promise<void>;
 }
diff --git a/jslib/common/src/abstractions/log.service.ts b/jslib/common/src/abstractions/log.service.ts
index a46284dd..9997e480 100644
--- a/jslib/common/src/abstractions/log.service.ts
+++ b/jslib/common/src/abstractions/log.service.ts
@@ -1,11 +1,11 @@
-import { LogLevelType } from '../enums/logLevelType';
+import { LogLevelType } from "../enums/logLevelType";
 
 export abstract class LogService {
-    debug: (message: string) => void;
-    info: (message: string) => void;
-    warning: (message: string) => void;
-    error: (message: string) => void;
-    write: (level: LogLevelType, message: string) => void;
-    time: (label: string) => void;
-    timeEnd: (label: string) => [number, number];
+  debug: (message: string) => void;
+  info: (message: string) => void;
+  warning: (message: string) => void;
+  error: (message: string) => void;
+  write: (level: LogLevelType, message: string) => void;
+  time: (label: string) => void;
+  timeEnd: (label: string) => [number, number];
 }
diff --git a/jslib/common/src/abstractions/messaging.service.ts b/jslib/common/src/abstractions/messaging.service.ts
index a38b4c7f..7c5f05f9 100644
--- a/jslib/common/src/abstractions/messaging.service.ts
+++ b/jslib/common/src/abstractions/messaging.service.ts
@@ -1,3 +1,3 @@
 export abstract class MessagingService {
-    send: (subscriber: string, arg?: any) => void;
+  send: (subscriber: string, arg?: any) => void;
 }
diff --git a/jslib/common/src/abstractions/notifications.service.ts b/jslib/common/src/abstractions/notifications.service.ts
index 3e4c06e4..921e8e62 100644
--- a/jslib/common/src/abstractions/notifications.service.ts
+++ b/jslib/common/src/abstractions/notifications.service.ts
@@ -1,6 +1,6 @@
 export abstract class NotificationsService {
-    init: () => Promise<void>;
-    updateConnection: (sync?: boolean) => Promise<void>;
-    reconnectFromActivity: () => Promise<void>;
-    disconnectFromInactivity: () => Promise<void>;
+  init: () => Promise<void>;
+  updateConnection: (sync?: boolean) => Promise<void>;
+  reconnectFromActivity: () => Promise<void>;
+  disconnectFromInactivity: () => Promise<void>;
 }
diff --git a/jslib/common/src/abstractions/organization.service.ts b/jslib/common/src/abstractions/organization.service.ts
new file mode 100644
index 00000000..a878335d
--- /dev/null
+++ b/jslib/common/src/abstractions/organization.service.ts
@@ -0,0 +1,11 @@
+import { OrganizationData } from "../models/data/organizationData";
+
+import { Organization } from "../models/domain/organization";
+
+export abstract class OrganizationService {
+  get: (id: string) => Promise<Organization>;
+  getByIdentifier: (identifier: string) => Promise<Organization>;
+  getAll: (userId?: string) => Promise<Organization[]>;
+  save: (orgs: { [id: string]: OrganizationData }) => Promise<any>;
+  canManageSponsorships: () => Promise<boolean>;
+}
diff --git a/jslib/common/src/abstractions/passwordGeneration.service.ts b/jslib/common/src/abstractions/passwordGeneration.service.ts
index 52d18dde..82bc021f 100644
--- a/jslib/common/src/abstractions/passwordGeneration.service.ts
+++ b/jslib/common/src/abstractions/passwordGeneration.service.ts
@@ -1,18 +1,20 @@
-import * as zxcvbn from 'zxcvbn';
+import * as zxcvbn from "zxcvbn";
 
-import { GeneratedPasswordHistory } from '../models/domain/generatedPasswordHistory';
-import { PasswordGeneratorPolicyOptions } from '../models/domain/passwordGeneratorPolicyOptions';
+import { GeneratedPasswordHistory } from "../models/domain/generatedPasswordHistory";
+import { PasswordGeneratorPolicyOptions } from "../models/domain/passwordGeneratorPolicyOptions";
 
 export abstract class PasswordGenerationService {
-    generatePassword: (options: any) => Promise<string>;
-    generatePassphrase: (options: any) => Promise<string>;
-    getOptions: () => Promise<[any, PasswordGeneratorPolicyOptions]>;
-    enforcePasswordGeneratorPoliciesOnOptions: (options: any) => Promise<[any, PasswordGeneratorPolicyOptions]>;
-    getPasswordGeneratorPolicyOptions: () => Promise<PasswordGeneratorPolicyOptions>;
-    saveOptions: (options: any) => Promise<any>;
-    getHistory: () => Promise<GeneratedPasswordHistory[]>;
-    addHistory: (password: string) => Promise<any>;
-    clear: () => Promise<any>;
-    passwordStrength: (password: string, userInputs?: string[]) => zxcvbn.ZXCVBNResult;
-    normalizeOptions: (options: any, enforcedPolicyOptions: PasswordGeneratorPolicyOptions) => void;
+  generatePassword: (options: any) => Promise<string>;
+  generatePassphrase: (options: any) => Promise<string>;
+  getOptions: () => Promise<[any, PasswordGeneratorPolicyOptions]>;
+  enforcePasswordGeneratorPoliciesOnOptions: (
+    options: any
+  ) => Promise<[any, PasswordGeneratorPolicyOptions]>;
+  getPasswordGeneratorPolicyOptions: () => Promise<PasswordGeneratorPolicyOptions>;
+  saveOptions: (options: any) => Promise<any>;
+  getHistory: () => Promise<GeneratedPasswordHistory[]>;
+  addHistory: (password: string) => Promise<any>;
+  clear: (userId?: string) => Promise<any>;
+  passwordStrength: (password: string, userInputs?: string[]) => zxcvbn.ZXCVBNResult;
+  normalizeOptions: (options: any, enforcedPolicyOptions: PasswordGeneratorPolicyOptions) => void;
 }
diff --git a/jslib/common/src/abstractions/passwordReprompt.service.ts b/jslib/common/src/abstractions/passwordReprompt.service.ts
index 84ca84f5..6253425b 100644
--- a/jslib/common/src/abstractions/passwordReprompt.service.ts
+++ b/jslib/common/src/abstractions/passwordReprompt.service.ts
@@ -1,5 +1,5 @@
 export abstract class PasswordRepromptService {
-    protectedFields: () => string[];
-    showPasswordPrompt: () => Promise<boolean>;
-    enabled: () => Promise<boolean>;
+  protectedFields: () => string[];
+  showPasswordPrompt: () => Promise<boolean>;
+  enabled: () => Promise<boolean>;
 }
diff --git a/jslib/common/src/abstractions/platformUtils.service.ts b/jslib/common/src/abstractions/platformUtils.service.ts
index 7f792e61..f5a6203d 100644
--- a/jslib/common/src/abstractions/platformUtils.service.ts
+++ b/jslib/common/src/abstractions/platformUtils.service.ts
@@ -1,36 +1,52 @@
-import { DeviceType } from '../enums/deviceType';
-import { ThemeType } from '../enums/themeType';
+import { DeviceType } from "../enums/deviceType";
+import { ThemeType } from "../enums/themeType";
+
+interface ToastOptions {
+  timeout?: number;
+}
 
 export abstract class PlatformUtilsService {
-    identityClientId: string;
-    getDevice: () => DeviceType;
-    getDeviceString: () => string;
-    isFirefox: () => boolean;
-    isChrome: () => boolean;
-    isEdge: () => boolean;
-    isOpera: () => boolean;
-    isVivaldi: () => boolean;
-    isSafari: () => boolean;
-    isIE: () => boolean;
-    isMacAppStore: () => boolean;
-    isViewOpen: () => Promise<boolean>;
-    launchUri: (uri: string, options?: any) => void;
-    saveFile: (win: Window, blobData: any, blobOptions: any, fileName: string) => void;
-    getApplicationVersion: () => Promise<string>;
-    supportsWebAuthn: (win: Window) => boolean;
-    supportsDuo: () => boolean;
-    showToast: (type: 'error' | 'success' | 'warning' | 'info', title: string, text: string | string[],
-        options?: any) => void;
-    showDialog: (body: string, title?: string, confirmText?: string, cancelText?: string,
-        type?: string, bodyIsHtml?: boolean) => Promise<boolean>;
-    isDev: () => boolean;
-    isSelfHost: () => boolean;
-    copyToClipboard: (text: string, options?: any) => void | boolean;
-    readFromClipboard: (options?: any) => Promise<string>;
-    supportsBiometric: () => Promise<boolean>;
-    authenticateBiometric: () => Promise<boolean>;
-    getDefaultSystemTheme: () => Promise<ThemeType.Light | ThemeType.Dark>;
-    onDefaultSystemThemeChange: (callback: ((theme: ThemeType.Light | ThemeType.Dark) => unknown)) => unknown;
-    getEffectiveTheme: () => Promise<ThemeType>;
-    supportsSecureStorage: () => boolean;
+  identityClientId: string;
+  getDevice: () => DeviceType;
+  getDeviceString: () => string;
+  isFirefox: () => boolean;
+  isChrome: () => boolean;
+  isEdge: () => boolean;
+  isOpera: () => boolean;
+  isVivaldi: () => boolean;
+  isSafari: () => boolean;
+  isIE: () => boolean;
+  isMacAppStore: () => boolean;
+  isViewOpen: () => Promise<boolean>;
+  launchUri: (uri: string, options?: any) => void;
+  saveFile: (win: Window, blobData: any, blobOptions: any, fileName: string) => void;
+  getApplicationVersion: () => Promise<string>;
+  supportsWebAuthn: (win: Window) => boolean;
+  supportsDuo: () => boolean;
+  showToast: (
+    type: "error" | "success" | "warning" | "info",
+    title: string,
+    text: string | string[],
+    options?: ToastOptions
+  ) => void;
+  showDialog: (
+    body: string,
+    title?: string,
+    confirmText?: string,
+    cancelText?: string,
+    type?: string,
+    bodyIsHtml?: boolean
+  ) => Promise<boolean>;
+  isDev: () => boolean;
+  isSelfHost: () => boolean;
+  copyToClipboard: (text: string, options?: any) => void | boolean;
+  readFromClipboard: (options?: any) => Promise<string>;
+  supportsBiometric: () => Promise<boolean>;
+  authenticateBiometric: () => Promise<boolean>;
+  getDefaultSystemTheme: () => Promise<ThemeType.Light | ThemeType.Dark>;
+  onDefaultSystemThemeChange: (
+    callback: (theme: ThemeType.Light | ThemeType.Dark) => unknown
+  ) => unknown;
+  getEffectiveTheme: () => Promise<ThemeType>;
+  supportsSecureStorage: () => boolean;
 }
diff --git a/jslib/common/src/abstractions/policy.service.ts b/jslib/common/src/abstractions/policy.service.ts
index 6acc8253..f1f6b4e5 100644
--- a/jslib/common/src/abstractions/policy.service.ts
+++ b/jslib/common/src/abstractions/policy.service.ts
@@ -1,26 +1,35 @@
-import { PolicyData } from '../models/data/policyData';
+import { PolicyData } from "../models/data/policyData";
 
-import { MasterPasswordPolicyOptions } from '../models/domain/masterPasswordPolicyOptions';
-import { Policy } from '../models/domain/policy';
-import { ResetPasswordPolicyOptions } from '../models/domain/resetPasswordPolicyOptions';
+import { MasterPasswordPolicyOptions } from "../models/domain/masterPasswordPolicyOptions";
+import { Policy } from "../models/domain/policy";
+import { ResetPasswordPolicyOptions } from "../models/domain/resetPasswordPolicyOptions";
 
-import { ListResponse } from '../models/response/listResponse';
-import { PolicyResponse } from '../models/response/policyResponse';
+import { ListResponse } from "../models/response/listResponse";
+import { PolicyResponse } from "../models/response/policyResponse";
 
-import { PolicyType } from '../enums/policyType';
+import { PolicyType } from "../enums/policyType";
 
 export abstract class PolicyService {
-    policyCache: Policy[];
-
-    clearCache: () => void;
-    getAll: (type?: PolicyType) => Promise<Policy[]>;
-    getPolicyForOrganization: (policyType: PolicyType, organizationId: string) => Promise<Policy>;
-    replace: (policies: { [id: string]: PolicyData; }) => Promise<any>;
-    clear: (userId: string) => Promise<any>;
-    getMasterPasswordPolicyOptions: (policies?: Policy[]) => Promise<MasterPasswordPolicyOptions>;
-    evaluateMasterPassword: (passwordStrength: number, newPassword: string,
-        enforcedPolicyOptions?: MasterPasswordPolicyOptions) => boolean;
-    getResetPasswordPolicyOptions: (policies: Policy[], orgId: string) => [ResetPasswordPolicyOptions, boolean];
-    mapPoliciesFromToken: (policiesResponse: ListResponse<PolicyResponse>) => Policy[];
-    policyAppliesToUser: (policyType: PolicyType, policyFilter?: (policy: Policy) => boolean) => Promise<boolean>;
+  clearCache: () => void;
+  getAll: (type?: PolicyType, userId?: string) => Promise<Policy[]>;
+  getPolicyForOrganization: (policyType: PolicyType, organizationId: string) => Promise<Policy>;
+  replace: (policies: { [id: string]: PolicyData }) => Promise<any>;
+  clear: (userId?: string) => Promise<any>;
+  getMasterPasswordPoliciesForInvitedUsers: (orgId: string) => Promise<MasterPasswordPolicyOptions>;
+  getMasterPasswordPolicyOptions: (policies?: Policy[]) => Promise<MasterPasswordPolicyOptions>;
+  evaluateMasterPassword: (
+    passwordStrength: number,
+    newPassword: string,
+    enforcedPolicyOptions?: MasterPasswordPolicyOptions
+  ) => boolean;
+  getResetPasswordPolicyOptions: (
+    policies: Policy[],
+    orgId: string
+  ) => [ResetPasswordPolicyOptions, boolean];
+  mapPoliciesFromToken: (policiesResponse: ListResponse<PolicyResponse>) => Policy[];
+  policyAppliesToUser: (
+    policyType: PolicyType,
+    policyFilter?: (policy: Policy) => boolean,
+    userId?: string
+  ) => Promise<boolean>;
 }
diff --git a/jslib/common/src/abstractions/provider.service.ts b/jslib/common/src/abstractions/provider.service.ts
new file mode 100644
index 00000000..e3e86a1a
--- /dev/null
+++ b/jslib/common/src/abstractions/provider.service.ts
@@ -0,0 +1,9 @@
+import { ProviderData } from "../models/data/providerData";
+
+import { Provider } from "../models/domain/provider";
+
+export abstract class ProviderService {
+  get: (id: string) => Promise<Provider>;
+  getAll: () => Promise<Provider[]>;
+  save: (providers: { [id: string]: ProviderData }) => Promise<any>;
+}
diff --git a/jslib/common/src/abstractions/search.service.ts b/jslib/common/src/abstractions/search.service.ts
index d95bea41..9c2b0eeb 100644
--- a/jslib/common/src/abstractions/search.service.ts
+++ b/jslib/common/src/abstractions/search.service.ts
@@ -1,14 +1,16 @@
-import { CipherView } from '../models/view/cipherView';
-import { SendView } from '../models/view/sendView';
+import { CipherView } from "../models/view/cipherView";
+import { SendView } from "../models/view/sendView";
 
 export abstract class SearchService {
-    indexedEntityId?: string = null;
-    clearIndex: () => void;
-    isSearchable: (query: string) => boolean;
-    indexCiphers: (indexedEntityGuid?: string, ciphersToIndex?: CipherView[]) => Promise<void>;
-    searchCiphers: (query: string,
-        filter?: ((cipher: CipherView) => boolean) | (((cipher: CipherView) => boolean)[]),
-        ciphers?: CipherView[]) => Promise<CipherView[]>;
-    searchCiphersBasic: (ciphers: CipherView[], query: string, deleted?: boolean) => CipherView[];
-    searchSends: (sends: SendView[], query: string) => SendView[];
+  indexedEntityId?: string = null;
+  clearIndex: () => void;
+  isSearchable: (query: string) => boolean;
+  indexCiphers: (indexedEntityGuid?: string, ciphersToIndex?: CipherView[]) => Promise<void>;
+  searchCiphers: (
+    query: string,
+    filter?: ((cipher: CipherView) => boolean) | ((cipher: CipherView) => boolean)[],
+    ciphers?: CipherView[]
+  ) => Promise<CipherView[]>;
+  searchCiphersBasic: (ciphers: CipherView[], query: string, deleted?: boolean) => CipherView[];
+  searchSends: (sends: SendView[], query: string) => SendView[];
 }
diff --git a/jslib/common/src/abstractions/send.service.ts b/jslib/common/src/abstractions/send.service.ts
index f7ede223..37b806f2 100644
--- a/jslib/common/src/abstractions/send.service.ts
+++ b/jslib/common/src/abstractions/send.service.ts
@@ -1,24 +1,27 @@
-import { SendData } from '../models/data/sendData';
+import { SendData } from "../models/data/sendData";
 
-import { EncArrayBuffer } from '../models/domain/encArrayBuffer';
-import { Send } from '../models/domain/send';
-import { SymmetricCryptoKey } from '../models/domain/symmetricCryptoKey';
+import { EncArrayBuffer } from "../models/domain/encArrayBuffer";
+import { Send } from "../models/domain/send";
+import { SymmetricCryptoKey } from "../models/domain/symmetricCryptoKey";
 
-import { SendView } from '../models/view/sendView';
+import { SendView } from "../models/view/sendView";
 
 export abstract class SendService {
-    decryptedSendCache: SendView[];
-
-    clearCache: () => void;
-    encrypt: (model: SendView, file: File | ArrayBuffer, password: string, key?: SymmetricCryptoKey) => Promise<[Send, EncArrayBuffer]>;
-    get: (id: string) => Promise<Send>;
-    getAll: () => Promise<Send[]>;
-    getAllDecrypted: () => Promise<SendView[]>;
-    saveWithServer: (sendData: [Send, EncArrayBuffer]) => Promise<any>;
-    upsert: (send: SendData | SendData[]) => Promise<any>;
-    replace: (sends: { [id: string]: SendData; }) => Promise<any>;
-    clear: (userId: string) => Promise<any>;
-    delete: (id: string | string[]) => Promise<any>;
-    deleteWithServer: (id: string) => Promise<any>;
-    removePasswordWithServer: (id: string) => Promise<any>;
+  clearCache: () => Promise<void>;
+  encrypt: (
+    model: SendView,
+    file: File | ArrayBuffer,
+    password: string,
+    key?: SymmetricCryptoKey
+  ) => Promise<[Send, EncArrayBuffer]>;
+  get: (id: string) => Promise<Send>;
+  getAll: () => Promise<Send[]>;
+  getAllDecrypted: () => Promise<SendView[]>;
+  saveWithServer: (sendData: [Send, EncArrayBuffer]) => Promise<any>;
+  upsert: (send: SendData | SendData[]) => Promise<any>;
+  replace: (sends: { [id: string]: SendData }) => Promise<any>;
+  clear: (userId: string) => Promise<any>;
+  delete: (id: string | string[]) => Promise<any>;
+  deleteWithServer: (id: string) => Promise<any>;
+  removePasswordWithServer: (id: string) => Promise<any>;
 }
diff --git a/jslib/common/src/abstractions/settings.service.ts b/jslib/common/src/abstractions/settings.service.ts
index 6104c1d1..e7886585 100644
--- a/jslib/common/src/abstractions/settings.service.ts
+++ b/jslib/common/src/abstractions/settings.service.ts
@@ -1,6 +1,6 @@
 export abstract class SettingsService {
-    clearCache: () => void;
-    getEquivalentDomains: () => Promise<any>;
-    setEquivalentDomains: (equivalentDomains: string[][]) => Promise<any>;
-    clear: (userId: string) => Promise<void>;
+  clearCache: () => Promise<void>;
+  getEquivalentDomains: () => Promise<any>;
+  setEquivalentDomains: (equivalentDomains: string[][]) => Promise<any>;
+  clear: (userId?: string) => Promise<void>;
 }
diff --git a/jslib/common/src/abstractions/state.service.ts b/jslib/common/src/abstractions/state.service.ts
index 78658882..e4c38025 100644
--- a/jslib/common/src/abstractions/state.service.ts
+++ b/jslib/common/src/abstractions/state.service.ts
@@ -1,6 +1,306 @@
-export abstract class StateService {
-    get: <T>(key: string) => Promise<T>;
-    save: (key: string, obj: any) => Promise<any>;
-    remove: (key: string) => Promise<any>;
-    purge: () => Promise<any>;
+import { BehaviorSubject } from "rxjs";
+
+import { KdfType } from "../enums/kdfType";
+import { ThemeType } from "../enums/themeType";
+import { UriMatchType } from "../enums/uriMatchType";
+
+import { CipherData } from "../models/data/cipherData";
+import { CollectionData } from "../models/data/collectionData";
+import { EventData } from "../models/data/eventData";
+import { FolderData } from "../models/data/folderData";
+import { OrganizationData } from "../models/data/organizationData";
+import { PolicyData } from "../models/data/policyData";
+import { ProviderData } from "../models/data/providerData";
+import { SendData } from "../models/data/sendData";
+
+import { Account } from "../models/domain/account";
+import { EncString } from "../models/domain/encString";
+import { EnvironmentUrls } from "../models/domain/environmentUrls";
+import { GeneratedPasswordHistory } from "../models/domain/generatedPasswordHistory";
+import { Policy } from "../models/domain/policy";
+import { StorageOptions } from "../models/domain/storageOptions";
+import { SymmetricCryptoKey } from "../models/domain/symmetricCryptoKey";
+import { WindowState } from "../models/domain/windowState";
+
+import { CipherView } from "../models/view/cipherView";
+import { CollectionView } from "../models/view/collectionView";
+import { FolderView } from "../models/view/folderView";
+import { SendView } from "../models/view/sendView";
+
+export abstract class StateService<T extends Account = Account> {
+  accounts: BehaviorSubject<{ [userId: string]: T }>;
+  activeAccount: BehaviorSubject<string>;
+
+  addAccount: (account: T) => Promise<void>;
+  setActiveUser: (userId: string) => Promise<void>;
+  clean: (options?: StorageOptions) => Promise<void>;
+  init: () => Promise<void>;
+
+  getAccessToken: (options?: StorageOptions) => Promise<string>;
+  setAccessToken: (value: string, options?: StorageOptions) => Promise<void>;
+  getAddEditCipherInfo: (options?: StorageOptions) => Promise<any>;
+  setAddEditCipherInfo: (value: any, options?: StorageOptions) => Promise<void>;
+  getAlwaysShowDock: (options?: StorageOptions) => Promise<boolean>;
+  setAlwaysShowDock: (value: boolean, options?: StorageOptions) => Promise<void>;
+  getApiKeyClientId: (options?: StorageOptions) => Promise<string>;
+  setApiKeyClientId: (value: string, options?: StorageOptions) => Promise<void>;
+  getApiKeyClientSecret: (options?: StorageOptions) => Promise<string>;
+  setApiKeyClientSecret: (value: string, options?: StorageOptions) => Promise<void>;
+  getAutoConfirmFingerPrints: (options?: StorageOptions) => Promise<boolean>;
+  setAutoConfirmFingerprints: (value: boolean, options?: StorageOptions) => Promise<void>;
+  getAutoFillOnPageLoadDefault: (options?: StorageOptions) => Promise<boolean>;
+  setAutoFillOnPageLoadDefault: (value: boolean, options?: StorageOptions) => Promise<void>;
+  getBiometricAwaitingAcceptance: (options?: StorageOptions) => Promise<boolean>;
+  setBiometricAwaitingAcceptance: (value: boolean, options?: StorageOptions) => Promise<void>;
+  getBiometricFingerprintValidated: (options?: StorageOptions) => Promise<boolean>;
+  setBiometricFingerprintValidated: (value: boolean, options?: StorageOptions) => Promise<void>;
+  getBiometricLocked: (options?: StorageOptions) => Promise<boolean>;
+  setBiometricLocked: (value: boolean, options?: StorageOptions) => Promise<void>;
+  getBiometricText: (options?: StorageOptions) => Promise<string>;
+  setBiometricText: (value: string, options?: StorageOptions) => Promise<void>;
+  getBiometricUnlock: (options?: StorageOptions) => Promise<boolean>;
+  setBiometricUnlock: (value: boolean, options?: StorageOptions) => Promise<void>;
+  getCanAccessPremium: (options?: StorageOptions) => Promise<boolean>;
+  getClearClipboard: (options?: StorageOptions) => Promise<number>;
+  setClearClipboard: (value: number, options?: StorageOptions) => Promise<void>;
+  getCollapsedGroupings: (options?: StorageOptions) => Promise<Set<string>>;
+  setCollapsedGroupings: (value: Set<string>, options?: StorageOptions) => Promise<void>;
+  getConvertAccountToKeyConnector: (options?: StorageOptions) => Promise<boolean>;
+  setConvertAccountToKeyConnector: (value: boolean, options?: StorageOptions) => Promise<void>;
+  getCryptoMasterKey: (options?: StorageOptions) => Promise<SymmetricCryptoKey>;
+  setCryptoMasterKey: (value: SymmetricCryptoKey, options?: StorageOptions) => Promise<void>;
+  getCryptoMasterKeyAuto: (options?: StorageOptions) => Promise<string>;
+  setCryptoMasterKeyAuto: (value: string, options?: StorageOptions) => Promise<void>;
+  getCryptoMasterKeyB64: (options?: StorageOptions) => Promise<string>;
+  setCryptoMasterKeyB64: (value: string, options?: StorageOptions) => Promise<void>;
+  getCryptoMasterKeyBiometric: (options?: StorageOptions) => Promise<string>;
+  hasCryptoMasterKeyBiometric: (options?: StorageOptions) => Promise<boolean>;
+  setCryptoMasterKeyBiometric: (value: string, options?: StorageOptions) => Promise<void>;
+  getDecodedToken: (options?: StorageOptions) => Promise<any>;
+  setDecodedToken: (value: any, options?: StorageOptions) => Promise<void>;
+  getDecryptedCiphers: (options?: StorageOptions) => Promise<CipherView[]>;
+  setDecryptedCiphers: (value: CipherView[], options?: StorageOptions) => Promise<void>;
+  getDecryptedCollections: (options?: StorageOptions) => Promise<CollectionView[]>;
+  setDecryptedCollections: (value: CollectionView[], options?: StorageOptions) => Promise<void>;
+  getDecryptedCryptoSymmetricKey: (options?: StorageOptions) => Promise<SymmetricCryptoKey>;
+  setDecryptedCryptoSymmetricKey: (
+    value: SymmetricCryptoKey,
+    options?: StorageOptions
+  ) => Promise<void>;
+  getDecryptedFolders: (options?: StorageOptions) => Promise<FolderView[]>;
+  setDecryptedFolders: (value: FolderView[], options?: StorageOptions) => Promise<void>;
+  getDecryptedOrganizationKeys: (
+    options?: StorageOptions
+  ) => Promise<Map<string, SymmetricCryptoKey>>;
+  setDecryptedOrganizationKeys: (
+    value: Map<string, SymmetricCryptoKey>,
+    options?: StorageOptions
+  ) => Promise<void>;
+  getDecryptedPasswordGenerationHistory: (
+    options?: StorageOptions
+  ) => Promise<GeneratedPasswordHistory[]>;
+  setDecryptedPasswordGenerationHistory: (
+    value: GeneratedPasswordHistory[],
+    options?: StorageOptions
+  ) => Promise<void>;
+  getDecryptedPinProtected: (options?: StorageOptions) => Promise<EncString>;
+  setDecryptedPinProtected: (value: EncString, options?: StorageOptions) => Promise<void>;
+  getDecryptedPolicies: (options?: StorageOptions) => Promise<Policy[]>;
+  setDecryptedPolicies: (value: Policy[], options?: StorageOptions) => Promise<void>;
+  getDecryptedPrivateKey: (options?: StorageOptions) => Promise<ArrayBuffer>;
+  setDecryptedPrivateKey: (value: ArrayBuffer, options?: StorageOptions) => Promise<void>;
+  getDecryptedProviderKeys: (options?: StorageOptions) => Promise<Map<string, SymmetricCryptoKey>>;
+  setDecryptedProviderKeys: (
+    value: Map<string, SymmetricCryptoKey>,
+    options?: StorageOptions
+  ) => Promise<void>;
+  getDecryptedSends: (options?: StorageOptions) => Promise<SendView[]>;
+  setDecryptedSends: (value: SendView[], options?: StorageOptions) => Promise<void>;
+  getDefaultUriMatch: (options?: StorageOptions) => Promise<UriMatchType>;
+  setDefaultUriMatch: (value: UriMatchType, options?: StorageOptions) => Promise<void>;
+  getDisableAddLoginNotification: (options?: StorageOptions) => Promise<boolean>;
+  setDisableAddLoginNotification: (value: boolean, options?: StorageOptions) => Promise<void>;
+  getDisableAutoBiometricsPrompt: (options?: StorageOptions) => Promise<boolean>;
+  setDisableAutoBiometricsPrompt: (value: boolean, options?: StorageOptions) => Promise<void>;
+  getDisableAutoTotpCopy: (options?: StorageOptions) => Promise<boolean>;
+  setDisableAutoTotpCopy: (value: boolean, options?: StorageOptions) => Promise<void>;
+  getDisableBadgeCounter: (options?: StorageOptions) => Promise<boolean>;
+  setDisableBadgeCounter: (value: boolean, options?: StorageOptions) => Promise<void>;
+  getDisableChangedPasswordNotification: (options?: StorageOptions) => Promise<boolean>;
+  setDisableChangedPasswordNotification: (
+    value: boolean,
+    options?: StorageOptions
+  ) => Promise<void>;
+  getDisableContextMenuItem: (options?: StorageOptions) => Promise<boolean>;
+  setDisableContextMenuItem: (value: boolean, options?: StorageOptions) => Promise<void>;
+  getDisableFavicon: (options?: StorageOptions) => Promise<boolean>;
+  setDisableFavicon: (value: boolean, options?: StorageOptions) => Promise<void>;
+  getDisableGa: (options?: StorageOptions) => Promise<boolean>;
+  setDisableGa: (value: boolean, options?: StorageOptions) => Promise<void>;
+  getDontShowCardsCurrentTab: (options?: StorageOptions) => Promise<boolean>;
+  setDontShowCardsCurrentTab: (value: boolean, options?: StorageOptions) => Promise<void>;
+  getDontShowIdentitiesCurrentTab: (options?: StorageOptions) => Promise<boolean>;
+  setDontShowIdentitiesCurrentTab: (value: boolean, options?: StorageOptions) => Promise<void>;
+  getEmail: (options?: StorageOptions) => Promise<string>;
+  setEmail: (value: string, options?: StorageOptions) => Promise<void>;
+  getEmailVerified: (options?: StorageOptions) => Promise<boolean>;
+  setEmailVerified: (value: boolean, options?: StorageOptions) => Promise<void>;
+  getEnableAlwaysOnTop: (options?: StorageOptions) => Promise<boolean>;
+  setEnableAlwaysOnTop: (value: boolean, options?: StorageOptions) => Promise<void>;
+  getEnableAutoFillOnPageLoad: (options?: StorageOptions) => Promise<boolean>;
+  setEnableAutoFillOnPageLoad: (value: boolean, options?: StorageOptions) => Promise<void>;
+  getEnableBiometric: (options?: StorageOptions) => Promise<boolean>;
+  setEnableBiometric: (value: boolean, options?: StorageOptions) => Promise<void>;
+  getEnableBrowserIntegration: (options?: StorageOptions) => Promise<boolean>;
+  setEnableBrowserIntegration: (value: boolean, options?: StorageOptions) => Promise<void>;
+  getEnableBrowserIntegrationFingerprint: (options?: StorageOptions) => Promise<boolean>;
+  setEnableBrowserIntegrationFingerprint: (
+    value: boolean,
+    options?: StorageOptions
+  ) => Promise<void>;
+  getEnableCloseToTray: (options?: StorageOptions) => Promise<boolean>;
+  setEnableCloseToTray: (value: boolean, options?: StorageOptions) => Promise<void>;
+  getEnableFullWidth: (options?: StorageOptions) => Promise<boolean>;
+  setEnableFullWidth: (value: boolean, options?: StorageOptions) => Promise<void>;
+  getEnableGravitars: (options?: StorageOptions) => Promise<boolean>;
+  setEnableGravitars: (value: boolean, options?: StorageOptions) => Promise<void>;
+  getEnableMinimizeToTray: (options?: StorageOptions) => Promise<boolean>;
+  setEnableMinimizeToTray: (value: boolean, options?: StorageOptions) => Promise<void>;
+  getEnableStartToTray: (options?: StorageOptions) => Promise<boolean>;
+  setEnableStartToTray: (value: boolean, options?: StorageOptions) => Promise<void>;
+  getEnableTray: (options?: StorageOptions) => Promise<boolean>;
+  setEnableTray: (value: boolean, options?: StorageOptions) => Promise<void>;
+  getEncryptedCiphers: (options?: StorageOptions) => Promise<{ [id: string]: CipherData }>;
+  setEncryptedCiphers: (
+    value: { [id: string]: CipherData },
+    options?: StorageOptions
+  ) => Promise<void>;
+  getEncryptedCollections: (options?: StorageOptions) => Promise<{ [id: string]: CollectionData }>;
+  setEncryptedCollections: (
+    value: { [id: string]: CollectionData },
+    options?: StorageOptions
+  ) => Promise<void>;
+  getEncryptedCryptoSymmetricKey: (options?: StorageOptions) => Promise<string>;
+  setEncryptedCryptoSymmetricKey: (value: string, options?: StorageOptions) => Promise<void>;
+  getEncryptedFolders: (options?: StorageOptions) => Promise<{ [id: string]: FolderData }>;
+  setEncryptedFolders: (
+    value: { [id: string]: FolderData },
+    options?: StorageOptions
+  ) => Promise<void>;
+  getEncryptedOrganizationKeys: (options?: StorageOptions) => Promise<any>;
+  setEncryptedOrganizationKeys: (
+    value: Map<string, SymmetricCryptoKey>,
+    options?: StorageOptions
+  ) => Promise<void>;
+  getEncryptedPasswordGenerationHistory: (
+    options?: StorageOptions
+  ) => Promise<GeneratedPasswordHistory[]>;
+  setEncryptedPasswordGenerationHistory: (
+    value: GeneratedPasswordHistory[],
+    options?: StorageOptions
+  ) => Promise<void>;
+  getEncryptedPinProtected: (options?: StorageOptions) => Promise<string>;
+  setEncryptedPinProtected: (value: string, options?: StorageOptions) => Promise<void>;
+  getEncryptedPolicies: (options?: StorageOptions) => Promise<{ [id: string]: PolicyData }>;
+  setEncryptedPolicies: (
+    value: { [id: string]: PolicyData },
+    options?: StorageOptions
+  ) => Promise<void>;
+  getEncryptedPrivateKey: (options?: StorageOptions) => Promise<string>;
+  setEncryptedPrivateKey: (value: string, options?: StorageOptions) => Promise<void>;
+  getEncryptedProviderKeys: (options?: StorageOptions) => Promise<any>;
+  setEncryptedProviderKeys: (value: any, options?: StorageOptions) => Promise<void>;
+  getEncryptedSends: (options?: StorageOptions) => Promise<{ [id: string]: SendData }>;
+  setEncryptedSends: (value: { [id: string]: SendData }, options?: StorageOptions) => Promise<void>;
+  getEntityId: (options?: StorageOptions) => Promise<string>;
+  setEntityId: (value: string, options?: StorageOptions) => Promise<void>;
+  getEntityType: (options?: StorageOptions) => Promise<any>;
+  setEntityType: (value: string, options?: StorageOptions) => Promise<void>;
+  getEnvironmentUrls: (options?: StorageOptions) => Promise<EnvironmentUrls>;
+  setEnvironmentUrls: (value: EnvironmentUrls, options?: StorageOptions) => Promise<void>;
+  getEquivalentDomains: (options?: StorageOptions) => Promise<any>;
+  setEquivalentDomains: (value: string, options?: StorageOptions) => Promise<void>;
+  getEventCollection: (options?: StorageOptions) => Promise<EventData[]>;
+  setEventCollection: (value: EventData[], options?: StorageOptions) => Promise<void>;
+  getEverBeenUnlocked: (options?: StorageOptions) => Promise<boolean>;
+  setEverBeenUnlocked: (value: boolean, options?: StorageOptions) => Promise<void>;
+  getForcePasswordReset: (options?: StorageOptions) => Promise<boolean>;
+  setForcePasswordReset: (value: boolean, options?: StorageOptions) => Promise<void>;
+  getInstalledVersion: (options?: StorageOptions) => Promise<string>;
+  setInstalledVersion: (value: string, options?: StorageOptions) => Promise<void>;
+  getIsAuthenticated: (options?: StorageOptions) => Promise<boolean>;
+  getKdfIterations: (options?: StorageOptions) => Promise<number>;
+  setKdfIterations: (value: number, options?: StorageOptions) => Promise<void>;
+  getKdfType: (options?: StorageOptions) => Promise<KdfType>;
+  setKdfType: (value: KdfType, options?: StorageOptions) => Promise<void>;
+  getKeyHash: (options?: StorageOptions) => Promise<string>;
+  setKeyHash: (value: string, options?: StorageOptions) => Promise<void>;
+  getLastActive: (options?: StorageOptions) => Promise<number>;
+  setLastActive: (value: number, options?: StorageOptions) => Promise<void>;
+  getLastSync: (options?: StorageOptions) => Promise<string>;
+  setLastSync: (value: string, options?: StorageOptions) => Promise<void>;
+  getLegacyEtmKey: (options?: StorageOptions) => Promise<SymmetricCryptoKey>;
+  setLegacyEtmKey: (value: SymmetricCryptoKey, options?: StorageOptions) => Promise<void>;
+  getLocalData: (options?: StorageOptions) => Promise<any>;
+  setLocalData: (value: string, options?: StorageOptions) => Promise<void>;
+  getLocale: (options?: StorageOptions) => Promise<string>;
+  setLocale: (value: string, options?: StorageOptions) => Promise<void>;
+  getLoginRedirect: (options?: StorageOptions) => Promise<any>;
+  setLoginRedirect: (value: any, options?: StorageOptions) => Promise<void>;
+  getMainWindowSize: (options?: StorageOptions) => Promise<number>;
+  setMainWindowSize: (value: number, options?: StorageOptions) => Promise<void>;
+  getMinimizeOnCopyToClipboard: (options?: StorageOptions) => Promise<boolean>;
+  setMinimizeOnCopyToClipboard: (value: boolean, options?: StorageOptions) => Promise<void>;
+  getNeverDomains: (options?: StorageOptions) => Promise<{ [id: string]: any }>;
+  setNeverDomains: (value: { [id: string]: any }, options?: StorageOptions) => Promise<void>;
+  getNoAutoPromptBiometrics: (options?: StorageOptions) => Promise<boolean>;
+  setNoAutoPromptBiometrics: (value: boolean, options?: StorageOptions) => Promise<void>;
+  getNoAutoPromptBiometricsText: (options?: StorageOptions) => Promise<string>;
+  setNoAutoPromptBiometricsText: (value: string, options?: StorageOptions) => Promise<void>;
+  getOpenAtLogin: (options?: StorageOptions) => Promise<boolean>;
+  setOpenAtLogin: (value: boolean, options?: StorageOptions) => Promise<void>;
+  getOrganizationInvitation: (options?: StorageOptions) => Promise<any>;
+  setOrganizationInvitation: (value: any, options?: StorageOptions) => Promise<void>;
+  getOrganizations: (options?: StorageOptions) => Promise<{ [id: string]: OrganizationData }>;
+  setOrganizations: (
+    value: { [id: string]: OrganizationData },
+    options?: StorageOptions
+  ) => Promise<void>;
+  getPasswordGenerationOptions: (options?: StorageOptions) => Promise<any>;
+  setPasswordGenerationOptions: (value: any, options?: StorageOptions) => Promise<void>;
+  getProtectedPin: (options?: StorageOptions) => Promise<string>;
+  setProtectedPin: (value: string, options?: StorageOptions) => Promise<void>;
+  getProviders: (options?: StorageOptions) => Promise<{ [id: string]: ProviderData }>;
+  setProviders: (value: { [id: string]: ProviderData }, options?: StorageOptions) => Promise<void>;
+  getPublicKey: (options?: StorageOptions) => Promise<ArrayBuffer>;
+  setPublicKey: (value: ArrayBuffer, options?: StorageOptions) => Promise<void>;
+  getRefreshToken: (options?: StorageOptions) => Promise<string>;
+  setRefreshToken: (value: string, options?: StorageOptions) => Promise<void>;
+  getRememberedEmail: (options?: StorageOptions) => Promise<string>;
+  setRememberedEmail: (value: string, options?: StorageOptions) => Promise<void>;
+  getSecurityStamp: (options?: StorageOptions) => Promise<string>;
+  setSecurityStamp: (value: string, options?: StorageOptions) => Promise<void>;
+  getSettings: (options?: StorageOptions) => Promise<any>;
+  setSettings: (value: string, options?: StorageOptions) => Promise<void>;
+  getSsoCodeVerifier: (options?: StorageOptions) => Promise<string>;
+  setSsoCodeVerifier: (value: string, options?: StorageOptions) => Promise<void>;
+  getSsoOrgIdentifier: (options?: StorageOptions) => Promise<string>;
+  setSsoOrganizationIdentifier: (value: string, options?: StorageOptions) => Promise<void>;
+  getSsoState: (options?: StorageOptions) => Promise<string>;
+  setSsoState: (value: string, options?: StorageOptions) => Promise<void>;
+  getTheme: (options?: StorageOptions) => Promise<ThemeType>;
+  setTheme: (value: ThemeType, options?: StorageOptions) => Promise<void>;
+  getTwoFactorToken: (options?: StorageOptions) => Promise<string>;
+  setTwoFactorToken: (value: string, options?: StorageOptions) => Promise<void>;
+  getUserId: (options?: StorageOptions) => Promise<string>;
+  getUsesKeyConnector: (options?: StorageOptions) => Promise<boolean>;
+  setUsesKeyConnector: (vaule: boolean, options?: StorageOptions) => Promise<void>;
+  getVaultTimeout: (options?: StorageOptions) => Promise<number>;
+  setVaultTimeout: (value: number, options?: StorageOptions) => Promise<void>;
+  getVaultTimeoutAction: (options?: StorageOptions) => Promise<string>;
+  setVaultTimeoutAction: (value: string, options?: StorageOptions) => Promise<void>;
+  getStateVersion: () => Promise<number>;
+  setStateVersion: (value: number) => Promise<void>;
+  getWindow: () => Promise<WindowState>;
+  setWindow: (value: WindowState) => Promise<void>;
 }
diff --git a/jslib/common/src/abstractions/stateMigration.service.ts b/jslib/common/src/abstractions/stateMigration.service.ts
new file mode 100644
index 00000000..f16777a1
--- /dev/null
+++ b/jslib/common/src/abstractions/stateMigration.service.ts
@@ -0,0 +1,4 @@
+export abstract class StateMigrationService {
+  needsMigration: () => Promise<boolean>;
+  migrate: () => Promise<void>;
+}
diff --git a/jslib/common/src/abstractions/storage.service.ts b/jslib/common/src/abstractions/storage.service.ts
index cfedb2d0..f522d3cf 100644
--- a/jslib/common/src/abstractions/storage.service.ts
+++ b/jslib/common/src/abstractions/storage.service.ts
@@ -1,12 +1,8 @@
-export abstract class StorageService {
-    get: <T>(key: string, options?: StorageServiceOptions) => Promise<T>;
-    has: (key: string, options?: StorageServiceOptions) => Promise<boolean>;
-    save: (key: string, obj: any, options?: StorageServiceOptions) => Promise<any>;
-    remove: (key: string, options?: StorageServiceOptions) => Promise<any>;
-}
+import { StorageOptions } from "../models/domain/storageOptions";
 
-export interface StorageServiceOptions {
-    keySuffix: KeySuffixOptions;
+export abstract class StorageService {
+  get: <T>(key: string, options?: StorageOptions) => Promise<T>;
+  has: (key: string, options?: StorageOptions) => Promise<boolean>;
+  save: (key: string, obj: any, options?: StorageOptions) => Promise<any>;
+  remove: (key: string, options?: StorageOptions) => Promise<any>;
 }
-
-export type KeySuffixOptions = 'auto' | 'biometric';
diff --git a/jslib/common/src/abstractions/sync.service.ts b/jslib/common/src/abstractions/sync.service.ts
index 5d35cf20..936d027f 100644
--- a/jslib/common/src/abstractions/sync.service.ts
+++ b/jslib/common/src/abstractions/sync.service.ts
@@ -1,19 +1,19 @@
 import {
-    SyncCipherNotification,
-    SyncFolderNotification,
-    SyncSendNotification,
-} from '../models/response/notificationResponse';
+  SyncCipherNotification,
+  SyncFolderNotification,
+  SyncSendNotification,
+} from "../models/response/notificationResponse";
 
 export abstract class SyncService {
-    syncInProgress: boolean;
+  syncInProgress: boolean;
 
-    getLastSync: () => Promise<Date>;
-    setLastSync: (date: Date) => Promise<any>;
-    fullSync: (forceSync: boolean, allowThrowOnError?: boolean) => Promise<boolean>;
-    syncUpsertFolder: (notification: SyncFolderNotification, isEdit: boolean) => Promise<boolean>;
-    syncDeleteFolder: (notification: SyncFolderNotification) => Promise<boolean>;
-    syncUpsertCipher: (notification: SyncCipherNotification, isEdit: boolean) => Promise<boolean>;
-    syncDeleteCipher: (notification: SyncFolderNotification) => Promise<boolean>;
-    syncUpsertSend: (notification: SyncSendNotification, isEdit: boolean) => Promise<boolean>;
-    syncDeleteSend: (notification: SyncSendNotification) => Promise<boolean>;
+  getLastSync: () => Promise<Date>;
+  setLastSync: (date: Date, userId?: string) => Promise<any>;
+  fullSync: (forceSync: boolean, allowThrowOnError?: boolean) => Promise<boolean>;
+  syncUpsertFolder: (notification: SyncFolderNotification, isEdit: boolean) => Promise<boolean>;
+  syncDeleteFolder: (notification: SyncFolderNotification) => Promise<boolean>;
+  syncUpsertCipher: (notification: SyncCipherNotification, isEdit: boolean) => Promise<boolean>;
+  syncDeleteCipher: (notification: SyncFolderNotification) => Promise<boolean>;
+  syncUpsertSend: (notification: SyncSendNotification, isEdit: boolean) => Promise<boolean>;
+  syncDeleteSend: (notification: SyncSendNotification) => Promise<boolean>;
 }
diff --git a/jslib/common/src/abstractions/system.service.ts b/jslib/common/src/abstractions/system.service.ts
index c8948bc1..b5c1e595 100644
--- a/jslib/common/src/abstractions/system.service.ts
+++ b/jslib/common/src/abstractions/system.service.ts
@@ -1,6 +1,6 @@
 export abstract class SystemService {
-    startProcessReload: () => void;
-    cancelProcessReload: () => void;
-    clearClipboard: (clipboardValue: string, timeoutMs?: number) => void;
-    clearPendingClipboard: () => Promise<any>;
+  startProcessReload: () => Promise<void>;
+  cancelProcessReload: () => void;
+  clearClipboard: (clipboardValue: string, timeoutMs?: number) => Promise<void>;
+  clearPendingClipboard: () => Promise<any>;
 }
diff --git a/jslib/common/src/abstractions/token.service.ts b/jslib/common/src/abstractions/token.service.ts
index 73c960ec..6006ba10 100644
--- a/jslib/common/src/abstractions/token.service.ts
+++ b/jslib/common/src/abstractions/token.service.ts
@@ -1,30 +1,31 @@
 export abstract class TokenService {
-    token: string;
-    decodedToken: any;
-    refreshToken: string;
-    setTokens: (accessToken: string, refreshToken: string, clientIdClientSecret: [string, string]) => Promise<any>;
-    setToken: (token: string) => Promise<any>;
-    getToken: () => Promise<string>;
-    setRefreshToken: (refreshToken: string) => Promise<any>;
-    getRefreshToken: () => Promise<string>;
-    setClientId: (clientId: string) => Promise<any>;
-    getClientId: () => Promise<string>;
-    setClientSecret: (clientSecret: string) => Promise<any>;
-    getClientSecret: () => Promise<string>;
-    toggleTokens: () => Promise<any>;
-    setTwoFactorToken: (token: string, email: string) => Promise<any>;
-    getTwoFactorToken: (email: string) => Promise<string>;
-    clearTwoFactorToken: (email: string) => Promise<any>;
-    clearToken: () => Promise<any>;
-    decodeToken: () => any;
-    getTokenExpirationDate: () => Date;
-    tokenSecondsRemaining: (offsetSeconds?: number) => number;
-    tokenNeedsRefresh: (minutes?: number) => boolean;
-    getUserId: () => string;
-    getEmail: () => string;
-    getEmailVerified: () => boolean;
-    getName: () => string;
-    getPremium: () => boolean;
-    getIssuer: () => string;
-    getIsExternal: () => boolean;
+  setTokens: (
+    accessToken: string,
+    refreshToken: string,
+    clientIdClientSecret: [string, string]
+  ) => Promise<any>;
+  setToken: (token: string) => Promise<any>;
+  getToken: () => Promise<string>;
+  setRefreshToken: (refreshToken: string) => Promise<any>;
+  getRefreshToken: () => Promise<string>;
+  setClientId: (clientId: string) => Promise<any>;
+  getClientId: () => Promise<string>;
+  setClientSecret: (clientSecret: string) => Promise<any>;
+  getClientSecret: () => Promise<string>;
+  toggleTokens: () => Promise<any>;
+  setTwoFactorToken: (token: string, email: string) => Promise<any>;
+  getTwoFactorToken: (email: string) => Promise<string>;
+  clearTwoFactorToken: (email: string) => Promise<any>;
+  clearToken: (userId?: string) => Promise<any>;
+  decodeToken: (token?: string) => any;
+  getTokenExpirationDate: () => Promise<Date>;
+  tokenSecondsRemaining: (offsetSeconds?: number) => Promise<number>;
+  tokenNeedsRefresh: (minutes?: number) => Promise<boolean>;
+  getUserId: () => Promise<string>;
+  getEmail: () => Promise<string>;
+  getEmailVerified: () => Promise<boolean>;
+  getName: () => Promise<string>;
+  getPremium: () => Promise<boolean>;
+  getIssuer: () => Promise<string>;
+  getIsExternal: () => Promise<boolean>;
 }
diff --git a/jslib/common/src/abstractions/totp.service.ts b/jslib/common/src/abstractions/totp.service.ts
index 608c7d1b..bf143e26 100644
--- a/jslib/common/src/abstractions/totp.service.ts
+++ b/jslib/common/src/abstractions/totp.service.ts
@@ -1,5 +1,5 @@
 export abstract class TotpService {
-    getCode: (key: string) => Promise<string>;
-    getTimeInterval: (key: string) => number;
-    isAutoCopyEnabled: () => Promise<boolean>;
+  getCode: (key: string) => Promise<string>;
+  getTimeInterval: (key: string) => number;
+  isAutoCopyEnabled: () => Promise<boolean>;
 }
diff --git a/jslib/common/src/abstractions/user.service.ts b/jslib/common/src/abstractions/user.service.ts
deleted file mode 100644
index 8170ae73..00000000
--- a/jslib/common/src/abstractions/user.service.ts
+++ /dev/null
@@ -1,34 +0,0 @@
-import { OrganizationData } from '../models/data/organizationData';
-import { ProviderData } from '../models/data/providerData';
-
-import { Organization } from '../models/domain/organization';
-import { Provider } from '../models/domain/provider';
-
-import { KdfType } from '../enums/kdfType';
-
-export abstract class UserService {
-    setInformation: (userId: string, email: string, kdf: KdfType, kdfIterations: number) => Promise<any>;
-    setEmailVerified: (emailVerified: boolean) => Promise<any>;
-    setSecurityStamp: (stamp: string) => Promise<any>;
-    setForcePasswordReset: (forcePasswordReset: boolean) => Promise<any>;
-    getUserId: () => Promise<string>;
-    getEmail: () => Promise<string>;
-    getSecurityStamp: () => Promise<string>;
-    getKdf: () => Promise<KdfType>;
-    getKdfIterations: () => Promise<number>;
-    getEmailVerified: () => Promise<boolean>;
-    getForcePasswordReset: () => Promise<boolean>;
-    clear: () => Promise<any>;
-    isAuthenticated: () => Promise<boolean>;
-    canAccessPremium: () => Promise<boolean>;
-    canManageSponsorships: () => Promise<boolean>;
-    getOrganization: (id: string) => Promise<Organization>;
-    getOrganizationByIdentifier: (identifier: string) => Promise<Organization>;
-    getAllOrganizations: () => Promise<Organization[]>;
-    replaceOrganizations: (organizations: { [id: string]: OrganizationData; }) => Promise<any>;
-    clearOrganizations: (userId: string) => Promise<any>;
-    getProvider: (id: string) => Promise<Provider>;
-    getAllProviders: () => Promise<Provider[]>;
-    replaceProviders: (providers: { [id: string]: ProviderData; }) => Promise<any>;
-    clearProviders: (userId: string) => Promise<any>;
-}
diff --git a/jslib/common/src/abstractions/userVerification.service.ts b/jslib/common/src/abstractions/userVerification.service.ts
index 7dcf1d10..42370ae1 100644
--- a/jslib/common/src/abstractions/userVerification.service.ts
+++ b/jslib/common/src/abstractions/userVerification.service.ts
@@ -1,10 +1,13 @@
-import { SecretVerificationRequest } from '../models/request/secretVerificationRequest';
+import { SecretVerificationRequest } from "../models/request/secretVerificationRequest";
 
-import { Verification } from '../types/verification';
+import { Verification } from "../types/verification";
 
 export abstract class UserVerificationService {
-    buildRequest: <T extends SecretVerificationRequest> (verification: Verification,
-        requestClass?: new () => T, alreadyHashed?: boolean) => Promise<T>;
-    verifyUser: (verification: Verification) => Promise<boolean>;
-    requestOTP: () => Promise<void>;
+  buildRequest: <T extends SecretVerificationRequest>(
+    verification: Verification,
+    requestClass?: new () => T,
+    alreadyHashed?: boolean
+  ) => Promise<T>;
+  verifyUser: (verification: Verification) => Promise<boolean>;
+  requestOTP: () => Promise<void>;
 }
diff --git a/jslib/common/src/abstractions/vaultTimeout.service.ts b/jslib/common/src/abstractions/vaultTimeout.service.ts
index a5944c48..2c2b2521 100644
--- a/jslib/common/src/abstractions/vaultTimeout.service.ts
+++ b/jslib/common/src/abstractions/vaultTimeout.service.ts
@@ -1,16 +1,11 @@
-import { EncString } from '../models/domain/encString';
-
 export abstract class VaultTimeoutService {
-    biometricLocked: boolean;
-    everBeenUnlocked: boolean;
-    pinProtectedKey: EncString;
-    isLocked: () => Promise<boolean>;
-    checkVaultTimeout: () => Promise<void>;
-    lock: (allowSoftLock?: boolean) => Promise<void>;
-    logOut: () => Promise<void>;
-    setVaultTimeoutOptions: (vaultTimeout: number, vaultTimeoutAction: string) => Promise<void>;
-    getVaultTimeout: () => Promise<number>;
-    isPinLockSet: () => Promise<[boolean, boolean]>;
-    isBiometricLockSet: () => Promise<boolean>;
-    clear: () => Promise<any>;
+  isLocked: (userId?: string) => Promise<boolean>;
+  checkVaultTimeout: () => Promise<void>;
+  lock: (allowSoftLock?: boolean, userId?: string) => Promise<void>;
+  logOut: (userId?: string) => Promise<void>;
+  setVaultTimeoutOptions: (vaultTimeout: number, vaultTimeoutAction: string) => Promise<void>;
+  getVaultTimeout: () => Promise<number>;
+  isPinLockSet: () => Promise<[boolean, boolean]>;
+  isBiometricLockSet: () => Promise<boolean>;
+  clear: (userId?: string) => Promise<any>;
 }
diff --git a/jslib/common/src/enums/authenticationStatus.ts b/jslib/common/src/enums/authenticationStatus.ts
new file mode 100644
index 00000000..8e1db548
--- /dev/null
+++ b/jslib/common/src/enums/authenticationStatus.ts
@@ -0,0 +1,6 @@
+export enum AuthenticationStatus {
+  Locked = "locked",
+  Unlocked = "unlocked",
+  LoggedOut = "loggedOut",
+  Active = "active",
+}
diff --git a/jslib/common/src/enums/cipherRepromptType.ts b/jslib/common/src/enums/cipherRepromptType.ts
index 5b2a9b2f..1d0a523c 100644
--- a/jslib/common/src/enums/cipherRepromptType.ts
+++ b/jslib/common/src/enums/cipherRepromptType.ts
@@ -1,4 +1,4 @@
 export enum CipherRepromptType {
-    None = 0,
-    Password = 1,
+  None = 0,
+  Password = 1,
 }
diff --git a/jslib/common/src/enums/cipherType.ts b/jslib/common/src/enums/cipherType.ts
index c081fb2d..cce7874d 100644
--- a/jslib/common/src/enums/cipherType.ts
+++ b/jslib/common/src/enums/cipherType.ts
@@ -1,6 +1,6 @@
 export enum CipherType {
-    Login = 1,
-    SecureNote = 2,
-    Card = 3,
-    Identity = 4,
+  Login = 1,
+  SecureNote = 2,
+  Card = 3,
+  Identity = 4,
 }
diff --git a/jslib/common/src/enums/deviceType.ts b/jslib/common/src/enums/deviceType.ts
index 6f8ddd21..707f83d8 100644
--- a/jslib/common/src/enums/deviceType.ts
+++ b/jslib/common/src/enums/deviceType.ts
@@ -1,23 +1,23 @@
 export enum DeviceType {
-    Android = 0,
-    iOS = 1,
-    ChromeExtension = 2,
-    FirefoxExtension = 3,
-    OperaExtension = 4,
-    EdgeExtension = 5,
-    WindowsDesktop = 6,
-    MacOsDesktop = 7,
-    LinuxDesktop = 8,
-    ChromeBrowser = 9,
-    FirefoxBrowser = 10,
-    OperaBrowser = 11,
-    EdgeBrowser = 12,
-    IEBrowser = 13,
-    UnknownBrowser = 14,
-    AndroidAmazon = 15,
-    UWP = 16,
-    SafariBrowser = 17,
-    VivaldiBrowser = 18,
-    VivaldiExtension = 19,
-    SafariExtension = 20,
+  Android = 0,
+  iOS = 1,
+  ChromeExtension = 2,
+  FirefoxExtension = 3,
+  OperaExtension = 4,
+  EdgeExtension = 5,
+  WindowsDesktop = 6,
+  MacOsDesktop = 7,
+  LinuxDesktop = 8,
+  ChromeBrowser = 9,
+  FirefoxBrowser = 10,
+  OperaBrowser = 11,
+  EdgeBrowser = 12,
+  IEBrowser = 13,
+  UnknownBrowser = 14,
+  AndroidAmazon = 15,
+  UWP = 16,
+  SafariBrowser = 17,
+  VivaldiBrowser = 18,
+  VivaldiExtension = 19,
+  SafariExtension = 20,
 }
diff --git a/jslib/common/src/enums/emergencyAccessStatusType.ts b/jslib/common/src/enums/emergencyAccessStatusType.ts
index eb362edf..94400f34 100644
--- a/jslib/common/src/enums/emergencyAccessStatusType.ts
+++ b/jslib/common/src/enums/emergencyAccessStatusType.ts
@@ -1,7 +1,7 @@
 export enum EmergencyAccessStatusType {
-    Invited = 0,
-    Accepted = 1,
-    Confirmed = 2,
-    RecoveryInitiated = 3,
-    RecoveryApproved = 4,
+  Invited = 0,
+  Accepted = 1,
+  Confirmed = 2,
+  RecoveryInitiated = 3,
+  RecoveryApproved = 4,
 }
diff --git a/jslib/common/src/enums/emergencyAccessType.ts b/jslib/common/src/enums/emergencyAccessType.ts
index 803634f4..61a366c4 100644
--- a/jslib/common/src/enums/emergencyAccessType.ts
+++ b/jslib/common/src/enums/emergencyAccessType.ts
@@ -1,5 +1,4 @@
-export enum EmergencyAccessType
-{
-    View = 0,
-    Takeover = 1,
+export enum EmergencyAccessType {
+  View = 0,
+  Takeover = 1,
 }
diff --git a/jslib/common/src/enums/encryptionType.ts b/jslib/common/src/enums/encryptionType.ts
index 7a0caa66..1c12dba2 100644
--- a/jslib/common/src/enums/encryptionType.ts
+++ b/jslib/common/src/enums/encryptionType.ts
@@ -1,9 +1,9 @@
 export enum EncryptionType {
-    AesCbc256_B64 = 0,
-    AesCbc128_HmacSha256_B64 = 1,
-    AesCbc256_HmacSha256_B64 = 2,
-    Rsa2048_OaepSha256_B64 = 3,
-    Rsa2048_OaepSha1_B64 = 4,
-    Rsa2048_OaepSha256_HmacSha256_B64 = 5,
-    Rsa2048_OaepSha1_HmacSha256_B64 = 6,
+  AesCbc256_B64 = 0,
+  AesCbc128_HmacSha256_B64 = 1,
+  AesCbc256_HmacSha256_B64 = 2,
+  Rsa2048_OaepSha256_B64 = 3,
+  Rsa2048_OaepSha1_B64 = 4,
+  Rsa2048_OaepSha256_HmacSha256_B64 = 5,
+  Rsa2048_OaepSha1_HmacSha256_B64 = 6,
 }
diff --git a/jslib/common/src/enums/eventType.ts b/jslib/common/src/enums/eventType.ts
index b45f45f9..236e73c0 100644
--- a/jslib/common/src/enums/eventType.ts
+++ b/jslib/common/src/enums/eventType.ts
@@ -1,72 +1,72 @@
 export enum EventType {
-    User_LoggedIn = 1000,
-    User_ChangedPassword = 1001,
-    User_Updated2fa = 1002,
-    User_Disabled2fa = 1003,
-    User_Recovered2fa = 1004,
-    User_FailedLogIn = 1005,
-    User_FailedLogIn2fa = 1006,
-    User_ClientExportedVault = 1007,
-    User_UpdatedTempPassword = 1008,
-    User_MigratedKeyToKeyConnector = 1009,
+  User_LoggedIn = 1000,
+  User_ChangedPassword = 1001,
+  User_Updated2fa = 1002,
+  User_Disabled2fa = 1003,
+  User_Recovered2fa = 1004,
+  User_FailedLogIn = 1005,
+  User_FailedLogIn2fa = 1006,
+  User_ClientExportedVault = 1007,
+  User_UpdatedTempPassword = 1008,
+  User_MigratedKeyToKeyConnector = 1009,
 
-    Cipher_Created = 1100,
-    Cipher_Updated = 1101,
-    Cipher_Deleted = 1102,
-    Cipher_AttachmentCreated = 1103,
-    Cipher_AttachmentDeleted = 1104,
-    Cipher_Shared = 1105,
-    Cipher_UpdatedCollections = 1106,
-    Cipher_ClientViewed = 1107,
-    Cipher_ClientToggledPasswordVisible = 1108,
-    Cipher_ClientToggledHiddenFieldVisible = 1109,
-    Cipher_ClientToggledCardCodeVisible = 1110,
-    Cipher_ClientCopiedPassword = 1111,
-    Cipher_ClientCopiedHiddenField = 1112,
-    Cipher_ClientCopiedCardCode = 1113,
-    Cipher_ClientAutofilled = 1114,
-    Cipher_SoftDeleted = 1115,
-    Cipher_Restored = 1116,
-    Cipher_ClientToggledCardNumberVisible = 1117,
+  Cipher_Created = 1100,
+  Cipher_Updated = 1101,
+  Cipher_Deleted = 1102,
+  Cipher_AttachmentCreated = 1103,
+  Cipher_AttachmentDeleted = 1104,
+  Cipher_Shared = 1105,
+  Cipher_UpdatedCollections = 1106,
+  Cipher_ClientViewed = 1107,
+  Cipher_ClientToggledPasswordVisible = 1108,
+  Cipher_ClientToggledHiddenFieldVisible = 1109,
+  Cipher_ClientToggledCardCodeVisible = 1110,
+  Cipher_ClientCopiedPassword = 1111,
+  Cipher_ClientCopiedHiddenField = 1112,
+  Cipher_ClientCopiedCardCode = 1113,
+  Cipher_ClientAutofilled = 1114,
+  Cipher_SoftDeleted = 1115,
+  Cipher_Restored = 1116,
+  Cipher_ClientToggledCardNumberVisible = 1117,
 
-    Collection_Created = 1300,
-    Collection_Updated = 1301,
-    Collection_Deleted = 1302,
+  Collection_Created = 1300,
+  Collection_Updated = 1301,
+  Collection_Deleted = 1302,
 
-    Group_Created = 1400,
-    Group_Updated = 1401,
-    Group_Deleted = 1402,
+  Group_Created = 1400,
+  Group_Updated = 1401,
+  Group_Deleted = 1402,
 
-    OrganizationUser_Invited = 1500,
-    OrganizationUser_Confirmed = 1501,
-    OrganizationUser_Updated = 1502,
-    OrganizationUser_Removed = 1503,
-    OrganizationUser_UpdatedGroups = 1504,
-    OrganizationUser_UnlinkedSso = 1505,
-    OrganizationUser_ResetPassword_Enroll = 1506,
-    OrganizationUser_ResetPassword_Withdraw = 1507,
-    OrganizationUser_AdminResetPassword = 1508,
-    OrganizationUser_ResetSsoLink = 1509,
-    OrganizationUser_FirstSsoLogin = 1510,
+  OrganizationUser_Invited = 1500,
+  OrganizationUser_Confirmed = 1501,
+  OrganizationUser_Updated = 1502,
+  OrganizationUser_Removed = 1503,
+  OrganizationUser_UpdatedGroups = 1504,
+  OrganizationUser_UnlinkedSso = 1505,
+  OrganizationUser_ResetPassword_Enroll = 1506,
+  OrganizationUser_ResetPassword_Withdraw = 1507,
+  OrganizationUser_AdminResetPassword = 1508,
+  OrganizationUser_ResetSsoLink = 1509,
+  OrganizationUser_FirstSsoLogin = 1510,
 
-    Organization_Updated = 1600,
-    Organization_PurgedVault = 1601,
-    // Organization_ClientExportedVault = 1602,
-    Organization_VaultAccessed = 1603,
-    Organization_EnabledSso = 1604,
-    Organization_DisabledSso = 1605,
-    Organization_EnabledKeyConnector = 1606,
-    Organization_DisabledKeyConnector = 1607,
+  Organization_Updated = 1600,
+  Organization_PurgedVault = 1601,
+  // Organization_ClientExportedVault = 1602,
+  Organization_VaultAccessed = 1603,
+  Organization_EnabledSso = 1604,
+  Organization_DisabledSso = 1605,
+  Organization_EnabledKeyConnector = 1606,
+  Organization_DisabledKeyConnector = 1607,
 
-    Policy_Updated = 1700,
+  Policy_Updated = 1700,
 
-    ProviderUser_Invited = 1800,
-    ProviderUser_Confirmed = 1801,
-    ProviderUser_Updated = 1802,
-    ProviderUser_Removed = 1803,
+  ProviderUser_Invited = 1800,
+  ProviderUser_Confirmed = 1801,
+  ProviderUser_Updated = 1802,
+  ProviderUser_Removed = 1803,
 
-    ProviderOrganization_Created = 1900,
-    ProviderOrganization_Added = 1901,
-    ProviderOrganization_Removed = 1902,
-    ProviderOrganization_VaultAccessed = 1903,
+  ProviderOrganization_Created = 1900,
+  ProviderOrganization_Added = 1901,
+  ProviderOrganization_Removed = 1902,
+  ProviderOrganization_VaultAccessed = 1903,
 }
diff --git a/jslib/common/src/enums/fieldType.ts b/jslib/common/src/enums/fieldType.ts
index 594beba4..d6deb30e 100644
--- a/jslib/common/src/enums/fieldType.ts
+++ b/jslib/common/src/enums/fieldType.ts
@@ -1,6 +1,6 @@
 export enum FieldType {
-    Text = 0,
-    Hidden = 1,
-    Boolean = 2,
-    Linked = 3,
+  Text = 0,
+  Hidden = 1,
+  Boolean = 2,
+  Linked = 3,
 }
diff --git a/jslib/common/src/enums/fileUploadType.ts b/jslib/common/src/enums/fileUploadType.ts
index cbdd88fb..4cf654fd 100644
--- a/jslib/common/src/enums/fileUploadType.ts
+++ b/jslib/common/src/enums/fileUploadType.ts
@@ -1,4 +1,4 @@
 export enum FileUploadType {
-    Direct = 0,
-    Azure = 1,
+  Direct = 0,
+  Azure = 1,
 }
diff --git a/jslib/common/src/enums/hashPurpose.ts b/jslib/common/src/enums/hashPurpose.ts
index 90a1db9d..887931b9 100644
--- a/jslib/common/src/enums/hashPurpose.ts
+++ b/jslib/common/src/enums/hashPurpose.ts
@@ -1,4 +1,4 @@
 export enum HashPurpose {
-    ServerAuthorization = 1,
-    LocalAuthorization = 2,
+  ServerAuthorization = 1,
+  LocalAuthorization = 2,
 }
diff --git a/jslib/common/src/enums/htmlStorageLocation.ts b/jslib/common/src/enums/htmlStorageLocation.ts
new file mode 100644
index 00000000..19c84fe8
--- /dev/null
+++ b/jslib/common/src/enums/htmlStorageLocation.ts
@@ -0,0 +1,5 @@
+export enum HtmlStorageLocation {
+  Local = "local",
+  Memory = "memory",
+  Session = "session",
+}
diff --git a/jslib/common/src/enums/kdfType.ts b/jslib/common/src/enums/kdfType.ts
index b23ef8e6..bf331fae 100644
--- a/jslib/common/src/enums/kdfType.ts
+++ b/jslib/common/src/enums/kdfType.ts
@@ -1,3 +1,3 @@
 export enum KdfType {
-    PBKDF2_SHA256 = 0,
+  PBKDF2_SHA256 = 0,
 }
diff --git a/jslib/common/src/enums/keySuffixOptions.ts b/jslib/common/src/enums/keySuffixOptions.ts
new file mode 100644
index 00000000..2ae98d8e
--- /dev/null
+++ b/jslib/common/src/enums/keySuffixOptions.ts
@@ -0,0 +1,4 @@
+export enum KeySuffixOptions {
+  Auto = "auto",
+  Biometric = "biometric",
+}
diff --git a/jslib/common/src/enums/linkedIdType.ts b/jslib/common/src/enums/linkedIdType.ts
index b2cd2f1c..c38ebc1c 100644
--- a/jslib/common/src/enums/linkedIdType.ts
+++ b/jslib/common/src/enums/linkedIdType.ts
@@ -2,39 +2,39 @@ export type LinkedIdType = LoginLinkedId | CardLinkedId | IdentityLinkedId;
 
 // LoginView
 export enum LoginLinkedId {
-    Username = 100,
-    Password = 101,
+  Username = 100,
+  Password = 101,
 }
 
 // CardView
 export enum CardLinkedId {
-    CardholderName = 300,
-    ExpMonth = 301,
-    ExpYear = 302,
-    Code = 303,
-    Brand = 304,
-    Number = 305,
+  CardholderName = 300,
+  ExpMonth = 301,
+  ExpYear = 302,
+  Code = 303,
+  Brand = 304,
+  Number = 305,
 }
 
 // IdentityView
 export enum IdentityLinkedId {
-    Title = 400,
-    MiddleName = 401,
-    Address1 = 402,
-    Address2 = 403,
-    Address3 = 404,
-    City = 405,
-    State = 406,
-    PostalCode = 407,
-    Country = 408,
-    Company = 409,
-    Email = 410,
-    Phone = 411,
-    Ssn = 412,
-    Username = 413,
-    PassportNumber = 414,
-    LicenseNumber = 415,
-    FirstName = 416,
-    LastName = 417,
-    FullName = 418,
+  Title = 400,
+  MiddleName = 401,
+  Address1 = 402,
+  Address2 = 403,
+  Address3 = 404,
+  City = 405,
+  State = 406,
+  PostalCode = 407,
+  Country = 408,
+  Company = 409,
+  Email = 410,
+  Phone = 411,
+  Ssn = 412,
+  Username = 413,
+  PassportNumber = 414,
+  LicenseNumber = 415,
+  FirstName = 416,
+  LastName = 417,
+  FullName = 418,
 }
diff --git a/jslib/common/src/enums/logLevelType.ts b/jslib/common/src/enums/logLevelType.ts
index 09f84b80..709871dd 100644
--- a/jslib/common/src/enums/logLevelType.ts
+++ b/jslib/common/src/enums/logLevelType.ts
@@ -1,6 +1,6 @@
 export enum LogLevelType {
-    Debug,
-    Info,
-    Warning,
-    Error,
+  Debug,
+  Info,
+  Warning,
+  Error,
 }
diff --git a/jslib/common/src/enums/notificationType.ts b/jslib/common/src/enums/notificationType.ts
index 5adaac30..77ebde01 100644
--- a/jslib/common/src/enums/notificationType.ts
+++ b/jslib/common/src/enums/notificationType.ts
@@ -1,20 +1,20 @@
 export enum NotificationType {
-    SyncCipherUpdate = 0,
-    SyncCipherCreate = 1,
-    SyncLoginDelete = 2,
-    SyncFolderDelete = 3,
-    SyncCiphers = 4,
+  SyncCipherUpdate = 0,
+  SyncCipherCreate = 1,
+  SyncLoginDelete = 2,
+  SyncFolderDelete = 3,
+  SyncCiphers = 4,
 
-    SyncVault = 5,
-    SyncOrgKeys = 6,
-    SyncFolderCreate = 7,
-    SyncFolderUpdate = 8,
-    SyncCipherDelete = 9,
-    SyncSettings = 10,
+  SyncVault = 5,
+  SyncOrgKeys = 6,
+  SyncFolderCreate = 7,
+  SyncFolderUpdate = 8,
+  SyncCipherDelete = 9,
+  SyncSettings = 10,
 
-    LogOut = 11,
+  LogOut = 11,
 
-    SyncSendCreate = 12,
-    SyncSendUpdate = 13,
-    SyncSendDelete = 14,
+  SyncSendCreate = 12,
+  SyncSendUpdate = 13,
+  SyncSendDelete = 14,
 }
diff --git a/jslib/common/src/enums/organizationUserStatusType.ts b/jslib/common/src/enums/organizationUserStatusType.ts
index eae4a0a6..33422180 100644
--- a/jslib/common/src/enums/organizationUserStatusType.ts
+++ b/jslib/common/src/enums/organizationUserStatusType.ts
@@ -1,5 +1,5 @@
 export enum OrganizationUserStatusType {
-    Invited = 0,
-    Accepted = 1,
-    Confirmed = 2,
+  Invited = 0,
+  Accepted = 1,
+  Confirmed = 2,
 }
diff --git a/jslib/common/src/enums/organizationUserType.ts b/jslib/common/src/enums/organizationUserType.ts
index 632d22b0..950fbaae 100644
--- a/jslib/common/src/enums/organizationUserType.ts
+++ b/jslib/common/src/enums/organizationUserType.ts
@@ -1,7 +1,7 @@
 export enum OrganizationUserType {
-    Owner = 0,
-    Admin = 1,
-    User = 2,
-    Manager = 3,
-    Custom = 4,
+  Owner = 0,
+  Admin = 1,
+  User = 2,
+  Manager = 3,
+  Custom = 4,
 }
diff --git a/jslib/common/src/enums/paymentMethodType.ts b/jslib/common/src/enums/paymentMethodType.ts
index da3e50f6..701bd886 100644
--- a/jslib/common/src/enums/paymentMethodType.ts
+++ b/jslib/common/src/enums/paymentMethodType.ts
@@ -1,11 +1,11 @@
 export enum PaymentMethodType {
-    Card = 0,
-    BankAccount = 1,
-    PayPal = 2,
-    BitPay = 3,
-    Credit = 4,
-    WireTransfer = 5,
-    AppleInApp = 6,
-    GoogleInApp = 7,
-    Check = 8,
+  Card = 0,
+  BankAccount = 1,
+  PayPal = 2,
+  BitPay = 3,
+  Credit = 4,
+  WireTransfer = 5,
+  AppleInApp = 6,
+  GoogleInApp = 7,
+  Check = 8,
 }
diff --git a/jslib/common/src/enums/permissions.ts b/jslib/common/src/enums/permissions.ts
index 8dcd9366..46a74455 100644
--- a/jslib/common/src/enums/permissions.ts
+++ b/jslib/common/src/enums/permissions.ts
@@ -1,27 +1,27 @@
 export enum Permissions {
-    AccessEventLogs,
-    AccessImportExport,
-    AccessReports,
-    /**
-     * @deprecated Sep 29 2021: This permission has been split out to `createNewCollections`, `editAnyCollection`, and
-     * `deleteAnyCollection`. It exists here for backwards compatibility with Server versions <= 1.43.0
-     */
-    ManageAllCollections,
-    /**
-     * @deprecated Sep 29 2021: This permission has been split out to `editAssignedCollections` and
-     * `deleteAssignedCollections`. It exists here for backwards compatibility with Server versions <= 1.43.0
-     */
-    ManageAssignedCollections,
-    ManageGroups,
-    ManageOrganization ,
-    ManagePolicies,
-    ManageProvider,
-    ManageUsers,
-    ManageUsersPassword,
-    CreateNewCollections,
-    EditAnyCollection,
-    DeleteAnyCollection,
-    EditAssignedCollections,
-    DeleteAssignedCollections,
-    ManageSso,
+  AccessEventLogs,
+  AccessImportExport,
+  AccessReports,
+  /**
+   * @deprecated Sep 29 2021: This permission has been split out to `createNewCollections`, `editAnyCollection`, and
+   * `deleteAnyCollection`. It exists here for backwards compatibility with Server versions <= 1.43.0
+   */
+  ManageAllCollections,
+  /**
+   * @deprecated Sep 29 2021: This permission has been split out to `editAssignedCollections` and
+   * `deleteAssignedCollections`. It exists here for backwards compatibility with Server versions <= 1.43.0
+   */
+  ManageAssignedCollections,
+  ManageGroups,
+  ManageOrganization,
+  ManagePolicies,
+  ManageProvider,
+  ManageUsers,
+  ManageUsersPassword,
+  CreateNewCollections,
+  EditAnyCollection,
+  DeleteAnyCollection,
+  EditAssignedCollections,
+  DeleteAssignedCollections,
+  ManageSso,
 }
diff --git a/jslib/common/src/enums/planSponsorshipType.ts b/jslib/common/src/enums/planSponsorshipType.ts
index 330b7ec0..3b4c0046 100644
--- a/jslib/common/src/enums/planSponsorshipType.ts
+++ b/jslib/common/src/enums/planSponsorshipType.ts
@@ -1,3 +1,3 @@
 export enum PlanSponsorshipType {
-    FamiliesForEnterprise = 0,
+  FamiliesForEnterprise = 0,
 }
diff --git a/jslib/common/src/enums/planType.ts b/jslib/common/src/enums/planType.ts
index 1b07c723..f4c89d2c 100644
--- a/jslib/common/src/enums/planType.ts
+++ b/jslib/common/src/enums/planType.ts
@@ -1,14 +1,14 @@
 export enum PlanType {
-    Free = 0,
-    FamiliesAnnually2019 = 1,
-    TeamsMonthly2019 = 2,
-    TeamsAnnually2019 = 3,
-    EnterpriseMonthly2019 = 4,
-    EnterpriseAnnually2019 = 5,
-    Custom = 6,
-    FamiliesAnnually = 7,
-    TeamsMonthly = 8,
-    TeamsAnnually = 9,
-    EnterpriseMonthly = 10,
-    EnterpriseAnnually = 11,
+  Free = 0,
+  FamiliesAnnually2019 = 1,
+  TeamsMonthly2019 = 2,
+  TeamsAnnually2019 = 3,
+  EnterpriseMonthly2019 = 4,
+  EnterpriseAnnually2019 = 5,
+  Custom = 6,
+  FamiliesAnnually = 7,
+  TeamsMonthly = 8,
+  TeamsAnnually = 9,
+  EnterpriseMonthly = 10,
+  EnterpriseAnnually = 11,
 }
diff --git a/jslib/common/src/enums/policyType.ts b/jslib/common/src/enums/policyType.ts
index 244ed4a1..02dce41e 100644
--- a/jslib/common/src/enums/policyType.ts
+++ b/jslib/common/src/enums/policyType.ts
@@ -1,13 +1,13 @@
 export enum PolicyType {
-    TwoFactorAuthentication = 0, // Requires users to have 2fa enabled
-    MasterPassword = 1, // Sets minimum requirements for master password complexity
-    PasswordGenerator = 2, // Sets minimum requirements/default type for generated passwords/passphrases
-    SingleOrg = 3, // Allows users to only be apart of one organization
-    RequireSso = 4, // Requires users to authenticate with SSO
-    PersonalOwnership = 5, // Disables personal vault ownership for adding/cloning items
-    DisableSend = 6, // Disables the ability to create and edit Bitwarden Sends
-    SendOptions = 7, // Sets restrictions or defaults for Bitwarden Sends
-    ResetPassword = 8, // Allows orgs to use reset password : also can enable auto-enrollment during invite flow
-    MaximumVaultTimeout = 9, // Sets the maximum allowed vault timeout
-    DisablePersonalVaultExport = 10, // Disable personal vault export
+  TwoFactorAuthentication = 0, // Requires users to have 2fa enabled
+  MasterPassword = 1, // Sets minimum requirements for master password complexity
+  PasswordGenerator = 2, // Sets minimum requirements/default type for generated passwords/passphrases
+  SingleOrg = 3, // Allows users to only be apart of one organization
+  RequireSso = 4, // Requires users to authenticate with SSO
+  PersonalOwnership = 5, // Disables personal vault ownership for adding/cloning items
+  DisableSend = 6, // Disables the ability to create and edit Bitwarden Sends
+  SendOptions = 7, // Sets restrictions or defaults for Bitwarden Sends
+  ResetPassword = 8, // Allows orgs to use reset password : also can enable auto-enrollment during invite flow
+  MaximumVaultTimeout = 9, // Sets the maximum allowed vault timeout
+  DisablePersonalVaultExport = 10, // Disable personal vault export
 }
diff --git a/jslib/common/src/enums/productType.ts b/jslib/common/src/enums/productType.ts
index d8e2e0ae..50b836d1 100644
--- a/jslib/common/src/enums/productType.ts
+++ b/jslib/common/src/enums/productType.ts
@@ -1,6 +1,6 @@
 export enum ProductType {
-    Free = 0,
-    Families = 1,
-    Teams = 2,
-    Enterprise = 3,
+  Free = 0,
+  Families = 1,
+  Teams = 2,
+  Enterprise = 3,
 }
diff --git a/jslib/common/src/enums/providerUserStatusType.ts b/jslib/common/src/enums/providerUserStatusType.ts
index 8b0e55de..3b845551 100644
--- a/jslib/common/src/enums/providerUserStatusType.ts
+++ b/jslib/common/src/enums/providerUserStatusType.ts
@@ -1,5 +1,5 @@
 export enum ProviderUserStatusType {
-    Invited = 0,
-    Accepted = 1,
-    Confirmed = 2,
+  Invited = 0,
+  Accepted = 1,
+  Confirmed = 2,
 }
diff --git a/jslib/common/src/enums/providerUserType.ts b/jslib/common/src/enums/providerUserType.ts
index 326fa0aa..00490adc 100644
--- a/jslib/common/src/enums/providerUserType.ts
+++ b/jslib/common/src/enums/providerUserType.ts
@@ -1,4 +1,4 @@
 export enum ProviderUserType {
-    ProviderAdmin = 0,
-    ServiceUser = 1,
+  ProviderAdmin = 0,
+  ServiceUser = 1,
 }
diff --git a/jslib/common/src/enums/secureNoteType.ts b/jslib/common/src/enums/secureNoteType.ts
index c7f3e44a..8015236d 100644
--- a/jslib/common/src/enums/secureNoteType.ts
+++ b/jslib/common/src/enums/secureNoteType.ts
@@ -1,3 +1,3 @@
 export enum SecureNoteType {
-    Generic = 0,
+  Generic = 0,
 }
diff --git a/jslib/common/src/enums/sendType.ts b/jslib/common/src/enums/sendType.ts
index f5715d86..487930c9 100644
--- a/jslib/common/src/enums/sendType.ts
+++ b/jslib/common/src/enums/sendType.ts
@@ -1,4 +1,4 @@
 export enum SendType {
-    Text = 0,
-    File = 1,
+  Text = 0,
+  File = 1,
 }
diff --git a/jslib/common/src/enums/stateVersion.ts b/jslib/common/src/enums/stateVersion.ts
new file mode 100644
index 00000000..aa45edbb
--- /dev/null
+++ b/jslib/common/src/enums/stateVersion.ts
@@ -0,0 +1,5 @@
+export enum StateVersion {
+  One = 1, // Original flat key/value pair store
+  Two = 2, // Move to a typed State object
+  Latest = Two,
+}
diff --git a/jslib/common/src/enums/storageLocation.ts b/jslib/common/src/enums/storageLocation.ts
new file mode 100644
index 00000000..46d50d1d
--- /dev/null
+++ b/jslib/common/src/enums/storageLocation.ts
@@ -0,0 +1,5 @@
+export enum StorageLocation {
+  Both = "both",
+  Disk = "disk",
+  Memory = "memory",
+}
diff --git a/jslib/common/src/enums/themeType.ts b/jslib/common/src/enums/themeType.ts
index 40e7c2dd..8afca770 100644
--- a/jslib/common/src/enums/themeType.ts
+++ b/jslib/common/src/enums/themeType.ts
@@ -1,7 +1,7 @@
 export enum ThemeType {
-    System = 'system',
-    Light = 'light',
-    Dark = 'dark',
-    Nord = 'nord',
-    SolarizedDark = 'solarizedDark',
+  System = "system",
+  Light = "light",
+  Dark = "dark",
+  Nord = "nord",
+  SolarizedDark = "solarizedDark",
 }
diff --git a/jslib/common/src/enums/transactionType.ts b/jslib/common/src/enums/transactionType.ts
index 68cce632..34731a2e 100644
--- a/jslib/common/src/enums/transactionType.ts
+++ b/jslib/common/src/enums/transactionType.ts
@@ -1,7 +1,7 @@
 export enum TransactionType {
-    Charge = 0,
-    Credit = 1,
-    PromotionalCredit = 2,
-    ReferralCredit = 3,
-    Refund = 4,
+  Charge = 0,
+  Credit = 1,
+  PromotionalCredit = 2,
+  ReferralCredit = 3,
+  Refund = 4,
 }
diff --git a/jslib/common/src/enums/twoFactorProviderType.ts b/jslib/common/src/enums/twoFactorProviderType.ts
index c0de3f4a..a1708032 100644
--- a/jslib/common/src/enums/twoFactorProviderType.ts
+++ b/jslib/common/src/enums/twoFactorProviderType.ts
@@ -1,10 +1,10 @@
 export enum TwoFactorProviderType {
-    Authenticator = 0,
-    Email = 1,
-    Duo = 2,
-    Yubikey = 3,
-    U2f = 4,
-    Remember = 5,
-    OrganizationDuo = 6,
-    WebAuthn = 7,
+  Authenticator = 0,
+  Email = 1,
+  Duo = 2,
+  Yubikey = 3,
+  U2f = 4,
+  Remember = 5,
+  OrganizationDuo = 6,
+  WebAuthn = 7,
 }
diff --git a/jslib/common/src/enums/uriMatchType.ts b/jslib/common/src/enums/uriMatchType.ts
index e4c0ef48..4a4193ba 100644
--- a/jslib/common/src/enums/uriMatchType.ts
+++ b/jslib/common/src/enums/uriMatchType.ts
@@ -1,8 +1,8 @@
 export enum UriMatchType {
-    Domain = 0,
-    Host = 1,
-    StartsWith = 2,
-    Exact = 3,
-    RegularExpression = 4,
-    Never = 5,
+  Domain = 0,
+  Host = 1,
+  StartsWith = 2,
+  Exact = 3,
+  RegularExpression = 4,
+  Never = 5,
 }
diff --git a/jslib/common/src/enums/verificationType.ts b/jslib/common/src/enums/verificationType.ts
index 254da418..76a51ab7 100644
--- a/jslib/common/src/enums/verificationType.ts
+++ b/jslib/common/src/enums/verificationType.ts
@@ -1,4 +1,4 @@
 export enum VerificationType {
-    MasterPassword = 0,
-    OTP = 1,
+  MasterPassword = 0,
+  OTP = 1,
 }
diff --git a/jslib/common/src/factories/accountFactory.ts b/jslib/common/src/factories/accountFactory.ts
new file mode 100644
index 00000000..1fe5aee3
--- /dev/null
+++ b/jslib/common/src/factories/accountFactory.ts
@@ -0,0 +1,13 @@
+import { Account } from "../models/domain/account";
+
+export class AccountFactory<T extends Account = Account> {
+  private accountConstructor: new (init: Partial<T>) => T;
+
+  constructor(accountConstructor: new (init: Partial<T>) => T) {
+    this.accountConstructor = accountConstructor;
+  }
+
+  create(args: Partial<T>) {
+    return new this.accountConstructor(args);
+  }
+}
diff --git a/jslib/common/src/factories/globalStateFactory.ts b/jslib/common/src/factories/globalStateFactory.ts
new file mode 100644
index 00000000..a2c25c46
--- /dev/null
+++ b/jslib/common/src/factories/globalStateFactory.ts
@@ -0,0 +1,13 @@
+import { GlobalState } from "../models/domain/globalState";
+
+export class GlobalStateFactory<T extends GlobalState = GlobalState> {
+  private globalStateConstructor: new (init: Partial<T>) => T;
+
+  constructor(globalStateConstructor: new (init: Partial<T>) => T) {
+    this.globalStateConstructor = globalStateConstructor;
+  }
+
+  create(args?: Partial<T>) {
+    return new this.globalStateConstructor(args);
+  }
+}
diff --git a/jslib/common/src/factories/stateFactory.ts b/jslib/common/src/factories/stateFactory.ts
new file mode 100644
index 00000000..5df194af
--- /dev/null
+++ b/jslib/common/src/factories/stateFactory.ts
@@ -0,0 +1,25 @@
+import { Account } from "../models/domain/account";
+import { GlobalState } from "../models/domain/globalState";
+import { AccountFactory } from "./accountFactory";
+import { GlobalStateFactory } from "./globalStateFactory";
+
+export class StateFactory<TAccount extends Account, TGlobal extends GlobalState> {
+  private globalStateFactory: GlobalStateFactory<TGlobal>;
+  private accountFactory: AccountFactory<TAccount>;
+
+  constructor(
+    globalStateConstructor: new (init: Partial<TGlobal>) => TGlobal,
+    accountConstructor: new (init: Partial<TAccount>) => TAccount
+  ) {
+    this.globalStateFactory = new GlobalStateFactory(globalStateConstructor);
+    this.accountFactory = new AccountFactory(accountConstructor);
+  }
+
+  createGlobal(args: Partial<TGlobal>): TGlobal {
+    return this.globalStateFactory.create(args);
+  }
+
+  createAccount(args: Partial<TAccount>): TAccount {
+    return this.accountFactory.create(args);
+  }
+}
diff --git a/jslib/common/src/importers/ascendoCsvImporter.ts b/jslib/common/src/importers/ascendoCsvImporter.ts
index c8179dc6..aed1c3ab 100644
--- a/jslib/common/src/importers/ascendoCsvImporter.ts
+++ b/jslib/common/src/importers/ascendoCsvImporter.ts
@@ -1,55 +1,59 @@
-import { BaseImporter } from './baseImporter';
-import { Importer } from './importer';
+import { BaseImporter } from "./baseImporter";
+import { Importer } from "./importer";
 
-import { ImportResult } from '../models/domain/importResult';
+import { ImportResult } from "../models/domain/importResult";
 
 export class AscendoCsvImporter extends BaseImporter implements Importer {
-    parse(data: string): Promise<ImportResult> {
-        const result = new ImportResult();
-        const results = this.parseCsv(data, false);
-        if (results == null) {
-            result.success = false;
-            return Promise.resolve(result);
+  parse(data: string): Promise<ImportResult> {
+    const result = new ImportResult();
+    const results = this.parseCsv(data, false);
+    if (results == null) {
+      result.success = false;
+      return Promise.resolve(result);
+    }
+
+    results.forEach((value) => {
+      if (value.length < 2) {
+        return;
+      }
+
+      const cipher = this.initLoginCipher();
+      cipher.notes = this.getValueOrDefault(value[value.length - 1]);
+      cipher.name = this.getValueOrDefault(value[0], "--");
+
+      if (value.length > 2 && value.length % 2 === 0) {
+        for (let i = 0; i < value.length - 2; i += 2) {
+          const val: string = value[i + 2];
+          const field: string = value[i + 1];
+          if (this.isNullOrWhitespace(val) || this.isNullOrWhitespace(field)) {
+            continue;
+          }
+
+          const fieldLower = field.toLowerCase();
+          if (cipher.login.password == null && this.passwordFieldNames.indexOf(fieldLower) > -1) {
+            cipher.login.password = this.getValueOrDefault(val);
+          } else if (
+            cipher.login.username == null &&
+            this.usernameFieldNames.indexOf(fieldLower) > -1
+          ) {
+            cipher.login.username = this.getValueOrDefault(val);
+          } else if (
+            (cipher.login.uris == null || cipher.login.uris.length === 0) &&
+            this.uriFieldNames.indexOf(fieldLower) > -1
+          ) {
+            cipher.login.uris = this.makeUriArray(val);
+          } else {
+            this.processKvp(cipher, field, val);
+          }
         }
+      }
 
-        results.forEach(value => {
-            if (value.length < 2) {
-                return;
-            }
-
-            const cipher = this.initLoginCipher();
-            cipher.notes = this.getValueOrDefault(value[value.length - 1]);
-            cipher.name = this.getValueOrDefault(value[0], '--');
-
-            if (value.length > 2 && (value.length % 2) === 0) {
-                for (let i = 0; i < value.length - 2; i += 2) {
-                    const val: string = value[i + 2];
-                    const field: string = value[i + 1];
-                    if (this.isNullOrWhitespace(val) || this.isNullOrWhitespace(field)) {
-                        continue;
-                    }
-
-                    const fieldLower = field.toLowerCase();
-                    if (cipher.login.password == null && this.passwordFieldNames.indexOf(fieldLower) > -1) {
-                        cipher.login.password = this.getValueOrDefault(val);
-                    } else if (cipher.login.username == null &&
-                        this.usernameFieldNames.indexOf(fieldLower) > -1) {
-                        cipher.login.username = this.getValueOrDefault(val);
-                    } else if ((cipher.login.uris == null || cipher.login.uris.length === 0) &&
-                        this.uriFieldNames.indexOf(fieldLower) > -1) {
-                        cipher.login.uris = this.makeUriArray(val);
-                    } else {
-                        this.processKvp(cipher, field, val);
-                    }
-                }
-            }
-
-            this.convertToNoteIfNeeded(cipher);
-            this.cleanupCipher(cipher);
-            result.ciphers.push(cipher);
-        });
-
-        result.success = true;
-        return Promise.resolve(result);
-    }
+      this.convertToNoteIfNeeded(cipher);
+      this.cleanupCipher(cipher);
+      result.ciphers.push(cipher);
+    });
+
+    result.success = true;
+    return Promise.resolve(result);
+  }
 }
diff --git a/jslib/common/src/importers/avastCsvImporter.ts b/jslib/common/src/importers/avastCsvImporter.ts
index 5519b67a..9629fb2f 100644
--- a/jslib/common/src/importers/avastCsvImporter.ts
+++ b/jslib/common/src/importers/avastCsvImporter.ts
@@ -1,28 +1,28 @@
-import { BaseImporter } from './baseImporter';
-import { Importer } from './importer';
+import { BaseImporter } from "./baseImporter";
+import { Importer } from "./importer";
 
-import { ImportResult } from '../models/domain/importResult';
+import { ImportResult } from "../models/domain/importResult";
 
 export class AvastCsvImporter extends BaseImporter implements Importer {
-    parse(data: string): Promise<ImportResult> {
-        const result = new ImportResult();
-        const results = this.parseCsv(data, true);
-        if (results == null) {
-            result.success = false;
-            return Promise.resolve(result);
-        }
+  parse(data: string): Promise<ImportResult> {
+    const result = new ImportResult();
+    const results = this.parseCsv(data, true);
+    if (results == null) {
+      result.success = false;
+      return Promise.resolve(result);
+    }
 
-        results.forEach(value => {
-            const cipher = this.initLoginCipher();
-            cipher.name = this.getValueOrDefault(value.name);
-            cipher.login.uris = this.makeUriArray(value.web);
-            cipher.login.password = this.getValueOrDefault(value.password);
-            cipher.login.username = this.getValueOrDefault(value.login);
-            this.cleanupCipher(cipher);
-            result.ciphers.push(cipher);
-        });
+    results.forEach((value) => {
+      const cipher = this.initLoginCipher();
+      cipher.name = this.getValueOrDefault(value.name);
+      cipher.login.uris = this.makeUriArray(value.web);
+      cipher.login.password = this.getValueOrDefault(value.password);
+      cipher.login.username = this.getValueOrDefault(value.login);
+      this.cleanupCipher(cipher);
+      result.ciphers.push(cipher);
+    });
 
-        result.success = true;
-        return Promise.resolve(result);
-    }
+    result.success = true;
+    return Promise.resolve(result);
+  }
 }
diff --git a/jslib/common/src/importers/avastJsonImporter.ts b/jslib/common/src/importers/avastJsonImporter.ts
index 9f8d7752..fe853539 100644
--- a/jslib/common/src/importers/avastJsonImporter.ts
+++ b/jslib/common/src/importers/avastJsonImporter.ts
@@ -1,69 +1,69 @@
-import { BaseImporter } from './baseImporter';
-import { Importer } from './importer';
+import { BaseImporter } from "./baseImporter";
+import { Importer } from "./importer";
 
-import { ImportResult } from '../models/domain/importResult';
+import { ImportResult } from "../models/domain/importResult";
 
-import { CipherType } from '../enums/cipherType';
-import { SecureNoteType } from '../enums/secureNoteType';
+import { CipherType } from "../enums/cipherType";
+import { SecureNoteType } from "../enums/secureNoteType";
 
 export class AvastJsonImporter extends BaseImporter implements Importer {
-    parse(data: string): Promise<ImportResult> {
-        const result = new ImportResult();
-        const results = JSON.parse(data);
-        if (results == null) {
-            result.success = false;
-            return Promise.resolve(result);
-        }
+  parse(data: string): Promise<ImportResult> {
+    const result = new ImportResult();
+    const results = JSON.parse(data);
+    if (results == null) {
+      result.success = false;
+      return Promise.resolve(result);
+    }
 
-        if (results.logins != null) {
-            results.logins.forEach((value: any) => {
-                const cipher = this.initLoginCipher();
-                cipher.name = this.getValueOrDefault(value.custName);
-                cipher.notes = this.getValueOrDefault(value.note);
-                cipher.login.uris = this.makeUriArray(value.url);
-                cipher.login.password = this.getValueOrDefault(value.pwd);
-                cipher.login.username = this.getValueOrDefault(value.loginName);
-                this.cleanupCipher(cipher);
-                result.ciphers.push(cipher);
-            });
-        }
+    if (results.logins != null) {
+      results.logins.forEach((value: any) => {
+        const cipher = this.initLoginCipher();
+        cipher.name = this.getValueOrDefault(value.custName);
+        cipher.notes = this.getValueOrDefault(value.note);
+        cipher.login.uris = this.makeUriArray(value.url);
+        cipher.login.password = this.getValueOrDefault(value.pwd);
+        cipher.login.username = this.getValueOrDefault(value.loginName);
+        this.cleanupCipher(cipher);
+        result.ciphers.push(cipher);
+      });
+    }
 
-        if (results.notes != null) {
-            results.notes.forEach((value: any) => {
-                const cipher = this.initLoginCipher();
-                cipher.type = CipherType.SecureNote;
-                cipher.secureNote.type = SecureNoteType.Generic;
-                cipher.name = this.getValueOrDefault(value.label);
-                cipher.notes = this.getValueOrDefault(value.text);
-                this.cleanupCipher(cipher);
-                result.ciphers.push(cipher);
-            });
-        }
+    if (results.notes != null) {
+      results.notes.forEach((value: any) => {
+        const cipher = this.initLoginCipher();
+        cipher.type = CipherType.SecureNote;
+        cipher.secureNote.type = SecureNoteType.Generic;
+        cipher.name = this.getValueOrDefault(value.label);
+        cipher.notes = this.getValueOrDefault(value.text);
+        this.cleanupCipher(cipher);
+        result.ciphers.push(cipher);
+      });
+    }
 
-        if (results.cards != null) {
-            results.cards.forEach((value: any) => {
-                const cipher = this.initLoginCipher();
-                cipher.type = CipherType.Card;
-                cipher.name = this.getValueOrDefault(value.custName);
-                cipher.notes = this.getValueOrDefault(value.note);
-                cipher.card.cardholderName = this.getValueOrDefault(value.holderName);
-                cipher.card.number = this.getValueOrDefault(value.cardNumber);
-                cipher.card.code = this.getValueOrDefault(value.cvv);
-                cipher.card.brand = this.getCardBrand(cipher.card.number);
-                if (value.expirationDate != null) {
-                    if (value.expirationDate.month != null) {
-                        cipher.card.expMonth = value.expirationDate.month + '';
-                    }
-                    if (value.expirationDate.year != null) {
-                        cipher.card.expYear = value.expirationDate.year + '';
-                    }
-                }
-                this.cleanupCipher(cipher);
-                result.ciphers.push(cipher);
-            });
+    if (results.cards != null) {
+      results.cards.forEach((value: any) => {
+        const cipher = this.initLoginCipher();
+        cipher.type = CipherType.Card;
+        cipher.name = this.getValueOrDefault(value.custName);
+        cipher.notes = this.getValueOrDefault(value.note);
+        cipher.card.cardholderName = this.getValueOrDefault(value.holderName);
+        cipher.card.number = this.getValueOrDefault(value.cardNumber);
+        cipher.card.code = this.getValueOrDefault(value.cvv);
+        cipher.card.brand = this.getCardBrand(cipher.card.number);
+        if (value.expirationDate != null) {
+          if (value.expirationDate.month != null) {
+            cipher.card.expMonth = value.expirationDate.month + "";
+          }
+          if (value.expirationDate.year != null) {
+            cipher.card.expYear = value.expirationDate.year + "";
+          }
         }
-
-        result.success = true;
-        return Promise.resolve(result);
+        this.cleanupCipher(cipher);
+        result.ciphers.push(cipher);
+      });
     }
+
+    result.success = true;
+    return Promise.resolve(result);
+  }
 }
diff --git a/jslib/common/src/importers/aviraCsvImporter.ts b/jslib/common/src/importers/aviraCsvImporter.ts
index 1547d7f2..fa983080 100644
--- a/jslib/common/src/importers/aviraCsvImporter.ts
+++ b/jslib/common/src/importers/aviraCsvImporter.ts
@@ -1,36 +1,41 @@
-import { BaseImporter } from './baseImporter';
-import { Importer } from './importer';
+import { BaseImporter } from "./baseImporter";
+import { Importer } from "./importer";
 
-import { ImportResult } from '../models/domain/importResult';
+import { ImportResult } from "../models/domain/importResult";
 
 export class AviraCsvImporter extends BaseImporter implements Importer {
-    parse(data: string): Promise<ImportResult> {
-        const result = new ImportResult();
-        const results = this.parseCsv(data, true);
-        if (results == null) {
-            result.success = false;
-            return Promise.resolve(result);
-        }
+  parse(data: string): Promise<ImportResult> {
+    const result = new ImportResult();
+    const results = this.parseCsv(data, true);
+    if (results == null) {
+      result.success = false;
+      return Promise.resolve(result);
+    }
 
-        results.forEach(value => {
-            const cipher = this.initLoginCipher();
-            cipher.name = this.getValueOrDefault(value.name,
-                this.getValueOrDefault(this.nameFromUrl(value.website), '--'));
-            cipher.login.uris = this.makeUriArray(value.website);
-            cipher.login.password = this.getValueOrDefault(value.password);
+    results.forEach((value) => {
+      const cipher = this.initLoginCipher();
+      cipher.name = this.getValueOrDefault(
+        value.name,
+        this.getValueOrDefault(this.nameFromUrl(value.website), "--")
+      );
+      cipher.login.uris = this.makeUriArray(value.website);
+      cipher.login.password = this.getValueOrDefault(value.password);
 
-            if (this.isNullOrWhitespace(value.username) && !this.isNullOrWhitespace(value.secondary_username)) {
-                cipher.login.username = value.secondary_username;
-            } else {
-                cipher.login.username = this.getValueOrDefault(value.username);
-                cipher.notes = this.getValueOrDefault(value.secondary_username);
-            }
+      if (
+        this.isNullOrWhitespace(value.username) &&
+        !this.isNullOrWhitespace(value.secondary_username)
+      ) {
+        cipher.login.username = value.secondary_username;
+      } else {
+        cipher.login.username = this.getValueOrDefault(value.username);
+        cipher.notes = this.getValueOrDefault(value.secondary_username);
+      }
 
-            this.cleanupCipher(cipher);
-            result.ciphers.push(cipher);
-        });
+      this.cleanupCipher(cipher);
+      result.ciphers.push(cipher);
+    });
 
-        result.success = true;
-        return Promise.resolve(result);
-    }
+    result.success = true;
+    return Promise.resolve(result);
+  }
 }
diff --git a/jslib/common/src/importers/baseImporter.ts b/jslib/common/src/importers/baseImporter.ts
index 194d5843..65253c71 100644
--- a/jslib/common/src/importers/baseImporter.ts
+++ b/jslib/common/src/importers/baseImporter.ts
@@ -1,377 +1,457 @@
-import * as papa from 'papaparse';
+import * as papa from "papaparse";
 
-import { LogService } from '../abstractions/log.service';
+import { LogService } from "../abstractions/log.service";
 
-import { ImportResult } from '../models/domain/importResult';
+import { ImportResult } from "../models/domain/importResult";
 
-import { CipherView } from '../models/view/cipherView';
-import { CollectionView } from '../models/view/collectionView';
-import { LoginUriView } from '../models/view/loginUriView';
+import { CipherView } from "../models/view/cipherView";
+import { CollectionView } from "../models/view/collectionView";
+import { LoginUriView } from "../models/view/loginUriView";
 
-import { Utils } from '../misc/utils';
+import { Utils } from "../misc/utils";
 
-import { FieldView } from '../models/view/fieldView';
-import { FolderView } from '../models/view/folderView';
-import { LoginView } from '../models/view/loginView';
-import { SecureNoteView } from '../models/view/secureNoteView';
+import { FieldView } from "../models/view/fieldView";
+import { FolderView } from "../models/view/folderView";
+import { LoginView } from "../models/view/loginView";
+import { SecureNoteView } from "../models/view/secureNoteView";
 
-import { CipherRepromptType } from '../enums/cipherRepromptType';
-import { CipherType } from '../enums/cipherType';
-import { FieldType } from '../enums/fieldType';
-import { SecureNoteType } from '../enums/secureNoteType';
+import { CipherRepromptType } from "../enums/cipherRepromptType";
+import { CipherType } from "../enums/cipherType";
+import { FieldType } from "../enums/fieldType";
+import { SecureNoteType } from "../enums/secureNoteType";
 
-import { ConsoleLogService } from '../services/consoleLog.service';
+import { ConsoleLogService } from "../services/consoleLog.service";
 
 export abstract class BaseImporter {
-    organizationId: string = null;
-
-    protected logService: LogService = new ConsoleLogService(false);
-
-    protected newLineRegex = /(?:\r\n|\r|\n)/;
-
-    protected passwordFieldNames = [
-        'password', 'pass word', 'passphrase', 'pass phrase',
-        'pass', 'code', 'code word', 'codeword',
-        'secret', 'secret word', 'personpwd',
-        'key', 'keyword', 'key word', 'keyphrase', 'key phrase',
-        'form_pw', 'wppassword', 'pin', 'pwd', 'pw', 'pword', 'passwd',
-        'p', 'serial', 'serial#', 'license key', 'reg #',
-
-        // Non-English names
-        'passwort',
-    ];
-
-    protected usernameFieldNames = [
-        'user', 'name', 'user name', 'username', 'login name',
-        'email', 'e-mail', 'id', 'userid', 'user id',
-        'login', 'form_loginname', 'wpname', 'mail',
-        'loginid', 'login id', 'log', 'personlogin',
-        'first name', 'last name', 'card#', 'account #',
-        'member', 'member #',
-
-        // Non-English names
-        'nom', 'benutzername',
-    ];
-
-    protected notesFieldNames = [
-        'note', 'notes', 'comment', 'comments', 'memo',
-        'description', 'free form', 'freeform',
-        'free text', 'freetext', 'free',
-
-        // Non-English names
-        'kommentar',
-    ];
-
-    protected uriFieldNames: string[] = [
-        'url', 'hyper link', 'hyperlink', 'link',
-        'host', 'hostname', 'host name', 'server', 'address',
-        'hyper ref', 'href', 'web', 'website', 'web site', 'site',
-        'web-site', 'uri',
-
-        // Non-English names
-        'ort', 'adresse',
-    ];
-
-    protected parseCsvOptions = {
-        encoding: 'UTF-8',
-        skipEmptyLines: false,
-    };
-
-    protected get organization() {
-        return this.organizationId != null;
-    }
-
-    protected parseXml(data: string): Document {
-        const parser = new DOMParser();
-        const doc = parser.parseFromString(data, 'application/xml');
-        return doc != null && doc.querySelector('parsererror') == null ? doc : null;
-    }
-
-    protected parseCsv(data: string, header: boolean, options: any = {}): any[] {
-        const parseOptions = Object.assign({ header: header }, this.parseCsvOptions, options);
-        data = this.splitNewLine(data).join('\n').trim();
-        const result = papa.parse(data, parseOptions);
-        if (result.errors != null && result.errors.length > 0) {
-            result.errors.forEach(e => {
-                if (e.row != null) {
-                    // tslint:disable-next-line
-                    this.logService.warning('Error parsing row ' + e.row + ': ' + e.message);
-                }
-            });
-        }
-        return result.data && result.data.length > 0 ? result.data : null;
+  organizationId: string = null;
+
+  protected logService: LogService = new ConsoleLogService(false);
+
+  protected newLineRegex = /(?:\r\n|\r|\n)/;
+
+  protected passwordFieldNames = [
+    "password",
+    "pass word",
+    "passphrase",
+    "pass phrase",
+    "pass",
+    "code",
+    "code word",
+    "codeword",
+    "secret",
+    "secret word",
+    "personpwd",
+    "key",
+    "keyword",
+    "key word",
+    "keyphrase",
+    "key phrase",
+    "form_pw",
+    "wppassword",
+    "pin",
+    "pwd",
+    "pw",
+    "pword",
+    "passwd",
+    "p",
+    "serial",
+    "serial#",
+    "license key",
+    "reg #",
+
+    // Non-English names
+    "passwort",
+  ];
+
+  protected usernameFieldNames = [
+    "user",
+    "name",
+    "user name",
+    "username",
+    "login name",
+    "email",
+    "e-mail",
+    "id",
+    "userid",
+    "user id",
+    "login",
+    "form_loginname",
+    "wpname",
+    "mail",
+    "loginid",
+    "login id",
+    "log",
+    "personlogin",
+    "first name",
+    "last name",
+    "card#",
+    "account #",
+    "member",
+    "member #",
+
+    // Non-English names
+    "nom",
+    "benutzername",
+  ];
+
+  protected notesFieldNames = [
+    "note",
+    "notes",
+    "comment",
+    "comments",
+    "memo",
+    "description",
+    "free form",
+    "freeform",
+    "free text",
+    "freetext",
+    "free",
+
+    // Non-English names
+    "kommentar",
+  ];
+
+  protected uriFieldNames: string[] = [
+    "url",
+    "hyper link",
+    "hyperlink",
+    "link",
+    "host",
+    "hostname",
+    "host name",
+    "server",
+    "address",
+    "hyper ref",
+    "href",
+    "web",
+    "website",
+    "web site",
+    "site",
+    "web-site",
+    "uri",
+
+    // Non-English names
+    "ort",
+    "adresse",
+  ];
+
+  protected parseCsvOptions = {
+    encoding: "UTF-8",
+    skipEmptyLines: false,
+  };
+
+  protected get organization() {
+    return this.organizationId != null;
+  }
+
+  protected parseXml(data: string): Document {
+    const parser = new DOMParser();
+    const doc = parser.parseFromString(data, "application/xml");
+    return doc != null && doc.querySelector("parsererror") == null ? doc : null;
+  }
+
+  protected parseCsv(data: string, header: boolean, options: any = {}): any[] {
+    const parseOptions: papa.ParseConfig<string> = Object.assign(
+      { header: header },
+      this.parseCsvOptions,
+      options
+    );
+    data = this.splitNewLine(data).join("\n").trim();
+    const result = papa.parse(data, parseOptions);
+    if (result.errors != null && result.errors.length > 0) {
+      result.errors.forEach((e) => {
+        if (e.row != null) {
+          // tslint:disable-next-line
+          this.logService.warning("Error parsing row " + e.row + ": " + e.message);
+        }
+      });
     }
+    return result.data && result.data.length > 0 ? result.data : null;
+  }
 
-    protected parseSingleRowCsv(rowData: string) {
-        if (this.isNullOrWhitespace(rowData)) {
-            return null;
-        }
-        const parsedRow = this.parseCsv(rowData, false);
-        if (parsedRow != null && parsedRow.length > 0 && parsedRow[0].length > 0) {
-            return parsedRow[0];
-        }
-        return null;
+  protected parseSingleRowCsv(rowData: string) {
+    if (this.isNullOrWhitespace(rowData)) {
+      return null;
     }
+    const parsedRow = this.parseCsv(rowData, false);
+    if (parsedRow != null && parsedRow.length > 0 && parsedRow[0].length > 0) {
+      return parsedRow[0];
+    }
+    return null;
+  }
 
-    protected makeUriArray(uri: string | string[]): LoginUriView[] {
-        if (uri == null) {
-            return null;
-        }
-
-        if (typeof uri === 'string') {
-            const loginUri = new LoginUriView();
-            loginUri.uri = this.fixUri(uri);
-            if (this.isNullOrWhitespace(loginUri.uri)) {
-                return null;
-            }
-            loginUri.match = null;
-            return [loginUri];
-        }
-
-        if (uri.length > 0) {
-            const returnArr: LoginUriView[] = [];
-            uri.forEach(u => {
-                const loginUri = new LoginUriView();
-                loginUri.uri = this.fixUri(u);
-                if (this.isNullOrWhitespace(loginUri.uri)) {
-                    return;
-                }
-                loginUri.match = null;
-                returnArr.push(loginUri);
-            });
-            return returnArr.length === 0 ? null : returnArr;
-        }
+  protected makeUriArray(uri: string | string[]): LoginUriView[] {
+    if (uri == null) {
+      return null;
+    }
 
+    if (typeof uri === "string") {
+      const loginUri = new LoginUriView();
+      loginUri.uri = this.fixUri(uri);
+      if (this.isNullOrWhitespace(loginUri.uri)) {
         return null;
+      }
+      loginUri.match = null;
+      return [loginUri];
     }
 
-    protected fixUri(uri: string) {
-        if (uri == null) {
-            return null;
-        }
-        uri = uri.trim();
-        if (uri.indexOf('://') === -1 && uri.indexOf('.') >= 0) {
-            uri = 'http://' + uri;
-        }
-        if (uri.length > 1000) {
-            return uri.substring(0, 1000);
-        }
-        return uri;
+    if (uri.length > 0) {
+      const returnArr: LoginUriView[] = [];
+      uri.forEach((u) => {
+        const loginUri = new LoginUriView();
+        loginUri.uri = this.fixUri(u);
+        if (this.isNullOrWhitespace(loginUri.uri)) {
+          return;
+        }
+        loginUri.match = null;
+        returnArr.push(loginUri);
+      });
+      return returnArr.length === 0 ? null : returnArr;
     }
 
-    protected nameFromUrl(url: string) {
-        const hostname = Utils.getHostname(url);
-        if (this.isNullOrWhitespace(hostname)) {
-            return null;
-        }
-        return hostname.startsWith('www.') ? hostname.replace('www.', '') : hostname;
-    }
+    return null;
+  }
 
-    protected isNullOrWhitespace(str: string): boolean {
-        return Utils.isNullOrWhitespace(str);
+  protected fixUri(uri: string) {
+    if (uri == null) {
+      return null;
     }
-
-    protected getValueOrDefault(str: string, defaultValue: string = null): string {
-        if (this.isNullOrWhitespace(str)) {
-            return defaultValue;
-        }
-        return str;
+    uri = uri.trim();
+    if (uri.indexOf("://") === -1 && uri.indexOf(".") >= 0) {
+      uri = "http://" + uri;
     }
-
-    protected splitNewLine(str: string): string[] {
-        return str.split(this.newLineRegex);
+    if (uri.length > 1000) {
+      return uri.substring(0, 1000);
     }
+    return uri;
+  }
 
-    // ref https://stackoverflow.com/a/5911300
-    protected getCardBrand(cardNum: string) {
-        if (this.isNullOrWhitespace(cardNum)) {
-            return null;
-        }
-
-        // Visa
-        let re = new RegExp('^4');
-        if (cardNum.match(re) != null) {
-            return 'Visa';
-        }
-
-        // Mastercard
-        // Updated for Mastercard 2017 BINs expansion
-        if (/^(5[1-5][0-9]{14}|2(22[1-9][0-9]{12}|2[3-9][0-9]{13}|[3-6][0-9]{14}|7[0-1][0-9]{13}|720[0-9]{12}))$/
-            .test(cardNum)) {
-            return 'Mastercard';
-        }
-
-        // AMEX
-        re = new RegExp('^3[47]');
-        if (cardNum.match(re) != null) {
-            return 'Amex';
-        }
-
-        // Discover
-        re = new RegExp('^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)');
-        if (cardNum.match(re) != null) {
-            return 'Discover';
-        }
+  protected nameFromUrl(url: string) {
+    const hostname = Utils.getHostname(url);
+    if (this.isNullOrWhitespace(hostname)) {
+      return null;
+    }
+    return hostname.startsWith("www.") ? hostname.replace("www.", "") : hostname;
+  }
 
-        // Diners
-        re = new RegExp('^36');
-        if (cardNum.match(re) != null) {
-            return 'Diners Club';
-        }
+  protected isNullOrWhitespace(str: string): boolean {
+    return Utils.isNullOrWhitespace(str);
+  }
 
-        // Diners - Carte Blanche
-        re = new RegExp('^30[0-5]');
-        if (cardNum.match(re) != null) {
-            return 'Diners Club';
-        }
+  protected getValueOrDefault(str: string, defaultValue: string = null): string {
+    if (this.isNullOrWhitespace(str)) {
+      return defaultValue;
+    }
+    return str;
+  }
 
-        // JCB
-        re = new RegExp('^35(2[89]|[3-8][0-9])');
-        if (cardNum.match(re) != null) {
-            return 'JCB';
-        }
+  protected splitNewLine(str: string): string[] {
+    return str.split(this.newLineRegex);
+  }
 
-        // Visa Electron
-        re = new RegExp('^(4026|417500|4508|4844|491(3|7))');
-        if (cardNum.match(re) != null) {
-            return 'Visa';
-        }
+  // ref https://stackoverflow.com/a/5911300
+  protected getCardBrand(cardNum: string) {
+    if (this.isNullOrWhitespace(cardNum)) {
+      return null;
+    }
 
-        return null;
+    // Visa
+    let re = new RegExp("^4");
+    if (cardNum.match(re) != null) {
+      return "Visa";
     }
 
-    protected setCardExpiration(cipher: CipherView, expiration: string): boolean {
-        if (!this.isNullOrWhitespace(expiration)) {
-            expiration = expiration.replace(/\s/g, '');
-            const parts = expiration.split('/');
-            if (parts.length === 2) {
-                let month: string = null;
-                let year: string = null;
-                if (parts[0].length === 1 || parts[0].length === 2) {
-                    month = parts[0];
-                    if (month.length === 2 && month[0] === '0') {
-                        month = month.substr(1, 1);
-                    }
-                }
-                if (parts[1].length === 2 || parts[1].length === 4) {
-                    year = month.length === 2 ? '20' + parts[1] : parts[1];
-                }
-                if (month != null && year != null) {
-                    cipher.card.expMonth = month;
-                    cipher.card.expYear = year;
-                    return true;
-                }
-            }
-        }
-        return false;
+    // Mastercard
+    // Updated for Mastercard 2017 BINs expansion
+    if (
+      /^(5[1-5][0-9]{14}|2(22[1-9][0-9]{12}|2[3-9][0-9]{13}|[3-6][0-9]{14}|7[0-1][0-9]{13}|720[0-9]{12}))$/.test(
+        cardNum
+      )
+    ) {
+      return "Mastercard";
     }
 
-    protected moveFoldersToCollections(result: ImportResult) {
-        result.folderRelationships.forEach(r => result.collectionRelationships.push(r));
-        result.collections = result.folders.map(f => {
-            const collection = new CollectionView();
-            collection.name = f.name;
-            return collection;
-        });
-        result.folderRelationships = [];
-        result.folders = [];
+    // AMEX
+    re = new RegExp("^3[47]");
+    if (cardNum.match(re) != null) {
+      return "Amex";
     }
 
-    protected querySelectorDirectChild(parentEl: Element, query: string) {
-        const els = this.querySelectorAllDirectChild(parentEl, query);
-        return els.length === 0 ? null : els[0];
+    // Discover
+    re = new RegExp(
+      "^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)"
+    );
+    if (cardNum.match(re) != null) {
+      return "Discover";
     }
 
-    protected querySelectorAllDirectChild(parentEl: Element, query: string) {
-        return Array.from(parentEl.querySelectorAll(query)).filter(el => el.parentNode === parentEl);
+    // Diners
+    re = new RegExp("^36");
+    if (cardNum.match(re) != null) {
+      return "Diners Club";
     }
 
-    protected initLoginCipher() {
-        const cipher = new CipherView();
-        cipher.favorite = false;
-        cipher.notes = '';
-        cipher.fields = [];
-        cipher.login = new LoginView();
-        cipher.type = CipherType.Login;
-        return cipher;
+    // Diners - Carte Blanche
+    re = new RegExp("^30[0-5]");
+    if (cardNum.match(re) != null) {
+      return "Diners Club";
     }
 
-    protected cleanupCipher(cipher: CipherView) {
-        if (cipher == null) {
-            return;
-        }
-        if (cipher.type !== CipherType.Login) {
-            cipher.login = null;
-        }
-        if (this.isNullOrWhitespace(cipher.name)) {
-            cipher.name = '--';
-        }
-        if (this.isNullOrWhitespace(cipher.notes)) {
-            cipher.notes = null;
-        } else {
-            cipher.notes = cipher.notes.trim();
-        }
-        if (cipher.fields != null && cipher.fields.length === 0) {
-            cipher.fields = null;
-        }
+    // JCB
+    re = new RegExp("^35(2[89]|[3-8][0-9])");
+    if (cardNum.match(re) != null) {
+      return "JCB";
     }
 
-    protected processKvp(cipher: CipherView, key: string, value: string, type: FieldType = FieldType.Text) {
-        if (this.isNullOrWhitespace(value)) {
-            return;
-        }
-        if (this.isNullOrWhitespace(key)) {
-            key = '';
-        }
-        if (value.length > 200 || value.trim().search(this.newLineRegex) > -1) {
-            if (cipher.notes == null) {
-                cipher.notes = '';
-            }
-            cipher.notes += (key + ': ' + this.splitNewLine(value).join('\n') + '\n');
-        } else {
-            if (cipher.fields == null) {
-                cipher.fields = [];
-            }
-            const field = new FieldView();
-            field.type = type;
-            field.name = key;
-            field.value = value;
-            cipher.fields.push(field);
-        }
+    // Visa Electron
+    re = new RegExp("^(4026|417500|4508|4844|491(3|7))");
+    if (cardNum.match(re) != null) {
+      return "Visa";
     }
 
-    protected processFolder(result: ImportResult, folderName: string) {
-        let folderIndex = result.folders.length;
-        const hasFolder = !this.isNullOrWhitespace(folderName);
-        let addFolder = hasFolder;
+    return null;
+  }
+
+  protected setCardExpiration(cipher: CipherView, expiration: string): boolean {
+    if (!this.isNullOrWhitespace(expiration)) {
+      expiration = expiration.replace(/\s/g, "");
+      const parts = expiration.split("/");
+      if (parts.length === 2) {
+        let month: string = null;
+        let year: string = null;
+        if (parts[0].length === 1 || parts[0].length === 2) {
+          month = parts[0];
+          if (month.length === 2 && month[0] === "0") {
+            month = month.substr(1, 1);
+          }
+        }
+        if (parts[1].length === 2 || parts[1].length === 4) {
+          year = month.length === 2 ? "20" + parts[1] : parts[1];
+        }
+        if (month != null && year != null) {
+          cipher.card.expMonth = month;
+          cipher.card.expYear = year;
+          return true;
+        }
+      }
+    }
+    return false;
+  }
+
+  protected moveFoldersToCollections(result: ImportResult) {
+    result.folderRelationships.forEach((r) => result.collectionRelationships.push(r));
+    result.collections = result.folders.map((f) => {
+      const collection = new CollectionView();
+      collection.name = f.name;
+      return collection;
+    });
+    result.folderRelationships = [];
+    result.folders = [];
+  }
+
+  protected querySelectorDirectChild(parentEl: Element, query: string) {
+    const els = this.querySelectorAllDirectChild(parentEl, query);
+    return els.length === 0 ? null : els[0];
+  }
+
+  protected querySelectorAllDirectChild(parentEl: Element, query: string) {
+    return Array.from(parentEl.querySelectorAll(query)).filter((el) => el.parentNode === parentEl);
+  }
+
+  protected initLoginCipher() {
+    const cipher = new CipherView();
+    cipher.favorite = false;
+    cipher.notes = "";
+    cipher.fields = [];
+    cipher.login = new LoginView();
+    cipher.type = CipherType.Login;
+    return cipher;
+  }
+
+  protected cleanupCipher(cipher: CipherView) {
+    if (cipher == null) {
+      return;
+    }
+    if (cipher.type !== CipherType.Login) {
+      cipher.login = null;
+    }
+    if (this.isNullOrWhitespace(cipher.name)) {
+      cipher.name = "--";
+    }
+    if (this.isNullOrWhitespace(cipher.notes)) {
+      cipher.notes = null;
+    } else {
+      cipher.notes = cipher.notes.trim();
+    }
+    if (cipher.fields != null && cipher.fields.length === 0) {
+      cipher.fields = null;
+    }
+  }
+
+  protected processKvp(
+    cipher: CipherView,
+    key: string,
+    value: string,
+    type: FieldType = FieldType.Text
+  ) {
+    if (this.isNullOrWhitespace(value)) {
+      return;
+    }
+    if (this.isNullOrWhitespace(key)) {
+      key = "";
+    }
+    if (value.length > 200 || value.trim().search(this.newLineRegex) > -1) {
+      if (cipher.notes == null) {
+        cipher.notes = "";
+      }
+      cipher.notes += key + ": " + this.splitNewLine(value).join("\n") + "\n";
+    } else {
+      if (cipher.fields == null) {
+        cipher.fields = [];
+      }
+      const field = new FieldView();
+      field.type = type;
+      field.name = key;
+      field.value = value;
+      cipher.fields.push(field);
+    }
+  }
 
-        if (hasFolder) {
-            for (let i = 0; i < result.folders.length; i++) {
-                if (result.folders[i].name === folderName) {
-                    addFolder = false;
-                    folderIndex = i;
-                    break;
-                }
-            }
-        }
+  protected processFolder(result: ImportResult, folderName: string) {
+    let folderIndex = result.folders.length;
+    const hasFolder = !this.isNullOrWhitespace(folderName);
+    let addFolder = hasFolder;
 
-        if (addFolder) {
-            const f = new FolderView();
-            f.name = folderName;
-            result.folders.push(f);
-        }
-        if (hasFolder) {
-            result.folderRelationships.push([result.ciphers.length, folderIndex]);
+    if (hasFolder) {
+      for (let i = 0; i < result.folders.length; i++) {
+        if (result.folders[i].name === folderName) {
+          addFolder = false;
+          folderIndex = i;
+          break;
         }
+      }
     }
 
-    protected convertToNoteIfNeeded(cipher: CipherView) {
-        if (cipher.type === CipherType.Login && this.isNullOrWhitespace(cipher.login.username) &&
-            this.isNullOrWhitespace(cipher.login.password) &&
-            (cipher.login.uris == null || cipher.login.uris.length === 0)) {
-            cipher.type = CipherType.SecureNote;
-            cipher.secureNote = new SecureNoteView();
-            cipher.secureNote.type = SecureNoteType.Generic;
-        }
+    if (addFolder) {
+      const f = new FolderView();
+      f.name = folderName;
+      result.folders.push(f);
+    }
+    if (hasFolder) {
+      result.folderRelationships.push([result.ciphers.length, folderIndex]);
+    }
+  }
+
+  protected convertToNoteIfNeeded(cipher: CipherView) {
+    if (
+      cipher.type === CipherType.Login &&
+      this.isNullOrWhitespace(cipher.login.username) &&
+      this.isNullOrWhitespace(cipher.login.password) &&
+      (cipher.login.uris == null || cipher.login.uris.length === 0)
+    ) {
+      cipher.type = CipherType.SecureNote;
+      cipher.secureNote = new SecureNoteView();
+      cipher.secureNote.type = SecureNoteType.Generic;
     }
+  }
 }
diff --git a/jslib/common/src/importers/bitwardenCsvImporter.ts b/jslib/common/src/importers/bitwardenCsvImporter.ts
index f2ffeae5..b7ec11c3 100644
--- a/jslib/common/src/importers/bitwardenCsvImporter.ts
+++ b/jslib/common/src/importers/bitwardenCsvImporter.ts
@@ -1,118 +1,122 @@
-import { BaseImporter } from './baseImporter';
-import { Importer } from './importer';
+import { BaseImporter } from "./baseImporter";
+import { Importer } from "./importer";
 
-import { ImportResult } from '../models/domain/importResult';
+import { ImportResult } from "../models/domain/importResult";
 
-import { CipherView } from '../models/view/cipherView';
-import { CollectionView } from '../models/view/collectionView';
-import { FieldView } from '../models/view/fieldView';
-import { FolderView } from '../models/view/folderView';
-import { LoginView } from '../models/view/loginView';
-import { SecureNoteView } from '../models/view/secureNoteView';
+import { CipherView } from "../models/view/cipherView";
+import { CollectionView } from "../models/view/collectionView";
+import { FieldView } from "../models/view/fieldView";
+import { FolderView } from "../models/view/folderView";
+import { LoginView } from "../models/view/loginView";
+import { SecureNoteView } from "../models/view/secureNoteView";
 
-import { CipherRepromptType } from '../enums/cipherRepromptType';
-import { CipherType } from '../enums/cipherType';
-import { FieldType } from '../enums/fieldType';
-import { SecureNoteType } from '../enums/secureNoteType';
+import { CipherRepromptType } from "../enums/cipherRepromptType";
+import { CipherType } from "../enums/cipherType";
+import { FieldType } from "../enums/fieldType";
+import { SecureNoteType } from "../enums/secureNoteType";
 
 export class BitwardenCsvImporter extends BaseImporter implements Importer {
-    parse(data: string): Promise<ImportResult> {
-        const result = new ImportResult();
-        const results = this.parseCsv(data, true);
-        if (results == null) {
-            result.success = false;
-            return Promise.resolve(result);
-        }
-
-        results.forEach(value => {
-            if (this.organization && !this.isNullOrWhitespace(value.collections)) {
-                const collections = (value.collections as string).split(',');
-                collections.forEach(col => {
-                    let addCollection = true;
-                    let collectionIndex = result.collections.length;
-
-                    for (let i = 0; i < result.collections.length; i++) {
-                        if (result.collections[i].name === col) {
-                            addCollection = false;
-                            collectionIndex = i;
-                            break;
-                        }
-                    }
-
-                    if (addCollection) {
-                        const collection = new CollectionView();
-                        collection.name = col;
-                        result.collections.push(collection);
-                    }
-
-                    result.collectionRelationships.push([result.ciphers.length, collectionIndex]);
-                });
-            } else if (!this.organization) {
-                this.processFolder(result, value.folder);
-            }
-
-            const cipher = new CipherView();
-            cipher.favorite = !this.organization && this.getValueOrDefault(value.favorite, '0') !== '0' ? true : false;
-            cipher.type = CipherType.Login;
-            cipher.notes = this.getValueOrDefault(value.notes);
-            cipher.name = this.getValueOrDefault(value.name, '--');
-            try {
-                cipher.reprompt = parseInt(this.getValueOrDefault(value.reprompt, CipherRepromptType.None.toString()), 10);
-            } catch (e) {
-                // tslint:disable-next-line
-                console.error('Unable to parse reprompt value', e);
-                cipher.reprompt = CipherRepromptType.None;
-            }
+  parse(data: string): Promise<ImportResult> {
+    const result = new ImportResult();
+    const results = this.parseCsv(data, true);
+    if (results == null) {
+      result.success = false;
+      return Promise.resolve(result);
+    }
 
-            if (!this.isNullOrWhitespace(value.fields)) {
-                const fields = this.splitNewLine(value.fields);
-                for (let i = 0; i < fields.length; i++) {
-                    if (this.isNullOrWhitespace(fields[i])) {
-                        continue;
-                    }
-
-                    const delimPosition = fields[i].lastIndexOf(': ');
-                    if (delimPosition === -1) {
-                        continue;
-                    }
-
-                    if (cipher.fields == null) {
-                        cipher.fields = [];
-                    }
-
-                    const field = new FieldView();
-                    field.name = fields[i].substr(0, delimPosition);
-                    field.value = null;
-                    field.type = FieldType.Text;
-                    if (fields[i].length > (delimPosition + 2)) {
-                        field.value = fields[i].substr(delimPosition + 2);
-                    }
-                    cipher.fields.push(field);
-                }
+    results.forEach((value) => {
+      if (this.organization && !this.isNullOrWhitespace(value.collections)) {
+        const collections = (value.collections as string).split(",");
+        collections.forEach((col) => {
+          let addCollection = true;
+          let collectionIndex = result.collections.length;
+
+          for (let i = 0; i < result.collections.length; i++) {
+            if (result.collections[i].name === col) {
+              addCollection = false;
+              collectionIndex = i;
+              break;
             }
+          }
 
-            const valueType = value.type != null ? value.type.toLowerCase() : null;
-            switch (valueType) {
-                case 'note':
-                    cipher.type = CipherType.SecureNote;
-                    cipher.secureNote = new SecureNoteView();
-                    cipher.secureNote.type = SecureNoteType.Generic;
-                    break;
-                default:
-                    cipher.type = CipherType.Login;
-                    cipher.login = new LoginView();
-                    cipher.login.totp = this.getValueOrDefault(value.login_totp || value.totp);
-                    cipher.login.username = this.getValueOrDefault(value.login_username || value.username);
-                    cipher.login.password = this.getValueOrDefault(value.login_password || value.password);
-                    const uris = this.parseSingleRowCsv(value.login_uri || value.uri);
-                    cipher.login.uris = this.makeUriArray(uris);
-                    break;
-            }
+          if (addCollection) {
+            const collection = new CollectionView();
+            collection.name = col;
+            result.collections.push(collection);
+          }
 
-            result.ciphers.push(cipher);
+          result.collectionRelationships.push([result.ciphers.length, collectionIndex]);
         });
-
-        result.success = true;
-        return Promise.resolve(result);
-    }
+      } else if (!this.organization) {
+        this.processFolder(result, value.folder);
+      }
+
+      const cipher = new CipherView();
+      cipher.favorite =
+        !this.organization && this.getValueOrDefault(value.favorite, "0") !== "0" ? true : false;
+      cipher.type = CipherType.Login;
+      cipher.notes = this.getValueOrDefault(value.notes);
+      cipher.name = this.getValueOrDefault(value.name, "--");
+      try {
+        cipher.reprompt = parseInt(
+          this.getValueOrDefault(value.reprompt, CipherRepromptType.None.toString()),
+          10
+        );
+      } catch (e) {
+        // tslint:disable-next-line
+        console.error("Unable to parse reprompt value", e);
+        cipher.reprompt = CipherRepromptType.None;
+      }
+
+      if (!this.isNullOrWhitespace(value.fields)) {
+        const fields = this.splitNewLine(value.fields);
+        for (let i = 0; i < fields.length; i++) {
+          if (this.isNullOrWhitespace(fields[i])) {
+            continue;
+          }
+
+          const delimPosition = fields[i].lastIndexOf(": ");
+          if (delimPosition === -1) {
+            continue;
+          }
+
+          if (cipher.fields == null) {
+            cipher.fields = [];
+          }
+
+          const field = new FieldView();
+          field.name = fields[i].substr(0, delimPosition);
+          field.value = null;
+          field.type = FieldType.Text;
+          if (fields[i].length > delimPosition + 2) {
+            field.value = fields[i].substr(delimPosition + 2);
+          }
+          cipher.fields.push(field);
+        }
+      }
+
+      const valueType = value.type != null ? value.type.toLowerCase() : null;
+      switch (valueType) {
+        case "note":
+          cipher.type = CipherType.SecureNote;
+          cipher.secureNote = new SecureNoteView();
+          cipher.secureNote.type = SecureNoteType.Generic;
+          break;
+        default:
+          cipher.type = CipherType.Login;
+          cipher.login = new LoginView();
+          cipher.login.totp = this.getValueOrDefault(value.login_totp || value.totp);
+          cipher.login.username = this.getValueOrDefault(value.login_username || value.username);
+          cipher.login.password = this.getValueOrDefault(value.login_password || value.password);
+          const uris = this.parseSingleRowCsv(value.login_uri || value.uri);
+          cipher.login.uris = this.makeUriArray(uris);
+          break;
+      }
+
+      result.ciphers.push(cipher);
+    });
+
+    result.success = true;
+    return Promise.resolve(result);
+  }
 }
diff --git a/jslib/common/src/importers/bitwardenJsonImporter.ts b/jslib/common/src/importers/bitwardenJsonImporter.ts
index 195708c0..bef77860 100644
--- a/jslib/common/src/importers/bitwardenJsonImporter.ts
+++ b/jslib/common/src/importers/bitwardenJsonImporter.ts
@@ -1,159 +1,174 @@
-import { BaseImporter } from './baseImporter';
-import { Importer } from './importer';
+import { BaseImporter } from "./baseImporter";
+import { Importer } from "./importer";
 
-import { EncString } from '../models/domain/encString';
-import { ImportResult } from '../models/domain/importResult';
+import { EncString } from "../models/domain/encString";
+import { ImportResult } from "../models/domain/importResult";
 
-import { CipherWithIds } from '../models/export/cipherWithIds';
-import { CollectionWithId } from '../models/export/collectionWithId';
-import { FolderWithId } from '../models/export/folderWithId';
+import { CipherWithIds } from "../models/export/cipherWithIds";
+import { CollectionWithId } from "../models/export/collectionWithId";
+import { FolderWithId } from "../models/export/folderWithId";
 
-import { CryptoService } from '../abstractions/crypto.service';
-import { I18nService } from '../abstractions/i18n.service';
+import { CryptoService } from "../abstractions/crypto.service";
+import { I18nService } from "../abstractions/i18n.service";
 
 export class BitwardenJsonImporter extends BaseImporter implements Importer {
-    private results: any;
-    private result: ImportResult;
-
-    constructor(private cryptoService: CryptoService, private i18nService: I18nService) {
-        super();
+  private results: any;
+  private result: ImportResult;
+
+  constructor(private cryptoService: CryptoService, private i18nService: I18nService) {
+    super();
+  }
+
+  async parse(data: string): Promise<ImportResult> {
+    this.result = new ImportResult();
+    this.results = JSON.parse(data);
+    if (this.results == null || this.results.items == null || this.results.items.length === 0) {
+      this.result.success = false;
+      return this.result;
     }
 
-    async parse(data: string): Promise<ImportResult> {
-        this.result = new ImportResult();
-        this.results = JSON.parse(data);
-        if (this.results == null || this.results.items == null || this.results.items.length === 0) {
-            this.result.success = false;
-            return this.result;
-        }
-
-        if (this.results.encrypted) {
-            await this.parseEncrypted();
-        } else {
-            this.parseDecrypted();
-        }
+    if (this.results.encrypted) {
+      await this.parseEncrypted();
+    } else {
+      this.parseDecrypted();
+    }
 
-        return this.result;
+    return this.result;
+  }
+
+  private async parseEncrypted() {
+    if (this.results.encKeyValidation_DO_NOT_EDIT != null) {
+      const orgKey = await this.cryptoService.getOrgKey(this.organizationId);
+      const encKeyValidation = new EncString(this.results.encKeyValidation_DO_NOT_EDIT);
+      const encKeyValidationDecrypt = await this.cryptoService.decryptToUtf8(
+        encKeyValidation,
+        orgKey
+      );
+      if (encKeyValidationDecrypt === null) {
+        this.result.success = false;
+        this.result.errorMessage = this.i18nService.t("importEncKeyError");
+        return;
+      }
     }
 
-    private async parseEncrypted() {
-        if (this.results.encKeyValidation_DO_NOT_EDIT != null) {
-            const orgKey = await this.cryptoService.getOrgKey(this.organizationId);
-            const encKeyValidation = new EncString(this.results.encKeyValidation_DO_NOT_EDIT);
-            const encKeyValidationDecrypt = await this.cryptoService.decryptToUtf8(encKeyValidation, orgKey);
-            if (encKeyValidationDecrypt === null) {
-                this.result.success = false;
-                this.result.errorMessage = this.i18nService.t('importEncKeyError');
-                return;
-            }
+    const groupingsMap = new Map<string, number>();
+
+    if (this.organization && this.results.collections != null) {
+      for (const c of this.results.collections as CollectionWithId[]) {
+        const collection = CollectionWithId.toDomain(c);
+        if (collection != null) {
+          collection.id = null;
+          collection.organizationId = this.organizationId;
+          const view = await collection.decrypt();
+          groupingsMap.set(c.id, this.result.collections.length);
+          this.result.collections.push(view);
         }
-
-        const groupingsMap = new Map<string, number>();
-
-        if (this.organization && this.results.collections != null) {
-            for (const c of this.results.collections as CollectionWithId[]) {
-                const collection = CollectionWithId.toDomain(c);
-                if (collection != null) {
-                    collection.id = null;
-                    collection.organizationId = this.organizationId;
-                    const view = await collection.decrypt();
-                    groupingsMap.set(c.id, this.result.collections.length);
-                    this.result.collections.push(view);
-                }
-            }
-        } else if (!this.organization && this.results.folders != null) {
-            for (const f of this.results.folders as FolderWithId[]) {
-                const folder = FolderWithId.toDomain(f);
-                if (folder != null) {
-                    folder.id = null;
-                    const view = await folder.decrypt();
-                    groupingsMap.set(f.id, this.result.folders.length);
-                    this.result.folders.push(view);
-                }
-            }
+      }
+    } else if (!this.organization && this.results.folders != null) {
+      for (const f of this.results.folders as FolderWithId[]) {
+        const folder = FolderWithId.toDomain(f);
+        if (folder != null) {
+          folder.id = null;
+          const view = await folder.decrypt();
+          groupingsMap.set(f.id, this.result.folders.length);
+          this.result.folders.push(view);
         }
+      }
+    }
 
-        for (const c of this.results.items as CipherWithIds[]) {
-            const cipher = CipherWithIds.toDomain(c);
-            // reset ids incase they were set for some reason
-            cipher.id = null;
-            cipher.folderId = null;
-            cipher.organizationId = this.organizationId;
-            cipher.collectionIds = null;
-
-            // make sure password history is limited
-            if (cipher.passwordHistory != null && cipher.passwordHistory.length > 5) {
-                cipher.passwordHistory = cipher.passwordHistory.slice(0, 5);
-            }
-
-            if (!this.organization && c.folderId != null && groupingsMap.has(c.folderId)) {
-                this.result.folderRelationships.push([this.result.ciphers.length, groupingsMap.get(c.folderId)]);
-            } else if (this.organization && c.collectionIds != null) {
-                c.collectionIds.forEach(cId => {
-                    if (groupingsMap.has(cId)) {
-                        this.result.collectionRelationships.push([this.result.ciphers.length, groupingsMap.get(cId)]);
-                    }
-                });
-            }
-
-            const view = await cipher.decrypt();
-            this.cleanupCipher(view);
-            this.result.ciphers.push(view);
-        }
+    for (const c of this.results.items as CipherWithIds[]) {
+      const cipher = CipherWithIds.toDomain(c);
+      // reset ids incase they were set for some reason
+      cipher.id = null;
+      cipher.folderId = null;
+      cipher.organizationId = this.organizationId;
+      cipher.collectionIds = null;
+
+      // make sure password history is limited
+      if (cipher.passwordHistory != null && cipher.passwordHistory.length > 5) {
+        cipher.passwordHistory = cipher.passwordHistory.slice(0, 5);
+      }
+
+      if (!this.organization && c.folderId != null && groupingsMap.has(c.folderId)) {
+        this.result.folderRelationships.push([
+          this.result.ciphers.length,
+          groupingsMap.get(c.folderId),
+        ]);
+      } else if (this.organization && c.collectionIds != null) {
+        c.collectionIds.forEach((cId) => {
+          if (groupingsMap.has(cId)) {
+            this.result.collectionRelationships.push([
+              this.result.ciphers.length,
+              groupingsMap.get(cId),
+            ]);
+          }
+        });
+      }
 
-        this.result.success = true;
+      const view = await cipher.decrypt();
+      this.cleanupCipher(view);
+      this.result.ciphers.push(view);
     }
 
-    private parseDecrypted() {
-        const groupingsMap = new Map<string, number>();
-        if (this.organization && this.results.collections != null) {
-            this.results.collections.forEach((c: CollectionWithId) => {
-                const collection = CollectionWithId.toView(c);
-                if (collection != null) {
-                    collection.id = null;
-                    collection.organizationId = null;
-                    groupingsMap.set(c.id, this.result.collections.length);
-                    this.result.collections.push(collection);
-                }
-            });
-        } else if (!this.organization && this.results.folders != null) {
-            this.results.folders.forEach((f: FolderWithId) => {
-                const folder = FolderWithId.toView(f);
-                if (folder != null) {
-                    folder.id = null;
-                    groupingsMap.set(f.id, this.result.folders.length);
-                    this.result.folders.push(folder);
-                }
-            });
+    this.result.success = true;
+  }
+
+  private parseDecrypted() {
+    const groupingsMap = new Map<string, number>();
+    if (this.organization && this.results.collections != null) {
+      this.results.collections.forEach((c: CollectionWithId) => {
+        const collection = CollectionWithId.toView(c);
+        if (collection != null) {
+          collection.id = null;
+          collection.organizationId = null;
+          groupingsMap.set(c.id, this.result.collections.length);
+          this.result.collections.push(collection);
+        }
+      });
+    } else if (!this.organization && this.results.folders != null) {
+      this.results.folders.forEach((f: FolderWithId) => {
+        const folder = FolderWithId.toView(f);
+        if (folder != null) {
+          folder.id = null;
+          groupingsMap.set(f.id, this.result.folders.length);
+          this.result.folders.push(folder);
         }
+      });
+    }
 
-        this.results.items.forEach((c: CipherWithIds) => {
-            const cipher = CipherWithIds.toView(c);
-            // reset ids incase they were set for some reason
-            cipher.id = null;
-            cipher.folderId = null;
-            cipher.organizationId = null;
-            cipher.collectionIds = null;
-
-            // make sure password history is limited
-            if (cipher.passwordHistory != null && cipher.passwordHistory.length > 5) {
-                cipher.passwordHistory = cipher.passwordHistory.slice(0, 5);
-            }
-
-            if (!this.organization && c.folderId != null && groupingsMap.has(c.folderId)) {
-                this.result.folderRelationships.push([this.result.ciphers.length, groupingsMap.get(c.folderId)]);
-            } else if (this.organization && c.collectionIds != null) {
-                c.collectionIds.forEach(cId => {
-                    if (groupingsMap.has(cId)) {
-                        this.result.collectionRelationships.push([this.result.ciphers.length, groupingsMap.get(cId)]);
-                    }
-                });
-            }
-
-            this.cleanupCipher(cipher);
-            this.result.ciphers.push(cipher);
+    this.results.items.forEach((c: CipherWithIds) => {
+      const cipher = CipherWithIds.toView(c);
+      // reset ids incase they were set for some reason
+      cipher.id = null;
+      cipher.folderId = null;
+      cipher.organizationId = null;
+      cipher.collectionIds = null;
+
+      // make sure password history is limited
+      if (cipher.passwordHistory != null && cipher.passwordHistory.length > 5) {
+        cipher.passwordHistory = cipher.passwordHistory.slice(0, 5);
+      }
+
+      if (!this.organization && c.folderId != null && groupingsMap.has(c.folderId)) {
+        this.result.folderRelationships.push([
+          this.result.ciphers.length,
+          groupingsMap.get(c.folderId),
+        ]);
+      } else if (this.organization && c.collectionIds != null) {
+        c.collectionIds.forEach((cId) => {
+          if (groupingsMap.has(cId)) {
+            this.result.collectionRelationships.push([
+              this.result.ciphers.length,
+              groupingsMap.get(cId),
+            ]);
+          }
         });
+      }
 
-        this.result.success = true;
-    }
+      this.cleanupCipher(cipher);
+      this.result.ciphers.push(cipher);
+    });
+
+    this.result.success = true;
+  }
 }
diff --git a/jslib/common/src/importers/blackBerryCsvImporter.ts b/jslib/common/src/importers/blackBerryCsvImporter.ts
index 1e111348..f54593b0 100644
--- a/jslib/common/src/importers/blackBerryCsvImporter.ts
+++ b/jslib/common/src/importers/blackBerryCsvImporter.ts
@@ -1,36 +1,36 @@
-import { BaseImporter } from './baseImporter';
-import { Importer } from './importer';
+import { BaseImporter } from "./baseImporter";
+import { Importer } from "./importer";
 
-import { ImportResult } from '../models/domain/importResult';
+import { ImportResult } from "../models/domain/importResult";
 
 export class BlackBerryCsvImporter extends BaseImporter implements Importer {
-    parse(data: string): Promise<ImportResult> {
-        const result = new ImportResult();
-        const results = this.parseCsv(data, true);
-        if (results == null) {
-            result.success = false;
-            return Promise.resolve(result);
-        }
+  parse(data: string): Promise<ImportResult> {
+    const result = new ImportResult();
+    const results = this.parseCsv(data, true);
+    if (results == null) {
+      result.success = false;
+      return Promise.resolve(result);
+    }
 
-        results.forEach(value => {
-            if (value.grouping === 'list') {
-                return;
-            }
-            const cipher = this.initLoginCipher();
-            cipher.favorite = value.fav === '1';
-            cipher.name = this.getValueOrDefault(value.name);
-            cipher.notes = this.getValueOrDefault(value.extra);
-            if (value.grouping !== 'note') {
-                cipher.login.uris = this.makeUriArray(value.url);
-                cipher.login.password = this.getValueOrDefault(value.password);
-                cipher.login.username = this.getValueOrDefault(value.username);
-            }
-            this.convertToNoteIfNeeded(cipher);
-            this.cleanupCipher(cipher);
-            result.ciphers.push(cipher);
-        });
+    results.forEach((value) => {
+      if (value.grouping === "list") {
+        return;
+      }
+      const cipher = this.initLoginCipher();
+      cipher.favorite = value.fav === "1";
+      cipher.name = this.getValueOrDefault(value.name);
+      cipher.notes = this.getValueOrDefault(value.extra);
+      if (value.grouping !== "note") {
+        cipher.login.uris = this.makeUriArray(value.url);
+        cipher.login.password = this.getValueOrDefault(value.password);
+        cipher.login.username = this.getValueOrDefault(value.username);
+      }
+      this.convertToNoteIfNeeded(cipher);
+      this.cleanupCipher(cipher);
+      result.ciphers.push(cipher);
+    });
 
-        result.success = true;
-        return Promise.resolve(result);
-    }
+    result.success = true;
+    return Promise.resolve(result);
+  }
 }
diff --git a/jslib/common/src/importers/blurCsvImporter.ts b/jslib/common/src/importers/blurCsvImporter.ts
index 3f36e166..449ccb32 100644
--- a/jslib/common/src/importers/blurCsvImporter.ts
+++ b/jslib/common/src/importers/blurCsvImporter.ts
@@ -1,39 +1,41 @@
-import { BaseImporter } from './baseImporter';
-import { Importer } from './importer';
+import { BaseImporter } from "./baseImporter";
+import { Importer } from "./importer";
 
-import { ImportResult } from '../models/domain/importResult';
+import { ImportResult } from "../models/domain/importResult";
 
 export class BlurCsvImporter extends BaseImporter implements Importer {
-    parse(data: string): Promise<ImportResult> {
-        const result = new ImportResult();
-        const results = this.parseCsv(data, true);
-        if (results == null) {
-            result.success = false;
-            return Promise.resolve(result);
-        }
+  parse(data: string): Promise<ImportResult> {
+    const result = new ImportResult();
+    const results = this.parseCsv(data, true);
+    if (results == null) {
+      result.success = false;
+      return Promise.resolve(result);
+    }
 
-        results.forEach(value => {
-            if (value.label === 'null') {
-                value.label = null;
-            }
-            const cipher = this.initLoginCipher();
-            cipher.name = this.getValueOrDefault(value.label,
-                this.getValueOrDefault(this.nameFromUrl(value.domain), '--'));
-            cipher.login.uris = this.makeUriArray(value.domain);
-            cipher.login.password = this.getValueOrDefault(value.password);
+    results.forEach((value) => {
+      if (value.label === "null") {
+        value.label = null;
+      }
+      const cipher = this.initLoginCipher();
+      cipher.name = this.getValueOrDefault(
+        value.label,
+        this.getValueOrDefault(this.nameFromUrl(value.domain), "--")
+      );
+      cipher.login.uris = this.makeUriArray(value.domain);
+      cipher.login.password = this.getValueOrDefault(value.password);
 
-            if (this.isNullOrWhitespace(value.email) && !this.isNullOrWhitespace(value.username)) {
-                cipher.login.username = value.username;
-            } else {
-                cipher.login.username = this.getValueOrDefault(value.email);
-                cipher.notes = this.getValueOrDefault(value.username);
-            }
+      if (this.isNullOrWhitespace(value.email) && !this.isNullOrWhitespace(value.username)) {
+        cipher.login.username = value.username;
+      } else {
+        cipher.login.username = this.getValueOrDefault(value.email);
+        cipher.notes = this.getValueOrDefault(value.username);
+      }
 
-            this.cleanupCipher(cipher);
-            result.ciphers.push(cipher);
-        });
+      this.cleanupCipher(cipher);
+      result.ciphers.push(cipher);
+    });
 
-        result.success = true;
-        return Promise.resolve(result);
-    }
+    result.success = true;
+    return Promise.resolve(result);
+  }
 }
diff --git a/jslib/common/src/importers/buttercupCsvImporter.ts b/jslib/common/src/importers/buttercupCsvImporter.ts
index bd9e5553..4961adbf 100644
--- a/jslib/common/src/importers/buttercupCsvImporter.ts
+++ b/jslib/common/src/importers/buttercupCsvImporter.ts
@@ -1,51 +1,49 @@
-import { BaseImporter } from './baseImporter';
-import { Importer } from './importer';
+import { BaseImporter } from "./baseImporter";
+import { Importer } from "./importer";
 
-import { ImportResult } from '../models/domain/importResult';
+import { ImportResult } from "../models/domain/importResult";
 
-const OfficialProps = [
-    '!group_id', '!group_name', 'title', 'username', 'password', 'URL', 'id',
-];
+const OfficialProps = ["!group_id", "!group_name", "title", "username", "password", "URL", "id"];
 
 export class ButtercupCsvImporter extends BaseImporter implements Importer {
-    parse(data: string): Promise<ImportResult> {
-        const result = new ImportResult();
-        const results = this.parseCsv(data, true);
-        if (results == null) {
-            result.success = false;
-            return Promise.resolve(result);
-        }
+  parse(data: string): Promise<ImportResult> {
+    const result = new ImportResult();
+    const results = this.parseCsv(data, true);
+    if (results == null) {
+      result.success = false;
+      return Promise.resolve(result);
+    }
 
-        results.forEach(value => {
-            this.processFolder(result, this.getValueOrDefault(value['!group_name']));
-
-            const cipher = this.initLoginCipher();
-            cipher.name = this.getValueOrDefault(value.title, '--');
-            cipher.login.username = this.getValueOrDefault(value.username);
-            cipher.login.password = this.getValueOrDefault(value.password);
-            cipher.login.uris = this.makeUriArray(value.URL);
-
-            let processingCustomFields = false;
-            for (const prop in value) {
-                if (value.hasOwnProperty(prop)) {
-                    if (!processingCustomFields && OfficialProps.indexOf(prop) === -1) {
-                        processingCustomFields = true;
-                    }
-                    if (processingCustomFields) {
-                        this.processKvp(cipher, prop, value[prop]);
-                    }
-                }
-            }
-
-            this.cleanupCipher(cipher);
-            result.ciphers.push(cipher);
-        });
-
-        if (this.organization) {
-            this.moveFoldersToCollections(result);
+    results.forEach((value) => {
+      this.processFolder(result, this.getValueOrDefault(value["!group_name"]));
+
+      const cipher = this.initLoginCipher();
+      cipher.name = this.getValueOrDefault(value.title, "--");
+      cipher.login.username = this.getValueOrDefault(value.username);
+      cipher.login.password = this.getValueOrDefault(value.password);
+      cipher.login.uris = this.makeUriArray(value.URL);
+
+      let processingCustomFields = false;
+      for (const prop in value) {
+        if (value.hasOwnProperty(prop)) {
+          if (!processingCustomFields && OfficialProps.indexOf(prop) === -1) {
+            processingCustomFields = true;
+          }
+          if (processingCustomFields) {
+            this.processKvp(cipher, prop, value[prop]);
+          }
         }
+      }
 
-        result.success = true;
-        return Promise.resolve(result);
+      this.cleanupCipher(cipher);
+      result.ciphers.push(cipher);
+    });
+
+    if (this.organization) {
+      this.moveFoldersToCollections(result);
     }
+
+    result.success = true;
+    return Promise.resolve(result);
+  }
 }
diff --git a/jslib/common/src/importers/chromeCsvImporter.ts b/jslib/common/src/importers/chromeCsvImporter.ts
index 3580ec5c..41fbc251 100644
--- a/jslib/common/src/importers/chromeCsvImporter.ts
+++ b/jslib/common/src/importers/chromeCsvImporter.ts
@@ -1,28 +1,28 @@
-import { BaseImporter } from './baseImporter';
-import { Importer } from './importer';
+import { BaseImporter } from "./baseImporter";
+import { Importer } from "./importer";
 
-import { ImportResult } from '../models/domain/importResult';
+import { ImportResult } from "../models/domain/importResult";
 
 export class ChromeCsvImporter extends BaseImporter implements Importer {
-    parse(data: string): Promise<ImportResult> {
-        const result = new ImportResult();
-        const results = this.parseCsv(data, true);
-        if (results == null) {
-            result.success = false;
-            return Promise.resolve(result);
-        }
+  parse(data: string): Promise<ImportResult> {
+    const result = new ImportResult();
+    const results = this.parseCsv(data, true);
+    if (results == null) {
+      result.success = false;
+      return Promise.resolve(result);
+    }
 
-        results.forEach(value => {
-            const cipher = this.initLoginCipher();
-            cipher.name = this.getValueOrDefault(value.name, '--');
-            cipher.login.username = this.getValueOrDefault(value.username);
-            cipher.login.password = this.getValueOrDefault(value.password);
-            cipher.login.uris = this.makeUriArray(value.url);
-            this.cleanupCipher(cipher);
-            result.ciphers.push(cipher);
-        });
+    results.forEach((value) => {
+      const cipher = this.initLoginCipher();
+      cipher.name = this.getValueOrDefault(value.name, "--");
+      cipher.login.username = this.getValueOrDefault(value.username);
+      cipher.login.password = this.getValueOrDefault(value.password);
+      cipher.login.uris = this.makeUriArray(value.url);
+      this.cleanupCipher(cipher);
+      result.ciphers.push(cipher);
+    });
 
-        result.success = true;
-        return Promise.resolve(result);
-    }
+    result.success = true;
+    return Promise.resolve(result);
+  }
 }
diff --git a/jslib/common/src/importers/clipperzHtmlImporter.ts b/jslib/common/src/importers/clipperzHtmlImporter.ts
index a772ae00..8646b267 100644
--- a/jslib/common/src/importers/clipperzHtmlImporter.ts
+++ b/jslib/common/src/importers/clipperzHtmlImporter.ts
@@ -1,79 +1,86 @@
-import { BaseImporter } from './baseImporter';
-import { Importer } from './importer';
+import { BaseImporter } from "./baseImporter";
+import { Importer } from "./importer";
 
-import { ImportResult } from '../models/domain/importResult';
+import { ImportResult } from "../models/domain/importResult";
 
 export class ClipperzHtmlImporter extends BaseImporter implements Importer {
-    parse(data: string): Promise<ImportResult> {
-        const result = new ImportResult();
-        const doc = this.parseXml(data);
-        if (doc == null) {
-            result.success = false;
-            return Promise.resolve(result);
-        }
+  parse(data: string): Promise<ImportResult> {
+    const result = new ImportResult();
+    const doc = this.parseXml(data);
+    if (doc == null) {
+      result.success = false;
+      return Promise.resolve(result);
+    }
 
-        const textarea = doc.querySelector('textarea');
-        if (textarea == null || this.isNullOrWhitespace(textarea.textContent)) {
-            result.errorMessage = 'Missing textarea.';
-            result.success = false;
-            return Promise.resolve(result);
-        }
+    const textarea = doc.querySelector("textarea");
+    if (textarea == null || this.isNullOrWhitespace(textarea.textContent)) {
+      result.errorMessage = "Missing textarea.";
+      result.success = false;
+      return Promise.resolve(result);
+    }
 
-        const entries = JSON.parse(textarea.textContent);
-        entries.forEach((entry: any) => {
-            const cipher = this.initLoginCipher();
-            if (!this.isNullOrWhitespace(entry.label)) {
-                cipher.name = entry.label.split(' ')[0];
-            }
-            if (entry.data != null && !this.isNullOrWhitespace(entry.data.notes)) {
-                cipher.notes = entry.data.notes.split('\\n').join('\n');
-            }
+    const entries = JSON.parse(textarea.textContent);
+    entries.forEach((entry: any) => {
+      const cipher = this.initLoginCipher();
+      if (!this.isNullOrWhitespace(entry.label)) {
+        cipher.name = entry.label.split(" ")[0];
+      }
+      if (entry.data != null && !this.isNullOrWhitespace(entry.data.notes)) {
+        cipher.notes = entry.data.notes.split("\\n").join("\n");
+      }
 
-            if (entry.currentVersion != null && entry.currentVersion.fields != null) {
-                for (const property in entry.currentVersion.fields) {
-                    if (!entry.currentVersion.fields.hasOwnProperty(property)) {
-                        continue;
-                    }
+      if (entry.currentVersion != null && entry.currentVersion.fields != null) {
+        for (const property in entry.currentVersion.fields) {
+          if (!entry.currentVersion.fields.hasOwnProperty(property)) {
+            continue;
+          }
 
-                    const field = entry.currentVersion.fields[property];
-                    const actionType = field.actionType != null ? field.actionType.toLowerCase() : null;
-                    switch (actionType) {
-                        case 'password':
-                            cipher.login.password = this.getValueOrDefault(field.value);
-                            break;
-                        case 'email':
-                        case 'username':
-                        case 'user':
-                        case 'name':
-                            cipher.login.username = this.getValueOrDefault(field.value);
-                            break;
-                        case 'url':
-                            cipher.login.uris = this.makeUriArray(field.value);
-                            break;
-                        default:
-                            const labelLower = field.label != null ? field.label.toLowerCase() : null;
-                            if (cipher.login.password == null && this.passwordFieldNames.indexOf(labelLower) > -1) {
-                                cipher.login.password = this.getValueOrDefault(field.value);
-                            } else if (cipher.login.username == null &&
-                                this.usernameFieldNames.indexOf(labelLower) > -1) {
-                                cipher.login.username = this.getValueOrDefault(field.value);
-                            } else if ((cipher.login.uris == null || cipher.login.uris.length === 0) &&
-                                this.uriFieldNames.indexOf(labelLower) > -1) {
-                                cipher.login.uris = this.makeUriArray(field.value);
-                            } else {
-                                this.processKvp(cipher, field.label, field.value);
-                            }
-                            break;
-                    }
-                }
-            }
+          const field = entry.currentVersion.fields[property];
+          const actionType = field.actionType != null ? field.actionType.toLowerCase() : null;
+          switch (actionType) {
+            case "password":
+              cipher.login.password = this.getValueOrDefault(field.value);
+              break;
+            case "email":
+            case "username":
+            case "user":
+            case "name":
+              cipher.login.username = this.getValueOrDefault(field.value);
+              break;
+            case "url":
+              cipher.login.uris = this.makeUriArray(field.value);
+              break;
+            default:
+              const labelLower = field.label != null ? field.label.toLowerCase() : null;
+              if (
+                cipher.login.password == null &&
+                this.passwordFieldNames.indexOf(labelLower) > -1
+              ) {
+                cipher.login.password = this.getValueOrDefault(field.value);
+              } else if (
+                cipher.login.username == null &&
+                this.usernameFieldNames.indexOf(labelLower) > -1
+              ) {
+                cipher.login.username = this.getValueOrDefault(field.value);
+              } else if (
+                (cipher.login.uris == null || cipher.login.uris.length === 0) &&
+                this.uriFieldNames.indexOf(labelLower) > -1
+              ) {
+                cipher.login.uris = this.makeUriArray(field.value);
+              } else {
+                this.processKvp(cipher, field.label, field.value);
+              }
+              break;
+          }
+        }
+      }
 
-            this.convertToNoteIfNeeded(cipher);
-            this.cleanupCipher(cipher);
-            result.ciphers.push(cipher);
-        });
+      this.convertToNoteIfNeeded(cipher);
+      this.cleanupCipher(cipher);
+      result.ciphers.push(cipher);
+    });
 
-        result.success = true;
-        return Promise.resolve(result);
-    }
+    result.success = true;
+    return Promise.resolve(result);
+  }
 }
diff --git a/jslib/common/src/importers/codebookCsvImporter.ts b/jslib/common/src/importers/codebookCsvImporter.ts
index fdc563d2..4d7aeab8 100644
--- a/jslib/common/src/importers/codebookCsvImporter.ts
+++ b/jslib/common/src/importers/codebookCsvImporter.ts
@@ -1,47 +1,47 @@
-import { BaseImporter } from './baseImporter';
-import { Importer } from './importer';
+import { BaseImporter } from "./baseImporter";
+import { Importer } from "./importer";
 
-import { ImportResult } from '../models/domain/importResult';
+import { ImportResult } from "../models/domain/importResult";
 
 export class CodebookCsvImporter extends BaseImporter implements Importer {
-    parse(data: string): Promise<ImportResult> {
-        const result = new ImportResult();
-        const results = this.parseCsv(data, true);
-        if (results == null) {
-            result.success = false;
-            return Promise.resolve(result);
-        }
-
-        results.forEach(value => {
-            this.processFolder(result, this.getValueOrDefault(value.Category));
-
-            const cipher = this.initLoginCipher();
-            cipher.favorite = this.getValueOrDefault(value.Favorite) === 'True';
-            cipher.name = this.getValueOrDefault(value.Entry, '--');
-            cipher.notes = this.getValueOrDefault(value.Note);
-            cipher.login.username = this.getValueOrDefault(value.Username, value.Email);
-            cipher.login.password = this.getValueOrDefault(value.Password);
-            cipher.login.totp = this.getValueOrDefault(value.TOTP);
-            cipher.login.uris = this.makeUriArray(value.Website);
-
-            if (!this.isNullOrWhitespace(value.Username)) {
-                this.processKvp(cipher, 'Email', value.Email);
-            }
-            this.processKvp(cipher, 'Phone', value.Phone);
-            this.processKvp(cipher, 'PIN', value.PIN);
-            this.processKvp(cipher, 'Account', value.Account);
-            this.processKvp(cipher, 'Date', value.Date);
-
-            this.convertToNoteIfNeeded(cipher);
-            this.cleanupCipher(cipher);
-            result.ciphers.push(cipher);
-        });
-
-        if (this.organization) {
-            this.moveFoldersToCollections(result);
-        }
-
-        result.success = true;
-        return Promise.resolve(result);
+  parse(data: string): Promise<ImportResult> {
+    const result = new ImportResult();
+    const results = this.parseCsv(data, true);
+    if (results == null) {
+      result.success = false;
+      return Promise.resolve(result);
     }
+
+    results.forEach((value) => {
+      this.processFolder(result, this.getValueOrDefault(value.Category));
+
+      const cipher = this.initLoginCipher();
+      cipher.favorite = this.getValueOrDefault(value.Favorite) === "True";
+      cipher.name = this.getValueOrDefault(value.Entry, "--");
+      cipher.notes = this.getValueOrDefault(value.Note);
+      cipher.login.username = this.getValueOrDefault(value.Username, value.Email);
+      cipher.login.password = this.getValueOrDefault(value.Password);
+      cipher.login.totp = this.getValueOrDefault(value.TOTP);
+      cipher.login.uris = this.makeUriArray(value.Website);
+
+      if (!this.isNullOrWhitespace(value.Username)) {
+        this.processKvp(cipher, "Email", value.Email);
+      }
+      this.processKvp(cipher, "Phone", value.Phone);
+      this.processKvp(cipher, "PIN", value.PIN);
+      this.processKvp(cipher, "Account", value.Account);
+      this.processKvp(cipher, "Date", value.Date);
+
+      this.convertToNoteIfNeeded(cipher);
+      this.cleanupCipher(cipher);
+      result.ciphers.push(cipher);
+    });
+
+    if (this.organization) {
+      this.moveFoldersToCollections(result);
+    }
+
+    result.success = true;
+    return Promise.resolve(result);
+  }
 }
diff --git a/jslib/common/src/importers/dashlaneJsonImporter.ts b/jslib/common/src/importers/dashlaneJsonImporter.ts
index dd8d7bb6..b3dff318 100644
--- a/jslib/common/src/importers/dashlaneJsonImporter.ts
+++ b/jslib/common/src/importers/dashlaneJsonImporter.ts
@@ -1,162 +1,172 @@
-import { BaseImporter } from './baseImporter';
-import { Importer } from './importer';
-
-import { ImportResult } from '../models/domain/importResult';
-
-import { CardView } from '../models/view/cardView';
-import { CipherView } from '../models/view/cipherView';
-import { IdentityView } from '../models/view/identityView';
-import { SecureNoteView } from '../models/view/secureNoteView';
-
-import { CipherType } from '../enums/cipherType';
-import { SecureNoteType } from '../enums/secureNoteType';
-
-const HandledResults = new Set(['ADDRESS', 'AUTHENTIFIANT', 'BANKSTATEMENT', 'IDCARD', 'IDENTITY',
-    'PAYMENTMEANS_CREDITCARD', 'PAYMENTMEAN_PAYPAL', 'EMAIL']);
+import { BaseImporter } from "./baseImporter";
+import { Importer } from "./importer";
+
+import { ImportResult } from "../models/domain/importResult";
+
+import { CardView } from "../models/view/cardView";
+import { CipherView } from "../models/view/cipherView";
+import { IdentityView } from "../models/view/identityView";
+import { SecureNoteView } from "../models/view/secureNoteView";
+
+import { CipherType } from "../enums/cipherType";
+import { SecureNoteType } from "../enums/secureNoteType";
+
+const HandledResults = new Set([
+  "ADDRESS",
+  "AUTHENTIFIANT",
+  "BANKSTATEMENT",
+  "IDCARD",
+  "IDENTITY",
+  "PAYMENTMEANS_CREDITCARD",
+  "PAYMENTMEAN_PAYPAL",
+  "EMAIL",
+]);
 
 export class DashlaneJsonImporter extends BaseImporter implements Importer {
-    private result: ImportResult;
-
-    parse(data: string): Promise<ImportResult> {
-        this.result = new ImportResult();
-        const results = JSON.parse(data);
-        if (results == null || results.length === 0) {
-            this.result.success = false;
-            return Promise.resolve(this.result);
-        }
-
-        if (results.ADDRESS != null) {
-            this.processAddress(results.ADDRESS);
-        }
-        if (results.AUTHENTIFIANT != null) {
-            this.processAuth(results.AUTHENTIFIANT);
-        }
-        if (results.BANKSTATEMENT != null) {
-            this.processNote(results.BANKSTATEMENT, 'BankAccountName');
-        }
-        if (results.IDCARD != null) {
-            this.processNote(results.IDCARD, 'Fullname');
-        }
-        if (results.PAYMENTMEANS_CREDITCARD != null) {
-            this.processCard(results.PAYMENTMEANS_CREDITCARD);
-        }
-        if (results.IDENTITY != null) {
-            this.processIdentity(results.IDENTITY);
-        }
-
-        for (const key in results) {
-            if (results.hasOwnProperty(key) && !HandledResults.has(key)) {
-                this.processNote(results[key], null, 'Generic Note');
-            }
-        }
-
-        this.result.success = true;
-        return Promise.resolve(this.result);
+  private result: ImportResult;
+
+  parse(data: string): Promise<ImportResult> {
+    this.result = new ImportResult();
+    const results = JSON.parse(data);
+    if (results == null || results.length === 0) {
+      this.result.success = false;
+      return Promise.resolve(this.result);
     }
 
-    private processAuth(results: any[]) {
-        results.forEach((credential: any) => {
-            const cipher = this.initLoginCipher();
-            cipher.name = this.getValueOrDefault(credential.title);
-
-            cipher.login.username = this.getValueOrDefault(credential.login,
-                this.getValueOrDefault(credential.secondaryLogin));
-            if (this.isNullOrWhitespace(cipher.login.username)) {
-                cipher.login.username = this.getValueOrDefault(credential.email);
-            } else if (!this.isNullOrWhitespace(credential.email)) {
-                cipher.notes = ('Email: ' + credential.email + '\n');
-            }
-
-            cipher.login.password = this.getValueOrDefault(credential.password);
-            cipher.login.uris = this.makeUriArray(credential.domain);
-            cipher.notes += this.getValueOrDefault(credential.note, '');
-
-            this.convertToNoteIfNeeded(cipher);
-            this.cleanupCipher(cipher);
-            this.result.ciphers.push(cipher);
-        });
+    if (results.ADDRESS != null) {
+      this.processAddress(results.ADDRESS);
     }
-
-    private processIdentity(results: any[]) {
-        results.forEach((obj: any) => {
-            const cipher = new CipherView();
-            cipher.identity = new IdentityView();
-            cipher.type = CipherType.Identity;
-            cipher.name = this.getValueOrDefault(obj.fullName, '');
-            const nameParts = cipher.name.split(' ');
-            if (nameParts.length > 0) {
-                cipher.identity.firstName = this.getValueOrDefault(nameParts[0]);
-            }
-            if (nameParts.length === 2) {
-                cipher.identity.lastName = this.getValueOrDefault(nameParts[1]);
-            } else if (nameParts.length === 3) {
-                cipher.identity.middleName = this.getValueOrDefault(nameParts[1]);
-                cipher.identity.lastName = this.getValueOrDefault(nameParts[2]);
-            }
-            cipher.identity.username = this.getValueOrDefault(obj.pseudo);
-            this.cleanupCipher(cipher);
-            this.result.ciphers.push(cipher);
-        });
+    if (results.AUTHENTIFIANT != null) {
+      this.processAuth(results.AUTHENTIFIANT);
     }
-
-    private processAddress(results: any[]) {
-        results.forEach((obj: any) => {
-            const cipher = new CipherView();
-            cipher.identity = new IdentityView();
-            cipher.type = CipherType.Identity;
-            cipher.name = this.getValueOrDefault(obj.addressName);
-            cipher.identity.address1 = this.getValueOrDefault(obj.addressFull);
-            cipher.identity.city = this.getValueOrDefault(obj.city);
-            cipher.identity.state = this.getValueOrDefault(obj.state);
-            cipher.identity.postalCode = this.getValueOrDefault(obj.zipcode);
-            cipher.identity.country = this.getValueOrDefault(obj.country);
-            if (cipher.identity.country != null) {
-                cipher.identity.country = cipher.identity.country.toUpperCase();
-            }
-            this.cleanupCipher(cipher);
-            this.result.ciphers.push(cipher);
-        });
+    if (results.BANKSTATEMENT != null) {
+      this.processNote(results.BANKSTATEMENT, "BankAccountName");
     }
-
-    private processCard(results: any[]) {
-        results.forEach((obj: any) => {
-            const cipher = new CipherView();
-            cipher.card = new CardView();
-            cipher.type = CipherType.Card;
-            cipher.name = this.getValueOrDefault(obj.bank);
-            cipher.card.number = this.getValueOrDefault(obj.cardNumber);
-            cipher.card.brand = this.getCardBrand(cipher.card.number);
-            cipher.card.cardholderName = this.getValueOrDefault(obj.owner);
-            if (!this.isNullOrWhitespace(cipher.card.brand)) {
-                if (this.isNullOrWhitespace(cipher.name)) {
-                    cipher.name = cipher.card.brand;
-                } else {
-                    cipher.name += (' - ' + cipher.card.brand);
-                }
-            }
-            this.cleanupCipher(cipher);
-            this.result.ciphers.push(cipher);
-        });
+    if (results.IDCARD != null) {
+      this.processNote(results.IDCARD, "Fullname");
+    }
+    if (results.PAYMENTMEANS_CREDITCARD != null) {
+      this.processCard(results.PAYMENTMEANS_CREDITCARD);
+    }
+    if (results.IDENTITY != null) {
+      this.processIdentity(results.IDENTITY);
     }
 
-    private processNote(results: any[], nameProperty: string, name: string = null) {
-        results.forEach((obj: any) => {
-            const cipher = new CipherView();
-            cipher.secureNote = new SecureNoteView();
-            cipher.type = CipherType.SecureNote;
-            cipher.secureNote.type = SecureNoteType.Generic;
-            if (name != null) {
-                cipher.name = name;
-            } else {
-                cipher.name = this.getValueOrDefault(obj[nameProperty]);
-            }
-            for (const key in obj) {
-                if (obj.hasOwnProperty(key) && key !== nameProperty) {
-                    this.processKvp(cipher, key, obj[key].toString());
-                }
-            }
-            this.cleanupCipher(cipher);
-            this.result.ciphers.push(cipher);
-        });
+    for (const key in results) {
+      if (results.hasOwnProperty(key) && !HandledResults.has(key)) {
+        this.processNote(results[key], null, "Generic Note");
+      }
     }
+
+    this.result.success = true;
+    return Promise.resolve(this.result);
+  }
+
+  private processAuth(results: any[]) {
+    results.forEach((credential: any) => {
+      const cipher = this.initLoginCipher();
+      cipher.name = this.getValueOrDefault(credential.title);
+
+      cipher.login.username = this.getValueOrDefault(
+        credential.login,
+        this.getValueOrDefault(credential.secondaryLogin)
+      );
+      if (this.isNullOrWhitespace(cipher.login.username)) {
+        cipher.login.username = this.getValueOrDefault(credential.email);
+      } else if (!this.isNullOrWhitespace(credential.email)) {
+        cipher.notes = "Email: " + credential.email + "\n";
+      }
+
+      cipher.login.password = this.getValueOrDefault(credential.password);
+      cipher.login.uris = this.makeUriArray(credential.domain);
+      cipher.notes += this.getValueOrDefault(credential.note, "");
+
+      this.convertToNoteIfNeeded(cipher);
+      this.cleanupCipher(cipher);
+      this.result.ciphers.push(cipher);
+    });
+  }
+
+  private processIdentity(results: any[]) {
+    results.forEach((obj: any) => {
+      const cipher = new CipherView();
+      cipher.identity = new IdentityView();
+      cipher.type = CipherType.Identity;
+      cipher.name = this.getValueOrDefault(obj.fullName, "");
+      const nameParts = cipher.name.split(" ");
+      if (nameParts.length > 0) {
+        cipher.identity.firstName = this.getValueOrDefault(nameParts[0]);
+      }
+      if (nameParts.length === 2) {
+        cipher.identity.lastName = this.getValueOrDefault(nameParts[1]);
+      } else if (nameParts.length === 3) {
+        cipher.identity.middleName = this.getValueOrDefault(nameParts[1]);
+        cipher.identity.lastName = this.getValueOrDefault(nameParts[2]);
+      }
+      cipher.identity.username = this.getValueOrDefault(obj.pseudo);
+      this.cleanupCipher(cipher);
+      this.result.ciphers.push(cipher);
+    });
+  }
+
+  private processAddress(results: any[]) {
+    results.forEach((obj: any) => {
+      const cipher = new CipherView();
+      cipher.identity = new IdentityView();
+      cipher.type = CipherType.Identity;
+      cipher.name = this.getValueOrDefault(obj.addressName);
+      cipher.identity.address1 = this.getValueOrDefault(obj.addressFull);
+      cipher.identity.city = this.getValueOrDefault(obj.city);
+      cipher.identity.state = this.getValueOrDefault(obj.state);
+      cipher.identity.postalCode = this.getValueOrDefault(obj.zipcode);
+      cipher.identity.country = this.getValueOrDefault(obj.country);
+      if (cipher.identity.country != null) {
+        cipher.identity.country = cipher.identity.country.toUpperCase();
+      }
+      this.cleanupCipher(cipher);
+      this.result.ciphers.push(cipher);
+    });
+  }
+
+  private processCard(results: any[]) {
+    results.forEach((obj: any) => {
+      const cipher = new CipherView();
+      cipher.card = new CardView();
+      cipher.type = CipherType.Card;
+      cipher.name = this.getValueOrDefault(obj.bank);
+      cipher.card.number = this.getValueOrDefault(obj.cardNumber);
+      cipher.card.brand = this.getCardBrand(cipher.card.number);
+      cipher.card.cardholderName = this.getValueOrDefault(obj.owner);
+      if (!this.isNullOrWhitespace(cipher.card.brand)) {
+        if (this.isNullOrWhitespace(cipher.name)) {
+          cipher.name = cipher.card.brand;
+        } else {
+          cipher.name += " - " + cipher.card.brand;
+        }
+      }
+      this.cleanupCipher(cipher);
+      this.result.ciphers.push(cipher);
+    });
+  }
+
+  private processNote(results: any[], nameProperty: string, name: string = null) {
+    results.forEach((obj: any) => {
+      const cipher = new CipherView();
+      cipher.secureNote = new SecureNoteView();
+      cipher.type = CipherType.SecureNote;
+      cipher.secureNote.type = SecureNoteType.Generic;
+      if (name != null) {
+        cipher.name = name;
+      } else {
+        cipher.name = this.getValueOrDefault(obj[nameProperty]);
+      }
+      for (const key in obj) {
+        if (obj.hasOwnProperty(key) && key !== nameProperty) {
+          this.processKvp(cipher, key, obj[key].toString());
+        }
+      }
+      this.cleanupCipher(cipher);
+      this.result.ciphers.push(cipher);
+    });
+  }
 }
diff --git a/jslib/common/src/importers/encryptrCsvImporter.ts b/jslib/common/src/importers/encryptrCsvImporter.ts
index adad9aa7..84f55e09 100644
--- a/jslib/common/src/importers/encryptrCsvImporter.ts
+++ b/jslib/common/src/importers/encryptrCsvImporter.ts
@@ -1,62 +1,62 @@
-import { BaseImporter } from './baseImporter';
-import { Importer } from './importer';
+import { BaseImporter } from "./baseImporter";
+import { Importer } from "./importer";
 
-import { ImportResult } from '../models/domain/importResult';
+import { ImportResult } from "../models/domain/importResult";
 
-import { CardView } from '../models/view/cardView';
+import { CardView } from "../models/view/cardView";
 
-import { CipherType } from '../enums/cipherType';
+import { CipherType } from "../enums/cipherType";
 
 export class EncryptrCsvImporter extends BaseImporter implements Importer {
-    parse(data: string): Promise<ImportResult> {
-        const result = new ImportResult();
-        const results = this.parseCsv(data, true);
-        if (results == null) {
-            result.success = false;
-            return Promise.resolve(result);
+  parse(data: string): Promise<ImportResult> {
+    const result = new ImportResult();
+    const results = this.parseCsv(data, true);
+    if (results == null) {
+      result.success = false;
+      return Promise.resolve(result);
+    }
+
+    results.forEach((value) => {
+      const cipher = this.initLoginCipher();
+      cipher.name = this.getValueOrDefault(value.Label, "--");
+      cipher.notes = this.getValueOrDefault(value.Notes);
+      const text = this.getValueOrDefault(value.Text);
+      if (!this.isNullOrWhitespace(text)) {
+        if (this.isNullOrWhitespace(cipher.notes)) {
+          cipher.notes = text;
+        } else {
+          cipher.notes += "\n\n" + text;
+        }
+      }
+
+      const type = value["Entry Type"];
+      if (type === "Password") {
+        cipher.login.username = this.getValueOrDefault(value.Username);
+        cipher.login.password = this.getValueOrDefault(value.Password);
+        cipher.login.uris = this.makeUriArray(value["Site URL"]);
+      } else if (type === "Credit Card") {
+        cipher.type = CipherType.Card;
+        cipher.card = new CardView();
+        cipher.card.cardholderName = this.getValueOrDefault(value["Name on card"]);
+        cipher.card.number = this.getValueOrDefault(value["Card Number"]);
+        cipher.card.brand = this.getCardBrand(cipher.card.number);
+        cipher.card.code = this.getValueOrDefault(value.CVV);
+        const expiry = this.getValueOrDefault(value.Expiry);
+        if (!this.isNullOrWhitespace(expiry)) {
+          const expParts = expiry.split("/");
+          if (expParts.length > 1) {
+            cipher.card.expMonth = parseInt(expParts[0], null).toString();
+            cipher.card.expYear = (2000 + parseInt(expParts[1], null)).toString();
+          }
         }
+      }
 
-        results.forEach(value => {
-            const cipher = this.initLoginCipher();
-            cipher.name = this.getValueOrDefault(value.Label, '--');
-            cipher.notes = this.getValueOrDefault(value.Notes);
-            const text = this.getValueOrDefault(value.Text);
-            if (!this.isNullOrWhitespace(text)) {
-                if (this.isNullOrWhitespace(cipher.notes)) {
-                    cipher.notes = text;
-                } else {
-                    cipher.notes += ('\n\n' + text);
-                }
-            }
-
-            const type = value['Entry Type'];
-            if (type === 'Password') {
-                cipher.login.username = this.getValueOrDefault(value.Username);
-                cipher.login.password = this.getValueOrDefault(value.Password);
-                cipher.login.uris = this.makeUriArray(value['Site URL']);
-            } else if (type === 'Credit Card') {
-                cipher.type = CipherType.Card;
-                cipher.card = new CardView();
-                cipher.card.cardholderName = this.getValueOrDefault(value['Name on card']);
-                cipher.card.number = this.getValueOrDefault(value['Card Number']);
-                cipher.card.brand = this.getCardBrand(cipher.card.number);
-                cipher.card.code = this.getValueOrDefault(value.CVV);
-                const expiry = this.getValueOrDefault(value.Expiry);
-                if (!this.isNullOrWhitespace(expiry)) {
-                    const expParts = expiry.split('/');
-                    if (expParts.length > 1) {
-                        cipher.card.expMonth = parseInt(expParts[0], null).toString();
-                        cipher.card.expYear = (2000 + parseInt(expParts[1], null)).toString();
-                    }
-                }
-            }
-
-            this.convertToNoteIfNeeded(cipher);
-            this.cleanupCipher(cipher);
-            result.ciphers.push(cipher);
-        });
-
-        result.success = true;
-        return Promise.resolve(result);
-    }
+      this.convertToNoteIfNeeded(cipher);
+      this.cleanupCipher(cipher);
+      result.ciphers.push(cipher);
+    });
+
+    result.success = true;
+    return Promise.resolve(result);
+  }
 }
diff --git a/jslib/common/src/importers/enpassCsvImporter.ts b/jslib/common/src/importers/enpassCsvImporter.ts
index 0b421d96..5f9ad54e 100644
--- a/jslib/common/src/importers/enpassCsvImporter.ts
+++ b/jslib/common/src/importers/enpassCsvImporter.ts
@@ -1,112 +1,135 @@
-import { BaseImporter } from './baseImporter';
-import { Importer } from './importer';
+import { BaseImporter } from "./baseImporter";
+import { Importer } from "./importer";
 
-import { ImportResult } from '../models/domain/importResult';
+import { ImportResult } from "../models/domain/importResult";
 
-import { CipherType } from '../enums/cipherType';
-import { SecureNoteType } from '../enums/secureNoteType';
+import { CipherType } from "../enums/cipherType";
+import { SecureNoteType } from "../enums/secureNoteType";
 
-import { CardView } from '../models/view/cardView';
-import { SecureNoteView } from '../models/view/secureNoteView';
+import { CardView } from "../models/view/cardView";
+import { SecureNoteView } from "../models/view/secureNoteView";
 
 export class EnpassCsvImporter extends BaseImporter implements Importer {
-    parse(data: string): Promise<ImportResult> {
-        const result = new ImportResult();
-        const results = this.parseCsv(data, false);
-        if (results == null) {
-            result.success = false;
-            return Promise.resolve(result);
-        }
-
-        let firstRow = true;
-        results.forEach(value => {
-            if (value.length < 2 || (firstRow && (value[0] === 'Title' || value[0] === 'title'))) {
-                firstRow = false;
-                return;
-            }
+  parse(data: string): Promise<ImportResult> {
+    const result = new ImportResult();
+    const results = this.parseCsv(data, false);
+    if (results == null) {
+      result.success = false;
+      return Promise.resolve(result);
+    }
 
-            const cipher = this.initLoginCipher();
-            cipher.notes = this.getValueOrDefault(value[value.length - 1]);
-            cipher.name = this.getValueOrDefault(value[0], '--');
+    let firstRow = true;
+    results.forEach((value) => {
+      if (value.length < 2 || (firstRow && (value[0] === "Title" || value[0] === "title"))) {
+        firstRow = false;
+        return;
+      }
 
-            if (value.length === 2 || (!this.containsField(value, 'username') &&
-                !this.containsField(value, 'password') && !this.containsField(value, 'email') &&
-                !this.containsField(value, 'url'))) {
-                cipher.type = CipherType.SecureNote;
-                cipher.secureNote = new SecureNoteView();
-                cipher.secureNote.type = SecureNoteType.Generic;
-            }
+      const cipher = this.initLoginCipher();
+      cipher.notes = this.getValueOrDefault(value[value.length - 1]);
+      cipher.name = this.getValueOrDefault(value[0], "--");
 
-            if (this.containsField(value, 'cardholder') && this.containsField(value, 'number') &&
-                this.containsField(value, 'expiry date')) {
-                cipher.type = CipherType.Card;
-                cipher.card = new CardView();
-            }
+      if (
+        value.length === 2 ||
+        (!this.containsField(value, "username") &&
+          !this.containsField(value, "password") &&
+          !this.containsField(value, "email") &&
+          !this.containsField(value, "url"))
+      ) {
+        cipher.type = CipherType.SecureNote;
+        cipher.secureNote = new SecureNoteView();
+        cipher.secureNote.type = SecureNoteType.Generic;
+      }
 
-            if (value.length > 2 && (value.length % 2) === 0) {
-                for (let i = 0; i < value.length - 2; i += 2) {
-                    const fieldValue: string = value[i + 2];
-                    if (this.isNullOrWhitespace(fieldValue)) {
-                        continue;
-                    }
+      if (
+        this.containsField(value, "cardholder") &&
+        this.containsField(value, "number") &&
+        this.containsField(value, "expiry date")
+      ) {
+        cipher.type = CipherType.Card;
+        cipher.card = new CardView();
+      }
 
-                    const fieldName: string = value[i + 1];
-                    const fieldNameLower = fieldName.toLowerCase();
+      if (value.length > 2 && value.length % 2 === 0) {
+        for (let i = 0; i < value.length - 2; i += 2) {
+          const fieldValue: string = value[i + 2];
+          if (this.isNullOrWhitespace(fieldValue)) {
+            continue;
+          }
 
-                    if (cipher.type === CipherType.Login) {
-                        if (fieldNameLower === 'url' && (cipher.login.uris == null || cipher.login.uris.length === 0)) {
-                            cipher.login.uris = this.makeUriArray(fieldValue);
-                            continue;
-                        } else if ((fieldNameLower === 'username' || fieldNameLower === 'email') &&
-                            this.isNullOrWhitespace(cipher.login.username)) {
-                            cipher.login.username = fieldValue;
-                            continue;
-                        } else if (fieldNameLower === 'password' && this.isNullOrWhitespace(cipher.login.password)) {
-                            cipher.login.password = fieldValue;
-                            continue;
-                        } else if (fieldNameLower === 'totp' && this.isNullOrWhitespace(cipher.login.totp)) {
-                            cipher.login.totp = fieldValue;
-                            continue;
-                        }
-                    } else if (cipher.type === CipherType.Card) {
-                        if (fieldNameLower === 'cardholder' && this.isNullOrWhitespace(cipher.card.cardholderName)) {
-                            cipher.card.cardholderName = fieldValue;
-                            continue;
-                        } else if (fieldNameLower === 'number' && this.isNullOrWhitespace(cipher.card.number)) {
-                            cipher.card.number = fieldValue;
-                            cipher.card.brand = this.getCardBrand(fieldValue);
-                            continue;
-                        } else if (fieldNameLower === 'cvc' && this.isNullOrWhitespace(cipher.card.code)) {
-                            cipher.card.code = fieldValue;
-                            continue;
-                        } else if (fieldNameLower === 'expiry date' && this.isNullOrWhitespace(cipher.card.expMonth) &&
-                            this.isNullOrWhitespace(cipher.card.expYear)) {
-                            if (this.setCardExpiration(cipher, fieldValue)) {
-                                continue;
-                            }
-                        } else if (fieldNameLower === 'type') {
-                            // Skip since brand was determined from number above
-                            continue;
-                        }
-                    }
+          const fieldName: string = value[i + 1];
+          const fieldNameLower = fieldName.toLowerCase();
 
-                    this.processKvp(cipher, fieldName, fieldValue);
-                }
+          if (cipher.type === CipherType.Login) {
+            if (
+              fieldNameLower === "url" &&
+              (cipher.login.uris == null || cipher.login.uris.length === 0)
+            ) {
+              cipher.login.uris = this.makeUriArray(fieldValue);
+              continue;
+            } else if (
+              (fieldNameLower === "username" || fieldNameLower === "email") &&
+              this.isNullOrWhitespace(cipher.login.username)
+            ) {
+              cipher.login.username = fieldValue;
+              continue;
+            } else if (
+              fieldNameLower === "password" &&
+              this.isNullOrWhitespace(cipher.login.password)
+            ) {
+              cipher.login.password = fieldValue;
+              continue;
+            } else if (fieldNameLower === "totp" && this.isNullOrWhitespace(cipher.login.totp)) {
+              cipher.login.totp = fieldValue;
+              continue;
             }
+          } else if (cipher.type === CipherType.Card) {
+            if (
+              fieldNameLower === "cardholder" &&
+              this.isNullOrWhitespace(cipher.card.cardholderName)
+            ) {
+              cipher.card.cardholderName = fieldValue;
+              continue;
+            } else if (fieldNameLower === "number" && this.isNullOrWhitespace(cipher.card.number)) {
+              cipher.card.number = fieldValue;
+              cipher.card.brand = this.getCardBrand(fieldValue);
+              continue;
+            } else if (fieldNameLower === "cvc" && this.isNullOrWhitespace(cipher.card.code)) {
+              cipher.card.code = fieldValue;
+              continue;
+            } else if (
+              fieldNameLower === "expiry date" &&
+              this.isNullOrWhitespace(cipher.card.expMonth) &&
+              this.isNullOrWhitespace(cipher.card.expYear)
+            ) {
+              if (this.setCardExpiration(cipher, fieldValue)) {
+                continue;
+              }
+            } else if (fieldNameLower === "type") {
+              // Skip since brand was determined from number above
+              continue;
+            }
+          }
 
-            this.cleanupCipher(cipher);
-            result.ciphers.push(cipher);
-        });
+          this.processKvp(cipher, fieldName, fieldValue);
+        }
+      }
 
-        result.success = true;
-        return Promise.resolve(result);
-    }
+      this.cleanupCipher(cipher);
+      result.ciphers.push(cipher);
+    });
 
-    private containsField(fields: any[], name: string) {
-        if (fields == null || name == null) {
-            return false;
-        }
-        return fields.filter(f => !this.isNullOrWhitespace(f) &&
-            f.toLowerCase() === name.toLowerCase()).length > 0;
+    result.success = true;
+    return Promise.resolve(result);
+  }
+
+  private containsField(fields: any[], name: string) {
+    if (fields == null || name == null) {
+      return false;
     }
+    return (
+      fields.filter((f) => !this.isNullOrWhitespace(f) && f.toLowerCase() === name.toLowerCase())
+        .length > 0
+    );
+  }
 }
diff --git a/jslib/common/src/importers/enpassJsonImporter.ts b/jslib/common/src/importers/enpassJsonImporter.ts
index 1b325224..631fbc51 100644
--- a/jslib/common/src/importers/enpassJsonImporter.ts
+++ b/jslib/common/src/importers/enpassJsonImporter.ts
@@ -1,163 +1,193 @@
-import { BaseImporter } from './baseImporter';
-import { Importer } from './importer';
+import { BaseImporter } from "./baseImporter";
+import { Importer } from "./importer";
 
-import { ImportResult } from '../models/domain/importResult';
+import { ImportResult } from "../models/domain/importResult";
 
-import { CardView } from '../models/view/cardView';
-import { CipherView } from '../models/view/cipherView';
-import { FolderView } from '../models/view/folderView';
+import { CardView } from "../models/view/cardView";
+import { CipherView } from "../models/view/cipherView";
+import { FolderView } from "../models/view/folderView";
 
-import { CipherType } from '../enums/cipherType';
-import { FieldType } from '../enums/fieldType';
+import { CipherType } from "../enums/cipherType";
+import { FieldType } from "../enums/fieldType";
 
 export class EnpassJsonImporter extends BaseImporter implements Importer {
-    parse(data: string): Promise<ImportResult> {
-        const result = new ImportResult();
-        const results = JSON.parse(data);
-        if (results == null || results.items == null || results.items.length === 0) {
-            result.success = false;
-            return Promise.resolve(result);
-        }
-
-        const foldersMap = new Map<string, string>();
-        const foldersIndexMap = new Map<string, number>();
-        const folderTree = this.buildFolderTree(results.folders);
-        this.flattenFolderTree(null, folderTree, foldersMap);
-        foldersMap.forEach((val, key) => {
-            foldersIndexMap.set(key, result.folders.length);
-            const f = new FolderView();
-            f.name = val;
-            result.folders.push(f);
-        });
-
-        results.items.forEach((item: any) => {
-            if (item.folders != null && item.folders.length > 0 && foldersIndexMap.has(item.folders[0])) {
-                result.folderRelationships.push([result.ciphers.length, foldersIndexMap.get(item.folders[0])]);
-            }
-
-            const cipher = this.initLoginCipher();
-            cipher.name = this.getValueOrDefault(item.title);
-            cipher.favorite = item.favorite > 0;
-
-            if (item.template_type != null && item.fields != null && item.fields.length > 0) {
-                if (item.template_type.indexOf('login.') === 0 || item.template_type.indexOf('password.') === 0) {
-                    this.processLogin(cipher, item.fields);
-                } else if (item.template_type.indexOf('creditcard.') === 0) {
-                    this.processCard(cipher, item.fields);
-                } else if (item.template_type.indexOf('identity.') < 0 &&
-                    item.fields.some((f: any) => f.type === 'password' && !this.isNullOrWhitespace(f.value))) {
-                    this.processLogin(cipher, item.fields);
-                } else {
-                    this.processNote(cipher, item.fields);
-                }
-            }
-
-            cipher.notes += ('\n' + this.getValueOrDefault(item.note, ''));
-            this.convertToNoteIfNeeded(cipher);
-            this.cleanupCipher(cipher);
-            result.ciphers.push(cipher);
-        });
-
-        result.success = true;
-        return Promise.resolve(result);
+  parse(data: string): Promise<ImportResult> {
+    const result = new ImportResult();
+    const results = JSON.parse(data);
+    if (results == null || results.items == null || results.items.length === 0) {
+      result.success = false;
+      return Promise.resolve(result);
     }
 
-    private processLogin(cipher: CipherView, fields: any[]) {
-        const urls: string[] = [];
-        fields.forEach((field: any) => {
-            if (this.isNullOrWhitespace(field.value) || field.type === 'section') {
-                return;
-            }
-
-            if ((field.type === 'username' || field.type === 'email') &&
-                this.isNullOrWhitespace(cipher.login.username)) {
-                cipher.login.username = field.value;
-            } else if (field.type === 'password' && this.isNullOrWhitespace(cipher.login.password)) {
-                cipher.login.password = field.value;
-            } else if (field.type === 'totp' && this.isNullOrWhitespace(cipher.login.totp)) {
-                cipher.login.totp = field.value;
-            } else if (field.type === 'url') {
-                urls.push(field.value);
-            } else {
-                this.processKvp(cipher, field.label, field.value,
-                    field.sensitive === 1 ? FieldType.Hidden : FieldType.Text);
-            }
-        });
-        cipher.login.uris = this.makeUriArray(urls);
+    const foldersMap = new Map<string, string>();
+    const foldersIndexMap = new Map<string, number>();
+    const folderTree = this.buildFolderTree(results.folders);
+    this.flattenFolderTree(null, folderTree, foldersMap);
+    foldersMap.forEach((val, key) => {
+      foldersIndexMap.set(key, result.folders.length);
+      const f = new FolderView();
+      f.name = val;
+      result.folders.push(f);
+    });
+
+    results.items.forEach((item: any) => {
+      if (item.folders != null && item.folders.length > 0 && foldersIndexMap.has(item.folders[0])) {
+        result.folderRelationships.push([
+          result.ciphers.length,
+          foldersIndexMap.get(item.folders[0]),
+        ]);
+      }
+
+      const cipher = this.initLoginCipher();
+      cipher.name = this.getValueOrDefault(item.title);
+      cipher.favorite = item.favorite > 0;
+
+      if (item.template_type != null && item.fields != null && item.fields.length > 0) {
+        if (
+          item.template_type.indexOf("login.") === 0 ||
+          item.template_type.indexOf("password.") === 0
+        ) {
+          this.processLogin(cipher, item.fields);
+        } else if (item.template_type.indexOf("creditcard.") === 0) {
+          this.processCard(cipher, item.fields);
+        } else if (
+          item.template_type.indexOf("identity.") < 0 &&
+          item.fields.some((f: any) => f.type === "password" && !this.isNullOrWhitespace(f.value))
+        ) {
+          this.processLogin(cipher, item.fields);
+        } else {
+          this.processNote(cipher, item.fields);
+        }
+      }
+
+      cipher.notes += "\n" + this.getValueOrDefault(item.note, "");
+      this.convertToNoteIfNeeded(cipher);
+      this.cleanupCipher(cipher);
+      result.ciphers.push(cipher);
+    });
+
+    result.success = true;
+    return Promise.resolve(result);
+  }
+
+  private processLogin(cipher: CipherView, fields: any[]) {
+    const urls: string[] = [];
+    fields.forEach((field: any) => {
+      if (this.isNullOrWhitespace(field.value) || field.type === "section") {
+        return;
+      }
+
+      if (
+        (field.type === "username" || field.type === "email") &&
+        this.isNullOrWhitespace(cipher.login.username)
+      ) {
+        cipher.login.username = field.value;
+      } else if (field.type === "password" && this.isNullOrWhitespace(cipher.login.password)) {
+        cipher.login.password = field.value;
+      } else if (field.type === "totp" && this.isNullOrWhitespace(cipher.login.totp)) {
+        cipher.login.totp = field.value;
+      } else if (field.type === "url") {
+        urls.push(field.value);
+      } else {
+        this.processKvp(
+          cipher,
+          field.label,
+          field.value,
+          field.sensitive === 1 ? FieldType.Hidden : FieldType.Text
+        );
+      }
+    });
+    cipher.login.uris = this.makeUriArray(urls);
+  }
+
+  private processCard(cipher: CipherView, fields: any[]) {
+    cipher.card = new CardView();
+    cipher.type = CipherType.Card;
+    fields.forEach((field: any) => {
+      if (
+        this.isNullOrWhitespace(field.value) ||
+        field.type === "section" ||
+        field.type === "ccType"
+      ) {
+        return;
+      }
+
+      if (field.type === "ccName" && this.isNullOrWhitespace(cipher.card.cardholderName)) {
+        cipher.card.cardholderName = field.value;
+      } else if (field.type === "ccNumber" && this.isNullOrWhitespace(cipher.card.number)) {
+        cipher.card.number = field.value;
+        cipher.card.brand = this.getCardBrand(cipher.card.number);
+      } else if (field.type === "ccCvc" && this.isNullOrWhitespace(cipher.card.code)) {
+        cipher.card.code = field.value;
+      } else if (field.type === "ccExpiry" && this.isNullOrWhitespace(cipher.card.expYear)) {
+        if (!this.setCardExpiration(cipher, field.value)) {
+          this.processKvp(
+            cipher,
+            field.label,
+            field.value,
+            field.sensitive === 1 ? FieldType.Hidden : FieldType.Text
+          );
+        }
+      } else {
+        this.processKvp(
+          cipher,
+          field.label,
+          field.value,
+          field.sensitive === 1 ? FieldType.Hidden : FieldType.Text
+        );
+      }
+    });
+  }
+
+  private processNote(cipher: CipherView, fields: any[]) {
+    fields.forEach((field: any) => {
+      if (this.isNullOrWhitespace(field.value) || field.type === "section") {
+        return;
+      }
+      this.processKvp(
+        cipher,
+        field.label,
+        field.value,
+        field.sensitive === 1 ? FieldType.Hidden : FieldType.Text
+      );
+    });
+  }
+
+  private buildFolderTree(folders: any[]): any[] {
+    if (folders == null) {
+      return [];
     }
-
-    private processCard(cipher: CipherView, fields: any[]) {
-        cipher.card = new CardView();
-        cipher.type = CipherType.Card;
-        fields.forEach((field: any) => {
-            if (this.isNullOrWhitespace(field.value) || field.type === 'section' || field.type === 'ccType') {
-                return;
-            }
-
-            if (field.type === 'ccName' && this.isNullOrWhitespace(cipher.card.cardholderName)) {
-                cipher.card.cardholderName = field.value;
-            } else if (field.type === 'ccNumber' && this.isNullOrWhitespace(cipher.card.number)) {
-                cipher.card.number = field.value;
-                cipher.card.brand = this.getCardBrand(cipher.card.number);
-            } else if (field.type === 'ccCvc' && this.isNullOrWhitespace(cipher.card.code)) {
-                cipher.card.code = field.value;
-            } else if (field.type === 'ccExpiry' && this.isNullOrWhitespace(cipher.card.expYear)) {
-                if (!this.setCardExpiration(cipher, field.value)) {
-                    this.processKvp(cipher, field.label, field.value,
-                        field.sensitive === 1 ? FieldType.Hidden : FieldType.Text);
-                }
-            } else {
-                this.processKvp(cipher, field.label, field.value,
-                    field.sensitive === 1 ? FieldType.Hidden : FieldType.Text);
-            }
-        });
+    const folderTree: any[] = [];
+    const map = new Map<string, any>([]);
+    folders.forEach((obj: any) => {
+      map.set(obj.uuid, obj);
+      obj.children = [];
+    });
+    folders.forEach((obj: any) => {
+      if (obj.parent_uuid != null && obj.parent_uuid !== "" && map.has(obj.parent_uuid)) {
+        map.get(obj.parent_uuid).children.push(obj);
+      } else {
+        folderTree.push(obj);
+      }
+    });
+    return folderTree;
+  }
+
+  private flattenFolderTree(titlePrefix: string, tree: any[], map: Map<string, string>) {
+    if (tree == null) {
+      return;
     }
-
-    private processNote(cipher: CipherView, fields: any[]) {
-        fields.forEach((field: any) => {
-            if (this.isNullOrWhitespace(field.value) || field.type === 'section') {
-                return;
-            }
-            this.processKvp(cipher, field.label, field.value,
-                field.sensitive === 1 ? FieldType.Hidden : FieldType.Text);
-        });
-    }
-
-    private buildFolderTree(folders: any[]): any[] {
-        if (folders == null) {
-            return [];
+    tree.forEach((f: any) => {
+      if (f.title != null && f.title.trim() !== "") {
+        let title = f.title.trim();
+        if (titlePrefix != null && titlePrefix.trim() !== "") {
+          title = titlePrefix + "/" + title;
         }
-        const folderTree: any[] = [];
-        const map = new Map<string, any>([]);
-        folders.forEach((obj: any) => {
-            map.set(obj.uuid, obj);
-            obj.children = [];
-        });
-        folders.forEach((obj: any) => {
-            if (obj.parent_uuid != null && obj.parent_uuid !== '' && map.has(obj.parent_uuid)) {
-                map.get(obj.parent_uuid).children.push(obj);
-            } else {
-                folderTree.push(obj);
-            }
-        });
-        return folderTree;
-    }
-
-    private flattenFolderTree(titlePrefix: string, tree: any[], map: Map<string, string>) {
-        if (tree == null) {
-            return;
+        map.set(f.uuid, title);
+        if (f.children != null && f.children.length !== 0) {
+          this.flattenFolderTree(title, f.children, map);
         }
-        tree.forEach((f: any) => {
-            if (f.title != null && f.title.trim() !== '') {
-                let title = f.title.trim();
-                if (titlePrefix != null && titlePrefix.trim() !== '') {
-                    title = titlePrefix + '/' + title;
-                }
-                map.set(f.uuid, title);
-                if (f.children != null && f.children.length !== 0) {
-                    this.flattenFolderTree(title, f.children, map);
-                }
-            }
-        });
-    }
+      }
+    });
+  }
 }
diff --git a/jslib/common/src/importers/firefoxCsvImporter.ts b/jslib/common/src/importers/firefoxCsvImporter.ts
index df82cf97..3fc97a63 100644
--- a/jslib/common/src/importers/firefoxCsvImporter.ts
+++ b/jslib/common/src/importers/firefoxCsvImporter.ts
@@ -1,31 +1,33 @@
-import { BaseImporter } from './baseImporter';
-import { Importer } from './importer';
+import { BaseImporter } from "./baseImporter";
+import { Importer } from "./importer";
 
-import { ImportResult } from '../models/domain/importResult';
+import { ImportResult } from "../models/domain/importResult";
 
 export class FirefoxCsvImporter extends BaseImporter implements Importer {
-    parse(data: string): Promise<ImportResult> {
-        const result = new ImportResult();
-        const results = this.parseCsv(data, true);
-        if (results == null) {
-            result.success = false;
-            return Promise.resolve(result);
-        }
+  parse(data: string): Promise<ImportResult> {
+    const result = new ImportResult();
+    const results = this.parseCsv(data, true);
+    if (results == null) {
+      result.success = false;
+      return Promise.resolve(result);
+    }
 
-        results.filter(value => {
-            return value.url !== 'chrome://FirefoxAccounts';
-        }).forEach(value => {
-            const cipher = this.initLoginCipher();
-            const url = this.getValueOrDefault(value.url, this.getValueOrDefault(value.hostname));
-            cipher.name = this.getValueOrDefault(this.nameFromUrl(url), '--');
-            cipher.login.username = this.getValueOrDefault(value.username);
-            cipher.login.password = this.getValueOrDefault(value.password);
-            cipher.login.uris = this.makeUriArray(url);
-            this.cleanupCipher(cipher);
-            result.ciphers.push(cipher);
-        });
+    results
+      .filter((value) => {
+        return value.url !== "chrome://FirefoxAccounts";
+      })
+      .forEach((value) => {
+        const cipher = this.initLoginCipher();
+        const url = this.getValueOrDefault(value.url, this.getValueOrDefault(value.hostname));
+        cipher.name = this.getValueOrDefault(this.nameFromUrl(url), "--");
+        cipher.login.username = this.getValueOrDefault(value.username);
+        cipher.login.password = this.getValueOrDefault(value.password);
+        cipher.login.uris = this.makeUriArray(url);
+        this.cleanupCipher(cipher);
+        result.ciphers.push(cipher);
+      });
 
-        result.success = true;
-        return Promise.resolve(result);
-    }
+    result.success = true;
+    return Promise.resolve(result);
+  }
 }
diff --git a/jslib/common/src/importers/fsecureFskImporter.ts b/jslib/common/src/importers/fsecureFskImporter.ts
index 1aac8932..91564fe1 100644
--- a/jslib/common/src/importers/fsecureFskImporter.ts
+++ b/jslib/common/src/importers/fsecureFskImporter.ts
@@ -1,60 +1,60 @@
-import { BaseImporter } from './baseImporter';
-import { Importer } from './importer';
+import { BaseImporter } from "./baseImporter";
+import { Importer } from "./importer";
 
-import { ImportResult } from '../models/domain/importResult';
+import { ImportResult } from "../models/domain/importResult";
 
-import { CardView } from '../models/view/cardView';
+import { CardView } from "../models/view/cardView";
 
-import { CipherType } from '../enums/cipherType';
+import { CipherType } from "../enums/cipherType";
 
 export class FSecureFskImporter extends BaseImporter implements Importer {
-    parse(data: string): Promise<ImportResult> {
-        const result = new ImportResult();
-        const results = JSON.parse(data);
-        if (results == null || results.data == null) {
-            result.success = false;
-            return Promise.resolve(result);
-        }
+  parse(data: string): Promise<ImportResult> {
+    const result = new ImportResult();
+    const results = JSON.parse(data);
+    if (results == null || results.data == null) {
+      result.success = false;
+      return Promise.resolve(result);
+    }
 
-        for (const key in results.data) {
-            if (!results.data.hasOwnProperty(key)) {
-                continue;
-            }
-
-            const value = results.data[key];
-            const cipher = this.initLoginCipher();
-            cipher.name = this.getValueOrDefault(value.service);
-            cipher.notes = this.getValueOrDefault(value.notes);
-
-            if (value.style === 'website') {
-                cipher.login.username = this.getValueOrDefault(value.username);
-                cipher.login.password = this.getValueOrDefault(value.password);
-                cipher.login.uris = this.makeUriArray(value.url);
-            } else if (value.style === 'creditcard') {
-                cipher.type = CipherType.Card;
-                cipher.card = new CardView();
-                cipher.card.cardholderName = this.getValueOrDefault(value.username);
-                cipher.card.number = this.getValueOrDefault(value.creditNumber);
-                cipher.card.brand = this.getCardBrand(cipher.card.number);
-                cipher.card.code = this.getValueOrDefault(value.creditCvv);
-                if (!this.isNullOrWhitespace(value.creditExpiry)) {
-                    if (!this.setCardExpiration(cipher, value.creditExpiry)) {
-                        this.processKvp(cipher, 'Expiration', value.creditExpiry);
-                    }
-                }
-                if (!this.isNullOrWhitespace(value.password)) {
-                    this.processKvp(cipher, 'PIN', value.password);
-                }
-            } else {
-                continue;
-            }
-
-            this.convertToNoteIfNeeded(cipher);
-            this.cleanupCipher(cipher);
-            result.ciphers.push(cipher);
+    for (const key in results.data) {
+      if (!results.data.hasOwnProperty(key)) {
+        continue;
+      }
+
+      const value = results.data[key];
+      const cipher = this.initLoginCipher();
+      cipher.name = this.getValueOrDefault(value.service);
+      cipher.notes = this.getValueOrDefault(value.notes);
+
+      if (value.style === "website" || value.style === "globe") {
+        cipher.login.username = this.getValueOrDefault(value.username);
+        cipher.login.password = this.getValueOrDefault(value.password);
+        cipher.login.uris = this.makeUriArray(value.url);
+      } else if (value.style === "creditcard") {
+        cipher.type = CipherType.Card;
+        cipher.card = new CardView();
+        cipher.card.cardholderName = this.getValueOrDefault(value.username);
+        cipher.card.number = this.getValueOrDefault(value.creditNumber);
+        cipher.card.brand = this.getCardBrand(cipher.card.number);
+        cipher.card.code = this.getValueOrDefault(value.creditCvv);
+        if (!this.isNullOrWhitespace(value.creditExpiry)) {
+          if (!this.setCardExpiration(cipher, value.creditExpiry)) {
+            this.processKvp(cipher, "Expiration", value.creditExpiry);
+          }
         }
+        if (!this.isNullOrWhitespace(value.password)) {
+          this.processKvp(cipher, "PIN", value.password);
+        }
+      } else {
+        continue;
+      }
 
-        result.success = true;
-        return Promise.resolve(result);
+      this.convertToNoteIfNeeded(cipher);
+      this.cleanupCipher(cipher);
+      result.ciphers.push(cipher);
     }
+
+    result.success = true;
+    return Promise.resolve(result);
+  }
 }
diff --git a/jslib/common/src/importers/gnomeJsonImporter.ts b/jslib/common/src/importers/gnomeJsonImporter.ts
index 23ebfc83..98dc79b5 100644
--- a/jslib/common/src/importers/gnomeJsonImporter.ts
+++ b/jslib/common/src/importers/gnomeJsonImporter.ts
@@ -1,60 +1,71 @@
-import { BaseImporter } from './baseImporter';
-import { Importer } from './importer';
+import { BaseImporter } from "./baseImporter";
+import { Importer } from "./importer";
 
-import { ImportResult } from '../models/domain/importResult';
+import { ImportResult } from "../models/domain/importResult";
 
 export class GnomeJsonImporter extends BaseImporter implements Importer {
-    parse(data: string): Promise<ImportResult> {
-        const result = new ImportResult();
-        const results = JSON.parse(data);
-        if (results == null || Object.keys(results).length === 0) {
-            result.success = false;
-            return Promise.resolve(result);
-        }
+  parse(data: string): Promise<ImportResult> {
+    const result = new ImportResult();
+    const results = JSON.parse(data);
+    if (results == null || Object.keys(results).length === 0) {
+      result.success = false;
+      return Promise.resolve(result);
+    }
 
-        for (const keyRing in results) {
-            if (!results.hasOwnProperty(keyRing) || this.isNullOrWhitespace(keyRing) ||
-                results[keyRing].length === 0) {
-                continue;
-            }
+    for (const keyRing in results) {
+      if (
+        !results.hasOwnProperty(keyRing) ||
+        this.isNullOrWhitespace(keyRing) ||
+        results[keyRing].length === 0
+      ) {
+        continue;
+      }
 
-            results[keyRing].forEach((value: any) => {
-                if (this.isNullOrWhitespace(value.display_name) || value.display_name.indexOf('http') !== 0) {
-                    return;
-                }
-
-                this.processFolder(result, keyRing);
-                const cipher = this.initLoginCipher();
-                cipher.name = value.display_name.replace('http://', '').replace('https://', '');
-                if (cipher.name.length > 30) {
-                    cipher.name = cipher.name.substring(0, 30);
-                }
-                cipher.login.password = this.getValueOrDefault(value.secret);
-                cipher.login.uris = this.makeUriArray(value.display_name);
-
-                if (value.attributes != null) {
-                    cipher.login.username = value.attributes != null ?
-                        this.getValueOrDefault(value.attributes.username_value) : null;
-                    for (const attr in value.attributes) {
-                        if (!value.attributes.hasOwnProperty(attr) || attr === 'username_value' ||
-                            attr === 'xdg:schema') {
-                            continue;
-                        }
-                        this.processKvp(cipher, attr, value.attributes[attr]);
-                    }
-                }
-
-                this.convertToNoteIfNeeded(cipher);
-                this.cleanupCipher(cipher);
-                result.ciphers.push(cipher);
-            });
+      results[keyRing].forEach((value: any) => {
+        if (
+          this.isNullOrWhitespace(value.display_name) ||
+          value.display_name.indexOf("http") !== 0
+        ) {
+          return;
         }
 
-        if (this.organization) {
-            this.moveFoldersToCollections(result);
+        this.processFolder(result, keyRing);
+        const cipher = this.initLoginCipher();
+        cipher.name = value.display_name.replace("http://", "").replace("https://", "");
+        if (cipher.name.length > 30) {
+          cipher.name = cipher.name.substring(0, 30);
         }
+        cipher.login.password = this.getValueOrDefault(value.secret);
+        cipher.login.uris = this.makeUriArray(value.display_name);
 
-        result.success = true;
-        return Promise.resolve(result);
+        if (value.attributes != null) {
+          cipher.login.username =
+            value.attributes != null
+              ? this.getValueOrDefault(value.attributes.username_value)
+              : null;
+          for (const attr in value.attributes) {
+            if (
+              !value.attributes.hasOwnProperty(attr) ||
+              attr === "username_value" ||
+              attr === "xdg:schema"
+            ) {
+              continue;
+            }
+            this.processKvp(cipher, attr, value.attributes[attr]);
+          }
+        }
+
+        this.convertToNoteIfNeeded(cipher);
+        this.cleanupCipher(cipher);
+        result.ciphers.push(cipher);
+      });
+    }
+
+    if (this.organization) {
+      this.moveFoldersToCollections(result);
     }
+
+    result.success = true;
+    return Promise.resolve(result);
+  }
 }
diff --git a/jslib/common/src/importers/importer.ts b/jslib/common/src/importers/importer.ts
index 487dc184..a62cc6c1 100644
--- a/jslib/common/src/importers/importer.ts
+++ b/jslib/common/src/importers/importer.ts
@@ -1,6 +1,6 @@
-import { ImportResult } from '../models/domain/importResult';
+import { ImportResult } from "../models/domain/importResult";
 
 export interface Importer {
-    organizationId: string;
-    parse(data: string): Promise<ImportResult>;
+  organizationId: string;
+  parse(data: string): Promise<ImportResult>;
 }
diff --git a/jslib/common/src/importers/kasperskyTxtImporter.ts b/jslib/common/src/importers/kasperskyTxtImporter.ts
index efaf9228..b4745e1d 100644
--- a/jslib/common/src/importers/kasperskyTxtImporter.ts
+++ b/jslib/common/src/importers/kasperskyTxtImporter.ts
@@ -1,124 +1,124 @@
-import { BaseImporter } from './baseImporter';
-import { Importer } from './importer';
+import { BaseImporter } from "./baseImporter";
+import { Importer } from "./importer";
 
-import { ImportResult } from '../models/domain/importResult';
+import { ImportResult } from "../models/domain/importResult";
 
-const NotesHeader = 'Notes\n\n';
-const ApplicationsHeader = 'Applications\n\n';
-const WebsitesHeader = 'Websites\n\n';
-const Delimiter = '\n---\n';
+const NotesHeader = "Notes\n\n";
+const ApplicationsHeader = "Applications\n\n";
+const WebsitesHeader = "Websites\n\n";
+const Delimiter = "\n---\n";
 
 export class KasperskyTxtImporter extends BaseImporter implements Importer {
-    parse(data: string): Promise<ImportResult> {
-        const result = new ImportResult();
+  parse(data: string): Promise<ImportResult> {
+    const result = new ImportResult();
 
-        let notesData: string;
-        let applicationsData: string;
-        let websitesData: string;
-        let workingData = this.splitNewLine(data).join('\n');
+    let notesData: string;
+    let applicationsData: string;
+    let websitesData: string;
+    let workingData = this.splitNewLine(data).join("\n");
 
-        if (workingData.indexOf(NotesHeader) !== -1) {
-            const parts = workingData.split(NotesHeader);
-            if (parts.length > 1) {
-                workingData = parts[0];
-                notesData = parts[1];
-            }
-        }
-        if (workingData.indexOf(ApplicationsHeader) !== -1) {
-            const parts = workingData.split(ApplicationsHeader);
-            if (parts.length > 1) {
-                workingData = parts[0];
-                applicationsData = parts[1];
-            }
-        }
-        if (workingData.indexOf(WebsitesHeader) === 0) {
-            const parts = workingData.split(WebsitesHeader);
-            if (parts.length > 1) {
-                workingData = parts[0];
-                websitesData = parts[1];
-            }
-        }
+    if (workingData.indexOf(NotesHeader) !== -1) {
+      const parts = workingData.split(NotesHeader);
+      if (parts.length > 1) {
+        workingData = parts[0];
+        notesData = parts[1];
+      }
+    }
+    if (workingData.indexOf(ApplicationsHeader) !== -1) {
+      const parts = workingData.split(ApplicationsHeader);
+      if (parts.length > 1) {
+        workingData = parts[0];
+        applicationsData = parts[1];
+      }
+    }
+    if (workingData.indexOf(WebsitesHeader) === 0) {
+      const parts = workingData.split(WebsitesHeader);
+      if (parts.length > 1) {
+        workingData = parts[0];
+        websitesData = parts[1];
+      }
+    }
 
-        const notes = this.parseDataCategory(notesData);
-        const applications = this.parseDataCategory(applicationsData);
-        const websites = this.parseDataCategory(websitesData);
+    const notes = this.parseDataCategory(notesData);
+    const applications = this.parseDataCategory(applicationsData);
+    const websites = this.parseDataCategory(websitesData);
 
-        notes.forEach(n => {
-            const cipher = this.initLoginCipher();
-            cipher.name = this.getValueOrDefault(n.get('Name'));
-            cipher.notes = this.getValueOrDefault(n.get('Text'));
-            this.cleanupCipher(cipher);
-            result.ciphers.push(cipher);
-        });
+    notes.forEach((n) => {
+      const cipher = this.initLoginCipher();
+      cipher.name = this.getValueOrDefault(n.get("Name"));
+      cipher.notes = this.getValueOrDefault(n.get("Text"));
+      this.cleanupCipher(cipher);
+      result.ciphers.push(cipher);
+    });
 
-        websites.concat(applications).forEach(w => {
-            const cipher = this.initLoginCipher();
-            const nameKey = w.has('Website name') ? 'Website name' : 'Application';
-            cipher.name = this.getValueOrDefault(w.get(nameKey), '');
-            if (!this.isNullOrWhitespace(w.get('Login name'))) {
-                if (!this.isNullOrWhitespace(cipher.name)) {
-                    cipher.name += ': ';
-                }
-                cipher.name += w.get('Login name');
-            }
-            cipher.notes = this.getValueOrDefault(w.get('Comment'));
-            if (w.has('Website URL')) {
-                cipher.login.uris = this.makeUriArray(w.get('Website URL'));
-            }
-            cipher.login.username = this.getValueOrDefault(w.get('Login'));
-            cipher.login.password = this.getValueOrDefault(w.get('Password'));
-            this.cleanupCipher(cipher);
-            result.ciphers.push(cipher);
-        });
+    websites.concat(applications).forEach((w) => {
+      const cipher = this.initLoginCipher();
+      const nameKey = w.has("Website name") ? "Website name" : "Application";
+      cipher.name = this.getValueOrDefault(w.get(nameKey), "");
+      if (!this.isNullOrWhitespace(w.get("Login name"))) {
+        if (!this.isNullOrWhitespace(cipher.name)) {
+          cipher.name += ": ";
+        }
+        cipher.name += w.get("Login name");
+      }
+      cipher.notes = this.getValueOrDefault(w.get("Comment"));
+      if (w.has("Website URL")) {
+        cipher.login.uris = this.makeUriArray(w.get("Website URL"));
+      }
+      cipher.login.username = this.getValueOrDefault(w.get("Login"));
+      cipher.login.password = this.getValueOrDefault(w.get("Password"));
+      this.cleanupCipher(cipher);
+      result.ciphers.push(cipher);
+    });
 
-        result.success = true;
-        return Promise.resolve(result);
-    }
+    result.success = true;
+    return Promise.resolve(result);
+  }
 
-    private parseDataCategory(data: string): Map<string, string>[] {
-        if (this.isNullOrWhitespace(data) || data.indexOf(Delimiter) === -1) {
-            return [];
-        }
-        const items: Map<string, string>[] = [];
-        data.split(Delimiter).forEach(p => {
-            if (p.indexOf('\n') === -1) {
-                return;
-            }
-            const item = new Map<string, string>();
-            let itemComment: string;
-            let itemCommentKey: string;
-            p.split('\n').forEach(l => {
-                if (itemComment != null) {
-                    itemComment += ('\n' + l);
-                    return;
-                }
-                const colonIndex = l.indexOf(':');
-                let key: string;
-                let val: string;
-                if (colonIndex === -1) {
-                    return;
-                } else {
-                    key = l.substring(0, colonIndex);
-                    if (l.length > colonIndex + 1) {
-                        val = l.substring(colonIndex + 2);
-                    }
-                }
-                if (key != null) {
-                    item.set(key, val);
-                }
-                if (key === 'Comment' || key === 'Text') {
-                    itemComment = val;
-                    itemCommentKey = key;
-                }
-            });
-            if (itemComment != null && itemCommentKey != null) {
-                item.set(itemCommentKey, itemComment);
-            }
-            if (item.size === 0) {
-                return;
-            }
-            items.push(item);
-        });
-        return items;
+  private parseDataCategory(data: string): Map<string, string>[] {
+    if (this.isNullOrWhitespace(data) || data.indexOf(Delimiter) === -1) {
+      return [];
     }
+    const items: Map<string, string>[] = [];
+    data.split(Delimiter).forEach((p) => {
+      if (p.indexOf("\n") === -1) {
+        return;
+      }
+      const item = new Map<string, string>();
+      let itemComment: string;
+      let itemCommentKey: string;
+      p.split("\n").forEach((l) => {
+        if (itemComment != null) {
+          itemComment += "\n" + l;
+          return;
+        }
+        const colonIndex = l.indexOf(":");
+        let key: string;
+        let val: string;
+        if (colonIndex === -1) {
+          return;
+        } else {
+          key = l.substring(0, colonIndex);
+          if (l.length > colonIndex + 1) {
+            val = l.substring(colonIndex + 2);
+          }
+        }
+        if (key != null) {
+          item.set(key, val);
+        }
+        if (key === "Comment" || key === "Text") {
+          itemComment = val;
+          itemCommentKey = key;
+        }
+      });
+      if (itemComment != null && itemCommentKey != null) {
+        item.set(itemCommentKey, itemComment);
+      }
+      if (item.size === 0) {
+        return;
+      }
+      items.push(item);
+    });
+    return items;
+  }
 }
diff --git a/jslib/common/src/importers/keepass2XmlImporter.ts b/jslib/common/src/importers/keepass2XmlImporter.ts
index c91a925f..f6a61cf8 100644
--- a/jslib/common/src/importers/keepass2XmlImporter.ts
+++ b/jslib/common/src/importers/keepass2XmlImporter.ts
@@ -1,100 +1,103 @@
-import { BaseImporter } from './baseImporter';
-import { Importer } from './importer';
+import { BaseImporter } from "./baseImporter";
+import { Importer } from "./importer";
 
-import { FieldType } from '../enums/fieldType';
+import { FieldType } from "../enums/fieldType";
 
-import { ImportResult } from '../models/domain/importResult';
+import { ImportResult } from "../models/domain/importResult";
 
-import { FolderView } from '../models/view/folderView';
+import { FolderView } from "../models/view/folderView";
 
 export class KeePass2XmlImporter extends BaseImporter implements Importer {
-    result = new ImportResult();
+  result = new ImportResult();
 
-    parse(data: string): Promise<ImportResult> {
-        const doc = this.parseXml(data);
-        if (doc == null) {
-            this.result.success = false;
-            return Promise.resolve(this.result);
-        }
+  parse(data: string): Promise<ImportResult> {
+    const doc = this.parseXml(data);
+    if (doc == null) {
+      this.result.success = false;
+      return Promise.resolve(this.result);
+    }
 
-        const rootGroup = doc.querySelector('KeePassFile > Root > Group');
-        if (rootGroup == null) {
-            this.result.errorMessage = 'Missing `KeePassFile > Root > Group` node.';
-            this.result.success = false;
-            return Promise.resolve(this.result);
-        }
+    const rootGroup = doc.querySelector("KeePassFile > Root > Group");
+    if (rootGroup == null) {
+      this.result.errorMessage = "Missing `KeePassFile > Root > Group` node.";
+      this.result.success = false;
+      return Promise.resolve(this.result);
+    }
 
-        this.traverse(rootGroup, true, '');
+    this.traverse(rootGroup, true, "");
 
-        if (this.organization) {
-            this.moveFoldersToCollections(this.result);
-        }
+    if (this.organization) {
+      this.moveFoldersToCollections(this.result);
+    }
 
-        this.result.success = true;
-        return Promise.resolve(this.result);
+    this.result.success = true;
+    return Promise.resolve(this.result);
+  }
+
+  traverse(node: Element, isRootNode: boolean, groupPrefixName: string) {
+    const folderIndex = this.result.folders.length;
+    let groupName = groupPrefixName;
+
+    if (!isRootNode) {
+      if (groupName !== "") {
+        groupName += "/";
+      }
+      const nameEl = this.querySelectorDirectChild(node, "Name");
+      groupName += nameEl == null ? "-" : nameEl.textContent;
+      const folder = new FolderView();
+      folder.name = groupName;
+      this.result.folders.push(folder);
     }
 
-    traverse(node: Element, isRootNode: boolean, groupPrefixName: string) {
-        const folderIndex = this.result.folders.length;
-        let groupName = groupPrefixName;
-
-        if (!isRootNode) {
-            if (groupName !== '') {
-                groupName += '/';
-            }
-            const nameEl = this.querySelectorDirectChild(node, 'Name');
-            groupName += nameEl == null ? '-' : nameEl.textContent;
-            const folder = new FolderView();
-            folder.name = groupName;
-            this.result.folders.push(folder);
+    this.querySelectorAllDirectChild(node, "Entry").forEach((entry) => {
+      const cipherIndex = this.result.ciphers.length;
+
+      const cipher = this.initLoginCipher();
+      this.querySelectorAllDirectChild(entry, "String").forEach((entryString) => {
+        const valueEl = this.querySelectorDirectChild(entryString, "Value");
+        const value = valueEl != null ? valueEl.textContent : null;
+        if (this.isNullOrWhitespace(value)) {
+          return;
+        }
+        const keyEl = this.querySelectorDirectChild(entryString, "Key");
+        const key = keyEl != null ? keyEl.textContent : null;
+
+        if (key === "URL") {
+          cipher.login.uris = this.makeUriArray(value);
+        } else if (key === "UserName") {
+          cipher.login.username = value;
+        } else if (key === "Password") {
+          cipher.login.password = value;
+        } else if (key === "otp") {
+          cipher.login.totp = value.replace("key=", "");
+        } else if (key === "Title") {
+          cipher.name = value;
+        } else if (key === "Notes") {
+          cipher.notes += value + "\n";
+        } else {
+          let type = FieldType.Text;
+          const attrs = valueEl.attributes as any;
+          if (
+            attrs.length > 0 &&
+            attrs.ProtectInMemory != null &&
+            attrs.ProtectInMemory.value === "True"
+          ) {
+            type = FieldType.Hidden;
+          }
+          this.processKvp(cipher, key, value, type);
         }
+      });
 
-        this.querySelectorAllDirectChild(node, 'Entry').forEach(entry => {
-            const cipherIndex = this.result.ciphers.length;
-
-            const cipher = this.initLoginCipher();
-            this.querySelectorAllDirectChild(entry, 'String').forEach(entryString => {
-                const valueEl = this.querySelectorDirectChild(entryString, 'Value');
-                const value = valueEl != null ? valueEl.textContent : null;
-                if (this.isNullOrWhitespace(value)) {
-                    return;
-                }
-                const keyEl = this.querySelectorDirectChild(entryString, 'Key');
-                const key = keyEl != null ? keyEl.textContent : null;
-
-                if (key === 'URL') {
-                    cipher.login.uris = this.makeUriArray(value);
-                } else if (key === 'UserName') {
-                    cipher.login.username = value;
-                } else if (key === 'Password') {
-                    cipher.login.password = value;
-                }  else if (key === 'otp') {
-                    cipher.login.totp = value.replace('key=', '');
-                } else if (key === 'Title') {
-                    cipher.name = value;
-                } else if (key === 'Notes') {
-                    cipher.notes += (value + '\n');
-                } else {
-                    let type = FieldType.Text;
-                    const attrs = (valueEl.attributes as any);
-                    if (attrs.length > 0 && attrs.ProtectInMemory != null &&
-                        attrs.ProtectInMemory.value === 'True') {
-                        type = FieldType.Hidden;
-                    }
-                    this.processKvp(cipher, key, value, type);
-                }
-            });
-
-            this.cleanupCipher(cipher);
-            this.result.ciphers.push(cipher);
-
-            if (!isRootNode) {
-                this.result.folderRelationships.push([cipherIndex, folderIndex]);
-            }
-        });
-
-        this.querySelectorAllDirectChild(node, 'Group').forEach(group => {
-            this.traverse(group, false, groupName);
-        });
-    }
+      this.cleanupCipher(cipher);
+      this.result.ciphers.push(cipher);
+
+      if (!isRootNode) {
+        this.result.folderRelationships.push([cipherIndex, folderIndex]);
+      }
+    });
+
+    this.querySelectorAllDirectChild(node, "Group").forEach((group) => {
+      this.traverse(group, false, groupName);
+    });
+  }
 }
diff --git a/jslib/common/src/importers/keepassxCsvImporter.ts b/jslib/common/src/importers/keepassxCsvImporter.ts
index 6845c8e8..6c5812bd 100644
--- a/jslib/common/src/importers/keepassxCsvImporter.ts
+++ b/jslib/common/src/importers/keepassxCsvImporter.ts
@@ -1,42 +1,44 @@
-import { BaseImporter } from './baseImporter';
-import { Importer } from './importer';
+import { BaseImporter } from "./baseImporter";
+import { Importer } from "./importer";
 
-import { ImportResult } from '../models/domain/importResult';
+import { ImportResult } from "../models/domain/importResult";
 
 export class KeePassXCsvImporter extends BaseImporter implements Importer {
-    parse(data: string): Promise<ImportResult> {
-        const result = new ImportResult();
-        const results = this.parseCsv(data, true);
-        if (results == null) {
-            result.success = false;
-            return Promise.resolve(result);
-        }
-
-        results.forEach(value => {
-            if (this.isNullOrWhitespace(value.Title)) {
-                return;
-            }
+  parse(data: string): Promise<ImportResult> {
+    const result = new ImportResult();
+    const results = this.parseCsv(data, true);
+    if (results == null) {
+      result.success = false;
+      return Promise.resolve(result);
+    }
 
-            value.Group = !this.isNullOrWhitespace(value.Group) && value.Group.startsWith('Root/') ?
-                value.Group.replace('Root/', '') : value.Group;
-            const groupName = !this.isNullOrWhitespace(value.Group) ? value.Group : null;
-            this.processFolder(result, groupName);
+    results.forEach((value) => {
+      if (this.isNullOrWhitespace(value.Title)) {
+        return;
+      }
 
-            const cipher = this.initLoginCipher();
-            cipher.notes = this.getValueOrDefault(value.Notes);
-            cipher.name = this.getValueOrDefault(value.Title, '--');
-            cipher.login.username = this.getValueOrDefault(value.Username);
-            cipher.login.password = this.getValueOrDefault(value.Password);
-            cipher.login.uris = this.makeUriArray(value.URL);
-            this.cleanupCipher(cipher);
-            result.ciphers.push(cipher);
-        });
+      value.Group =
+        !this.isNullOrWhitespace(value.Group) && value.Group.startsWith("Root/")
+          ? value.Group.replace("Root/", "")
+          : value.Group;
+      const groupName = !this.isNullOrWhitespace(value.Group) ? value.Group : null;
+      this.processFolder(result, groupName);
 
-        if (this.organization) {
-            this.moveFoldersToCollections(result);
-        }
+      const cipher = this.initLoginCipher();
+      cipher.notes = this.getValueOrDefault(value.Notes);
+      cipher.name = this.getValueOrDefault(value.Title, "--");
+      cipher.login.username = this.getValueOrDefault(value.Username);
+      cipher.login.password = this.getValueOrDefault(value.Password);
+      cipher.login.uris = this.makeUriArray(value.URL);
+      this.cleanupCipher(cipher);
+      result.ciphers.push(cipher);
+    });
 
-        result.success = true;
-        return Promise.resolve(result);
+    if (this.organization) {
+      this.moveFoldersToCollections(result);
     }
+
+    result.success = true;
+    return Promise.resolve(result);
+  }
 }
diff --git a/jslib/common/src/importers/keeperCsvImporter.ts b/jslib/common/src/importers/keeperCsvImporter.ts
deleted file mode 100644
index e10b8f33..00000000
--- a/jslib/common/src/importers/keeperCsvImporter.ts
+++ /dev/null
@@ -1,48 +0,0 @@
-import { BaseImporter } from './baseImporter';
-import { Importer } from './importer';
-
-import { ImportResult } from '../models/domain/importResult';
-
-import { FolderView } from '../models/view/folderView';
-
-export class KeeperCsvImporter extends BaseImporter implements Importer {
-    parse(data: string): Promise<ImportResult> {
-        const result = new ImportResult();
-        const results = this.parseCsv(data, false);
-        if (results == null) {
-            result.success = false;
-            return Promise.resolve(result);
-        }
-
-        results.forEach(value => {
-            if (value.length < 6) {
-                return;
-            }
-
-            this.processFolder(result, value[0]);
-            const cipher = this.initLoginCipher();
-            cipher.notes = this.getValueOrDefault(value[5]) + '\n';
-            cipher.name = this.getValueOrDefault(value[1], '--');
-            cipher.login.username = this.getValueOrDefault(value[2]);
-            cipher.login.password = this.getValueOrDefault(value[3]);
-            cipher.login.uris = this.makeUriArray(value[4]);
-
-            if (value.length > 7) {
-                // we have some custom fields.
-                for (let i = 7; i < value.length; i = i + 2) {
-                    this.processKvp(cipher, value[i], value[i + 1]);
-                }
-            }
-
-            this.cleanupCipher(cipher);
-            result.ciphers.push(cipher);
-        });
-
-        if (this.organization) {
-            this.moveFoldersToCollections(result);
-        }
-
-        result.success = true;
-        return Promise.resolve(result);
-    }
-}
diff --git a/jslib/common/src/importers/keeperImporters/keeperCsvImporter.ts b/jslib/common/src/importers/keeperImporters/keeperCsvImporter.ts
new file mode 100644
index 00000000..56861b79
--- /dev/null
+++ b/jslib/common/src/importers/keeperImporters/keeperCsvImporter.ts
@@ -0,0 +1,48 @@
+import { BaseImporter } from "../baseImporter";
+import { Importer } from "../importer";
+
+import { ImportResult } from "../../models/domain/importResult";
+
+import { FolderView } from "../../models/view/folderView";
+
+export class KeeperCsvImporter extends BaseImporter implements Importer {
+  parse(data: string): Promise<ImportResult> {
+    const result = new ImportResult();
+    const results = this.parseCsv(data, false);
+    if (results == null) {
+      result.success = false;
+      return Promise.resolve(result);
+    }
+
+    results.forEach((value) => {
+      if (value.length < 6) {
+        return;
+      }
+
+      this.processFolder(result, value[0]);
+      const cipher = this.initLoginCipher();
+      cipher.notes = this.getValueOrDefault(value[5]) + "\n";
+      cipher.name = this.getValueOrDefault(value[1], "--");
+      cipher.login.username = this.getValueOrDefault(value[2]);
+      cipher.login.password = this.getValueOrDefault(value[3]);
+      cipher.login.uris = this.makeUriArray(value[4]);
+
+      if (value.length > 7) {
+        // we have some custom fields.
+        for (let i = 7; i < value.length; i = i + 2) {
+          this.processKvp(cipher, value[i], value[i + 1]);
+        }
+      }
+
+      this.cleanupCipher(cipher);
+      result.ciphers.push(cipher);
+    });
+
+    if (this.organization) {
+      this.moveFoldersToCollections(result);
+    }
+
+    result.success = true;
+    return Promise.resolve(result);
+  }
+}
diff --git a/jslib/common/src/importers/keeperImporters/keeperJsonImporter.ts b/jslib/common/src/importers/keeperImporters/keeperJsonImporter.ts
new file mode 100644
index 00000000..47e41114
--- /dev/null
+++ b/jslib/common/src/importers/keeperImporters/keeperJsonImporter.ts
@@ -0,0 +1,70 @@
+import { BaseImporter } from "../baseImporter";
+import { Importer } from "../importer";
+
+import { ImportResult } from "../../models/domain/importResult";
+
+import { KeeperJsonExport, RecordsEntity } from "./types/keeperJsonTypes";
+
+export class KeeperJsonImporter extends BaseImporter implements Importer {
+  parse(data: string): Promise<ImportResult> {
+    const result = new ImportResult();
+    const keeperExport: KeeperJsonExport = JSON.parse(data);
+    if (keeperExport == null || keeperExport.records == null || keeperExport.records.length === 0) {
+      result.success = false;
+      return Promise.resolve(result);
+    }
+
+    keeperExport.records.forEach((record) => {
+      this.parseFolders(result, record);
+
+      const cipher = this.initLoginCipher();
+      cipher.name = record.title;
+      cipher.login.username = record.login;
+      cipher.login.password = record.password;
+
+      cipher.login.uris = this.makeUriArray(record.login_url);
+      cipher.notes = record.notes;
+
+      if (record.custom_fields != null) {
+        let customfieldKeys = Object.keys(record.custom_fields);
+        if (record.custom_fields["TFC:Keeper"] != null) {
+          customfieldKeys = customfieldKeys.filter((item) => item !== "TFC:Keeper");
+          cipher.login.totp = record.custom_fields["TFC:Keeper"];
+        }
+
+        customfieldKeys.forEach((key) => {
+          this.processKvp(cipher, key, record.custom_fields[key]);
+        });
+      }
+
+      this.convertToNoteIfNeeded(cipher);
+      this.cleanupCipher(cipher);
+      result.ciphers.push(cipher);
+    });
+
+    if (this.organization) {
+      this.moveFoldersToCollections(result);
+    }
+
+    result.success = true;
+    return Promise.resolve(result);
+  }
+
+  private parseFolders(result: ImportResult, record: RecordsEntity) {
+    if (record.folders == null || record.folders.length === 0) {
+      return;
+    }
+
+    record.folders.forEach((item) => {
+      if (item.folder != null) {
+        this.processFolder(result, item.folder);
+        return;
+      }
+
+      if (item.shared_folder != null) {
+        this.processFolder(result, item.shared_folder);
+        return;
+      }
+    });
+  }
+}
diff --git a/jslib/common/src/importers/keeperImporters/types/keeperJsonTypes.ts b/jslib/common/src/importers/keeperImporters/types/keeperJsonTypes.ts
new file mode 100644
index 00000000..1f6d2ea4
--- /dev/null
+++ b/jslib/common/src/importers/keeperImporters/types/keeperJsonTypes.ts
@@ -0,0 +1,41 @@
+export interface KeeperJsonExport {
+  shared_folders?: SharedFoldersEntity[] | null;
+  records?: RecordsEntity[] | null;
+}
+
+export interface SharedFoldersEntity {
+  path: string;
+  manage_users: boolean;
+  manage_records: boolean;
+  can_edit: boolean;
+  can_share: boolean;
+  permissions?: PermissionsEntity[] | null;
+}
+
+export interface PermissionsEntity {
+  uid?: string | null;
+  manage_users: boolean;
+  manage_records: boolean;
+  name?: string | null;
+}
+
+export interface RecordsEntity {
+  title: string;
+  login: string;
+  password: string;
+  login_url: string;
+  notes?: string;
+  custom_fields?: CustomFields;
+  folders?: FoldersEntity[] | null;
+}
+
+export type CustomFields = {
+  [key: string]: string | null;
+};
+
+export interface FoldersEntity {
+  folder?: string | null;
+  shared_folder?: string | null;
+  can_edit?: boolean | null;
+  can_share?: boolean | null;
+}
diff --git a/jslib/common/src/importers/lastpassCsvImporter.ts b/jslib/common/src/importers/lastpassCsvImporter.ts
index 3f8b2a92..2b8f0a4b 100644
--- a/jslib/common/src/importers/lastpassCsvImporter.ts
+++ b/jslib/common/src/importers/lastpassCsvImporter.ts
@@ -1,276 +1,284 @@
-import { BaseImporter } from './baseImporter';
-import { Importer } from './importer';
+import { BaseImporter } from "./baseImporter";
+import { Importer } from "./importer";
 
-import { ImportResult } from '../models/domain/importResult';
+import { ImportResult } from "../models/domain/importResult";
 
-import { CardView } from '../models/view/cardView';
-import { CipherView } from '../models/view/cipherView';
-import { FolderView } from '../models/view/folderView';
-import { IdentityView } from '../models/view/identityView';
-import { LoginView } from '../models/view/loginView';
-import { SecureNoteView } from '../models/view/secureNoteView';
+import { CardView } from "../models/view/cardView";
+import { CipherView } from "../models/view/cipherView";
+import { FolderView } from "../models/view/folderView";
+import { IdentityView } from "../models/view/identityView";
+import { LoginView } from "../models/view/loginView";
+import { SecureNoteView } from "../models/view/secureNoteView";
 
-import { CipherType } from '../enums/cipherType';
-import { SecureNoteType } from '../enums/secureNoteType';
+import { CipherType } from "../enums/cipherType";
+import { SecureNoteType } from "../enums/secureNoteType";
 
 export class LastPassCsvImporter extends BaseImporter implements Importer {
-    parse(data: string): Promise<ImportResult> {
-        const result = new ImportResult();
-        const results = this.parseCsv(data, true);
-        if (results == null) {
-            result.success = false;
-            return Promise.resolve(result);
-        }
+  parse(data: string): Promise<ImportResult> {
+    const result = new ImportResult();
+    const results = this.parseCsv(data, true);
+    if (results == null) {
+      result.success = false;
+      return Promise.resolve(result);
+    }
 
-        results.forEach((value, index) => {
-            const cipherIndex = result.ciphers.length;
-            let folderIndex = result.folders.length;
-            let grouping = value.grouping;
-            if (grouping != null) {
-                grouping = grouping.replace(/\\/g, '/').replace(/[\x00-\x1F\x7F-\x9F]/g, '');
-            }
-            const hasFolder = this.getValueOrDefault(grouping, '(none)') !== '(none)';
-            let addFolder = hasFolder;
+    results.forEach((value, index) => {
+      const cipherIndex = result.ciphers.length;
+      let folderIndex = result.folders.length;
+      let grouping = value.grouping;
+      if (grouping != null) {
+        grouping = grouping.replace(/\\/g, "/").replace(/[\x00-\x1F\x7F-\x9F]/g, "");
+      }
+      const hasFolder = this.getValueOrDefault(grouping, "(none)") !== "(none)";
+      let addFolder = hasFolder;
 
-            if (hasFolder) {
-                for (let i = 0; i < result.folders.length; i++) {
-                    if (result.folders[i].name === grouping) {
-                        addFolder = false;
-                        folderIndex = i;
-                        break;
-                    }
-                }
-            }
+      if (hasFolder) {
+        for (let i = 0; i < result.folders.length; i++) {
+          if (result.folders[i].name === grouping) {
+            addFolder = false;
+            folderIndex = i;
+            break;
+          }
+        }
+      }
 
-            const cipher = this.buildBaseCipher(value);
-            if (cipher.type === CipherType.Login) {
-                cipher.notes = this.getValueOrDefault(value.extra);
-                cipher.login = new LoginView();
-                cipher.login.uris = this.makeUriArray(value.url);
-                cipher.login.username = this.getValueOrDefault(value.username);
-                cipher.login.password = this.getValueOrDefault(value.password);
-                cipher.login.totp = this.getValueOrDefault(value.totp);
-            } else if (cipher.type === CipherType.SecureNote) {
-                this.parseSecureNote(value, cipher);
-            } else if (cipher.type === CipherType.Card) {
-                cipher.card = this.parseCard(value);
-                cipher.notes = this.getValueOrDefault(value.notes);
-            } else if (cipher.type === CipherType.Identity) {
-                cipher.identity = this.parseIdentity(value);
-                cipher.notes = this.getValueOrDefault(value.notes);
-                if (!this.isNullOrWhitespace(value.ccnum)) {
-                    // there is a card on this identity too
-                    const cardCipher = this.buildBaseCipher(value);
-                    cardCipher.identity = null;
-                    cardCipher.type = CipherType.Card;
-                    cardCipher.card = this.parseCard(value);
-                    result.ciphers.push(cardCipher);
-                }
-            }
+      const cipher = this.buildBaseCipher(value);
+      if (cipher.type === CipherType.Login) {
+        cipher.notes = this.getValueOrDefault(value.extra);
+        cipher.login = new LoginView();
+        cipher.login.uris = this.makeUriArray(value.url);
+        cipher.login.username = this.getValueOrDefault(value.username);
+        cipher.login.password = this.getValueOrDefault(value.password);
+        cipher.login.totp = this.getValueOrDefault(value.totp);
+      } else if (cipher.type === CipherType.SecureNote) {
+        this.parseSecureNote(value, cipher);
+      } else if (cipher.type === CipherType.Card) {
+        cipher.card = this.parseCard(value);
+        cipher.notes = this.getValueOrDefault(value.notes);
+      } else if (cipher.type === CipherType.Identity) {
+        cipher.identity = this.parseIdentity(value);
+        cipher.notes = this.getValueOrDefault(value.notes);
+        if (!this.isNullOrWhitespace(value.ccnum)) {
+          // there is a card on this identity too
+          const cardCipher = this.buildBaseCipher(value);
+          cardCipher.identity = null;
+          cardCipher.type = CipherType.Card;
+          cardCipher.card = this.parseCard(value);
+          result.ciphers.push(cardCipher);
+        }
+      }
 
-            result.ciphers.push(cipher);
+      result.ciphers.push(cipher);
 
-            if (addFolder) {
-                const f = new FolderView();
-                f.name = grouping;
-                result.folders.push(f);
-            }
-            if (hasFolder) {
-                result.folderRelationships.push([cipherIndex, folderIndex]);
-            }
-        });
+      if (addFolder) {
+        const f = new FolderView();
+        f.name = grouping;
+        result.folders.push(f);
+      }
+      if (hasFolder) {
+        result.folderRelationships.push([cipherIndex, folderIndex]);
+      }
+    });
 
-        if (this.organization) {
-            this.moveFoldersToCollections(result);
-        }
-
-        result.success = true;
-        return Promise.resolve(result);
+    if (this.organization) {
+      this.moveFoldersToCollections(result);
     }
 
-    private buildBaseCipher(value: any) {
-        const cipher = new CipherView();
-        if (value.hasOwnProperty('profilename') && value.hasOwnProperty('profilelanguage')) {
-            // form fill
-            cipher.favorite = false;
-            cipher.name = this.getValueOrDefault(value.profilename, '--');
-            cipher.type = CipherType.Card;
+    result.success = true;
+    return Promise.resolve(result);
+  }
 
-            if (!this.isNullOrWhitespace(value.title) || !this.isNullOrWhitespace(value.firstname) ||
-                !this.isNullOrWhitespace(value.lastname) || !this.isNullOrWhitespace(value.address1) ||
-                !this.isNullOrWhitespace(value.phone) || !this.isNullOrWhitespace(value.username) ||
-                !this.isNullOrWhitespace(value.email)) {
-                cipher.type = CipherType.Identity;
-            }
-        } else {
-            // site or secure note
-            cipher.favorite = !this.organization && this.getValueOrDefault(value.fav, '0') === '1';
-            cipher.name = this.getValueOrDefault(value.name, '--');
-            cipher.type = value.url === 'http://sn' ? CipherType.SecureNote : CipherType.Login;
-        }
-        return cipher;
+  private buildBaseCipher(value: any) {
+    const cipher = new CipherView();
+    if (value.hasOwnProperty("profilename") && value.hasOwnProperty("profilelanguage")) {
+      // form fill
+      cipher.favorite = false;
+      cipher.name = this.getValueOrDefault(value.profilename, "--");
+      cipher.type = CipherType.Card;
+
+      if (
+        !this.isNullOrWhitespace(value.title) ||
+        !this.isNullOrWhitespace(value.firstname) ||
+        !this.isNullOrWhitespace(value.lastname) ||
+        !this.isNullOrWhitespace(value.address1) ||
+        !this.isNullOrWhitespace(value.phone) ||
+        !this.isNullOrWhitespace(value.username) ||
+        !this.isNullOrWhitespace(value.email)
+      ) {
+        cipher.type = CipherType.Identity;
+      }
+    } else {
+      // site or secure note
+      cipher.favorite = !this.organization && this.getValueOrDefault(value.fav, "0") === "1";
+      cipher.name = this.getValueOrDefault(value.name, "--");
+      cipher.type = value.url === "http://sn" ? CipherType.SecureNote : CipherType.Login;
     }
+    return cipher;
+  }
 
-    private parseCard(value: any): CardView {
-        const card = new CardView();
-        card.cardholderName = this.getValueOrDefault(value.ccname);
-        card.number = this.getValueOrDefault(value.ccnum);
-        card.code = this.getValueOrDefault(value.cccsc);
-        card.brand = this.getCardBrand(value.ccnum);
+  private parseCard(value: any): CardView {
+    const card = new CardView();
+    card.cardholderName = this.getValueOrDefault(value.ccname);
+    card.number = this.getValueOrDefault(value.ccnum);
+    card.code = this.getValueOrDefault(value.cccsc);
+    card.brand = this.getCardBrand(value.ccnum);
 
-        if (!this.isNullOrWhitespace(value.ccexp) && value.ccexp.indexOf('-') > -1) {
-            const ccexpParts = (value.ccexp as string).split('-');
-            if (ccexpParts.length > 1) {
-                card.expYear = ccexpParts[0];
-                card.expMonth = ccexpParts[1];
-                if (card.expMonth.length === 2 && card.expMonth[0] === '0') {
-                    card.expMonth = card.expMonth[1];
-                }
-            }
+    if (!this.isNullOrWhitespace(value.ccexp) && value.ccexp.indexOf("-") > -1) {
+      const ccexpParts = (value.ccexp as string).split("-");
+      if (ccexpParts.length > 1) {
+        card.expYear = ccexpParts[0];
+        card.expMonth = ccexpParts[1];
+        if (card.expMonth.length === 2 && card.expMonth[0] === "0") {
+          card.expMonth = card.expMonth[1];
         }
-
-        return card;
+      }
     }
 
-    private parseIdentity(value: any): IdentityView {
-        const identity = new IdentityView();
-        identity.title = this.getValueOrDefault(value.title);
-        identity.firstName = this.getValueOrDefault(value.firstname);
-        identity.middleName = this.getValueOrDefault(value.middlename);
-        identity.lastName = this.getValueOrDefault(value.lastname);
-        identity.username = this.getValueOrDefault(value.username);
-        identity.company = this.getValueOrDefault(value.company);
-        identity.ssn = this.getValueOrDefault(value.ssn);
-        identity.address1 = this.getValueOrDefault(value.address1);
-        identity.address2 = this.getValueOrDefault(value.address2);
-        identity.address3 = this.getValueOrDefault(value.address3);
-        identity.city = this.getValueOrDefault(value.city);
-        identity.state = this.getValueOrDefault(value.state);
-        identity.postalCode = this.getValueOrDefault(value.zip);
-        identity.country = this.getValueOrDefault(value.country);
-        identity.email = this.getValueOrDefault(value.email);
-        identity.phone = this.getValueOrDefault(value.phone);
+    return card;
+  }
 
-        if (!this.isNullOrWhitespace(identity.title)) {
-            identity.title = identity.title.charAt(0).toUpperCase() + identity.title.slice(1);
-        }
+  private parseIdentity(value: any): IdentityView {
+    const identity = new IdentityView();
+    identity.title = this.getValueOrDefault(value.title);
+    identity.firstName = this.getValueOrDefault(value.firstname);
+    identity.middleName = this.getValueOrDefault(value.middlename);
+    identity.lastName = this.getValueOrDefault(value.lastname);
+    identity.username = this.getValueOrDefault(value.username);
+    identity.company = this.getValueOrDefault(value.company);
+    identity.ssn = this.getValueOrDefault(value.ssn);
+    identity.address1 = this.getValueOrDefault(value.address1);
+    identity.address2 = this.getValueOrDefault(value.address2);
+    identity.address3 = this.getValueOrDefault(value.address3);
+    identity.city = this.getValueOrDefault(value.city);
+    identity.state = this.getValueOrDefault(value.state);
+    identity.postalCode = this.getValueOrDefault(value.zip);
+    identity.country = this.getValueOrDefault(value.country);
+    identity.email = this.getValueOrDefault(value.email);
+    identity.phone = this.getValueOrDefault(value.phone);
 
-        return identity;
+    if (!this.isNullOrWhitespace(identity.title)) {
+      identity.title = identity.title.charAt(0).toUpperCase() + identity.title.slice(1);
     }
 
-    private parseSecureNote(value: any, cipher: CipherView) {
-        const extraParts = this.splitNewLine(value.extra);
-        let processedNote = false;
+    return identity;
+  }
 
-        if (extraParts.length) {
-            const typeParts = extraParts[0].split(':');
-            if (typeParts.length > 1 && typeParts[0] === 'NoteType' &&
-                (typeParts[1] === 'Credit Card' || typeParts[1] === 'Address')) {
-                if (typeParts[1] === 'Credit Card') {
-                    const mappedData = this.parseSecureNoteMapping<CardView>(cipher, extraParts, {
-                        'Number': 'number',
-                        'Name on Card': 'cardholderName',
-                        'Security Code': 'code',
-                        // LP provides date in a format like 'June,2020'
-                        // Store in expMonth, then parse and modify
-                        'Expiration Date': 'expMonth',
-                    });
+  private parseSecureNote(value: any, cipher: CipherView) {
+    const extraParts = this.splitNewLine(value.extra);
+    let processedNote = false;
 
-                    if (this.isNullOrWhitespace(mappedData.expMonth) || mappedData.expMonth === ',') {
-                        // No expiration data
-                        mappedData.expMonth = undefined;
-                    } else {
-                        const [monthString, year] = mappedData.expMonth.split(',');
-                        // Parse month name into number
-                        if (!this.isNullOrWhitespace(monthString)) {
-                            const month = new Date(Date.parse(monthString.trim() + ' 1, 2012')).getMonth() + 1;
-                            if (isNaN(month)) {
-                                mappedData.expMonth = undefined;
-                            } else {
-                                mappedData.expMonth = month.toString();
-                            }
-                        } else {
-                            mappedData.expMonth = undefined;
-                        }
-                        if (!this.isNullOrWhitespace(year)) {
-                            mappedData.expYear = year;
-                        }
-                    }
+    if (extraParts.length) {
+      const typeParts = extraParts[0].split(":");
+      if (
+        typeParts.length > 1 &&
+        typeParts[0] === "NoteType" &&
+        (typeParts[1] === "Credit Card" || typeParts[1] === "Address")
+      ) {
+        if (typeParts[1] === "Credit Card") {
+          const mappedData = this.parseSecureNoteMapping<CardView>(cipher, extraParts, {
+            Number: "number",
+            "Name on Card": "cardholderName",
+            "Security Code": "code",
+            // LP provides date in a format like 'June,2020'
+            // Store in expMonth, then parse and modify
+            "Expiration Date": "expMonth",
+          });
 
-                    cipher.type = CipherType.Card;
-                    cipher.card = mappedData;
-                } else if (typeParts[1] === 'Address') {
-                    const mappedData = this.parseSecureNoteMapping<IdentityView>(cipher, extraParts, {
-                        'Title': 'title',
-                        'First Name': 'firstName',
-                        'Last Name': 'lastName',
-                        'Middle Name': 'middleName',
-                        'Company': 'company',
-                        'Address 1': 'address1',
-                        'Address 2': 'address2',
-                        'Address 3': 'address3',
-                        'City / Town': 'city',
-                        'State': 'state',
-                        'Zip / Postal Code': 'postalCode',
-                        'Country': 'country',
-                        'Email Address': 'email',
-                        'Username': 'username',
-                    });
-                    cipher.type = CipherType.Identity;
-                    cipher.identity = mappedData;
-                }
-                processedNote = true;
+          if (this.isNullOrWhitespace(mappedData.expMonth) || mappedData.expMonth === ",") {
+            // No expiration data
+            mappedData.expMonth = undefined;
+          } else {
+            const [monthString, year] = mappedData.expMonth.split(",");
+            // Parse month name into number
+            if (!this.isNullOrWhitespace(monthString)) {
+              const month = new Date(Date.parse(monthString.trim() + " 1, 2012")).getMonth() + 1;
+              if (isNaN(month)) {
+                mappedData.expMonth = undefined;
+              } else {
+                mappedData.expMonth = month.toString();
+              }
+            } else {
+              mappedData.expMonth = undefined;
             }
-        }
+            if (!this.isNullOrWhitespace(year)) {
+              mappedData.expYear = year;
+            }
+          }
 
-        if (!processedNote) {
-            cipher.secureNote = new SecureNoteView();
-            cipher.secureNote.type = SecureNoteType.Generic;
-            cipher.notes = this.getValueOrDefault(value.extra);
+          cipher.type = CipherType.Card;
+          cipher.card = mappedData;
+        } else if (typeParts[1] === "Address") {
+          const mappedData = this.parseSecureNoteMapping<IdentityView>(cipher, extraParts, {
+            Title: "title",
+            "First Name": "firstName",
+            "Last Name": "lastName",
+            "Middle Name": "middleName",
+            Company: "company",
+            "Address 1": "address1",
+            "Address 2": "address2",
+            "Address 3": "address3",
+            "City / Town": "city",
+            State: "state",
+            "Zip / Postal Code": "postalCode",
+            Country: "country",
+            "Email Address": "email",
+            Username: "username",
+          });
+          cipher.type = CipherType.Identity;
+          cipher.identity = mappedData;
         }
+        processedNote = true;
+      }
     }
 
-    private parseSecureNoteMapping<T>(cipher: CipherView, extraParts: string[], map: any): T {
-        const dataObj: any = {};
+    if (!processedNote) {
+      cipher.secureNote = new SecureNoteView();
+      cipher.secureNote.type = SecureNoteType.Generic;
+      cipher.notes = this.getValueOrDefault(value.extra);
+    }
+  }
 
-        let processingNotes = false;
-        extraParts.forEach(extraPart => {
-            let key: string = null;
-            let val: string = null;
-            if (!processingNotes) {
-                if (this.isNullOrWhitespace(extraPart)) {
-                    return;
-                }
-                const colonIndex = extraPart.indexOf(':');
-                if (colonIndex === -1) {
-                    key = extraPart;
-                } else {
-                    key = extraPart.substring(0, colonIndex);
-                    if (extraPart.length > colonIndex) {
-                        val = extraPart.substring(colonIndex + 1);
-                    }
-                }
-                if (this.isNullOrWhitespace(key) || this.isNullOrWhitespace(val) || key === 'NoteType') {
-                    return;
-                }
-            }
+  private parseSecureNoteMapping<T>(cipher: CipherView, extraParts: string[], map: any): T {
+    const dataObj: any = {};
 
-            if (processingNotes) {
-                cipher.notes += ('\n' + extraPart);
-            } else if (key === 'Notes') {
-                if (!this.isNullOrWhitespace(cipher.notes)) {
-                    cipher.notes += ('\n' + val);
-                } else {
-                    cipher.notes = val;
-                }
-                processingNotes = true;
-            } else if (map.hasOwnProperty(key)) {
-                dataObj[map[key]] = val;
-            } else {
-                this.processKvp(cipher, key, val);
-            }
-        });
+    let processingNotes = false;
+    extraParts.forEach((extraPart) => {
+      let key: string = null;
+      let val: string = null;
+      if (!processingNotes) {
+        if (this.isNullOrWhitespace(extraPart)) {
+          return;
+        }
+        const colonIndex = extraPart.indexOf(":");
+        if (colonIndex === -1) {
+          key = extraPart;
+        } else {
+          key = extraPart.substring(0, colonIndex);
+          if (extraPart.length > colonIndex) {
+            val = extraPart.substring(colonIndex + 1);
+          }
+        }
+        if (this.isNullOrWhitespace(key) || this.isNullOrWhitespace(val) || key === "NoteType") {
+          return;
+        }
+      }
 
-        return dataObj;
-    }
+      if (processingNotes) {
+        cipher.notes += "\n" + extraPart;
+      } else if (key === "Notes") {
+        if (!this.isNullOrWhitespace(cipher.notes)) {
+          cipher.notes += "\n" + val;
+        } else {
+          cipher.notes = val;
+        }
+        processingNotes = true;
+      } else if (map.hasOwnProperty(key)) {
+        dataObj[map[key]] = val;
+      } else {
+        this.processKvp(cipher, key, val);
+      }
+    });
+
+    return dataObj;
+  }
 }
diff --git a/jslib/common/src/importers/logMeOnceCsvImporter.ts b/jslib/common/src/importers/logMeOnceCsvImporter.ts
index f6e3c5db..611058a4 100644
--- a/jslib/common/src/importers/logMeOnceCsvImporter.ts
+++ b/jslib/common/src/importers/logMeOnceCsvImporter.ts
@@ -1,31 +1,31 @@
-import { BaseImporter } from './baseImporter';
-import { Importer } from './importer';
+import { BaseImporter } from "./baseImporter";
+import { Importer } from "./importer";
 
-import { ImportResult } from '../models/domain/importResult';
+import { ImportResult } from "../models/domain/importResult";
 
 export class LogMeOnceCsvImporter extends BaseImporter implements Importer {
-    parse(data: string): Promise<ImportResult> {
-        const result = new ImportResult();
-        const results = this.parseCsv(data, false);
-        if (results == null) {
-            result.success = false;
-            return Promise.resolve(result);
-        }
+  parse(data: string): Promise<ImportResult> {
+    const result = new ImportResult();
+    const results = this.parseCsv(data, false);
+    if (results == null) {
+      result.success = false;
+      return Promise.resolve(result);
+    }
 
-        results.forEach(value => {
-            if (value.length < 4) {
-                return;
-            }
-            const cipher = this.initLoginCipher();
-            cipher.name = this.getValueOrDefault(value[0], '--');
-            cipher.login.username = this.getValueOrDefault(value[2]);
-            cipher.login.password = this.getValueOrDefault(value[3]);
-            cipher.login.uris = this.makeUriArray(value[1]);
-            this.cleanupCipher(cipher);
-            result.ciphers.push(cipher);
-        });
+    results.forEach((value) => {
+      if (value.length < 4) {
+        return;
+      }
+      const cipher = this.initLoginCipher();
+      cipher.name = this.getValueOrDefault(value[0], "--");
+      cipher.login.username = this.getValueOrDefault(value[2]);
+      cipher.login.password = this.getValueOrDefault(value[3]);
+      cipher.login.uris = this.makeUriArray(value[1]);
+      this.cleanupCipher(cipher);
+      result.ciphers.push(cipher);
+    });
 
-        result.success = true;
-        return Promise.resolve(result);
-    }
+    result.success = true;
+    return Promise.resolve(result);
+  }
 }
diff --git a/jslib/common/src/importers/meldiumCsvImporter.ts b/jslib/common/src/importers/meldiumCsvImporter.ts
index 0b7ed11d..89d2e0bd 100644
--- a/jslib/common/src/importers/meldiumCsvImporter.ts
+++ b/jslib/common/src/importers/meldiumCsvImporter.ts
@@ -1,29 +1,29 @@
-import { BaseImporter } from './baseImporter';
-import { Importer } from './importer';
+import { BaseImporter } from "./baseImporter";
+import { Importer } from "./importer";
 
-import { ImportResult } from '../models/domain/importResult';
+import { ImportResult } from "../models/domain/importResult";
 
 export class MeldiumCsvImporter extends BaseImporter implements Importer {
-    parse(data: string): Promise<ImportResult> {
-        const result = new ImportResult();
-        const results = this.parseCsv(data, true);
-        if (results == null) {
-            result.success = false;
-            return Promise.resolve(result);
-        }
+  parse(data: string): Promise<ImportResult> {
+    const result = new ImportResult();
+    const results = this.parseCsv(data, true);
+    if (results == null) {
+      result.success = false;
+      return Promise.resolve(result);
+    }
 
-        results.forEach(value => {
-            const cipher = this.initLoginCipher();
-            cipher.name = this.getValueOrDefault(value.DisplayName, '--');
-            cipher.notes = this.getValueOrDefault(value.Notes);
-            cipher.login.username = this.getValueOrDefault(value.UserName);
-            cipher.login.password = this.getValueOrDefault(value.Password);
-            cipher.login.uris = this.makeUriArray(value.Url);
-            this.cleanupCipher(cipher);
-            result.ciphers.push(cipher);
-        });
+    results.forEach((value) => {
+      const cipher = this.initLoginCipher();
+      cipher.name = this.getValueOrDefault(value.DisplayName, "--");
+      cipher.notes = this.getValueOrDefault(value.Notes);
+      cipher.login.username = this.getValueOrDefault(value.UserName);
+      cipher.login.password = this.getValueOrDefault(value.Password);
+      cipher.login.uris = this.makeUriArray(value.Url);
+      this.cleanupCipher(cipher);
+      result.ciphers.push(cipher);
+    });
 
-        result.success = true;
-        return Promise.resolve(result);
-    }
+    result.success = true;
+    return Promise.resolve(result);
+  }
 }
diff --git a/jslib/common/src/importers/msecureCsvImporter.ts b/jslib/common/src/importers/msecureCsvImporter.ts
index 248b5380..4ae3ca90 100644
--- a/jslib/common/src/importers/msecureCsvImporter.ts
+++ b/jslib/common/src/importers/msecureCsvImporter.ts
@@ -1,62 +1,63 @@
-import { BaseImporter } from './baseImporter';
-import { Importer } from './importer';
+import { BaseImporter } from "./baseImporter";
+import { Importer } from "./importer";
 
-import { ImportResult } from '../models/domain/importResult';
+import { ImportResult } from "../models/domain/importResult";
 
-import { CipherType } from '../enums/cipherType';
-import { SecureNoteType } from '../enums/secureNoteType';
+import { CipherType } from "../enums/cipherType";
+import { SecureNoteType } from "../enums/secureNoteType";
 
-import { SecureNoteView } from '../models/view/secureNoteView';
+import { SecureNoteView } from "../models/view/secureNoteView";
 
 export class MSecureCsvImporter extends BaseImporter implements Importer {
-    parse(data: string): Promise<ImportResult> {
-        const result = new ImportResult();
-        const results = this.parseCsv(data, false);
-        if (results == null) {
-            result.success = false;
-            return Promise.resolve(result);
-        }
+  parse(data: string): Promise<ImportResult> {
+    const result = new ImportResult();
+    const results = this.parseCsv(data, false);
+    if (results == null) {
+      result.success = false;
+      return Promise.resolve(result);
+    }
 
-        results.forEach(value => {
-            if (value.length < 3) {
-                return;
-            }
-
-            const folderName = this.getValueOrDefault(value[0], 'Unassigned') !== 'Unassigned' ? value[0] : null;
-            this.processFolder(result, folderName);
-
-            const cipher = this.initLoginCipher();
-            cipher.name = this.getValueOrDefault(value[2], '--');
-
-            if (value[1] === 'Web Logins' || value[1] === 'Login') {
-                cipher.login.uris = this.makeUriArray(value[4]);
-                cipher.login.username = this.getValueOrDefault(value[5]);
-                cipher.login.password = this.getValueOrDefault(value[6]);
-                cipher.notes = !this.isNullOrWhitespace(value[3]) ? value[3].split('\\n').join('\n') : null;
-            } else if (value.length > 3) {
-                cipher.type = CipherType.SecureNote;
-                cipher.secureNote = new SecureNoteView();
-                cipher.secureNote.type = SecureNoteType.Generic;
-                for (let i = 3; i < value.length; i++) {
-                    if (!this.isNullOrWhitespace(value[i])) {
-                        cipher.notes += (value[i] + '\n');
-                    }
-                }
-            }
-
-            if (!this.isNullOrWhitespace(value[1]) && cipher.type !== CipherType.Login) {
-                cipher.name = value[1] + ': ' + cipher.name;
-            }
-
-            this.cleanupCipher(cipher);
-            result.ciphers.push(cipher);
-        });
-
-        if (this.organization) {
-            this.moveFoldersToCollections(result);
+    results.forEach((value) => {
+      if (value.length < 3) {
+        return;
+      }
+
+      const folderName =
+        this.getValueOrDefault(value[0], "Unassigned") !== "Unassigned" ? value[0] : null;
+      this.processFolder(result, folderName);
+
+      const cipher = this.initLoginCipher();
+      cipher.name = this.getValueOrDefault(value[2], "--");
+
+      if (value[1] === "Web Logins" || value[1] === "Login") {
+        cipher.login.uris = this.makeUriArray(value[4]);
+        cipher.login.username = this.getValueOrDefault(value[5]);
+        cipher.login.password = this.getValueOrDefault(value[6]);
+        cipher.notes = !this.isNullOrWhitespace(value[3]) ? value[3].split("\\n").join("\n") : null;
+      } else if (value.length > 3) {
+        cipher.type = CipherType.SecureNote;
+        cipher.secureNote = new SecureNoteView();
+        cipher.secureNote.type = SecureNoteType.Generic;
+        for (let i = 3; i < value.length; i++) {
+          if (!this.isNullOrWhitespace(value[i])) {
+            cipher.notes += value[i] + "\n";
+          }
         }
+      }
+
+      if (!this.isNullOrWhitespace(value[1]) && cipher.type !== CipherType.Login) {
+        cipher.name = value[1] + ": " + cipher.name;
+      }
 
-        result.success = true;
-        return Promise.resolve(result);
+      this.cleanupCipher(cipher);
+      result.ciphers.push(cipher);
+    });
+
+    if (this.organization) {
+      this.moveFoldersToCollections(result);
     }
+
+    result.success = true;
+    return Promise.resolve(result);
+  }
 }
diff --git a/jslib/common/src/importers/mykiCsvImporter.ts b/jslib/common/src/importers/mykiCsvImporter.ts
index e206ae1a..da440ad6 100644
--- a/jslib/common/src/importers/mykiCsvImporter.ts
+++ b/jslib/common/src/importers/mykiCsvImporter.ts
@@ -1,76 +1,76 @@
-import { BaseImporter } from './baseImporter';
-import { Importer } from './importer';
+import { BaseImporter } from "./baseImporter";
+import { Importer } from "./importer";
 
-import { CipherType } from '../enums/cipherType';
-import { SecureNoteType } from '../enums/secureNoteType';
+import { CipherType } from "../enums/cipherType";
+import { SecureNoteType } from "../enums/secureNoteType";
 
-import { CardView } from '../models/view/cardView';
-import { IdentityView } from '../models/view/identityView';
-import { SecureNoteView } from '../models/view/secureNoteView';
+import { CardView } from "../models/view/cardView";
+import { IdentityView } from "../models/view/identityView";
+import { SecureNoteView } from "../models/view/secureNoteView";
 
-import { ImportResult } from '../models/domain/importResult';
+import { ImportResult } from "../models/domain/importResult";
 
 export class MykiCsvImporter extends BaseImporter implements Importer {
-    parse(data: string): Promise<ImportResult> {
-        const result = new ImportResult();
-        const results = this.parseCsv(data, true);
-        if (results == null) {
-            result.success = false;
-            return Promise.resolve(result);
-        }
+  parse(data: string): Promise<ImportResult> {
+    const result = new ImportResult();
+    const results = this.parseCsv(data, true);
+    if (results == null) {
+      result.success = false;
+      return Promise.resolve(result);
+    }
 
-        results.forEach(value => {
-            const cipher = this.initLoginCipher();
-            cipher.name = this.getValueOrDefault(value.nickname, '--');
-            cipher.notes = this.getValueOrDefault(value.additionalInfo);
+    results.forEach((value) => {
+      const cipher = this.initLoginCipher();
+      cipher.name = this.getValueOrDefault(value.nickname, "--");
+      cipher.notes = this.getValueOrDefault(value.additionalInfo);
 
-            if (value.url !== undefined) {
-                // Accounts
-                cipher.login.uris = this.makeUriArray(value.url);
-                cipher.login.username = this.getValueOrDefault(value.username);
-                cipher.login.password = this.getValueOrDefault(value.password);
-                cipher.login.totp = this.getValueOrDefault(value.twoFactAuthToken);
-            } else if (value.cardNumber !== undefined) {
-                // Cards
-                cipher.card = new CardView();
-                cipher.type = CipherType.Card;
-                cipher.card.cardholderName = this.getValueOrDefault(value.cardName);
-                cipher.card.number = this.getValueOrDefault(value.cardNumber);
-                cipher.card.brand = this.getCardBrand(cipher.card.number);
-                cipher.card.expMonth = this.getValueOrDefault(value.exp_month);
-                cipher.card.expYear = this.getValueOrDefault(value.exp_year);
-                cipher.card.code = this.getValueOrDefault(value.cvv);
-            } else if (value.firstName !== undefined) {
-                // Identities
-                cipher.identity = new IdentityView();
-                cipher.type = CipherType.Identity;
-                cipher.identity.title = this.getValueOrDefault(value.title);
-                cipher.identity.firstName = this.getValueOrDefault(value.firstName);
-                cipher.identity.middleName = this.getValueOrDefault(value.middleName);
-                cipher.identity.lastName = this.getValueOrDefault(value.lastName);
-                cipher.identity.phone = this.getValueOrDefault(value.number);
-                cipher.identity.email = this.getValueOrDefault(value.email);
-                cipher.identity.address1 = this.getValueOrDefault(value.firstAddressLine);
-                cipher.identity.address2 = this.getValueOrDefault(value.secondAddressLine);
-                cipher.identity.city = this.getValueOrDefault(value.city);
-                cipher.identity.country = this.getValueOrDefault(value.country);
-                cipher.identity.postalCode = this.getValueOrDefault(value.zipCode);
-            } else if (value.content !== undefined) {
-                // Notes
-                cipher.secureNote = new SecureNoteView();
-                cipher.type = CipherType.SecureNote;
-                cipher.secureNote.type = SecureNoteType.Generic;
-                cipher.name = this.getValueOrDefault(value.title, '--');
-                cipher.notes = this.getValueOrDefault(value.content);
-            } else {
-                return;
-            }
+      if (value.url !== undefined) {
+        // Accounts
+        cipher.login.uris = this.makeUriArray(value.url);
+        cipher.login.username = this.getValueOrDefault(value.username);
+        cipher.login.password = this.getValueOrDefault(value.password);
+        cipher.login.totp = this.getValueOrDefault(value.twoFactAuthToken);
+      } else if (value.cardNumber !== undefined) {
+        // Cards
+        cipher.card = new CardView();
+        cipher.type = CipherType.Card;
+        cipher.card.cardholderName = this.getValueOrDefault(value.cardName);
+        cipher.card.number = this.getValueOrDefault(value.cardNumber);
+        cipher.card.brand = this.getCardBrand(cipher.card.number);
+        cipher.card.expMonth = this.getValueOrDefault(value.exp_month);
+        cipher.card.expYear = this.getValueOrDefault(value.exp_year);
+        cipher.card.code = this.getValueOrDefault(value.cvv);
+      } else if (value.firstName !== undefined) {
+        // Identities
+        cipher.identity = new IdentityView();
+        cipher.type = CipherType.Identity;
+        cipher.identity.title = this.getValueOrDefault(value.title);
+        cipher.identity.firstName = this.getValueOrDefault(value.firstName);
+        cipher.identity.middleName = this.getValueOrDefault(value.middleName);
+        cipher.identity.lastName = this.getValueOrDefault(value.lastName);
+        cipher.identity.phone = this.getValueOrDefault(value.number);
+        cipher.identity.email = this.getValueOrDefault(value.email);
+        cipher.identity.address1 = this.getValueOrDefault(value.firstAddressLine);
+        cipher.identity.address2 = this.getValueOrDefault(value.secondAddressLine);
+        cipher.identity.city = this.getValueOrDefault(value.city);
+        cipher.identity.country = this.getValueOrDefault(value.country);
+        cipher.identity.postalCode = this.getValueOrDefault(value.zipCode);
+      } else if (value.content !== undefined) {
+        // Notes
+        cipher.secureNote = new SecureNoteView();
+        cipher.type = CipherType.SecureNote;
+        cipher.secureNote.type = SecureNoteType.Generic;
+        cipher.name = this.getValueOrDefault(value.title, "--");
+        cipher.notes = this.getValueOrDefault(value.content);
+      } else {
+        return;
+      }
 
-            this.cleanupCipher(cipher);
-            result.ciphers.push(cipher);
-        });
+      this.cleanupCipher(cipher);
+      result.ciphers.push(cipher);
+    });
 
-        result.success = true;
-        return Promise.resolve(result);
-    }
+    result.success = true;
+    return Promise.resolve(result);
+  }
 }
diff --git a/jslib/common/src/importers/nordpassCsvImporter.ts b/jslib/common/src/importers/nordpassCsvImporter.ts
index 39ef4475..45e97edf 100644
--- a/jslib/common/src/importers/nordpassCsvImporter.ts
+++ b/jslib/common/src/importers/nordpassCsvImporter.ts
@@ -1,149 +1,146 @@
-import { BaseImporter } from './baseImporter';
-import { Importer } from './importer';
+import { BaseImporter } from "./baseImporter";
+import { Importer } from "./importer";
 
-import { ImportResult } from '../models/domain/importResult';
+import { ImportResult } from "../models/domain/importResult";
 
-import { CipherView } from '../models/view/cipherView';
-import { LoginView } from '../models/view/loginView';
+import { CipherView } from "../models/view/cipherView";
+import { LoginView } from "../models/view/loginView";
 
-import { CipherType } from '../enums/cipherType';
-import { SecureNoteType } from '../enums/secureNoteType';
+import { CipherType } from "../enums/cipherType";
+import { SecureNoteType } from "../enums/secureNoteType";
 
 type nodePassCsvParsed = {
-    name: string;
-    url: string;
-    username: string;
-    password: string;
-    note: string;
-    cardholdername: string;
-    cardnumber: string;
-    cvc: string;
-    expirydate: string;
-    zipcode: string;
-    folder: string;
-    full_name: string;
-    phone_number: string;
-    email: string;
-    address1: string;
-    address2: string;
-    city: string;
-    country: string;
-    state: string;
+  name: string;
+  url: string;
+  username: string;
+  password: string;
+  note: string;
+  cardholdername: string;
+  cardnumber: string;
+  cvc: string;
+  expirydate: string;
+  zipcode: string;
+  folder: string;
+  full_name: string;
+  phone_number: string;
+  email: string;
+  address1: string;
+  address2: string;
+  city: string;
+  country: string;
+  state: string;
 };
 
 export class NordPassCsvImporter extends BaseImporter implements Importer {
-    parse(data: string): Promise<ImportResult> {
-        const result = new ImportResult();
-        const results: nodePassCsvParsed[] = this.parseCsv(data, true);
-        if (results == null) {
-            result.success = false;
-            return Promise.resolve(result);
-        }
-
-        results.forEach(record => {
-
-            const recordType = this.evaluateType(record);
-            if (recordType === undefined) {
-                return;
-            }
-
-            if (!this.organization) {
-                this.processFolder(result, record.folder);
-            }
-
-            const cipher = new CipherView();
-            cipher.name = this.getValueOrDefault(record.name, '--');
-            cipher.notes = this.getValueOrDefault(record.note);
-
-            switch (recordType) {
-                case CipherType.Login:
-                    cipher.type = CipherType.Login;
-                    cipher.login = new LoginView();
-                    cipher.login.username = this.getValueOrDefault(record.username);
-                    cipher.login.password = this.getValueOrDefault(record.password);
-                    cipher.login.uris = this.makeUriArray(record.url);
-                    break;
-                case CipherType.Card:
-                    cipher.type = CipherType.Card;
-                    cipher.card.cardholderName = this.getValueOrDefault(record.cardholdername);
-                    cipher.card.number = this.getValueOrDefault(record.cardnumber);
-                    cipher.card.code = this.getValueOrDefault(record.cvc);
-                    cipher.card.brand = this.getCardBrand(cipher.card.number);
-                    this.setCardExpiration(cipher, record.expirydate);
-                    break;
-
-                case CipherType.Identity:
-                    cipher.type = CipherType.Identity;
-
-                    this.processName(cipher, this.getValueOrDefault(record.full_name));
-                    cipher.identity.address1 = this.getValueOrDefault(record.address1);
-                    cipher.identity.address2 = this.getValueOrDefault(record.address2);
-                    cipher.identity.city = this.getValueOrDefault(record.city);
-                    cipher.identity.state = this.getValueOrDefault(record.state);
-                    cipher.identity.postalCode = this.getValueOrDefault(record.zipcode);
-                    cipher.identity.country = this.getValueOrDefault(record.country);
-                    if (cipher.identity.country != null) {
-                        cipher.identity.country = cipher.identity.country.toUpperCase();
-                    }
-                    cipher.identity.email = this.getValueOrDefault(record.email);
-                    cipher.identity.phone = this.getValueOrDefault(record.phone_number);
-                    break;
-                case CipherType.SecureNote:
-                    cipher.type = CipherType.SecureNote;
-                    cipher.secureNote.type = SecureNoteType.Generic;
-                    break;
-                default:
-                    break;
-            }
-
-            this.cleanupCipher(cipher);
-            result.ciphers.push(cipher);
-        });
-
-        if (this.organization) {
-            this.moveFoldersToCollections(result);
-        }
-
-        result.success = true;
-        return Promise.resolve(result);
+  parse(data: string): Promise<ImportResult> {
+    const result = new ImportResult();
+    const results: nodePassCsvParsed[] = this.parseCsv(data, true);
+    if (results == null) {
+      result.success = false;
+      return Promise.resolve(result);
     }
 
-    private evaluateType(record: nodePassCsvParsed): CipherType {
+    results.forEach((record) => {
+      const recordType = this.evaluateType(record);
+      if (recordType === undefined) {
+        return;
+      }
+
+      if (!this.organization) {
+        this.processFolder(result, record.folder);
+      }
+
+      const cipher = new CipherView();
+      cipher.name = this.getValueOrDefault(record.name, "--");
+      cipher.notes = this.getValueOrDefault(record.note);
+
+      switch (recordType) {
+        case CipherType.Login:
+          cipher.type = CipherType.Login;
+          cipher.login = new LoginView();
+          cipher.login.username = this.getValueOrDefault(record.username);
+          cipher.login.password = this.getValueOrDefault(record.password);
+          cipher.login.uris = this.makeUriArray(record.url);
+          break;
+        case CipherType.Card:
+          cipher.type = CipherType.Card;
+          cipher.card.cardholderName = this.getValueOrDefault(record.cardholdername);
+          cipher.card.number = this.getValueOrDefault(record.cardnumber);
+          cipher.card.code = this.getValueOrDefault(record.cvc);
+          cipher.card.brand = this.getCardBrand(cipher.card.number);
+          this.setCardExpiration(cipher, record.expirydate);
+          break;
+
+        case CipherType.Identity:
+          cipher.type = CipherType.Identity;
+
+          this.processName(cipher, this.getValueOrDefault(record.full_name));
+          cipher.identity.address1 = this.getValueOrDefault(record.address1);
+          cipher.identity.address2 = this.getValueOrDefault(record.address2);
+          cipher.identity.city = this.getValueOrDefault(record.city);
+          cipher.identity.state = this.getValueOrDefault(record.state);
+          cipher.identity.postalCode = this.getValueOrDefault(record.zipcode);
+          cipher.identity.country = this.getValueOrDefault(record.country);
+          if (cipher.identity.country != null) {
+            cipher.identity.country = cipher.identity.country.toUpperCase();
+          }
+          cipher.identity.email = this.getValueOrDefault(record.email);
+          cipher.identity.phone = this.getValueOrDefault(record.phone_number);
+          break;
+        case CipherType.SecureNote:
+          cipher.type = CipherType.SecureNote;
+          cipher.secureNote.type = SecureNoteType.Generic;
+          break;
+        default:
+          break;
+      }
+
+      this.cleanupCipher(cipher);
+      result.ciphers.push(cipher);
+    });
+
+    if (this.organization) {
+      this.moveFoldersToCollections(result);
+    }
+
+    result.success = true;
+    return Promise.resolve(result);
+  }
+
+  private evaluateType(record: nodePassCsvParsed): CipherType {
+    if (!this.isNullOrWhitespace(record.username)) {
+      return CipherType.Login;
+    }
 
-        if (!this.isNullOrWhitespace(record.username)) {
-            return CipherType.Login;
-        }
+    if (!this.isNullOrWhitespace(record.cardnumber)) {
+      return CipherType.Card;
+    }
 
-        if (!this.isNullOrWhitespace(record.cardnumber)) {
-            return CipherType.Card;
-        }
+    if (!this.isNullOrWhitespace(record.full_name)) {
+      return CipherType.Identity;
+    }
 
-        if (!this.isNullOrWhitespace(record.full_name)) {
-            return CipherType.Identity;
-        }
+    if (!this.isNullOrWhitespace(record.note)) {
+      return CipherType.SecureNote;
+    }
 
-        if (!this.isNullOrWhitespace(record.note)) {
-            return CipherType.SecureNote;
-        }
+    return undefined;
+  }
 
-        return undefined;
+  private processName(cipher: CipherView, fullName: string) {
+    if (this.isNullOrWhitespace(fullName)) {
+      return;
     }
 
-    private processName(cipher: CipherView, fullName: string) {
-
-        if (this.isNullOrWhitespace(fullName)) {
-            return;
-        }
-
-        const nameParts = fullName.split(' ');
-        if (nameParts.length > 0) {
-            cipher.identity.firstName = this.getValueOrDefault(nameParts[0]);
-        }
-        if (nameParts.length === 2) {
-            cipher.identity.lastName = this.getValueOrDefault(nameParts[1]);
-        } else if (nameParts.length >= 3) {
-            cipher.identity.middleName = this.getValueOrDefault(nameParts[1]);
-            cipher.identity.lastName = nameParts.slice(2, nameParts.length).join(' ');
-        }
+    const nameParts = fullName.split(" ");
+    if (nameParts.length > 0) {
+      cipher.identity.firstName = this.getValueOrDefault(nameParts[0]);
+    }
+    if (nameParts.length === 2) {
+      cipher.identity.lastName = this.getValueOrDefault(nameParts[1]);
+    } else if (nameParts.length >= 3) {
+      cipher.identity.middleName = this.getValueOrDefault(nameParts[1]);
+      cipher.identity.lastName = nameParts.slice(2, nameParts.length).join(" ");
     }
+  }
 }
diff --git a/jslib/common/src/importers/onepasswordImporters/cipherImportContext.ts b/jslib/common/src/importers/onepasswordImporters/cipherImportContext.ts
index 66d82231..560f5c01 100644
--- a/jslib/common/src/importers/onepasswordImporters/cipherImportContext.ts
+++ b/jslib/common/src/importers/onepasswordImporters/cipherImportContext.ts
@@ -1,8 +1,8 @@
-import { CipherView } from '../../models/view/cipherView';
+import { CipherView } from "../../models/view/cipherView";
 
 export class CipherImportContext {
-    lowerProperty: string;
-    constructor(public importRecord: any, public property: string, public cipher: CipherView) {
-        this.lowerProperty = property.toLowerCase();
-    }
+  lowerProperty: string;
+  constructor(public importRecord: any, public property: string, public cipher: CipherView) {
+    this.lowerProperty = property.toLowerCase();
+  }
 }
diff --git a/jslib/common/src/importers/onepasswordImporters/onepassword1PifImporter.ts b/jslib/common/src/importers/onepasswordImporters/onepassword1PifImporter.ts
index e82f3185..fd202ba5 100644
--- a/jslib/common/src/importers/onepasswordImporters/onepassword1PifImporter.ts
+++ b/jslib/common/src/importers/onepasswordImporters/onepassword1PifImporter.ts
@@ -1,248 +1,279 @@
-import { BaseImporter } from '../baseImporter';
-import { Importer } from '../importer';
+import { BaseImporter } from "../baseImporter";
+import { Importer } from "../importer";
 
-import { ImportResult } from '../../models/domain/importResult';
+import { ImportResult } from "../../models/domain/importResult";
 
-import { CardView } from '../../models/view/cardView';
-import { CipherView } from '../../models/view/cipherView';
-import { IdentityView } from '../../models/view/identityView';
-import { PasswordHistoryView } from '../../models/view/passwordHistoryView';
-import { SecureNoteView } from '../../models/view/secureNoteView';
+import { CardView } from "../../models/view/cardView";
+import { CipherView } from "../../models/view/cipherView";
+import { IdentityView } from "../../models/view/identityView";
+import { PasswordHistoryView } from "../../models/view/passwordHistoryView";
+import { SecureNoteView } from "../../models/view/secureNoteView";
 
-import { CipherType } from '../../enums/cipherType';
-import { FieldType } from '../../enums/fieldType';
-import { SecureNoteType } from '../../enums/secureNoteType';
+import { CipherType } from "../../enums/cipherType";
+import { FieldType } from "../../enums/fieldType";
+import { SecureNoteType } from "../../enums/secureNoteType";
 
 export class OnePassword1PifImporter extends BaseImporter implements Importer {
-    result = new ImportResult();
+  result = new ImportResult();
 
-    parse(data: string): Promise<ImportResult> {
-        data.split(this.newLineRegex).forEach(line => {
-            if (this.isNullOrWhitespace(line) || line[0] !== '{') {
-                return;
-            }
-            const item = JSON.parse(line);
-            if (item.trashed === true) {
-                return;
-            }
-            const cipher = this.initLoginCipher();
+  parse(data: string): Promise<ImportResult> {
+    data.split(this.newLineRegex).forEach((line) => {
+      if (this.isNullOrWhitespace(line) || line[0] !== "{") {
+        return;
+      }
+      const item = JSON.parse(line);
+      if (item.trashed === true) {
+        return;
+      }
+      const cipher = this.initLoginCipher();
 
-            if (this.isNullOrWhitespace(item.hmac)) {
-                this.processStandardItem(item, cipher);
-            } else {
-                this.processWinOpVaultItem(item, cipher);
-            }
+      if (this.isNullOrWhitespace(item.hmac)) {
+        this.processStandardItem(item, cipher);
+      } else {
+        this.processWinOpVaultItem(item, cipher);
+      }
+
+      this.convertToNoteIfNeeded(cipher);
+      this.cleanupCipher(cipher);
+      this.result.ciphers.push(cipher);
+    });
 
-            this.convertToNoteIfNeeded(cipher);
-            this.cleanupCipher(cipher);
-            this.result.ciphers.push(cipher);
+    this.result.success = true;
+    return Promise.resolve(this.result);
+  }
+
+  private processWinOpVaultItem(item: any, cipher: CipherView) {
+    if (item.overview != null) {
+      cipher.name = this.getValueOrDefault(item.overview.title);
+      if (item.overview.URLs != null) {
+        const urls: string[] = [];
+        item.overview.URLs.forEach((url: any) => {
+          if (!this.isNullOrWhitespace(url.u)) {
+            urls.push(url.u);
+          }
         });
+        cipher.login.uris = this.makeUriArray(urls);
+      }
+    }
 
-        this.result.success = true;
-        return Promise.resolve(this.result);
+    if (item.details != null) {
+      if (item.details.passwordHistory != null) {
+        this.parsePasswordHistory(item.details.passwordHistory, cipher);
+      }
+      if (
+        !this.isNullOrWhitespace(item.details.ccnum) ||
+        !this.isNullOrWhitespace(item.details.cvv)
+      ) {
+        cipher.type = CipherType.Card;
+        cipher.card = new CardView();
+      } else if (
+        !this.isNullOrWhitespace(item.details.firstname) ||
+        !this.isNullOrWhitespace(item.details.address1)
+      ) {
+        cipher.type = CipherType.Identity;
+        cipher.identity = new IdentityView();
+      }
+      if (cipher.type === CipherType.Login && !this.isNullOrWhitespace(item.details.password)) {
+        cipher.login.password = item.details.password;
+      }
+      if (!this.isNullOrWhitespace(item.details.notesPlain)) {
+        cipher.notes = item.details.notesPlain.split(this.newLineRegex).join("\n") + "\n";
+      }
+      if (item.details.fields != null) {
+        this.parseFields(item.details.fields, cipher, "designation", "value", "name");
+      }
+      if (item.details.sections != null) {
+        item.details.sections.forEach((section: any) => {
+          if (section.fields != null) {
+            this.parseFields(section.fields, cipher, "n", "v", "t");
+          }
+        });
+      }
     }
+  }
 
-    private processWinOpVaultItem(item: any, cipher: CipherView) {
-        if (item.overview != null) {
-            cipher.name = this.getValueOrDefault(item.overview.title);
-            if (item.overview.URLs != null) {
-                const urls: string[] = [];
-                item.overview.URLs.forEach((url: any) => {
-                    if (!this.isNullOrWhitespace(url.u)) {
-                        urls.push(url.u);
-                    }
-                });
-                cipher.login.uris = this.makeUriArray(urls);
-            }
-        }
+  private processStandardItem(item: any, cipher: CipherView) {
+    cipher.favorite = item.openContents && item.openContents.faveIndex ? true : false;
+    cipher.name = this.getValueOrDefault(item.title);
 
-        if (item.details != null) {
-            if (item.details.passwordHistory != null) {
-                this.parsePasswordHistory(item.details.passwordHistory, cipher);
-            }
-            if (!this.isNullOrWhitespace(item.details.ccnum) || !this.isNullOrWhitespace(item.details.cvv)) {
-                cipher.type = CipherType.Card;
-                cipher.card = new CardView();
-            } else if (!this.isNullOrWhitespace(item.details.firstname) ||
-                !this.isNullOrWhitespace(item.details.address1)) {
-                cipher.type = CipherType.Identity;
-                cipher.identity = new IdentityView();
-            }
-            if (cipher.type === CipherType.Login && !this.isNullOrWhitespace(item.details.password)) {
-                cipher.login.password = item.details.password;
-            }
-            if (!this.isNullOrWhitespace(item.details.notesPlain)) {
-                cipher.notes = item.details.notesPlain.split(this.newLineRegex).join('\n') + '\n';
-            }
-            if (item.details.fields != null) {
-                this.parseFields(item.details.fields, cipher, 'designation', 'value', 'name');
-            }
-            if (item.details.sections != null) {
-                item.details.sections.forEach((section: any) => {
-                    if (section.fields != null) {
-                        this.parseFields(section.fields, cipher, 'n', 'v', 't');
-                    }
-                });
-            }
-        }
+    if (item.typeName === "securenotes.SecureNote") {
+      cipher.type = CipherType.SecureNote;
+      cipher.secureNote = new SecureNoteView();
+      cipher.secureNote.type = SecureNoteType.Generic;
+    } else if (item.typeName === "wallet.financial.CreditCard") {
+      cipher.type = CipherType.Card;
+      cipher.card = new CardView();
+    } else if (item.typeName === "identities.Identity") {
+      cipher.type = CipherType.Identity;
+      cipher.identity = new IdentityView();
+    } else {
+      cipher.login.uris = this.makeUriArray(item.location);
     }
 
-    private processStandardItem(item: any, cipher: CipherView) {
-        cipher.favorite = item.openContents && item.openContents.faveIndex ? true : false;
-        cipher.name = this.getValueOrDefault(item.title);
-
-        if (item.typeName === 'securenotes.SecureNote') {
-            cipher.type = CipherType.SecureNote;
-            cipher.secureNote = new SecureNoteView();
-            cipher.secureNote.type = SecureNoteType.Generic;
-        } else if (item.typeName === 'wallet.financial.CreditCard') {
-            cipher.type = CipherType.Card;
-            cipher.card = new CardView();
-        } else if (item.typeName === 'identities.Identity') {
-            cipher.type = CipherType.Identity;
-            cipher.identity = new IdentityView();
-        } else {
-            cipher.login.uris = this.makeUriArray(item.location);
+    if (item.secureContents != null) {
+      if (item.secureContents.passwordHistory != null) {
+        this.parsePasswordHistory(item.secureContents.passwordHistory, cipher);
+      }
+      if (!this.isNullOrWhitespace(item.secureContents.notesPlain)) {
+        cipher.notes = item.secureContents.notesPlain.split(this.newLineRegex).join("\n") + "\n";
+      }
+      if (cipher.type === CipherType.Login) {
+        if (!this.isNullOrWhitespace(item.secureContents.password)) {
+          cipher.login.password = item.secureContents.password;
         }
-
-        if (item.secureContents != null) {
-            if (item.secureContents.passwordHistory != null) {
-                this.parsePasswordHistory(item.secureContents.passwordHistory, cipher);
-            }
-            if (!this.isNullOrWhitespace(item.secureContents.notesPlain)) {
-                cipher.notes = item.secureContents.notesPlain.split(this.newLineRegex).join('\n') + '\n';
-            }
-            if (cipher.type === CipherType.Login) {
-                if (!this.isNullOrWhitespace(item.secureContents.password)) {
-                    cipher.login.password = item.secureContents.password;
-                }
-                if (item.secureContents.URLs != null) {
-                    const urls: string[] = [];
-                    item.secureContents.URLs.forEach((u: any) => {
-                        if (!this.isNullOrWhitespace(u.url)) {
-                            urls.push(u.url);
-                        }
-                    });
-                    if (urls.length > 0) {
-                        cipher.login.uris = this.makeUriArray(urls);
-                    }
-                }
-            }
-            if (item.secureContents.fields != null) {
-                this.parseFields(item.secureContents.fields, cipher, 'designation', 'value', 'name');
-            }
-            if (item.secureContents.sections != null) {
-                item.secureContents.sections.forEach((section: any) => {
-                    if (section.fields != null) {
-                        this.parseFields(section.fields, cipher, 'n', 'v', 't');
-                    }
-                });
+        if (item.secureContents.URLs != null) {
+          const urls: string[] = [];
+          item.secureContents.URLs.forEach((u: any) => {
+            if (!this.isNullOrWhitespace(u.url)) {
+              urls.push(u.url);
             }
+          });
+          if (urls.length > 0) {
+            cipher.login.uris = this.makeUriArray(urls);
+          }
         }
+      }
+      if (item.secureContents.fields != null) {
+        this.parseFields(item.secureContents.fields, cipher, "designation", "value", "name");
+      }
+      if (item.secureContents.sections != null) {
+        item.secureContents.sections.forEach((section: any) => {
+          if (section.fields != null) {
+            this.parseFields(section.fields, cipher, "n", "v", "t");
+          }
+        });
+      }
     }
+  }
 
-    private parsePasswordHistory(items: any[], cipher: CipherView) {
-        const maxSize = items.length > 5 ? 5 : items.length;
-        cipher.passwordHistory = items
-            .filter((h: any) => !this.isNullOrWhitespace(h.value) && h.time != null)
-            .sort((a, b) => b.time - a.time)
-            .slice(0, maxSize)
-            .map((h: any) => {
-                const ph = new PasswordHistoryView();
-                ph.password = h.value;
-                ph.lastUsedDate = new Date(('' + h.time).length >= 13 ? h.time : h.time * 1000);
-                return ph;
-            });
-    }
+  private parsePasswordHistory(items: any[], cipher: CipherView) {
+    const maxSize = items.length > 5 ? 5 : items.length;
+    cipher.passwordHistory = items
+      .filter((h: any) => !this.isNullOrWhitespace(h.value) && h.time != null)
+      .sort((a, b) => b.time - a.time)
+      .slice(0, maxSize)
+      .map((h: any) => {
+        const ph = new PasswordHistoryView();
+        ph.password = h.value;
+        ph.lastUsedDate = new Date(("" + h.time).length >= 13 ? h.time : h.time * 1000);
+        return ph;
+      });
+  }
 
-    private parseFields(fields: any[], cipher: CipherView, designationKey: string, valueKey: string, nameKey: string) {
-        fields.forEach((field: any) => {
-            if (field[valueKey] == null || field[valueKey].toString().trim() === '') {
-                return;
-            }
+  private parseFields(
+    fields: any[],
+    cipher: CipherView,
+    designationKey: string,
+    valueKey: string,
+    nameKey: string
+  ) {
+    fields.forEach((field: any) => {
+      if (field[valueKey] == null || field[valueKey].toString().trim() === "") {
+        return;
+      }
 
-            const fieldValue = field[valueKey].toString();
-            const fieldDesignation = field[designationKey] != null ? field[designationKey].toString() : null;
-
-            if (cipher.type === CipherType.Login) {
-                if (this.isNullOrWhitespace(cipher.login.username) && fieldDesignation === 'username') {
-                    cipher.login.username = fieldValue;
-                    return;
-                } else if (this.isNullOrWhitespace(cipher.login.password) && fieldDesignation === 'password') {
-                    cipher.login.password = fieldValue;
-                    return;
-                } else if (this.isNullOrWhitespace(cipher.login.totp) && fieldDesignation != null &&
-                    fieldDesignation.startsWith('TOTP_')) {
-                    cipher.login.totp = fieldValue;
-                    return;
-                }
-            } else if (cipher.type === CipherType.Card) {
-                if (this.isNullOrWhitespace(cipher.card.number) && fieldDesignation === 'ccnum') {
-                    cipher.card.number = fieldValue;
-                    cipher.card.brand = this.getCardBrand(fieldValue);
-                    return;
-                } else if (this.isNullOrWhitespace(cipher.card.code) && fieldDesignation === 'cvv') {
-                    cipher.card.code = fieldValue;
-                    return;
-                } else if (this.isNullOrWhitespace(cipher.card.cardholderName) && fieldDesignation === 'cardholder') {
-                    cipher.card.cardholderName = fieldValue;
-                    return;
-                } else if (this.isNullOrWhitespace(cipher.card.expiration) && fieldDesignation === 'expiry' &&
-                    fieldValue.length === 6) {
-                    cipher.card.expMonth = (fieldValue as string).substr(4, 2);
-                    if (cipher.card.expMonth[0] === '0') {
-                        cipher.card.expMonth = cipher.card.expMonth.substr(1, 1);
-                    }
-                    cipher.card.expYear = (fieldValue as string).substr(0, 4);
-                    return;
-                } else if (fieldDesignation === 'type') {
-                    // Skip since brand was determined from number above
-                    return;
-                }
-            } else if (cipher.type === CipherType.Identity) {
-                const identity = cipher.identity;
-                if (this.isNullOrWhitespace(identity.firstName) && fieldDesignation === 'firstname') {
-                    identity.firstName = fieldValue;
-                    return;
-                } else if (this.isNullOrWhitespace(identity.lastName) && fieldDesignation === 'lastname') {
-                    identity.lastName = fieldValue;
-                    return;
-                } else if (this.isNullOrWhitespace(identity.middleName) && fieldDesignation === 'initial') {
-                    identity.middleName = fieldValue;
-                    return;
-                } else if (this.isNullOrWhitespace(identity.phone) && fieldDesignation === 'defphone') {
-                    identity.phone = fieldValue;
-                    return;
-                } else if (this.isNullOrWhitespace(identity.company) && fieldDesignation === 'company') {
-                    identity.company = fieldValue;
-                    return;
-                } else if (this.isNullOrWhitespace(identity.email) && fieldDesignation === 'email') {
-                    identity.email = fieldValue;
-                    return;
-                } else if (this.isNullOrWhitespace(identity.username) && fieldDesignation === 'username') {
-                    identity.username = fieldValue;
-                    return;
-                } else if (fieldDesignation === 'address') {
-                    // fieldValue is an object casted into a string, so access the plain value instead
-                    const { street, city, country, zip } = field[valueKey];
-                    identity.address1 = this.getValueOrDefault(street);
-                    identity.city = this.getValueOrDefault(city);
-                    if (!this.isNullOrWhitespace(country)) {
-                        identity.country = country.toUpperCase();
-                    }
-                    identity.postalCode = this.getValueOrDefault(zip);
-                    return;
-                }
-            }
+      // TODO: when date FieldType exists, store this as a date field type instead of formatted Text if k is 'date'
+      const fieldValue =
+        field.k === "date"
+          ? new Date(field[valueKey] * 1000).toUTCString()
+          : field[valueKey].toString();
+      const fieldDesignation =
+        field[designationKey] != null ? field[designationKey].toString() : null;
 
-            const fieldName = this.isNullOrWhitespace(field[nameKey]) ? 'no_name' : field[nameKey];
-            if (fieldName === 'password' && cipher.passwordHistory != null &&
-                cipher.passwordHistory.some(h => h.password === fieldValue)) {
-                return;
-            }
+      if (cipher.type === CipherType.Login) {
+        if (this.isNullOrWhitespace(cipher.login.username) && fieldDesignation === "username") {
+          cipher.login.username = fieldValue;
+          return;
+        } else if (
+          this.isNullOrWhitespace(cipher.login.password) &&
+          fieldDesignation === "password"
+        ) {
+          cipher.login.password = fieldValue;
+          return;
+        } else if (
+          this.isNullOrWhitespace(cipher.login.totp) &&
+          fieldDesignation != null &&
+          fieldDesignation.startsWith("TOTP_")
+        ) {
+          cipher.login.totp = fieldValue;
+          return;
+        }
+      } else if (cipher.type === CipherType.Card) {
+        if (this.isNullOrWhitespace(cipher.card.number) && fieldDesignation === "ccnum") {
+          cipher.card.number = fieldValue;
+          cipher.card.brand = this.getCardBrand(fieldValue);
+          return;
+        } else if (this.isNullOrWhitespace(cipher.card.code) && fieldDesignation === "cvv") {
+          cipher.card.code = fieldValue;
+          return;
+        } else if (
+          this.isNullOrWhitespace(cipher.card.cardholderName) &&
+          fieldDesignation === "cardholder"
+        ) {
+          cipher.card.cardholderName = fieldValue;
+          return;
+        } else if (
+          this.isNullOrWhitespace(cipher.card.expiration) &&
+          fieldDesignation === "expiry" &&
+          fieldValue.length === 6
+        ) {
+          cipher.card.expMonth = (fieldValue as string).substr(4, 2);
+          if (cipher.card.expMonth[0] === "0") {
+            cipher.card.expMonth = cipher.card.expMonth.substr(1, 1);
+          }
+          cipher.card.expYear = (fieldValue as string).substr(0, 4);
+          return;
+        } else if (fieldDesignation === "type") {
+          // Skip since brand was determined from number above
+          return;
+        }
+      } else if (cipher.type === CipherType.Identity) {
+        const identity = cipher.identity;
+        if (this.isNullOrWhitespace(identity.firstName) && fieldDesignation === "firstname") {
+          identity.firstName = fieldValue;
+          return;
+        } else if (this.isNullOrWhitespace(identity.lastName) && fieldDesignation === "lastname") {
+          identity.lastName = fieldValue;
+          return;
+        } else if (this.isNullOrWhitespace(identity.middleName) && fieldDesignation === "initial") {
+          identity.middleName = fieldValue;
+          return;
+        } else if (this.isNullOrWhitespace(identity.phone) && fieldDesignation === "defphone") {
+          identity.phone = fieldValue;
+          return;
+        } else if (this.isNullOrWhitespace(identity.company) && fieldDesignation === "company") {
+          identity.company = fieldValue;
+          return;
+        } else if (this.isNullOrWhitespace(identity.email) && fieldDesignation === "email") {
+          identity.email = fieldValue;
+          return;
+        } else if (this.isNullOrWhitespace(identity.username) && fieldDesignation === "username") {
+          identity.username = fieldValue;
+          return;
+        } else if (fieldDesignation === "address") {
+          // fieldValue is an object casted into a string, so access the plain value instead
+          const { street, city, country, zip } = field[valueKey];
+          identity.address1 = this.getValueOrDefault(street);
+          identity.city = this.getValueOrDefault(city);
+          if (!this.isNullOrWhitespace(country)) {
+            identity.country = country.toUpperCase();
+          }
+          identity.postalCode = this.getValueOrDefault(zip);
+          return;
+        }
+      }
 
-            const fieldType = field.k === 'concealed' ? FieldType.Hidden : FieldType.Text;
-            this.processKvp(cipher, fieldName, fieldValue, fieldType);
-        });
-    }
+      const fieldName = this.isNullOrWhitespace(field[nameKey]) ? "no_name" : field[nameKey];
+      if (
+        fieldName === "password" &&
+        cipher.passwordHistory != null &&
+        cipher.passwordHistory.some((h) => h.password === fieldValue)
+      ) {
+        return;
+      }
+
+      const fieldType = field.k === "concealed" ? FieldType.Hidden : FieldType.Text;
+      this.processKvp(cipher, fieldName, fieldValue, fieldType);
+    });
+  }
 }
diff --git a/jslib/common/src/importers/onepasswordImporters/onepasswordCsvImporter.ts b/jslib/common/src/importers/onepasswordImporters/onepasswordCsvImporter.ts
index 8bf5f153..c4234022 100644
--- a/jslib/common/src/importers/onepasswordImporters/onepasswordCsvImporter.ts
+++ b/jslib/common/src/importers/onepasswordImporters/onepasswordCsvImporter.ts
@@ -1,288 +1,382 @@
-import { ImportResult } from '../../models/domain/importResult';
-import { BaseImporter } from '../baseImporter';
-import { Importer } from '../importer';
-
-import { CipherType } from '../../enums/cipherType';
-import { FieldType } from '../../enums/fieldType';
-import { CipherView } from '../../models/view/cipherView';
-import { CipherImportContext } from './cipherImportContext';
-
-export const IgnoredProperties = ['ainfo', 'autosubmit', 'notesplain', 'ps', 'scope', 'tags', 'title', 'uuid', 'notes'];
+import { ImportResult } from "../../models/domain/importResult";
+import { BaseImporter } from "../baseImporter";
+import { Importer } from "../importer";
+
+import { CipherType } from "../../enums/cipherType";
+import { FieldType } from "../../enums/fieldType";
+import { CipherView } from "../../models/view/cipherView";
+import { CipherImportContext } from "./cipherImportContext";
+
+export const IgnoredProperties = [
+  "ainfo",
+  "autosubmit",
+  "notesplain",
+  "ps",
+  "scope",
+  "tags",
+  "title",
+  "uuid",
+  "notes",
+];
 
 export abstract class OnePasswordCsvImporter extends BaseImporter implements Importer {
-    protected loginPropertyParsers = [this.setLoginUsername, this.setLoginPassword, this.setLoginUris];
-    protected creditCardPropertyParsers = [this.setCreditCardNumber, this.setCreditCardVerification, this.setCreditCardCardholderName, this.setCreditCardExpiry];
-    protected identityPropertyParsers = [this.setIdentityFirstName, this.setIdentityInitial, this.setIdentityLastName, this.setIdentityUserName, this.setIdentityEmail, this.setIdentityPhone, this.setIdentityCompany];
-
-    abstract setCipherType(value: any, cipher: CipherView): void;
-
-    parse(data: string): Promise<ImportResult> {
-        const result = new ImportResult();
-        const results = this.parseCsv(data, true, {
-            quoteChar: '"',
-            escapeChar: '\\',
-        });
-        if (results == null) {
-            result.success = false;
-            return Promise.resolve(result);
-        }
-
-        results.forEach(value => {
-            if (this.isNullOrWhitespace(this.getProp(value, 'title'))) {
-                return;
-            }
-
-            const cipher = this.initLoginCipher();
-            cipher.name = this.getValueOrDefault(this.getProp(value, 'title'), '--');
-
-            this.setNotes(value, cipher);
-
-            this.setCipherType(value, cipher);
-
-            let altUsername: string = null;
-            for (const property in value) {
-                if (!value.hasOwnProperty(property) || this.isNullOrWhitespace(value[property])) {
-                    continue;
-                }
-
-                const context = new CipherImportContext(value, property, cipher);
-                if (cipher.type === CipherType.Login && this.setKnownLoginValue(context)) {
-                    continue;
-                } else if (cipher.type === CipherType.Card && this.setKnownCreditCardValue(context)) {
-                    continue;
-                } else if (cipher.type === CipherType.Identity && this.setKnownIdentityValue(context)) {
-                    continue;
-                }
-
-                altUsername = this.setUnknownValue(context, altUsername);
-            }
+  protected loginPropertyParsers = [
+    this.setLoginUsername,
+    this.setLoginPassword,
+    this.setLoginUris,
+  ];
+  protected creditCardPropertyParsers = [
+    this.setCreditCardNumber,
+    this.setCreditCardVerification,
+    this.setCreditCardCardholderName,
+    this.setCreditCardExpiry,
+  ];
+  protected identityPropertyParsers = [
+    this.setIdentityFirstName,
+    this.setIdentityInitial,
+    this.setIdentityLastName,
+    this.setIdentityUserName,
+    this.setIdentityEmail,
+    this.setIdentityPhone,
+    this.setIdentityCompany,
+  ];
+
+  abstract setCipherType(value: any, cipher: CipherView): void;
+
+  parse(data: string): Promise<ImportResult> {
+    const result = new ImportResult();
+    const results = this.parseCsv(data, true, {
+      quoteChar: '"',
+      escapeChar: "\\",
+    });
+    if (results == null) {
+      result.success = false;
+      return Promise.resolve(result);
+    }
 
-            if (cipher.type === CipherType.Login && !this.isNullOrWhitespace(altUsername) &&
-                this.isNullOrWhitespace(cipher.login.username) && altUsername.indexOf('://') === -1) {
-                cipher.login.username = altUsername;
-            }
+    results.forEach((value) => {
+      if (this.isNullOrWhitespace(this.getProp(value, "title"))) {
+        return;
+      }
 
-            this.convertToNoteIfNeeded(cipher);
-            this.cleanupCipher(cipher);
-            result.ciphers.push(cipher);
-        });
+      const cipher = this.initLoginCipher();
+      cipher.name = this.getValueOrDefault(this.getProp(value, "title"), "--");
 
-        result.success = true;
-        return Promise.resolve(result);
-    }
+      this.setNotes(value, cipher);
 
-    protected getProp(obj: any, name: string): any {
-        const lowerObj = Object.entries(obj).reduce((agg: any, entry: [string, any]) => {
-            agg[entry[0].toLowerCase()] = entry[1];
-            return agg;
-        }, {});
-        return lowerObj[name.toLowerCase()];
-    }
+      this.setCipherType(value, cipher);
 
-    protected getPropByRegexp(obj: any, regexp: RegExp): any {
-        const matchingKeys = Object.keys(obj).reduce((agg: string[], key: string) => {
-            if (key.match(regexp)) {
-                agg.push(key);
-            }
-            return agg;
-        }, []);
-        if (matchingKeys.length === 0) {
-            return null;
-        } else {
-            return obj[matchingKeys[0]];
+      let altUsername: string = null;
+      for (const property in value) {
+        if (!value.hasOwnProperty(property) || this.isNullOrWhitespace(value[property])) {
+          continue;
         }
-    }
 
-    protected getPropIncluding(obj: any, name: string): any {
-        const includesMap = Object.keys(obj).reduce((agg: string[], entry: string) => {
-            if (entry.toLowerCase().includes(name.toLowerCase())) {
-                agg.push(entry);
-            }
-            return agg;
-        }, []);
-        if (includesMap.length === 0) {
-            return null;
-        } else {
-            return obj[includesMap[0]];
+        const context = new CipherImportContext(value, property, cipher);
+        if (cipher.type === CipherType.Login && this.setKnownLoginValue(context)) {
+          continue;
+        } else if (cipher.type === CipherType.Card && this.setKnownCreditCardValue(context)) {
+          continue;
+        } else if (cipher.type === CipherType.Identity && this.setKnownIdentityValue(context)) {
+          continue;
         }
-    }
-
-    protected setNotes(importRecord: any, cipher: CipherView) {
-        cipher.notes = this.getValueOrDefault(this.getProp(importRecord, 'notesPlain'), '') + '\n' +
-            this.getValueOrDefault(this.getProp(importRecord, 'notes'), '') + '\n';
-        cipher.notes.trim();
 
+        altUsername = this.setUnknownValue(context, altUsername);
+      }
+
+      if (
+        cipher.type === CipherType.Login &&
+        !this.isNullOrWhitespace(altUsername) &&
+        this.isNullOrWhitespace(cipher.login.username) &&
+        altUsername.indexOf("://") === -1
+      ) {
+        cipher.login.username = altUsername;
+      }
+
+      this.convertToNoteIfNeeded(cipher);
+      this.cleanupCipher(cipher);
+      result.ciphers.push(cipher);
+    });
+
+    result.success = true;
+    return Promise.resolve(result);
+  }
+
+  protected getProp(obj: any, name: string): any {
+    const lowerObj = Object.entries(obj).reduce((agg: any, entry: [string, any]) => {
+      agg[entry[0].toLowerCase()] = entry[1];
+      return agg;
+    }, {});
+    return lowerObj[name.toLowerCase()];
+  }
+
+  protected getPropByRegexp(obj: any, regexp: RegExp): any {
+    const matchingKeys = Object.keys(obj).reduce((agg: string[], key: string) => {
+      if (key.match(regexp)) {
+        agg.push(key);
+      }
+      return agg;
+    }, []);
+    if (matchingKeys.length === 0) {
+      return null;
+    } else {
+      return obj[matchingKeys[0]];
     }
-
-    protected setKnownLoginValue(context: CipherImportContext): boolean {
-        return this.loginPropertyParsers.reduce((agg: boolean, func) => {
-            if (!agg) {
-                agg = func.bind(this)(context);
-            }
-            return agg;
-        }, false);
+  }
+
+  protected getPropIncluding(obj: any, name: string): any {
+    const includesMap = Object.keys(obj).reduce((agg: string[], entry: string) => {
+      if (entry.toLowerCase().includes(name.toLowerCase())) {
+        agg.push(entry);
+      }
+      return agg;
+    }, []);
+    if (includesMap.length === 0) {
+      return null;
+    } else {
+      return obj[includesMap[0]];
     }
-
-    protected setKnownCreditCardValue(context: CipherImportContext): boolean {
-        return this.creditCardPropertyParsers.reduce((agg: boolean, func) => {
-            if (!agg) {
-                agg = func.bind(this)(context);
-            }
-            return agg;
-        }, false);
-    }
-
-    protected setKnownIdentityValue(context: CipherImportContext): boolean {
-        return this.identityPropertyParsers.reduce((agg: boolean, func) => {
-            if (!agg) {
-                agg = func.bind(this)(context);
-            }
-            return agg;
-        }, false);
-    }
-
-    protected setUnknownValue(context: CipherImportContext, altUsername: string): string {
-        if (IgnoredProperties.indexOf(context.lowerProperty) === -1 && !context.lowerProperty.startsWith('section:') &&
-            !context.lowerProperty.startsWith('section ')) {
-            if (altUsername == null && context.lowerProperty === 'email') {
-                return context.importRecord[context.property];
-            }
-            else if (context.lowerProperty === 'created date' || context.lowerProperty === 'modified date') {
-                const readableDate = new Date(parseInt(context.importRecord[context.property], 10) * 1000).toUTCString();
-                this.processKvp(context.cipher, '1Password ' + context.property, readableDate);
-                return null;
-            }
-            if (context.lowerProperty.includes('password') || context.lowerProperty.includes('key') || context.lowerProperty.includes('secret')) {
-                this.processKvp(context.cipher, context.property, context.importRecord[context.property], FieldType.Hidden);
-            } else {
-                this.processKvp(context.cipher, context.property, context.importRecord[context.property]);
-            }
-        }
+  }
+
+  protected setNotes(importRecord: any, cipher: CipherView) {
+    cipher.notes =
+      this.getValueOrDefault(this.getProp(importRecord, "notesPlain"), "") +
+      "\n" +
+      this.getValueOrDefault(this.getProp(importRecord, "notes"), "") +
+      "\n";
+    cipher.notes.trim();
+  }
+
+  protected setKnownLoginValue(context: CipherImportContext): boolean {
+    return this.loginPropertyParsers.reduce((agg: boolean, func) => {
+      if (!agg) {
+        agg = func.bind(this)(context);
+      }
+      return agg;
+    }, false);
+  }
+
+  protected setKnownCreditCardValue(context: CipherImportContext): boolean {
+    return this.creditCardPropertyParsers.reduce((agg: boolean, func) => {
+      if (!agg) {
+        agg = func.bind(this)(context);
+      }
+      return agg;
+    }, false);
+  }
+
+  protected setKnownIdentityValue(context: CipherImportContext): boolean {
+    return this.identityPropertyParsers.reduce((agg: boolean, func) => {
+      if (!agg) {
+        agg = func.bind(this)(context);
+      }
+      return agg;
+    }, false);
+  }
+
+  protected setUnknownValue(context: CipherImportContext, altUsername: string): string {
+    if (
+      IgnoredProperties.indexOf(context.lowerProperty) === -1 &&
+      !context.lowerProperty.startsWith("section:") &&
+      !context.lowerProperty.startsWith("section ")
+    ) {
+      if (altUsername == null && context.lowerProperty === "email") {
+        return context.importRecord[context.property];
+      } else if (
+        context.lowerProperty === "created date" ||
+        context.lowerProperty === "modified date"
+      ) {
+        const readableDate = new Date(
+          parseInt(context.importRecord[context.property], 10) * 1000
+        ).toUTCString();
+        this.processKvp(context.cipher, "1Password " + context.property, readableDate);
         return null;
+      }
+      if (
+        context.lowerProperty.includes("password") ||
+        context.lowerProperty.includes("key") ||
+        context.lowerProperty.includes("secret")
+      ) {
+        this.processKvp(
+          context.cipher,
+          context.property,
+          context.importRecord[context.property],
+          FieldType.Hidden
+        );
+      } else {
+        this.processKvp(context.cipher, context.property, context.importRecord[context.property]);
+      }
     }
-
-    protected setIdentityFirstName(context: CipherImportContext) {
-        if (this.isNullOrWhitespace(context.cipher.identity.firstName) && context.lowerProperty.includes('first name')) {
-            context.cipher.identity.firstName = context.importRecord[context.property];
-            return true;
-        }
-        return false;
+    return null;
+  }
+
+  protected setIdentityFirstName(context: CipherImportContext) {
+    if (
+      this.isNullOrWhitespace(context.cipher.identity.firstName) &&
+      context.lowerProperty.includes("first name")
+    ) {
+      context.cipher.identity.firstName = context.importRecord[context.property];
+      return true;
     }
-
-    protected setIdentityInitial(context: CipherImportContext) {
-        if (this.isNullOrWhitespace(context.cipher.identity.middleName) && context.lowerProperty.includes('initial')) {
-            context.cipher.identity.middleName = context.importRecord[context.property];
-            return true;
-        }
-        return false;
+    return false;
+  }
+
+  protected setIdentityInitial(context: CipherImportContext) {
+    if (
+      this.isNullOrWhitespace(context.cipher.identity.middleName) &&
+      context.lowerProperty.includes("initial")
+    ) {
+      context.cipher.identity.middleName = context.importRecord[context.property];
+      return true;
     }
-
-    protected setIdentityLastName(context: CipherImportContext) {
-        if (this.isNullOrWhitespace(context.cipher.identity.lastName) && context.lowerProperty.includes('last name')) {
-            context.cipher.identity.lastName = context.importRecord[context.property];
-            return true;
-        }
-        return false;
+    return false;
+  }
+
+  protected setIdentityLastName(context: CipherImportContext) {
+    if (
+      this.isNullOrWhitespace(context.cipher.identity.lastName) &&
+      context.lowerProperty.includes("last name")
+    ) {
+      context.cipher.identity.lastName = context.importRecord[context.property];
+      return true;
     }
-
-    protected setIdentityUserName(context: CipherImportContext) {
-        if (this.isNullOrWhitespace(context.cipher.identity.username) && context.lowerProperty.includes('username')) {
-            context.cipher.identity.username = context.importRecord[context.property];
-            return true;
-        }
-        return false;
+    return false;
+  }
+
+  protected setIdentityUserName(context: CipherImportContext) {
+    if (
+      this.isNullOrWhitespace(context.cipher.identity.username) &&
+      context.lowerProperty.includes("username")
+    ) {
+      context.cipher.identity.username = context.importRecord[context.property];
+      return true;
     }
-
-    protected setIdentityCompany(context: CipherImportContext) {
-        if (this.isNullOrWhitespace(context.cipher.identity.company) && context.lowerProperty.includes('company')) {
-            context.cipher.identity.company = context.importRecord[context.property];
-            return true;
-        }
-        return false;
+    return false;
+  }
+
+  protected setIdentityCompany(context: CipherImportContext) {
+    if (
+      this.isNullOrWhitespace(context.cipher.identity.company) &&
+      context.lowerProperty.includes("company")
+    ) {
+      context.cipher.identity.company = context.importRecord[context.property];
+      return true;
     }
-
-    protected setIdentityPhone(context: CipherImportContext) {
-        if (this.isNullOrWhitespace(context.cipher.identity.phone) && context.lowerProperty.includes('default phone')) {
-            context.cipher.identity.phone = context.importRecord[context.property];
-            return true;
-        }
-        return false;
+    return false;
+  }
+
+  protected setIdentityPhone(context: CipherImportContext) {
+    if (
+      this.isNullOrWhitespace(context.cipher.identity.phone) &&
+      context.lowerProperty.includes("default phone")
+    ) {
+      context.cipher.identity.phone = context.importRecord[context.property];
+      return true;
     }
-
-    protected setIdentityEmail(context: CipherImportContext) {
-        if (this.isNullOrWhitespace(context.cipher.identity.email) && context.lowerProperty.includes('email')) {
-            context.cipher.identity.email = context.importRecord[context.property];
-            return true;
-        }
-        return false;
+    return false;
+  }
+
+  protected setIdentityEmail(context: CipherImportContext) {
+    if (
+      this.isNullOrWhitespace(context.cipher.identity.email) &&
+      context.lowerProperty.includes("email")
+    ) {
+      context.cipher.identity.email = context.importRecord[context.property];
+      return true;
     }
-
-    protected setCreditCardNumber(context: CipherImportContext): boolean {
-        if (this.isNullOrWhitespace(context.cipher.card.number) && context.lowerProperty.includes('number')) {
-            context.cipher.card.number = context.importRecord[context.property];
-            context.cipher.card.brand = this.getCardBrand(context.cipher.card.number);
-            return true;
-        }
-        return false;
+    return false;
+  }
+
+  protected setCreditCardNumber(context: CipherImportContext): boolean {
+    if (
+      this.isNullOrWhitespace(context.cipher.card.number) &&
+      context.lowerProperty.includes("number")
+    ) {
+      context.cipher.card.number = context.importRecord[context.property];
+      context.cipher.card.brand = this.getCardBrand(context.cipher.card.number);
+      return true;
     }
-
-    protected setCreditCardVerification(context: CipherImportContext) {
-        if (this.isNullOrWhitespace(context.cipher.card.code) && context.lowerProperty.includes('verification number')) {
-            context.cipher.card.code = context.importRecord[context.property];
-            return true;
-        }
-        return false;
+    return false;
+  }
+
+  protected setCreditCardVerification(context: CipherImportContext) {
+    if (
+      this.isNullOrWhitespace(context.cipher.card.code) &&
+      context.lowerProperty.includes("verification number")
+    ) {
+      context.cipher.card.code = context.importRecord[context.property];
+      return true;
     }
-
-    protected setCreditCardCardholderName(context: CipherImportContext) {
-        if (this.isNullOrWhitespace(context.cipher.card.cardholderName) && context.lowerProperty.includes('cardholder name')) {
-            context.cipher.card.cardholderName = context.importRecord[context.property];
-            return true;
-        }
-        return false;
+    return false;
+  }
+
+  protected setCreditCardCardholderName(context: CipherImportContext) {
+    if (
+      this.isNullOrWhitespace(context.cipher.card.cardholderName) &&
+      context.lowerProperty.includes("cardholder name")
+    ) {
+      context.cipher.card.cardholderName = context.importRecord[context.property];
+      return true;
     }
-
-    protected setCreditCardExpiry(context: CipherImportContext) {
-        if (this.isNullOrWhitespace(context.cipher.card.expiration) && context.lowerProperty.includes('expiry date') &&
-            context.importRecord[context.property].length === 7) {
-            context.cipher.card.expMonth = (context.importRecord[context.property] as string).substr(0, 2);
-            if (context.cipher.card.expMonth[0] === '0') {
-                context.cipher.card.expMonth = context.cipher.card.expMonth.substr(1, 1);
-            }
-            context.cipher.card.expYear = (context.importRecord[context.property] as string).substr(3, 4);
-            return true;
-        }
-        return false;
+    return false;
+  }
+
+  protected setCreditCardExpiry(context: CipherImportContext) {
+    if (
+      this.isNullOrWhitespace(context.cipher.card.expiration) &&
+      context.lowerProperty.includes("expiry date") &&
+      context.importRecord[context.property].length === 7
+    ) {
+      context.cipher.card.expMonth = (context.importRecord[context.property] as string).substr(
+        0,
+        2
+      );
+      if (context.cipher.card.expMonth[0] === "0") {
+        context.cipher.card.expMonth = context.cipher.card.expMonth.substr(1, 1);
+      }
+      context.cipher.card.expYear = (context.importRecord[context.property] as string).substr(3, 4);
+      return true;
     }
-
-    protected setLoginPassword(context: CipherImportContext) {
-        if (this.isNullOrWhitespace(context.cipher.login.password) && context.lowerProperty === 'password') {
-            context.cipher.login.password = context.importRecord[context.property];
-            return true;
-        }
-        return false;
+    return false;
+  }
+
+  protected setLoginPassword(context: CipherImportContext) {
+    if (
+      this.isNullOrWhitespace(context.cipher.login.password) &&
+      context.lowerProperty === "password"
+    ) {
+      context.cipher.login.password = context.importRecord[context.property];
+      return true;
     }
-
-    protected setLoginUsername(context: CipherImportContext) {
-        if (this.isNullOrWhitespace(context.cipher.login.username) && context.lowerProperty === 'username') {
-            context.cipher.login.username = context.importRecord[context.property];
-            return true;
-        }
-        return false;
+    return false;
+  }
+
+  protected setLoginUsername(context: CipherImportContext) {
+    if (
+      this.isNullOrWhitespace(context.cipher.login.username) &&
+      context.lowerProperty === "username"
+    ) {
+      context.cipher.login.username = context.importRecord[context.property];
+      return true;
     }
-
-    protected setLoginUris(context: CipherImportContext) {
-        if ((context.cipher.login.uris == null || context.cipher.login.uris.length === 0) && context.lowerProperty === 'urls') {
-            const urls = context.importRecord[context.property].split(this.newLineRegex);
-            context.cipher.login.uris = this.makeUriArray(urls);
-            return true;
-        } else if ((context.lowerProperty === 'url')) {
-            if (context.cipher.login.uris == null) {
-                context.cipher.login.uris = [];
-            }
-            context.cipher.login.uris.concat(this.makeUriArray(context.importRecord[context.property]));
-            return true;
-        }
-        return false;
+    return false;
+  }
+
+  protected setLoginUris(context: CipherImportContext) {
+    if (
+      (context.cipher.login.uris == null || context.cipher.login.uris.length === 0) &&
+      context.lowerProperty === "urls"
+    ) {
+      const urls = context.importRecord[context.property].split(this.newLineRegex);
+      context.cipher.login.uris = this.makeUriArray(urls);
+      return true;
+    } else if (context.lowerProperty === "url") {
+      if (context.cipher.login.uris == null) {
+        context.cipher.login.uris = [];
+      }
+      context.cipher.login.uris.concat(this.makeUriArray(context.importRecord[context.property]));
+      return true;
     }
+    return false;
+  }
 }
diff --git a/jslib/common/src/importers/onepasswordImporters/onepasswordMacCsvImporter.ts b/jslib/common/src/importers/onepasswordImporters/onepasswordMacCsvImporter.ts
index 35c602aa..4d91c1c0 100644
--- a/jslib/common/src/importers/onepasswordImporters/onepasswordMacCsvImporter.ts
+++ b/jslib/common/src/importers/onepasswordImporters/onepasswordMacCsvImporter.ts
@@ -1,30 +1,30 @@
-import { Importer } from '../importer';
-import { IgnoredProperties, OnePasswordCsvImporter } from './onepasswordCsvImporter';
+import { Importer } from "../importer";
+import { IgnoredProperties, OnePasswordCsvImporter } from "./onepasswordCsvImporter";
 
-import { CipherType } from '../../enums/cipherType';
-import { CardView } from '../../models/view/cardView';
-import { CipherView } from '../../models/view/cipherView';
-import { IdentityView } from '../../models/view/identityView';
+import { CipherType } from "../../enums/cipherType";
+import { CardView } from "../../models/view/cardView";
+import { CipherView } from "../../models/view/cipherView";
+import { IdentityView } from "../../models/view/identityView";
 
 export class OnePasswordMacCsvImporter extends OnePasswordCsvImporter implements Importer {
-    setCipherType(value: any, cipher: CipherView) {
-        const onePassType = this.getValueOrDefault(this.getProp(value, 'type'), 'Login');
-        switch (onePassType) {
-            case 'Credit Card':
-                cipher.type = CipherType.Card;
-                cipher.card = new CardView();
-                IgnoredProperties.push('type');
-                break;
-            case 'Identity':
-                cipher.type = CipherType.Identity;
-                cipher.identity = new IdentityView();
-                IgnoredProperties.push('type');
-                break;
-            case 'Login':
-            case 'Secure Note':
-                IgnoredProperties.push('type');
-            default:
-                break;
-        }
+  setCipherType(value: any, cipher: CipherView) {
+    const onePassType = this.getValueOrDefault(this.getProp(value, "type"), "Login");
+    switch (onePassType) {
+      case "Credit Card":
+        cipher.type = CipherType.Card;
+        cipher.card = new CardView();
+        IgnoredProperties.push("type");
+        break;
+      case "Identity":
+        cipher.type = CipherType.Identity;
+        cipher.identity = new IdentityView();
+        IgnoredProperties.push("type");
+        break;
+      case "Login":
+      case "Secure Note":
+        IgnoredProperties.push("type");
+      default:
+        break;
     }
+  }
 }
diff --git a/jslib/common/src/importers/onepasswordImporters/onepasswordWinCsvImporter.ts b/jslib/common/src/importers/onepasswordImporters/onepasswordWinCsvImporter.ts
index ef0c1055..ebc96b32 100644
--- a/jslib/common/src/importers/onepasswordImporters/onepasswordWinCsvImporter.ts
+++ b/jslib/common/src/importers/onepasswordImporters/onepasswordWinCsvImporter.ts
@@ -1,56 +1,63 @@
-import { Importer } from '../importer';
-import { CipherImportContext } from './cipherImportContext';
-import { OnePasswordCsvImporter } from './onepasswordCsvImporter';
+import { Importer } from "../importer";
+import { CipherImportContext } from "./cipherImportContext";
+import { OnePasswordCsvImporter } from "./onepasswordCsvImporter";
 
-import { CipherType } from '../../enums/cipherType';
-import { CardView } from '../../models/view/cardView';
-import { CipherView } from '../../models/view/cipherView';
-import { IdentityView } from '../../models/view/identityView';
-import { LoginView } from '../../models/view/loginView';
+import { CipherType } from "../../enums/cipherType";
+import { CardView } from "../../models/view/cardView";
+import { CipherView } from "../../models/view/cipherView";
+import { IdentityView } from "../../models/view/identityView";
+import { LoginView } from "../../models/view/loginView";
 
 export class OnePasswordWinCsvImporter extends OnePasswordCsvImporter implements Importer {
-    constructor() {
-        super();
-        this.identityPropertyParsers.push(this.setIdentityAddress);
-    }
+  constructor() {
+    super();
+    this.identityPropertyParsers.push(this.setIdentityAddress);
+  }
 
-    setCipherType(value: any, cipher: CipherView) {
-        cipher.type = CipherType.Login;
-        cipher.login = new LoginView();
+  setCipherType(value: any, cipher: CipherView) {
+    cipher.type = CipherType.Login;
+    cipher.login = new LoginView();
 
-        if (!this.isNullOrWhitespace(this.getPropByRegexp(value, /\d+: number/i)) &&
-            !this.isNullOrWhitespace(this.getPropByRegexp(value, /\d+: expiry date/i))) {
-            cipher.type = CipherType.Card;
-            cipher.card = new CardView();
-        }
+    if (
+      !this.isNullOrWhitespace(this.getPropByRegexp(value, /\d+: number/i)) &&
+      !this.isNullOrWhitespace(this.getPropByRegexp(value, /\d+: expiry date/i))
+    ) {
+      cipher.type = CipherType.Card;
+      cipher.card = new CardView();
+    }
 
-        if (!this.isNullOrWhitespace(this.getPropByRegexp(value, /name \d+: first name/i)) ||
-            !this.isNullOrWhitespace(this.getPropByRegexp(value, /name \d+: initial/i)) ||
-            !this.isNullOrWhitespace(this.getPropByRegexp(value, /name \d+: last name/i)) ||
-            !this.isNullOrWhitespace(this.getPropByRegexp(value, /internet \d+: email/i))) {
-            cipher.type = CipherType.Identity;
-            cipher.identity = new IdentityView();
-        }
+    if (
+      !this.isNullOrWhitespace(this.getPropByRegexp(value, /name \d+: first name/i)) ||
+      !this.isNullOrWhitespace(this.getPropByRegexp(value, /name \d+: initial/i)) ||
+      !this.isNullOrWhitespace(this.getPropByRegexp(value, /name \d+: last name/i)) ||
+      !this.isNullOrWhitespace(this.getPropByRegexp(value, /internet \d+: email/i))
+    ) {
+      cipher.type = CipherType.Identity;
+      cipher.identity = new IdentityView();
     }
+  }
 
-    setIdentityAddress(context: CipherImportContext) {
-        if (context.lowerProperty.match(/address \d+: address/i)) {
-            this.processKvp(context.cipher, 'address', context.importRecord[context.property]);
-            return true;
-        }
-        return false;
+  setIdentityAddress(context: CipherImportContext) {
+    if (context.lowerProperty.match(/address \d+: address/i)) {
+      this.processKvp(context.cipher, "address", context.importRecord[context.property]);
+      return true;
     }
+    return false;
+  }
 
-    setCreditCardExpiry(context: CipherImportContext) {
-        if (this.isNullOrWhitespace(context.cipher.card.expiration) && context.lowerProperty.includes('expiry date')) {
-            const expSplit = (context.importRecord[context.property] as string).split('/');
-            context.cipher.card.expMonth = expSplit[0];
-            if (context.cipher.card.expMonth[0] === '0' && context.cipher.card.expMonth.length === 2) {
-                context.cipher.card.expMonth = context.cipher.card.expMonth.substr(1, 1);
-            }
-            context.cipher.card.expYear = expSplit[2].length > 4 ? expSplit[2].substr(0, 4) : expSplit[2];
-            return true;
-        }
-        return false;
+  setCreditCardExpiry(context: CipherImportContext) {
+    if (
+      this.isNullOrWhitespace(context.cipher.card.expiration) &&
+      context.lowerProperty.includes("expiry date")
+    ) {
+      const expSplit = (context.importRecord[context.property] as string).split("/");
+      context.cipher.card.expMonth = expSplit[0];
+      if (context.cipher.card.expMonth[0] === "0" && context.cipher.card.expMonth.length === 2) {
+        context.cipher.card.expMonth = context.cipher.card.expMonth.substr(1, 1);
+      }
+      context.cipher.card.expYear = expSplit[2].length > 4 ? expSplit[2].substr(0, 4) : expSplit[2];
+      return true;
     }
+    return false;
+  }
 }
diff --git a/jslib/common/src/importers/padlockCsvImporter.ts b/jslib/common/src/importers/padlockCsvImporter.ts
index e106af3e..777d9822 100644
--- a/jslib/common/src/importers/padlockCsvImporter.ts
+++ b/jslib/common/src/importers/padlockCsvImporter.ts
@@ -1,87 +1,87 @@
-import { BaseImporter } from './baseImporter';
-import { Importer } from './importer';
+import { BaseImporter } from "./baseImporter";
+import { Importer } from "./importer";
 
-import { ImportResult } from '../models/domain/importResult';
+import { ImportResult } from "../models/domain/importResult";
 
-import { CollectionView } from '../models/view/collectionView';
-import { FolderView } from '../models/view/folderView';
+import { CollectionView } from "../models/view/collectionView";
+import { FolderView } from "../models/view/folderView";
 
 export class PadlockCsvImporter extends BaseImporter implements Importer {
-    parse(data: string): Promise<ImportResult> {
-        const result = new ImportResult();
-        const results = this.parseCsv(data, false);
-        if (results == null) {
-            result.success = false;
-            return Promise.resolve(result);
-        }
-
-        let headers: string[] = null;
-        results.forEach(value => {
-            if (headers == null) {
-                headers = value.map((v: string) => v);
-                return;
-            }
+  parse(data: string): Promise<ImportResult> {
+    const result = new ImportResult();
+    const results = this.parseCsv(data, false);
+    if (results == null) {
+      result.success = false;
+      return Promise.resolve(result);
+    }
 
-            if (value.length < 2 || value.length !== headers.length) {
-                return;
-            }
+    let headers: string[] = null;
+    results.forEach((value) => {
+      if (headers == null) {
+        headers = value.map((v: string) => v);
+        return;
+      }
 
-            if (!this.isNullOrWhitespace(value[1])) {
-                if (this.organization) {
-                    const tags = (value[1] as string).split(',');
-                    tags.forEach(tag => {
-                        tag = tag.trim();
-                        let addCollection = true;
-                        let collectionIndex = result.collections.length;
+      if (value.length < 2 || value.length !== headers.length) {
+        return;
+      }
 
-                        for (let i = 0; i < result.collections.length; i++) {
-                            if (result.collections[i].name === tag) {
-                                addCollection = false;
-                                collectionIndex = i;
-                                break;
-                            }
-                        }
+      if (!this.isNullOrWhitespace(value[1])) {
+        if (this.organization) {
+          const tags = (value[1] as string).split(",");
+          tags.forEach((tag) => {
+            tag = tag.trim();
+            let addCollection = true;
+            let collectionIndex = result.collections.length;
 
-                        if (addCollection) {
-                            const collection = new CollectionView();
-                            collection.name = tag;
-                            result.collections.push(collection);
-                        }
+            for (let i = 0; i < result.collections.length; i++) {
+              if (result.collections[i].name === tag) {
+                addCollection = false;
+                collectionIndex = i;
+                break;
+              }
+            }
 
-                        result.collectionRelationships.push([result.ciphers.length, collectionIndex]);
-                    });
-                } else {
-                    const tags = (value[1] as string).split(',');
-                    const tag = tags.length > 0 ? tags[0].trim() : null;
-                    this.processFolder(result, tag);
-                }
+            if (addCollection) {
+              const collection = new CollectionView();
+              collection.name = tag;
+              result.collections.push(collection);
             }
 
-            const cipher = this.initLoginCipher();
-            cipher.name = this.getValueOrDefault(value[0], '--');
+            result.collectionRelationships.push([result.ciphers.length, collectionIndex]);
+          });
+        } else {
+          const tags = (value[1] as string).split(",");
+          const tag = tags.length > 0 ? tags[0].trim() : null;
+          this.processFolder(result, tag);
+        }
+      }
 
-            for (let i = 2; i < value.length; i++) {
-                const header = headers[i].trim().toLowerCase();
-                if (this.isNullOrWhitespace(value[i]) || this.isNullOrWhitespace(header)) {
-                    continue;
-                }
+      const cipher = this.initLoginCipher();
+      cipher.name = this.getValueOrDefault(value[0], "--");
 
-                if (this.usernameFieldNames.indexOf(header) > -1) {
-                    cipher.login.username = value[i];
-                } else if (this.passwordFieldNames.indexOf(header) > -1) {
-                    cipher.login.password = value[i];
-                } else if (this.uriFieldNames.indexOf(header) > -1) {
-                    cipher.login.uris = this.makeUriArray(value[i]);
-                } else {
-                    this.processKvp(cipher, headers[i], value[i]);
-                }
-            }
+      for (let i = 2; i < value.length; i++) {
+        const header = headers[i].trim().toLowerCase();
+        if (this.isNullOrWhitespace(value[i]) || this.isNullOrWhitespace(header)) {
+          continue;
+        }
 
-            this.cleanupCipher(cipher);
-            result.ciphers.push(cipher);
-        });
+        if (this.usernameFieldNames.indexOf(header) > -1) {
+          cipher.login.username = value[i];
+        } else if (this.passwordFieldNames.indexOf(header) > -1) {
+          cipher.login.password = value[i];
+        } else if (this.uriFieldNames.indexOf(header) > -1) {
+          cipher.login.uris = this.makeUriArray(value[i]);
+        } else {
+          this.processKvp(cipher, headers[i], value[i]);
+        }
+      }
 
-        result.success = true;
-        return Promise.resolve(result);
-    }
+      this.cleanupCipher(cipher);
+      result.ciphers.push(cipher);
+    });
+
+    result.success = true;
+    return Promise.resolve(result);
+  }
 }
diff --git a/jslib/common/src/importers/passkeepCsvImporter.ts b/jslib/common/src/importers/passkeepCsvImporter.ts
index a010550c..434f7ded 100644
--- a/jslib/common/src/importers/passkeepCsvImporter.ts
+++ b/jslib/common/src/importers/passkeepCsvImporter.ts
@@ -1,39 +1,39 @@
-import { BaseImporter } from './baseImporter';
-import { Importer } from './importer';
+import { BaseImporter } from "./baseImporter";
+import { Importer } from "./importer";
 
-import { ImportResult } from '../models/domain/importResult';
+import { ImportResult } from "../models/domain/importResult";
 
 export class PassKeepCsvImporter extends BaseImporter implements Importer {
-    parse(data: string): Promise<ImportResult> {
-        const result = new ImportResult();
-        const results = this.parseCsv(data, true);
-        if (results == null) {
-            result.success = false;
-            return Promise.resolve(result);
-        }
-
-        results.forEach(value => {
-            this.processFolder(result, this.getValue('category', value));
-            const cipher = this.initLoginCipher();
-            cipher.notes = this.getValue('description', value);
-            cipher.name = this.getValueOrDefault(this.getValue('title', value), '--');
-            cipher.login.username = this.getValue('username', value);
-            cipher.login.password = this.getValue('password', value);
-            cipher.login.uris = this.makeUriArray(this.getValue('site', value));
-            this.processKvp(cipher, 'Password 2', this.getValue('password2', value));
-            this.cleanupCipher(cipher);
-            result.ciphers.push(cipher);
-        });
+  parse(data: string): Promise<ImportResult> {
+    const result = new ImportResult();
+    const results = this.parseCsv(data, true);
+    if (results == null) {
+      result.success = false;
+      return Promise.resolve(result);
+    }
 
-        if (this.organization) {
-            this.moveFoldersToCollections(result);
-        }
+    results.forEach((value) => {
+      this.processFolder(result, this.getValue("category", value));
+      const cipher = this.initLoginCipher();
+      cipher.notes = this.getValue("description", value);
+      cipher.name = this.getValueOrDefault(this.getValue("title", value), "--");
+      cipher.login.username = this.getValue("username", value);
+      cipher.login.password = this.getValue("password", value);
+      cipher.login.uris = this.makeUriArray(this.getValue("site", value));
+      this.processKvp(cipher, "Password 2", this.getValue("password2", value));
+      this.cleanupCipher(cipher);
+      result.ciphers.push(cipher);
+    });
 
-        result.success = true;
-        return Promise.resolve(result);
+    if (this.organization) {
+      this.moveFoldersToCollections(result);
     }
 
-    private getValue(key: string, value: any) {
-        return this.getValueOrDefault(value[key], this.getValueOrDefault(value[(' ' + key)]));
-    }
+    result.success = true;
+    return Promise.resolve(result);
+  }
+
+  private getValue(key: string, value: any) {
+    return this.getValueOrDefault(value[key], this.getValueOrDefault(value[" " + key]));
+  }
 }
diff --git a/jslib/common/src/importers/passmanJsonImporter.ts b/jslib/common/src/importers/passmanJsonImporter.ts
index c00eeb1a..22232aba 100644
--- a/jslib/common/src/importers/passmanJsonImporter.ts
+++ b/jslib/common/src/importers/passmanJsonImporter.ts
@@ -1,61 +1,61 @@
-import { BaseImporter } from './baseImporter';
-import { Importer } from './importer';
+import { BaseImporter } from "./baseImporter";
+import { Importer } from "./importer";
 
-import { ImportResult } from '../models/domain/importResult';
+import { ImportResult } from "../models/domain/importResult";
 
 export class PassmanJsonImporter extends BaseImporter implements Importer {
-    parse(data: string): Promise<ImportResult> {
-        const result = new ImportResult();
-        const results = JSON.parse(data);
-        if (results == null || results.length === 0) {
-            result.success = false;
-            return Promise.resolve(result);
-        }
-
-        results.forEach((credential: any) => {
-            if (credential.tags != null && credential.tags.length > 0) {
-                const folderName = credential.tags[0].text;
-                this.processFolder(result, folderName);
-            }
-
-            const cipher = this.initLoginCipher();
-            cipher.name = credential.label;
-
-            cipher.login.username = this.getValueOrDefault(credential.username);
-            if (this.isNullOrWhitespace(cipher.login.username)) {
-                cipher.login.username = this.getValueOrDefault(credential.email);
-            } else if (!this.isNullOrWhitespace(credential.email)) {
-                cipher.notes = ('Email: ' + credential.email + '\n');
-            }
-
-            cipher.login.password = this.getValueOrDefault(credential.password);
-            cipher.login.uris = this.makeUriArray(credential.url);
-            cipher.notes += this.getValueOrDefault(credential.description, '');
-            if (credential.otp != null) {
-                cipher.login.totp = this.getValueOrDefault(credential.otp.secret);
-            }
-
-            if (credential.custom_fields != null) {
-                credential.custom_fields.forEach((customField: any) => {
-                    switch (customField.field_type) {
-                        case 'text':
-                        case 'password':
-                            this.processKvp(cipher, customField.label, customField.value);
-                            break;
-                    }
-                });
-            }
-
-            this.convertToNoteIfNeeded(cipher);
-            this.cleanupCipher(cipher);
-            result.ciphers.push(cipher);
+  parse(data: string): Promise<ImportResult> {
+    const result = new ImportResult();
+    const results = JSON.parse(data);
+    if (results == null || results.length === 0) {
+      result.success = false;
+      return Promise.resolve(result);
+    }
+
+    results.forEach((credential: any) => {
+      if (credential.tags != null && credential.tags.length > 0) {
+        const folderName = credential.tags[0].text;
+        this.processFolder(result, folderName);
+      }
+
+      const cipher = this.initLoginCipher();
+      cipher.name = credential.label;
+
+      cipher.login.username = this.getValueOrDefault(credential.username);
+      if (this.isNullOrWhitespace(cipher.login.username)) {
+        cipher.login.username = this.getValueOrDefault(credential.email);
+      } else if (!this.isNullOrWhitespace(credential.email)) {
+        cipher.notes = "Email: " + credential.email + "\n";
+      }
+
+      cipher.login.password = this.getValueOrDefault(credential.password);
+      cipher.login.uris = this.makeUriArray(credential.url);
+      cipher.notes += this.getValueOrDefault(credential.description, "");
+      if (credential.otp != null) {
+        cipher.login.totp = this.getValueOrDefault(credential.otp.secret);
+      }
+
+      if (credential.custom_fields != null) {
+        credential.custom_fields.forEach((customField: any) => {
+          switch (customField.field_type) {
+            case "text":
+            case "password":
+              this.processKvp(cipher, customField.label, customField.value);
+              break;
+          }
         });
+      }
 
-        if (this.organization) {
-            this.moveFoldersToCollections(result);
-        }
+      this.convertToNoteIfNeeded(cipher);
+      this.cleanupCipher(cipher);
+      result.ciphers.push(cipher);
+    });
 
-        result.success = true;
-        return Promise.resolve(result);
+    if (this.organization) {
+      this.moveFoldersToCollections(result);
     }
+
+    result.success = true;
+    return Promise.resolve(result);
+  }
 }
diff --git a/jslib/common/src/importers/passpackCsvImporter.ts b/jslib/common/src/importers/passpackCsvImporter.ts
index ba51490f..e1a02707 100644
--- a/jslib/common/src/importers/passpackCsvImporter.ts
+++ b/jslib/common/src/importers/passpackCsvImporter.ts
@@ -1,97 +1,104 @@
-import { BaseImporter } from './baseImporter';
-import { Importer } from './importer';
+import { BaseImporter } from "./baseImporter";
+import { Importer } from "./importer";
 
-import { ImportResult } from '../models/domain/importResult';
+import { ImportResult } from "../models/domain/importResult";
 
-import { CollectionView } from '../models/view/collectionView';
+import { CollectionView } from "../models/view/collectionView";
 
 export class PasspackCsvImporter extends BaseImporter implements Importer {
-    parse(data: string): Promise<ImportResult> {
-        const result = new ImportResult();
-        const results = this.parseCsv(data, true);
-        if (results == null) {
-            result.success = false;
-            return Promise.resolve(result);
-        }
-
-        results.forEach(value => {
-            const tagsJson = !this.isNullOrWhitespace(value.Tags) ? JSON.parse(value.Tags) : null;
-            const tags: string[] = tagsJson != null && tagsJson.tags != null && tagsJson.tags.length > 0 ?
-                tagsJson.tags.map((tagJson: string) => {
-                    try {
-                        const t = JSON.parse(tagJson);
-                        return this.getValueOrDefault(t.tag);
-                    } catch {
-                        // Ignore error
-                    }
-                    return null;
-                }).filter((t: string) => !this.isNullOrWhitespace(t)) : null;
-
-            if (this.organization && tags != null && tags.length > 0) {
-                tags.forEach(tag => {
-                    let addCollection = true;
-                    let collectionIndex = result.collections.length;
+  parse(data: string): Promise<ImportResult> {
+    const result = new ImportResult();
+    const results = this.parseCsv(data, true);
+    if (results == null) {
+      result.success = false;
+      return Promise.resolve(result);
+    }
 
-                    for (let i = 0; i < result.collections.length; i++) {
-                        if (result.collections[i].name === tag) {
-                            addCollection = false;
-                            collectionIndex = i;
-                            break;
-                        }
-                    }
+    results.forEach((value) => {
+      const tagsJson = !this.isNullOrWhitespace(value.Tags) ? JSON.parse(value.Tags) : null;
+      const tags: string[] =
+        tagsJson != null && tagsJson.tags != null && tagsJson.tags.length > 0
+          ? tagsJson.tags
+              .map((tagJson: string) => {
+                try {
+                  const t = JSON.parse(tagJson);
+                  return this.getValueOrDefault(t.tag);
+                } catch {
+                  // Ignore error
+                }
+                return null;
+              })
+              .filter((t: string) => !this.isNullOrWhitespace(t))
+          : null;
 
-                    if (addCollection) {
-                        const collection = new CollectionView();
-                        collection.name = tag;
-                        result.collections.push(collection);
-                    }
+      if (this.organization && tags != null && tags.length > 0) {
+        tags.forEach((tag) => {
+          let addCollection = true;
+          let collectionIndex = result.collections.length;
 
-                    result.collectionRelationships.push([result.ciphers.length, collectionIndex]);
-                });
-            } else if (!this.organization && tags != null && tags.length > 0) {
-                this.processFolder(result, tags[0]);
+          for (let i = 0; i < result.collections.length; i++) {
+            if (result.collections[i].name === tag) {
+              addCollection = false;
+              collectionIndex = i;
+              break;
             }
+          }
 
-            const cipher = this.initLoginCipher();
-            cipher.notes = this.getValueOrDefault(value.Notes, '');
-            cipher.notes += ('\n\n' + this.getValueOrDefault(value['Shared Notes'], '') + '\n');
-            cipher.name = this.getValueOrDefault(value['Entry Name'], '--');
-            cipher.login.username = this.getValueOrDefault(value['User ID']);
-            cipher.login.password = this.getValueOrDefault(value.Password);
-            cipher.login.uris = this.makeUriArray(value.URL);
+          if (addCollection) {
+            const collection = new CollectionView();
+            collection.name = tag;
+            result.collections.push(collection);
+          }
 
-            if (value.__parsed_extra != null && value.__parsed_extra.length > 0) {
-                value.__parsed_extra.forEach((extra: string) => {
-                    if (!this.isNullOrWhitespace(extra)) {
-                        cipher.notes += ('\n' + extra);
-                    }
-                });
-            }
+          result.collectionRelationships.push([result.ciphers.length, collectionIndex]);
+        });
+      } else if (!this.organization && tags != null && tags.length > 0) {
+        this.processFolder(result, tags[0]);
+      }
 
-            const fieldsJson = !this.isNullOrWhitespace(value['Extra Fields']) ?
-                JSON.parse(value['Extra Fields']) : null;
-            const fields = fieldsJson != null && fieldsJson.extraFields != null &&
-                fieldsJson.extraFields.length > 0 ? fieldsJson.extraFields.map((fieldJson: string) => {
-                    try {
-                        return JSON.parse(fieldJson);
-                    } catch {
-                        // Ignore error
-                    }
-                    return null;
-                }) : null;
-            if (fields != null) {
-                fields.forEach((f: any) => {
-                    if (f != null) {
-                        this.processKvp(cipher, f.name, f.data);
-                    }
-                });
-            }
+      const cipher = this.initLoginCipher();
+      cipher.notes = this.getValueOrDefault(value.Notes, "");
+      cipher.notes += "\n\n" + this.getValueOrDefault(value["Shared Notes"], "") + "\n";
+      cipher.name = this.getValueOrDefault(value["Entry Name"], "--");
+      cipher.login.username = this.getValueOrDefault(value["User ID"]);
+      cipher.login.password = this.getValueOrDefault(value.Password);
+      cipher.login.uris = this.makeUriArray(value.URL);
 
-            this.cleanupCipher(cipher);
-            result.ciphers.push(cipher);
+      if (value.__parsed_extra != null && value.__parsed_extra.length > 0) {
+        value.__parsed_extra.forEach((extra: string) => {
+          if (!this.isNullOrWhitespace(extra)) {
+            cipher.notes += "\n" + extra;
+          }
         });
+      }
 
-        result.success = true;
-        return Promise.resolve(result);
-    }
+      const fieldsJson = !this.isNullOrWhitespace(value["Extra Fields"])
+        ? JSON.parse(value["Extra Fields"])
+        : null;
+      const fields =
+        fieldsJson != null && fieldsJson.extraFields != null && fieldsJson.extraFields.length > 0
+          ? fieldsJson.extraFields.map((fieldJson: string) => {
+              try {
+                return JSON.parse(fieldJson);
+              } catch {
+                // Ignore error
+              }
+              return null;
+            })
+          : null;
+      if (fields != null) {
+        fields.forEach((f: any) => {
+          if (f != null) {
+            this.processKvp(cipher, f.name, f.data);
+          }
+        });
+      }
+
+      this.cleanupCipher(cipher);
+      result.ciphers.push(cipher);
+    });
+
+    result.success = true;
+    return Promise.resolve(result);
+  }
 }
diff --git a/jslib/common/src/importers/passwordAgentCsvImporter.ts b/jslib/common/src/importers/passwordAgentCsvImporter.ts
index b505c633..9b673c3c 100644
--- a/jslib/common/src/importers/passwordAgentCsvImporter.ts
+++ b/jslib/common/src/importers/passwordAgentCsvImporter.ts
@@ -1,52 +1,52 @@
-import { BaseImporter } from './baseImporter';
-import { Importer } from './importer';
+import { BaseImporter } from "./baseImporter";
+import { Importer } from "./importer";
 
-import { ImportResult } from '../models/domain/importResult';
+import { ImportResult } from "../models/domain/importResult";
 
 export class PasswordAgentCsvImporter extends BaseImporter implements Importer {
-    parse(data: string): Promise<ImportResult> {
-        const result = new ImportResult();
-        const results = this.parseCsv(data, false);
-        if (results == null) {
-            result.success = false;
-            return Promise.resolve(result);
-        }
-
-        let newVersion = true;
-        results.forEach(value => {
-            if (value.length !== 5 && value.length < 9) {
-                return;
-            }
-            const altFormat = value.length === 10 && value[0] === '0';
-            const cipher = this.initLoginCipher();
-            cipher.name = this.getValueOrDefault(value[altFormat ? 1 : 0], '--');
-            cipher.login.username = this.getValueOrDefault(value[altFormat ? 2 : 1]);
-            cipher.login.password = this.getValueOrDefault(value[altFormat ? 3 : 2]);
-            if (value.length === 5) {
-                newVersion = false;
-                cipher.notes = this.getValueOrDefault(value[4]);
-                cipher.login.uris = this.makeUriArray(value[3]);
-            } else {
-                const folder = this.getValueOrDefault(value[altFormat ? 9 : 8], '(None)');
-                let folderName = folder !== '(None)' ? folder.split('\\').join('/') : null;
-                if (folderName != null) {
-                    folderName = folder.split(' > ').join('/');
-                    folderName = folder.split('>').join('/');
-                }
-                this.processFolder(result, folderName);
-                cipher.notes = this.getValueOrDefault(value[altFormat ? 5 : 3]);
-                cipher.login.uris = this.makeUriArray(value[4]);
-            }
-            this.convertToNoteIfNeeded(cipher);
-            this.cleanupCipher(cipher);
-            result.ciphers.push(cipher);
-        });
+  parse(data: string): Promise<ImportResult> {
+    const result = new ImportResult();
+    const results = this.parseCsv(data, false);
+    if (results == null) {
+      result.success = false;
+      return Promise.resolve(result);
+    }
 
-        if (newVersion && this.organization) {
-            this.moveFoldersToCollections(result);
+    let newVersion = true;
+    results.forEach((value) => {
+      if (value.length !== 5 && value.length < 9) {
+        return;
+      }
+      const altFormat = value.length === 10 && value[0] === "0";
+      const cipher = this.initLoginCipher();
+      cipher.name = this.getValueOrDefault(value[altFormat ? 1 : 0], "--");
+      cipher.login.username = this.getValueOrDefault(value[altFormat ? 2 : 1]);
+      cipher.login.password = this.getValueOrDefault(value[altFormat ? 3 : 2]);
+      if (value.length === 5) {
+        newVersion = false;
+        cipher.notes = this.getValueOrDefault(value[4]);
+        cipher.login.uris = this.makeUriArray(value[3]);
+      } else {
+        const folder = this.getValueOrDefault(value[altFormat ? 9 : 8], "(None)");
+        let folderName = folder !== "(None)" ? folder.split("\\").join("/") : null;
+        if (folderName != null) {
+          folderName = folder.split(" > ").join("/");
+          folderName = folder.split(">").join("/");
         }
+        this.processFolder(result, folderName);
+        cipher.notes = this.getValueOrDefault(value[altFormat ? 5 : 3]);
+        cipher.login.uris = this.makeUriArray(value[4]);
+      }
+      this.convertToNoteIfNeeded(cipher);
+      this.cleanupCipher(cipher);
+      result.ciphers.push(cipher);
+    });
 
-        result.success = true;
-        return Promise.resolve(result);
+    if (newVersion && this.organization) {
+      this.moveFoldersToCollections(result);
     }
+
+    result.success = true;
+    return Promise.resolve(result);
+  }
 }
diff --git a/jslib/common/src/importers/passwordBossJsonImporter.ts b/jslib/common/src/importers/passwordBossJsonImporter.ts
index 88a70ee6..73f74050 100644
--- a/jslib/common/src/importers/passwordBossJsonImporter.ts
+++ b/jslib/common/src/importers/passwordBossJsonImporter.ts
@@ -1,123 +1,131 @@
-import { BaseImporter } from './baseImporter';
-import { Importer } from './importer';
+import { BaseImporter } from "./baseImporter";
+import { Importer } from "./importer";
 
-import { ImportResult } from '../models/domain/importResult';
+import { ImportResult } from "../models/domain/importResult";
 
-import { CardView } from '../models/view/cardView';
-import { FolderView } from '../models/view/folderView';
+import { CardView } from "../models/view/cardView";
+import { FolderView } from "../models/view/folderView";
 
-import { CipherType } from '../enums/cipherType';
+import { CipherType } from "../enums/cipherType";
 
 export class PasswordBossJsonImporter extends BaseImporter implements Importer {
-    parse(data: string): Promise<ImportResult> {
-        const result = new ImportResult();
-        const results = JSON.parse(data);
-        if (results == null || results.items == null) {
-            result.success = false;
-            return Promise.resolve(result);
-        }
-
-        const foldersMap = new Map<string, string>();
-        results.folders.forEach((value: any) => {
-            foldersMap.set(value.id, value.name);
-        });
-        const foldersIndexMap = new Map<string, number>();
-        foldersMap.forEach((val, key) => {
-            foldersIndexMap.set(key, result.folders.length);
-            const f = new FolderView();
-            f.name = val;
-            result.folders.push(f);
-        });
-
-        results.items.forEach((value: any) => {
-            const cipher = this.initLoginCipher();
-            cipher.name = this.getValueOrDefault(value.name, '--');
-            cipher.login.uris = this.makeUriArray(value.login_url);
-
-            if (value.folder != null && foldersIndexMap.has(value.folder)) {
-                result.folderRelationships.push([result.ciphers.length, foldersIndexMap.get(value.folder)]);
-            }
+  parse(data: string): Promise<ImportResult> {
+    const result = new ImportResult();
+    const results = JSON.parse(data);
+    if (results == null || results.items == null) {
+      result.success = false;
+      return Promise.resolve(result);
+    }
 
-            if (value.identifiers == null) {
-                return;
-            }
+    const foldersMap = new Map<string, string>();
+    results.folders.forEach((value: any) => {
+      foldersMap.set(value.id, value.name);
+    });
+    const foldersIndexMap = new Map<string, number>();
+    foldersMap.forEach((val, key) => {
+      foldersIndexMap.set(key, result.folders.length);
+      const f = new FolderView();
+      f.name = val;
+      result.folders.push(f);
+    });
+
+    results.items.forEach((value: any) => {
+      const cipher = this.initLoginCipher();
+      cipher.name = this.getValueOrDefault(value.name, "--");
+      cipher.login.uris = this.makeUriArray(value.login_url);
+
+      if (value.folder != null && foldersIndexMap.has(value.folder)) {
+        result.folderRelationships.push([result.ciphers.length, foldersIndexMap.get(value.folder)]);
+      }
+
+      if (value.identifiers == null) {
+        return;
+      }
+
+      if (!this.isNullOrWhitespace(value.identifiers.notes)) {
+        cipher.notes = value.identifiers.notes.split("\\r\\n").join("\n").split("\\n").join("\n");
+      }
+
+      if (value.type === "CreditCard") {
+        cipher.card = new CardView();
+        cipher.type = CipherType.Card;
+      }
+
+      for (const property in value.identifiers) {
+        if (!value.identifiers.hasOwnProperty(property)) {
+          continue;
+        }
+        const valObj = value.identifiers[property];
+        const val = valObj != null ? valObj.toString() : null;
+        if (
+          this.isNullOrWhitespace(val) ||
+          property === "notes" ||
+          property === "ignoreItemInSecurityScore"
+        ) {
+          continue;
+        }
 
-            if (!this.isNullOrWhitespace(value.identifiers.notes)) {
-                cipher.notes = value.identifiers.notes.split('\\r\\n').join('\n').split('\\n').join('\n');
-            }
+        if (property === "custom_fields") {
+          valObj.forEach((cf: any) => {
+            this.processKvp(cipher, cf.name, cf.value);
+          });
+          continue;
+        }
 
-            if (value.type === 'CreditCard') {
-                cipher.card = new CardView();
-                cipher.type = CipherType.Card;
+        if (cipher.type === CipherType.Card) {
+          if (property === "cardNumber") {
+            cipher.card.number = val;
+            cipher.card.brand = this.getCardBrand(val);
+            continue;
+          } else if (property === "nameOnCard") {
+            cipher.card.cardholderName = val;
+            continue;
+          } else if (property === "security_code") {
+            cipher.card.code = val;
+            continue;
+          } else if (property === "expires") {
+            try {
+              const expDate = new Date(val);
+              cipher.card.expYear = expDate.getFullYear().toString();
+              cipher.card.expMonth = (expDate.getMonth() + 1).toString();
+            } catch {
+              // Ignore error
             }
+            continue;
+          } else if (property === "cardType") {
+            continue;
+          }
+        } else {
+          if (
+            (property === "username" || property === "email") &&
+            this.isNullOrWhitespace(cipher.login.username)
+          ) {
+            cipher.login.username = val;
+            continue;
+          } else if (property === "password") {
+            cipher.login.password = val;
+            continue;
+          } else if (property === "totp") {
+            cipher.login.totp = val;
+            continue;
+          } else if (
+            (cipher.login.uris == null || cipher.login.uris.length === 0) &&
+            this.uriFieldNames.indexOf(property) > -1
+          ) {
+            cipher.login.uris = this.makeUriArray(val);
+            continue;
+          }
+        }
 
-            for (const property in value.identifiers) {
-                if (!value.identifiers.hasOwnProperty(property)) {
-                    continue;
-                }
-                const valObj = value.identifiers[property];
-                const val = valObj != null ? valObj.toString() : null;
-                if (this.isNullOrWhitespace(val) || property === 'notes' || property === 'ignoreItemInSecurityScore') {
-                    continue;
-                }
-
-                if (property === 'custom_fields') {
-                    valObj.forEach((cf: any) => {
-                        this.processKvp(cipher, cf.name, cf.value);
-                    });
-                    continue;
-                }
-
-                if (cipher.type === CipherType.Card) {
-                    if (property === 'cardNumber') {
-                        cipher.card.number = val;
-                        cipher.card.brand = this.getCardBrand(val);
-                        continue;
-                    } else if (property === 'nameOnCard') {
-                        cipher.card.cardholderName = val;
-                        continue;
-                    } else if (property === 'security_code') {
-                        cipher.card.code = val;
-                        continue;
-                    } else if (property === 'expires') {
-                        try {
-                            const expDate = new Date(val);
-                            cipher.card.expYear = expDate.getFullYear().toString();
-                            cipher.card.expMonth = (expDate.getMonth() + 1).toString();
-                        } catch {
-                            // Ignore error
-                        }
-                        continue;
-                    } else if (property === 'cardType') {
-                        continue;
-                    }
-                } else {
-                    if ((property === 'username' || property === 'email') &&
-                        this.isNullOrWhitespace(cipher.login.username)) {
-                        cipher.login.username = val;
-                        continue;
-                    } else if (property === 'password') {
-                        cipher.login.password = val;
-                        continue;
-                    } else if (property === 'totp') {
-                        cipher.login.totp = val;
-                        continue;
-                    } else if ((cipher.login.uris == null || cipher.login.uris.length === 0) &&
-                        this.uriFieldNames.indexOf(property) > -1) {
-                        cipher.login.uris = this.makeUriArray(val);
-                        continue;
-                    }
-                }
-
-                this.processKvp(cipher, property, val);
-            }
+        this.processKvp(cipher, property, val);
+      }
 
-            this.convertToNoteIfNeeded(cipher);
-            this.cleanupCipher(cipher);
-            result.ciphers.push(cipher);
-        });
+      this.convertToNoteIfNeeded(cipher);
+      this.cleanupCipher(cipher);
+      result.ciphers.push(cipher);
+    });
 
-        result.success = true;
-        return Promise.resolve(result);
-    }
+    result.success = true;
+    return Promise.resolve(result);
+  }
 }
diff --git a/jslib/common/src/importers/passwordDragonXmlImporter.ts b/jslib/common/src/importers/passwordDragonXmlImporter.ts
index 15110b82..74cbe960 100644
--- a/jslib/common/src/importers/passwordDragonXmlImporter.ts
+++ b/jslib/common/src/importers/passwordDragonXmlImporter.ts
@@ -1,57 +1,63 @@
-import { BaseImporter } from './baseImporter';
-import { Importer } from './importer';
+import { BaseImporter } from "./baseImporter";
+import { Importer } from "./importer";
 
-import { ImportResult } from '../models/domain/importResult';
+import { ImportResult } from "../models/domain/importResult";
 
 export class PasswordDragonXmlImporter extends BaseImporter implements Importer {
-    parse(data: string): Promise<ImportResult> {
-        const result = new ImportResult();
-        const doc = this.parseXml(data);
-        if (doc == null) {
-            result.success = false;
-            return Promise.resolve(result);
-        }
+  parse(data: string): Promise<ImportResult> {
+    const result = new ImportResult();
+    const doc = this.parseXml(data);
+    if (doc == null) {
+      result.success = false;
+      return Promise.resolve(result);
+    }
 
-        const records = doc.querySelectorAll('PasswordManager > record');
-        Array.from(records).forEach(record => {
-            const category = this.querySelectorDirectChild(record, 'Category');
-            const categoryText = category != null && !this.isNullOrWhitespace(category.textContent) &&
-                category.textContent !== 'Unfiled' ? category.textContent : null;
-            this.processFolder(result, categoryText);
-
-            const accountName = this.querySelectorDirectChild(record, 'Account-Name');
-            const userId = this.querySelectorDirectChild(record, 'User-Id');
-            const password = this.querySelectorDirectChild(record, 'Password');
-            const url = this.querySelectorDirectChild(record, 'URL');
-            const notes = this.querySelectorDirectChild(record, 'Notes');
-            const cipher = this.initLoginCipher();
-            cipher.name = accountName != null ? this.getValueOrDefault(accountName.textContent, '--') : '--';
-            cipher.notes = notes != null ? this.getValueOrDefault(notes.textContent) : '';
-            cipher.login.username = userId != null ? this.getValueOrDefault(userId.textContent) : null;
-            cipher.login.password = password != null ? this.getValueOrDefault(password.textContent) : null;
-            cipher.login.uris = url != null ? this.makeUriArray(url.textContent) : null;
-
-            const attributes: string[] = [];
-            for (let i = 1; i <= 10; i++) {
-                attributes.push('Attribute-' + i);
-            }
-
-            this.querySelectorAllDirectChild(record, attributes.join(',')).forEach(attr => {
-                if (this.isNullOrWhitespace(attr.textContent) || attr.textContent === 'null') {
-                    return;
-                }
-                this.processKvp(cipher, attr.tagName, attr.textContent);
-            });
-
-            this.cleanupCipher(cipher);
-            result.ciphers.push(cipher);
-        });
-
-        if (this.organization) {
-            this.moveFoldersToCollections(result);
+    const records = doc.querySelectorAll("PasswordManager > record");
+    Array.from(records).forEach((record) => {
+      const category = this.querySelectorDirectChild(record, "Category");
+      const categoryText =
+        category != null &&
+        !this.isNullOrWhitespace(category.textContent) &&
+        category.textContent !== "Unfiled"
+          ? category.textContent
+          : null;
+      this.processFolder(result, categoryText);
+
+      const accountName = this.querySelectorDirectChild(record, "Account-Name");
+      const userId = this.querySelectorDirectChild(record, "User-Id");
+      const password = this.querySelectorDirectChild(record, "Password");
+      const url = this.querySelectorDirectChild(record, "URL");
+      const notes = this.querySelectorDirectChild(record, "Notes");
+      const cipher = this.initLoginCipher();
+      cipher.name =
+        accountName != null ? this.getValueOrDefault(accountName.textContent, "--") : "--";
+      cipher.notes = notes != null ? this.getValueOrDefault(notes.textContent) : "";
+      cipher.login.username = userId != null ? this.getValueOrDefault(userId.textContent) : null;
+      cipher.login.password =
+        password != null ? this.getValueOrDefault(password.textContent) : null;
+      cipher.login.uris = url != null ? this.makeUriArray(url.textContent) : null;
+
+      const attributes: string[] = [];
+      for (let i = 1; i <= 10; i++) {
+        attributes.push("Attribute-" + i);
+      }
+
+      this.querySelectorAllDirectChild(record, attributes.join(",")).forEach((attr) => {
+        if (this.isNullOrWhitespace(attr.textContent) || attr.textContent === "null") {
+          return;
         }
+        this.processKvp(cipher, attr.tagName, attr.textContent);
+      });
 
-        result.success = true;
-        return Promise.resolve(result);
+      this.cleanupCipher(cipher);
+      result.ciphers.push(cipher);
+    });
+
+    if (this.organization) {
+      this.moveFoldersToCollections(result);
     }
+
+    result.success = true;
+    return Promise.resolve(result);
+  }
 }
diff --git a/jslib/common/src/importers/passwordSafeXmlImporter.ts b/jslib/common/src/importers/passwordSafeXmlImporter.ts
index e8e60731..55ae93ed 100644
--- a/jslib/common/src/importers/passwordSafeXmlImporter.ts
+++ b/jslib/common/src/importers/passwordSafeXmlImporter.ts
@@ -1,62 +1,69 @@
-import { BaseImporter } from './baseImporter';
-import { Importer } from './importer';
+import { BaseImporter } from "./baseImporter";
+import { Importer } from "./importer";
 
-import { ImportResult } from '../models/domain/importResult';
+import { ImportResult } from "../models/domain/importResult";
 
 export class PasswordSafeXmlImporter extends BaseImporter implements Importer {
-    parse(data: string): Promise<ImportResult> {
-        const result = new ImportResult();
-        const doc = this.parseXml(data);
-        if (doc == null) {
-            result.success = false;
-            return Promise.resolve(result);
-        }
-
-        const passwordSafe = doc.querySelector('passwordsafe');
-        if (passwordSafe == null) {
-            result.errorMessage = 'Missing `passwordsafe` node.';
-            result.success = false;
-            return Promise.resolve(result);
-        }
-
-        const notesDelimiter = passwordSafe.getAttribute('delimiter');
-        const entries = doc.querySelectorAll('passwordsafe > entry');
-        Array.from(entries).forEach(entry => {
-            const group = this.querySelectorDirectChild(entry, 'group');
-            const groupText = group != null && !this.isNullOrWhitespace(group.textContent) ?
-                group.textContent.split('.').join('/') : null;
-            this.processFolder(result, groupText);
-
-            const title = this.querySelectorDirectChild(entry, 'title');
-            const username = this.querySelectorDirectChild(entry, 'username');
-            const email = this.querySelectorDirectChild(entry, 'email');
-            const password = this.querySelectorDirectChild(entry, 'password');
-            const url = this.querySelectorDirectChild(entry, 'url');
-            const notes = this.querySelectorDirectChild(entry, 'notes');
-            const cipher = this.initLoginCipher();
-            cipher.name = title != null ? this.getValueOrDefault(title.textContent, '--') : '--';
-            cipher.notes = notes != null ?
-                this.getValueOrDefault(notes.textContent, '').split(notesDelimiter).join('\n') : null;
-            cipher.login.username = username != null ? this.getValueOrDefault(username.textContent) : null;
-            cipher.login.password = password != null ? this.getValueOrDefault(password.textContent) : null;
-            cipher.login.uris = url != null ? this.makeUriArray(url.textContent) : null;
-
-            if (this.isNullOrWhitespace(cipher.login.username) && email != null) {
-                cipher.login.username = this.getValueOrDefault(email.textContent);
-            } else if (email != null && !this.isNullOrWhitespace(email.textContent)) {
-                cipher.notes = this.isNullOrWhitespace(cipher.notes) ? 'Email: ' + email.textContent
-                    : (cipher.notes + '\n' + 'Email: ' + email.textContent);
-            }
-
-            this.cleanupCipher(cipher);
-            result.ciphers.push(cipher);
-        });
-
-        if (this.organization) {
-            this.moveFoldersToCollections(result);
-        }
-
-        result.success = true;
-        return Promise.resolve(result);
+  parse(data: string): Promise<ImportResult> {
+    const result = new ImportResult();
+    const doc = this.parseXml(data);
+    if (doc == null) {
+      result.success = false;
+      return Promise.resolve(result);
     }
+
+    const passwordSafe = doc.querySelector("passwordsafe");
+    if (passwordSafe == null) {
+      result.errorMessage = "Missing `passwordsafe` node.";
+      result.success = false;
+      return Promise.resolve(result);
+    }
+
+    const notesDelimiter = passwordSafe.getAttribute("delimiter");
+    const entries = doc.querySelectorAll("passwordsafe > entry");
+    Array.from(entries).forEach((entry) => {
+      const group = this.querySelectorDirectChild(entry, "group");
+      const groupText =
+        group != null && !this.isNullOrWhitespace(group.textContent)
+          ? group.textContent.split(".").join("/")
+          : null;
+      this.processFolder(result, groupText);
+
+      const title = this.querySelectorDirectChild(entry, "title");
+      const username = this.querySelectorDirectChild(entry, "username");
+      const email = this.querySelectorDirectChild(entry, "email");
+      const password = this.querySelectorDirectChild(entry, "password");
+      const url = this.querySelectorDirectChild(entry, "url");
+      const notes = this.querySelectorDirectChild(entry, "notes");
+      const cipher = this.initLoginCipher();
+      cipher.name = title != null ? this.getValueOrDefault(title.textContent, "--") : "--";
+      cipher.notes =
+        notes != null
+          ? this.getValueOrDefault(notes.textContent, "").split(notesDelimiter).join("\n")
+          : null;
+      cipher.login.username =
+        username != null ? this.getValueOrDefault(username.textContent) : null;
+      cipher.login.password =
+        password != null ? this.getValueOrDefault(password.textContent) : null;
+      cipher.login.uris = url != null ? this.makeUriArray(url.textContent) : null;
+
+      if (this.isNullOrWhitespace(cipher.login.username) && email != null) {
+        cipher.login.username = this.getValueOrDefault(email.textContent);
+      } else if (email != null && !this.isNullOrWhitespace(email.textContent)) {
+        cipher.notes = this.isNullOrWhitespace(cipher.notes)
+          ? "Email: " + email.textContent
+          : cipher.notes + "\n" + "Email: " + email.textContent;
+      }
+
+      this.cleanupCipher(cipher);
+      result.ciphers.push(cipher);
+    });
+
+    if (this.organization) {
+      this.moveFoldersToCollections(result);
+    }
+
+    result.success = true;
+    return Promise.resolve(result);
+  }
 }
diff --git a/jslib/common/src/importers/passwordWalletTxtImporter.ts b/jslib/common/src/importers/passwordWalletTxtImporter.ts
index 8a279562..eff71957 100644
--- a/jslib/common/src/importers/passwordWalletTxtImporter.ts
+++ b/jslib/common/src/importers/passwordWalletTxtImporter.ts
@@ -1,47 +1,47 @@
-import { BaseImporter } from './baseImporter';
-import { Importer } from './importer';
+import { BaseImporter } from "./baseImporter";
+import { Importer } from "./importer";
 
-import { ImportResult } from '../models/domain/importResult';
+import { ImportResult } from "../models/domain/importResult";
 
 export class PasswordWalletTxtImporter extends BaseImporter implements Importer {
-    parse(data: string): Promise<ImportResult> {
-        const result = new ImportResult();
-        const results = this.parseCsv(data, false);
-        if (results == null) {
-            result.success = false;
-            return Promise.resolve(result);
-        }
-
-        results.forEach(value => {
-            if (value.length < 1) {
-                return;
-            }
-            if (value.length > 5) {
-                this.processFolder(result, value[5]);
-            }
-            const cipher = this.initLoginCipher();
-            cipher.name = this.getValueOrDefault(value[0], '--');
-            if (value.length > 4) {
-                cipher.notes = this.getValueOrDefault(value[4], '').split('¬').join('\n');
-            }
-            if (value.length > 2) {
-                cipher.login.username = this.getValueOrDefault(value[2]);
-            }
-            if (value.length > 3) {
-                cipher.login.password = this.getValueOrDefault(value[3]);
-            }
-            if (value.length > 1) {
-                cipher.login.uris = this.makeUriArray(value[1]);
-            }
-            this.cleanupCipher(cipher);
-            result.ciphers.push(cipher);
-        });
+  parse(data: string): Promise<ImportResult> {
+    const result = new ImportResult();
+    const results = this.parseCsv(data, false);
+    if (results == null) {
+      result.success = false;
+      return Promise.resolve(result);
+    }
 
-        if (this.organization) {
-            this.moveFoldersToCollections(result);
-        }
+    results.forEach((value) => {
+      if (value.length < 1) {
+        return;
+      }
+      if (value.length > 5) {
+        this.processFolder(result, value[5]);
+      }
+      const cipher = this.initLoginCipher();
+      cipher.name = this.getValueOrDefault(value[0], "--");
+      if (value.length > 4) {
+        cipher.notes = this.getValueOrDefault(value[4], "").split("¬").join("\n");
+      }
+      if (value.length > 2) {
+        cipher.login.username = this.getValueOrDefault(value[2]);
+      }
+      if (value.length > 3) {
+        cipher.login.password = this.getValueOrDefault(value[3]);
+      }
+      if (value.length > 1) {
+        cipher.login.uris = this.makeUriArray(value[1]);
+      }
+      this.cleanupCipher(cipher);
+      result.ciphers.push(cipher);
+    });
 
-        result.success = true;
-        return Promise.resolve(result);
+    if (this.organization) {
+      this.moveFoldersToCollections(result);
     }
+
+    result.success = true;
+    return Promise.resolve(result);
+  }
 }
diff --git a/jslib/common/src/importers/rememBearCsvImporter.ts b/jslib/common/src/importers/rememBearCsvImporter.ts
index 2388ea0f..2df49cfa 100644
--- a/jslib/common/src/importers/rememBearCsvImporter.ts
+++ b/jslib/common/src/importers/rememBearCsvImporter.ts
@@ -1,77 +1,77 @@
-import { BaseImporter } from './baseImporter';
-import { Importer } from './importer';
+import { BaseImporter } from "./baseImporter";
+import { Importer } from "./importer";
 
-import { CipherType } from '../enums/cipherType';
+import { CipherType } from "../enums/cipherType";
 
-import { ImportResult } from '../models/domain/importResult';
+import { ImportResult } from "../models/domain/importResult";
 
-import { CardView } from '../models/view/cardView';
+import { CardView } from "../models/view/cardView";
 
 export class RememBearCsvImporter extends BaseImporter implements Importer {
-    parse(data: string): Promise<ImportResult> {
-        const result = new ImportResult();
-        const results = this.parseCsv(data, true);
-        if (results == null) {
-            result.success = false;
-            return Promise.resolve(result);
-        }
-
-        results.forEach(value => {
-            if (value.trash === 'true') {
-                return;
-            }
-            const cipher = this.initLoginCipher();
-            cipher.name = this.getValueOrDefault(value.name);
-            cipher.notes = this.getValueOrDefault(value.notes);
-            if (value.type === 'LoginItem') {
-                cipher.login.uris = this.makeUriArray(value.website);
-                cipher.login.password = this.getValueOrDefault(value.password);
-                cipher.login.username = this.getValueOrDefault(value.username);
-            } else if (value.type === 'CreditCardItem') {
-                cipher.type = CipherType.Card;
-                cipher.card = new CardView();
-                cipher.card.cardholderName = this.getValueOrDefault(value.cardholder);
-                cipher.card.number = this.getValueOrDefault(value.number);
-                cipher.card.brand = this.getCardBrand(cipher.card.number);
-                cipher.card.code = this.getValueOrDefault(value.verification);
+  parse(data: string): Promise<ImportResult> {
+    const result = new ImportResult();
+    const results = this.parseCsv(data, true);
+    if (results == null) {
+      result.success = false;
+      return Promise.resolve(result);
+    }
 
-                try {
-                    const expMonth = this.getValueOrDefault(value.expiryMonth);
-                    if (expMonth != null) {
-                        const expMonthNumber = parseInt(expMonth, null);
-                        if (expMonthNumber != null && expMonthNumber >= 1 && expMonthNumber <= 12) {
-                            cipher.card.expMonth = expMonthNumber.toString();
-                        }
-                    }
-                } catch {
-                    // Ignore error
-                }
-                try {
-                    const expYear = this.getValueOrDefault(value.expiryYear);
-                    if (expYear != null) {
-                        const expYearNumber = parseInt(expYear, null);
-                        if (expYearNumber != null) {
-                            cipher.card.expYear = expYearNumber.toString();
-                        }
-                    }
-                } catch {
-                    // Ignore error
-                }
+    results.forEach((value) => {
+      if (value.trash === "true") {
+        return;
+      }
+      const cipher = this.initLoginCipher();
+      cipher.name = this.getValueOrDefault(value.name);
+      cipher.notes = this.getValueOrDefault(value.notes);
+      if (value.type === "LoginItem") {
+        cipher.login.uris = this.makeUriArray(value.website);
+        cipher.login.password = this.getValueOrDefault(value.password);
+        cipher.login.username = this.getValueOrDefault(value.username);
+      } else if (value.type === "CreditCardItem") {
+        cipher.type = CipherType.Card;
+        cipher.card = new CardView();
+        cipher.card.cardholderName = this.getValueOrDefault(value.cardholder);
+        cipher.card.number = this.getValueOrDefault(value.number);
+        cipher.card.brand = this.getCardBrand(cipher.card.number);
+        cipher.card.code = this.getValueOrDefault(value.verification);
 
-                const pin = this.getValueOrDefault(value.pin);
-                if (pin != null) {
-                    this.processKvp(cipher, 'PIN', pin);
-                }
-                const zip = this.getValueOrDefault(value.zipCode);
-                if (zip != null) {
-                    this.processKvp(cipher, 'Zip Code', zip);
-                }
+        try {
+          const expMonth = this.getValueOrDefault(value.expiryMonth);
+          if (expMonth != null) {
+            const expMonthNumber = parseInt(expMonth, null);
+            if (expMonthNumber != null && expMonthNumber >= 1 && expMonthNumber <= 12) {
+              cipher.card.expMonth = expMonthNumber.toString();
+            }
+          }
+        } catch {
+          // Ignore error
+        }
+        try {
+          const expYear = this.getValueOrDefault(value.expiryYear);
+          if (expYear != null) {
+            const expYearNumber = parseInt(expYear, null);
+            if (expYearNumber != null) {
+              cipher.card.expYear = expYearNumber.toString();
             }
-            this.cleanupCipher(cipher);
-            result.ciphers.push(cipher);
-        });
+          }
+        } catch {
+          // Ignore error
+        }
 
-        result.success = true;
-        return Promise.resolve(result);
-    }
+        const pin = this.getValueOrDefault(value.pin);
+        if (pin != null) {
+          this.processKvp(cipher, "PIN", pin);
+        }
+        const zip = this.getValueOrDefault(value.zipCode);
+        if (zip != null) {
+          this.processKvp(cipher, "Zip Code", zip);
+        }
+      }
+      this.cleanupCipher(cipher);
+      result.ciphers.push(cipher);
+    });
+
+    result.success = true;
+    return Promise.resolve(result);
+  }
 }
diff --git a/jslib/common/src/importers/roboformCsvImporter.ts b/jslib/common/src/importers/roboformCsvImporter.ts
index cb0c0de8..6c90dbfd 100644
--- a/jslib/common/src/importers/roboformCsvImporter.ts
+++ b/jslib/common/src/importers/roboformCsvImporter.ts
@@ -1,63 +1,69 @@
-import { BaseImporter } from './baseImporter';
-import { Importer } from './importer';
+import { BaseImporter } from "./baseImporter";
+import { Importer } from "./importer";
 
-import { ImportResult } from '../models/domain/importResult';
+import { ImportResult } from "../models/domain/importResult";
 
 export class RoboFormCsvImporter extends BaseImporter implements Importer {
-    parse(data: string): Promise<ImportResult> {
-        const result = new ImportResult();
-        const results = this.parseCsv(data, true);
-        if (results == null) {
-            result.success = false;
-            return Promise.resolve(result);
-        }
+  parse(data: string): Promise<ImportResult> {
+    const result = new ImportResult();
+    const results = this.parseCsv(data, true);
+    if (results == null) {
+      result.success = false;
+      return Promise.resolve(result);
+    }
 
-        let i = 1;
-        results.forEach(value => {
-            const folder = !this.isNullOrWhitespace(value.Folder) && value.Folder.startsWith('/') ?
-                value.Folder.replace('/', '') : value.Folder;
-            const folderName = !this.isNullOrWhitespace(folder) ? folder : null;
-            this.processFolder(result, folderName);
-
-            const cipher = this.initLoginCipher();
-            cipher.notes = this.getValueOrDefault(value.Note);
-            cipher.name = this.getValueOrDefault(value.Name, '--');
-            cipher.login.username = this.getValueOrDefault(value.Login);
-            cipher.login.password = this.getValueOrDefault(value.Pwd);
-            cipher.login.uris = this.makeUriArray(value.Url);
-
-            if (!this.isNullOrWhitespace(value.Rf_fields)) {
-                let fields: string[] = [value.Rf_fields];
-                if (value.__parsed_extra != null && value.__parsed_extra.length > 0) {
-                    fields = fields.concat(value.__parsed_extra);
-                }
-                fields.forEach((field: string) => {
-                    const parts = field.split(':');
-                    if (parts.length < 3) {
-                        return;
-                    }
-                    const key = parts[0] === '-no-name-' ? null : parts[0];
-                    const val = parts.length === 4 && parts[2] === 'rck' ? parts[1] : parts[2];
-                    this.processKvp(cipher, key, val);
-                });
-            }
-
-            this.convertToNoteIfNeeded(cipher);
-            this.cleanupCipher(cipher);
-
-            if (i === results.length && cipher.name === '--' && this.isNullOrWhitespace(cipher.login.password)) {
-                return;
-            }
-
-            result.ciphers.push(cipher);
-            i++;
-        });
+    let i = 1;
+    results.forEach((value) => {
+      const folder =
+        !this.isNullOrWhitespace(value.Folder) && value.Folder.startsWith("/")
+          ? value.Folder.replace("/", "")
+          : value.Folder;
+      const folderName = !this.isNullOrWhitespace(folder) ? folder : null;
+      this.processFolder(result, folderName);
 
-        if (this.organization) {
-            this.moveFoldersToCollections(result);
+      const cipher = this.initLoginCipher();
+      cipher.notes = this.getValueOrDefault(value.Note);
+      cipher.name = this.getValueOrDefault(value.Name, "--");
+      cipher.login.username = this.getValueOrDefault(value.Login);
+      cipher.login.password = this.getValueOrDefault(value.Pwd);
+      cipher.login.uris = this.makeUriArray(value.Url);
+
+      if (!this.isNullOrWhitespace(value.Rf_fields)) {
+        let fields: string[] = [value.Rf_fields];
+        if (value.__parsed_extra != null && value.__parsed_extra.length > 0) {
+          fields = fields.concat(value.__parsed_extra);
         }
+        fields.forEach((field: string) => {
+          const parts = field.split(":");
+          if (parts.length < 3) {
+            return;
+          }
+          const key = parts[0] === "-no-name-" ? null : parts[0];
+          const val = parts.length === 4 && parts[2] === "rck" ? parts[1] : parts[2];
+          this.processKvp(cipher, key, val);
+        });
+      }
 
-        result.success = true;
-        return Promise.resolve(result);
+      this.convertToNoteIfNeeded(cipher);
+      this.cleanupCipher(cipher);
+
+      if (
+        i === results.length &&
+        cipher.name === "--" &&
+        this.isNullOrWhitespace(cipher.login.password)
+      ) {
+        return;
+      }
+
+      result.ciphers.push(cipher);
+      i++;
+    });
+
+    if (this.organization) {
+      this.moveFoldersToCollections(result);
     }
+
+    result.success = true;
+    return Promise.resolve(result);
+  }
 }
diff --git a/jslib/common/src/importers/safariCsvImporter.ts b/jslib/common/src/importers/safariCsvImporter.ts
index 64a30b3a..1d32c92a 100644
--- a/jslib/common/src/importers/safariCsvImporter.ts
+++ b/jslib/common/src/importers/safariCsvImporter.ts
@@ -1,29 +1,29 @@
-import { BaseImporter } from './baseImporter';
-import { Importer } from './importer';
+import { BaseImporter } from "./baseImporter";
+import { Importer } from "./importer";
 
-import { ImportResult } from '../models/domain/importResult';
+import { ImportResult } from "../models/domain/importResult";
 
 export class SafariCsvImporter extends BaseImporter implements Importer {
-    parse(data: string): Promise<ImportResult> {
-        const result = new ImportResult();
-        const results = this.parseCsv(data, true);
-        if (results == null) {
-            result.success = false;
-            return Promise.resolve(result);
-        }
+  parse(data: string): Promise<ImportResult> {
+    const result = new ImportResult();
+    const results = this.parseCsv(data, true);
+    if (results == null) {
+      result.success = false;
+      return Promise.resolve(result);
+    }
 
-        results.forEach(value => {
-            const cipher = this.initLoginCipher();
-            cipher.name = this.getValueOrDefault(value.Title, '--');
-            cipher.login.username = this.getValueOrDefault(value.Username);
-            cipher.login.password = this.getValueOrDefault(value.Password);
-            cipher.login.uris = this.makeUriArray(value.Url);
-            cipher.login.totp = this.getValueOrDefault(value.OTPAuth);
-            this.cleanupCipher(cipher);
-            result.ciphers.push(cipher);
-        });
+    results.forEach((value) => {
+      const cipher = this.initLoginCipher();
+      cipher.name = this.getValueOrDefault(value.Title, "--");
+      cipher.login.username = this.getValueOrDefault(value.Username);
+      cipher.login.password = this.getValueOrDefault(value.Password);
+      cipher.login.uris = this.makeUriArray(value.Url);
+      cipher.login.totp = this.getValueOrDefault(value.OTPAuth);
+      this.cleanupCipher(cipher);
+      result.ciphers.push(cipher);
+    });
 
-        result.success = true;
-        return Promise.resolve(result);
-    }
+    result.success = true;
+    return Promise.resolve(result);
+  }
 }
diff --git a/jslib/common/src/importers/safeInCloudXmlImporter.ts b/jslib/common/src/importers/safeInCloudXmlImporter.ts
index 93339a66..82514e24 100644
--- a/jslib/common/src/importers/safeInCloudXmlImporter.ts
+++ b/jslib/common/src/importers/safeInCloudXmlImporter.ts
@@ -1,136 +1,135 @@
-import { BaseImporter } from './baseImporter';
-import { Importer } from './importer';
+import { BaseImporter } from "./baseImporter";
+import { Importer } from "./importer";
 
-import { ImportResult } from '../models/domain/importResult';
+import { ImportResult } from "../models/domain/importResult";
 
-import { FolderView } from '../models/view/folderView';
-import { SecureNoteView } from '../models/view/secureNoteView';
+import { FolderView } from "../models/view/folderView";
+import { SecureNoteView } from "../models/view/secureNoteView";
 
-import { CipherType } from '../enums/cipherType';
-import { SecureNoteType } from '../enums/secureNoteType';
+import { CipherType } from "../enums/cipherType";
+import { SecureNoteType } from "../enums/secureNoteType";
 
-import { FieldType } from '../enums/fieldType';
-import { CipherView } from '../models/view/cipherView';
-import { FieldView } from '../models/view/fieldView';
+import { FieldType } from "../enums/fieldType";
+import { CipherView } from "../models/view/cipherView";
+import { FieldView } from "../models/view/fieldView";
 
 export class SafeInCloudXmlImporter extends BaseImporter implements Importer {
-    parse(data: string): Promise<ImportResult> {
-        const result = new ImportResult();
-        const doc = this.parseXml(data);
-        if (doc == null) {
-            result.success = false;
-            return Promise.resolve(result);
-        }
+  parse(data: string): Promise<ImportResult> {
+    const result = new ImportResult();
+    const doc = this.parseXml(data);
+    if (doc == null) {
+      result.success = false;
+      return Promise.resolve(result);
+    }
 
-        const db = doc.querySelector('database');
-        if (db == null) {
-            result.errorMessage = 'Missing `database` node.';
-            result.success = false;
-            return Promise.resolve(result);
-        }
+    const db = doc.querySelector("database");
+    if (db == null) {
+      result.errorMessage = "Missing `database` node.";
+      result.success = false;
+      return Promise.resolve(result);
+    }
 
-        const foldersMap = new Map<string, number>();
-
-        Array.from(doc.querySelectorAll('database > label')).forEach(labelEl => {
-            const name = labelEl.getAttribute('name');
-            const id = labelEl.getAttribute('id');
-            if (!this.isNullOrWhitespace(name) && !this.isNullOrWhitespace(id)) {
-                foldersMap.set(id, result.folders.length);
-                const folder = new FolderView();
-                folder.name = name;
-                result.folders.push(folder);
-            }
+    const foldersMap = new Map<string, number>();
+
+    Array.from(doc.querySelectorAll("database > label")).forEach((labelEl) => {
+      const name = labelEl.getAttribute("name");
+      const id = labelEl.getAttribute("id");
+      if (!this.isNullOrWhitespace(name) && !this.isNullOrWhitespace(id)) {
+        foldersMap.set(id, result.folders.length);
+        const folder = new FolderView();
+        folder.name = name;
+        result.folders.push(folder);
+      }
+    });
+
+    Array.from(doc.querySelectorAll("database > card")).forEach((cardEl) => {
+      if (cardEl.getAttribute("template") === "true" || cardEl.getAttribute("deleted") === "true") {
+        return;
+      }
+
+      const labelIdEl = this.querySelectorDirectChild(cardEl, "label_id");
+      if (labelIdEl != null) {
+        const labelId = labelIdEl.textContent;
+        if (!this.isNullOrWhitespace(labelId) && foldersMap.has(labelId)) {
+          result.folderRelationships.push([result.ciphers.length, foldersMap.get(labelId)]);
+        }
+      }
+
+      const cipher = this.initLoginCipher();
+      cipher.name = this.getValueOrDefault(cardEl.getAttribute("title"), "--");
+
+      if (cardEl.getAttribute("star") === "true") {
+        cipher.favorite = true;
+      }
+
+      const cardType = cardEl.getAttribute("type");
+      if (cardType === "note") {
+        cipher.type = CipherType.SecureNote;
+        cipher.secureNote = new SecureNoteView();
+        cipher.secureNote.type = SecureNoteType.Generic;
+      } else {
+        Array.from(this.querySelectorAllDirectChild(cardEl, "field")).forEach((fieldEl) => {
+          const text = fieldEl.textContent;
+          if (this.isNullOrWhitespace(text)) {
+            return;
+          }
+          const name = fieldEl.getAttribute("name");
+          const fieldType = this.getValueOrDefault(fieldEl.getAttribute("type"), "").toLowerCase();
+          if (fieldType === "login") {
+            cipher.login.username = text;
+          } else if (fieldType === "password" || fieldType === "secret") {
+            // safeInCloud allows for more than one password. we just insert them here and find the one used as password later
+            this.processKvp(cipher, name, text, FieldType.Hidden);
+          } else if (fieldType === "one_time_password") {
+            cipher.login.totp = text;
+          } else if (fieldType === "notes") {
+            cipher.notes += text + "\n";
+          } else if (fieldType === "weblogin" || fieldType === "website") {
+            cipher.login.uris = this.makeUriArray(text);
+          } else {
+            this.processKvp(cipher, name, text);
+          }
         });
+      }
 
-        Array.from(doc.querySelectorAll('database > card')).forEach(cardEl => {
-            if (cardEl.getAttribute('template') === 'true' || cardEl.getAttribute('deleted') === 'true') {
-                return;
-            }
-
-            const labelIdEl = this.querySelectorDirectChild(cardEl, 'label_id');
-            if (labelIdEl != null) {
-                const labelId = labelIdEl.textContent;
-                if (!this.isNullOrWhitespace(labelId) && foldersMap.has(labelId)) {
-                    result.folderRelationships.push([result.ciphers.length, foldersMap.get(labelId)]);
-                }
-            }
-
-            const cipher = this.initLoginCipher();
-            cipher.name = this.getValueOrDefault(cardEl.getAttribute('title'), '--');
-
-            if (cardEl.getAttribute('star') === 'true') {
-                cipher.favorite = true;
-            }
-
-            const cardType = cardEl.getAttribute('type');
-            if (cardType === 'note') {
-                cipher.type = CipherType.SecureNote;
-                cipher.secureNote = new SecureNoteView();
-                cipher.secureNote.type = SecureNoteType.Generic;
-            } else {
-                Array.from(this.querySelectorAllDirectChild(cardEl, 'field')).forEach(fieldEl => {
-                    const text = fieldEl.textContent;
-                    if (this.isNullOrWhitespace(text)) {
-                        return;
-                    }
-                    const name = fieldEl.getAttribute('name');
-                    const fieldType = this.getValueOrDefault(fieldEl.getAttribute('type'), '').toLowerCase();
-                    if (fieldType === 'login') {
-                        cipher.login.username = text;
-                    } else if (fieldType === 'password' || fieldType === 'secret') {
-                        // safeInCloud allows for more than one password. we just insert them here and find the one used as password later
-                        this.processKvp(cipher, name, text, FieldType.Hidden);
-                    } else if (fieldType === 'one_time_password') {
-                        cipher.login.totp = text;
-                    } else if (fieldType === 'notes') {
-                        cipher.notes += (text + '\n');
-                    } else if (fieldType === 'weblogin' || fieldType === 'website') {
-                        cipher.login.uris = this.makeUriArray(text);
-                    }
-                    else {
-                        this.processKvp(cipher, name, text);
-                    }
-                });
-            }
-
-            Array.from(this.querySelectorAllDirectChild(cardEl, 'notes')).forEach(notesEl => {
-                cipher.notes += (notesEl.textContent + '\n');
-            });
-
-            this.setPassword(cipher);
-            this.cleanupCipher(cipher);
-            result.ciphers.push(cipher);
-        });
+      Array.from(this.querySelectorAllDirectChild(cardEl, "notes")).forEach((notesEl) => {
+        cipher.notes += notesEl.textContent + "\n";
+      });
 
-        if (this.organization) {
-            this.moveFoldersToCollections(result);
-        }
+      this.setPassword(cipher);
+      this.cleanupCipher(cipher);
+      result.ciphers.push(cipher);
+    });
 
-        result.success = true;
-        return Promise.resolve(result);
+    if (this.organization) {
+      this.moveFoldersToCollections(result);
     }
 
-    // Choose a password from all passwords. Take one that has password in its name, or the first one if there is no such entry
-    // if its name is password, we can safely remove it form the fields. otherwise, it would maybe be best to keep it as a hidden field
-    setPassword(cipher: CipherView) {
-        const candidates = cipher.fields.filter(field => field.type === FieldType.Hidden);
-        if (!candidates.length) {
-            return;
-        }
+    result.success = true;
+    return Promise.resolve(result);
+  }
 
-        let choice: FieldView;
-        for (const field of candidates) {
-            if (this.passwordFieldNames.includes(field.name.toLowerCase())) {
-                choice = field;
-                cipher.fields = cipher.fields.filter(f => f !== choice);
-                break;
-            }
-        }
+  // Choose a password from all passwords. Take one that has password in its name, or the first one if there is no such entry
+  // if its name is password, we can safely remove it form the fields. otherwise, it would maybe be best to keep it as a hidden field
+  setPassword(cipher: CipherView) {
+    const candidates = cipher.fields.filter((field) => field.type === FieldType.Hidden);
+    if (!candidates.length) {
+      return;
+    }
 
-        if (!choice) {
-            choice = candidates[0];
-        }
+    let choice: FieldView;
+    for (const field of candidates) {
+      if (this.passwordFieldNames.includes(field.name.toLowerCase())) {
+        choice = field;
+        cipher.fields = cipher.fields.filter((f) => f !== choice);
+        break;
+      }
+    }
 
-        cipher.login.password = choice.value;
+    if (!choice) {
+      choice = candidates[0];
     }
+
+    cipher.login.password = choice.value;
+  }
 }
diff --git a/jslib/common/src/importers/saferpassCsvImport.ts b/jslib/common/src/importers/saferpassCsvImport.ts
index 1273e741..435a1a37 100644
--- a/jslib/common/src/importers/saferpassCsvImport.ts
+++ b/jslib/common/src/importers/saferpassCsvImport.ts
@@ -1,29 +1,29 @@
-import { BaseImporter } from './baseImporter';
-import { Importer } from './importer';
+import { BaseImporter } from "./baseImporter";
+import { Importer } from "./importer";
 
-import { ImportResult } from '../models/domain/importResult';
+import { ImportResult } from "../models/domain/importResult";
 
 export class SaferPassCsvImporter extends BaseImporter implements Importer {
-    parse(data: string): Promise<ImportResult> {
-        const result = new ImportResult();
-        const results = this.parseCsv(data, true);
-        if (results == null) {
-            result.success = false;
-            return Promise.resolve(result);
-        }
+  parse(data: string): Promise<ImportResult> {
+    const result = new ImportResult();
+    const results = this.parseCsv(data, true);
+    if (results == null) {
+      result.success = false;
+      return Promise.resolve(result);
+    }
 
-        results.forEach(value => {
-            const cipher = this.initLoginCipher();
-            cipher.name = this.getValueOrDefault(this.nameFromUrl(value.url), '--');
-            cipher.notes = this.getValueOrDefault(value.notes);
-            cipher.login.username = this.getValueOrDefault(value.username);
-            cipher.login.password = this.getValueOrDefault(value.password);
-            cipher.login.uris = this.makeUriArray(value.url);
-            this.cleanupCipher(cipher);
-            result.ciphers.push(cipher);
-        });
+    results.forEach((value) => {
+      const cipher = this.initLoginCipher();
+      cipher.name = this.getValueOrDefault(this.nameFromUrl(value.url), "--");
+      cipher.notes = this.getValueOrDefault(value.notes);
+      cipher.login.username = this.getValueOrDefault(value.username);
+      cipher.login.password = this.getValueOrDefault(value.password);
+      cipher.login.uris = this.makeUriArray(value.url);
+      this.cleanupCipher(cipher);
+      result.ciphers.push(cipher);
+    });
 
-        result.success = true;
-        return Promise.resolve(result);
-    }
+    result.success = true;
+    return Promise.resolve(result);
+  }
 }
diff --git a/jslib/common/src/importers/secureSafeCsvImporter.ts b/jslib/common/src/importers/secureSafeCsvImporter.ts
index fc15efec..540177a0 100644
--- a/jslib/common/src/importers/secureSafeCsvImporter.ts
+++ b/jslib/common/src/importers/secureSafeCsvImporter.ts
@@ -1,29 +1,29 @@
-import { BaseImporter } from './baseImporter';
-import { Importer } from './importer';
+import { BaseImporter } from "./baseImporter";
+import { Importer } from "./importer";
 
-import { ImportResult } from '../models/domain/importResult';
+import { ImportResult } from "../models/domain/importResult";
 
 export class SecureSafeCsvImporter extends BaseImporter implements Importer {
-    parse(data: string): Promise<ImportResult> {
-        const result = new ImportResult();
-        const results = this.parseCsv(data, true);
-        if (results == null) {
-            result.success = false;
-            return Promise.resolve(result);
-        }
+  parse(data: string): Promise<ImportResult> {
+    const result = new ImportResult();
+    const results = this.parseCsv(data, true);
+    if (results == null) {
+      result.success = false;
+      return Promise.resolve(result);
+    }
 
-        results.forEach(value => {
-            const cipher = this.initLoginCipher();
-            cipher.name = this.getValueOrDefault(value.Title);
-            cipher.notes = this.getValueOrDefault(value.Comment);
-            cipher.login.uris = this.makeUriArray(value.Url);
-            cipher.login.password = this.getValueOrDefault(value.Password);
-            cipher.login.username = this.getValueOrDefault(value.Username);
-            this.cleanupCipher(cipher);
-            result.ciphers.push(cipher);
-        });
+    results.forEach((value) => {
+      const cipher = this.initLoginCipher();
+      cipher.name = this.getValueOrDefault(value.Title);
+      cipher.notes = this.getValueOrDefault(value.Comment);
+      cipher.login.uris = this.makeUriArray(value.Url);
+      cipher.login.password = this.getValueOrDefault(value.Password);
+      cipher.login.username = this.getValueOrDefault(value.Username);
+      this.cleanupCipher(cipher);
+      result.ciphers.push(cipher);
+    });
 
-        result.success = true;
-        return Promise.resolve(result);
-    }
+    result.success = true;
+    return Promise.resolve(result);
+  }
 }
diff --git a/jslib/common/src/importers/splashIdCsvImporter.ts b/jslib/common/src/importers/splashIdCsvImporter.ts
index 4e895d55..b38380a9 100644
--- a/jslib/common/src/importers/splashIdCsvImporter.ts
+++ b/jslib/common/src/importers/splashIdCsvImporter.ts
@@ -1,57 +1,57 @@
-import { BaseImporter } from './baseImporter';
-import { Importer } from './importer';
+import { BaseImporter } from "./baseImporter";
+import { Importer } from "./importer";
 
-import { ImportResult } from '../models/domain/importResult';
-import { CipherView } from '../models/view/cipherView';
+import { ImportResult } from "../models/domain/importResult";
+import { CipherView } from "../models/view/cipherView";
 
 export class SplashIdCsvImporter extends BaseImporter implements Importer {
-    parse(data: string): Promise<ImportResult> {
-        const result = new ImportResult();
-        const results = this.parseCsv(data, false);
-        if (results == null) {
-            result.success = false;
-            return Promise.resolve(result);
-        }
-
-        results.forEach(value => {
-            if (value.length < 3) {
-                return;
-            }
-
-            this.processFolder(result, this.getValueOrDefault(value[value.length - 1]));
-            const cipher = this.initLoginCipher();
-            cipher.notes = this.getValueOrDefault(value[value.length - 2], '');
-            cipher.name = this.getValueOrDefault(value[1], '--');
-
-            if (value[0] === 'Web Logins' || value[0] === 'Servers' || value[0] === 'Email Accounts') {
-                cipher.login.username = this.getValueOrDefault(value[2]);
-                cipher.login.password = this.getValueOrDefault(value[3]);
-                cipher.login.uris = this.makeUriArray(value[4]);
-                this.parseFieldsToNotes(cipher, 5, value);
-            } else {
-                this.parseFieldsToNotes(cipher, 2, value);
-            }
-
-            this.convertToNoteIfNeeded(cipher);
-            this.cleanupCipher(cipher);
-            result.ciphers.push(cipher);
-        });
-
-        if (this.organization) {
-            this.moveFoldersToCollections(result);
-        }
-
-        result.success = true;
-        return Promise.resolve(result);
+  parse(data: string): Promise<ImportResult> {
+    const result = new ImportResult();
+    const results = this.parseCsv(data, false);
+    if (results == null) {
+      result.success = false;
+      return Promise.resolve(result);
     }
 
-    private parseFieldsToNotes(cipher: CipherView, startIndex: number, value: any) {
-        // last 3 rows do not get parsed
-        for (let i = startIndex; i < value.length - 3; i++) {
-            if (this.isNullOrWhitespace(value[i])) {
-                continue;
-            }
-            cipher.notes += (value[i] + '\n');
-        }
+    results.forEach((value) => {
+      if (value.length < 3) {
+        return;
+      }
+
+      this.processFolder(result, this.getValueOrDefault(value[value.length - 1]));
+      const cipher = this.initLoginCipher();
+      cipher.notes = this.getValueOrDefault(value[value.length - 2], "");
+      cipher.name = this.getValueOrDefault(value[1], "--");
+
+      if (value[0] === "Web Logins" || value[0] === "Servers" || value[0] === "Email Accounts") {
+        cipher.login.username = this.getValueOrDefault(value[2]);
+        cipher.login.password = this.getValueOrDefault(value[3]);
+        cipher.login.uris = this.makeUriArray(value[4]);
+        this.parseFieldsToNotes(cipher, 5, value);
+      } else {
+        this.parseFieldsToNotes(cipher, 2, value);
+      }
+
+      this.convertToNoteIfNeeded(cipher);
+      this.cleanupCipher(cipher);
+      result.ciphers.push(cipher);
+    });
+
+    if (this.organization) {
+      this.moveFoldersToCollections(result);
     }
+
+    result.success = true;
+    return Promise.resolve(result);
+  }
+
+  private parseFieldsToNotes(cipher: CipherView, startIndex: number, value: any) {
+    // last 3 rows do not get parsed
+    for (let i = startIndex; i < value.length - 3; i++) {
+      if (this.isNullOrWhitespace(value[i])) {
+        continue;
+      }
+      cipher.notes += value[i] + "\n";
+    }
+  }
 }
diff --git a/jslib/common/src/importers/stickyPasswordXmlImporter.ts b/jslib/common/src/importers/stickyPasswordXmlImporter.ts
index 313ab1fc..1bfba5b6 100644
--- a/jslib/common/src/importers/stickyPasswordXmlImporter.ts
+++ b/jslib/common/src/importers/stickyPasswordXmlImporter.ts
@@ -1,79 +1,83 @@
-import { BaseImporter } from './baseImporter';
-import { Importer } from './importer';
+import { BaseImporter } from "./baseImporter";
+import { Importer } from "./importer";
 
-import { ImportResult } from '../models/domain/importResult';
+import { ImportResult } from "../models/domain/importResult";
 
 export class StickyPasswordXmlImporter extends BaseImporter implements Importer {
-    parse(data: string): Promise<ImportResult> {
-        const result = new ImportResult();
-        const doc = this.parseXml(data);
-        if (doc == null) {
-            result.success = false;
-            return Promise.resolve(result);
-        }
-
-        const loginNodes = doc.querySelectorAll('root > Database > Logins > Login');
-        Array.from(loginNodes).forEach(loginNode => {
-            const accountId = loginNode.getAttribute('ID');
-            if (this.isNullOrWhitespace(accountId)) {
-                return;
-            }
+  parse(data: string): Promise<ImportResult> {
+    const result = new ImportResult();
+    const doc = this.parseXml(data);
+    if (doc == null) {
+      result.success = false;
+      return Promise.resolve(result);
+    }
 
-            const usernameText = loginNode.getAttribute('Name');
-            const passwordText = loginNode.getAttribute('Password');
-            let titleText: string = null;
-            let linkText: string = null;
-            let notesText: string = null;
-            let groupId: string = null;
-            let groupText: string = null;
+    const loginNodes = doc.querySelectorAll("root > Database > Logins > Login");
+    Array.from(loginNodes).forEach((loginNode) => {
+      const accountId = loginNode.getAttribute("ID");
+      if (this.isNullOrWhitespace(accountId)) {
+        return;
+      }
 
-            const accountLogin = doc.querySelector('root > Database > Accounts > Account > ' +
-                'LoginLinks > Login[SourceLoginID="' + accountId + '"]');
-            if (accountLogin != null) {
-                const account = accountLogin.parentElement.parentElement;
-                if (account != null) {
-                    titleText = account.getAttribute('Name');
-                    linkText = account.getAttribute('Link');
-                    groupId = account.getAttribute('ParentID');
-                    notesText = account.getAttribute('Comments');
-                    if (!this.isNullOrWhitespace(notesText)) {
-                        notesText = notesText.split('/n').join('\n');
-                    }
-                }
-            }
+      const usernameText = loginNode.getAttribute("Name");
+      const passwordText = loginNode.getAttribute("Password");
+      let titleText: string = null;
+      let linkText: string = null;
+      let notesText: string = null;
+      let groupId: string = null;
+      let groupText: string = null;
 
-            if (!this.isNullOrWhitespace(groupId)) {
-                groupText = this.buildGroupText(doc, groupId, '');
-                this.processFolder(result, groupText);
-            }
+      const accountLogin = doc.querySelector(
+        "root > Database > Accounts > Account > " +
+          'LoginLinks > Login[SourceLoginID="' +
+          accountId +
+          '"]'
+      );
+      if (accountLogin != null) {
+        const account = accountLogin.parentElement.parentElement;
+        if (account != null) {
+          titleText = account.getAttribute("Name");
+          linkText = account.getAttribute("Link");
+          groupId = account.getAttribute("ParentID");
+          notesText = account.getAttribute("Comments");
+          if (!this.isNullOrWhitespace(notesText)) {
+            notesText = notesText.split("/n").join("\n");
+          }
+        }
+      }
 
-            const cipher = this.initLoginCipher();
-            cipher.name = this.getValueOrDefault(titleText, '--');
-            cipher.notes = this.getValueOrDefault(notesText);
-            cipher.login.username = this.getValueOrDefault(usernameText);
-            cipher.login.password = this.getValueOrDefault(passwordText);
-            cipher.login.uris = this.makeUriArray(linkText);
-            this.cleanupCipher(cipher);
-            result.ciphers.push(cipher);
-        });
+      if (!this.isNullOrWhitespace(groupId)) {
+        groupText = this.buildGroupText(doc, groupId, "");
+        this.processFolder(result, groupText);
+      }
 
-        if (this.organization) {
-            this.moveFoldersToCollections(result);
-        }
+      const cipher = this.initLoginCipher();
+      cipher.name = this.getValueOrDefault(titleText, "--");
+      cipher.notes = this.getValueOrDefault(notesText);
+      cipher.login.username = this.getValueOrDefault(usernameText);
+      cipher.login.password = this.getValueOrDefault(passwordText);
+      cipher.login.uris = this.makeUriArray(linkText);
+      this.cleanupCipher(cipher);
+      result.ciphers.push(cipher);
+    });
 
-        result.success = true;
-        return Promise.resolve(result);
+    if (this.organization) {
+      this.moveFoldersToCollections(result);
     }
 
-    buildGroupText(doc: Document, groupId: string, groupText: string): string {
-        const group = doc.querySelector('root > Database > Groups > Group[ID="' + groupId + '"]');
-        if (group == null) {
-            return groupText;
-        }
-        if (!this.isNullOrWhitespace(groupText)) {
-            groupText = '/' + groupText;
-        }
-        groupText = group.getAttribute('Name') + groupText;
-        return this.buildGroupText(doc, group.getAttribute('ParentID'), groupText);
+    result.success = true;
+    return Promise.resolve(result);
+  }
+
+  buildGroupText(doc: Document, groupId: string, groupText: string): string {
+    const group = doc.querySelector('root > Database > Groups > Group[ID="' + groupId + '"]');
+    if (group == null) {
+      return groupText;
+    }
+    if (!this.isNullOrWhitespace(groupText)) {
+      groupText = "/" + groupText;
     }
+    groupText = group.getAttribute("Name") + groupText;
+    return this.buildGroupText(doc, group.getAttribute("ParentID"), groupText);
+  }
 }
diff --git a/jslib/common/src/importers/truekeyCsvImporter.ts b/jslib/common/src/importers/truekeyCsvImporter.ts
index aa004b67..622ef89c 100644
--- a/jslib/common/src/importers/truekeyCsvImporter.ts
+++ b/jslib/common/src/importers/truekeyCsvImporter.ts
@@ -1,76 +1,89 @@
-import { BaseImporter } from './baseImporter';
-import { Importer } from './importer';
+import { BaseImporter } from "./baseImporter";
+import { Importer } from "./importer";
 
-import { ImportResult } from '../models/domain/importResult';
+import { ImportResult } from "../models/domain/importResult";
 
-import { CardView } from '../models/view/cardView';
-import { SecureNoteView } from '../models/view/secureNoteView';
+import { CardView } from "../models/view/cardView";
+import { SecureNoteView } from "../models/view/secureNoteView";
 
-import { CipherType } from '../enums/cipherType';
-import { SecureNoteType } from '../enums/secureNoteType';
+import { CipherType } from "../enums/cipherType";
+import { SecureNoteType } from "../enums/secureNoteType";
 
-const PropertiesToIgnore = ['kind', 'autologin', 'favorite', 'hexcolor', 'protectedwithpassword', 'subdomainonly',
-    'type', 'tk_export_version', 'note', 'title', 'document_content',
+const PropertiesToIgnore = [
+  "kind",
+  "autologin",
+  "favorite",
+  "hexcolor",
+  "protectedwithpassword",
+  "subdomainonly",
+  "type",
+  "tk_export_version",
+  "note",
+  "title",
+  "document_content",
 ];
 
 export class TrueKeyCsvImporter extends BaseImporter implements Importer {
-    parse(data: string): Promise<ImportResult> {
-        const result = new ImportResult();
-        const results = this.parseCsv(data, true);
-        if (results == null) {
-            result.success = false;
-            return Promise.resolve(result);
-        }
+  parse(data: string): Promise<ImportResult> {
+    const result = new ImportResult();
+    const results = this.parseCsv(data, true);
+    if (results == null) {
+      result.success = false;
+      return Promise.resolve(result);
+    }
 
-        results.forEach(value => {
-            const cipher = this.initLoginCipher();
-            cipher.favorite = this.getValueOrDefault(value.favorite, '').toLowerCase() === 'true';
-            cipher.name = this.getValueOrDefault(value.name, '--');
-            cipher.notes = this.getValueOrDefault(value.memo, '');
-            cipher.login.username = this.getValueOrDefault(value.login);
-            cipher.login.password = this.getValueOrDefault(value.password);
-            cipher.login.uris = this.makeUriArray(value.url);
+    results.forEach((value) => {
+      const cipher = this.initLoginCipher();
+      cipher.favorite = this.getValueOrDefault(value.favorite, "").toLowerCase() === "true";
+      cipher.name = this.getValueOrDefault(value.name, "--");
+      cipher.notes = this.getValueOrDefault(value.memo, "");
+      cipher.login.username = this.getValueOrDefault(value.login);
+      cipher.login.password = this.getValueOrDefault(value.password);
+      cipher.login.uris = this.makeUriArray(value.url);
 
-            if (value.kind !== 'login') {
-                cipher.name = this.getValueOrDefault(value.title, '--');
-                cipher.notes = this.getValueOrDefault(value.note, '');
-            }
+      if (value.kind !== "login") {
+        cipher.name = this.getValueOrDefault(value.title, "--");
+        cipher.notes = this.getValueOrDefault(value.note, "");
+      }
 
-            if (value.kind === 'cc') {
-                cipher.type = CipherType.Card;
-                cipher.card = new CardView();
-                cipher.card.cardholderName = this.getValueOrDefault(value.cardholder);
-                cipher.card.number = this.getValueOrDefault(value.number);
-                cipher.card.brand = this.getCardBrand(cipher.card.number);
-                if (!this.isNullOrWhitespace(value.expiryDate)) {
-                    try {
-                        const expDate = new Date(value.expiryDate);
-                        cipher.card.expYear = expDate.getFullYear().toString();
-                        cipher.card.expMonth = (expDate.getMonth() + 1).toString();
-                    } catch {
-                        // Ignore error
-                    }
-                }
-            } else if (value.kind !== 'login') {
-                cipher.type = CipherType.SecureNote;
-                cipher.secureNote = new SecureNoteView();
-                cipher.secureNote.type = SecureNoteType.Generic;
-                if (!this.isNullOrWhitespace(cipher.notes)) {
-                    cipher.notes = this.getValueOrDefault(value.document_content, '');
-                }
-                for (const property in value) {
-                    if (value.hasOwnProperty(property) && PropertiesToIgnore.indexOf(property.toLowerCase()) < 0 &&
-                        !this.isNullOrWhitespace(value[property])) {
-                        this.processKvp(cipher, property, value[property]);
-                    }
-                }
-            }
+      if (value.kind === "cc") {
+        cipher.type = CipherType.Card;
+        cipher.card = new CardView();
+        cipher.card.cardholderName = this.getValueOrDefault(value.cardholder);
+        cipher.card.number = this.getValueOrDefault(value.number);
+        cipher.card.brand = this.getCardBrand(cipher.card.number);
+        if (!this.isNullOrWhitespace(value.expiryDate)) {
+          try {
+            const expDate = new Date(value.expiryDate);
+            cipher.card.expYear = expDate.getFullYear().toString();
+            cipher.card.expMonth = (expDate.getMonth() + 1).toString();
+          } catch {
+            // Ignore error
+          }
+        }
+      } else if (value.kind !== "login") {
+        cipher.type = CipherType.SecureNote;
+        cipher.secureNote = new SecureNoteView();
+        cipher.secureNote.type = SecureNoteType.Generic;
+        if (!this.isNullOrWhitespace(cipher.notes)) {
+          cipher.notes = this.getValueOrDefault(value.document_content, "");
+        }
+        for (const property in value) {
+          if (
+            value.hasOwnProperty(property) &&
+            PropertiesToIgnore.indexOf(property.toLowerCase()) < 0 &&
+            !this.isNullOrWhitespace(value[property])
+          ) {
+            this.processKvp(cipher, property, value[property]);
+          }
+        }
+      }
 
-            this.cleanupCipher(cipher);
-            result.ciphers.push(cipher);
-        });
+      this.cleanupCipher(cipher);
+      result.ciphers.push(cipher);
+    });
 
-        result.success = true;
-        return Promise.resolve(result);
-    }
+    result.success = true;
+    return Promise.resolve(result);
+  }
 }
diff --git a/jslib/common/src/importers/upmCsvImporter.ts b/jslib/common/src/importers/upmCsvImporter.ts
index 23e4ece3..a13c5be6 100644
--- a/jslib/common/src/importers/upmCsvImporter.ts
+++ b/jslib/common/src/importers/upmCsvImporter.ts
@@ -1,32 +1,32 @@
-import { BaseImporter } from './baseImporter';
-import { Importer } from './importer';
+import { BaseImporter } from "./baseImporter";
+import { Importer } from "./importer";
 
-import { ImportResult } from '../models/domain/importResult';
+import { ImportResult } from "../models/domain/importResult";
 
 export class UpmCsvImporter extends BaseImporter implements Importer {
-    parse(data: string): Promise<ImportResult> {
-        const result = new ImportResult();
-        const results = this.parseCsv(data, false);
-        if (results == null) {
-            result.success = false;
-            return Promise.resolve(result);
-        }
+  parse(data: string): Promise<ImportResult> {
+    const result = new ImportResult();
+    const results = this.parseCsv(data, false);
+    if (results == null) {
+      result.success = false;
+      return Promise.resolve(result);
+    }
 
-        results.forEach(value => {
-            if (value.length !== 5) {
-                return;
-            }
-            const cipher = this.initLoginCipher();
-            cipher.name = this.getValueOrDefault(value[0], '--');
-            cipher.notes = this.getValueOrDefault(value[4]);
-            cipher.login.username = this.getValueOrDefault(value[1]);
-            cipher.login.password = this.getValueOrDefault(value[2]);
-            cipher.login.uris = this.makeUriArray(value[3]);
-            this.cleanupCipher(cipher);
-            result.ciphers.push(cipher);
-        });
+    results.forEach((value) => {
+      if (value.length !== 5) {
+        return;
+      }
+      const cipher = this.initLoginCipher();
+      cipher.name = this.getValueOrDefault(value[0], "--");
+      cipher.notes = this.getValueOrDefault(value[4]);
+      cipher.login.username = this.getValueOrDefault(value[1]);
+      cipher.login.password = this.getValueOrDefault(value[2]);
+      cipher.login.uris = this.makeUriArray(value[3]);
+      this.cleanupCipher(cipher);
+      result.ciphers.push(cipher);
+    });
 
-        result.success = true;
-        return Promise.resolve(result);
-    }
+    result.success = true;
+    return Promise.resolve(result);
+  }
 }
diff --git a/jslib/common/src/importers/yotiCsvImporter.ts b/jslib/common/src/importers/yotiCsvImporter.ts
index 56a80d5d..fedc1c81 100644
--- a/jslib/common/src/importers/yotiCsvImporter.ts
+++ b/jslib/common/src/importers/yotiCsvImporter.ts
@@ -1,28 +1,28 @@
-import { BaseImporter } from './baseImporter';
-import { Importer } from './importer';
+import { BaseImporter } from "./baseImporter";
+import { Importer } from "./importer";
 
-import { ImportResult } from '../models/domain/importResult';
+import { ImportResult } from "../models/domain/importResult";
 
 export class YotiCsvImporter extends BaseImporter implements Importer {
-    parse(data: string): Promise<ImportResult> {
-        const result = new ImportResult();
-        const results = this.parseCsv(data, true);
-        if (results == null) {
-            result.success = false;
-            return Promise.resolve(result);
-        }
+  parse(data: string): Promise<ImportResult> {
+    const result = new ImportResult();
+    const results = this.parseCsv(data, true);
+    if (results == null) {
+      result.success = false;
+      return Promise.resolve(result);
+    }
 
-        results.forEach(value => {
-            const cipher = this.initLoginCipher();
-            cipher.name = this.getValueOrDefault(value.Name, '--');
-            cipher.login.username = this.getValueOrDefault(value['User name']);
-            cipher.login.password = this.getValueOrDefault(value.Password);
-            cipher.login.uris = this.makeUriArray(value.URL);
-            this.cleanupCipher(cipher);
-            result.ciphers.push(cipher);
-        });
+    results.forEach((value) => {
+      const cipher = this.initLoginCipher();
+      cipher.name = this.getValueOrDefault(value.Name, "--");
+      cipher.login.username = this.getValueOrDefault(value["User name"]);
+      cipher.login.password = this.getValueOrDefault(value.Password);
+      cipher.login.uris = this.makeUriArray(value.URL);
+      this.cleanupCipher(cipher);
+      result.ciphers.push(cipher);
+    });
 
-        result.success = true;
-        return Promise.resolve(result);
-    }
+    result.success = true;
+    return Promise.resolve(result);
+  }
 }
diff --git a/jslib/common/src/importers/zohoVaultCsvImporter.ts b/jslib/common/src/importers/zohoVaultCsvImporter.ts
index 536dc8cc..1a3e009c 100644
--- a/jslib/common/src/importers/zohoVaultCsvImporter.ts
+++ b/jslib/common/src/importers/zohoVaultCsvImporter.ts
@@ -1,68 +1,81 @@
-import { BaseImporter } from './baseImporter';
-import { Importer } from './importer';
+import { BaseImporter } from "./baseImporter";
+import { Importer } from "./importer";
 
-import { ImportResult } from '../models/domain/importResult';
-import { CipherView } from '../models/view/cipherView';
+import { ImportResult } from "../models/domain/importResult";
+import { CipherView } from "../models/view/cipherView";
 
 export class ZohoVaultCsvImporter extends BaseImporter implements Importer {
-    parse(data: string): Promise<ImportResult> {
-        const result = new ImportResult();
-        const results = this.parseCsv(data, true);
-        if (results == null) {
-            result.success = false;
-            return Promise.resolve(result);
-        }
-
-        results.forEach(value => {
-            if (this.isNullOrWhitespace(value['Password Name']) && this.isNullOrWhitespace(value['Secret Name'])) {
-                return;
-            }
-            this.processFolder(result, this.getValueOrDefault(value.ChamberName));
-            const cipher = this.initLoginCipher();
-            cipher.favorite = this.getValueOrDefault(value.Favorite, '0') === '1';
-            cipher.notes = this.getValueOrDefault(value.Notes);
-            cipher.name = this.getValueOrDefault(
-                value['Password Name'], this.getValueOrDefault(value['Secret Name'], '--'));
-            cipher.login.uris = this.makeUriArray(
-                this.getValueOrDefault(value['Password URL'], this.getValueOrDefault(value['Secret URL'])));
-            this.parseData(cipher, value.SecretData);
-            this.parseData(cipher, value.CustomData);
-            this.convertToNoteIfNeeded(cipher);
-            this.cleanupCipher(cipher);
-            result.ciphers.push(cipher);
-        });
+  parse(data: string): Promise<ImportResult> {
+    const result = new ImportResult();
+    const results = this.parseCsv(data, true);
+    if (results == null) {
+      result.success = false;
+      return Promise.resolve(result);
+    }
 
-        if (this.organization) {
-            this.moveFoldersToCollections(result);
-        }
+    results.forEach((value) => {
+      if (
+        this.isNullOrWhitespace(value["Password Name"]) &&
+        this.isNullOrWhitespace(value["Secret Name"])
+      ) {
+        return;
+      }
+      this.processFolder(result, this.getValueOrDefault(value.ChamberName));
+      const cipher = this.initLoginCipher();
+      cipher.favorite = this.getValueOrDefault(value.Favorite, "0") === "1";
+      cipher.notes = this.getValueOrDefault(value.Notes);
+      cipher.name = this.getValueOrDefault(
+        value["Password Name"],
+        this.getValueOrDefault(value["Secret Name"], "--")
+      );
+      cipher.login.uris = this.makeUriArray(
+        this.getValueOrDefault(value["Password URL"], this.getValueOrDefault(value["Secret URL"]))
+      );
+      this.parseData(cipher, value.SecretData);
+      this.parseData(cipher, value.CustomData);
+      this.convertToNoteIfNeeded(cipher);
+      this.cleanupCipher(cipher);
+      result.ciphers.push(cipher);
+    });
 
-        result.success = true;
-        return Promise.resolve(result);
+    if (this.organization) {
+      this.moveFoldersToCollections(result);
     }
 
-    private parseData(cipher: CipherView, data: string) {
-        if (this.isNullOrWhitespace(data)) {
-            return;
-        }
-        const dataLines = this.splitNewLine(data);
-        dataLines.forEach(line => {
-            const delimPosition = line.indexOf(':');
-            if (delimPosition < 0) {
-                return;
-            }
-            const field = line.substring(0, delimPosition);
-            const value = line.length > delimPosition ? line.substring(delimPosition + 1) : null;
-            if (this.isNullOrWhitespace(field) || this.isNullOrWhitespace(value) || field === 'SecretType') {
-                return;
-            }
-            const fieldLower = field.toLowerCase();
-            if (cipher.login.username == null && this.usernameFieldNames.indexOf(fieldLower) > -1) {
-                cipher.login.username = value;
-            } else if (cipher.login.password == null && this.passwordFieldNames.indexOf(fieldLower) > -1) {
-                cipher.login.password = value;
-            } else {
-                this.processKvp(cipher, field, value);
-            }
-        });
+    result.success = true;
+    return Promise.resolve(result);
+  }
+
+  private parseData(cipher: CipherView, data: string) {
+    if (this.isNullOrWhitespace(data)) {
+      return;
     }
+    const dataLines = this.splitNewLine(data);
+    dataLines.forEach((line) => {
+      const delimPosition = line.indexOf(":");
+      if (delimPosition < 0) {
+        return;
+      }
+      const field = line.substring(0, delimPosition);
+      const value = line.length > delimPosition ? line.substring(delimPosition + 1) : null;
+      if (
+        this.isNullOrWhitespace(field) ||
+        this.isNullOrWhitespace(value) ||
+        field === "SecretType"
+      ) {
+        return;
+      }
+      const fieldLower = field.toLowerCase();
+      if (cipher.login.username == null && this.usernameFieldNames.indexOf(fieldLower) > -1) {
+        cipher.login.username = value;
+      } else if (
+        cipher.login.password == null &&
+        this.passwordFieldNames.indexOf(fieldLower) > -1
+      ) {
+        cipher.login.password = value;
+      } else {
+        this.processKvp(cipher, field, value);
+      }
+    });
+  }
 }
diff --git a/jslib/common/src/misc/captcha_iframe.ts b/jslib/common/src/misc/captcha_iframe.ts
index c098288d..b3b1af92 100644
--- a/jslib/common/src/misc/captcha_iframe.ts
+++ b/jslib/common/src/misc/captcha_iframe.ts
@@ -1,22 +1,37 @@
-import { I18nService } from '../abstractions/i18n.service';
-import { IFrameComponent } from './iframe_component';
+import { I18nService } from "../abstractions/i18n.service";
+import { IFrameComponent } from "./iframe_component";
 
 export class CaptchaIFrame extends IFrameComponent {
-    constructor(win: Window, webVaultUrl: string,
-        private i18nService: I18nService, successCallback: (message: string) => any, errorCallback: (message: string) => any,
-        infoCallback: (message: string) => any) {
-        super(win, webVaultUrl, 'captcha-connector.html', 'hcaptcha_iframe', successCallback, errorCallback, (message: string) => {
-            const parsedMessage = JSON.parse(message);
-            if (typeof (parsedMessage) !== 'string') {
-                this.iframe.height = (parsedMessage.height).toString();
-                this.iframe.width = (parsedMessage.width).toString();
-            } else {
-                infoCallback(parsedMessage);
-            }
-        });
-    }
+  constructor(
+    win: Window,
+    webVaultUrl: string,
+    private i18nService: I18nService,
+    successCallback: (message: string) => any,
+    errorCallback: (message: string) => any,
+    infoCallback: (message: string) => any
+  ) {
+    super(
+      win,
+      webVaultUrl,
+      "captcha-connector.html",
+      "hcaptcha_iframe",
+      successCallback,
+      errorCallback,
+      (message: string) => {
+        const parsedMessage = JSON.parse(message);
+        if (typeof parsedMessage !== "string") {
+          this.iframe.height = parsedMessage.height.toString();
+          this.iframe.width = parsedMessage.width.toString();
+        } else {
+          infoCallback(parsedMessage);
+        }
+      }
+    );
+  }
 
-    init(siteKey: string): void {
-        super.initComponent(this.createParams({ siteKey: siteKey, locale: this.i18nService.translationLocale }, 1));
-    }
+  init(siteKey: string): void {
+    super.initComponent(
+      this.createParams({ siteKey: siteKey, locale: this.i18nService.translationLocale }, 1)
+    );
+  }
 }
diff --git a/jslib/common/src/misc/iframe_component.ts b/jslib/common/src/misc/iframe_component.ts
index 0e04dee0..7315e11b 100644
--- a/jslib/common/src/misc/iframe_component.ts
+++ b/jslib/common/src/misc/iframe_component.ts
@@ -1,80 +1,96 @@
-import { I18nService } from '../abstractions/i18n.service';
+import { I18nService } from "../abstractions/i18n.service";
 
 export abstract class IFrameComponent {
-    iframe: HTMLIFrameElement;
-    private connectorLink: HTMLAnchorElement;
-    private parseFunction = this.parseMessage.bind(this);
+  iframe: HTMLIFrameElement;
+  private connectorLink: HTMLAnchorElement;
+  private parseFunction = this.parseMessage.bind(this);
 
-    constructor(private win: Window, protected webVaultUrl: string, private path: string, private iframeId: string,
-        public successCallback?: (message: string) => any,
-        public errorCallback?: (message: string) => any, public infoCallback?: (message: string) => any) {
-        this.connectorLink = win.document.createElement('a');
-    }
+  constructor(
+    private win: Window,
+    protected webVaultUrl: string,
+    private path: string,
+    private iframeId: string,
+    public successCallback?: (message: string) => any,
+    public errorCallback?: (message: string) => any,
+    public infoCallback?: (message: string) => any
+  ) {
+    this.connectorLink = win.document.createElement("a");
+  }
 
-    stop() {
-        this.sendMessage('stop');
-    }
+  stop() {
+    this.sendMessage("stop");
+  }
 
-    start() {
-        this.sendMessage('start');
-    }
+  start() {
+    this.sendMessage("start");
+  }
 
-    sendMessage(message: any) {
-        if (!this.iframe || !this.iframe.src || !this.iframe.contentWindow) {
-            return;
-        }
-
-        this.iframe.contentWindow.postMessage(message, this.iframe.src);
+  sendMessage(message: any) {
+    if (!this.iframe || !this.iframe.src || !this.iframe.contentWindow) {
+      return;
     }
 
-    base64Encode(str: string): string {
-        return btoa(encodeURIComponent(str).replace(/%([0-9A-F]{2})/g, (match, p1) => {
-            return String.fromCharCode(('0x' + p1) as any);
-        }));
-    }
+    this.iframe.contentWindow.postMessage(message, this.iframe.src);
+  }
 
-    cleanup() {
-        this.win.removeEventListener('message', this.parseFunction, false);
-    }
+  base64Encode(str: string): string {
+    return btoa(
+      encodeURIComponent(str).replace(/%([0-9A-F]{2})/g, (match, p1) => {
+        return String.fromCharCode(("0x" + p1) as any);
+      })
+    );
+  }
 
-    protected createParams(data: any, version: number) {
-        return new URLSearchParams({
-            data: this.base64Encode(JSON.stringify(data)),
-            parent: encodeURIComponent(this.win.document.location.href),
-            v: version.toString(),
-        });
-    }
+  cleanup() {
+    this.win.removeEventListener("message", this.parseFunction, false);
+  }
 
-    protected initComponent(params: URLSearchParams): void {
-        this.connectorLink.href = `${this.webVaultUrl}/${this.path}?${params}`;
-        this.iframe = this.win.document.getElementById(this.iframeId) as HTMLIFrameElement;
-        this.iframe.src = this.connectorLink.href;
+  protected createParams(data: any, version: number) {
+    return new URLSearchParams({
+      data: this.base64Encode(JSON.stringify(data)),
+      parent: encodeURIComponent(this.win.document.location.href),
+      v: version.toString(),
+    });
+  }
 
-        this.win.addEventListener('message', this.parseFunction, false);
-    }
+  protected initComponent(params: URLSearchParams): void {
+    this.connectorLink.href = `${this.webVaultUrl}/${this.path}?${params}`;
+    this.iframe = this.win.document.getElementById(this.iframeId) as HTMLIFrameElement;
+    this.iframe.src = this.connectorLink.href;
 
-    private parseMessage(event: MessageEvent) {
-        if (!this.validMessage(event)) {
-            return;
-        }
+    this.win.addEventListener("message", this.parseFunction, false);
+  }
 
-        const parts: string[] = event.data.split('|');
-        if (parts[0] === 'success' && this.successCallback) {
-            this.successCallback(parts[1]);
-        } else if (parts[0] === 'error' && this.errorCallback) {
-            this.errorCallback(parts[1]);
-        } else if (parts[0] === 'info' && this.infoCallback) {
-            this.infoCallback(parts[1]);
-        }
+  private parseMessage(event: MessageEvent) {
+    if (!this.validMessage(event)) {
+      return;
     }
 
-    private validMessage(event: MessageEvent) {
-        if (event.origin == null || event.origin === '' || event.origin !== (this.connectorLink as any).origin ||
-            event.data == null || typeof (event.data) !== 'string') {
-            return false;
-        }
+    const parts: string[] = event.data.split("|");
+    if (parts[0] === "success" && this.successCallback) {
+      this.successCallback(parts[1]);
+    } else if (parts[0] === "error" && this.errorCallback) {
+      this.errorCallback(parts[1]);
+    } else if (parts[0] === "info" && this.infoCallback) {
+      this.infoCallback(parts[1]);
+    }
+  }
 
-        return event.data.indexOf('success|') === 0 || event.data.indexOf('error|') === 0 ||
-            event.data.indexOf('info|') === 0;
+  private validMessage(event: MessageEvent) {
+    if (
+      event.origin == null ||
+      event.origin === "" ||
+      event.origin !== (this.connectorLink as any).origin ||
+      event.data == null ||
+      typeof event.data !== "string"
+    ) {
+      return false;
     }
+
+    return (
+      event.data.indexOf("success|") === 0 ||
+      event.data.indexOf("error|") === 0 ||
+      event.data.indexOf("info|") === 0
+    );
+  }
 }
diff --git a/jslib/common/src/misc/linkedFieldOption.decorator.ts b/jslib/common/src/misc/linkedFieldOption.decorator.ts
index 5bf05275..8f10709c 100644
--- a/jslib/common/src/misc/linkedFieldOption.decorator.ts
+++ b/jslib/common/src/misc/linkedFieldOption.decorator.ts
@@ -1,13 +1,13 @@
-import { ItemView } from '../models/view/itemView';
+import { ItemView } from "../models/view/itemView";
 
-import { LinkedIdType } from '../enums/linkedIdType';
+import { LinkedIdType } from "../enums/linkedIdType";
 
 export class LinkedMetadata {
-    constructor(readonly propertyKey: string, private readonly _i18nKey?: string) { }
+  constructor(readonly propertyKey: string, private readonly _i18nKey?: string) {}
 
-    get i18nKey() {
-        return this._i18nKey ?? this.propertyKey;
-    }
+  get i18nKey() {
+    return this._i18nKey ?? this.propertyKey;
+  }
 }
 
 /**
@@ -18,11 +18,11 @@ export class LinkedMetadata {
  *    of the class property will be used as the i18n key.
  */
 export function linkedFieldOption(id: LinkedIdType, i18nKey?: string) {
-    return (prototype: ItemView, propertyKey: string) => {
-        if (prototype.linkedFieldOptions == null) {
-            prototype.linkedFieldOptions = new Map<LinkedIdType, LinkedMetadata>();
-        }
+  return (prototype: ItemView, propertyKey: string) => {
+    if (prototype.linkedFieldOptions == null) {
+      prototype.linkedFieldOptions = new Map<LinkedIdType, LinkedMetadata>();
+    }
 
-        prototype.linkedFieldOptions.set(id, new LinkedMetadata(propertyKey, i18nKey));
-    };
+    prototype.linkedFieldOptions.set(id, new LinkedMetadata(propertyKey, i18nKey));
+  };
 }
diff --git a/jslib/common/src/misc/nodeUtils.ts b/jslib/common/src/misc/nodeUtils.ts
index d3864fe5..5b5ba27b 100644
--- a/jslib/common/src/misc/nodeUtils.ts
+++ b/jslib/common/src/misc/nodeUtils.ts
@@ -1,34 +1,34 @@
-import * as fs from 'fs';
-import * as path from 'path';
-import * as readline from 'readline';
+import * as fs from "fs";
+import * as path from "path";
+import * as readline from "readline";
 
 export class NodeUtils {
-    static mkdirpSync(targetDir: string, mode = '700', relative = false, relativeDir: string = null) {
-        const initialDir = path.isAbsolute(targetDir) ? path.sep : '';
-        const baseDir = relative ? (relativeDir != null ? relativeDir : __dirname) : '.';
-        targetDir.split(path.sep).reduce((parentDir, childDir) => {
-            const dir = path.resolve(baseDir, parentDir, childDir);
-            if (!fs.existsSync(dir)) {
-                fs.mkdirSync(dir, mode);
-            }
-            return dir;
-        }, initialDir);
-    }
-    static readFirstLine(fileName: string) {
-        return new Promise<string>((resolve, reject) => {
-            const readStream = fs.createReadStream(fileName, {encoding: 'utf8'});
-            const readInterface = readline.createInterface(readStream);
-            readInterface
-                .on('line', line => {
-                    readStream.close();
-                    resolve(line);
-                })
-                .on('error', err => reject(err));
-        });
-    }
+  static mkdirpSync(targetDir: string, mode = "700", relative = false, relativeDir: string = null) {
+    const initialDir = path.isAbsolute(targetDir) ? path.sep : "";
+    const baseDir = relative ? (relativeDir != null ? relativeDir : __dirname) : ".";
+    targetDir.split(path.sep).reduce((parentDir, childDir) => {
+      const dir = path.resolve(baseDir, parentDir, childDir);
+      if (!fs.existsSync(dir)) {
+        fs.mkdirSync(dir, mode);
+      }
+      return dir;
+    }, initialDir);
+  }
+  static readFirstLine(fileName: string) {
+    return new Promise<string>((resolve, reject) => {
+      const readStream = fs.createReadStream(fileName, { encoding: "utf8" });
+      const readInterface = readline.createInterface(readStream);
+      readInterface
+        .on("line", (line) => {
+          readStream.close();
+          resolve(line);
+        })
+        .on("error", (err) => reject(err));
+    });
+  }
 
-    // https://stackoverflow.com/a/31394257
-    static bufferToArrayBuffer(buf: Buffer): ArrayBuffer {
-        return buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);
-    }
+  // https://stackoverflow.com/a/31394257
+  static bufferToArrayBuffer(buf: Buffer): ArrayBuffer {
+    return buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);
+  }
 }
diff --git a/jslib/common/src/misc/sequentialize.ts b/jslib/common/src/misc/sequentialize.ts
index ff8c4856..c2421147 100644
--- a/jslib/common/src/misc/sequentialize.ts
+++ b/jslib/common/src/misc/sequentialize.ts
@@ -9,46 +9,49 @@
  * Read more at https://github.com/bitwarden/jslib/pull/7
  */
 export function sequentialize(cacheKey: (args: any[]) => string) {
-    return (target: any, propertyKey: string | symbol, descriptor: PropertyDescriptor) => {
-        const originalMethod: () => Promise<any> = descriptor.value;
-        const caches = new Map<any, Map<string, Promise<any>>>();
+  return (target: any, propertyKey: string | symbol, descriptor: PropertyDescriptor) => {
+    const originalMethod: () => Promise<any> = descriptor.value;
+    const caches = new Map<any, Map<string, Promise<any>>>();
 
-        const getCache = (obj: any) => {
-            let cache = caches.get(obj);
-            if (cache != null) {
-                return cache;
-            }
-            cache = new Map<string, Promise<any>>();
-            caches.set(obj, cache);
-            return cache;
-        };
-
-        return {
-            value: function(...args: any[]) {
-                const cache = getCache(this);
-                const argsCacheKey = cacheKey(args);
-                let response = cache.get(argsCacheKey);
-                if (response != null) {
-                    return response;
-                }
+    const getCache = (obj: any) => {
+      let cache = caches.get(obj);
+      if (cache != null) {
+        return cache;
+      }
+      cache = new Map<string, Promise<any>>();
+      caches.set(obj, cache);
+      return cache;
+    };
 
-                const onFinally = () => {
-                    cache.delete(argsCacheKey);
-                    if (cache.size === 0) {
-                        caches.delete(this);
-                    }
-                };
-                response = originalMethod.apply(this, args).then((val: any) => {
-                    onFinally();
-                    return val;
-                }).catch((err: any) => {
-                    onFinally();
-                    throw err;
-                });
+    return {
+      value: function (...args: any[]) {
+        const cache = getCache(this);
+        const argsCacheKey = cacheKey(args);
+        let response = cache.get(argsCacheKey);
+        if (response != null) {
+          return response;
+        }
 
-                cache.set(argsCacheKey, response);
-                return response;
-            },
+        const onFinally = () => {
+          cache.delete(argsCacheKey);
+          if (cache.size === 0) {
+            caches.delete(this);
+          }
         };
+        response = originalMethod
+          .apply(this, args)
+          .then((val: any) => {
+            onFinally();
+            return val;
+          })
+          .catch((err: any) => {
+            onFinally();
+            throw err;
+          });
+
+        cache.set(argsCacheKey, response);
+        return response;
+      },
     };
+  };
 }
diff --git a/jslib/common/src/misc/serviceUtils.ts b/jslib/common/src/misc/serviceUtils.ts
index f8cb5257..b6c05092 100644
--- a/jslib/common/src/misc/serviceUtils.ts
+++ b/jslib/common/src/misc/serviceUtils.ts
@@ -1,54 +1,72 @@
-import {
-    ITreeNodeObject,
-    TreeNode,
-} from '../models/domain/treeNode';
+import { ITreeNodeObject, TreeNode } from "../models/domain/treeNode";
 
 export class ServiceUtils {
-    static nestedTraverse(nodeTree: TreeNode<ITreeNodeObject>[], partIndex: number, parts: string[],
-        obj: ITreeNodeObject, parent: ITreeNodeObject, delimiter: string) {
-        if (parts.length <= partIndex) {
-            return;
-        }
+  static nestedTraverse(
+    nodeTree: TreeNode<ITreeNodeObject>[],
+    partIndex: number,
+    parts: string[],
+    obj: ITreeNodeObject,
+    parent: ITreeNodeObject,
+    delimiter: string
+  ) {
+    if (parts.length <= partIndex) {
+      return;
+    }
 
-        const end = partIndex === parts.length - 1;
-        const partName = parts[partIndex];
+    const end = partIndex === parts.length - 1;
+    const partName = parts[partIndex];
 
-        for (let i = 0; i < nodeTree.length; i++) {
-            if (nodeTree[i].node.name !== parts[partIndex]) {
-                continue;
-            }
-            if (end && nodeTree[i].node.id !== obj.id) {
-                // Another node with the same name.
-                nodeTree.push(new TreeNode(obj, partName, parent));
-                return;
-            }
-            ServiceUtils.nestedTraverse(nodeTree[i].children, partIndex + 1, parts,
-                obj, nodeTree[i].node, delimiter);
-            return;
-        }
+    for (let i = 0; i < nodeTree.length; i++) {
+      if (nodeTree[i].node.name !== parts[partIndex]) {
+        continue;
+      }
+      if (end && nodeTree[i].node.id !== obj.id) {
+        // Another node with the same name.
+        nodeTree.push(new TreeNode(obj, partName, parent));
+        return;
+      }
+      ServiceUtils.nestedTraverse(
+        nodeTree[i].children,
+        partIndex + 1,
+        parts,
+        obj,
+        nodeTree[i].node,
+        delimiter
+      );
+      return;
+    }
 
-        if (nodeTree.filter(n => n.node.name === partName).length === 0) {
-            if (end) {
-                nodeTree.push(new TreeNode(obj, partName, parent));
-                return;
-            }
-            const newPartName = parts[partIndex] + delimiter + parts[partIndex + 1];
-            ServiceUtils.nestedTraverse(nodeTree, 0, [newPartName, ...parts.slice(partIndex + 2)],
-                obj, parent, delimiter);
-        }
+    if (nodeTree.filter((n) => n.node.name === partName).length === 0) {
+      if (end) {
+        nodeTree.push(new TreeNode(obj, partName, parent));
+        return;
+      }
+      const newPartName = parts[partIndex] + delimiter + parts[partIndex + 1];
+      ServiceUtils.nestedTraverse(
+        nodeTree,
+        0,
+        [newPartName, ...parts.slice(partIndex + 2)],
+        obj,
+        parent,
+        delimiter
+      );
     }
+  }
 
-    static getTreeNodeObject(nodeTree: TreeNode<ITreeNodeObject>[], id: string): TreeNode<ITreeNodeObject> {
-        for (let i = 0; i < nodeTree.length; i++) {
-            if (nodeTree[i].node.id === id) {
-                return nodeTree[i];
-            } else if (nodeTree[i].children != null) {
-                const node = ServiceUtils.getTreeNodeObject(nodeTree[i].children, id);
-                if (node !== null) {
-                    return node;
-                }
-            }
+  static getTreeNodeObject(
+    nodeTree: TreeNode<ITreeNodeObject>[],
+    id: string
+  ): TreeNode<ITreeNodeObject> {
+    for (let i = 0; i < nodeTree.length; i++) {
+      if (nodeTree[i].node.id === id) {
+        return nodeTree[i];
+      } else if (nodeTree[i].children != null) {
+        const node = ServiceUtils.getTreeNodeObject(nodeTree[i].children, id);
+        if (node !== null) {
+          return node;
         }
-        return null;
+      }
     }
+    return null;
+  }
 }
diff --git a/jslib/common/src/misc/throttle.ts b/jslib/common/src/misc/throttle.ts
index 5455db72..852ee999 100644
--- a/jslib/common/src/misc/throttle.ts
+++ b/jslib/common/src/misc/throttle.ts
@@ -5,58 +5,65 @@
  * Calls beyond the limit will be queued, and run when one of the active calls finishes
  */
 export function throttle(limit: number, throttleKey: (args: any[]) => string) {
-    return <T>(target: any, propertyKey: string | symbol,
-        descriptor: TypedPropertyDescriptor<(...args: any[]) => Promise<T>>) => {
-        const originalMethod: () => Promise<T> = descriptor.value;
-        const allThrottles = new Map<any, Map<string, (() => void)[]>>();
+  return <T>(
+    target: any,
+    propertyKey: string | symbol,
+    descriptor: TypedPropertyDescriptor<(...args: any[]) => Promise<T>>
+  ) => {
+    const originalMethod: () => Promise<T> = descriptor.value;
+    const allThrottles = new Map<any, Map<string, (() => void)[]>>();
 
-        const getThrottles = (obj: any) => {
-            let throttles = allThrottles.get(obj);
-            if (throttles != null) {
-                return throttles;
-            }
-            throttles = new Map<string, (() => void)[]>();
-            allThrottles.set(obj, throttles);
-            return throttles;
-        };
+    const getThrottles = (obj: any) => {
+      let throttles = allThrottles.get(obj);
+      if (throttles != null) {
+        return throttles;
+      }
+      throttles = new Map<string, (() => void)[]>();
+      allThrottles.set(obj, throttles);
+      return throttles;
+    };
 
-        return {
-            value: function(...args: any[]) {
-                const throttles = getThrottles(this);
-                const argsThrottleKey = throttleKey(args);
-                let queue = throttles.get(argsThrottleKey);
-                if (queue == null) {
-                    queue = [];
-                    throttles.set(argsThrottleKey, queue);
-                }
+    return {
+      value: function (...args: any[]) {
+        const throttles = getThrottles(this);
+        const argsThrottleKey = throttleKey(args);
+        let queue = throttles.get(argsThrottleKey);
+        if (queue == null) {
+          queue = [];
+          throttles.set(argsThrottleKey, queue);
+        }
 
-                return new Promise<T>((resolve, reject) => {
-                    const exec = () => {
-                        const onFinally = () => {
-                            queue.splice(queue.indexOf(exec), 1);
-                            if (queue.length >= limit) {
-                                queue[limit - 1]();
-                            } else if (queue.length === 0) {
-                                throttles.delete(argsThrottleKey);
-                                if (throttles.size === 0) {
-                                    allThrottles.delete(this);
-                                }
-                            }
-                        };
-                        originalMethod.apply(this, args).then((val: any) => {
-                            onFinally();
-                            return val;
-                        }).catch((err: any) => {
-                            onFinally();
-                            throw err;
-                        }).then(resolve, reject);
-                    };
-                    queue.push(exec);
-                    if (queue.length <= limit) {
-                        exec();
-                    }
-                });
-            },
-        };
+        return new Promise<T>((resolve, reject) => {
+          const exec = () => {
+            const onFinally = () => {
+              queue.splice(queue.indexOf(exec), 1);
+              if (queue.length >= limit) {
+                queue[limit - 1]();
+              } else if (queue.length === 0) {
+                throttles.delete(argsThrottleKey);
+                if (throttles.size === 0) {
+                  allThrottles.delete(this);
+                }
+              }
+            };
+            originalMethod
+              .apply(this, args)
+              .then((val: any) => {
+                onFinally();
+                return val;
+              })
+              .catch((err: any) => {
+                onFinally();
+                throw err;
+              })
+              .then(resolve, reject);
+          };
+          queue.push(exec);
+          if (queue.length <= limit) {
+            exec();
+          }
+        });
+      },
     };
+  };
 }
diff --git a/jslib/common/src/misc/tldjs.noop.ts b/jslib/common/src/misc/tldjs.noop.ts
index b3bd6db7..b6273a61 100644
--- a/jslib/common/src/misc/tldjs.noop.ts
+++ b/jslib/common/src/misc/tldjs.noop.ts
@@ -1,7 +1,7 @@
 export function getDomain(host: string): string | null {
-    return null;
+  return null;
 }
 
 export function isValid(host: string): boolean {
-    return true;
+  return true;
 }
diff --git a/jslib/common/src/misc/utils.ts b/jslib/common/src/misc/utils.ts
index 6ceb459a..a91ccd5a 100644
--- a/jslib/common/src/misc/utils.ts
+++ b/jslib/common/src/misc/utils.ts
@@ -1,381 +1,406 @@
-import * as tldjs from 'tldjs';
+import * as tldjs from "tldjs";
 
-import { I18nService } from '../abstractions/i18n.service';
+import { I18nService } from "../abstractions/i18n.service";
 
 // tslint:disable-next-line
-const nodeURL = typeof window === 'undefined' ? require('url') : null;
+const nodeURL = typeof window === "undefined" ? require("url") : null;
 
 export class Utils {
-    static inited = false;
-    static isNativeScript = false;
-    static isNode = false;
-    static isBrowser = true;
-    static isMobileBrowser = false;
-    static isAppleMobileBrowser = false;
-    static global: any = null;
-    static tldEndingRegex = /.*\.(com|net|org|edu|uk|gov|ca|de|jp|fr|au|ru|ch|io|es|us|co|xyz|info|ly|mil)$/;
-    // Transpiled version of /\p{Emoji_Presentation}/gu using https://mothereff.in/regexpu. Used for compatability in older browsers.
-    static regexpEmojiPresentation =  /(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])/g;
-
-    static init() {
-        if (Utils.inited) {
-            return;
+  static inited = false;
+  static isNode = false;
+  static isBrowser = true;
+  static isMobileBrowser = false;
+  static isAppleMobileBrowser = false;
+  static global: any = null;
+  static tldEndingRegex =
+    /.*\.(com|net|org|edu|uk|gov|ca|de|jp|fr|au|ru|ch|io|es|us|co|xyz|info|ly|mil)$/;
+  // Transpiled version of /\p{Emoji_Presentation}/gu using https://mothereff.in/regexpu. Used for compatability in older browsers.
+  static regexpEmojiPresentation =
+    /(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])/g;
+
+  static init() {
+    if (Utils.inited) {
+      return;
+    }
+
+    Utils.inited = true;
+    Utils.isNode =
+      typeof process !== "undefined" &&
+      (process as any).release != null &&
+      (process as any).release.name === "node";
+    Utils.isBrowser = typeof window !== "undefined";
+    Utils.isMobileBrowser = Utils.isBrowser && this.isMobile(window);
+    Utils.isAppleMobileBrowser = Utils.isBrowser && this.isAppleMobile(window);
+    Utils.global = Utils.isNode && !Utils.isBrowser ? global : window;
+  }
+
+  static fromB64ToArray(str: string): Uint8Array {
+    if (Utils.isNode) {
+      return new Uint8Array(Buffer.from(str, "base64"));
+    } else {
+      const binaryString = window.atob(str);
+      const bytes = new Uint8Array(binaryString.length);
+      for (let i = 0; i < binaryString.length; i++) {
+        bytes[i] = binaryString.charCodeAt(i);
+      }
+      return bytes;
+    }
+  }
+
+  static fromUrlB64ToArray(str: string): Uint8Array {
+    return Utils.fromB64ToArray(Utils.fromUrlB64ToB64(str));
+  }
+
+  static fromHexToArray(str: string): Uint8Array {
+    if (Utils.isNode) {
+      return new Uint8Array(Buffer.from(str, "hex"));
+    } else {
+      const bytes = new Uint8Array(str.length / 2);
+      for (let i = 0; i < str.length; i += 2) {
+        bytes[i / 2] = parseInt(str.substr(i, 2), 16);
+      }
+      return bytes;
+    }
+  }
+
+  static fromUtf8ToArray(str: string): Uint8Array {
+    if (Utils.isNode) {
+      return new Uint8Array(Buffer.from(str, "utf8"));
+    } else {
+      const strUtf8 = unescape(encodeURIComponent(str));
+      const arr = new Uint8Array(strUtf8.length);
+      for (let i = 0; i < strUtf8.length; i++) {
+        arr[i] = strUtf8.charCodeAt(i);
+      }
+      return arr;
+    }
+  }
+
+  static fromByteStringToArray(str: string): Uint8Array {
+    const arr = new Uint8Array(str.length);
+    for (let i = 0; i < str.length; i++) {
+      arr[i] = str.charCodeAt(i);
+    }
+    return arr;
+  }
+
+  static fromBufferToB64(buffer: ArrayBuffer): string {
+    if (Utils.isNode) {
+      return Buffer.from(buffer).toString("base64");
+    } else {
+      let binary = "";
+      const bytes = new Uint8Array(buffer);
+      for (let i = 0; i < bytes.byteLength; i++) {
+        binary += String.fromCharCode(bytes[i]);
+      }
+      return window.btoa(binary);
+    }
+  }
+
+  static fromBufferToUrlB64(buffer: ArrayBuffer): string {
+    return Utils.fromB64toUrlB64(Utils.fromBufferToB64(buffer));
+  }
+
+  static fromB64toUrlB64(b64Str: string) {
+    return b64Str.replace(/\+/g, "-").replace(/\//g, "_").replace(/=/g, "");
+  }
+
+  static fromBufferToUtf8(buffer: ArrayBuffer): string {
+    if (Utils.isNode) {
+      return Buffer.from(buffer).toString("utf8");
+    } else {
+      const bytes = new Uint8Array(buffer);
+      const encodedString = String.fromCharCode.apply(null, bytes);
+      return decodeURIComponent(escape(encodedString));
+    }
+  }
+
+  static fromBufferToByteString(buffer: ArrayBuffer): string {
+    return String.fromCharCode.apply(null, new Uint8Array(buffer));
+  }
+
+  // ref: https://stackoverflow.com/a/40031979/1090359
+  static fromBufferToHex(buffer: ArrayBuffer): string {
+    if (Utils.isNode) {
+      return Buffer.from(buffer).toString("hex");
+    } else {
+      const bytes = new Uint8Array(buffer);
+      return Array.prototype.map
+        .call(bytes, (x: number) => ("00" + x.toString(16)).slice(-2))
+        .join("");
+    }
+  }
+
+  static fromUrlB64ToB64(urlB64Str: string): string {
+    let output = urlB64Str.replace(/-/g, "+").replace(/_/g, "/");
+    switch (output.length % 4) {
+      case 0:
+        break;
+      case 2:
+        output += "==";
+        break;
+      case 3:
+        output += "=";
+        break;
+      default:
+        throw new Error("Illegal base64url string!");
+    }
+
+    return output;
+  }
+
+  static fromUrlB64ToUtf8(urlB64Str: string): string {
+    return Utils.fromB64ToUtf8(Utils.fromUrlB64ToB64(urlB64Str));
+  }
+
+  static fromUtf8ToB64(utfStr: string): string {
+    if (Utils.isNode) {
+      return Buffer.from(utfStr, "utf8").toString("base64");
+    } else {
+      return decodeURIComponent(escape(window.btoa(utfStr)));
+    }
+  }
+
+  static fromUtf8ToUrlB64(utfStr: string): string {
+    return Utils.fromBufferToUrlB64(Utils.fromUtf8ToArray(utfStr));
+  }
+
+  static fromB64ToUtf8(b64Str: string): string {
+    if (Utils.isNode) {
+      return Buffer.from(b64Str, "base64").toString("utf8");
+    } else {
+      return decodeURIComponent(escape(window.atob(b64Str)));
+    }
+  }
+
+  // ref: http://stackoverflow.com/a/2117523/1090359
+  static newGuid(): string {
+    return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, (c) => {
+      // tslint:disable-next-line
+      const r = (Math.random() * 16) | 0;
+      // tslint:disable-next-line
+      const v = c === "x" ? r : (r & 0x3) | 0x8;
+      return v.toString(16);
+    });
+  }
+
+  static isGuid(id: string) {
+    return RegExp(
+      /^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/,
+      "i"
+    ).test(id);
+  }
+
+  static getHostname(uriString: string): string {
+    const url = Utils.getUrl(uriString);
+    try {
+      return url != null && url.hostname !== "" ? url.hostname : null;
+    } catch {
+      return null;
+    }
+  }
+
+  static getHost(uriString: string): string {
+    const url = Utils.getUrl(uriString);
+    try {
+      return url != null && url.host !== "" ? url.host : null;
+    } catch {
+      return null;
+    }
+  }
+
+  static getDomain(uriString: string): string {
+    if (uriString == null) {
+      return null;
+    }
+
+    uriString = uriString.trim();
+    if (uriString === "") {
+      return null;
+    }
+
+    if (uriString.startsWith("data:")) {
+      return null;
+    }
+
+    let httpUrl = uriString.startsWith("http://") || uriString.startsWith("https://");
+    if (
+      !httpUrl &&
+      uriString.indexOf("://") < 0 &&
+      Utils.tldEndingRegex.test(uriString) &&
+      uriString.indexOf("@") < 0
+    ) {
+      uriString = "http://" + uriString;
+      httpUrl = true;
+    }
+
+    if (httpUrl) {
+      try {
+        const url = Utils.getUrlObject(uriString);
+        const validHostname = tldjs?.isValid != null ? tldjs.isValid(url.hostname) : true;
+        if (!validHostname) {
+          return null;
         }
 
-        Utils.inited = true;
-        Utils.isNode = typeof process !== 'undefined' && (process as any).release != null &&
-            (process as any).release.name === 'node';
-        Utils.isBrowser = typeof window !== 'undefined';
-        Utils.isNativeScript = !Utils.isNode && !Utils.isBrowser;
-        Utils.isMobileBrowser = Utils.isBrowser && this.isMobile(window);
-        Utils.isAppleMobileBrowser = Utils.isBrowser && this.isAppleMobile(window);
-        Utils.global = Utils.isNativeScript ? global : (Utils.isNode && !Utils.isBrowser ? global : window);
-    }
-
-    static fromB64ToArray(str: string): Uint8Array {
-        if (Utils.isNode || Utils.isNativeScript) {
-            return new Uint8Array(Buffer.from(str, 'base64'));
-        } else {
-            const binaryString = window.atob(str);
-            const bytes = new Uint8Array(binaryString.length);
-            for (let i = 0; i < binaryString.length; i++) {
-                bytes[i] = binaryString.charCodeAt(i);
-            }
-            return bytes;
+        if (url.hostname === "localhost" || Utils.validIpAddress(url.hostname)) {
+          return url.hostname;
         }
-    }
 
-    static fromUrlB64ToArray(str: string): Uint8Array {
-        return Utils.fromB64ToArray(Utils.fromUrlB64ToB64(str));
-    }
-
-    static fromHexToArray(str: string): Uint8Array {
-        if (Utils.isNode || Utils.isNativeScript) {
-            return new Uint8Array(Buffer.from(str, 'hex'));
-        } else {
-            const bytes = new Uint8Array(str.length / 2);
-            for (let i = 0; i < str.length; i += 2) {
-                bytes[i / 2] = parseInt(str.substr(i, 2), 16);
-            }
-            return bytes;
+        const urlDomain =
+          tldjs != null && tldjs.getDomain != null ? tldjs.getDomain(url.hostname) : null;
+        return urlDomain != null ? urlDomain : url.hostname;
+      } catch (e) {
+        // Invalid domain, try another approach below.
+      }
+    }
+
+    try {
+      const domain = tldjs != null && tldjs.getDomain != null ? tldjs.getDomain(uriString) : null;
+
+      if (domain != null) {
+        return domain;
+      }
+    } catch {
+      return null;
+    }
+
+    return null;
+  }
+
+  static getQueryParams(uriString: string): Map<string, string> {
+    const url = Utils.getUrl(uriString);
+    if (url == null || url.search == null || url.search === "") {
+      return null;
+    }
+    const map = new Map<string, string>();
+    const pairs = (url.search[0] === "?" ? url.search.substr(1) : url.search).split("&");
+    pairs.forEach((pair) => {
+      const parts = pair.split("=");
+      if (parts.length < 1) {
+        return;
+      }
+      map.set(
+        decodeURIComponent(parts[0]).toLowerCase(),
+        parts[1] == null ? "" : decodeURIComponent(parts[1])
+      );
+    });
+    return map;
+  }
+
+  static getSortFunction(i18nService: I18nService, prop: string) {
+    return (a: any, b: any) => {
+      if (a[prop] == null && b[prop] != null) {
+        return -1;
+      }
+      if (a[prop] != null && b[prop] == null) {
+        return 1;
+      }
+      if (a[prop] == null && b[prop] == null) {
+        return 0;
+      }
+
+      return i18nService.collator
+        ? i18nService.collator.compare(a[prop], b[prop])
+        : a[prop].localeCompare(b[prop]);
+    };
+  }
+
+  static isNullOrWhitespace(str: string): boolean {
+    return str == null || typeof str !== "string" || str.trim() === "";
+  }
+
+  static nameOf<T>(name: string & keyof T) {
+    return name;
+  }
+
+  static assign<T>(target: T, source: Partial<T>): T {
+    return Object.assign(target, source);
+  }
+
+  static iterateEnum<O extends object, K extends keyof O = keyof O>(obj: O) {
+    return (Object.keys(obj).filter((k) => Number.isNaN(+k)) as K[]).map((k) => obj[k]);
+  }
+
+  static getUrl(uriString: string): URL {
+    if (uriString == null) {
+      return null;
+    }
+
+    uriString = uriString.trim();
+    if (uriString === "") {
+      return null;
+    }
+
+    let url = Utils.getUrlObject(uriString);
+    if (url == null) {
+      const hasHttpProtocol =
+        uriString.indexOf("http://") === 0 || uriString.indexOf("https://") === 0;
+      if (!hasHttpProtocol && uriString.indexOf(".") > -1) {
+        url = Utils.getUrlObject("http://" + uriString);
+      }
+    }
+    return url;
+  }
+
+  static camelToPascalCase(s: string) {
+    return s.charAt(0).toUpperCase() + s.slice(1);
+  }
+
+  private static validIpAddress(ipString: string): boolean {
+    // tslint:disable-next-line
+    const ipRegex =
+      /^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/;
+    return ipRegex.test(ipString);
+  }
+
+  private static isMobile(win: Window) {
+    let mobile = false;
+    ((a) => {
+      // tslint:disable-next-line
+      if (
+        /(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(
+          a
+        ) ||
+        /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(
+          a.substr(0, 4)
+        )
+      ) {
+        mobile = true;
+      }
+    })(win.navigator.userAgent || win.navigator.vendor || (win as any).opera);
+    return mobile || win.navigator.userAgent.match(/iPad/i) != null;
+  }
+
+  private static isAppleMobile(win: Window) {
+    return (
+      win.navigator.userAgent.match(/iPhone/i) != null ||
+      win.navigator.userAgent.match(/iPad/i) != null
+    );
+  }
+
+  private static getUrlObject(uriString: string): URL {
+    try {
+      if (nodeURL != null) {
+        return new nodeURL.URL(uriString);
+      } else if (typeof URL === "function") {
+        return new URL(uriString);
+      } else if (window != null) {
+        const hasProtocol = uriString.indexOf("://") > -1;
+        if (!hasProtocol && uriString.indexOf(".") > -1) {
+          uriString = "http://" + uriString;
+        } else if (!hasProtocol) {
+          return null;
         }
+        const anchor = window.document.createElement("a");
+        anchor.href = uriString;
+        return anchor as any;
+      }
+    } catch (e) {
+      // Ignore error
     }
 
-    static fromUtf8ToArray(str: string): Uint8Array {
-        if (Utils.isNode || Utils.isNativeScript) {
-            return new Uint8Array(Buffer.from(str, 'utf8'));
-        } else {
-            const strUtf8 = unescape(encodeURIComponent(str));
-            const arr = new Uint8Array(strUtf8.length);
-            for (let i = 0; i < strUtf8.length; i++) {
-                arr[i] = strUtf8.charCodeAt(i);
-            }
-            return arr;
-        }
-    }
-
-    static fromByteStringToArray(str: string): Uint8Array {
-        const arr = new Uint8Array(str.length);
-        for (let i = 0; i < str.length; i++) {
-            arr[i] = str.charCodeAt(i);
-        }
-        return arr;
-    }
-
-    static fromBufferToB64(buffer: ArrayBuffer): string {
-        if (Utils.isNode || Utils.isNativeScript) {
-            return Buffer.from(buffer).toString('base64');
-        } else {
-            let binary = '';
-            const bytes = new Uint8Array(buffer);
-            for (let i = 0; i < bytes.byteLength; i++) {
-                binary += String.fromCharCode(bytes[i]);
-            }
-            return window.btoa(binary);
-        }
-    }
-
-    static fromBufferToUrlB64(buffer: ArrayBuffer): string {
-        return Utils.fromB64toUrlB64(Utils.fromBufferToB64(buffer));
-    }
-
-    static fromB64toUrlB64(b64Str: string) {
-        return b64Str.replace(/\+/g, '-')
-            .replace(/\//g, '_')
-            .replace(/=/g, '');
-    }
-
-    static fromBufferToUtf8(buffer: ArrayBuffer): string {
-        if (Utils.isNode || Utils.isNativeScript) {
-            return Buffer.from(buffer).toString('utf8');
-        } else {
-            const bytes = new Uint8Array(buffer);
-            const encodedString = String.fromCharCode.apply(null, bytes);
-            return decodeURIComponent(escape(encodedString));
-        }
-    }
-
-    static fromBufferToByteString(buffer: ArrayBuffer): string {
-        return String.fromCharCode.apply(null, new Uint8Array(buffer));
-    }
-
-    // ref: https://stackoverflow.com/a/40031979/1090359
-    static fromBufferToHex(buffer: ArrayBuffer): string {
-        if (Utils.isNode || Utils.isNativeScript) {
-            return Buffer.from(buffer).toString('hex');
-        } else {
-            const bytes = new Uint8Array(buffer);
-            return Array.prototype.map.call(bytes, (x: number) => ('00' + x.toString(16)).slice(-2)).join('');
-        }
-    }
-
-    static fromUrlB64ToB64(urlB64Str: string): string {
-        let output = urlB64Str.replace(/-/g, '+').replace(/_/g, '/');
-        switch (output.length % 4) {
-            case 0:
-                break;
-            case 2:
-                output += '==';
-                break;
-            case 3:
-                output += '=';
-                break;
-            default:
-                throw new Error('Illegal base64url string!');
-        }
-
-        return output;
-    }
-
-    static fromUrlB64ToUtf8(urlB64Str: string): string {
-        return Utils.fromB64ToUtf8(Utils.fromUrlB64ToB64(urlB64Str));
-    }
-
-    static fromUtf8ToB64(utfStr: string): string {
-        if (Utils.isNode || Utils.isNativeScript) {
-            return Buffer.from(utfStr, 'utf8').toString('base64');
-        } else {
-            return decodeURIComponent(escape(window.btoa(utfStr)));
-        }
-    }
-
-    static fromUtf8ToUrlB64(utfStr: string): string {
-        return Utils.fromBufferToUrlB64(Utils.fromUtf8ToArray(utfStr));
-    }
-
-    static fromB64ToUtf8(b64Str: string): string {
-        if (Utils.isNode || Utils.isNativeScript) {
-            return Buffer.from(b64Str, 'base64').toString('utf8');
-        } else {
-            return decodeURIComponent(escape(window.atob(b64Str)));
-        }
-    }
-
-    // ref: http://stackoverflow.com/a/2117523/1090359
-    static newGuid(): string {
-        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {
-            // tslint:disable-next-line
-            const r = Math.random() * 16 | 0;
-            // tslint:disable-next-line
-            const v = c === 'x' ? r : (r & 0x3 | 0x8);
-            return v.toString(16);
-        });
-    }
-
-    static isGuid(id: string) {
-        return RegExp(/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/, 'i').test(id);
-    }
-
-    static getHostname(uriString: string): string {
-        const url = Utils.getUrl(uriString);
-        try {
-            return url != null && url.hostname !== '' ? url.hostname : null;
-        } catch {
-            return null;
-        }
-    }
-
-    static getHost(uriString: string): string {
-        const url = Utils.getUrl(uriString);
-        try {
-            return url != null && url.host !== '' ? url.host : null;
-        } catch {
-            return null;
-        }
-    }
-
-    static getDomain(uriString: string): string {
-        if (uriString == null) {
-            return null;
-        }
-
-        uriString = uriString.trim();
-        if (uriString === '') {
-            return null;
-        }
-
-        if (uriString.startsWith('data:')) {
-            return null;
-        }
-
-        let httpUrl = uriString.startsWith('http://') || uriString.startsWith('https://');
-        if (!httpUrl && uriString.indexOf('://') < 0 && Utils.tldEndingRegex.test(uriString) &&
-            uriString.indexOf('@') < 0) {
-            uriString = 'http://' + uriString;
-            httpUrl = true;
-        }
-
-        if (httpUrl) {
-            try {
-                const url = Utils.getUrlObject(uriString);
-                const validHostname = tldjs?.isValid != null ? tldjs.isValid(url.hostname) : true;
-                if (!validHostname) {
-                    return null;
-                }
-
-                if (url.hostname === 'localhost' || Utils.validIpAddress(url.hostname)) {
-                    return url.hostname;
-                }
-
-                const urlDomain = tldjs != null && tldjs.getDomain != null ? tldjs.getDomain(url.hostname) : null;
-                return urlDomain != null ? urlDomain : url.hostname;
-            } catch (e) {
-                // Invalid domain, try another approach below.
-            }
-        }
-
-        try {
-            const domain = tldjs != null && tldjs.getDomain != null ? tldjs.getDomain(uriString) : null;
-
-            if (domain != null) {
-                return domain;
-            }
-        } catch {
-            return null;
-        }
-
-        return null;
-    }
-
-    static getQueryParams(uriString: string): Map<string, string> {
-        const url = Utils.getUrl(uriString);
-        if (url == null || url.search == null || url.search === '') {
-            return null;
-        }
-        const map = new Map<string, string>();
-        const pairs = (url.search[0] === '?' ? url.search.substr(1) : url.search).split('&');
-        pairs.forEach(pair => {
-            const parts = pair.split('=');
-            if (parts.length < 1) {
-                return;
-            }
-            map.set(decodeURIComponent(parts[0]).toLowerCase(), parts[1] == null ? '' : decodeURIComponent(parts[1]));
-        });
-        return map;
-    }
-
-    static getSortFunction(i18nService: I18nService, prop: string) {
-        return (a: any, b: any) => {
-            if (a[prop] == null && b[prop] != null) {
-                return -1;
-            }
-            if (a[prop] != null && b[prop] == null) {
-                return 1;
-            }
-            if (a[prop] == null && b[prop] == null) {
-                return 0;
-            }
-
-            return i18nService.collator ? i18nService.collator.compare(a[prop], b[prop]) :
-                a[prop].localeCompare(b[prop]);
-        };
-    }
-
-    static isNullOrWhitespace(str: string): boolean {
-        return str == null || typeof str !== 'string' || str.trim() === '';
-    }
-
-    static nameOf<T>(name: string & keyof T) {
-        return name;
-    }
-
-    static assign<T>(target: T, source: Partial<T>): T {
-        return Object.assign(target, source);
-    }
-
-    static iterateEnum<O extends object, K extends keyof O = keyof O>(obj: O) {
-        return (Object.keys(obj).filter(k => Number.isNaN(+k)) as K[]).map(k => obj[k]);
-    }
-
-
-    static getUrl(uriString: string): URL {
-        if (uriString == null) {
-            return null;
-        }
-
-        uriString = uriString.trim();
-        if (uriString === '') {
-            return null;
-        }
-
-        let url = Utils.getUrlObject(uriString);
-        if (url == null) {
-            const hasHttpProtocol = uriString.indexOf('http://') === 0 || uriString.indexOf('https://') === 0;
-            if (!hasHttpProtocol && uriString.indexOf('.') > -1) {
-                url = Utils.getUrlObject('http://' + uriString);
-            }
-        }
-        return url;
-    }
-
-    static camelToPascalCase(s: string) {
-        return s.charAt(0).toUpperCase() + s.slice(1);
-    }
-
-    private static validIpAddress(ipString: string): boolean {
-        // tslint:disable-next-line
-        const ipRegex = /^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/;
-        return ipRegex.test(ipString);
-    }
-
-    private static isMobile(win: Window) {
-        let mobile = false;
-        (a => {
-            // tslint:disable-next-line
-            if (/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0, 4))) {
-                mobile = true;
-            }
-        })(win.navigator.userAgent || win.navigator.vendor || (win as any).opera);
-        return mobile || win.navigator.userAgent.match(/iPad/i) != null;
-    }
-
-    private static isAppleMobile(win: Window) {
-        return win.navigator.userAgent.match(/iPhone/i) != null || win.navigator.userAgent.match(/iPad/i) != null;
-    }
-
-    private static getUrlObject(uriString: string): URL {
-        try {
-            if (nodeURL != null) {
-                return nodeURL.URL ? new nodeURL.URL(uriString) : nodeURL.parse(uriString);
-            } else if (typeof URL === 'function') {
-                return new URL(uriString);
-            } else if (window != null) {
-                const hasProtocol = uriString.indexOf('://') > -1;
-                if (!hasProtocol && uriString.indexOf('.') > -1) {
-                    uriString = 'http://' + uriString;
-                } else if (!hasProtocol) {
-                    return null;
-                }
-                const anchor = window.document.createElement('a');
-                anchor.href = uriString;
-                return anchor as any;
-            }
-        } catch (e) {
-            // Ignore error
-        }
-
-        return null;
-    }
+    return null;
+  }
 }
 
 Utils.init();
diff --git a/jslib/common/src/misc/webauthn_iframe.ts b/jslib/common/src/misc/webauthn_iframe.ts
index 54dbdc45..712594ba 100644
--- a/jslib/common/src/misc/webauthn_iframe.ts
+++ b/jslib/common/src/misc/webauthn_iframe.ts
@@ -1,87 +1,106 @@
-import { I18nService } from '../abstractions/i18n.service';
-import { PlatformUtilsService } from '../abstractions/platformUtils.service';
+import { I18nService } from "../abstractions/i18n.service";
+import { PlatformUtilsService } from "../abstractions/platformUtils.service";
 
 export class WebAuthnIFrame {
-    private iframe: HTMLIFrameElement = null;
-    private connectorLink: HTMLAnchorElement;
-    private parseFunction = this.parseMessage.bind(this);
+  private iframe: HTMLIFrameElement = null;
+  private connectorLink: HTMLAnchorElement;
+  private parseFunction = this.parseMessage.bind(this);
 
-    constructor(private win: Window, private webVaultUrl: string, private webAuthnNewTab: boolean,
-        private platformUtilsService: PlatformUtilsService, private i18nService: I18nService,
-        private successCallback: Function, private errorCallback: Function, private infoCallback: Function) {
-        this.connectorLink = win.document.createElement('a');
-    }
-
-    init(data: any): void {
-        const params = new URLSearchParams({
-            data: this.base64Encode(JSON.stringify(data)),
-            parent: encodeURIComponent(this.win.document.location.href),
-            btnText: encodeURIComponent(this.i18nService.t('webAuthnAuthenticate')),
-            v: '1',
-        });
+  constructor(
+    private win: Window,
+    private webVaultUrl: string,
+    private webAuthnNewTab: boolean,
+    private platformUtilsService: PlatformUtilsService,
+    private i18nService: I18nService,
+    private successCallback: Function,
+    private errorCallback: Function,
+    private infoCallback: Function
+  ) {
+    this.connectorLink = win.document.createElement("a");
+  }
 
-        if (this.webAuthnNewTab) {
-            // Firefox fallback which opens the webauthn page in a new tab
-            params.append('locale', this.i18nService.translationLocale);
-            this.platformUtilsService.launchUri(`${this.webVaultUrl}/webauthn-fallback-connector.html?${params}`);
-        } else {
-            this.connectorLink.href = `${this.webVaultUrl}/webauthn-connector.html?${params}`;
-            this.iframe = this.win.document.getElementById('webauthn_iframe') as HTMLIFrameElement;
-            this.iframe.allow = 'publickey-credentials-get ' + new URL(this.webVaultUrl).origin;
-            this.iframe.src = this.connectorLink.href;
+  init(data: any): void {
+    const params = new URLSearchParams({
+      data: this.base64Encode(JSON.stringify(data)),
+      parent: encodeURIComponent(this.win.document.location.href),
+      btnText: encodeURIComponent(this.i18nService.t("webAuthnAuthenticate")),
+      v: "1",
+    });
 
-            this.win.addEventListener('message', this.parseFunction, false);
-        }
-    }
+    if (this.webAuthnNewTab) {
+      // Firefox fallback which opens the webauthn page in a new tab
+      params.append("locale", this.i18nService.translationLocale);
+      this.platformUtilsService.launchUri(
+        `${this.webVaultUrl}/webauthn-fallback-connector.html?${params}`
+      );
+    } else {
+      this.connectorLink.href = `${this.webVaultUrl}/webauthn-connector.html?${params}`;
+      this.iframe = this.win.document.getElementById("webauthn_iframe") as HTMLIFrameElement;
+      this.iframe.allow = "publickey-credentials-get " + new URL(this.webVaultUrl).origin;
+      this.iframe.src = this.connectorLink.href;
 
-    stop() {
-        this.sendMessage('stop');
+      this.win.addEventListener("message", this.parseFunction, false);
     }
+  }
 
-    start() {
-        this.sendMessage('start');
-    }
+  stop() {
+    this.sendMessage("stop");
+  }
 
-    sendMessage(message: any) {
-        if (!this.iframe || !this.iframe.src || !this.iframe.contentWindow) {
-            return;
-        }
+  start() {
+    this.sendMessage("start");
+  }
 
-        this.iframe.contentWindow.postMessage(message, this.iframe.src);
+  sendMessage(message: any) {
+    if (!this.iframe || !this.iframe.src || !this.iframe.contentWindow) {
+      return;
     }
 
-    base64Encode(str: string): string {
-        return btoa(encodeURIComponent(str).replace(/%([0-9A-F]{2})/g, (match, p1) => {
-            return String.fromCharCode(('0x' + p1) as any);
-        }));
-    }
+    this.iframe.contentWindow.postMessage(message, this.iframe.src);
+  }
 
-    cleanup() {
-        this.win.removeEventListener('message', this.parseFunction, false);
-    }
+  base64Encode(str: string): string {
+    return btoa(
+      encodeURIComponent(str).replace(/%([0-9A-F]{2})/g, (match, p1) => {
+        return String.fromCharCode(("0x" + p1) as any);
+      })
+    );
+  }
 
-    private parseMessage(event: MessageEvent) {
-        if (!this.validMessage(event)) {
-            return;
-        }
+  cleanup() {
+    this.win.removeEventListener("message", this.parseFunction, false);
+  }
 
-        const parts: string[] = event.data.split('|');
-        if (parts[0] === 'success' && this.successCallback) {
-            this.successCallback(parts[1]);
-        } else if (parts[0] === 'error' && this.errorCallback) {
-            this.errorCallback(parts[1]);
-        } else if (parts[0] === 'info' && this.infoCallback) {
-            this.infoCallback(parts[1]);
-        }
+  private parseMessage(event: MessageEvent) {
+    if (!this.validMessage(event)) {
+      return;
     }
 
-    private validMessage(event: MessageEvent) {
-        if (event.origin == null || event.origin === '' || event.origin !== (this.connectorLink as any).origin ||
-            event.data == null || typeof (event.data) !== 'string') {
-            return false;
-        }
+    const parts: string[] = event.data.split("|");
+    if (parts[0] === "success" && this.successCallback) {
+      this.successCallback(parts[1]);
+    } else if (parts[0] === "error" && this.errorCallback) {
+      this.errorCallback(parts[1]);
+    } else if (parts[0] === "info" && this.infoCallback) {
+      this.infoCallback(parts[1]);
+    }
+  }
 
-        return event.data.indexOf('success|') === 0 || event.data.indexOf('error|') === 0 ||
-            event.data.indexOf('info|') === 0;
+  private validMessage(event: MessageEvent) {
+    if (
+      event.origin == null ||
+      event.origin === "" ||
+      event.origin !== (this.connectorLink as any).origin ||
+      event.data == null ||
+      typeof event.data !== "string"
+    ) {
+      return false;
     }
+
+    return (
+      event.data.indexOf("success|") === 0 ||
+      event.data.indexOf("error|") === 0 ||
+      event.data.indexOf("info|") === 0
+    );
+  }
 }
diff --git a/jslib/common/src/misc/wordlist.ts b/jslib/common/src/misc/wordlist.ts
index fdbfa5ad..cdd30110 100644
--- a/jslib/common/src/misc/wordlist.ts
+++ b/jslib/common/src/misc/wordlist.ts
@@ -1,7779 +1,7779 @@
 // EFF's Long Wordlist from https://www.eff.org/dice
 export const EEFLongWordList = [
-    'abacus',
-    'abdomen',
-    'abdominal',
-    'abide',
-    'abiding',
-    'ability',
-    'ablaze',
-    'able',
-    'abnormal',
-    'abrasion',
-    'abrasive',
-    'abreast',
-    'abridge',
-    'abroad',
-    'abruptly',
-    'absence',
-    'absentee',
-    'absently',
-    'absinthe',
-    'absolute',
-    'absolve',
-    'abstain',
-    'abstract',
-    'absurd',
-    'accent',
-    'acclaim',
-    'acclimate',
-    'accompany',
-    'account',
-    'accuracy',
-    'accurate',
-    'accustom',
-    'acetone',
-    'achiness',
-    'aching',
-    'acid',
-    'acorn',
-    'acquaint',
-    'acquire',
-    'acre',
-    'acrobat',
-    'acronym',
-    'acting',
-    'action',
-    'activate',
-    'activator',
-    'active',
-    'activism',
-    'activist',
-    'activity',
-    'actress',
-    'acts',
-    'acutely',
-    'acuteness',
-    'aeration',
-    'aerobics',
-    'aerosol',
-    'aerospace',
-    'afar',
-    'affair',
-    'affected',
-    'affecting',
-    'affection',
-    'affidavit',
-    'affiliate',
-    'affirm',
-    'affix',
-    'afflicted',
-    'affluent',
-    'afford',
-    'affront',
-    'aflame',
-    'afloat',
-    'aflutter',
-    'afoot',
-    'afraid',
-    'afterglow',
-    'afterlife',
-    'aftermath',
-    'aftermost',
-    'afternoon',
-    'aged',
-    'ageless',
-    'agency',
-    'agenda',
-    'agent',
-    'aggregate',
-    'aghast',
-    'agile',
-    'agility',
-    'aging',
-    'agnostic',
-    'agonize',
-    'agonizing',
-    'agony',
-    'agreeable',
-    'agreeably',
-    'agreed',
-    'agreeing',
-    'agreement',
-    'aground',
-    'ahead',
-    'ahoy',
-    'aide',
-    'aids',
-    'aim',
-    'ajar',
-    'alabaster',
-    'alarm',
-    'albatross',
-    'album',
-    'alfalfa',
-    'algebra',
-    'algorithm',
-    'alias',
-    'alibi',
-    'alienable',
-    'alienate',
-    'aliens',
-    'alike',
-    'alive',
-    'alkaline',
-    'alkalize',
-    'almanac',
-    'almighty',
-    'almost',
-    'aloe',
-    'aloft',
-    'aloha',
-    'alone',
-    'alongside',
-    'aloof',
-    'alphabet',
-    'alright',
-    'although',
-    'altitude',
-    'alto',
-    'aluminum',
-    'alumni',
-    'always',
-    'amaretto',
-    'amaze',
-    'amazingly',
-    'amber',
-    'ambiance',
-    'ambiguity',
-    'ambiguous',
-    'ambition',
-    'ambitious',
-    'ambulance',
-    'ambush',
-    'amendable',
-    'amendment',
-    'amends',
-    'amenity',
-    'amiable',
-    'amicably',
-    'amid',
-    'amigo',
-    'amino',
-    'amiss',
-    'ammonia',
-    'ammonium',
-    'amnesty',
-    'amniotic',
-    'among',
-    'amount',
-    'amperage',
-    'ample',
-    'amplifier',
-    'amplify',
-    'amply',
-    'amuck',
-    'amulet',
-    'amusable',
-    'amused',
-    'amusement',
-    'amuser',
-    'amusing',
-    'anaconda',
-    'anaerobic',
-    'anagram',
-    'anatomist',
-    'anatomy',
-    'anchor',
-    'anchovy',
-    'ancient',
-    'android',
-    'anemia',
-    'anemic',
-    'aneurism',
-    'anew',
-    'angelfish',
-    'angelic',
-    'anger',
-    'angled',
-    'angler',
-    'angles',
-    'angling',
-    'angrily',
-    'angriness',
-    'anguished',
-    'angular',
-    'animal',
-    'animate',
-    'animating',
-    'animation',
-    'animator',
-    'anime',
-    'animosity',
-    'ankle',
-    'annex',
-    'annotate',
-    'announcer',
-    'annoying',
-    'annually',
-    'annuity',
-    'anointer',
-    'another',
-    'answering',
-    'antacid',
-    'antarctic',
-    'anteater',
-    'antelope',
-    'antennae',
-    'anthem',
-    'anthill',
-    'anthology',
-    'antibody',
-    'antics',
-    'antidote',
-    'antihero',
-    'antiquely',
-    'antiques',
-    'antiquity',
-    'antirust',
-    'antitoxic',
-    'antitrust',
-    'antiviral',
-    'antivirus',
-    'antler',
-    'antonym',
-    'antsy',
-    'anvil',
-    'anybody',
-    'anyhow',
-    'anymore',
-    'anyone',
-    'anyplace',
-    'anything',
-    'anytime',
-    'anyway',
-    'anywhere',
-    'aorta',
-    'apache',
-    'apostle',
-    'appealing',
-    'appear',
-    'appease',
-    'appeasing',
-    'appendage',
-    'appendix',
-    'appetite',
-    'appetizer',
-    'applaud',
-    'applause',
-    'apple',
-    'appliance',
-    'applicant',
-    'applied',
-    'apply',
-    'appointee',
-    'appraisal',
-    'appraiser',
-    'apprehend',
-    'approach',
-    'approval',
-    'approve',
-    'apricot',
-    'april',
-    'apron',
-    'aptitude',
-    'aptly',
-    'aqua',
-    'aqueduct',
-    'arbitrary',
-    'arbitrate',
-    'ardently',
-    'area',
-    'arena',
-    'arguable',
-    'arguably',
-    'argue',
-    'arise',
-    'armadillo',
-    'armband',
-    'armchair',
-    'armed',
-    'armful',
-    'armhole',
-    'arming',
-    'armless',
-    'armoire',
-    'armored',
-    'armory',
-    'armrest',
-    'army',
-    'aroma',
-    'arose',
-    'around',
-    'arousal',
-    'arrange',
-    'array',
-    'arrest',
-    'arrival',
-    'arrive',
-    'arrogance',
-    'arrogant',
-    'arson',
-    'art',
-    'ascend',
-    'ascension',
-    'ascent',
-    'ascertain',
-    'ashamed',
-    'ashen',
-    'ashes',
-    'ashy',
-    'aside',
-    'askew',
-    'asleep',
-    'asparagus',
-    'aspect',
-    'aspirate',
-    'aspire',
-    'aspirin',
-    'astonish',
-    'astound',
-    'astride',
-    'astrology',
-    'astronaut',
-    'astronomy',
-    'astute',
-    'atlantic',
-    'atlas',
-    'atom',
-    'atonable',
-    'atop',
-    'atrium',
-    'atrocious',
-    'atrophy',
-    'attach',
-    'attain',
-    'attempt',
-    'attendant',
-    'attendee',
-    'attention',
-    'attentive',
-    'attest',
-    'attic',
-    'attire',
-    'attitude',
-    'attractor',
-    'attribute',
-    'atypical',
-    'auction',
-    'audacious',
-    'audacity',
-    'audible',
-    'audibly',
-    'audience',
-    'audio',
-    'audition',
-    'augmented',
-    'august',
-    'authentic',
-    'author',
-    'autism',
-    'autistic',
-    'autograph',
-    'automaker',
-    'automated',
-    'automatic',
-    'autopilot',
-    'available',
-    'avalanche',
-    'avatar',
-    'avenge',
-    'avenging',
-    'avenue',
-    'average',
-    'aversion',
-    'avert',
-    'aviation',
-    'aviator',
-    'avid',
-    'avoid',
-    'await',
-    'awaken',
-    'award',
-    'aware',
-    'awhile',
-    'awkward',
-    'awning',
-    'awoke',
-    'awry',
-    'axis',
-    'babble',
-    'babbling',
-    'babied',
-    'baboon',
-    'backache',
-    'backboard',
-    'backboned',
-    'backdrop',
-    'backed',
-    'backer',
-    'backfield',
-    'backfire',
-    'backhand',
-    'backing',
-    'backlands',
-    'backlash',
-    'backless',
-    'backlight',
-    'backlit',
-    'backlog',
-    'backpack',
-    'backpedal',
-    'backrest',
-    'backroom',
-    'backshift',
-    'backside',
-    'backslid',
-    'backspace',
-    'backspin',
-    'backstab',
-    'backstage',
-    'backtalk',
-    'backtrack',
-    'backup',
-    'backward',
-    'backwash',
-    'backwater',
-    'backyard',
-    'bacon',
-    'bacteria',
-    'bacterium',
-    'badass',
-    'badge',
-    'badland',
-    'badly',
-    'badness',
-    'baffle',
-    'baffling',
-    'bagel',
-    'bagful',
-    'baggage',
-    'bagged',
-    'baggie',
-    'bagginess',
-    'bagging',
-    'baggy',
-    'bagpipe',
-    'baguette',
-    'baked',
-    'bakery',
-    'bakeshop',
-    'baking',
-    'balance',
-    'balancing',
-    'balcony',
-    'balmy',
-    'balsamic',
-    'bamboo',
-    'banana',
-    'banish',
-    'banister',
-    'banjo',
-    'bankable',
-    'bankbook',
-    'banked',
-    'banker',
-    'banking',
-    'banknote',
-    'bankroll',
-    'banner',
-    'bannister',
-    'banshee',
-    'banter',
-    'barbecue',
-    'barbed',
-    'barbell',
-    'barber',
-    'barcode',
-    'barge',
-    'bargraph',
-    'barista',
-    'baritone',
-    'barley',
-    'barmaid',
-    'barman',
-    'barn',
-    'barometer',
-    'barrack',
-    'barracuda',
-    'barrel',
-    'barrette',
-    'barricade',
-    'barrier',
-    'barstool',
-    'bartender',
-    'barterer',
-    'bash',
-    'basically',
-    'basics',
-    'basil',
-    'basin',
-    'basis',
-    'basket',
-    'batboy',
-    'batch',
-    'bath',
-    'baton',
-    'bats',
-    'battalion',
-    'battered',
-    'battering',
-    'battery',
-    'batting',
-    'battle',
-    'bauble',
-    'bazooka',
-    'blabber',
-    'bladder',
-    'blade',
-    'blah',
-    'blame',
-    'blaming',
-    'blanching',
-    'blandness',
-    'blank',
-    'blaspheme',
-    'blasphemy',
-    'blast',
-    'blatancy',
-    'blatantly',
-    'blazer',
-    'blazing',
-    'bleach',
-    'bleak',
-    'bleep',
-    'blemish',
-    'blend',
-    'bless',
-    'blighted',
-    'blimp',
-    'bling',
-    'blinked',
-    'blinker',
-    'blinking',
-    'blinks',
-    'blip',
-    'blissful',
-    'blitz',
-    'blizzard',
-    'bloated',
-    'bloating',
-    'blob',
-    'blog',
-    'bloomers',
-    'blooming',
-    'blooper',
-    'blot',
-    'blouse',
-    'blubber',
-    'bluff',
-    'bluish',
-    'blunderer',
-    'blunt',
-    'blurb',
-    'blurred',
-    'blurry',
-    'blurt',
-    'blush',
-    'blustery',
-    'boaster',
-    'boastful',
-    'boasting',
-    'boat',
-    'bobbed',
-    'bobbing',
-    'bobble',
-    'bobcat',
-    'bobsled',
-    'bobtail',
-    'bodacious',
-    'body',
-    'bogged',
-    'boggle',
-    'bogus',
-    'boil',
-    'bok',
-    'bolster',
-    'bolt',
-    'bonanza',
-    'bonded',
-    'bonding',
-    'bondless',
-    'boned',
-    'bonehead',
-    'boneless',
-    'bonelike',
-    'boney',
-    'bonfire',
-    'bonnet',
-    'bonsai',
-    'bonus',
-    'bony',
-    'boogeyman',
-    'boogieman',
-    'book',
-    'boondocks',
-    'booted',
-    'booth',
-    'bootie',
-    'booting',
-    'bootlace',
-    'bootleg',
-    'boots',
-    'boozy',
-    'borax',
-    'boring',
-    'borough',
-    'borrower',
-    'borrowing',
-    'boss',
-    'botanical',
-    'botanist',
-    'botany',
-    'botch',
-    'both',
-    'bottle',
-    'bottling',
-    'bottom',
-    'bounce',
-    'bouncing',
-    'bouncy',
-    'bounding',
-    'boundless',
-    'bountiful',
-    'bovine',
-    'boxcar',
-    'boxer',
-    'boxing',
-    'boxlike',
-    'boxy',
-    'breach',
-    'breath',
-    'breeches',
-    'breeching',
-    'breeder',
-    'breeding',
-    'breeze',
-    'breezy',
-    'brethren',
-    'brewery',
-    'brewing',
-    'briar',
-    'bribe',
-    'brick',
-    'bride',
-    'bridged',
-    'brigade',
-    'bright',
-    'brilliant',
-    'brim',
-    'bring',
-    'brink',
-    'brisket',
-    'briskly',
-    'briskness',
-    'bristle',
-    'brittle',
-    'broadband',
-    'broadcast',
-    'broaden',
-    'broadly',
-    'broadness',
-    'broadside',
-    'broadways',
-    'broiler',
-    'broiling',
-    'broken',
-    'broker',
-    'bronchial',
-    'bronco',
-    'bronze',
-    'bronzing',
-    'brook',
-    'broom',
-    'brought',
-    'browbeat',
-    'brownnose',
-    'browse',
-    'browsing',
-    'bruising',
-    'brunch',
-    'brunette',
-    'brunt',
-    'brush',
-    'brussels',
-    'brute',
-    'brutishly',
-    'bubble',
-    'bubbling',
-    'bubbly',
-    'buccaneer',
-    'bucked',
-    'bucket',
-    'buckle',
-    'buckshot',
-    'buckskin',
-    'bucktooth',
-    'buckwheat',
-    'buddhism',
-    'buddhist',
-    'budding',
-    'buddy',
-    'budget',
-    'buffalo',
-    'buffed',
-    'buffer',
-    'buffing',
-    'buffoon',
-    'buggy',
-    'bulb',
-    'bulge',
-    'bulginess',
-    'bulgur',
-    'bulk',
-    'bulldog',
-    'bulldozer',
-    'bullfight',
-    'bullfrog',
-    'bullhorn',
-    'bullion',
-    'bullish',
-    'bullpen',
-    'bullring',
-    'bullseye',
-    'bullwhip',
-    'bully',
-    'bunch',
-    'bundle',
-    'bungee',
-    'bunion',
-    'bunkbed',
-    'bunkhouse',
-    'bunkmate',
-    'bunny',
-    'bunt',
-    'busboy',
-    'bush',
-    'busily',
-    'busload',
-    'bust',
-    'busybody',
-    'buzz',
-    'cabana',
-    'cabbage',
-    'cabbie',
-    'cabdriver',
-    'cable',
-    'caboose',
-    'cache',
-    'cackle',
-    'cacti',
-    'cactus',
-    'caddie',
-    'caddy',
-    'cadet',
-    'cadillac',
-    'cadmium',
-    'cage',
-    'cahoots',
-    'cake',
-    'calamari',
-    'calamity',
-    'calcium',
-    'calculate',
-    'calculus',
-    'caliber',
-    'calibrate',
-    'calm',
-    'caloric',
-    'calorie',
-    'calzone',
-    'camcorder',
-    'cameo',
-    'camera',
-    'camisole',
-    'camper',
-    'campfire',
-    'camping',
-    'campsite',
-    'campus',
-    'canal',
-    'canary',
-    'cancel',
-    'candied',
-    'candle',
-    'candy',
-    'cane',
-    'canine',
-    'canister',
-    'cannabis',
-    'canned',
-    'canning',
-    'cannon',
-    'cannot',
-    'canola',
-    'canon',
-    'canopener',
-    'canopy',
-    'canteen',
-    'canyon',
-    'capable',
-    'capably',
-    'capacity',
-    'cape',
-    'capillary',
-    'capital',
-    'capitol',
-    'capped',
-    'capricorn',
-    'capsize',
-    'capsule',
-    'caption',
-    'captivate',
-    'captive',
-    'captivity',
-    'capture',
-    'caramel',
-    'carat',
-    'caravan',
-    'carbon',
-    'cardboard',
-    'carded',
-    'cardiac',
-    'cardigan',
-    'cardinal',
-    'cardstock',
-    'carefully',
-    'caregiver',
-    'careless',
-    'caress',
-    'caretaker',
-    'cargo',
-    'caring',
-    'carless',
-    'carload',
-    'carmaker',
-    'carnage',
-    'carnation',
-    'carnival',
-    'carnivore',
-    'carol',
-    'carpenter',
-    'carpentry',
-    'carpool',
-    'carport',
-    'carried',
-    'carrot',
-    'carrousel',
-    'carry',
-    'cartel',
-    'cartload',
-    'carton',
-    'cartoon',
-    'cartridge',
-    'cartwheel',
-    'carve',
-    'carving',
-    'carwash',
-    'cascade',
-    'case',
-    'cash',
-    'casing',
-    'casino',
-    'casket',
-    'cassette',
-    'casually',
-    'casualty',
-    'catacomb',
-    'catalog',
-    'catalyst',
-    'catalyze',
-    'catapult',
-    'cataract',
-    'catatonic',
-    'catcall',
-    'catchable',
-    'catcher',
-    'catching',
-    'catchy',
-    'caterer',
-    'catering',
-    'catfight',
-    'catfish',
-    'cathedral',
-    'cathouse',
-    'catlike',
-    'catnap',
-    'catnip',
-    'catsup',
-    'cattail',
-    'cattishly',
-    'cattle',
-    'catty',
-    'catwalk',
-    'caucasian',
-    'caucus',
-    'causal',
-    'causation',
-    'cause',
-    'causing',
-    'cauterize',
-    'caution',
-    'cautious',
-    'cavalier',
-    'cavalry',
-    'caviar',
-    'cavity',
-    'cedar',
-    'celery',
-    'celestial',
-    'celibacy',
-    'celibate',
-    'celtic',
-    'cement',
-    'census',
-    'ceramics',
-    'ceremony',
-    'certainly',
-    'certainty',
-    'certified',
-    'certify',
-    'cesarean',
-    'cesspool',
-    'chafe',
-    'chaffing',
-    'chain',
-    'chair',
-    'chalice',
-    'challenge',
-    'chamber',
-    'chamomile',
-    'champion',
-    'chance',
-    'change',
-    'channel',
-    'chant',
-    'chaos',
-    'chaperone',
-    'chaplain',
-    'chapped',
-    'chaps',
-    'chapter',
-    'character',
-    'charbroil',
-    'charcoal',
-    'charger',
-    'charging',
-    'chariot',
-    'charity',
-    'charm',
-    'charred',
-    'charter',
-    'charting',
-    'chase',
-    'chasing',
-    'chaste',
-    'chastise',
-    'chastity',
-    'chatroom',
-    'chatter',
-    'chatting',
-    'chatty',
-    'cheating',
-    'cheddar',
-    'cheek',
-    'cheer',
-    'cheese',
-    'cheesy',
-    'chef',
-    'chemicals',
-    'chemist',
-    'chemo',
-    'cherisher',
-    'cherub',
-    'chess',
-    'chest',
-    'chevron',
-    'chevy',
-    'chewable',
-    'chewer',
-    'chewing',
-    'chewy',
-    'chief',
-    'chihuahua',
-    'childcare',
-    'childhood',
-    'childish',
-    'childless',
-    'childlike',
-    'chili',
-    'chill',
-    'chimp',
-    'chip',
-    'chirping',
-    'chirpy',
-    'chitchat',
-    'chivalry',
-    'chive',
-    'chloride',
-    'chlorine',
-    'choice',
-    'chokehold',
-    'choking',
-    'chomp',
-    'chooser',
-    'choosing',
-    'choosy',
-    'chop',
-    'chosen',
-    'chowder',
-    'chowtime',
-    'chrome',
-    'chubby',
-    'chuck',
-    'chug',
-    'chummy',
-    'chump',
-    'chunk',
-    'churn',
-    'chute',
-    'cider',
-    'cilantro',
-    'cinch',
-    'cinema',
-    'cinnamon',
-    'circle',
-    'circling',
-    'circular',
-    'circulate',
-    'circus',
-    'citable',
-    'citadel',
-    'citation',
-    'citizen',
-    'citric',
-    'citrus',
-    'city',
-    'civic',
-    'civil',
-    'clad',
-    'claim',
-    'clambake',
-    'clammy',
-    'clamor',
-    'clamp',
-    'clamshell',
-    'clang',
-    'clanking',
-    'clapped',
-    'clapper',
-    'clapping',
-    'clarify',
-    'clarinet',
-    'clarity',
-    'clash',
-    'clasp',
-    'class',
-    'clatter',
-    'clause',
-    'clavicle',
-    'claw',
-    'clay',
-    'clean',
-    'clear',
-    'cleat',
-    'cleaver',
-    'cleft',
-    'clench',
-    'clergyman',
-    'clerical',
-    'clerk',
-    'clever',
-    'clicker',
-    'client',
-    'climate',
-    'climatic',
-    'cling',
-    'clinic',
-    'clinking',
-    'clip',
-    'clique',
-    'cloak',
-    'clobber',
-    'clock',
-    'clone',
-    'cloning',
-    'closable',
-    'closure',
-    'clothes',
-    'clothing',
-    'cloud',
-    'clover',
-    'clubbed',
-    'clubbing',
-    'clubhouse',
-    'clump',
-    'clumsily',
-    'clumsy',
-    'clunky',
-    'clustered',
-    'clutch',
-    'clutter',
-    'coach',
-    'coagulant',
-    'coastal',
-    'coaster',
-    'coasting',
-    'coastland',
-    'coastline',
-    'coat',
-    'coauthor',
-    'cobalt',
-    'cobbler',
-    'cobweb',
-    'cocoa',
-    'coconut',
-    'cod',
-    'coeditor',
-    'coerce',
-    'coexist',
-    'coffee',
-    'cofounder',
-    'cognition',
-    'cognitive',
-    'cogwheel',
-    'coherence',
-    'coherent',
-    'cohesive',
-    'coil',
-    'coke',
-    'cola',
-    'cold',
-    'coleslaw',
-    'coliseum',
-    'collage',
-    'collapse',
-    'collar',
-    'collected',
-    'collector',
-    'collide',
-    'collie',
-    'collision',
-    'colonial',
-    'colonist',
-    'colonize',
-    'colony',
-    'colossal',
-    'colt',
-    'coma',
-    'come',
-    'comfort',
-    'comfy',
-    'comic',
-    'coming',
-    'comma',
-    'commence',
-    'commend',
-    'comment',
-    'commerce',
-    'commode',
-    'commodity',
-    'commodore',
-    'common',
-    'commotion',
-    'commute',
-    'commuting',
-    'compacted',
-    'compacter',
-    'compactly',
-    'compactor',
-    'companion',
-    'company',
-    'compare',
-    'compel',
-    'compile',
-    'comply',
-    'component',
-    'composed',
-    'composer',
-    'composite',
-    'compost',
-    'composure',
-    'compound',
-    'compress',
-    'comprised',
-    'computer',
-    'computing',
-    'comrade',
-    'concave',
-    'conceal',
-    'conceded',
-    'concept',
-    'concerned',
-    'concert',
-    'conch',
-    'concierge',
-    'concise',
-    'conclude',
-    'concrete',
-    'concur',
-    'condense',
-    'condiment',
-    'condition',
-    'condone',
-    'conducive',
-    'conductor',
-    'conduit',
-    'cone',
-    'confess',
-    'confetti',
-    'confidant',
-    'confident',
-    'confider',
-    'confiding',
-    'configure',
-    'confined',
-    'confining',
-    'confirm',
-    'conflict',
-    'conform',
-    'confound',
-    'confront',
-    'confused',
-    'confusing',
-    'confusion',
-    'congenial',
-    'congested',
-    'congrats',
-    'congress',
-    'conical',
-    'conjoined',
-    'conjure',
-    'conjuror',
-    'connected',
-    'connector',
-    'consensus',
-    'consent',
-    'console',
-    'consoling',
-    'consonant',
-    'constable',
-    'constant',
-    'constrain',
-    'constrict',
-    'construct',
-    'consult',
-    'consumer',
-    'consuming',
-    'contact',
-    'container',
-    'contempt',
-    'contend',
-    'contented',
-    'contently',
-    'contents',
-    'contest',
-    'context',
-    'contort',
-    'contour',
-    'contrite',
-    'control',
-    'contusion',
-    'convene',
-    'convent',
-    'copartner',
-    'cope',
-    'copied',
-    'copier',
-    'copilot',
-    'coping',
-    'copious',
-    'copper',
-    'copy',
-    'coral',
-    'cork',
-    'cornball',
-    'cornbread',
-    'corncob',
-    'cornea',
-    'corned',
-    'corner',
-    'cornfield',
-    'cornflake',
-    'cornhusk',
-    'cornmeal',
-    'cornstalk',
-    'corny',
-    'coronary',
-    'coroner',
-    'corporal',
-    'corporate',
-    'corral',
-    'correct',
-    'corridor',
-    'corrode',
-    'corroding',
-    'corrosive',
-    'corsage',
-    'corset',
-    'cortex',
-    'cosigner',
-    'cosmetics',
-    'cosmic',
-    'cosmos',
-    'cosponsor',
-    'cost',
-    'cottage',
-    'cotton',
-    'couch',
-    'cough',
-    'could',
-    'countable',
-    'countdown',
-    'counting',
-    'countless',
-    'country',
-    'county',
-    'courier',
-    'covenant',
-    'cover',
-    'coveted',
-    'coveting',
-    'coyness',
-    'cozily',
-    'coziness',
-    'cozy',
-    'crabbing',
-    'crabgrass',
-    'crablike',
-    'crabmeat',
-    'cradle',
-    'cradling',
-    'crafter',
-    'craftily',
-    'craftsman',
-    'craftwork',
-    'crafty',
-    'cramp',
-    'cranberry',
-    'crane',
-    'cranial',
-    'cranium',
-    'crank',
-    'crate',
-    'crave',
-    'craving',
-    'crawfish',
-    'crawlers',
-    'crawling',
-    'crayfish',
-    'crayon',
-    'crazed',
-    'crazily',
-    'craziness',
-    'crazy',
-    'creamed',
-    'creamer',
-    'creamlike',
-    'crease',
-    'creasing',
-    'creatable',
-    'create',
-    'creation',
-    'creative',
-    'creature',
-    'credible',
-    'credibly',
-    'credit',
-    'creed',
-    'creme',
-    'creole',
-    'crepe',
-    'crept',
-    'crescent',
-    'crested',
-    'cresting',
-    'crestless',
-    'crevice',
-    'crewless',
-    'crewman',
-    'crewmate',
-    'crib',
-    'cricket',
-    'cried',
-    'crier',
-    'crimp',
-    'crimson',
-    'cringe',
-    'cringing',
-    'crinkle',
-    'crinkly',
-    'crisped',
-    'crisping',
-    'crisply',
-    'crispness',
-    'crispy',
-    'criteria',
-    'critter',
-    'croak',
-    'crock',
-    'crook',
-    'croon',
-    'crop',
-    'cross',
-    'crouch',
-    'crouton',
-    'crowbar',
-    'crowd',
-    'crown',
-    'crucial',
-    'crudely',
-    'crudeness',
-    'cruelly',
-    'cruelness',
-    'cruelty',
-    'crumb',
-    'crummiest',
-    'crummy',
-    'crumpet',
-    'crumpled',
-    'cruncher',
-    'crunching',
-    'crunchy',
-    'crusader',
-    'crushable',
-    'crushed',
-    'crusher',
-    'crushing',
-    'crust',
-    'crux',
-    'crying',
-    'cryptic',
-    'crystal',
-    'cubbyhole',
-    'cube',
-    'cubical',
-    'cubicle',
-    'cucumber',
-    'cuddle',
-    'cuddly',
-    'cufflink',
-    'culinary',
-    'culminate',
-    'culpable',
-    'culprit',
-    'cultivate',
-    'cultural',
-    'culture',
-    'cupbearer',
-    'cupcake',
-    'cupid',
-    'cupped',
-    'cupping',
-    'curable',
-    'curator',
-    'curdle',
-    'cure',
-    'curfew',
-    'curing',
-    'curled',
-    'curler',
-    'curliness',
-    'curling',
-    'curly',
-    'curry',
-    'curse',
-    'cursive',
-    'cursor',
-    'curtain',
-    'curtly',
-    'curtsy',
-    'curvature',
-    'curve',
-    'curvy',
-    'cushy',
-    'cusp',
-    'cussed',
-    'custard',
-    'custodian',
-    'custody',
-    'customary',
-    'customer',
-    'customize',
-    'customs',
-    'cut',
-    'cycle',
-    'cyclic',
-    'cycling',
-    'cyclist',
-    'cylinder',
-    'cymbal',
-    'cytoplasm',
-    'cytoplast',
-    'dab',
-    'dad',
-    'daffodil',
-    'dagger',
-    'daily',
-    'daintily',
-    'dainty',
-    'dairy',
-    'daisy',
-    'dallying',
-    'dance',
-    'dancing',
-    'dandelion',
-    'dander',
-    'dandruff',
-    'dandy',
-    'danger',
-    'dangle',
-    'dangling',
-    'daredevil',
-    'dares',
-    'daringly',
-    'darkened',
-    'darkening',
-    'darkish',
-    'darkness',
-    'darkroom',
-    'darling',
-    'darn',
-    'dart',
-    'darwinism',
-    'dash',
-    'dastardly',
-    'data',
-    'datebook',
-    'dating',
-    'daughter',
-    'daunting',
-    'dawdler',
-    'dawn',
-    'daybed',
-    'daybreak',
-    'daycare',
-    'daydream',
-    'daylight',
-    'daylong',
-    'dayroom',
-    'daytime',
-    'dazzler',
-    'dazzling',
-    'deacon',
-    'deafening',
-    'deafness',
-    'dealer',
-    'dealing',
-    'dealmaker',
-    'dealt',
-    'dean',
-    'debatable',
-    'debate',
-    'debating',
-    'debit',
-    'debrief',
-    'debtless',
-    'debtor',
-    'debug',
-    'debunk',
-    'decade',
-    'decaf',
-    'decal',
-    'decathlon',
-    'decay',
-    'deceased',
-    'deceit',
-    'deceiver',
-    'deceiving',
-    'december',
-    'decency',
-    'decent',
-    'deception',
-    'deceptive',
-    'decibel',
-    'decidable',
-    'decimal',
-    'decimeter',
-    'decipher',
-    'deck',
-    'declared',
-    'decline',
-    'decode',
-    'decompose',
-    'decorated',
-    'decorator',
-    'decoy',
-    'decrease',
-    'decree',
-    'dedicate',
-    'dedicator',
-    'deduce',
-    'deduct',
-    'deed',
-    'deem',
-    'deepen',
-    'deeply',
-    'deepness',
-    'deface',
-    'defacing',
-    'defame',
-    'default',
-    'defeat',
-    'defection',
-    'defective',
-    'defendant',
-    'defender',
-    'defense',
-    'defensive',
-    'deferral',
-    'deferred',
-    'defiance',
-    'defiant',
-    'defile',
-    'defiling',
-    'define',
-    'definite',
-    'deflate',
-    'deflation',
-    'deflator',
-    'deflected',
-    'deflector',
-    'defog',
-    'deforest',
-    'defraud',
-    'defrost',
-    'deftly',
-    'defuse',
-    'defy',
-    'degraded',
-    'degrading',
-    'degrease',
-    'degree',
-    'dehydrate',
-    'deity',
-    'dejected',
-    'delay',
-    'delegate',
-    'delegator',
-    'delete',
-    'deletion',
-    'delicacy',
-    'delicate',
-    'delicious',
-    'delighted',
-    'delirious',
-    'delirium',
-    'deliverer',
-    'delivery',
-    'delouse',
-    'delta',
-    'deluge',
-    'delusion',
-    'deluxe',
-    'demanding',
-    'demeaning',
-    'demeanor',
-    'demise',
-    'democracy',
-    'democrat',
-    'demote',
-    'demotion',
-    'demystify',
-    'denatured',
-    'deniable',
-    'denial',
-    'denim',
-    'denote',
-    'dense',
-    'density',
-    'dental',
-    'dentist',
-    'denture',
-    'deny',
-    'deodorant',
-    'deodorize',
-    'departed',
-    'departure',
-    'depict',
-    'deplete',
-    'depletion',
-    'deplored',
-    'deploy',
-    'deport',
-    'depose',
-    'depraved',
-    'depravity',
-    'deprecate',
-    'depress',
-    'deprive',
-    'depth',
-    'deputize',
-    'deputy',
-    'derail',
-    'deranged',
-    'derby',
-    'derived',
-    'desecrate',
-    'deserve',
-    'deserving',
-    'designate',
-    'designed',
-    'designer',
-    'designing',
-    'deskbound',
-    'desktop',
-    'deskwork',
-    'desolate',
-    'despair',
-    'despise',
-    'despite',
-    'destiny',
-    'destitute',
-    'destruct',
-    'detached',
-    'detail',
-    'detection',
-    'detective',
-    'detector',
-    'detention',
-    'detergent',
-    'detest',
-    'detonate',
-    'detonator',
-    'detoxify',
-    'detract',
-    'deuce',
-    'devalue',
-    'deviancy',
-    'deviant',
-    'deviate',
-    'deviation',
-    'deviator',
-    'device',
-    'devious',
-    'devotedly',
-    'devotee',
-    'devotion',
-    'devourer',
-    'devouring',
-    'devoutly',
-    'dexterity',
-    'dexterous',
-    'diabetes',
-    'diabetic',
-    'diabolic',
-    'diagnoses',
-    'diagnosis',
-    'diagram',
-    'dial',
-    'diameter',
-    'diaper',
-    'diaphragm',
-    'diary',
-    'dice',
-    'dicing',
-    'dictate',
-    'dictation',
-    'dictator',
-    'difficult',
-    'diffused',
-    'diffuser',
-    'diffusion',
-    'diffusive',
-    'dig',
-    'dilation',
-    'diligence',
-    'diligent',
-    'dill',
-    'dilute',
-    'dime',
-    'diminish',
-    'dimly',
-    'dimmed',
-    'dimmer',
-    'dimness',
-    'dimple',
-    'diner',
-    'dingbat',
-    'dinghy',
-    'dinginess',
-    'dingo',
-    'dingy',
-    'dining',
-    'dinner',
-    'diocese',
-    'dioxide',
-    'diploma',
-    'dipped',
-    'dipper',
-    'dipping',
-    'directed',
-    'direction',
-    'directive',
-    'directly',
-    'directory',
-    'direness',
-    'dirtiness',
-    'disabled',
-    'disagree',
-    'disallow',
-    'disarm',
-    'disarray',
-    'disaster',
-    'disband',
-    'disbelief',
-    'disburse',
-    'discard',
-    'discern',
-    'discharge',
-    'disclose',
-    'discolor',
-    'discount',
-    'discourse',
-    'discover',
-    'discuss',
-    'disdain',
-    'disengage',
-    'disfigure',
-    'disgrace',
-    'dish',
-    'disinfect',
-    'disjoin',
-    'disk',
-    'dislike',
-    'disliking',
-    'dislocate',
-    'dislodge',
-    'disloyal',
-    'dismantle',
-    'dismay',
-    'dismiss',
-    'dismount',
-    'disobey',
-    'disorder',
-    'disown',
-    'disparate',
-    'disparity',
-    'dispatch',
-    'dispense',
-    'dispersal',
-    'dispersed',
-    'disperser',
-    'displace',
-    'display',
-    'displease',
-    'disposal',
-    'dispose',
-    'disprove',
-    'dispute',
-    'disregard',
-    'disrupt',
-    'dissuade',
-    'distance',
-    'distant',
-    'distaste',
-    'distill',
-    'distinct',
-    'distort',
-    'distract',
-    'distress',
-    'district',
-    'distrust',
-    'ditch',
-    'ditto',
-    'ditzy',
-    'dividable',
-    'divided',
-    'dividend',
-    'dividers',
-    'dividing',
-    'divinely',
-    'diving',
-    'divinity',
-    'divisible',
-    'divisibly',
-    'division',
-    'divisive',
-    'divorcee',
-    'dizziness',
-    'dizzy',
-    'doable',
-    'docile',
-    'dock',
-    'doctrine',
-    'document',
-    'dodge',
-    'dodgy',
-    'doily',
-    'doing',
-    'dole',
-    'dollar',
-    'dollhouse',
-    'dollop',
-    'dolly',
-    'dolphin',
-    'domain',
-    'domelike',
-    'domestic',
-    'dominion',
-    'dominoes',
-    'donated',
-    'donation',
-    'donator',
-    'donor',
-    'donut',
-    'doodle',
-    'doorbell',
-    'doorframe',
-    'doorknob',
-    'doorman',
-    'doormat',
-    'doornail',
-    'doorpost',
-    'doorstep',
-    'doorstop',
-    'doorway',
-    'doozy',
-    'dork',
-    'dormitory',
-    'dorsal',
-    'dosage',
-    'dose',
-    'dotted',
-    'doubling',
-    'douche',
-    'dove',
-    'down',
-    'dowry',
-    'doze',
-    'drab',
-    'dragging',
-    'dragonfly',
-    'dragonish',
-    'dragster',
-    'drainable',
-    'drainage',
-    'drained',
-    'drainer',
-    'drainpipe',
-    'dramatic',
-    'dramatize',
-    'drank',
-    'drapery',
-    'drastic',
-    'draw',
-    'dreaded',
-    'dreadful',
-    'dreadlock',
-    'dreamboat',
-    'dreamily',
-    'dreamland',
-    'dreamless',
-    'dreamlike',
-    'dreamt',
-    'dreamy',
-    'drearily',
-    'dreary',
-    'drench',
-    'dress',
-    'drew',
-    'dribble',
-    'dried',
-    'drier',
-    'drift',
-    'driller',
-    'drilling',
-    'drinkable',
-    'drinking',
-    'dripping',
-    'drippy',
-    'drivable',
-    'driven',
-    'driver',
-    'driveway',
-    'driving',
-    'drizzle',
-    'drizzly',
-    'drone',
-    'drool',
-    'droop',
-    'drop-down',
-    'dropbox',
-    'dropkick',
-    'droplet',
-    'dropout',
-    'dropper',
-    'drove',
-    'drown',
-    'drowsily',
-    'drudge',
-    'drum',
-    'dry',
-    'dubbed',
-    'dubiously',
-    'duchess',
-    'duckbill',
-    'ducking',
-    'duckling',
-    'ducktail',
-    'ducky',
-    'duct',
-    'dude',
-    'duffel',
-    'dugout',
-    'duh',
-    'duke',
-    'duller',
-    'dullness',
-    'duly',
-    'dumping',
-    'dumpling',
-    'dumpster',
-    'duo',
-    'dupe',
-    'duplex',
-    'duplicate',
-    'duplicity',
-    'durable',
-    'durably',
-    'duration',
-    'duress',
-    'during',
-    'dusk',
-    'dust',
-    'dutiful',
-    'duty',
-    'duvet',
-    'dwarf',
-    'dweeb',
-    'dwelled',
-    'dweller',
-    'dwelling',
-    'dwindle',
-    'dwindling',
-    'dynamic',
-    'dynamite',
-    'dynasty',
-    'dyslexia',
-    'dyslexic',
-    'each',
-    'eagle',
-    'earache',
-    'eardrum',
-    'earflap',
-    'earful',
-    'earlobe',
-    'early',
-    'earmark',
-    'earmuff',
-    'earphone',
-    'earpiece',
-    'earplugs',
-    'earring',
-    'earshot',
-    'earthen',
-    'earthlike',
-    'earthling',
-    'earthly',
-    'earthworm',
-    'earthy',
-    'earwig',
-    'easeful',
-    'easel',
-    'easiest',
-    'easily',
-    'easiness',
-    'easing',
-    'eastbound',
-    'eastcoast',
-    'easter',
-    'eastward',
-    'eatable',
-    'eaten',
-    'eatery',
-    'eating',
-    'eats',
-    'ebay',
-    'ebony',
-    'ebook',
-    'ecard',
-    'eccentric',
-    'echo',
-    'eclair',
-    'eclipse',
-    'ecologist',
-    'ecology',
-    'economic',
-    'economist',
-    'economy',
-    'ecosphere',
-    'ecosystem',
-    'edge',
-    'edginess',
-    'edging',
-    'edgy',
-    'edition',
-    'editor',
-    'educated',
-    'education',
-    'educator',
-    'eel',
-    'effective',
-    'effects',
-    'efficient',
-    'effort',
-    'eggbeater',
-    'egging',
-    'eggnog',
-    'eggplant',
-    'eggshell',
-    'egomaniac',
-    'egotism',
-    'egotistic',
-    'either',
-    'eject',
-    'elaborate',
-    'elastic',
-    'elated',
-    'elbow',
-    'eldercare',
-    'elderly',
-    'eldest',
-    'electable',
-    'election',
-    'elective',
-    'elephant',
-    'elevate',
-    'elevating',
-    'elevation',
-    'elevator',
-    'eleven',
-    'elf',
-    'eligible',
-    'eligibly',
-    'eliminate',
-    'elite',
-    'elitism',
-    'elixir',
-    'elk',
-    'ellipse',
-    'elliptic',
-    'elm',
-    'elongated',
-    'elope',
-    'eloquence',
-    'eloquent',
-    'elsewhere',
-    'elude',
-    'elusive',
-    'elves',
-    'email',
-    'embargo',
-    'embark',
-    'embassy',
-    'embattled',
-    'embellish',
-    'ember',
-    'embezzle',
-    'emblaze',
-    'emblem',
-    'embody',
-    'embolism',
-    'emboss',
-    'embroider',
-    'emcee',
-    'emerald',
-    'emergency',
-    'emission',
-    'emit',
-    'emote',
-    'emoticon',
-    'emotion',
-    'empathic',
-    'empathy',
-    'emperor',
-    'emphases',
-    'emphasis',
-    'emphasize',
-    'emphatic',
-    'empirical',
-    'employed',
-    'employee',
-    'employer',
-    'emporium',
-    'empower',
-    'emptier',
-    'emptiness',
-    'empty',
-    'emu',
-    'enable',
-    'enactment',
-    'enamel',
-    'enchanted',
-    'enchilada',
-    'encircle',
-    'enclose',
-    'enclosure',
-    'encode',
-    'encore',
-    'encounter',
-    'encourage',
-    'encroach',
-    'encrust',
-    'encrypt',
-    'endanger',
-    'endeared',
-    'endearing',
-    'ended',
-    'ending',
-    'endless',
-    'endnote',
-    'endocrine',
-    'endorphin',
-    'endorse',
-    'endowment',
-    'endpoint',
-    'endurable',
-    'endurance',
-    'enduring',
-    'energetic',
-    'energize',
-    'energy',
-    'enforced',
-    'enforcer',
-    'engaged',
-    'engaging',
-    'engine',
-    'engorge',
-    'engraved',
-    'engraver',
-    'engraving',
-    'engross',
-    'engulf',
-    'enhance',
-    'enigmatic',
-    'enjoyable',
-    'enjoyably',
-    'enjoyer',
-    'enjoying',
-    'enjoyment',
-    'enlarged',
-    'enlarging',
-    'enlighten',
-    'enlisted',
-    'enquirer',
-    'enrage',
-    'enrich',
-    'enroll',
-    'enslave',
-    'ensnare',
-    'ensure',
-    'entail',
-    'entangled',
-    'entering',
-    'entertain',
-    'enticing',
-    'entire',
-    'entitle',
-    'entity',
-    'entomb',
-    'entourage',
-    'entrap',
-    'entree',
-    'entrench',
-    'entrust',
-    'entryway',
-    'entwine',
-    'enunciate',
-    'envelope',
-    'enviable',
-    'enviably',
-    'envious',
-    'envision',
-    'envoy',
-    'envy',
-    'enzyme',
-    'epic',
-    'epidemic',
-    'epidermal',
-    'epidermis',
-    'epidural',
-    'epilepsy',
-    'epileptic',
-    'epilogue',
-    'epiphany',
-    'episode',
-    'equal',
-    'equate',
-    'equation',
-    'equator',
-    'equinox',
-    'equipment',
-    'equity',
-    'equivocal',
-    'eradicate',
-    'erasable',
-    'erased',
-    'eraser',
-    'erasure',
-    'ergonomic',
-    'errand',
-    'errant',
-    'erratic',
-    'error',
-    'erupt',
-    'escalate',
-    'escalator',
-    'escapable',
-    'escapade',
-    'escapist',
-    'escargot',
-    'eskimo',
-    'esophagus',
-    'espionage',
-    'espresso',
-    'esquire',
-    'essay',
-    'essence',
-    'essential',
-    'establish',
-    'estate',
-    'esteemed',
-    'estimate',
-    'estimator',
-    'estranged',
-    'estrogen',
-    'etching',
-    'eternal',
-    'eternity',
-    'ethanol',
-    'ether',
-    'ethically',
-    'ethics',
-    'euphemism',
-    'evacuate',
-    'evacuee',
-    'evade',
-    'evaluate',
-    'evaluator',
-    'evaporate',
-    'evasion',
-    'evasive',
-    'even',
-    'everglade',
-    'evergreen',
-    'everybody',
-    'everyday',
-    'everyone',
-    'evict',
-    'evidence',
-    'evident',
-    'evil',
-    'evoke',
-    'evolution',
-    'evolve',
-    'exact',
-    'exalted',
-    'example',
-    'excavate',
-    'excavator',
-    'exceeding',
-    'exception',
-    'excess',
-    'exchange',
-    'excitable',
-    'exciting',
-    'exclaim',
-    'exclude',
-    'excluding',
-    'exclusion',
-    'exclusive',
-    'excretion',
-    'excretory',
-    'excursion',
-    'excusable',
-    'excusably',
-    'excuse',
-    'exemplary',
-    'exemplify',
-    'exemption',
-    'exerciser',
-    'exert',
-    'exes',
-    'exfoliate',
-    'exhale',
-    'exhaust',
-    'exhume',
-    'exile',
-    'existing',
-    'exit',
-    'exodus',
-    'exonerate',
-    'exorcism',
-    'exorcist',
-    'expand',
-    'expanse',
-    'expansion',
-    'expansive',
-    'expectant',
-    'expedited',
-    'expediter',
-    'expel',
-    'expend',
-    'expenses',
-    'expensive',
-    'expert',
-    'expire',
-    'expiring',
-    'explain',
-    'expletive',
-    'explicit',
-    'explode',
-    'exploit',
-    'explore',
-    'exploring',
-    'exponent',
-    'exporter',
-    'exposable',
-    'expose',
-    'exposure',
-    'express',
-    'expulsion',
-    'exquisite',
-    'extended',
-    'extending',
-    'extent',
-    'extenuate',
-    'exterior',
-    'external',
-    'extinct',
-    'extortion',
-    'extradite',
-    'extras',
-    'extrovert',
-    'extrude',
-    'extruding',
-    'exuberant',
-    'fable',
-    'fabric',
-    'fabulous',
-    'facebook',
-    'facecloth',
-    'facedown',
-    'faceless',
-    'facelift',
-    'faceplate',
-    'faceted',
-    'facial',
-    'facility',
-    'facing',
-    'facsimile',
-    'faction',
-    'factoid',
-    'factor',
-    'factsheet',
-    'factual',
-    'faculty',
-    'fade',
-    'fading',
-    'failing',
-    'falcon',
-    'fall',
-    'false',
-    'falsify',
-    'fame',
-    'familiar',
-    'family',
-    'famine',
-    'famished',
-    'fanatic',
-    'fancied',
-    'fanciness',
-    'fancy',
-    'fanfare',
-    'fang',
-    'fanning',
-    'fantasize',
-    'fantastic',
-    'fantasy',
-    'fascism',
-    'fastball',
-    'faster',
-    'fasting',
-    'fastness',
-    'faucet',
-    'favorable',
-    'favorably',
-    'favored',
-    'favoring',
-    'favorite',
-    'fax',
-    'feast',
-    'federal',
-    'fedora',
-    'feeble',
-    'feed',
-    'feel',
-    'feisty',
-    'feline',
-    'felt-tip',
-    'feminine',
-    'feminism',
-    'feminist',
-    'feminize',
-    'femur',
-    'fence',
-    'fencing',
-    'fender',
-    'ferment',
-    'fernlike',
-    'ferocious',
-    'ferocity',
-    'ferret',
-    'ferris',
-    'ferry',
-    'fervor',
-    'fester',
-    'festival',
-    'festive',
-    'festivity',
-    'fetal',
-    'fetch',
-    'fever',
-    'fiber',
-    'fiction',
-    'fiddle',
-    'fiddling',
-    'fidelity',
-    'fidgeting',
-    'fidgety',
-    'fifteen',
-    'fifth',
-    'fiftieth',
-    'fifty',
-    'figment',
-    'figure',
-    'figurine',
-    'filing',
-    'filled',
-    'filler',
-    'filling',
-    'film',
-    'filter',
-    'filth',
-    'filtrate',
-    'finale',
-    'finalist',
-    'finalize',
-    'finally',
-    'finance',
-    'financial',
-    'finch',
-    'fineness',
-    'finer',
-    'finicky',
-    'finished',
-    'finisher',
-    'finishing',
-    'finite',
-    'finless',
-    'finlike',
-    'fiscally',
-    'fit',
-    'five',
-    'flaccid',
-    'flagman',
-    'flagpole',
-    'flagship',
-    'flagstick',
-    'flagstone',
-    'flail',
-    'flakily',
-    'flaky',
-    'flame',
-    'flammable',
-    'flanked',
-    'flanking',
-    'flannels',
-    'flap',
-    'flaring',
-    'flashback',
-    'flashbulb',
-    'flashcard',
-    'flashily',
-    'flashing',
-    'flashy',
-    'flask',
-    'flatbed',
-    'flatfoot',
-    'flatly',
-    'flatness',
-    'flatten',
-    'flattered',
-    'flatterer',
-    'flattery',
-    'flattop',
-    'flatware',
-    'flatworm',
-    'flavored',
-    'flavorful',
-    'flavoring',
-    'flaxseed',
-    'fled',
-    'fleshed',
-    'fleshy',
-    'flick',
-    'flier',
-    'flight',
-    'flinch',
-    'fling',
-    'flint',
-    'flip',
-    'flirt',
-    'float',
-    'flock',
-    'flogging',
-    'flop',
-    'floral',
-    'florist',
-    'floss',
-    'flounder',
-    'flyable',
-    'flyaway',
-    'flyer',
-    'flying',
-    'flyover',
-    'flypaper',
-    'foam',
-    'foe',
-    'fog',
-    'foil',
-    'folic',
-    'folk',
-    'follicle',
-    'follow',
-    'fondling',
-    'fondly',
-    'fondness',
-    'fondue',
-    'font',
-    'food',
-    'fool',
-    'footage',
-    'football',
-    'footbath',
-    'footboard',
-    'footer',
-    'footgear',
-    'foothill',
-    'foothold',
-    'footing',
-    'footless',
-    'footman',
-    'footnote',
-    'footpad',
-    'footpath',
-    'footprint',
-    'footrest',
-    'footsie',
-    'footsore',
-    'footwear',
-    'footwork',
-    'fossil',
-    'foster',
-    'founder',
-    'founding',
-    'fountain',
-    'fox',
-    'foyer',
-    'fraction',
-    'fracture',
-    'fragile',
-    'fragility',
-    'fragment',
-    'fragrance',
-    'fragrant',
-    'frail',
-    'frame',
-    'framing',
-    'frantic',
-    'fraternal',
-    'frayed',
-    'fraying',
-    'frays',
-    'freckled',
-    'freckles',
-    'freebase',
-    'freebee',
-    'freebie',
-    'freedom',
-    'freefall',
-    'freehand',
-    'freeing',
-    'freeload',
-    'freely',
-    'freemason',
-    'freeness',
-    'freestyle',
-    'freeware',
-    'freeway',
-    'freewill',
-    'freezable',
-    'freezing',
-    'freight',
-    'french',
-    'frenzied',
-    'frenzy',
-    'frequency',
-    'frequent',
-    'fresh',
-    'fretful',
-    'fretted',
-    'friction',
-    'friday',
-    'fridge',
-    'fried',
-    'friend',
-    'frighten',
-    'frightful',
-    'frigidity',
-    'frigidly',
-    'frill',
-    'fringe',
-    'frisbee',
-    'frisk',
-    'fritter',
-    'frivolous',
-    'frolic',
-    'from',
-    'front',
-    'frostbite',
-    'frosted',
-    'frostily',
-    'frosting',
-    'frostlike',
-    'frosty',
-    'froth',
-    'frown',
-    'frozen',
-    'fructose',
-    'frugality',
-    'frugally',
-    'fruit',
-    'frustrate',
-    'frying',
-    'gab',
-    'gaffe',
-    'gag',
-    'gainfully',
-    'gaining',
-    'gains',
-    'gala',
-    'gallantly',
-    'galleria',
-    'gallery',
-    'galley',
-    'gallon',
-    'gallows',
-    'gallstone',
-    'galore',
-    'galvanize',
-    'gambling',
-    'game',
-    'gaming',
-    'gamma',
-    'gander',
-    'gangly',
-    'gangrene',
-    'gangway',
-    'gap',
-    'garage',
-    'garbage',
-    'garden',
-    'gargle',
-    'garland',
-    'garlic',
-    'garment',
-    'garnet',
-    'garnish',
-    'garter',
-    'gas',
-    'gatherer',
-    'gathering',
-    'gating',
-    'gauging',
-    'gauntlet',
-    'gauze',
-    'gave',
-    'gawk',
-    'gazing',
-    'gear',
-    'gecko',
-    'geek',
-    'geiger',
-    'gem',
-    'gender',
-    'generic',
-    'generous',
-    'genetics',
-    'genre',
-    'gentile',
-    'gentleman',
-    'gently',
-    'gents',
-    'geography',
-    'geologic',
-    'geologist',
-    'geology',
-    'geometric',
-    'geometry',
-    'geranium',
-    'gerbil',
-    'geriatric',
-    'germicide',
-    'germinate',
-    'germless',
-    'germproof',
-    'gestate',
-    'gestation',
-    'gesture',
-    'getaway',
-    'getting',
-    'getup',
-    'giant',
-    'gibberish',
-    'giblet',
-    'giddily',
-    'giddiness',
-    'giddy',
-    'gift',
-    'gigabyte',
-    'gigahertz',
-    'gigantic',
-    'giggle',
-    'giggling',
-    'giggly',
-    'gigolo',
-    'gilled',
-    'gills',
-    'gimmick',
-    'girdle',
-    'giveaway',
-    'given',
-    'giver',
-    'giving',
-    'gizmo',
-    'gizzard',
-    'glacial',
-    'glacier',
-    'glade',
-    'gladiator',
-    'gladly',
-    'glamorous',
-    'glamour',
-    'glance',
-    'glancing',
-    'glandular',
-    'glare',
-    'glaring',
-    'glass',
-    'glaucoma',
-    'glazing',
-    'gleaming',
-    'gleeful',
-    'glider',
-    'gliding',
-    'glimmer',
-    'glimpse',
-    'glisten',
-    'glitch',
-    'glitter',
-    'glitzy',
-    'gloater',
-    'gloating',
-    'gloomily',
-    'gloomy',
-    'glorified',
-    'glorifier',
-    'glorify',
-    'glorious',
-    'glory',
-    'gloss',
-    'glove',
-    'glowing',
-    'glowworm',
-    'glucose',
-    'glue',
-    'gluten',
-    'glutinous',
-    'glutton',
-    'gnarly',
-    'gnat',
-    'goal',
-    'goatskin',
-    'goes',
-    'goggles',
-    'going',
-    'goldfish',
-    'goldmine',
-    'goldsmith',
-    'golf',
-    'goliath',
-    'gonad',
-    'gondola',
-    'gone',
-    'gong',
-    'good',
-    'gooey',
-    'goofball',
-    'goofiness',
-    'goofy',
-    'google',
-    'goon',
-    'gopher',
-    'gore',
-    'gorged',
-    'gorgeous',
-    'gory',
-    'gosling',
-    'gossip',
-    'gothic',
-    'gotten',
-    'gout',
-    'gown',
-    'grab',
-    'graceful',
-    'graceless',
-    'gracious',
-    'gradation',
-    'graded',
-    'grader',
-    'gradient',
-    'grading',
-    'gradually',
-    'graduate',
-    'graffiti',
-    'grafted',
-    'grafting',
-    'grain',
-    'granddad',
-    'grandkid',
-    'grandly',
-    'grandma',
-    'grandpa',
-    'grandson',
-    'granite',
-    'granny',
-    'granola',
-    'grant',
-    'granular',
-    'grape',
-    'graph',
-    'grapple',
-    'grappling',
-    'grasp',
-    'grass',
-    'gratified',
-    'gratify',
-    'grating',
-    'gratitude',
-    'gratuity',
-    'gravel',
-    'graveness',
-    'graves',
-    'graveyard',
-    'gravitate',
-    'gravity',
-    'gravy',
-    'gray',
-    'grazing',
-    'greasily',
-    'greedily',
-    'greedless',
-    'greedy',
-    'green',
-    'greeter',
-    'greeting',
-    'grew',
-    'greyhound',
-    'grid',
-    'grief',
-    'grievance',
-    'grieving',
-    'grievous',
-    'grill',
-    'grimace',
-    'grimacing',
-    'grime',
-    'griminess',
-    'grimy',
-    'grinch',
-    'grinning',
-    'grip',
-    'gristle',
-    'grit',
-    'groggily',
-    'groggy',
-    'groin',
-    'groom',
-    'groove',
-    'grooving',
-    'groovy',
-    'grope',
-    'ground',
-    'grouped',
-    'grout',
-    'grove',
-    'grower',
-    'growing',
-    'growl',
-    'grub',
-    'grudge',
-    'grudging',
-    'grueling',
-    'gruffly',
-    'grumble',
-    'grumbling',
-    'grumbly',
-    'grumpily',
-    'grunge',
-    'grunt',
-    'guacamole',
-    'guidable',
-    'guidance',
-    'guide',
-    'guiding',
-    'guileless',
-    'guise',
-    'gulf',
-    'gullible',
-    'gully',
-    'gulp',
-    'gumball',
-    'gumdrop',
-    'gumminess',
-    'gumming',
-    'gummy',
-    'gurgle',
-    'gurgling',
-    'guru',
-    'gush',
-    'gusto',
-    'gusty',
-    'gutless',
-    'guts',
-    'gutter',
-    'guy',
-    'guzzler',
-    'gyration',
-    'habitable',
-    'habitant',
-    'habitat',
-    'habitual',
-    'hacked',
-    'hacker',
-    'hacking',
-    'hacksaw',
-    'had',
-    'haggler',
-    'haiku',
-    'half',
-    'halogen',
-    'halt',
-    'halved',
-    'halves',
-    'hamburger',
-    'hamlet',
-    'hammock',
-    'hamper',
-    'hamster',
-    'hamstring',
-    'handbag',
-    'handball',
-    'handbook',
-    'handbrake',
-    'handcart',
-    'handclap',
-    'handclasp',
-    'handcraft',
-    'handcuff',
-    'handed',
-    'handful',
-    'handgrip',
-    'handgun',
-    'handheld',
-    'handiness',
-    'handiwork',
-    'handlebar',
-    'handled',
-    'handler',
-    'handling',
-    'handmade',
-    'handoff',
-    'handpick',
-    'handprint',
-    'handrail',
-    'handsaw',
-    'handset',
-    'handsfree',
-    'handshake',
-    'handstand',
-    'handwash',
-    'handwork',
-    'handwoven',
-    'handwrite',
-    'handyman',
-    'hangnail',
-    'hangout',
-    'hangover',
-    'hangup',
-    'hankering',
-    'hankie',
-    'hanky',
-    'haphazard',
-    'happening',
-    'happier',
-    'happiest',
-    'happily',
-    'happiness',
-    'happy',
-    'harbor',
-    'hardcopy',
-    'hardcore',
-    'hardcover',
-    'harddisk',
-    'hardened',
-    'hardener',
-    'hardening',
-    'hardhat',
-    'hardhead',
-    'hardiness',
-    'hardly',
-    'hardness',
-    'hardship',
-    'hardware',
-    'hardwired',
-    'hardwood',
-    'hardy',
-    'harmful',
-    'harmless',
-    'harmonica',
-    'harmonics',
-    'harmonize',
-    'harmony',
-    'harness',
-    'harpist',
-    'harsh',
-    'harvest',
-    'hash',
-    'hassle',
-    'haste',
-    'hastily',
-    'hastiness',
-    'hasty',
-    'hatbox',
-    'hatchback',
-    'hatchery',
-    'hatchet',
-    'hatching',
-    'hatchling',
-    'hate',
-    'hatless',
-    'hatred',
-    'haunt',
-    'haven',
-    'hazard',
-    'hazelnut',
-    'hazily',
-    'haziness',
-    'hazing',
-    'hazy',
-    'headache',
-    'headband',
-    'headboard',
-    'headcount',
-    'headdress',
-    'headed',
-    'header',
-    'headfirst',
-    'headgear',
-    'heading',
-    'headlamp',
-    'headless',
-    'headlock',
-    'headphone',
-    'headpiece',
-    'headrest',
-    'headroom',
-    'headscarf',
-    'headset',
-    'headsman',
-    'headstand',
-    'headstone',
-    'headway',
-    'headwear',
-    'heap',
-    'heat',
-    'heave',
-    'heavily',
-    'heaviness',
-    'heaving',
-    'hedge',
-    'hedging',
-    'heftiness',
-    'hefty',
-    'helium',
-    'helmet',
-    'helper',
-    'helpful',
-    'helping',
-    'helpless',
-    'helpline',
-    'hemlock',
-    'hemstitch',
-    'hence',
-    'henchman',
-    'henna',
-    'herald',
-    'herbal',
-    'herbicide',
-    'herbs',
-    'heritage',
-    'hermit',
-    'heroics',
-    'heroism',
-    'herring',
-    'herself',
-    'hertz',
-    'hesitancy',
-    'hesitant',
-    'hesitate',
-    'hexagon',
-    'hexagram',
-    'hubcap',
-    'huddle',
-    'huddling',
-    'huff',
-    'hug',
-    'hula',
-    'hulk',
-    'hull',
-    'human',
-    'humble',
-    'humbling',
-    'humbly',
-    'humid',
-    'humiliate',
-    'humility',
-    'humming',
-    'hummus',
-    'humongous',
-    'humorist',
-    'humorless',
-    'humorous',
-    'humpback',
-    'humped',
-    'humvee',
-    'hunchback',
-    'hundredth',
-    'hunger',
-    'hungrily',
-    'hungry',
-    'hunk',
-    'hunter',
-    'hunting',
-    'huntress',
-    'huntsman',
-    'hurdle',
-    'hurled',
-    'hurler',
-    'hurling',
-    'hurray',
-    'hurricane',
-    'hurried',
-    'hurry',
-    'hurt',
-    'husband',
-    'hush',
-    'husked',
-    'huskiness',
-    'hut',
-    'hybrid',
-    'hydrant',
-    'hydrated',
-    'hydration',
-    'hydrogen',
-    'hydroxide',
-    'hyperlink',
-    'hypertext',
-    'hyphen',
-    'hypnoses',
-    'hypnosis',
-    'hypnotic',
-    'hypnotism',
-    'hypnotist',
-    'hypnotize',
-    'hypocrisy',
-    'hypocrite',
-    'ibuprofen',
-    'ice',
-    'iciness',
-    'icing',
-    'icky',
-    'icon',
-    'icy',
-    'idealism',
-    'idealist',
-    'idealize',
-    'ideally',
-    'idealness',
-    'identical',
-    'identify',
-    'identity',
-    'ideology',
-    'idiocy',
-    'idiom',
-    'idly',
-    'igloo',
-    'ignition',
-    'ignore',
-    'iguana',
-    'illicitly',
-    'illusion',
-    'illusive',
-    'image',
-    'imaginary',
-    'imagines',
-    'imaging',
-    'imbecile',
-    'imitate',
-    'imitation',
-    'immature',
-    'immerse',
-    'immersion',
-    'imminent',
-    'immobile',
-    'immodest',
-    'immorally',
-    'immortal',
-    'immovable',
-    'immovably',
-    'immunity',
-    'immunize',
-    'impaired',
-    'impale',
-    'impart',
-    'impatient',
-    'impeach',
-    'impeding',
-    'impending',
-    'imperfect',
-    'imperial',
-    'impish',
-    'implant',
-    'implement',
-    'implicate',
-    'implicit',
-    'implode',
-    'implosion',
-    'implosive',
-    'imply',
-    'impolite',
-    'important',
-    'importer',
-    'impose',
-    'imposing',
-    'impotence',
-    'impotency',
-    'impotent',
-    'impound',
-    'imprecise',
-    'imprint',
-    'imprison',
-    'impromptu',
-    'improper',
-    'improve',
-    'improving',
-    'improvise',
-    'imprudent',
-    'impulse',
-    'impulsive',
-    'impure',
-    'impurity',
-    'iodine',
-    'iodize',
-    'ion',
-    'ipad',
-    'iphone',
-    'ipod',
-    'irate',
-    'irk',
-    'iron',
-    'irregular',
-    'irrigate',
-    'irritable',
-    'irritably',
-    'irritant',
-    'irritate',
-    'islamic',
-    'islamist',
-    'isolated',
-    'isolating',
-    'isolation',
-    'isotope',
-    'issue',
-    'issuing',
-    'italicize',
-    'italics',
-    'item',
-    'itinerary',
-    'itunes',
-    'ivory',
-    'ivy',
-    'jab',
-    'jackal',
-    'jacket',
-    'jackknife',
-    'jackpot',
-    'jailbird',
-    'jailbreak',
-    'jailer',
-    'jailhouse',
-    'jalapeno',
-    'jam',
-    'janitor',
-    'january',
-    'jargon',
-    'jarring',
-    'jasmine',
-    'jaundice',
-    'jaunt',
-    'java',
-    'jawed',
-    'jawless',
-    'jawline',
-    'jaws',
-    'jaybird',
-    'jaywalker',
-    'jazz',
-    'jeep',
-    'jeeringly',
-    'jellied',
-    'jelly',
-    'jersey',
-    'jester',
-    'jet',
-    'jiffy',
-    'jigsaw',
-    'jimmy',
-    'jingle',
-    'jingling',
-    'jinx',
-    'jitters',
-    'jittery',
-    'job',
-    'jockey',
-    'jockstrap',
-    'jogger',
-    'jogging',
-    'john',
-    'joining',
-    'jokester',
-    'jokingly',
-    'jolliness',
-    'jolly',
-    'jolt',
-    'jot',
-    'jovial',
-    'joyfully',
-    'joylessly',
-    'joyous',
-    'joyride',
-    'joystick',
-    'jubilance',
-    'jubilant',
-    'judge',
-    'judgingly',
-    'judicial',
-    'judiciary',
-    'judo',
-    'juggle',
-    'juggling',
-    'jugular',
-    'juice',
-    'juiciness',
-    'juicy',
-    'jujitsu',
-    'jukebox',
-    'july',
-    'jumble',
-    'jumbo',
-    'jump',
-    'junction',
-    'juncture',
-    'june',
-    'junior',
-    'juniper',
-    'junkie',
-    'junkman',
-    'junkyard',
-    'jurist',
-    'juror',
-    'jury',
-    'justice',
-    'justifier',
-    'justify',
-    'justly',
-    'justness',
-    'juvenile',
-    'kabob',
-    'kangaroo',
-    'karaoke',
-    'karate',
-    'karma',
-    'kebab',
-    'keenly',
-    'keenness',
-    'keep',
-    'keg',
-    'kelp',
-    'kennel',
-    'kept',
-    'kerchief',
-    'kerosene',
-    'kettle',
-    'kick',
-    'kiln',
-    'kilobyte',
-    'kilogram',
-    'kilometer',
-    'kilowatt',
-    'kilt',
-    'kimono',
-    'kindle',
-    'kindling',
-    'kindly',
-    'kindness',
-    'kindred',
-    'kinetic',
-    'kinfolk',
-    'king',
-    'kinship',
-    'kinsman',
-    'kinswoman',
-    'kissable',
-    'kisser',
-    'kissing',
-    'kitchen',
-    'kite',
-    'kitten',
-    'kitty',
-    'kiwi',
-    'kleenex',
-    'knapsack',
-    'knee',
-    'knelt',
-    'knickers',
-    'knoll',
-    'koala',
-    'kooky',
-    'kosher',
-    'krypton',
-    'kudos',
-    'kung',
-    'labored',
-    'laborer',
-    'laboring',
-    'laborious',
-    'labrador',
-    'ladder',
-    'ladies',
-    'ladle',
-    'ladybug',
-    'ladylike',
-    'lagged',
-    'lagging',
-    'lagoon',
-    'lair',
-    'lake',
-    'lance',
-    'landed',
-    'landfall',
-    'landfill',
-    'landing',
-    'landlady',
-    'landless',
-    'landline',
-    'landlord',
-    'landmark',
-    'landmass',
-    'landmine',
-    'landowner',
-    'landscape',
-    'landside',
-    'landslide',
-    'language',
-    'lankiness',
-    'lanky',
-    'lantern',
-    'lapdog',
-    'lapel',
-    'lapped',
-    'lapping',
-    'laptop',
-    'lard',
-    'large',
-    'lark',
-    'lash',
-    'lasso',
-    'last',
-    'latch',
-    'late',
-    'lather',
-    'latitude',
-    'latrine',
-    'latter',
-    'latticed',
-    'launch',
-    'launder',
-    'laundry',
-    'laurel',
-    'lavender',
-    'lavish',
-    'laxative',
-    'lazily',
-    'laziness',
-    'lazy',
-    'lecturer',
-    'left',
-    'legacy',
-    'legal',
-    'legend',
-    'legged',
-    'leggings',
-    'legible',
-    'legibly',
-    'legislate',
-    'lego',
-    'legroom',
-    'legume',
-    'legwarmer',
-    'legwork',
-    'lemon',
-    'lend',
-    'length',
-    'lens',
-    'lent',
-    'leotard',
-    'lesser',
-    'letdown',
-    'lethargic',
-    'lethargy',
-    'letter',
-    'lettuce',
-    'level',
-    'leverage',
-    'levers',
-    'levitate',
-    'levitator',
-    'liability',
-    'liable',
-    'liberty',
-    'librarian',
-    'library',
-    'licking',
-    'licorice',
-    'lid',
-    'life',
-    'lifter',
-    'lifting',
-    'liftoff',
-    'ligament',
-    'likely',
-    'likeness',
-    'likewise',
-    'liking',
-    'lilac',
-    'lilly',
-    'lily',
-    'limb',
-    'limeade',
-    'limelight',
-    'limes',
-    'limit',
-    'limping',
-    'limpness',
-    'line',
-    'lingo',
-    'linguini',
-    'linguist',
-    'lining',
-    'linked',
-    'linoleum',
-    'linseed',
-    'lint',
-    'lion',
-    'lip',
-    'liquefy',
-    'liqueur',
-    'liquid',
-    'lisp',
-    'list',
-    'litigate',
-    'litigator',
-    'litmus',
-    'litter',
-    'little',
-    'livable',
-    'lived',
-    'lively',
-    'liver',
-    'livestock',
-    'lividly',
-    'living',
-    'lizard',
-    'lubricant',
-    'lubricate',
-    'lucid',
-    'luckily',
-    'luckiness',
-    'luckless',
-    'lucrative',
-    'ludicrous',
-    'lugged',
-    'lukewarm',
-    'lullaby',
-    'lumber',
-    'luminance',
-    'luminous',
-    'lumpiness',
-    'lumping',
-    'lumpish',
-    'lunacy',
-    'lunar',
-    'lunchbox',
-    'luncheon',
-    'lunchroom',
-    'lunchtime',
-    'lung',
-    'lurch',
-    'lure',
-    'luridness',
-    'lurk',
-    'lushly',
-    'lushness',
-    'luster',
-    'lustfully',
-    'lustily',
-    'lustiness',
-    'lustrous',
-    'lusty',
-    'luxurious',
-    'luxury',
-    'lying',
-    'lyrically',
-    'lyricism',
-    'lyricist',
-    'lyrics',
-    'macarena',
-    'macaroni',
-    'macaw',
-    'mace',
-    'machine',
-    'machinist',
-    'magazine',
-    'magenta',
-    'maggot',
-    'magical',
-    'magician',
-    'magma',
-    'magnesium',
-    'magnetic',
-    'magnetism',
-    'magnetize',
-    'magnifier',
-    'magnify',
-    'magnitude',
-    'magnolia',
-    'mahogany',
-    'maimed',
-    'majestic',
-    'majesty',
-    'majorette',
-    'majority',
-    'makeover',
-    'maker',
-    'makeshift',
-    'making',
-    'malformed',
-    'malt',
-    'mama',
-    'mammal',
-    'mammary',
-    'mammogram',
-    'manager',
-    'managing',
-    'manatee',
-    'mandarin',
-    'mandate',
-    'mandatory',
-    'mandolin',
-    'manger',
-    'mangle',
-    'mango',
-    'mangy',
-    'manhandle',
-    'manhole',
-    'manhood',
-    'manhunt',
-    'manicotti',
-    'manicure',
-    'manifesto',
-    'manila',
-    'mankind',
-    'manlike',
-    'manliness',
-    'manly',
-    'manmade',
-    'manned',
-    'mannish',
-    'manor',
-    'manpower',
-    'mantis',
-    'mantra',
-    'manual',
-    'many',
-    'map',
-    'marathon',
-    'marauding',
-    'marbled',
-    'marbles',
-    'marbling',
-    'march',
-    'mardi',
-    'margarine',
-    'margarita',
-    'margin',
-    'marigold',
-    'marina',
-    'marine',
-    'marital',
-    'maritime',
-    'marlin',
-    'marmalade',
-    'maroon',
-    'married',
-    'marrow',
-    'marry',
-    'marshland',
-    'marshy',
-    'marsupial',
-    'marvelous',
-    'marxism',
-    'mascot',
-    'masculine',
-    'mashed',
-    'mashing',
-    'massager',
-    'masses',
-    'massive',
-    'mastiff',
-    'matador',
-    'matchbook',
-    'matchbox',
-    'matcher',
-    'matching',
-    'matchless',
-    'material',
-    'maternal',
-    'maternity',
-    'math',
-    'mating',
-    'matriarch',
-    'matrimony',
-    'matrix',
-    'matron',
-    'matted',
-    'matter',
-    'maturely',
-    'maturing',
-    'maturity',
-    'mauve',
-    'maverick',
-    'maximize',
-    'maximum',
-    'maybe',
-    'mayday',
-    'mayflower',
-    'moaner',
-    'moaning',
-    'mobile',
-    'mobility',
-    'mobilize',
-    'mobster',
-    'mocha',
-    'mocker',
-    'mockup',
-    'modified',
-    'modify',
-    'modular',
-    'modulator',
-    'module',
-    'moisten',
-    'moistness',
-    'moisture',
-    'molar',
-    'molasses',
-    'mold',
-    'molecular',
-    'molecule',
-    'molehill',
-    'mollusk',
-    'mom',
-    'monastery',
-    'monday',
-    'monetary',
-    'monetize',
-    'moneybags',
-    'moneyless',
-    'moneywise',
-    'mongoose',
-    'mongrel',
-    'monitor',
-    'monkhood',
-    'monogamy',
-    'monogram',
-    'monologue',
-    'monopoly',
-    'monorail',
-    'monotone',
-    'monotype',
-    'monoxide',
-    'monsieur',
-    'monsoon',
-    'monstrous',
-    'monthly',
-    'monument',
-    'moocher',
-    'moodiness',
-    'moody',
-    'mooing',
-    'moonbeam',
-    'mooned',
-    'moonlight',
-    'moonlike',
-    'moonlit',
-    'moonrise',
-    'moonscape',
-    'moonshine',
-    'moonstone',
-    'moonwalk',
-    'mop',
-    'morale',
-    'morality',
-    'morally',
-    'morbidity',
-    'morbidly',
-    'morphine',
-    'morphing',
-    'morse',
-    'mortality',
-    'mortally',
-    'mortician',
-    'mortified',
-    'mortify',
-    'mortuary',
-    'mosaic',
-    'mossy',
-    'most',
-    'mothball',
-    'mothproof',
-    'motion',
-    'motivate',
-    'motivator',
-    'motive',
-    'motocross',
-    'motor',
-    'motto',
-    'mountable',
-    'mountain',
-    'mounted',
-    'mounting',
-    'mourner',
-    'mournful',
-    'mouse',
-    'mousiness',
-    'moustache',
-    'mousy',
-    'mouth',
-    'movable',
-    'move',
-    'movie',
-    'moving',
-    'mower',
-    'mowing',
-    'much',
-    'muck',
-    'mud',
-    'mug',
-    'mulberry',
-    'mulch',
-    'mule',
-    'mulled',
-    'mullets',
-    'multiple',
-    'multiply',
-    'multitask',
-    'multitude',
-    'mumble',
-    'mumbling',
-    'mumbo',
-    'mummified',
-    'mummify',
-    'mummy',
-    'mumps',
-    'munchkin',
-    'mundane',
-    'municipal',
-    'muppet',
-    'mural',
-    'murkiness',
-    'murky',
-    'murmuring',
-    'muscular',
-    'museum',
-    'mushily',
-    'mushiness',
-    'mushroom',
-    'mushy',
-    'music',
-    'musket',
-    'muskiness',
-    'musky',
-    'mustang',
-    'mustard',
-    'muster',
-    'mustiness',
-    'musty',
-    'mutable',
-    'mutate',
-    'mutation',
-    'mute',
-    'mutilated',
-    'mutilator',
-    'mutiny',
-    'mutt',
-    'mutual',
-    'muzzle',
-    'myself',
-    'myspace',
-    'mystified',
-    'mystify',
-    'myth',
-    'nacho',
-    'nag',
-    'nail',
-    'name',
-    'naming',
-    'nanny',
-    'nanometer',
-    'nape',
-    'napkin',
-    'napped',
-    'napping',
-    'nappy',
-    'narrow',
-    'nastily',
-    'nastiness',
-    'national',
-    'native',
-    'nativity',
-    'natural',
-    'nature',
-    'naturist',
-    'nautical',
-    'navigate',
-    'navigator',
-    'navy',
-    'nearby',
-    'nearest',
-    'nearly',
-    'nearness',
-    'neatly',
-    'neatness',
-    'nebula',
-    'nebulizer',
-    'nectar',
-    'negate',
-    'negation',
-    'negative',
-    'neglector',
-    'negligee',
-    'negligent',
-    'negotiate',
-    'nemeses',
-    'nemesis',
-    'neon',
-    'nephew',
-    'nerd',
-    'nervous',
-    'nervy',
-    'nest',
-    'net',
-    'neurology',
-    'neuron',
-    'neurosis',
-    'neurotic',
-    'neuter',
-    'neutron',
-    'never',
-    'next',
-    'nibble',
-    'nickname',
-    'nicotine',
-    'niece',
-    'nifty',
-    'nimble',
-    'nimbly',
-    'nineteen',
-    'ninetieth',
-    'ninja',
-    'nintendo',
-    'ninth',
-    'nuclear',
-    'nuclei',
-    'nucleus',
-    'nugget',
-    'nullify',
-    'number',
-    'numbing',
-    'numbly',
-    'numbness',
-    'numeral',
-    'numerate',
-    'numerator',
-    'numeric',
-    'numerous',
-    'nuptials',
-    'nursery',
-    'nursing',
-    'nurture',
-    'nutcase',
-    'nutlike',
-    'nutmeg',
-    'nutrient',
-    'nutshell',
-    'nuttiness',
-    'nutty',
-    'nuzzle',
-    'nylon',
-    'oaf',
-    'oak',
-    'oasis',
-    'oat',
-    'obedience',
-    'obedient',
-    'obituary',
-    'object',
-    'obligate',
-    'obliged',
-    'oblivion',
-    'oblivious',
-    'oblong',
-    'obnoxious',
-    'oboe',
-    'obscure',
-    'obscurity',
-    'observant',
-    'observer',
-    'observing',
-    'obsessed',
-    'obsession',
-    'obsessive',
-    'obsolete',
-    'obstacle',
-    'obstinate',
-    'obstruct',
-    'obtain',
-    'obtrusive',
-    'obtuse',
-    'obvious',
-    'occultist',
-    'occupancy',
-    'occupant',
-    'occupier',
-    'occupy',
-    'ocean',
-    'ocelot',
-    'octagon',
-    'octane',
-    'october',
-    'octopus',
-    'ogle',
-    'oil',
-    'oink',
-    'ointment',
-    'okay',
-    'old',
-    'olive',
-    'olympics',
-    'omega',
-    'omen',
-    'ominous',
-    'omission',
-    'omit',
-    'omnivore',
-    'onboard',
-    'oncoming',
-    'ongoing',
-    'onion',
-    'online',
-    'onlooker',
-    'only',
-    'onscreen',
-    'onset',
-    'onshore',
-    'onslaught',
-    'onstage',
-    'onto',
-    'onward',
-    'onyx',
-    'oops',
-    'ooze',
-    'oozy',
-    'opacity',
-    'opal',
-    'open',
-    'operable',
-    'operate',
-    'operating',
-    'operation',
-    'operative',
-    'operator',
-    'opium',
-    'opossum',
-    'opponent',
-    'oppose',
-    'opposing',
-    'opposite',
-    'oppressed',
-    'oppressor',
-    'opt',
-    'opulently',
-    'osmosis',
-    'other',
-    'otter',
-    'ouch',
-    'ought',
-    'ounce',
-    'outage',
-    'outback',
-    'outbid',
-    'outboard',
-    'outbound',
-    'outbreak',
-    'outburst',
-    'outcast',
-    'outclass',
-    'outcome',
-    'outdated',
-    'outdoors',
-    'outer',
-    'outfield',
-    'outfit',
-    'outflank',
-    'outgoing',
-    'outgrow',
-    'outhouse',
-    'outing',
-    'outlast',
-    'outlet',
-    'outline',
-    'outlook',
-    'outlying',
-    'outmatch',
-    'outmost',
-    'outnumber',
-    'outplayed',
-    'outpost',
-    'outpour',
-    'output',
-    'outrage',
-    'outrank',
-    'outreach',
-    'outright',
-    'outscore',
-    'outsell',
-    'outshine',
-    'outshoot',
-    'outsider',
-    'outskirts',
-    'outsmart',
-    'outsource',
-    'outspoken',
-    'outtakes',
-    'outthink',
-    'outward',
-    'outweigh',
-    'outwit',
-    'oval',
-    'ovary',
-    'oven',
-    'overact',
-    'overall',
-    'overarch',
-    'overbid',
-    'overbill',
-    'overbite',
-    'overblown',
-    'overboard',
-    'overbook',
-    'overbuilt',
-    'overcast',
-    'overcoat',
-    'overcome',
-    'overcook',
-    'overcrowd',
-    'overdraft',
-    'overdrawn',
-    'overdress',
-    'overdrive',
-    'overdue',
-    'overeager',
-    'overeater',
-    'overexert',
-    'overfed',
-    'overfeed',
-    'overfill',
-    'overflow',
-    'overfull',
-    'overgrown',
-    'overhand',
-    'overhang',
-    'overhaul',
-    'overhead',
-    'overhear',
-    'overheat',
-    'overhung',
-    'overjoyed',
-    'overkill',
-    'overlabor',
-    'overlaid',
-    'overlap',
-    'overlay',
-    'overload',
-    'overlook',
-    'overlord',
-    'overlying',
-    'overnight',
-    'overpass',
-    'overpay',
-    'overplant',
-    'overplay',
-    'overpower',
-    'overprice',
-    'overrate',
-    'overreach',
-    'overreact',
-    'override',
-    'overripe',
-    'overrule',
-    'overrun',
-    'overshoot',
-    'overshot',
-    'oversight',
-    'oversized',
-    'oversleep',
-    'oversold',
-    'overspend',
-    'overstate',
-    'overstay',
-    'overstep',
-    'overstock',
-    'overstuff',
-    'oversweet',
-    'overtake',
-    'overthrow',
-    'overtime',
-    'overtly',
-    'overtone',
-    'overture',
-    'overturn',
-    'overuse',
-    'overvalue',
-    'overview',
-    'overwrite',
-    'owl',
-    'oxford',
-    'oxidant',
-    'oxidation',
-    'oxidize',
-    'oxidizing',
-    'oxygen',
-    'oxymoron',
-    'oyster',
-    'ozone',
-    'paced',
-    'pacemaker',
-    'pacific',
-    'pacifier',
-    'pacifism',
-    'pacifist',
-    'pacify',
-    'padded',
-    'padding',
-    'paddle',
-    'paddling',
-    'padlock',
-    'pagan',
-    'pager',
-    'paging',
-    'pajamas',
-    'palace',
-    'palatable',
-    'palm',
-    'palpable',
-    'palpitate',
-    'paltry',
-    'pampered',
-    'pamperer',
-    'pampers',
-    'pamphlet',
-    'panama',
-    'pancake',
-    'pancreas',
-    'panda',
-    'pandemic',
-    'pang',
-    'panhandle',
-    'panic',
-    'panning',
-    'panorama',
-    'panoramic',
-    'panther',
-    'pantomime',
-    'pantry',
-    'pants',
-    'pantyhose',
-    'paparazzi',
-    'papaya',
-    'paper',
-    'paprika',
-    'papyrus',
-    'parabola',
-    'parachute',
-    'parade',
-    'paradox',
-    'paragraph',
-    'parakeet',
-    'paralegal',
-    'paralyses',
-    'paralysis',
-    'paralyze',
-    'paramedic',
-    'parameter',
-    'paramount',
-    'parasail',
-    'parasite',
-    'parasitic',
-    'parcel',
-    'parched',
-    'parchment',
-    'pardon',
-    'parish',
-    'parka',
-    'parking',
-    'parkway',
-    'parlor',
-    'parmesan',
-    'parole',
-    'parrot',
-    'parsley',
-    'parsnip',
-    'partake',
-    'parted',
-    'parting',
-    'partition',
-    'partly',
-    'partner',
-    'partridge',
-    'party',
-    'passable',
-    'passably',
-    'passage',
-    'passcode',
-    'passenger',
-    'passerby',
-    'passing',
-    'passion',
-    'passive',
-    'passivism',
-    'passover',
-    'passport',
-    'password',
-    'pasta',
-    'pasted',
-    'pastel',
-    'pastime',
-    'pastor',
-    'pastrami',
-    'pasture',
-    'pasty',
-    'patchwork',
-    'patchy',
-    'paternal',
-    'paternity',
-    'path',
-    'patience',
-    'patient',
-    'patio',
-    'patriarch',
-    'patriot',
-    'patrol',
-    'patronage',
-    'patronize',
-    'pauper',
-    'pavement',
-    'paver',
-    'pavestone',
-    'pavilion',
-    'paving',
-    'pawing',
-    'payable',
-    'payback',
-    'paycheck',
-    'payday',
-    'payee',
-    'payer',
-    'paying',
-    'payment',
-    'payphone',
-    'payroll',
-    'pebble',
-    'pebbly',
-    'pecan',
-    'pectin',
-    'peculiar',
-    'peddling',
-    'pediatric',
-    'pedicure',
-    'pedigree',
-    'pedometer',
-    'pegboard',
-    'pelican',
-    'pellet',
-    'pelt',
-    'pelvis',
-    'penalize',
-    'penalty',
-    'pencil',
-    'pendant',
-    'pending',
-    'penholder',
-    'penknife',
-    'pennant',
-    'penniless',
-    'penny',
-    'penpal',
-    'pension',
-    'pentagon',
-    'pentagram',
-    'pep',
-    'perceive',
-    'percent',
-    'perch',
-    'percolate',
-    'perennial',
-    'perfected',
-    'perfectly',
-    'perfume',
-    'periscope',
-    'perish',
-    'perjurer',
-    'perjury',
-    'perkiness',
-    'perky',
-    'perm',
-    'peroxide',
-    'perpetual',
-    'perplexed',
-    'persecute',
-    'persevere',
-    'persuaded',
-    'persuader',
-    'pesky',
-    'peso',
-    'pessimism',
-    'pessimist',
-    'pester',
-    'pesticide',
-    'petal',
-    'petite',
-    'petition',
-    'petri',
-    'petroleum',
-    'petted',
-    'petticoat',
-    'pettiness',
-    'petty',
-    'petunia',
-    'phantom',
-    'phobia',
-    'phoenix',
-    'phonebook',
-    'phoney',
-    'phonics',
-    'phoniness',
-    'phony',
-    'phosphate',
-    'photo',
-    'phrase',
-    'phrasing',
-    'placard',
-    'placate',
-    'placidly',
-    'plank',
-    'planner',
-    'plant',
-    'plasma',
-    'plaster',
-    'plastic',
-    'plated',
-    'platform',
-    'plating',
-    'platinum',
-    'platonic',
-    'platter',
-    'platypus',
-    'plausible',
-    'plausibly',
-    'playable',
-    'playback',
-    'player',
-    'playful',
-    'playgroup',
-    'playhouse',
-    'playing',
-    'playlist',
-    'playmaker',
-    'playmate',
-    'playoff',
-    'playpen',
-    'playroom',
-    'playset',
-    'plaything',
-    'playtime',
-    'plaza',
-    'pleading',
-    'pleat',
-    'pledge',
-    'plentiful',
-    'plenty',
-    'plethora',
-    'plexiglas',
-    'pliable',
-    'plod',
-    'plop',
-    'plot',
-    'plow',
-    'ploy',
-    'pluck',
-    'plug',
-    'plunder',
-    'plunging',
-    'plural',
-    'plus',
-    'plutonium',
-    'plywood',
-    'poach',
-    'pod',
-    'poem',
-    'poet',
-    'pogo',
-    'pointed',
-    'pointer',
-    'pointing',
-    'pointless',
-    'pointy',
-    'poise',
-    'poison',
-    'poker',
-    'poking',
-    'polar',
-    'police',
-    'policy',
-    'polio',
-    'polish',
-    'politely',
-    'polka',
-    'polo',
-    'polyester',
-    'polygon',
-    'polygraph',
-    'polymer',
-    'poncho',
-    'pond',
-    'pony',
-    'popcorn',
-    'pope',
-    'poplar',
-    'popper',
-    'poppy',
-    'popsicle',
-    'populace',
-    'popular',
-    'populate',
-    'porcupine',
-    'pork',
-    'porous',
-    'porridge',
-    'portable',
-    'portal',
-    'portfolio',
-    'porthole',
-    'portion',
-    'portly',
-    'portside',
-    'poser',
-    'posh',
-    'posing',
-    'possible',
-    'possibly',
-    'possum',
-    'postage',
-    'postal',
-    'postbox',
-    'postcard',
-    'posted',
-    'poster',
-    'posting',
-    'postnasal',
-    'posture',
-    'postwar',
-    'pouch',
-    'pounce',
-    'pouncing',
-    'pound',
-    'pouring',
-    'pout',
-    'powdered',
-    'powdering',
-    'powdery',
-    'power',
-    'powwow',
-    'pox',
-    'praising',
-    'prance',
-    'prancing',
-    'pranker',
-    'prankish',
-    'prankster',
-    'prayer',
-    'praying',
-    'preacher',
-    'preaching',
-    'preachy',
-    'preamble',
-    'precinct',
-    'precise',
-    'precision',
-    'precook',
-    'precut',
-    'predator',
-    'predefine',
-    'predict',
-    'preface',
-    'prefix',
-    'preflight',
-    'preformed',
-    'pregame',
-    'pregnancy',
-    'pregnant',
-    'preheated',
-    'prelaunch',
-    'prelaw',
-    'prelude',
-    'premiere',
-    'premises',
-    'premium',
-    'prenatal',
-    'preoccupy',
-    'preorder',
-    'prepaid',
-    'prepay',
-    'preplan',
-    'preppy',
-    'preschool',
-    'prescribe',
-    'preseason',
-    'preset',
-    'preshow',
-    'president',
-    'presoak',
-    'press',
-    'presume',
-    'presuming',
-    'preteen',
-    'pretended',
-    'pretender',
-    'pretense',
-    'pretext',
-    'pretty',
-    'pretzel',
-    'prevail',
-    'prevalent',
-    'prevent',
-    'preview',
-    'previous',
-    'prewar',
-    'prewashed',
-    'prideful',
-    'pried',
-    'primal',
-    'primarily',
-    'primary',
-    'primate',
-    'primer',
-    'primp',
-    'princess',
-    'print',
-    'prior',
-    'prism',
-    'prison',
-    'prissy',
-    'pristine',
-    'privacy',
-    'private',
-    'privatize',
-    'prize',
-    'proactive',
-    'probable',
-    'probably',
-    'probation',
-    'probe',
-    'probing',
-    'probiotic',
-    'problem',
-    'procedure',
-    'process',
-    'proclaim',
-    'procreate',
-    'procurer',
-    'prodigal',
-    'prodigy',
-    'produce',
-    'product',
-    'profane',
-    'profanity',
-    'professed',
-    'professor',
-    'profile',
-    'profound',
-    'profusely',
-    'progeny',
-    'prognosis',
-    'program',
-    'progress',
-    'projector',
-    'prologue',
-    'prolonged',
-    'promenade',
-    'prominent',
-    'promoter',
-    'promotion',
-    'prompter',
-    'promptly',
-    'prone',
-    'prong',
-    'pronounce',
-    'pronto',
-    'proofing',
-    'proofread',
-    'proofs',
-    'propeller',
-    'properly',
-    'property',
-    'proponent',
-    'proposal',
-    'propose',
-    'props',
-    'prorate',
-    'protector',
-    'protegee',
-    'proton',
-    'prototype',
-    'protozoan',
-    'protract',
-    'protrude',
-    'proud',
-    'provable',
-    'proved',
-    'proven',
-    'provided',
-    'provider',
-    'providing',
-    'province',
-    'proving',
-    'provoke',
-    'provoking',
-    'provolone',
-    'prowess',
-    'prowler',
-    'prowling',
-    'proximity',
-    'proxy',
-    'prozac',
-    'prude',
-    'prudishly',
-    'prune',
-    'pruning',
-    'pry',
-    'psychic',
-    'public',
-    'publisher',
-    'pucker',
-    'pueblo',
-    'pug',
-    'pull',
-    'pulmonary',
-    'pulp',
-    'pulsate',
-    'pulse',
-    'pulverize',
-    'puma',
-    'pumice',
-    'pummel',
-    'punch',
-    'punctual',
-    'punctuate',
-    'punctured',
-    'pungent',
-    'punisher',
-    'punk',
-    'pupil',
-    'puppet',
-    'puppy',
-    'purchase',
-    'pureblood',
-    'purebred',
-    'purely',
-    'pureness',
-    'purgatory',
-    'purge',
-    'purging',
-    'purifier',
-    'purify',
-    'purist',
-    'puritan',
-    'purity',
-    'purple',
-    'purplish',
-    'purposely',
-    'purr',
-    'purse',
-    'pursuable',
-    'pursuant',
-    'pursuit',
-    'purveyor',
-    'pushcart',
-    'pushchair',
-    'pusher',
-    'pushiness',
-    'pushing',
-    'pushover',
-    'pushpin',
-    'pushup',
-    'pushy',
-    'putdown',
-    'putt',
-    'puzzle',
-    'puzzling',
-    'pyramid',
-    'pyromania',
-    'python',
-    'quack',
-    'quadrant',
-    'quail',
-    'quaintly',
-    'quake',
-    'quaking',
-    'qualified',
-    'qualifier',
-    'qualify',
-    'quality',
-    'qualm',
-    'quantum',
-    'quarrel',
-    'quarry',
-    'quartered',
-    'quarterly',
-    'quarters',
-    'quartet',
-    'quench',
-    'query',
-    'quicken',
-    'quickly',
-    'quickness',
-    'quicksand',
-    'quickstep',
-    'quiet',
-    'quill',
-    'quilt',
-    'quintet',
-    'quintuple',
-    'quirk',
-    'quit',
-    'quiver',
-    'quizzical',
-    'quotable',
-    'quotation',
-    'quote',
-    'rabid',
-    'race',
-    'racing',
-    'racism',
-    'rack',
-    'racoon',
-    'radar',
-    'radial',
-    'radiance',
-    'radiantly',
-    'radiated',
-    'radiation',
-    'radiator',
-    'radio',
-    'radish',
-    'raffle',
-    'raft',
-    'rage',
-    'ragged',
-    'raging',
-    'ragweed',
-    'raider',
-    'railcar',
-    'railing',
-    'railroad',
-    'railway',
-    'raisin',
-    'rake',
-    'raking',
-    'rally',
-    'ramble',
-    'rambling',
-    'ramp',
-    'ramrod',
-    'ranch',
-    'rancidity',
-    'random',
-    'ranged',
-    'ranger',
-    'ranging',
-    'ranked',
-    'ranking',
-    'ransack',
-    'ranting',
-    'rants',
-    'rare',
-    'rarity',
-    'rascal',
-    'rash',
-    'rasping',
-    'ravage',
-    'raven',
-    'ravine',
-    'raving',
-    'ravioli',
-    'ravishing',
-    'reabsorb',
-    'reach',
-    'reacquire',
-    'reaction',
-    'reactive',
-    'reactor',
-    'reaffirm',
-    'ream',
-    'reanalyze',
-    'reappear',
-    'reapply',
-    'reappoint',
-    'reapprove',
-    'rearrange',
-    'rearview',
-    'reason',
-    'reassign',
-    'reassure',
-    'reattach',
-    'reawake',
-    'rebalance',
-    'rebate',
-    'rebel',
-    'rebirth',
-    'reboot',
-    'reborn',
-    'rebound',
-    'rebuff',
-    'rebuild',
-    'rebuilt',
-    'reburial',
-    'rebuttal',
-    'recall',
-    'recant',
-    'recapture',
-    'recast',
-    'recede',
-    'recent',
-    'recess',
-    'recharger',
-    'recipient',
-    'recital',
-    'recite',
-    'reckless',
-    'reclaim',
-    'recliner',
-    'reclining',
-    'recluse',
-    'reclusive',
-    'recognize',
-    'recoil',
-    'recollect',
-    'recolor',
-    'reconcile',
-    'reconfirm',
-    'reconvene',
-    'recopy',
-    'record',
-    'recount',
-    'recoup',
-    'recovery',
-    'recreate',
-    'rectal',
-    'rectangle',
-    'rectified',
-    'rectify',
-    'recycled',
-    'recycler',
-    'recycling',
-    'reemerge',
-    'reenact',
-    'reenter',
-    'reentry',
-    'reexamine',
-    'referable',
-    'referee',
-    'reference',
-    'refill',
-    'refinance',
-    'refined',
-    'refinery',
-    'refining',
-    'refinish',
-    'reflected',
-    'reflector',
-    'reflex',
-    'reflux',
-    'refocus',
-    'refold',
-    'reforest',
-    'reformat',
-    'reformed',
-    'reformer',
-    'reformist',
-    'refract',
-    'refrain',
-    'refreeze',
-    'refresh',
-    'refried',
-    'refueling',
-    'refund',
-    'refurbish',
-    'refurnish',
-    'refusal',
-    'refuse',
-    'refusing',
-    'refutable',
-    'refute',
-    'regain',
-    'regalia',
-    'regally',
-    'reggae',
-    'regime',
-    'region',
-    'register',
-    'registrar',
-    'registry',
-    'regress',
-    'regretful',
-    'regroup',
-    'regular',
-    'regulate',
-    'regulator',
-    'rehab',
-    'reheat',
-    'rehire',
-    'rehydrate',
-    'reimburse',
-    'reissue',
-    'reiterate',
-    'rejoice',
-    'rejoicing',
-    'rejoin',
-    'rekindle',
-    'relapse',
-    'relapsing',
-    'relatable',
-    'related',
-    'relation',
-    'relative',
-    'relax',
-    'relay',
-    'relearn',
-    'release',
-    'relenting',
-    'reliable',
-    'reliably',
-    'reliance',
-    'reliant',
-    'relic',
-    'relieve',
-    'relieving',
-    'relight',
-    'relish',
-    'relive',
-    'reload',
-    'relocate',
-    'relock',
-    'reluctant',
-    'rely',
-    'remake',
-    'remark',
-    'remarry',
-    'rematch',
-    'remedial',
-    'remedy',
-    'remember',
-    'reminder',
-    'remindful',
-    'remission',
-    'remix',
-    'remnant',
-    'remodeler',
-    'remold',
-    'remorse',
-    'remote',
-    'removable',
-    'removal',
-    'removed',
-    'remover',
-    'removing',
-    'rename',
-    'renderer',
-    'rendering',
-    'rendition',
-    'renegade',
-    'renewable',
-    'renewably',
-    'renewal',
-    'renewed',
-    'renounce',
-    'renovate',
-    'renovator',
-    'rentable',
-    'rental',
-    'rented',
-    'renter',
-    'reoccupy',
-    'reoccur',
-    'reopen',
-    'reorder',
-    'repackage',
-    'repacking',
-    'repaint',
-    'repair',
-    'repave',
-    'repaying',
-    'repayment',
-    'repeal',
-    'repeated',
-    'repeater',
-    'repent',
-    'rephrase',
-    'replace',
-    'replay',
-    'replica',
-    'reply',
-    'reporter',
-    'repose',
-    'repossess',
-    'repost',
-    'repressed',
-    'reprimand',
-    'reprint',
-    'reprise',
-    'reproach',
-    'reprocess',
-    'reproduce',
-    'reprogram',
-    'reps',
-    'reptile',
-    'reptilian',
-    'repugnant',
-    'repulsion',
-    'repulsive',
-    'repurpose',
-    'reputable',
-    'reputably',
-    'request',
-    'require',
-    'requisite',
-    'reroute',
-    'rerun',
-    'resale',
-    'resample',
-    'rescuer',
-    'reseal',
-    'research',
-    'reselect',
-    'reseller',
-    'resemble',
-    'resend',
-    'resent',
-    'reset',
-    'reshape',
-    'reshoot',
-    'reshuffle',
-    'residence',
-    'residency',
-    'resident',
-    'residual',
-    'residue',
-    'resigned',
-    'resilient',
-    'resistant',
-    'resisting',
-    'resize',
-    'resolute',
-    'resolved',
-    'resonant',
-    'resonate',
-    'resort',
-    'resource',
-    'respect',
-    'resubmit',
-    'result',
-    'resume',
-    'resupply',
-    'resurface',
-    'resurrect',
-    'retail',
-    'retainer',
-    'retaining',
-    'retake',
-    'retaliate',
-    'retention',
-    'rethink',
-    'retinal',
-    'retired',
-    'retiree',
-    'retiring',
-    'retold',
-    'retool',
-    'retorted',
-    'retouch',
-    'retrace',
-    'retract',
-    'retrain',
-    'retread',
-    'retreat',
-    'retrial',
-    'retrieval',
-    'retriever',
-    'retry',
-    'return',
-    'retying',
-    'retype',
-    'reunion',
-    'reunite',
-    'reusable',
-    'reuse',
-    'reveal',
-    'reveler',
-    'revenge',
-    'revenue',
-    'reverb',
-    'revered',
-    'reverence',
-    'reverend',
-    'reversal',
-    'reverse',
-    'reversing',
-    'reversion',
-    'revert',
-    'revisable',
-    'revise',
-    'revision',
-    'revisit',
-    'revivable',
-    'revival',
-    'reviver',
-    'reviving',
-    'revocable',
-    'revoke',
-    'revolt',
-    'revolver',
-    'revolving',
-    'reward',
-    'rewash',
-    'rewind',
-    'rewire',
-    'reword',
-    'rework',
-    'rewrap',
-    'rewrite',
-    'rhyme',
-    'ribbon',
-    'ribcage',
-    'rice',
-    'riches',
-    'richly',
-    'richness',
-    'rickety',
-    'ricotta',
-    'riddance',
-    'ridden',
-    'ride',
-    'riding',
-    'rifling',
-    'rift',
-    'rigging',
-    'rigid',
-    'rigor',
-    'rimless',
-    'rimmed',
-    'rind',
-    'rink',
-    'rinse',
-    'rinsing',
-    'riot',
-    'ripcord',
-    'ripeness',
-    'ripening',
-    'ripping',
-    'ripple',
-    'rippling',
-    'riptide',
-    'rise',
-    'rising',
-    'risk',
-    'risotto',
-    'ritalin',
-    'ritzy',
-    'rival',
-    'riverbank',
-    'riverbed',
-    'riverboat',
-    'riverside',
-    'riveter',
-    'riveting',
-    'roamer',
-    'roaming',
-    'roast',
-    'robbing',
-    'robe',
-    'robin',
-    'robotics',
-    'robust',
-    'rockband',
-    'rocker',
-    'rocket',
-    'rockfish',
-    'rockiness',
-    'rocking',
-    'rocklike',
-    'rockslide',
-    'rockstar',
-    'rocky',
-    'rogue',
-    'roman',
-    'romp',
-    'rope',
-    'roping',
-    'roster',
-    'rosy',
-    'rotten',
-    'rotting',
-    'rotunda',
-    'roulette',
-    'rounding',
-    'roundish',
-    'roundness',
-    'roundup',
-    'roundworm',
-    'routine',
-    'routing',
-    'rover',
-    'roving',
-    'royal',
-    'rubbed',
-    'rubber',
-    'rubbing',
-    'rubble',
-    'rubdown',
-    'ruby',
-    'ruckus',
-    'rudder',
-    'rug',
-    'ruined',
-    'rule',
-    'rumble',
-    'rumbling',
-    'rummage',
-    'rumor',
-    'runaround',
-    'rundown',
-    'runner',
-    'running',
-    'runny',
-    'runt',
-    'runway',
-    'rupture',
-    'rural',
-    'ruse',
-    'rush',
-    'rust',
-    'rut',
-    'sabbath',
-    'sabotage',
-    'sacrament',
-    'sacred',
-    'sacrifice',
-    'sadden',
-    'saddlebag',
-    'saddled',
-    'saddling',
-    'sadly',
-    'sadness',
-    'safari',
-    'safeguard',
-    'safehouse',
-    'safely',
-    'safeness',
-    'saffron',
-    'saga',
-    'sage',
-    'sagging',
-    'saggy',
-    'said',
-    'saint',
-    'sake',
-    'salad',
-    'salami',
-    'salaried',
-    'salary',
-    'saline',
-    'salon',
-    'saloon',
-    'salsa',
-    'salt',
-    'salutary',
-    'salute',
-    'salvage',
-    'salvaging',
-    'salvation',
-    'same',
-    'sample',
-    'sampling',
-    'sanction',
-    'sanctity',
-    'sanctuary',
-    'sandal',
-    'sandbag',
-    'sandbank',
-    'sandbar',
-    'sandblast',
-    'sandbox',
-    'sanded',
-    'sandfish',
-    'sanding',
-    'sandlot',
-    'sandpaper',
-    'sandpit',
-    'sandstone',
-    'sandstorm',
-    'sandworm',
-    'sandy',
-    'sanitary',
-    'sanitizer',
-    'sank',
-    'santa',
-    'sapling',
-    'sappiness',
-    'sappy',
-    'sarcasm',
-    'sarcastic',
-    'sardine',
-    'sash',
-    'sasquatch',
-    'sassy',
-    'satchel',
-    'satiable',
-    'satin',
-    'satirical',
-    'satisfied',
-    'satisfy',
-    'saturate',
-    'saturday',
-    'sauciness',
-    'saucy',
-    'sauna',
-    'savage',
-    'savanna',
-    'saved',
-    'savings',
-    'savior',
-    'savor',
-    'saxophone',
-    'say',
-    'scabbed',
-    'scabby',
-    'scalded',
-    'scalding',
-    'scale',
-    'scaling',
-    'scallion',
-    'scallop',
-    'scalping',
-    'scam',
-    'scandal',
-    'scanner',
-    'scanning',
-    'scant',
-    'scapegoat',
-    'scarce',
-    'scarcity',
-    'scarecrow',
-    'scared',
-    'scarf',
-    'scarily',
-    'scariness',
-    'scarring',
-    'scary',
-    'scavenger',
-    'scenic',
-    'schedule',
-    'schematic',
-    'scheme',
-    'scheming',
-    'schilling',
-    'schnapps',
-    'scholar',
-    'science',
-    'scientist',
-    'scion',
-    'scoff',
-    'scolding',
-    'scone',
-    'scoop',
-    'scooter',
-    'scope',
-    'scorch',
-    'scorebook',
-    'scorecard',
-    'scored',
-    'scoreless',
-    'scorer',
-    'scoring',
-    'scorn',
-    'scorpion',
-    'scotch',
-    'scoundrel',
-    'scoured',
-    'scouring',
-    'scouting',
-    'scouts',
-    'scowling',
-    'scrabble',
-    'scraggly',
-    'scrambled',
-    'scrambler',
-    'scrap',
-    'scratch',
-    'scrawny',
-    'screen',
-    'scribble',
-    'scribe',
-    'scribing',
-    'scrimmage',
-    'script',
-    'scroll',
-    'scrooge',
-    'scrounger',
-    'scrubbed',
-    'scrubber',
-    'scruffy',
-    'scrunch',
-    'scrutiny',
-    'scuba',
-    'scuff',
-    'sculptor',
-    'sculpture',
-    'scurvy',
-    'scuttle',
-    'secluded',
-    'secluding',
-    'seclusion',
-    'second',
-    'secrecy',
-    'secret',
-    'sectional',
-    'sector',
-    'secular',
-    'securely',
-    'security',
-    'sedan',
-    'sedate',
-    'sedation',
-    'sedative',
-    'sediment',
-    'seduce',
-    'seducing',
-    'segment',
-    'seismic',
-    'seizing',
-    'seldom',
-    'selected',
-    'selection',
-    'selective',
-    'selector',
-    'self',
-    'seltzer',
-    'semantic',
-    'semester',
-    'semicolon',
-    'semifinal',
-    'seminar',
-    'semisoft',
-    'semisweet',
-    'senate',
-    'senator',
-    'send',
-    'senior',
-    'senorita',
-    'sensation',
-    'sensitive',
-    'sensitize',
-    'sensually',
-    'sensuous',
-    'sepia',
-    'september',
-    'septic',
-    'septum',
-    'sequel',
-    'sequence',
-    'sequester',
-    'series',
-    'sermon',
-    'serotonin',
-    'serpent',
-    'serrated',
-    'serve',
-    'service',
-    'serving',
-    'sesame',
-    'sessions',
-    'setback',
-    'setting',
-    'settle',
-    'settling',
-    'setup',
-    'sevenfold',
-    'seventeen',
-    'seventh',
-    'seventy',
-    'severity',
-    'shabby',
-    'shack',
-    'shaded',
-    'shadily',
-    'shadiness',
-    'shading',
-    'shadow',
-    'shady',
-    'shaft',
-    'shakable',
-    'shakily',
-    'shakiness',
-    'shaking',
-    'shaky',
-    'shale',
-    'shallot',
-    'shallow',
-    'shame',
-    'shampoo',
-    'shamrock',
-    'shank',
-    'shanty',
-    'shape',
-    'shaping',
-    'share',
-    'sharpener',
-    'sharper',
-    'sharpie',
-    'sharply',
-    'sharpness',
-    'shawl',
-    'sheath',
-    'shed',
-    'sheep',
-    'sheet',
-    'shelf',
-    'shell',
-    'shelter',
-    'shelve',
-    'shelving',
-    'sherry',
-    'shield',
-    'shifter',
-    'shifting',
-    'shiftless',
-    'shifty',
-    'shimmer',
-    'shimmy',
-    'shindig',
-    'shine',
-    'shingle',
-    'shininess',
-    'shining',
-    'shiny',
-    'ship',
-    'shirt',
-    'shivering',
-    'shock',
-    'shone',
-    'shoplift',
-    'shopper',
-    'shopping',
-    'shoptalk',
-    'shore',
-    'shortage',
-    'shortcake',
-    'shortcut',
-    'shorten',
-    'shorter',
-    'shorthand',
-    'shortlist',
-    'shortly',
-    'shortness',
-    'shorts',
-    'shortwave',
-    'shorty',
-    'shout',
-    'shove',
-    'showbiz',
-    'showcase',
-    'showdown',
-    'shower',
-    'showgirl',
-    'showing',
-    'showman',
-    'shown',
-    'showoff',
-    'showpiece',
-    'showplace',
-    'showroom',
-    'showy',
-    'shrank',
-    'shrapnel',
-    'shredder',
-    'shredding',
-    'shrewdly',
-    'shriek',
-    'shrill',
-    'shrimp',
-    'shrine',
-    'shrink',
-    'shrivel',
-    'shrouded',
-    'shrubbery',
-    'shrubs',
-    'shrug',
-    'shrunk',
-    'shucking',
-    'shudder',
-    'shuffle',
-    'shuffling',
-    'shun',
-    'shush',
-    'shut',
-    'shy',
-    'siamese',
-    'siberian',
-    'sibling',
-    'siding',
-    'sierra',
-    'siesta',
-    'sift',
-    'sighing',
-    'silenced',
-    'silencer',
-    'silent',
-    'silica',
-    'silicon',
-    'silk',
-    'silliness',
-    'silly',
-    'silo',
-    'silt',
-    'silver',
-    'similarly',
-    'simile',
-    'simmering',
-    'simple',
-    'simplify',
-    'simply',
-    'sincere',
-    'sincerity',
-    'singer',
-    'singing',
-    'single',
-    'singular',
-    'sinister',
-    'sinless',
-    'sinner',
-    'sinuous',
-    'sip',
-    'siren',
-    'sister',
-    'sitcom',
-    'sitter',
-    'sitting',
-    'situated',
-    'situation',
-    'sixfold',
-    'sixteen',
-    'sixth',
-    'sixties',
-    'sixtieth',
-    'sixtyfold',
-    'sizable',
-    'sizably',
-    'size',
-    'sizing',
-    'sizzle',
-    'sizzling',
-    'skater',
-    'skating',
-    'skedaddle',
-    'skeletal',
-    'skeleton',
-    'skeptic',
-    'sketch',
-    'skewed',
-    'skewer',
-    'skid',
-    'skied',
-    'skier',
-    'skies',
-    'skiing',
-    'skilled',
-    'skillet',
-    'skillful',
-    'skimmed',
-    'skimmer',
-    'skimming',
-    'skimpily',
-    'skincare',
-    'skinhead',
-    'skinless',
-    'skinning',
-    'skinny',
-    'skintight',
-    'skipper',
-    'skipping',
-    'skirmish',
-    'skirt',
-    'skittle',
-    'skydiver',
-    'skylight',
-    'skyline',
-    'skype',
-    'skyrocket',
-    'skyward',
-    'slab',
-    'slacked',
-    'slacker',
-    'slacking',
-    'slackness',
-    'slacks',
-    'slain',
-    'slam',
-    'slander',
-    'slang',
-    'slapping',
-    'slapstick',
-    'slashed',
-    'slashing',
-    'slate',
-    'slather',
-    'slaw',
-    'sled',
-    'sleek',
-    'sleep',
-    'sleet',
-    'sleeve',
-    'slept',
-    'sliceable',
-    'sliced',
-    'slicer',
-    'slicing',
-    'slick',
-    'slider',
-    'slideshow',
-    'sliding',
-    'slighted',
-    'slighting',
-    'slightly',
-    'slimness',
-    'slimy',
-    'slinging',
-    'slingshot',
-    'slinky',
-    'slip',
-    'slit',
-    'sliver',
-    'slobbery',
-    'slogan',
-    'sloped',
-    'sloping',
-    'sloppily',
-    'sloppy',
-    'slot',
-    'slouching',
-    'slouchy',
-    'sludge',
-    'slug',
-    'slum',
-    'slurp',
-    'slush',
-    'sly',
-    'small',
-    'smartly',
-    'smartness',
-    'smasher',
-    'smashing',
-    'smashup',
-    'smell',
-    'smelting',
-    'smile',
-    'smilingly',
-    'smirk',
-    'smite',
-    'smith',
-    'smitten',
-    'smock',
-    'smog',
-    'smoked',
-    'smokeless',
-    'smokiness',
-    'smoking',
-    'smoky',
-    'smolder',
-    'smooth',
-    'smother',
-    'smudge',
-    'smudgy',
-    'smuggler',
-    'smuggling',
-    'smugly',
-    'smugness',
-    'snack',
-    'snagged',
-    'snaking',
-    'snap',
-    'snare',
-    'snarl',
-    'snazzy',
-    'sneak',
-    'sneer',
-    'sneeze',
-    'sneezing',
-    'snide',
-    'sniff',
-    'snippet',
-    'snipping',
-    'snitch',
-    'snooper',
-    'snooze',
-    'snore',
-    'snoring',
-    'snorkel',
-    'snort',
-    'snout',
-    'snowbird',
-    'snowboard',
-    'snowbound',
-    'snowcap',
-    'snowdrift',
-    'snowdrop',
-    'snowfall',
-    'snowfield',
-    'snowflake',
-    'snowiness',
-    'snowless',
-    'snowman',
-    'snowplow',
-    'snowshoe',
-    'snowstorm',
-    'snowsuit',
-    'snowy',
-    'snub',
-    'snuff',
-    'snuggle',
-    'snugly',
-    'snugness',
-    'speak',
-    'spearfish',
-    'spearhead',
-    'spearman',
-    'spearmint',
-    'species',
-    'specimen',
-    'specked',
-    'speckled',
-    'specks',
-    'spectacle',
-    'spectator',
-    'spectrum',
-    'speculate',
-    'speech',
-    'speed',
-    'spellbind',
-    'speller',
-    'spelling',
-    'spendable',
-    'spender',
-    'spending',
-    'spent',
-    'spew',
-    'sphere',
-    'spherical',
-    'sphinx',
-    'spider',
-    'spied',
-    'spiffy',
-    'spill',
-    'spilt',
-    'spinach',
-    'spinal',
-    'spindle',
-    'spinner',
-    'spinning',
-    'spinout',
-    'spinster',
-    'spiny',
-    'spiral',
-    'spirited',
-    'spiritism',
-    'spirits',
-    'spiritual',
-    'splashed',
-    'splashing',
-    'splashy',
-    'splatter',
-    'spleen',
-    'splendid',
-    'splendor',
-    'splice',
-    'splicing',
-    'splinter',
-    'splotchy',
-    'splurge',
-    'spoilage',
-    'spoiled',
-    'spoiler',
-    'spoiling',
-    'spoils',
-    'spoken',
-    'spokesman',
-    'sponge',
-    'spongy',
-    'sponsor',
-    'spoof',
-    'spookily',
-    'spooky',
-    'spool',
-    'spoon',
-    'spore',
-    'sporting',
-    'sports',
-    'sporty',
-    'spotless',
-    'spotlight',
-    'spotted',
-    'spotter',
-    'spotting',
-    'spotty',
-    'spousal',
-    'spouse',
-    'spout',
-    'sprain',
-    'sprang',
-    'sprawl',
-    'spray',
-    'spree',
-    'sprig',
-    'spring',
-    'sprinkled',
-    'sprinkler',
-    'sprint',
-    'sprite',
-    'sprout',
-    'spruce',
-    'sprung',
-    'spry',
-    'spud',
-    'spur',
-    'sputter',
-    'spyglass',
-    'squabble',
-    'squad',
-    'squall',
-    'squander',
-    'squash',
-    'squatted',
-    'squatter',
-    'squatting',
-    'squeak',
-    'squealer',
-    'squealing',
-    'squeamish',
-    'squeegee',
-    'squeeze',
-    'squeezing',
-    'squid',
-    'squiggle',
-    'squiggly',
-    'squint',
-    'squire',
-    'squirt',
-    'squishier',
-    'squishy',
-    'stability',
-    'stabilize',
-    'stable',
-    'stack',
-    'stadium',
-    'staff',
-    'stage',
-    'staging',
-    'stagnant',
-    'stagnate',
-    'stainable',
-    'stained',
-    'staining',
-    'stainless',
-    'stalemate',
-    'staleness',
-    'stalling',
-    'stallion',
-    'stamina',
-    'stammer',
-    'stamp',
-    'stand',
-    'stank',
-    'staple',
-    'stapling',
-    'starboard',
-    'starch',
-    'stardom',
-    'stardust',
-    'starfish',
-    'stargazer',
-    'staring',
-    'stark',
-    'starless',
-    'starlet',
-    'starlight',
-    'starlit',
-    'starring',
-    'starry',
-    'starship',
-    'starter',
-    'starting',
-    'startle',
-    'startling',
-    'startup',
-    'starved',
-    'starving',
-    'stash',
-    'state',
-    'static',
-    'statistic',
-    'statue',
-    'stature',
-    'status',
-    'statute',
-    'statutory',
-    'staunch',
-    'stays',
-    'steadfast',
-    'steadier',
-    'steadily',
-    'steadying',
-    'steam',
-    'steed',
-    'steep',
-    'steerable',
-    'steering',
-    'steersman',
-    'stegosaur',
-    'stellar',
-    'stem',
-    'stench',
-    'stencil',
-    'step',
-    'stereo',
-    'sterile',
-    'sterility',
-    'sterilize',
-    'sterling',
-    'sternness',
-    'sternum',
-    'stew',
-    'stick',
-    'stiffen',
-    'stiffly',
-    'stiffness',
-    'stifle',
-    'stifling',
-    'stillness',
-    'stilt',
-    'stimulant',
-    'stimulate',
-    'stimuli',
-    'stimulus',
-    'stinger',
-    'stingily',
-    'stinging',
-    'stingray',
-    'stingy',
-    'stinking',
-    'stinky',
-    'stipend',
-    'stipulate',
-    'stir',
-    'stitch',
-    'stock',
-    'stoic',
-    'stoke',
-    'stole',
-    'stomp',
-    'stonewall',
-    'stoneware',
-    'stonework',
-    'stoning',
-    'stony',
-    'stood',
-    'stooge',
-    'stool',
-    'stoop',
-    'stoplight',
-    'stoppable',
-    'stoppage',
-    'stopped',
-    'stopper',
-    'stopping',
-    'stopwatch',
-    'storable',
-    'storage',
-    'storeroom',
-    'storewide',
-    'storm',
-    'stout',
-    'stove',
-    'stowaway',
-    'stowing',
-    'straddle',
-    'straggler',
-    'strained',
-    'strainer',
-    'straining',
-    'strangely',
-    'stranger',
-    'strangle',
-    'strategic',
-    'strategy',
-    'stratus',
-    'straw',
-    'stray',
-    'streak',
-    'stream',
-    'street',
-    'strength',
-    'strenuous',
-    'strep',
-    'stress',
-    'stretch',
-    'strewn',
-    'stricken',
-    'strict',
-    'stride',
-    'strife',
-    'strike',
-    'striking',
-    'strive',
-    'striving',
-    'strobe',
-    'strode',
-    'stroller',
-    'strongbox',
-    'strongly',
-    'strongman',
-    'struck',
-    'structure',
-    'strudel',
-    'struggle',
-    'strum',
-    'strung',
-    'strut',
-    'stubbed',
-    'stubble',
-    'stubbly',
-    'stubborn',
-    'stucco',
-    'stuck',
-    'student',
-    'studied',
-    'studio',
-    'study',
-    'stuffed',
-    'stuffing',
-    'stuffy',
-    'stumble',
-    'stumbling',
-    'stump',
-    'stung',
-    'stunned',
-    'stunner',
-    'stunning',
-    'stunt',
-    'stupor',
-    'sturdily',
-    'sturdy',
-    'styling',
-    'stylishly',
-    'stylist',
-    'stylized',
-    'stylus',
-    'suave',
-    'subarctic',
-    'subatomic',
-    'subdivide',
-    'subdued',
-    'subduing',
-    'subfloor',
-    'subgroup',
-    'subheader',
-    'subject',
-    'sublease',
-    'sublet',
-    'sublevel',
-    'sublime',
-    'submarine',
-    'submerge',
-    'submersed',
-    'submitter',
-    'subpanel',
-    'subpar',
-    'subplot',
-    'subprime',
-    'subscribe',
-    'subscript',
-    'subsector',
-    'subside',
-    'subsiding',
-    'subsidize',
-    'subsidy',
-    'subsoil',
-    'subsonic',
-    'substance',
-    'subsystem',
-    'subtext',
-    'subtitle',
-    'subtly',
-    'subtotal',
-    'subtract',
-    'subtype',
-    'suburb',
-    'subway',
-    'subwoofer',
-    'subzero',
-    'succulent',
-    'such',
-    'suction',
-    'sudden',
-    'sudoku',
-    'suds',
-    'sufferer',
-    'suffering',
-    'suffice',
-    'suffix',
-    'suffocate',
-    'suffrage',
-    'sugar',
-    'suggest',
-    'suing',
-    'suitable',
-    'suitably',
-    'suitcase',
-    'suitor',
-    'sulfate',
-    'sulfide',
-    'sulfite',
-    'sulfur',
-    'sulk',
-    'sullen',
-    'sulphate',
-    'sulphuric',
-    'sultry',
-    'superbowl',
-    'superglue',
-    'superhero',
-    'superior',
-    'superjet',
-    'superman',
-    'supermom',
-    'supernova',
-    'supervise',
-    'supper',
-    'supplier',
-    'supply',
-    'support',
-    'supremacy',
-    'supreme',
-    'surcharge',
-    'surely',
-    'sureness',
-    'surface',
-    'surfacing',
-    'surfboard',
-    'surfer',
-    'surgery',
-    'surgical',
-    'surging',
-    'surname',
-    'surpass',
-    'surplus',
-    'surprise',
-    'surreal',
-    'surrender',
-    'surrogate',
-    'surround',
-    'survey',
-    'survival',
-    'survive',
-    'surviving',
-    'survivor',
-    'sushi',
-    'suspect',
-    'suspend',
-    'suspense',
-    'sustained',
-    'sustainer',
-    'swab',
-    'swaddling',
-    'swagger',
-    'swampland',
-    'swan',
-    'swapping',
-    'swarm',
-    'sway',
-    'swear',
-    'sweat',
-    'sweep',
-    'swell',
-    'swept',
-    'swerve',
-    'swifter',
-    'swiftly',
-    'swiftness',
-    'swimmable',
-    'swimmer',
-    'swimming',
-    'swimsuit',
-    'swimwear',
-    'swinger',
-    'swinging',
-    'swipe',
-    'swirl',
-    'switch',
-    'swivel',
-    'swizzle',
-    'swooned',
-    'swoop',
-    'swoosh',
-    'swore',
-    'sworn',
-    'swung',
-    'sycamore',
-    'sympathy',
-    'symphonic',
-    'symphony',
-    'symptom',
-    'synapse',
-    'syndrome',
-    'synergy',
-    'synopses',
-    'synopsis',
-    'synthesis',
-    'synthetic',
-    'syrup',
-    'system',
-    't-shirt',
-    'tabasco',
-    'tabby',
-    'tableful',
-    'tables',
-    'tablet',
-    'tableware',
-    'tabloid',
-    'tackiness',
-    'tacking',
-    'tackle',
-    'tackling',
-    'tacky',
-    'taco',
-    'tactful',
-    'tactical',
-    'tactics',
-    'tactile',
-    'tactless',
-    'tadpole',
-    'taekwondo',
-    'tag',
-    'tainted',
-    'take',
-    'taking',
-    'talcum',
-    'talisman',
-    'tall',
-    'talon',
-    'tamale',
-    'tameness',
-    'tamer',
-    'tamper',
-    'tank',
-    'tanned',
-    'tannery',
-    'tanning',
-    'tantrum',
-    'tapeless',
-    'tapered',
-    'tapering',
-    'tapestry',
-    'tapioca',
-    'tapping',
-    'taps',
-    'tarantula',
-    'target',
-    'tarmac',
-    'tarnish',
-    'tarot',
-    'tartar',
-    'tartly',
-    'tartness',
-    'task',
-    'tassel',
-    'taste',
-    'tastiness',
-    'tasting',
-    'tasty',
-    'tattered',
-    'tattle',
-    'tattling',
-    'tattoo',
-    'taunt',
-    'tavern',
-    'thank',
-    'that',
-    'thaw',
-    'theater',
-    'theatrics',
-    'thee',
-    'theft',
-    'theme',
-    'theology',
-    'theorize',
-    'thermal',
-    'thermos',
-    'thesaurus',
-    'these',
-    'thesis',
-    'thespian',
-    'thicken',
-    'thicket',
-    'thickness',
-    'thieving',
-    'thievish',
-    'thigh',
-    'thimble',
-    'thing',
-    'think',
-    'thinly',
-    'thinner',
-    'thinness',
-    'thinning',
-    'thirstily',
-    'thirsting',
-    'thirsty',
-    'thirteen',
-    'thirty',
-    'thong',
-    'thorn',
-    'those',
-    'thousand',
-    'thrash',
-    'thread',
-    'threaten',
-    'threefold',
-    'thrift',
-    'thrill',
-    'thrive',
-    'thriving',
-    'throat',
-    'throbbing',
-    'throng',
-    'throttle',
-    'throwaway',
-    'throwback',
-    'thrower',
-    'throwing',
-    'thud',
-    'thumb',
-    'thumping',
-    'thursday',
-    'thus',
-    'thwarting',
-    'thyself',
-    'tiara',
-    'tibia',
-    'tidal',
-    'tidbit',
-    'tidiness',
-    'tidings',
-    'tidy',
-    'tiger',
-    'tighten',
-    'tightly',
-    'tightness',
-    'tightrope',
-    'tightwad',
-    'tigress',
-    'tile',
-    'tiling',
-    'till',
-    'tilt',
-    'timid',
-    'timing',
-    'timothy',
-    'tinderbox',
-    'tinfoil',
-    'tingle',
-    'tingling',
-    'tingly',
-    'tinker',
-    'tinkling',
-    'tinsel',
-    'tinsmith',
-    'tint',
-    'tinwork',
-    'tiny',
-    'tipoff',
-    'tipped',
-    'tipper',
-    'tipping',
-    'tiptoeing',
-    'tiptop',
-    'tiring',
-    'tissue',
-    'trace',
-    'tracing',
-    'track',
-    'traction',
-    'tractor',
-    'trade',
-    'trading',
-    'tradition',
-    'traffic',
-    'tragedy',
-    'trailing',
-    'trailside',
-    'train',
-    'traitor',
-    'trance',
-    'tranquil',
-    'transfer',
-    'transform',
-    'translate',
-    'transpire',
-    'transport',
-    'transpose',
-    'trapdoor',
-    'trapeze',
-    'trapezoid',
-    'trapped',
-    'trapper',
-    'trapping',
-    'traps',
-    'trash',
-    'travel',
-    'traverse',
-    'travesty',
-    'tray',
-    'treachery',
-    'treading',
-    'treadmill',
-    'treason',
-    'treat',
-    'treble',
-    'tree',
-    'trekker',
-    'tremble',
-    'trembling',
-    'tremor',
-    'trench',
-    'trend',
-    'trespass',
-    'triage',
-    'trial',
-    'triangle',
-    'tribesman',
-    'tribunal',
-    'tribune',
-    'tributary',
-    'tribute',
-    'triceps',
-    'trickery',
-    'trickily',
-    'tricking',
-    'trickle',
-    'trickster',
-    'tricky',
-    'tricolor',
-    'tricycle',
-    'trident',
-    'tried',
-    'trifle',
-    'trifocals',
-    'trillion',
-    'trilogy',
-    'trimester',
-    'trimmer',
-    'trimming',
-    'trimness',
-    'trinity',
-    'trio',
-    'tripod',
-    'tripping',
-    'triumph',
-    'trivial',
-    'trodden',
-    'trolling',
-    'trombone',
-    'trophy',
-    'tropical',
-    'tropics',
-    'trouble',
-    'troubling',
-    'trough',
-    'trousers',
-    'trout',
-    'trowel',
-    'truce',
-    'truck',
-    'truffle',
-    'trump',
-    'trunks',
-    'trustable',
-    'trustee',
-    'trustful',
-    'trusting',
-    'trustless',
-    'truth',
-    'try',
-    'tubby',
-    'tubeless',
-    'tubular',
-    'tucking',
-    'tuesday',
-    'tug',
-    'tuition',
-    'tulip',
-    'tumble',
-    'tumbling',
-    'tummy',
-    'turban',
-    'turbine',
-    'turbofan',
-    'turbojet',
-    'turbulent',
-    'turf',
-    'turkey',
-    'turmoil',
-    'turret',
-    'turtle',
-    'tusk',
-    'tutor',
-    'tutu',
-    'tux',
-    'tweak',
-    'tweed',
-    'tweet',
-    'tweezers',
-    'twelve',
-    'twentieth',
-    'twenty',
-    'twerp',
-    'twice',
-    'twiddle',
-    'twiddling',
-    'twig',
-    'twilight',
-    'twine',
-    'twins',
-    'twirl',
-    'twistable',
-    'twisted',
-    'twister',
-    'twisting',
-    'twisty',
-    'twitch',
-    'twitter',
-    'tycoon',
-    'tying',
-    'tyke',
-    'udder',
-    'ultimate',
-    'ultimatum',
-    'ultra',
-    'umbilical',
-    'umbrella',
-    'umpire',
-    'unabashed',
-    'unable',
-    'unadorned',
-    'unadvised',
-    'unafraid',
-    'unaired',
-    'unaligned',
-    'unaltered',
-    'unarmored',
-    'unashamed',
-    'unaudited',
-    'unawake',
-    'unaware',
-    'unbaked',
-    'unbalance',
-    'unbeaten',
-    'unbend',
-    'unbent',
-    'unbiased',
-    'unbitten',
-    'unblended',
-    'unblessed',
-    'unblock',
-    'unbolted',
-    'unbounded',
-    'unboxed',
-    'unbraided',
-    'unbridle',
-    'unbroken',
-    'unbuckled',
-    'unbundle',
-    'unburned',
-    'unbutton',
-    'uncanny',
-    'uncapped',
-    'uncaring',
-    'uncertain',
-    'unchain',
-    'unchanged',
-    'uncharted',
-    'uncheck',
-    'uncivil',
-    'unclad',
-    'unclaimed',
-    'unclamped',
-    'unclasp',
-    'uncle',
-    'unclip',
-    'uncloak',
-    'unclog',
-    'unclothed',
-    'uncoated',
-    'uncoiled',
-    'uncolored',
-    'uncombed',
-    'uncommon',
-    'uncooked',
-    'uncork',
-    'uncorrupt',
-    'uncounted',
-    'uncouple',
-    'uncouth',
-    'uncover',
-    'uncross',
-    'uncrown',
-    'uncrushed',
-    'uncured',
-    'uncurious',
-    'uncurled',
-    'uncut',
-    'undamaged',
-    'undated',
-    'undaunted',
-    'undead',
-    'undecided',
-    'undefined',
-    'underage',
-    'underarm',
-    'undercoat',
-    'undercook',
-    'undercut',
-    'underdog',
-    'underdone',
-    'underfed',
-    'underfeed',
-    'underfoot',
-    'undergo',
-    'undergrad',
-    'underhand',
-    'underline',
-    'underling',
-    'undermine',
-    'undermost',
-    'underpaid',
-    'underpass',
-    'underpay',
-    'underrate',
-    'undertake',
-    'undertone',
-    'undertook',
-    'undertow',
-    'underuse',
-    'underwear',
-    'underwent',
-    'underwire',
-    'undesired',
-    'undiluted',
-    'undivided',
-    'undocked',
-    'undoing',
-    'undone',
-    'undrafted',
-    'undress',
-    'undrilled',
-    'undusted',
-    'undying',
-    'unearned',
-    'unearth',
-    'unease',
-    'uneasily',
-    'uneasy',
-    'uneatable',
-    'uneaten',
-    'unedited',
-    'unelected',
-    'unending',
-    'unengaged',
-    'unenvied',
-    'unequal',
-    'unethical',
-    'uneven',
-    'unexpired',
-    'unexposed',
-    'unfailing',
-    'unfair',
-    'unfasten',
-    'unfazed',
-    'unfeeling',
-    'unfiled',
-    'unfilled',
-    'unfitted',
-    'unfitting',
-    'unfixable',
-    'unfixed',
-    'unflawed',
-    'unfocused',
-    'unfold',
-    'unfounded',
-    'unframed',
-    'unfreeze',
-    'unfrosted',
-    'unfrozen',
-    'unfunded',
-    'unglazed',
-    'ungloved',
-    'unglue',
-    'ungodly',
-    'ungraded',
-    'ungreased',
-    'unguarded',
-    'unguided',
-    'unhappily',
-    'unhappy',
-    'unharmed',
-    'unhealthy',
-    'unheard',
-    'unhearing',
-    'unheated',
-    'unhelpful',
-    'unhidden',
-    'unhinge',
-    'unhitched',
-    'unholy',
-    'unhook',
-    'unicorn',
-    'unicycle',
-    'unified',
-    'unifier',
-    'uniformed',
-    'uniformly',
-    'unify',
-    'unimpeded',
-    'uninjured',
-    'uninstall',
-    'uninsured',
-    'uninvited',
-    'union',
-    'uniquely',
-    'unisexual',
-    'unison',
-    'unissued',
-    'unit',
-    'universal',
-    'universe',
-    'unjustly',
-    'unkempt',
-    'unkind',
-    'unknotted',
-    'unknowing',
-    'unknown',
-    'unlaced',
-    'unlatch',
-    'unlawful',
-    'unleaded',
-    'unlearned',
-    'unleash',
-    'unless',
-    'unleveled',
-    'unlighted',
-    'unlikable',
-    'unlimited',
-    'unlined',
-    'unlinked',
-    'unlisted',
-    'unlit',
-    'unlivable',
-    'unloaded',
-    'unloader',
-    'unlocked',
-    'unlocking',
-    'unlovable',
-    'unloved',
-    'unlovely',
-    'unloving',
-    'unluckily',
-    'unlucky',
-    'unmade',
-    'unmanaged',
-    'unmanned',
-    'unmapped',
-    'unmarked',
-    'unmasked',
-    'unmasking',
-    'unmatched',
-    'unmindful',
-    'unmixable',
-    'unmixed',
-    'unmolded',
-    'unmoral',
-    'unmovable',
-    'unmoved',
-    'unmoving',
-    'unnamable',
-    'unnamed',
-    'unnatural',
-    'unneeded',
-    'unnerve',
-    'unnerving',
-    'unnoticed',
-    'unopened',
-    'unopposed',
-    'unpack',
-    'unpadded',
-    'unpaid',
-    'unpainted',
-    'unpaired',
-    'unpaved',
-    'unpeeled',
-    'unpicked',
-    'unpiloted',
-    'unpinned',
-    'unplanned',
-    'unplanted',
-    'unpleased',
-    'unpledged',
-    'unplowed',
-    'unplug',
-    'unpopular',
-    'unproven',
-    'unquote',
-    'unranked',
-    'unrated',
-    'unraveled',
-    'unreached',
-    'unread',
-    'unreal',
-    'unreeling',
-    'unrefined',
-    'unrelated',
-    'unrented',
-    'unrest',
-    'unretired',
-    'unrevised',
-    'unrigged',
-    'unripe',
-    'unrivaled',
-    'unroasted',
-    'unrobed',
-    'unroll',
-    'unruffled',
-    'unruly',
-    'unrushed',
-    'unsaddle',
-    'unsafe',
-    'unsaid',
-    'unsalted',
-    'unsaved',
-    'unsavory',
-    'unscathed',
-    'unscented',
-    'unscrew',
-    'unsealed',
-    'unseated',
-    'unsecured',
-    'unseeing',
-    'unseemly',
-    'unseen',
-    'unselect',
-    'unselfish',
-    'unsent',
-    'unsettled',
-    'unshackle',
-    'unshaken',
-    'unshaved',
-    'unshaven',
-    'unsheathe',
-    'unshipped',
-    'unsightly',
-    'unsigned',
-    'unskilled',
-    'unsliced',
-    'unsmooth',
-    'unsnap',
-    'unsocial',
-    'unsoiled',
-    'unsold',
-    'unsolved',
-    'unsorted',
-    'unspoiled',
-    'unspoken',
-    'unstable',
-    'unstaffed',
-    'unstamped',
-    'unsteady',
-    'unsterile',
-    'unstirred',
-    'unstitch',
-    'unstopped',
-    'unstuck',
-    'unstuffed',
-    'unstylish',
-    'unsubtle',
-    'unsubtly',
-    'unsuited',
-    'unsure',
-    'unsworn',
-    'untagged',
-    'untainted',
-    'untaken',
-    'untamed',
-    'untangled',
-    'untapped',
-    'untaxed',
-    'unthawed',
-    'unthread',
-    'untidy',
-    'untie',
-    'until',
-    'untimed',
-    'untimely',
-    'untitled',
-    'untoasted',
-    'untold',
-    'untouched',
-    'untracked',
-    'untrained',
-    'untreated',
-    'untried',
-    'untrimmed',
-    'untrue',
-    'untruth',
-    'unturned',
-    'untwist',
-    'untying',
-    'unusable',
-    'unused',
-    'unusual',
-    'unvalued',
-    'unvaried',
-    'unvarying',
-    'unveiled',
-    'unveiling',
-    'unvented',
-    'unviable',
-    'unvisited',
-    'unvocal',
-    'unwanted',
-    'unwarlike',
-    'unwary',
-    'unwashed',
-    'unwatched',
-    'unweave',
-    'unwed',
-    'unwelcome',
-    'unwell',
-    'unwieldy',
-    'unwilling',
-    'unwind',
-    'unwired',
-    'unwitting',
-    'unwomanly',
-    'unworldly',
-    'unworn',
-    'unworried',
-    'unworthy',
-    'unwound',
-    'unwoven',
-    'unwrapped',
-    'unwritten',
-    'unzip',
-    'upbeat',
-    'upchuck',
-    'upcoming',
-    'upcountry',
-    'update',
-    'upfront',
-    'upgrade',
-    'upheaval',
-    'upheld',
-    'uphill',
-    'uphold',
-    'uplifted',
-    'uplifting',
-    'upload',
-    'upon',
-    'upper',
-    'upright',
-    'uprising',
-    'upriver',
-    'uproar',
-    'uproot',
-    'upscale',
-    'upside',
-    'upstage',
-    'upstairs',
-    'upstart',
-    'upstate',
-    'upstream',
-    'upstroke',
-    'upswing',
-    'uptake',
-    'uptight',
-    'uptown',
-    'upturned',
-    'upward',
-    'upwind',
-    'uranium',
-    'urban',
-    'urchin',
-    'urethane',
-    'urgency',
-    'urgent',
-    'urging',
-    'urologist',
-    'urology',
-    'usable',
-    'usage',
-    'useable',
-    'used',
-    'uselessly',
-    'user',
-    'usher',
-    'usual',
-    'utensil',
-    'utility',
-    'utilize',
-    'utmost',
-    'utopia',
-    'utter',
-    'vacancy',
-    'vacant',
-    'vacate',
-    'vacation',
-    'vagabond',
-    'vagrancy',
-    'vagrantly',
-    'vaguely',
-    'vagueness',
-    'valiant',
-    'valid',
-    'valium',
-    'valley',
-    'valuables',
-    'value',
-    'vanilla',
-    'vanish',
-    'vanity',
-    'vanquish',
-    'vantage',
-    'vaporizer',
-    'variable',
-    'variably',
-    'varied',
-    'variety',
-    'various',
-    'varmint',
-    'varnish',
-    'varsity',
-    'varying',
-    'vascular',
-    'vaseline',
-    'vastly',
-    'vastness',
-    'veal',
-    'vegan',
-    'veggie',
-    'vehicular',
-    'velcro',
-    'velocity',
-    'velvet',
-    'vendetta',
-    'vending',
-    'vendor',
-    'veneering',
-    'vengeful',
-    'venomous',
-    'ventricle',
-    'venture',
-    'venue',
-    'venus',
-    'verbalize',
-    'verbally',
-    'verbose',
-    'verdict',
-    'verify',
-    'verse',
-    'version',
-    'versus',
-    'vertebrae',
-    'vertical',
-    'vertigo',
-    'very',
-    'vessel',
-    'vest',
-    'veteran',
-    'veto',
-    'vexingly',
-    'viability',
-    'viable',
-    'vibes',
-    'vice',
-    'vicinity',
-    'victory',
-    'video',
-    'viewable',
-    'viewer',
-    'viewing',
-    'viewless',
-    'viewpoint',
-    'vigorous',
-    'village',
-    'villain',
-    'vindicate',
-    'vineyard',
-    'vintage',
-    'violate',
-    'violation',
-    'violator',
-    'violet',
-    'violin',
-    'viper',
-    'viral',
-    'virtual',
-    'virtuous',
-    'virus',
-    'visa',
-    'viscosity',
-    'viscous',
-    'viselike',
-    'visible',
-    'visibly',
-    'vision',
-    'visiting',
-    'visitor',
-    'visor',
-    'vista',
-    'vitality',
-    'vitalize',
-    'vitally',
-    'vitamins',
-    'vivacious',
-    'vividly',
-    'vividness',
-    'vixen',
-    'vocalist',
-    'vocalize',
-    'vocally',
-    'vocation',
-    'voice',
-    'voicing',
-    'void',
-    'volatile',
-    'volley',
-    'voltage',
-    'volumes',
-    'voter',
-    'voting',
-    'voucher',
-    'vowed',
-    'vowel',
-    'voyage',
-    'wackiness',
-    'wad',
-    'wafer',
-    'waffle',
-    'waged',
-    'wager',
-    'wages',
-    'waggle',
-    'wagon',
-    'wake',
-    'waking',
-    'walk',
-    'walmart',
-    'walnut',
-    'walrus',
-    'waltz',
-    'wand',
-    'wannabe',
-    'wanted',
-    'wanting',
-    'wasabi',
-    'washable',
-    'washbasin',
-    'washboard',
-    'washbowl',
-    'washcloth',
-    'washday',
-    'washed',
-    'washer',
-    'washhouse',
-    'washing',
-    'washout',
-    'washroom',
-    'washstand',
-    'washtub',
-    'wasp',
-    'wasting',
-    'watch',
-    'water',
-    'waviness',
-    'waving',
-    'wavy',
-    'whacking',
-    'whacky',
-    'wham',
-    'wharf',
-    'wheat',
-    'whenever',
-    'whiff',
-    'whimsical',
-    'whinny',
-    'whiny',
-    'whisking',
-    'whoever',
-    'whole',
-    'whomever',
-    'whoopee',
-    'whooping',
-    'whoops',
-    'why',
-    'wick',
-    'widely',
-    'widen',
-    'widget',
-    'widow',
-    'width',
-    'wieldable',
-    'wielder',
-    'wife',
-    'wifi',
-    'wikipedia',
-    'wildcard',
-    'wildcat',
-    'wilder',
-    'wildfire',
-    'wildfowl',
-    'wildland',
-    'wildlife',
-    'wildly',
-    'wildness',
-    'willed',
-    'willfully',
-    'willing',
-    'willow',
-    'willpower',
-    'wilt',
-    'wimp',
-    'wince',
-    'wincing',
-    'wind',
-    'wing',
-    'winking',
-    'winner',
-    'winnings',
-    'winter',
-    'wipe',
-    'wired',
-    'wireless',
-    'wiring',
-    'wiry',
-    'wisdom',
-    'wise',
-    'wish',
-    'wisplike',
-    'wispy',
-    'wistful',
-    'wizard',
-    'wobble',
-    'wobbling',
-    'wobbly',
-    'wok',
-    'wolf',
-    'wolverine',
-    'womanhood',
-    'womankind',
-    'womanless',
-    'womanlike',
-    'womanly',
-    'womb',
-    'woof',
-    'wooing',
-    'wool',
-    'woozy',
-    'word',
-    'work',
-    'worried',
-    'worrier',
-    'worrisome',
-    'worry',
-    'worsening',
-    'worshiper',
-    'worst',
-    'wound',
-    'woven',
-    'wow',
-    'wrangle',
-    'wrath',
-    'wreath',
-    'wreckage',
-    'wrecker',
-    'wrecking',
-    'wrench',
-    'wriggle',
-    'wriggly',
-    'wrinkle',
-    'wrinkly',
-    'wrist',
-    'writing',
-    'written',
-    'wrongdoer',
-    'wronged',
-    'wrongful',
-    'wrongly',
-    'wrongness',
-    'wrought',
-    'xbox',
-    'xerox',
-    'yahoo',
-    'yam',
-    'yanking',
-    'yapping',
-    'yard',
-    'yarn',
-    'yeah',
-    'yearbook',
-    'yearling',
-    'yearly',
-    'yearning',
-    'yeast',
-    'yelling',
-    'yelp',
-    'yen',
-    'yesterday',
-    'yiddish',
-    'yield',
-    'yin',
-    'yippee',
-    'yo-yo',
-    'yodel',
-    'yoga',
-    'yogurt',
-    'yonder',
-    'yoyo',
-    'yummy',
-    'zap',
-    'zealous',
-    'zebra',
-    'zen',
-    'zeppelin',
-    'zero',
-    'zestfully',
-    'zesty',
-    'zigzagged',
-    'zipfile',
-    'zipping',
-    'zippy',
-    'zips',
-    'zit',
-    'zodiac',
-    'zombie',
-    'zone',
-    'zoning',
-    'zookeeper',
-    'zoologist',
-    'zoology',
-    'zoom',
+  "abacus",
+  "abdomen",
+  "abdominal",
+  "abide",
+  "abiding",
+  "ability",
+  "ablaze",
+  "able",
+  "abnormal",
+  "abrasion",
+  "abrasive",
+  "abreast",
+  "abridge",
+  "abroad",
+  "abruptly",
+  "absence",
+  "absentee",
+  "absently",
+  "absinthe",
+  "absolute",
+  "absolve",
+  "abstain",
+  "abstract",
+  "absurd",
+  "accent",
+  "acclaim",
+  "acclimate",
+  "accompany",
+  "account",
+  "accuracy",
+  "accurate",
+  "accustom",
+  "acetone",
+  "achiness",
+  "aching",
+  "acid",
+  "acorn",
+  "acquaint",
+  "acquire",
+  "acre",
+  "acrobat",
+  "acronym",
+  "acting",
+  "action",
+  "activate",
+  "activator",
+  "active",
+  "activism",
+  "activist",
+  "activity",
+  "actress",
+  "acts",
+  "acutely",
+  "acuteness",
+  "aeration",
+  "aerobics",
+  "aerosol",
+  "aerospace",
+  "afar",
+  "affair",
+  "affected",
+  "affecting",
+  "affection",
+  "affidavit",
+  "affiliate",
+  "affirm",
+  "affix",
+  "afflicted",
+  "affluent",
+  "afford",
+  "affront",
+  "aflame",
+  "afloat",
+  "aflutter",
+  "afoot",
+  "afraid",
+  "afterglow",
+  "afterlife",
+  "aftermath",
+  "aftermost",
+  "afternoon",
+  "aged",
+  "ageless",
+  "agency",
+  "agenda",
+  "agent",
+  "aggregate",
+  "aghast",
+  "agile",
+  "agility",
+  "aging",
+  "agnostic",
+  "agonize",
+  "agonizing",
+  "agony",
+  "agreeable",
+  "agreeably",
+  "agreed",
+  "agreeing",
+  "agreement",
+  "aground",
+  "ahead",
+  "ahoy",
+  "aide",
+  "aids",
+  "aim",
+  "ajar",
+  "alabaster",
+  "alarm",
+  "albatross",
+  "album",
+  "alfalfa",
+  "algebra",
+  "algorithm",
+  "alias",
+  "alibi",
+  "alienable",
+  "alienate",
+  "aliens",
+  "alike",
+  "alive",
+  "alkaline",
+  "alkalize",
+  "almanac",
+  "almighty",
+  "almost",
+  "aloe",
+  "aloft",
+  "aloha",
+  "alone",
+  "alongside",
+  "aloof",
+  "alphabet",
+  "alright",
+  "although",
+  "altitude",
+  "alto",
+  "aluminum",
+  "alumni",
+  "always",
+  "amaretto",
+  "amaze",
+  "amazingly",
+  "amber",
+  "ambiance",
+  "ambiguity",
+  "ambiguous",
+  "ambition",
+  "ambitious",
+  "ambulance",
+  "ambush",
+  "amendable",
+  "amendment",
+  "amends",
+  "amenity",
+  "amiable",
+  "amicably",
+  "amid",
+  "amigo",
+  "amino",
+  "amiss",
+  "ammonia",
+  "ammonium",
+  "amnesty",
+  "amniotic",
+  "among",
+  "amount",
+  "amperage",
+  "ample",
+  "amplifier",
+  "amplify",
+  "amply",
+  "amuck",
+  "amulet",
+  "amusable",
+  "amused",
+  "amusement",
+  "amuser",
+  "amusing",
+  "anaconda",
+  "anaerobic",
+  "anagram",
+  "anatomist",
+  "anatomy",
+  "anchor",
+  "anchovy",
+  "ancient",
+  "android",
+  "anemia",
+  "anemic",
+  "aneurism",
+  "anew",
+  "angelfish",
+  "angelic",
+  "anger",
+  "angled",
+  "angler",
+  "angles",
+  "angling",
+  "angrily",
+  "angriness",
+  "anguished",
+  "angular",
+  "animal",
+  "animate",
+  "animating",
+  "animation",
+  "animator",
+  "anime",
+  "animosity",
+  "ankle",
+  "annex",
+  "annotate",
+  "announcer",
+  "annoying",
+  "annually",
+  "annuity",
+  "anointer",
+  "another",
+  "answering",
+  "antacid",
+  "antarctic",
+  "anteater",
+  "antelope",
+  "antennae",
+  "anthem",
+  "anthill",
+  "anthology",
+  "antibody",
+  "antics",
+  "antidote",
+  "antihero",
+  "antiquely",
+  "antiques",
+  "antiquity",
+  "antirust",
+  "antitoxic",
+  "antitrust",
+  "antiviral",
+  "antivirus",
+  "antler",
+  "antonym",
+  "antsy",
+  "anvil",
+  "anybody",
+  "anyhow",
+  "anymore",
+  "anyone",
+  "anyplace",
+  "anything",
+  "anytime",
+  "anyway",
+  "anywhere",
+  "aorta",
+  "apache",
+  "apostle",
+  "appealing",
+  "appear",
+  "appease",
+  "appeasing",
+  "appendage",
+  "appendix",
+  "appetite",
+  "appetizer",
+  "applaud",
+  "applause",
+  "apple",
+  "appliance",
+  "applicant",
+  "applied",
+  "apply",
+  "appointee",
+  "appraisal",
+  "appraiser",
+  "apprehend",
+  "approach",
+  "approval",
+  "approve",
+  "apricot",
+  "april",
+  "apron",
+  "aptitude",
+  "aptly",
+  "aqua",
+  "aqueduct",
+  "arbitrary",
+  "arbitrate",
+  "ardently",
+  "area",
+  "arena",
+  "arguable",
+  "arguably",
+  "argue",
+  "arise",
+  "armadillo",
+  "armband",
+  "armchair",
+  "armed",
+  "armful",
+  "armhole",
+  "arming",
+  "armless",
+  "armoire",
+  "armored",
+  "armory",
+  "armrest",
+  "army",
+  "aroma",
+  "arose",
+  "around",
+  "arousal",
+  "arrange",
+  "array",
+  "arrest",
+  "arrival",
+  "arrive",
+  "arrogance",
+  "arrogant",
+  "arson",
+  "art",
+  "ascend",
+  "ascension",
+  "ascent",
+  "ascertain",
+  "ashamed",
+  "ashen",
+  "ashes",
+  "ashy",
+  "aside",
+  "askew",
+  "asleep",
+  "asparagus",
+  "aspect",
+  "aspirate",
+  "aspire",
+  "aspirin",
+  "astonish",
+  "astound",
+  "astride",
+  "astrology",
+  "astronaut",
+  "astronomy",
+  "astute",
+  "atlantic",
+  "atlas",
+  "atom",
+  "atonable",
+  "atop",
+  "atrium",
+  "atrocious",
+  "atrophy",
+  "attach",
+  "attain",
+  "attempt",
+  "attendant",
+  "attendee",
+  "attention",
+  "attentive",
+  "attest",
+  "attic",
+  "attire",
+  "attitude",
+  "attractor",
+  "attribute",
+  "atypical",
+  "auction",
+  "audacious",
+  "audacity",
+  "audible",
+  "audibly",
+  "audience",
+  "audio",
+  "audition",
+  "augmented",
+  "august",
+  "authentic",
+  "author",
+  "autism",
+  "autistic",
+  "autograph",
+  "automaker",
+  "automated",
+  "automatic",
+  "autopilot",
+  "available",
+  "avalanche",
+  "avatar",
+  "avenge",
+  "avenging",
+  "avenue",
+  "average",
+  "aversion",
+  "avert",
+  "aviation",
+  "aviator",
+  "avid",
+  "avoid",
+  "await",
+  "awaken",
+  "award",
+  "aware",
+  "awhile",
+  "awkward",
+  "awning",
+  "awoke",
+  "awry",
+  "axis",
+  "babble",
+  "babbling",
+  "babied",
+  "baboon",
+  "backache",
+  "backboard",
+  "backboned",
+  "backdrop",
+  "backed",
+  "backer",
+  "backfield",
+  "backfire",
+  "backhand",
+  "backing",
+  "backlands",
+  "backlash",
+  "backless",
+  "backlight",
+  "backlit",
+  "backlog",
+  "backpack",
+  "backpedal",
+  "backrest",
+  "backroom",
+  "backshift",
+  "backside",
+  "backslid",
+  "backspace",
+  "backspin",
+  "backstab",
+  "backstage",
+  "backtalk",
+  "backtrack",
+  "backup",
+  "backward",
+  "backwash",
+  "backwater",
+  "backyard",
+  "bacon",
+  "bacteria",
+  "bacterium",
+  "badass",
+  "badge",
+  "badland",
+  "badly",
+  "badness",
+  "baffle",
+  "baffling",
+  "bagel",
+  "bagful",
+  "baggage",
+  "bagged",
+  "baggie",
+  "bagginess",
+  "bagging",
+  "baggy",
+  "bagpipe",
+  "baguette",
+  "baked",
+  "bakery",
+  "bakeshop",
+  "baking",
+  "balance",
+  "balancing",
+  "balcony",
+  "balmy",
+  "balsamic",
+  "bamboo",
+  "banana",
+  "banish",
+  "banister",
+  "banjo",
+  "bankable",
+  "bankbook",
+  "banked",
+  "banker",
+  "banking",
+  "banknote",
+  "bankroll",
+  "banner",
+  "bannister",
+  "banshee",
+  "banter",
+  "barbecue",
+  "barbed",
+  "barbell",
+  "barber",
+  "barcode",
+  "barge",
+  "bargraph",
+  "barista",
+  "baritone",
+  "barley",
+  "barmaid",
+  "barman",
+  "barn",
+  "barometer",
+  "barrack",
+  "barracuda",
+  "barrel",
+  "barrette",
+  "barricade",
+  "barrier",
+  "barstool",
+  "bartender",
+  "barterer",
+  "bash",
+  "basically",
+  "basics",
+  "basil",
+  "basin",
+  "basis",
+  "basket",
+  "batboy",
+  "batch",
+  "bath",
+  "baton",
+  "bats",
+  "battalion",
+  "battered",
+  "battering",
+  "battery",
+  "batting",
+  "battle",
+  "bauble",
+  "bazooka",
+  "blabber",
+  "bladder",
+  "blade",
+  "blah",
+  "blame",
+  "blaming",
+  "blanching",
+  "blandness",
+  "blank",
+  "blaspheme",
+  "blasphemy",
+  "blast",
+  "blatancy",
+  "blatantly",
+  "blazer",
+  "blazing",
+  "bleach",
+  "bleak",
+  "bleep",
+  "blemish",
+  "blend",
+  "bless",
+  "blighted",
+  "blimp",
+  "bling",
+  "blinked",
+  "blinker",
+  "blinking",
+  "blinks",
+  "blip",
+  "blissful",
+  "blitz",
+  "blizzard",
+  "bloated",
+  "bloating",
+  "blob",
+  "blog",
+  "bloomers",
+  "blooming",
+  "blooper",
+  "blot",
+  "blouse",
+  "blubber",
+  "bluff",
+  "bluish",
+  "blunderer",
+  "blunt",
+  "blurb",
+  "blurred",
+  "blurry",
+  "blurt",
+  "blush",
+  "blustery",
+  "boaster",
+  "boastful",
+  "boasting",
+  "boat",
+  "bobbed",
+  "bobbing",
+  "bobble",
+  "bobcat",
+  "bobsled",
+  "bobtail",
+  "bodacious",
+  "body",
+  "bogged",
+  "boggle",
+  "bogus",
+  "boil",
+  "bok",
+  "bolster",
+  "bolt",
+  "bonanza",
+  "bonded",
+  "bonding",
+  "bondless",
+  "boned",
+  "bonehead",
+  "boneless",
+  "bonelike",
+  "boney",
+  "bonfire",
+  "bonnet",
+  "bonsai",
+  "bonus",
+  "bony",
+  "boogeyman",
+  "boogieman",
+  "book",
+  "boondocks",
+  "booted",
+  "booth",
+  "bootie",
+  "booting",
+  "bootlace",
+  "bootleg",
+  "boots",
+  "boozy",
+  "borax",
+  "boring",
+  "borough",
+  "borrower",
+  "borrowing",
+  "boss",
+  "botanical",
+  "botanist",
+  "botany",
+  "botch",
+  "both",
+  "bottle",
+  "bottling",
+  "bottom",
+  "bounce",
+  "bouncing",
+  "bouncy",
+  "bounding",
+  "boundless",
+  "bountiful",
+  "bovine",
+  "boxcar",
+  "boxer",
+  "boxing",
+  "boxlike",
+  "boxy",
+  "breach",
+  "breath",
+  "breeches",
+  "breeching",
+  "breeder",
+  "breeding",
+  "breeze",
+  "breezy",
+  "brethren",
+  "brewery",
+  "brewing",
+  "briar",
+  "bribe",
+  "brick",
+  "bride",
+  "bridged",
+  "brigade",
+  "bright",
+  "brilliant",
+  "brim",
+  "bring",
+  "brink",
+  "brisket",
+  "briskly",
+  "briskness",
+  "bristle",
+  "brittle",
+  "broadband",
+  "broadcast",
+  "broaden",
+  "broadly",
+  "broadness",
+  "broadside",
+  "broadways",
+  "broiler",
+  "broiling",
+  "broken",
+  "broker",
+  "bronchial",
+  "bronco",
+  "bronze",
+  "bronzing",
+  "brook",
+  "broom",
+  "brought",
+  "browbeat",
+  "brownnose",
+  "browse",
+  "browsing",
+  "bruising",
+  "brunch",
+  "brunette",
+  "brunt",
+  "brush",
+  "brussels",
+  "brute",
+  "brutishly",
+  "bubble",
+  "bubbling",
+  "bubbly",
+  "buccaneer",
+  "bucked",
+  "bucket",
+  "buckle",
+  "buckshot",
+  "buckskin",
+  "bucktooth",
+  "buckwheat",
+  "buddhism",
+  "buddhist",
+  "budding",
+  "buddy",
+  "budget",
+  "buffalo",
+  "buffed",
+  "buffer",
+  "buffing",
+  "buffoon",
+  "buggy",
+  "bulb",
+  "bulge",
+  "bulginess",
+  "bulgur",
+  "bulk",
+  "bulldog",
+  "bulldozer",
+  "bullfight",
+  "bullfrog",
+  "bullhorn",
+  "bullion",
+  "bullish",
+  "bullpen",
+  "bullring",
+  "bullseye",
+  "bullwhip",
+  "bully",
+  "bunch",
+  "bundle",
+  "bungee",
+  "bunion",
+  "bunkbed",
+  "bunkhouse",
+  "bunkmate",
+  "bunny",
+  "bunt",
+  "busboy",
+  "bush",
+  "busily",
+  "busload",
+  "bust",
+  "busybody",
+  "buzz",
+  "cabana",
+  "cabbage",
+  "cabbie",
+  "cabdriver",
+  "cable",
+  "caboose",
+  "cache",
+  "cackle",
+  "cacti",
+  "cactus",
+  "caddie",
+  "caddy",
+  "cadet",
+  "cadillac",
+  "cadmium",
+  "cage",
+  "cahoots",
+  "cake",
+  "calamari",
+  "calamity",
+  "calcium",
+  "calculate",
+  "calculus",
+  "caliber",
+  "calibrate",
+  "calm",
+  "caloric",
+  "calorie",
+  "calzone",
+  "camcorder",
+  "cameo",
+  "camera",
+  "camisole",
+  "camper",
+  "campfire",
+  "camping",
+  "campsite",
+  "campus",
+  "canal",
+  "canary",
+  "cancel",
+  "candied",
+  "candle",
+  "candy",
+  "cane",
+  "canine",
+  "canister",
+  "cannabis",
+  "canned",
+  "canning",
+  "cannon",
+  "cannot",
+  "canola",
+  "canon",
+  "canopener",
+  "canopy",
+  "canteen",
+  "canyon",
+  "capable",
+  "capably",
+  "capacity",
+  "cape",
+  "capillary",
+  "capital",
+  "capitol",
+  "capped",
+  "capricorn",
+  "capsize",
+  "capsule",
+  "caption",
+  "captivate",
+  "captive",
+  "captivity",
+  "capture",
+  "caramel",
+  "carat",
+  "caravan",
+  "carbon",
+  "cardboard",
+  "carded",
+  "cardiac",
+  "cardigan",
+  "cardinal",
+  "cardstock",
+  "carefully",
+  "caregiver",
+  "careless",
+  "caress",
+  "caretaker",
+  "cargo",
+  "caring",
+  "carless",
+  "carload",
+  "carmaker",
+  "carnage",
+  "carnation",
+  "carnival",
+  "carnivore",
+  "carol",
+  "carpenter",
+  "carpentry",
+  "carpool",
+  "carport",
+  "carried",
+  "carrot",
+  "carrousel",
+  "carry",
+  "cartel",
+  "cartload",
+  "carton",
+  "cartoon",
+  "cartridge",
+  "cartwheel",
+  "carve",
+  "carving",
+  "carwash",
+  "cascade",
+  "case",
+  "cash",
+  "casing",
+  "casino",
+  "casket",
+  "cassette",
+  "casually",
+  "casualty",
+  "catacomb",
+  "catalog",
+  "catalyst",
+  "catalyze",
+  "catapult",
+  "cataract",
+  "catatonic",
+  "catcall",
+  "catchable",
+  "catcher",
+  "catching",
+  "catchy",
+  "caterer",
+  "catering",
+  "catfight",
+  "catfish",
+  "cathedral",
+  "cathouse",
+  "catlike",
+  "catnap",
+  "catnip",
+  "catsup",
+  "cattail",
+  "cattishly",
+  "cattle",
+  "catty",
+  "catwalk",
+  "caucasian",
+  "caucus",
+  "causal",
+  "causation",
+  "cause",
+  "causing",
+  "cauterize",
+  "caution",
+  "cautious",
+  "cavalier",
+  "cavalry",
+  "caviar",
+  "cavity",
+  "cedar",
+  "celery",
+  "celestial",
+  "celibacy",
+  "celibate",
+  "celtic",
+  "cement",
+  "census",
+  "ceramics",
+  "ceremony",
+  "certainly",
+  "certainty",
+  "certified",
+  "certify",
+  "cesarean",
+  "cesspool",
+  "chafe",
+  "chaffing",
+  "chain",
+  "chair",
+  "chalice",
+  "challenge",
+  "chamber",
+  "chamomile",
+  "champion",
+  "chance",
+  "change",
+  "channel",
+  "chant",
+  "chaos",
+  "chaperone",
+  "chaplain",
+  "chapped",
+  "chaps",
+  "chapter",
+  "character",
+  "charbroil",
+  "charcoal",
+  "charger",
+  "charging",
+  "chariot",
+  "charity",
+  "charm",
+  "charred",
+  "charter",
+  "charting",
+  "chase",
+  "chasing",
+  "chaste",
+  "chastise",
+  "chastity",
+  "chatroom",
+  "chatter",
+  "chatting",
+  "chatty",
+  "cheating",
+  "cheddar",
+  "cheek",
+  "cheer",
+  "cheese",
+  "cheesy",
+  "chef",
+  "chemicals",
+  "chemist",
+  "chemo",
+  "cherisher",
+  "cherub",
+  "chess",
+  "chest",
+  "chevron",
+  "chevy",
+  "chewable",
+  "chewer",
+  "chewing",
+  "chewy",
+  "chief",
+  "chihuahua",
+  "childcare",
+  "childhood",
+  "childish",
+  "childless",
+  "childlike",
+  "chili",
+  "chill",
+  "chimp",
+  "chip",
+  "chirping",
+  "chirpy",
+  "chitchat",
+  "chivalry",
+  "chive",
+  "chloride",
+  "chlorine",
+  "choice",
+  "chokehold",
+  "choking",
+  "chomp",
+  "chooser",
+  "choosing",
+  "choosy",
+  "chop",
+  "chosen",
+  "chowder",
+  "chowtime",
+  "chrome",
+  "chubby",
+  "chuck",
+  "chug",
+  "chummy",
+  "chump",
+  "chunk",
+  "churn",
+  "chute",
+  "cider",
+  "cilantro",
+  "cinch",
+  "cinema",
+  "cinnamon",
+  "circle",
+  "circling",
+  "circular",
+  "circulate",
+  "circus",
+  "citable",
+  "citadel",
+  "citation",
+  "citizen",
+  "citric",
+  "citrus",
+  "city",
+  "civic",
+  "civil",
+  "clad",
+  "claim",
+  "clambake",
+  "clammy",
+  "clamor",
+  "clamp",
+  "clamshell",
+  "clang",
+  "clanking",
+  "clapped",
+  "clapper",
+  "clapping",
+  "clarify",
+  "clarinet",
+  "clarity",
+  "clash",
+  "clasp",
+  "class",
+  "clatter",
+  "clause",
+  "clavicle",
+  "claw",
+  "clay",
+  "clean",
+  "clear",
+  "cleat",
+  "cleaver",
+  "cleft",
+  "clench",
+  "clergyman",
+  "clerical",
+  "clerk",
+  "clever",
+  "clicker",
+  "client",
+  "climate",
+  "climatic",
+  "cling",
+  "clinic",
+  "clinking",
+  "clip",
+  "clique",
+  "cloak",
+  "clobber",
+  "clock",
+  "clone",
+  "cloning",
+  "closable",
+  "closure",
+  "clothes",
+  "clothing",
+  "cloud",
+  "clover",
+  "clubbed",
+  "clubbing",
+  "clubhouse",
+  "clump",
+  "clumsily",
+  "clumsy",
+  "clunky",
+  "clustered",
+  "clutch",
+  "clutter",
+  "coach",
+  "coagulant",
+  "coastal",
+  "coaster",
+  "coasting",
+  "coastland",
+  "coastline",
+  "coat",
+  "coauthor",
+  "cobalt",
+  "cobbler",
+  "cobweb",
+  "cocoa",
+  "coconut",
+  "cod",
+  "coeditor",
+  "coerce",
+  "coexist",
+  "coffee",
+  "cofounder",
+  "cognition",
+  "cognitive",
+  "cogwheel",
+  "coherence",
+  "coherent",
+  "cohesive",
+  "coil",
+  "coke",
+  "cola",
+  "cold",
+  "coleslaw",
+  "coliseum",
+  "collage",
+  "collapse",
+  "collar",
+  "collected",
+  "collector",
+  "collide",
+  "collie",
+  "collision",
+  "colonial",
+  "colonist",
+  "colonize",
+  "colony",
+  "colossal",
+  "colt",
+  "coma",
+  "come",
+  "comfort",
+  "comfy",
+  "comic",
+  "coming",
+  "comma",
+  "commence",
+  "commend",
+  "comment",
+  "commerce",
+  "commode",
+  "commodity",
+  "commodore",
+  "common",
+  "commotion",
+  "commute",
+  "commuting",
+  "compacted",
+  "compacter",
+  "compactly",
+  "compactor",
+  "companion",
+  "company",
+  "compare",
+  "compel",
+  "compile",
+  "comply",
+  "component",
+  "composed",
+  "composer",
+  "composite",
+  "compost",
+  "composure",
+  "compound",
+  "compress",
+  "comprised",
+  "computer",
+  "computing",
+  "comrade",
+  "concave",
+  "conceal",
+  "conceded",
+  "concept",
+  "concerned",
+  "concert",
+  "conch",
+  "concierge",
+  "concise",
+  "conclude",
+  "concrete",
+  "concur",
+  "condense",
+  "condiment",
+  "condition",
+  "condone",
+  "conducive",
+  "conductor",
+  "conduit",
+  "cone",
+  "confess",
+  "confetti",
+  "confidant",
+  "confident",
+  "confider",
+  "confiding",
+  "configure",
+  "confined",
+  "confining",
+  "confirm",
+  "conflict",
+  "conform",
+  "confound",
+  "confront",
+  "confused",
+  "confusing",
+  "confusion",
+  "congenial",
+  "congested",
+  "congrats",
+  "congress",
+  "conical",
+  "conjoined",
+  "conjure",
+  "conjuror",
+  "connected",
+  "connector",
+  "consensus",
+  "consent",
+  "console",
+  "consoling",
+  "consonant",
+  "constable",
+  "constant",
+  "constrain",
+  "constrict",
+  "construct",
+  "consult",
+  "consumer",
+  "consuming",
+  "contact",
+  "container",
+  "contempt",
+  "contend",
+  "contented",
+  "contently",
+  "contents",
+  "contest",
+  "context",
+  "contort",
+  "contour",
+  "contrite",
+  "control",
+  "contusion",
+  "convene",
+  "convent",
+  "copartner",
+  "cope",
+  "copied",
+  "copier",
+  "copilot",
+  "coping",
+  "copious",
+  "copper",
+  "copy",
+  "coral",
+  "cork",
+  "cornball",
+  "cornbread",
+  "corncob",
+  "cornea",
+  "corned",
+  "corner",
+  "cornfield",
+  "cornflake",
+  "cornhusk",
+  "cornmeal",
+  "cornstalk",
+  "corny",
+  "coronary",
+  "coroner",
+  "corporal",
+  "corporate",
+  "corral",
+  "correct",
+  "corridor",
+  "corrode",
+  "corroding",
+  "corrosive",
+  "corsage",
+  "corset",
+  "cortex",
+  "cosigner",
+  "cosmetics",
+  "cosmic",
+  "cosmos",
+  "cosponsor",
+  "cost",
+  "cottage",
+  "cotton",
+  "couch",
+  "cough",
+  "could",
+  "countable",
+  "countdown",
+  "counting",
+  "countless",
+  "country",
+  "county",
+  "courier",
+  "covenant",
+  "cover",
+  "coveted",
+  "coveting",
+  "coyness",
+  "cozily",
+  "coziness",
+  "cozy",
+  "crabbing",
+  "crabgrass",
+  "crablike",
+  "crabmeat",
+  "cradle",
+  "cradling",
+  "crafter",
+  "craftily",
+  "craftsman",
+  "craftwork",
+  "crafty",
+  "cramp",
+  "cranberry",
+  "crane",
+  "cranial",
+  "cranium",
+  "crank",
+  "crate",
+  "crave",
+  "craving",
+  "crawfish",
+  "crawlers",
+  "crawling",
+  "crayfish",
+  "crayon",
+  "crazed",
+  "crazily",
+  "craziness",
+  "crazy",
+  "creamed",
+  "creamer",
+  "creamlike",
+  "crease",
+  "creasing",
+  "creatable",
+  "create",
+  "creation",
+  "creative",
+  "creature",
+  "credible",
+  "credibly",
+  "credit",
+  "creed",
+  "creme",
+  "creole",
+  "crepe",
+  "crept",
+  "crescent",
+  "crested",
+  "cresting",
+  "crestless",
+  "crevice",
+  "crewless",
+  "crewman",
+  "crewmate",
+  "crib",
+  "cricket",
+  "cried",
+  "crier",
+  "crimp",
+  "crimson",
+  "cringe",
+  "cringing",
+  "crinkle",
+  "crinkly",
+  "crisped",
+  "crisping",
+  "crisply",
+  "crispness",
+  "crispy",
+  "criteria",
+  "critter",
+  "croak",
+  "crock",
+  "crook",
+  "croon",
+  "crop",
+  "cross",
+  "crouch",
+  "crouton",
+  "crowbar",
+  "crowd",
+  "crown",
+  "crucial",
+  "crudely",
+  "crudeness",
+  "cruelly",
+  "cruelness",
+  "cruelty",
+  "crumb",
+  "crummiest",
+  "crummy",
+  "crumpet",
+  "crumpled",
+  "cruncher",
+  "crunching",
+  "crunchy",
+  "crusader",
+  "crushable",
+  "crushed",
+  "crusher",
+  "crushing",
+  "crust",
+  "crux",
+  "crying",
+  "cryptic",
+  "crystal",
+  "cubbyhole",
+  "cube",
+  "cubical",
+  "cubicle",
+  "cucumber",
+  "cuddle",
+  "cuddly",
+  "cufflink",
+  "culinary",
+  "culminate",
+  "culpable",
+  "culprit",
+  "cultivate",
+  "cultural",
+  "culture",
+  "cupbearer",
+  "cupcake",
+  "cupid",
+  "cupped",
+  "cupping",
+  "curable",
+  "curator",
+  "curdle",
+  "cure",
+  "curfew",
+  "curing",
+  "curled",
+  "curler",
+  "curliness",
+  "curling",
+  "curly",
+  "curry",
+  "curse",
+  "cursive",
+  "cursor",
+  "curtain",
+  "curtly",
+  "curtsy",
+  "curvature",
+  "curve",
+  "curvy",
+  "cushy",
+  "cusp",
+  "cussed",
+  "custard",
+  "custodian",
+  "custody",
+  "customary",
+  "customer",
+  "customize",
+  "customs",
+  "cut",
+  "cycle",
+  "cyclic",
+  "cycling",
+  "cyclist",
+  "cylinder",
+  "cymbal",
+  "cytoplasm",
+  "cytoplast",
+  "dab",
+  "dad",
+  "daffodil",
+  "dagger",
+  "daily",
+  "daintily",
+  "dainty",
+  "dairy",
+  "daisy",
+  "dallying",
+  "dance",
+  "dancing",
+  "dandelion",
+  "dander",
+  "dandruff",
+  "dandy",
+  "danger",
+  "dangle",
+  "dangling",
+  "daredevil",
+  "dares",
+  "daringly",
+  "darkened",
+  "darkening",
+  "darkish",
+  "darkness",
+  "darkroom",
+  "darling",
+  "darn",
+  "dart",
+  "darwinism",
+  "dash",
+  "dastardly",
+  "data",
+  "datebook",
+  "dating",
+  "daughter",
+  "daunting",
+  "dawdler",
+  "dawn",
+  "daybed",
+  "daybreak",
+  "daycare",
+  "daydream",
+  "daylight",
+  "daylong",
+  "dayroom",
+  "daytime",
+  "dazzler",
+  "dazzling",
+  "deacon",
+  "deafening",
+  "deafness",
+  "dealer",
+  "dealing",
+  "dealmaker",
+  "dealt",
+  "dean",
+  "debatable",
+  "debate",
+  "debating",
+  "debit",
+  "debrief",
+  "debtless",
+  "debtor",
+  "debug",
+  "debunk",
+  "decade",
+  "decaf",
+  "decal",
+  "decathlon",
+  "decay",
+  "deceased",
+  "deceit",
+  "deceiver",
+  "deceiving",
+  "december",
+  "decency",
+  "decent",
+  "deception",
+  "deceptive",
+  "decibel",
+  "decidable",
+  "decimal",
+  "decimeter",
+  "decipher",
+  "deck",
+  "declared",
+  "decline",
+  "decode",
+  "decompose",
+  "decorated",
+  "decorator",
+  "decoy",
+  "decrease",
+  "decree",
+  "dedicate",
+  "dedicator",
+  "deduce",
+  "deduct",
+  "deed",
+  "deem",
+  "deepen",
+  "deeply",
+  "deepness",
+  "deface",
+  "defacing",
+  "defame",
+  "default",
+  "defeat",
+  "defection",
+  "defective",
+  "defendant",
+  "defender",
+  "defense",
+  "defensive",
+  "deferral",
+  "deferred",
+  "defiance",
+  "defiant",
+  "defile",
+  "defiling",
+  "define",
+  "definite",
+  "deflate",
+  "deflation",
+  "deflator",
+  "deflected",
+  "deflector",
+  "defog",
+  "deforest",
+  "defraud",
+  "defrost",
+  "deftly",
+  "defuse",
+  "defy",
+  "degraded",
+  "degrading",
+  "degrease",
+  "degree",
+  "dehydrate",
+  "deity",
+  "dejected",
+  "delay",
+  "delegate",
+  "delegator",
+  "delete",
+  "deletion",
+  "delicacy",
+  "delicate",
+  "delicious",
+  "delighted",
+  "delirious",
+  "delirium",
+  "deliverer",
+  "delivery",
+  "delouse",
+  "delta",
+  "deluge",
+  "delusion",
+  "deluxe",
+  "demanding",
+  "demeaning",
+  "demeanor",
+  "demise",
+  "democracy",
+  "democrat",
+  "demote",
+  "demotion",
+  "demystify",
+  "denatured",
+  "deniable",
+  "denial",
+  "denim",
+  "denote",
+  "dense",
+  "density",
+  "dental",
+  "dentist",
+  "denture",
+  "deny",
+  "deodorant",
+  "deodorize",
+  "departed",
+  "departure",
+  "depict",
+  "deplete",
+  "depletion",
+  "deplored",
+  "deploy",
+  "deport",
+  "depose",
+  "depraved",
+  "depravity",
+  "deprecate",
+  "depress",
+  "deprive",
+  "depth",
+  "deputize",
+  "deputy",
+  "derail",
+  "deranged",
+  "derby",
+  "derived",
+  "desecrate",
+  "deserve",
+  "deserving",
+  "designate",
+  "designed",
+  "designer",
+  "designing",
+  "deskbound",
+  "desktop",
+  "deskwork",
+  "desolate",
+  "despair",
+  "despise",
+  "despite",
+  "destiny",
+  "destitute",
+  "destruct",
+  "detached",
+  "detail",
+  "detection",
+  "detective",
+  "detector",
+  "detention",
+  "detergent",
+  "detest",
+  "detonate",
+  "detonator",
+  "detoxify",
+  "detract",
+  "deuce",
+  "devalue",
+  "deviancy",
+  "deviant",
+  "deviate",
+  "deviation",
+  "deviator",
+  "device",
+  "devious",
+  "devotedly",
+  "devotee",
+  "devotion",
+  "devourer",
+  "devouring",
+  "devoutly",
+  "dexterity",
+  "dexterous",
+  "diabetes",
+  "diabetic",
+  "diabolic",
+  "diagnoses",
+  "diagnosis",
+  "diagram",
+  "dial",
+  "diameter",
+  "diaper",
+  "diaphragm",
+  "diary",
+  "dice",
+  "dicing",
+  "dictate",
+  "dictation",
+  "dictator",
+  "difficult",
+  "diffused",
+  "diffuser",
+  "diffusion",
+  "diffusive",
+  "dig",
+  "dilation",
+  "diligence",
+  "diligent",
+  "dill",
+  "dilute",
+  "dime",
+  "diminish",
+  "dimly",
+  "dimmed",
+  "dimmer",
+  "dimness",
+  "dimple",
+  "diner",
+  "dingbat",
+  "dinghy",
+  "dinginess",
+  "dingo",
+  "dingy",
+  "dining",
+  "dinner",
+  "diocese",
+  "dioxide",
+  "diploma",
+  "dipped",
+  "dipper",
+  "dipping",
+  "directed",
+  "direction",
+  "directive",
+  "directly",
+  "directory",
+  "direness",
+  "dirtiness",
+  "disabled",
+  "disagree",
+  "disallow",
+  "disarm",
+  "disarray",
+  "disaster",
+  "disband",
+  "disbelief",
+  "disburse",
+  "discard",
+  "discern",
+  "discharge",
+  "disclose",
+  "discolor",
+  "discount",
+  "discourse",
+  "discover",
+  "discuss",
+  "disdain",
+  "disengage",
+  "disfigure",
+  "disgrace",
+  "dish",
+  "disinfect",
+  "disjoin",
+  "disk",
+  "dislike",
+  "disliking",
+  "dislocate",
+  "dislodge",
+  "disloyal",
+  "dismantle",
+  "dismay",
+  "dismiss",
+  "dismount",
+  "disobey",
+  "disorder",
+  "disown",
+  "disparate",
+  "disparity",
+  "dispatch",
+  "dispense",
+  "dispersal",
+  "dispersed",
+  "disperser",
+  "displace",
+  "display",
+  "displease",
+  "disposal",
+  "dispose",
+  "disprove",
+  "dispute",
+  "disregard",
+  "disrupt",
+  "dissuade",
+  "distance",
+  "distant",
+  "distaste",
+  "distill",
+  "distinct",
+  "distort",
+  "distract",
+  "distress",
+  "district",
+  "distrust",
+  "ditch",
+  "ditto",
+  "ditzy",
+  "dividable",
+  "divided",
+  "dividend",
+  "dividers",
+  "dividing",
+  "divinely",
+  "diving",
+  "divinity",
+  "divisible",
+  "divisibly",
+  "division",
+  "divisive",
+  "divorcee",
+  "dizziness",
+  "dizzy",
+  "doable",
+  "docile",
+  "dock",
+  "doctrine",
+  "document",
+  "dodge",
+  "dodgy",
+  "doily",
+  "doing",
+  "dole",
+  "dollar",
+  "dollhouse",
+  "dollop",
+  "dolly",
+  "dolphin",
+  "domain",
+  "domelike",
+  "domestic",
+  "dominion",
+  "dominoes",
+  "donated",
+  "donation",
+  "donator",
+  "donor",
+  "donut",
+  "doodle",
+  "doorbell",
+  "doorframe",
+  "doorknob",
+  "doorman",
+  "doormat",
+  "doornail",
+  "doorpost",
+  "doorstep",
+  "doorstop",
+  "doorway",
+  "doozy",
+  "dork",
+  "dormitory",
+  "dorsal",
+  "dosage",
+  "dose",
+  "dotted",
+  "doubling",
+  "douche",
+  "dove",
+  "down",
+  "dowry",
+  "doze",
+  "drab",
+  "dragging",
+  "dragonfly",
+  "dragonish",
+  "dragster",
+  "drainable",
+  "drainage",
+  "drained",
+  "drainer",
+  "drainpipe",
+  "dramatic",
+  "dramatize",
+  "drank",
+  "drapery",
+  "drastic",
+  "draw",
+  "dreaded",
+  "dreadful",
+  "dreadlock",
+  "dreamboat",
+  "dreamily",
+  "dreamland",
+  "dreamless",
+  "dreamlike",
+  "dreamt",
+  "dreamy",
+  "drearily",
+  "dreary",
+  "drench",
+  "dress",
+  "drew",
+  "dribble",
+  "dried",
+  "drier",
+  "drift",
+  "driller",
+  "drilling",
+  "drinkable",
+  "drinking",
+  "dripping",
+  "drippy",
+  "drivable",
+  "driven",
+  "driver",
+  "driveway",
+  "driving",
+  "drizzle",
+  "drizzly",
+  "drone",
+  "drool",
+  "droop",
+  "drop-down",
+  "dropbox",
+  "dropkick",
+  "droplet",
+  "dropout",
+  "dropper",
+  "drove",
+  "drown",
+  "drowsily",
+  "drudge",
+  "drum",
+  "dry",
+  "dubbed",
+  "dubiously",
+  "duchess",
+  "duckbill",
+  "ducking",
+  "duckling",
+  "ducktail",
+  "ducky",
+  "duct",
+  "dude",
+  "duffel",
+  "dugout",
+  "duh",
+  "duke",
+  "duller",
+  "dullness",
+  "duly",
+  "dumping",
+  "dumpling",
+  "dumpster",
+  "duo",
+  "dupe",
+  "duplex",
+  "duplicate",
+  "duplicity",
+  "durable",
+  "durably",
+  "duration",
+  "duress",
+  "during",
+  "dusk",
+  "dust",
+  "dutiful",
+  "duty",
+  "duvet",
+  "dwarf",
+  "dweeb",
+  "dwelled",
+  "dweller",
+  "dwelling",
+  "dwindle",
+  "dwindling",
+  "dynamic",
+  "dynamite",
+  "dynasty",
+  "dyslexia",
+  "dyslexic",
+  "each",
+  "eagle",
+  "earache",
+  "eardrum",
+  "earflap",
+  "earful",
+  "earlobe",
+  "early",
+  "earmark",
+  "earmuff",
+  "earphone",
+  "earpiece",
+  "earplugs",
+  "earring",
+  "earshot",
+  "earthen",
+  "earthlike",
+  "earthling",
+  "earthly",
+  "earthworm",
+  "earthy",
+  "earwig",
+  "easeful",
+  "easel",
+  "easiest",
+  "easily",
+  "easiness",
+  "easing",
+  "eastbound",
+  "eastcoast",
+  "easter",
+  "eastward",
+  "eatable",
+  "eaten",
+  "eatery",
+  "eating",
+  "eats",
+  "ebay",
+  "ebony",
+  "ebook",
+  "ecard",
+  "eccentric",
+  "echo",
+  "eclair",
+  "eclipse",
+  "ecologist",
+  "ecology",
+  "economic",
+  "economist",
+  "economy",
+  "ecosphere",
+  "ecosystem",
+  "edge",
+  "edginess",
+  "edging",
+  "edgy",
+  "edition",
+  "editor",
+  "educated",
+  "education",
+  "educator",
+  "eel",
+  "effective",
+  "effects",
+  "efficient",
+  "effort",
+  "eggbeater",
+  "egging",
+  "eggnog",
+  "eggplant",
+  "eggshell",
+  "egomaniac",
+  "egotism",
+  "egotistic",
+  "either",
+  "eject",
+  "elaborate",
+  "elastic",
+  "elated",
+  "elbow",
+  "eldercare",
+  "elderly",
+  "eldest",
+  "electable",
+  "election",
+  "elective",
+  "elephant",
+  "elevate",
+  "elevating",
+  "elevation",
+  "elevator",
+  "eleven",
+  "elf",
+  "eligible",
+  "eligibly",
+  "eliminate",
+  "elite",
+  "elitism",
+  "elixir",
+  "elk",
+  "ellipse",
+  "elliptic",
+  "elm",
+  "elongated",
+  "elope",
+  "eloquence",
+  "eloquent",
+  "elsewhere",
+  "elude",
+  "elusive",
+  "elves",
+  "email",
+  "embargo",
+  "embark",
+  "embassy",
+  "embattled",
+  "embellish",
+  "ember",
+  "embezzle",
+  "emblaze",
+  "emblem",
+  "embody",
+  "embolism",
+  "emboss",
+  "embroider",
+  "emcee",
+  "emerald",
+  "emergency",
+  "emission",
+  "emit",
+  "emote",
+  "emoticon",
+  "emotion",
+  "empathic",
+  "empathy",
+  "emperor",
+  "emphases",
+  "emphasis",
+  "emphasize",
+  "emphatic",
+  "empirical",
+  "employed",
+  "employee",
+  "employer",
+  "emporium",
+  "empower",
+  "emptier",
+  "emptiness",
+  "empty",
+  "emu",
+  "enable",
+  "enactment",
+  "enamel",
+  "enchanted",
+  "enchilada",
+  "encircle",
+  "enclose",
+  "enclosure",
+  "encode",
+  "encore",
+  "encounter",
+  "encourage",
+  "encroach",
+  "encrust",
+  "encrypt",
+  "endanger",
+  "endeared",
+  "endearing",
+  "ended",
+  "ending",
+  "endless",
+  "endnote",
+  "endocrine",
+  "endorphin",
+  "endorse",
+  "endowment",
+  "endpoint",
+  "endurable",
+  "endurance",
+  "enduring",
+  "energetic",
+  "energize",
+  "energy",
+  "enforced",
+  "enforcer",
+  "engaged",
+  "engaging",
+  "engine",
+  "engorge",
+  "engraved",
+  "engraver",
+  "engraving",
+  "engross",
+  "engulf",
+  "enhance",
+  "enigmatic",
+  "enjoyable",
+  "enjoyably",
+  "enjoyer",
+  "enjoying",
+  "enjoyment",
+  "enlarged",
+  "enlarging",
+  "enlighten",
+  "enlisted",
+  "enquirer",
+  "enrage",
+  "enrich",
+  "enroll",
+  "enslave",
+  "ensnare",
+  "ensure",
+  "entail",
+  "entangled",
+  "entering",
+  "entertain",
+  "enticing",
+  "entire",
+  "entitle",
+  "entity",
+  "entomb",
+  "entourage",
+  "entrap",
+  "entree",
+  "entrench",
+  "entrust",
+  "entryway",
+  "entwine",
+  "enunciate",
+  "envelope",
+  "enviable",
+  "enviably",
+  "envious",
+  "envision",
+  "envoy",
+  "envy",
+  "enzyme",
+  "epic",
+  "epidemic",
+  "epidermal",
+  "epidermis",
+  "epidural",
+  "epilepsy",
+  "epileptic",
+  "epilogue",
+  "epiphany",
+  "episode",
+  "equal",
+  "equate",
+  "equation",
+  "equator",
+  "equinox",
+  "equipment",
+  "equity",
+  "equivocal",
+  "eradicate",
+  "erasable",
+  "erased",
+  "eraser",
+  "erasure",
+  "ergonomic",
+  "errand",
+  "errant",
+  "erratic",
+  "error",
+  "erupt",
+  "escalate",
+  "escalator",
+  "escapable",
+  "escapade",
+  "escapist",
+  "escargot",
+  "eskimo",
+  "esophagus",
+  "espionage",
+  "espresso",
+  "esquire",
+  "essay",
+  "essence",
+  "essential",
+  "establish",
+  "estate",
+  "esteemed",
+  "estimate",
+  "estimator",
+  "estranged",
+  "estrogen",
+  "etching",
+  "eternal",
+  "eternity",
+  "ethanol",
+  "ether",
+  "ethically",
+  "ethics",
+  "euphemism",
+  "evacuate",
+  "evacuee",
+  "evade",
+  "evaluate",
+  "evaluator",
+  "evaporate",
+  "evasion",
+  "evasive",
+  "even",
+  "everglade",
+  "evergreen",
+  "everybody",
+  "everyday",
+  "everyone",
+  "evict",
+  "evidence",
+  "evident",
+  "evil",
+  "evoke",
+  "evolution",
+  "evolve",
+  "exact",
+  "exalted",
+  "example",
+  "excavate",
+  "excavator",
+  "exceeding",
+  "exception",
+  "excess",
+  "exchange",
+  "excitable",
+  "exciting",
+  "exclaim",
+  "exclude",
+  "excluding",
+  "exclusion",
+  "exclusive",
+  "excretion",
+  "excretory",
+  "excursion",
+  "excusable",
+  "excusably",
+  "excuse",
+  "exemplary",
+  "exemplify",
+  "exemption",
+  "exerciser",
+  "exert",
+  "exes",
+  "exfoliate",
+  "exhale",
+  "exhaust",
+  "exhume",
+  "exile",
+  "existing",
+  "exit",
+  "exodus",
+  "exonerate",
+  "exorcism",
+  "exorcist",
+  "expand",
+  "expanse",
+  "expansion",
+  "expansive",
+  "expectant",
+  "expedited",
+  "expediter",
+  "expel",
+  "expend",
+  "expenses",
+  "expensive",
+  "expert",
+  "expire",
+  "expiring",
+  "explain",
+  "expletive",
+  "explicit",
+  "explode",
+  "exploit",
+  "explore",
+  "exploring",
+  "exponent",
+  "exporter",
+  "exposable",
+  "expose",
+  "exposure",
+  "express",
+  "expulsion",
+  "exquisite",
+  "extended",
+  "extending",
+  "extent",
+  "extenuate",
+  "exterior",
+  "external",
+  "extinct",
+  "extortion",
+  "extradite",
+  "extras",
+  "extrovert",
+  "extrude",
+  "extruding",
+  "exuberant",
+  "fable",
+  "fabric",
+  "fabulous",
+  "facebook",
+  "facecloth",
+  "facedown",
+  "faceless",
+  "facelift",
+  "faceplate",
+  "faceted",
+  "facial",
+  "facility",
+  "facing",
+  "facsimile",
+  "faction",
+  "factoid",
+  "factor",
+  "factsheet",
+  "factual",
+  "faculty",
+  "fade",
+  "fading",
+  "failing",
+  "falcon",
+  "fall",
+  "false",
+  "falsify",
+  "fame",
+  "familiar",
+  "family",
+  "famine",
+  "famished",
+  "fanatic",
+  "fancied",
+  "fanciness",
+  "fancy",
+  "fanfare",
+  "fang",
+  "fanning",
+  "fantasize",
+  "fantastic",
+  "fantasy",
+  "fascism",
+  "fastball",
+  "faster",
+  "fasting",
+  "fastness",
+  "faucet",
+  "favorable",
+  "favorably",
+  "favored",
+  "favoring",
+  "favorite",
+  "fax",
+  "feast",
+  "federal",
+  "fedora",
+  "feeble",
+  "feed",
+  "feel",
+  "feisty",
+  "feline",
+  "felt-tip",
+  "feminine",
+  "feminism",
+  "feminist",
+  "feminize",
+  "femur",
+  "fence",
+  "fencing",
+  "fender",
+  "ferment",
+  "fernlike",
+  "ferocious",
+  "ferocity",
+  "ferret",
+  "ferris",
+  "ferry",
+  "fervor",
+  "fester",
+  "festival",
+  "festive",
+  "festivity",
+  "fetal",
+  "fetch",
+  "fever",
+  "fiber",
+  "fiction",
+  "fiddle",
+  "fiddling",
+  "fidelity",
+  "fidgeting",
+  "fidgety",
+  "fifteen",
+  "fifth",
+  "fiftieth",
+  "fifty",
+  "figment",
+  "figure",
+  "figurine",
+  "filing",
+  "filled",
+  "filler",
+  "filling",
+  "film",
+  "filter",
+  "filth",
+  "filtrate",
+  "finale",
+  "finalist",
+  "finalize",
+  "finally",
+  "finance",
+  "financial",
+  "finch",
+  "fineness",
+  "finer",
+  "finicky",
+  "finished",
+  "finisher",
+  "finishing",
+  "finite",
+  "finless",
+  "finlike",
+  "fiscally",
+  "fit",
+  "five",
+  "flaccid",
+  "flagman",
+  "flagpole",
+  "flagship",
+  "flagstick",
+  "flagstone",
+  "flail",
+  "flakily",
+  "flaky",
+  "flame",
+  "flammable",
+  "flanked",
+  "flanking",
+  "flannels",
+  "flap",
+  "flaring",
+  "flashback",
+  "flashbulb",
+  "flashcard",
+  "flashily",
+  "flashing",
+  "flashy",
+  "flask",
+  "flatbed",
+  "flatfoot",
+  "flatly",
+  "flatness",
+  "flatten",
+  "flattered",
+  "flatterer",
+  "flattery",
+  "flattop",
+  "flatware",
+  "flatworm",
+  "flavored",
+  "flavorful",
+  "flavoring",
+  "flaxseed",
+  "fled",
+  "fleshed",
+  "fleshy",
+  "flick",
+  "flier",
+  "flight",
+  "flinch",
+  "fling",
+  "flint",
+  "flip",
+  "flirt",
+  "float",
+  "flock",
+  "flogging",
+  "flop",
+  "floral",
+  "florist",
+  "floss",
+  "flounder",
+  "flyable",
+  "flyaway",
+  "flyer",
+  "flying",
+  "flyover",
+  "flypaper",
+  "foam",
+  "foe",
+  "fog",
+  "foil",
+  "folic",
+  "folk",
+  "follicle",
+  "follow",
+  "fondling",
+  "fondly",
+  "fondness",
+  "fondue",
+  "font",
+  "food",
+  "fool",
+  "footage",
+  "football",
+  "footbath",
+  "footboard",
+  "footer",
+  "footgear",
+  "foothill",
+  "foothold",
+  "footing",
+  "footless",
+  "footman",
+  "footnote",
+  "footpad",
+  "footpath",
+  "footprint",
+  "footrest",
+  "footsie",
+  "footsore",
+  "footwear",
+  "footwork",
+  "fossil",
+  "foster",
+  "founder",
+  "founding",
+  "fountain",
+  "fox",
+  "foyer",
+  "fraction",
+  "fracture",
+  "fragile",
+  "fragility",
+  "fragment",
+  "fragrance",
+  "fragrant",
+  "frail",
+  "frame",
+  "framing",
+  "frantic",
+  "fraternal",
+  "frayed",
+  "fraying",
+  "frays",
+  "freckled",
+  "freckles",
+  "freebase",
+  "freebee",
+  "freebie",
+  "freedom",
+  "freefall",
+  "freehand",
+  "freeing",
+  "freeload",
+  "freely",
+  "freemason",
+  "freeness",
+  "freestyle",
+  "freeware",
+  "freeway",
+  "freewill",
+  "freezable",
+  "freezing",
+  "freight",
+  "french",
+  "frenzied",
+  "frenzy",
+  "frequency",
+  "frequent",
+  "fresh",
+  "fretful",
+  "fretted",
+  "friction",
+  "friday",
+  "fridge",
+  "fried",
+  "friend",
+  "frighten",
+  "frightful",
+  "frigidity",
+  "frigidly",
+  "frill",
+  "fringe",
+  "frisbee",
+  "frisk",
+  "fritter",
+  "frivolous",
+  "frolic",
+  "from",
+  "front",
+  "frostbite",
+  "frosted",
+  "frostily",
+  "frosting",
+  "frostlike",
+  "frosty",
+  "froth",
+  "frown",
+  "frozen",
+  "fructose",
+  "frugality",
+  "frugally",
+  "fruit",
+  "frustrate",
+  "frying",
+  "gab",
+  "gaffe",
+  "gag",
+  "gainfully",
+  "gaining",
+  "gains",
+  "gala",
+  "gallantly",
+  "galleria",
+  "gallery",
+  "galley",
+  "gallon",
+  "gallows",
+  "gallstone",
+  "galore",
+  "galvanize",
+  "gambling",
+  "game",
+  "gaming",
+  "gamma",
+  "gander",
+  "gangly",
+  "gangrene",
+  "gangway",
+  "gap",
+  "garage",
+  "garbage",
+  "garden",
+  "gargle",
+  "garland",
+  "garlic",
+  "garment",
+  "garnet",
+  "garnish",
+  "garter",
+  "gas",
+  "gatherer",
+  "gathering",
+  "gating",
+  "gauging",
+  "gauntlet",
+  "gauze",
+  "gave",
+  "gawk",
+  "gazing",
+  "gear",
+  "gecko",
+  "geek",
+  "geiger",
+  "gem",
+  "gender",
+  "generic",
+  "generous",
+  "genetics",
+  "genre",
+  "gentile",
+  "gentleman",
+  "gently",
+  "gents",
+  "geography",
+  "geologic",
+  "geologist",
+  "geology",
+  "geometric",
+  "geometry",
+  "geranium",
+  "gerbil",
+  "geriatric",
+  "germicide",
+  "germinate",
+  "germless",
+  "germproof",
+  "gestate",
+  "gestation",
+  "gesture",
+  "getaway",
+  "getting",
+  "getup",
+  "giant",
+  "gibberish",
+  "giblet",
+  "giddily",
+  "giddiness",
+  "giddy",
+  "gift",
+  "gigabyte",
+  "gigahertz",
+  "gigantic",
+  "giggle",
+  "giggling",
+  "giggly",
+  "gigolo",
+  "gilled",
+  "gills",
+  "gimmick",
+  "girdle",
+  "giveaway",
+  "given",
+  "giver",
+  "giving",
+  "gizmo",
+  "gizzard",
+  "glacial",
+  "glacier",
+  "glade",
+  "gladiator",
+  "gladly",
+  "glamorous",
+  "glamour",
+  "glance",
+  "glancing",
+  "glandular",
+  "glare",
+  "glaring",
+  "glass",
+  "glaucoma",
+  "glazing",
+  "gleaming",
+  "gleeful",
+  "glider",
+  "gliding",
+  "glimmer",
+  "glimpse",
+  "glisten",
+  "glitch",
+  "glitter",
+  "glitzy",
+  "gloater",
+  "gloating",
+  "gloomily",
+  "gloomy",
+  "glorified",
+  "glorifier",
+  "glorify",
+  "glorious",
+  "glory",
+  "gloss",
+  "glove",
+  "glowing",
+  "glowworm",
+  "glucose",
+  "glue",
+  "gluten",
+  "glutinous",
+  "glutton",
+  "gnarly",
+  "gnat",
+  "goal",
+  "goatskin",
+  "goes",
+  "goggles",
+  "going",
+  "goldfish",
+  "goldmine",
+  "goldsmith",
+  "golf",
+  "goliath",
+  "gonad",
+  "gondola",
+  "gone",
+  "gong",
+  "good",
+  "gooey",
+  "goofball",
+  "goofiness",
+  "goofy",
+  "google",
+  "goon",
+  "gopher",
+  "gore",
+  "gorged",
+  "gorgeous",
+  "gory",
+  "gosling",
+  "gossip",
+  "gothic",
+  "gotten",
+  "gout",
+  "gown",
+  "grab",
+  "graceful",
+  "graceless",
+  "gracious",
+  "gradation",
+  "graded",
+  "grader",
+  "gradient",
+  "grading",
+  "gradually",
+  "graduate",
+  "graffiti",
+  "grafted",
+  "grafting",
+  "grain",
+  "granddad",
+  "grandkid",
+  "grandly",
+  "grandma",
+  "grandpa",
+  "grandson",
+  "granite",
+  "granny",
+  "granola",
+  "grant",
+  "granular",
+  "grape",
+  "graph",
+  "grapple",
+  "grappling",
+  "grasp",
+  "grass",
+  "gratified",
+  "gratify",
+  "grating",
+  "gratitude",
+  "gratuity",
+  "gravel",
+  "graveness",
+  "graves",
+  "graveyard",
+  "gravitate",
+  "gravity",
+  "gravy",
+  "gray",
+  "grazing",
+  "greasily",
+  "greedily",
+  "greedless",
+  "greedy",
+  "green",
+  "greeter",
+  "greeting",
+  "grew",
+  "greyhound",
+  "grid",
+  "grief",
+  "grievance",
+  "grieving",
+  "grievous",
+  "grill",
+  "grimace",
+  "grimacing",
+  "grime",
+  "griminess",
+  "grimy",
+  "grinch",
+  "grinning",
+  "grip",
+  "gristle",
+  "grit",
+  "groggily",
+  "groggy",
+  "groin",
+  "groom",
+  "groove",
+  "grooving",
+  "groovy",
+  "grope",
+  "ground",
+  "grouped",
+  "grout",
+  "grove",
+  "grower",
+  "growing",
+  "growl",
+  "grub",
+  "grudge",
+  "grudging",
+  "grueling",
+  "gruffly",
+  "grumble",
+  "grumbling",
+  "grumbly",
+  "grumpily",
+  "grunge",
+  "grunt",
+  "guacamole",
+  "guidable",
+  "guidance",
+  "guide",
+  "guiding",
+  "guileless",
+  "guise",
+  "gulf",
+  "gullible",
+  "gully",
+  "gulp",
+  "gumball",
+  "gumdrop",
+  "gumminess",
+  "gumming",
+  "gummy",
+  "gurgle",
+  "gurgling",
+  "guru",
+  "gush",
+  "gusto",
+  "gusty",
+  "gutless",
+  "guts",
+  "gutter",
+  "guy",
+  "guzzler",
+  "gyration",
+  "habitable",
+  "habitant",
+  "habitat",
+  "habitual",
+  "hacked",
+  "hacker",
+  "hacking",
+  "hacksaw",
+  "had",
+  "haggler",
+  "haiku",
+  "half",
+  "halogen",
+  "halt",
+  "halved",
+  "halves",
+  "hamburger",
+  "hamlet",
+  "hammock",
+  "hamper",
+  "hamster",
+  "hamstring",
+  "handbag",
+  "handball",
+  "handbook",
+  "handbrake",
+  "handcart",
+  "handclap",
+  "handclasp",
+  "handcraft",
+  "handcuff",
+  "handed",
+  "handful",
+  "handgrip",
+  "handgun",
+  "handheld",
+  "handiness",
+  "handiwork",
+  "handlebar",
+  "handled",
+  "handler",
+  "handling",
+  "handmade",
+  "handoff",
+  "handpick",
+  "handprint",
+  "handrail",
+  "handsaw",
+  "handset",
+  "handsfree",
+  "handshake",
+  "handstand",
+  "handwash",
+  "handwork",
+  "handwoven",
+  "handwrite",
+  "handyman",
+  "hangnail",
+  "hangout",
+  "hangover",
+  "hangup",
+  "hankering",
+  "hankie",
+  "hanky",
+  "haphazard",
+  "happening",
+  "happier",
+  "happiest",
+  "happily",
+  "happiness",
+  "happy",
+  "harbor",
+  "hardcopy",
+  "hardcore",
+  "hardcover",
+  "harddisk",
+  "hardened",
+  "hardener",
+  "hardening",
+  "hardhat",
+  "hardhead",
+  "hardiness",
+  "hardly",
+  "hardness",
+  "hardship",
+  "hardware",
+  "hardwired",
+  "hardwood",
+  "hardy",
+  "harmful",
+  "harmless",
+  "harmonica",
+  "harmonics",
+  "harmonize",
+  "harmony",
+  "harness",
+  "harpist",
+  "harsh",
+  "harvest",
+  "hash",
+  "hassle",
+  "haste",
+  "hastily",
+  "hastiness",
+  "hasty",
+  "hatbox",
+  "hatchback",
+  "hatchery",
+  "hatchet",
+  "hatching",
+  "hatchling",
+  "hate",
+  "hatless",
+  "hatred",
+  "haunt",
+  "haven",
+  "hazard",
+  "hazelnut",
+  "hazily",
+  "haziness",
+  "hazing",
+  "hazy",
+  "headache",
+  "headband",
+  "headboard",
+  "headcount",
+  "headdress",
+  "headed",
+  "header",
+  "headfirst",
+  "headgear",
+  "heading",
+  "headlamp",
+  "headless",
+  "headlock",
+  "headphone",
+  "headpiece",
+  "headrest",
+  "headroom",
+  "headscarf",
+  "headset",
+  "headsman",
+  "headstand",
+  "headstone",
+  "headway",
+  "headwear",
+  "heap",
+  "heat",
+  "heave",
+  "heavily",
+  "heaviness",
+  "heaving",
+  "hedge",
+  "hedging",
+  "heftiness",
+  "hefty",
+  "helium",
+  "helmet",
+  "helper",
+  "helpful",
+  "helping",
+  "helpless",
+  "helpline",
+  "hemlock",
+  "hemstitch",
+  "hence",
+  "henchman",
+  "henna",
+  "herald",
+  "herbal",
+  "herbicide",
+  "herbs",
+  "heritage",
+  "hermit",
+  "heroics",
+  "heroism",
+  "herring",
+  "herself",
+  "hertz",
+  "hesitancy",
+  "hesitant",
+  "hesitate",
+  "hexagon",
+  "hexagram",
+  "hubcap",
+  "huddle",
+  "huddling",
+  "huff",
+  "hug",
+  "hula",
+  "hulk",
+  "hull",
+  "human",
+  "humble",
+  "humbling",
+  "humbly",
+  "humid",
+  "humiliate",
+  "humility",
+  "humming",
+  "hummus",
+  "humongous",
+  "humorist",
+  "humorless",
+  "humorous",
+  "humpback",
+  "humped",
+  "humvee",
+  "hunchback",
+  "hundredth",
+  "hunger",
+  "hungrily",
+  "hungry",
+  "hunk",
+  "hunter",
+  "hunting",
+  "huntress",
+  "huntsman",
+  "hurdle",
+  "hurled",
+  "hurler",
+  "hurling",
+  "hurray",
+  "hurricane",
+  "hurried",
+  "hurry",
+  "hurt",
+  "husband",
+  "hush",
+  "husked",
+  "huskiness",
+  "hut",
+  "hybrid",
+  "hydrant",
+  "hydrated",
+  "hydration",
+  "hydrogen",
+  "hydroxide",
+  "hyperlink",
+  "hypertext",
+  "hyphen",
+  "hypnoses",
+  "hypnosis",
+  "hypnotic",
+  "hypnotism",
+  "hypnotist",
+  "hypnotize",
+  "hypocrisy",
+  "hypocrite",
+  "ibuprofen",
+  "ice",
+  "iciness",
+  "icing",
+  "icky",
+  "icon",
+  "icy",
+  "idealism",
+  "idealist",
+  "idealize",
+  "ideally",
+  "idealness",
+  "identical",
+  "identify",
+  "identity",
+  "ideology",
+  "idiocy",
+  "idiom",
+  "idly",
+  "igloo",
+  "ignition",
+  "ignore",
+  "iguana",
+  "illicitly",
+  "illusion",
+  "illusive",
+  "image",
+  "imaginary",
+  "imagines",
+  "imaging",
+  "imbecile",
+  "imitate",
+  "imitation",
+  "immature",
+  "immerse",
+  "immersion",
+  "imminent",
+  "immobile",
+  "immodest",
+  "immorally",
+  "immortal",
+  "immovable",
+  "immovably",
+  "immunity",
+  "immunize",
+  "impaired",
+  "impale",
+  "impart",
+  "impatient",
+  "impeach",
+  "impeding",
+  "impending",
+  "imperfect",
+  "imperial",
+  "impish",
+  "implant",
+  "implement",
+  "implicate",
+  "implicit",
+  "implode",
+  "implosion",
+  "implosive",
+  "imply",
+  "impolite",
+  "important",
+  "importer",
+  "impose",
+  "imposing",
+  "impotence",
+  "impotency",
+  "impotent",
+  "impound",
+  "imprecise",
+  "imprint",
+  "imprison",
+  "impromptu",
+  "improper",
+  "improve",
+  "improving",
+  "improvise",
+  "imprudent",
+  "impulse",
+  "impulsive",
+  "impure",
+  "impurity",
+  "iodine",
+  "iodize",
+  "ion",
+  "ipad",
+  "iphone",
+  "ipod",
+  "irate",
+  "irk",
+  "iron",
+  "irregular",
+  "irrigate",
+  "irritable",
+  "irritably",
+  "irritant",
+  "irritate",
+  "islamic",
+  "islamist",
+  "isolated",
+  "isolating",
+  "isolation",
+  "isotope",
+  "issue",
+  "issuing",
+  "italicize",
+  "italics",
+  "item",
+  "itinerary",
+  "itunes",
+  "ivory",
+  "ivy",
+  "jab",
+  "jackal",
+  "jacket",
+  "jackknife",
+  "jackpot",
+  "jailbird",
+  "jailbreak",
+  "jailer",
+  "jailhouse",
+  "jalapeno",
+  "jam",
+  "janitor",
+  "january",
+  "jargon",
+  "jarring",
+  "jasmine",
+  "jaundice",
+  "jaunt",
+  "java",
+  "jawed",
+  "jawless",
+  "jawline",
+  "jaws",
+  "jaybird",
+  "jaywalker",
+  "jazz",
+  "jeep",
+  "jeeringly",
+  "jellied",
+  "jelly",
+  "jersey",
+  "jester",
+  "jet",
+  "jiffy",
+  "jigsaw",
+  "jimmy",
+  "jingle",
+  "jingling",
+  "jinx",
+  "jitters",
+  "jittery",
+  "job",
+  "jockey",
+  "jockstrap",
+  "jogger",
+  "jogging",
+  "john",
+  "joining",
+  "jokester",
+  "jokingly",
+  "jolliness",
+  "jolly",
+  "jolt",
+  "jot",
+  "jovial",
+  "joyfully",
+  "joylessly",
+  "joyous",
+  "joyride",
+  "joystick",
+  "jubilance",
+  "jubilant",
+  "judge",
+  "judgingly",
+  "judicial",
+  "judiciary",
+  "judo",
+  "juggle",
+  "juggling",
+  "jugular",
+  "juice",
+  "juiciness",
+  "juicy",
+  "jujitsu",
+  "jukebox",
+  "july",
+  "jumble",
+  "jumbo",
+  "jump",
+  "junction",
+  "juncture",
+  "june",
+  "junior",
+  "juniper",
+  "junkie",
+  "junkman",
+  "junkyard",
+  "jurist",
+  "juror",
+  "jury",
+  "justice",
+  "justifier",
+  "justify",
+  "justly",
+  "justness",
+  "juvenile",
+  "kabob",
+  "kangaroo",
+  "karaoke",
+  "karate",
+  "karma",
+  "kebab",
+  "keenly",
+  "keenness",
+  "keep",
+  "keg",
+  "kelp",
+  "kennel",
+  "kept",
+  "kerchief",
+  "kerosene",
+  "kettle",
+  "kick",
+  "kiln",
+  "kilobyte",
+  "kilogram",
+  "kilometer",
+  "kilowatt",
+  "kilt",
+  "kimono",
+  "kindle",
+  "kindling",
+  "kindly",
+  "kindness",
+  "kindred",
+  "kinetic",
+  "kinfolk",
+  "king",
+  "kinship",
+  "kinsman",
+  "kinswoman",
+  "kissable",
+  "kisser",
+  "kissing",
+  "kitchen",
+  "kite",
+  "kitten",
+  "kitty",
+  "kiwi",
+  "kleenex",
+  "knapsack",
+  "knee",
+  "knelt",
+  "knickers",
+  "knoll",
+  "koala",
+  "kooky",
+  "kosher",
+  "krypton",
+  "kudos",
+  "kung",
+  "labored",
+  "laborer",
+  "laboring",
+  "laborious",
+  "labrador",
+  "ladder",
+  "ladies",
+  "ladle",
+  "ladybug",
+  "ladylike",
+  "lagged",
+  "lagging",
+  "lagoon",
+  "lair",
+  "lake",
+  "lance",
+  "landed",
+  "landfall",
+  "landfill",
+  "landing",
+  "landlady",
+  "landless",
+  "landline",
+  "landlord",
+  "landmark",
+  "landmass",
+  "landmine",
+  "landowner",
+  "landscape",
+  "landside",
+  "landslide",
+  "language",
+  "lankiness",
+  "lanky",
+  "lantern",
+  "lapdog",
+  "lapel",
+  "lapped",
+  "lapping",
+  "laptop",
+  "lard",
+  "large",
+  "lark",
+  "lash",
+  "lasso",
+  "last",
+  "latch",
+  "late",
+  "lather",
+  "latitude",
+  "latrine",
+  "latter",
+  "latticed",
+  "launch",
+  "launder",
+  "laundry",
+  "laurel",
+  "lavender",
+  "lavish",
+  "laxative",
+  "lazily",
+  "laziness",
+  "lazy",
+  "lecturer",
+  "left",
+  "legacy",
+  "legal",
+  "legend",
+  "legged",
+  "leggings",
+  "legible",
+  "legibly",
+  "legislate",
+  "lego",
+  "legroom",
+  "legume",
+  "legwarmer",
+  "legwork",
+  "lemon",
+  "lend",
+  "length",
+  "lens",
+  "lent",
+  "leotard",
+  "lesser",
+  "letdown",
+  "lethargic",
+  "lethargy",
+  "letter",
+  "lettuce",
+  "level",
+  "leverage",
+  "levers",
+  "levitate",
+  "levitator",
+  "liability",
+  "liable",
+  "liberty",
+  "librarian",
+  "library",
+  "licking",
+  "licorice",
+  "lid",
+  "life",
+  "lifter",
+  "lifting",
+  "liftoff",
+  "ligament",
+  "likely",
+  "likeness",
+  "likewise",
+  "liking",
+  "lilac",
+  "lilly",
+  "lily",
+  "limb",
+  "limeade",
+  "limelight",
+  "limes",
+  "limit",
+  "limping",
+  "limpness",
+  "line",
+  "lingo",
+  "linguini",
+  "linguist",
+  "lining",
+  "linked",
+  "linoleum",
+  "linseed",
+  "lint",
+  "lion",
+  "lip",
+  "liquefy",
+  "liqueur",
+  "liquid",
+  "lisp",
+  "list",
+  "litigate",
+  "litigator",
+  "litmus",
+  "litter",
+  "little",
+  "livable",
+  "lived",
+  "lively",
+  "liver",
+  "livestock",
+  "lividly",
+  "living",
+  "lizard",
+  "lubricant",
+  "lubricate",
+  "lucid",
+  "luckily",
+  "luckiness",
+  "luckless",
+  "lucrative",
+  "ludicrous",
+  "lugged",
+  "lukewarm",
+  "lullaby",
+  "lumber",
+  "luminance",
+  "luminous",
+  "lumpiness",
+  "lumping",
+  "lumpish",
+  "lunacy",
+  "lunar",
+  "lunchbox",
+  "luncheon",
+  "lunchroom",
+  "lunchtime",
+  "lung",
+  "lurch",
+  "lure",
+  "luridness",
+  "lurk",
+  "lushly",
+  "lushness",
+  "luster",
+  "lustfully",
+  "lustily",
+  "lustiness",
+  "lustrous",
+  "lusty",
+  "luxurious",
+  "luxury",
+  "lying",
+  "lyrically",
+  "lyricism",
+  "lyricist",
+  "lyrics",
+  "macarena",
+  "macaroni",
+  "macaw",
+  "mace",
+  "machine",
+  "machinist",
+  "magazine",
+  "magenta",
+  "maggot",
+  "magical",
+  "magician",
+  "magma",
+  "magnesium",
+  "magnetic",
+  "magnetism",
+  "magnetize",
+  "magnifier",
+  "magnify",
+  "magnitude",
+  "magnolia",
+  "mahogany",
+  "maimed",
+  "majestic",
+  "majesty",
+  "majorette",
+  "majority",
+  "makeover",
+  "maker",
+  "makeshift",
+  "making",
+  "malformed",
+  "malt",
+  "mama",
+  "mammal",
+  "mammary",
+  "mammogram",
+  "manager",
+  "managing",
+  "manatee",
+  "mandarin",
+  "mandate",
+  "mandatory",
+  "mandolin",
+  "manger",
+  "mangle",
+  "mango",
+  "mangy",
+  "manhandle",
+  "manhole",
+  "manhood",
+  "manhunt",
+  "manicotti",
+  "manicure",
+  "manifesto",
+  "manila",
+  "mankind",
+  "manlike",
+  "manliness",
+  "manly",
+  "manmade",
+  "manned",
+  "mannish",
+  "manor",
+  "manpower",
+  "mantis",
+  "mantra",
+  "manual",
+  "many",
+  "map",
+  "marathon",
+  "marauding",
+  "marbled",
+  "marbles",
+  "marbling",
+  "march",
+  "mardi",
+  "margarine",
+  "margarita",
+  "margin",
+  "marigold",
+  "marina",
+  "marine",
+  "marital",
+  "maritime",
+  "marlin",
+  "marmalade",
+  "maroon",
+  "married",
+  "marrow",
+  "marry",
+  "marshland",
+  "marshy",
+  "marsupial",
+  "marvelous",
+  "marxism",
+  "mascot",
+  "masculine",
+  "mashed",
+  "mashing",
+  "massager",
+  "masses",
+  "massive",
+  "mastiff",
+  "matador",
+  "matchbook",
+  "matchbox",
+  "matcher",
+  "matching",
+  "matchless",
+  "material",
+  "maternal",
+  "maternity",
+  "math",
+  "mating",
+  "matriarch",
+  "matrimony",
+  "matrix",
+  "matron",
+  "matted",
+  "matter",
+  "maturely",
+  "maturing",
+  "maturity",
+  "mauve",
+  "maverick",
+  "maximize",
+  "maximum",
+  "maybe",
+  "mayday",
+  "mayflower",
+  "moaner",
+  "moaning",
+  "mobile",
+  "mobility",
+  "mobilize",
+  "mobster",
+  "mocha",
+  "mocker",
+  "mockup",
+  "modified",
+  "modify",
+  "modular",
+  "modulator",
+  "module",
+  "moisten",
+  "moistness",
+  "moisture",
+  "molar",
+  "molasses",
+  "mold",
+  "molecular",
+  "molecule",
+  "molehill",
+  "mollusk",
+  "mom",
+  "monastery",
+  "monday",
+  "monetary",
+  "monetize",
+  "moneybags",
+  "moneyless",
+  "moneywise",
+  "mongoose",
+  "mongrel",
+  "monitor",
+  "monkhood",
+  "monogamy",
+  "monogram",
+  "monologue",
+  "monopoly",
+  "monorail",
+  "monotone",
+  "monotype",
+  "monoxide",
+  "monsieur",
+  "monsoon",
+  "monstrous",
+  "monthly",
+  "monument",
+  "moocher",
+  "moodiness",
+  "moody",
+  "mooing",
+  "moonbeam",
+  "mooned",
+  "moonlight",
+  "moonlike",
+  "moonlit",
+  "moonrise",
+  "moonscape",
+  "moonshine",
+  "moonstone",
+  "moonwalk",
+  "mop",
+  "morale",
+  "morality",
+  "morally",
+  "morbidity",
+  "morbidly",
+  "morphine",
+  "morphing",
+  "morse",
+  "mortality",
+  "mortally",
+  "mortician",
+  "mortified",
+  "mortify",
+  "mortuary",
+  "mosaic",
+  "mossy",
+  "most",
+  "mothball",
+  "mothproof",
+  "motion",
+  "motivate",
+  "motivator",
+  "motive",
+  "motocross",
+  "motor",
+  "motto",
+  "mountable",
+  "mountain",
+  "mounted",
+  "mounting",
+  "mourner",
+  "mournful",
+  "mouse",
+  "mousiness",
+  "moustache",
+  "mousy",
+  "mouth",
+  "movable",
+  "move",
+  "movie",
+  "moving",
+  "mower",
+  "mowing",
+  "much",
+  "muck",
+  "mud",
+  "mug",
+  "mulberry",
+  "mulch",
+  "mule",
+  "mulled",
+  "mullets",
+  "multiple",
+  "multiply",
+  "multitask",
+  "multitude",
+  "mumble",
+  "mumbling",
+  "mumbo",
+  "mummified",
+  "mummify",
+  "mummy",
+  "mumps",
+  "munchkin",
+  "mundane",
+  "municipal",
+  "muppet",
+  "mural",
+  "murkiness",
+  "murky",
+  "murmuring",
+  "muscular",
+  "museum",
+  "mushily",
+  "mushiness",
+  "mushroom",
+  "mushy",
+  "music",
+  "musket",
+  "muskiness",
+  "musky",
+  "mustang",
+  "mustard",
+  "muster",
+  "mustiness",
+  "musty",
+  "mutable",
+  "mutate",
+  "mutation",
+  "mute",
+  "mutilated",
+  "mutilator",
+  "mutiny",
+  "mutt",
+  "mutual",
+  "muzzle",
+  "myself",
+  "myspace",
+  "mystified",
+  "mystify",
+  "myth",
+  "nacho",
+  "nag",
+  "nail",
+  "name",
+  "naming",
+  "nanny",
+  "nanometer",
+  "nape",
+  "napkin",
+  "napped",
+  "napping",
+  "nappy",
+  "narrow",
+  "nastily",
+  "nastiness",
+  "national",
+  "native",
+  "nativity",
+  "natural",
+  "nature",
+  "naturist",
+  "nautical",
+  "navigate",
+  "navigator",
+  "navy",
+  "nearby",
+  "nearest",
+  "nearly",
+  "nearness",
+  "neatly",
+  "neatness",
+  "nebula",
+  "nebulizer",
+  "nectar",
+  "negate",
+  "negation",
+  "negative",
+  "neglector",
+  "negligee",
+  "negligent",
+  "negotiate",
+  "nemeses",
+  "nemesis",
+  "neon",
+  "nephew",
+  "nerd",
+  "nervous",
+  "nervy",
+  "nest",
+  "net",
+  "neurology",
+  "neuron",
+  "neurosis",
+  "neurotic",
+  "neuter",
+  "neutron",
+  "never",
+  "next",
+  "nibble",
+  "nickname",
+  "nicotine",
+  "niece",
+  "nifty",
+  "nimble",
+  "nimbly",
+  "nineteen",
+  "ninetieth",
+  "ninja",
+  "nintendo",
+  "ninth",
+  "nuclear",
+  "nuclei",
+  "nucleus",
+  "nugget",
+  "nullify",
+  "number",
+  "numbing",
+  "numbly",
+  "numbness",
+  "numeral",
+  "numerate",
+  "numerator",
+  "numeric",
+  "numerous",
+  "nuptials",
+  "nursery",
+  "nursing",
+  "nurture",
+  "nutcase",
+  "nutlike",
+  "nutmeg",
+  "nutrient",
+  "nutshell",
+  "nuttiness",
+  "nutty",
+  "nuzzle",
+  "nylon",
+  "oaf",
+  "oak",
+  "oasis",
+  "oat",
+  "obedience",
+  "obedient",
+  "obituary",
+  "object",
+  "obligate",
+  "obliged",
+  "oblivion",
+  "oblivious",
+  "oblong",
+  "obnoxious",
+  "oboe",
+  "obscure",
+  "obscurity",
+  "observant",
+  "observer",
+  "observing",
+  "obsessed",
+  "obsession",
+  "obsessive",
+  "obsolete",
+  "obstacle",
+  "obstinate",
+  "obstruct",
+  "obtain",
+  "obtrusive",
+  "obtuse",
+  "obvious",
+  "occultist",
+  "occupancy",
+  "occupant",
+  "occupier",
+  "occupy",
+  "ocean",
+  "ocelot",
+  "octagon",
+  "octane",
+  "october",
+  "octopus",
+  "ogle",
+  "oil",
+  "oink",
+  "ointment",
+  "okay",
+  "old",
+  "olive",
+  "olympics",
+  "omega",
+  "omen",
+  "ominous",
+  "omission",
+  "omit",
+  "omnivore",
+  "onboard",
+  "oncoming",
+  "ongoing",
+  "onion",
+  "online",
+  "onlooker",
+  "only",
+  "onscreen",
+  "onset",
+  "onshore",
+  "onslaught",
+  "onstage",
+  "onto",
+  "onward",
+  "onyx",
+  "oops",
+  "ooze",
+  "oozy",
+  "opacity",
+  "opal",
+  "open",
+  "operable",
+  "operate",
+  "operating",
+  "operation",
+  "operative",
+  "operator",
+  "opium",
+  "opossum",
+  "opponent",
+  "oppose",
+  "opposing",
+  "opposite",
+  "oppressed",
+  "oppressor",
+  "opt",
+  "opulently",
+  "osmosis",
+  "other",
+  "otter",
+  "ouch",
+  "ought",
+  "ounce",
+  "outage",
+  "outback",
+  "outbid",
+  "outboard",
+  "outbound",
+  "outbreak",
+  "outburst",
+  "outcast",
+  "outclass",
+  "outcome",
+  "outdated",
+  "outdoors",
+  "outer",
+  "outfield",
+  "outfit",
+  "outflank",
+  "outgoing",
+  "outgrow",
+  "outhouse",
+  "outing",
+  "outlast",
+  "outlet",
+  "outline",
+  "outlook",
+  "outlying",
+  "outmatch",
+  "outmost",
+  "outnumber",
+  "outplayed",
+  "outpost",
+  "outpour",
+  "output",
+  "outrage",
+  "outrank",
+  "outreach",
+  "outright",
+  "outscore",
+  "outsell",
+  "outshine",
+  "outshoot",
+  "outsider",
+  "outskirts",
+  "outsmart",
+  "outsource",
+  "outspoken",
+  "outtakes",
+  "outthink",
+  "outward",
+  "outweigh",
+  "outwit",
+  "oval",
+  "ovary",
+  "oven",
+  "overact",
+  "overall",
+  "overarch",
+  "overbid",
+  "overbill",
+  "overbite",
+  "overblown",
+  "overboard",
+  "overbook",
+  "overbuilt",
+  "overcast",
+  "overcoat",
+  "overcome",
+  "overcook",
+  "overcrowd",
+  "overdraft",
+  "overdrawn",
+  "overdress",
+  "overdrive",
+  "overdue",
+  "overeager",
+  "overeater",
+  "overexert",
+  "overfed",
+  "overfeed",
+  "overfill",
+  "overflow",
+  "overfull",
+  "overgrown",
+  "overhand",
+  "overhang",
+  "overhaul",
+  "overhead",
+  "overhear",
+  "overheat",
+  "overhung",
+  "overjoyed",
+  "overkill",
+  "overlabor",
+  "overlaid",
+  "overlap",
+  "overlay",
+  "overload",
+  "overlook",
+  "overlord",
+  "overlying",
+  "overnight",
+  "overpass",
+  "overpay",
+  "overplant",
+  "overplay",
+  "overpower",
+  "overprice",
+  "overrate",
+  "overreach",
+  "overreact",
+  "override",
+  "overripe",
+  "overrule",
+  "overrun",
+  "overshoot",
+  "overshot",
+  "oversight",
+  "oversized",
+  "oversleep",
+  "oversold",
+  "overspend",
+  "overstate",
+  "overstay",
+  "overstep",
+  "overstock",
+  "overstuff",
+  "oversweet",
+  "overtake",
+  "overthrow",
+  "overtime",
+  "overtly",
+  "overtone",
+  "overture",
+  "overturn",
+  "overuse",
+  "overvalue",
+  "overview",
+  "overwrite",
+  "owl",
+  "oxford",
+  "oxidant",
+  "oxidation",
+  "oxidize",
+  "oxidizing",
+  "oxygen",
+  "oxymoron",
+  "oyster",
+  "ozone",
+  "paced",
+  "pacemaker",
+  "pacific",
+  "pacifier",
+  "pacifism",
+  "pacifist",
+  "pacify",
+  "padded",
+  "padding",
+  "paddle",
+  "paddling",
+  "padlock",
+  "pagan",
+  "pager",
+  "paging",
+  "pajamas",
+  "palace",
+  "palatable",
+  "palm",
+  "palpable",
+  "palpitate",
+  "paltry",
+  "pampered",
+  "pamperer",
+  "pampers",
+  "pamphlet",
+  "panama",
+  "pancake",
+  "pancreas",
+  "panda",
+  "pandemic",
+  "pang",
+  "panhandle",
+  "panic",
+  "panning",
+  "panorama",
+  "panoramic",
+  "panther",
+  "pantomime",
+  "pantry",
+  "pants",
+  "pantyhose",
+  "paparazzi",
+  "papaya",
+  "paper",
+  "paprika",
+  "papyrus",
+  "parabola",
+  "parachute",
+  "parade",
+  "paradox",
+  "paragraph",
+  "parakeet",
+  "paralegal",
+  "paralyses",
+  "paralysis",
+  "paralyze",
+  "paramedic",
+  "parameter",
+  "paramount",
+  "parasail",
+  "parasite",
+  "parasitic",
+  "parcel",
+  "parched",
+  "parchment",
+  "pardon",
+  "parish",
+  "parka",
+  "parking",
+  "parkway",
+  "parlor",
+  "parmesan",
+  "parole",
+  "parrot",
+  "parsley",
+  "parsnip",
+  "partake",
+  "parted",
+  "parting",
+  "partition",
+  "partly",
+  "partner",
+  "partridge",
+  "party",
+  "passable",
+  "passably",
+  "passage",
+  "passcode",
+  "passenger",
+  "passerby",
+  "passing",
+  "passion",
+  "passive",
+  "passivism",
+  "passover",
+  "passport",
+  "password",
+  "pasta",
+  "pasted",
+  "pastel",
+  "pastime",
+  "pastor",
+  "pastrami",
+  "pasture",
+  "pasty",
+  "patchwork",
+  "patchy",
+  "paternal",
+  "paternity",
+  "path",
+  "patience",
+  "patient",
+  "patio",
+  "patriarch",
+  "patriot",
+  "patrol",
+  "patronage",
+  "patronize",
+  "pauper",
+  "pavement",
+  "paver",
+  "pavestone",
+  "pavilion",
+  "paving",
+  "pawing",
+  "payable",
+  "payback",
+  "paycheck",
+  "payday",
+  "payee",
+  "payer",
+  "paying",
+  "payment",
+  "payphone",
+  "payroll",
+  "pebble",
+  "pebbly",
+  "pecan",
+  "pectin",
+  "peculiar",
+  "peddling",
+  "pediatric",
+  "pedicure",
+  "pedigree",
+  "pedometer",
+  "pegboard",
+  "pelican",
+  "pellet",
+  "pelt",
+  "pelvis",
+  "penalize",
+  "penalty",
+  "pencil",
+  "pendant",
+  "pending",
+  "penholder",
+  "penknife",
+  "pennant",
+  "penniless",
+  "penny",
+  "penpal",
+  "pension",
+  "pentagon",
+  "pentagram",
+  "pep",
+  "perceive",
+  "percent",
+  "perch",
+  "percolate",
+  "perennial",
+  "perfected",
+  "perfectly",
+  "perfume",
+  "periscope",
+  "perish",
+  "perjurer",
+  "perjury",
+  "perkiness",
+  "perky",
+  "perm",
+  "peroxide",
+  "perpetual",
+  "perplexed",
+  "persecute",
+  "persevere",
+  "persuaded",
+  "persuader",
+  "pesky",
+  "peso",
+  "pessimism",
+  "pessimist",
+  "pester",
+  "pesticide",
+  "petal",
+  "petite",
+  "petition",
+  "petri",
+  "petroleum",
+  "petted",
+  "petticoat",
+  "pettiness",
+  "petty",
+  "petunia",
+  "phantom",
+  "phobia",
+  "phoenix",
+  "phonebook",
+  "phoney",
+  "phonics",
+  "phoniness",
+  "phony",
+  "phosphate",
+  "photo",
+  "phrase",
+  "phrasing",
+  "placard",
+  "placate",
+  "placidly",
+  "plank",
+  "planner",
+  "plant",
+  "plasma",
+  "plaster",
+  "plastic",
+  "plated",
+  "platform",
+  "plating",
+  "platinum",
+  "platonic",
+  "platter",
+  "platypus",
+  "plausible",
+  "plausibly",
+  "playable",
+  "playback",
+  "player",
+  "playful",
+  "playgroup",
+  "playhouse",
+  "playing",
+  "playlist",
+  "playmaker",
+  "playmate",
+  "playoff",
+  "playpen",
+  "playroom",
+  "playset",
+  "plaything",
+  "playtime",
+  "plaza",
+  "pleading",
+  "pleat",
+  "pledge",
+  "plentiful",
+  "plenty",
+  "plethora",
+  "plexiglas",
+  "pliable",
+  "plod",
+  "plop",
+  "plot",
+  "plow",
+  "ploy",
+  "pluck",
+  "plug",
+  "plunder",
+  "plunging",
+  "plural",
+  "plus",
+  "plutonium",
+  "plywood",
+  "poach",
+  "pod",
+  "poem",
+  "poet",
+  "pogo",
+  "pointed",
+  "pointer",
+  "pointing",
+  "pointless",
+  "pointy",
+  "poise",
+  "poison",
+  "poker",
+  "poking",
+  "polar",
+  "police",
+  "policy",
+  "polio",
+  "polish",
+  "politely",
+  "polka",
+  "polo",
+  "polyester",
+  "polygon",
+  "polygraph",
+  "polymer",
+  "poncho",
+  "pond",
+  "pony",
+  "popcorn",
+  "pope",
+  "poplar",
+  "popper",
+  "poppy",
+  "popsicle",
+  "populace",
+  "popular",
+  "populate",
+  "porcupine",
+  "pork",
+  "porous",
+  "porridge",
+  "portable",
+  "portal",
+  "portfolio",
+  "porthole",
+  "portion",
+  "portly",
+  "portside",
+  "poser",
+  "posh",
+  "posing",
+  "possible",
+  "possibly",
+  "possum",
+  "postage",
+  "postal",
+  "postbox",
+  "postcard",
+  "posted",
+  "poster",
+  "posting",
+  "postnasal",
+  "posture",
+  "postwar",
+  "pouch",
+  "pounce",
+  "pouncing",
+  "pound",
+  "pouring",
+  "pout",
+  "powdered",
+  "powdering",
+  "powdery",
+  "power",
+  "powwow",
+  "pox",
+  "praising",
+  "prance",
+  "prancing",
+  "pranker",
+  "prankish",
+  "prankster",
+  "prayer",
+  "praying",
+  "preacher",
+  "preaching",
+  "preachy",
+  "preamble",
+  "precinct",
+  "precise",
+  "precision",
+  "precook",
+  "precut",
+  "predator",
+  "predefine",
+  "predict",
+  "preface",
+  "prefix",
+  "preflight",
+  "preformed",
+  "pregame",
+  "pregnancy",
+  "pregnant",
+  "preheated",
+  "prelaunch",
+  "prelaw",
+  "prelude",
+  "premiere",
+  "premises",
+  "premium",
+  "prenatal",
+  "preoccupy",
+  "preorder",
+  "prepaid",
+  "prepay",
+  "preplan",
+  "preppy",
+  "preschool",
+  "prescribe",
+  "preseason",
+  "preset",
+  "preshow",
+  "president",
+  "presoak",
+  "press",
+  "presume",
+  "presuming",
+  "preteen",
+  "pretended",
+  "pretender",
+  "pretense",
+  "pretext",
+  "pretty",
+  "pretzel",
+  "prevail",
+  "prevalent",
+  "prevent",
+  "preview",
+  "previous",
+  "prewar",
+  "prewashed",
+  "prideful",
+  "pried",
+  "primal",
+  "primarily",
+  "primary",
+  "primate",
+  "primer",
+  "primp",
+  "princess",
+  "print",
+  "prior",
+  "prism",
+  "prison",
+  "prissy",
+  "pristine",
+  "privacy",
+  "private",
+  "privatize",
+  "prize",
+  "proactive",
+  "probable",
+  "probably",
+  "probation",
+  "probe",
+  "probing",
+  "probiotic",
+  "problem",
+  "procedure",
+  "process",
+  "proclaim",
+  "procreate",
+  "procurer",
+  "prodigal",
+  "prodigy",
+  "produce",
+  "product",
+  "profane",
+  "profanity",
+  "professed",
+  "professor",
+  "profile",
+  "profound",
+  "profusely",
+  "progeny",
+  "prognosis",
+  "program",
+  "progress",
+  "projector",
+  "prologue",
+  "prolonged",
+  "promenade",
+  "prominent",
+  "promoter",
+  "promotion",
+  "prompter",
+  "promptly",
+  "prone",
+  "prong",
+  "pronounce",
+  "pronto",
+  "proofing",
+  "proofread",
+  "proofs",
+  "propeller",
+  "properly",
+  "property",
+  "proponent",
+  "proposal",
+  "propose",
+  "props",
+  "prorate",
+  "protector",
+  "protegee",
+  "proton",
+  "prototype",
+  "protozoan",
+  "protract",
+  "protrude",
+  "proud",
+  "provable",
+  "proved",
+  "proven",
+  "provided",
+  "provider",
+  "providing",
+  "province",
+  "proving",
+  "provoke",
+  "provoking",
+  "provolone",
+  "prowess",
+  "prowler",
+  "prowling",
+  "proximity",
+  "proxy",
+  "prozac",
+  "prude",
+  "prudishly",
+  "prune",
+  "pruning",
+  "pry",
+  "psychic",
+  "public",
+  "publisher",
+  "pucker",
+  "pueblo",
+  "pug",
+  "pull",
+  "pulmonary",
+  "pulp",
+  "pulsate",
+  "pulse",
+  "pulverize",
+  "puma",
+  "pumice",
+  "pummel",
+  "punch",
+  "punctual",
+  "punctuate",
+  "punctured",
+  "pungent",
+  "punisher",
+  "punk",
+  "pupil",
+  "puppet",
+  "puppy",
+  "purchase",
+  "pureblood",
+  "purebred",
+  "purely",
+  "pureness",
+  "purgatory",
+  "purge",
+  "purging",
+  "purifier",
+  "purify",
+  "purist",
+  "puritan",
+  "purity",
+  "purple",
+  "purplish",
+  "purposely",
+  "purr",
+  "purse",
+  "pursuable",
+  "pursuant",
+  "pursuit",
+  "purveyor",
+  "pushcart",
+  "pushchair",
+  "pusher",
+  "pushiness",
+  "pushing",
+  "pushover",
+  "pushpin",
+  "pushup",
+  "pushy",
+  "putdown",
+  "putt",
+  "puzzle",
+  "puzzling",
+  "pyramid",
+  "pyromania",
+  "python",
+  "quack",
+  "quadrant",
+  "quail",
+  "quaintly",
+  "quake",
+  "quaking",
+  "qualified",
+  "qualifier",
+  "qualify",
+  "quality",
+  "qualm",
+  "quantum",
+  "quarrel",
+  "quarry",
+  "quartered",
+  "quarterly",
+  "quarters",
+  "quartet",
+  "quench",
+  "query",
+  "quicken",
+  "quickly",
+  "quickness",
+  "quicksand",
+  "quickstep",
+  "quiet",
+  "quill",
+  "quilt",
+  "quintet",
+  "quintuple",
+  "quirk",
+  "quit",
+  "quiver",
+  "quizzical",
+  "quotable",
+  "quotation",
+  "quote",
+  "rabid",
+  "race",
+  "racing",
+  "racism",
+  "rack",
+  "racoon",
+  "radar",
+  "radial",
+  "radiance",
+  "radiantly",
+  "radiated",
+  "radiation",
+  "radiator",
+  "radio",
+  "radish",
+  "raffle",
+  "raft",
+  "rage",
+  "ragged",
+  "raging",
+  "ragweed",
+  "raider",
+  "railcar",
+  "railing",
+  "railroad",
+  "railway",
+  "raisin",
+  "rake",
+  "raking",
+  "rally",
+  "ramble",
+  "rambling",
+  "ramp",
+  "ramrod",
+  "ranch",
+  "rancidity",
+  "random",
+  "ranged",
+  "ranger",
+  "ranging",
+  "ranked",
+  "ranking",
+  "ransack",
+  "ranting",
+  "rants",
+  "rare",
+  "rarity",
+  "rascal",
+  "rash",
+  "rasping",
+  "ravage",
+  "raven",
+  "ravine",
+  "raving",
+  "ravioli",
+  "ravishing",
+  "reabsorb",
+  "reach",
+  "reacquire",
+  "reaction",
+  "reactive",
+  "reactor",
+  "reaffirm",
+  "ream",
+  "reanalyze",
+  "reappear",
+  "reapply",
+  "reappoint",
+  "reapprove",
+  "rearrange",
+  "rearview",
+  "reason",
+  "reassign",
+  "reassure",
+  "reattach",
+  "reawake",
+  "rebalance",
+  "rebate",
+  "rebel",
+  "rebirth",
+  "reboot",
+  "reborn",
+  "rebound",
+  "rebuff",
+  "rebuild",
+  "rebuilt",
+  "reburial",
+  "rebuttal",
+  "recall",
+  "recant",
+  "recapture",
+  "recast",
+  "recede",
+  "recent",
+  "recess",
+  "recharger",
+  "recipient",
+  "recital",
+  "recite",
+  "reckless",
+  "reclaim",
+  "recliner",
+  "reclining",
+  "recluse",
+  "reclusive",
+  "recognize",
+  "recoil",
+  "recollect",
+  "recolor",
+  "reconcile",
+  "reconfirm",
+  "reconvene",
+  "recopy",
+  "record",
+  "recount",
+  "recoup",
+  "recovery",
+  "recreate",
+  "rectal",
+  "rectangle",
+  "rectified",
+  "rectify",
+  "recycled",
+  "recycler",
+  "recycling",
+  "reemerge",
+  "reenact",
+  "reenter",
+  "reentry",
+  "reexamine",
+  "referable",
+  "referee",
+  "reference",
+  "refill",
+  "refinance",
+  "refined",
+  "refinery",
+  "refining",
+  "refinish",
+  "reflected",
+  "reflector",
+  "reflex",
+  "reflux",
+  "refocus",
+  "refold",
+  "reforest",
+  "reformat",
+  "reformed",
+  "reformer",
+  "reformist",
+  "refract",
+  "refrain",
+  "refreeze",
+  "refresh",
+  "refried",
+  "refueling",
+  "refund",
+  "refurbish",
+  "refurnish",
+  "refusal",
+  "refuse",
+  "refusing",
+  "refutable",
+  "refute",
+  "regain",
+  "regalia",
+  "regally",
+  "reggae",
+  "regime",
+  "region",
+  "register",
+  "registrar",
+  "registry",
+  "regress",
+  "regretful",
+  "regroup",
+  "regular",
+  "regulate",
+  "regulator",
+  "rehab",
+  "reheat",
+  "rehire",
+  "rehydrate",
+  "reimburse",
+  "reissue",
+  "reiterate",
+  "rejoice",
+  "rejoicing",
+  "rejoin",
+  "rekindle",
+  "relapse",
+  "relapsing",
+  "relatable",
+  "related",
+  "relation",
+  "relative",
+  "relax",
+  "relay",
+  "relearn",
+  "release",
+  "relenting",
+  "reliable",
+  "reliably",
+  "reliance",
+  "reliant",
+  "relic",
+  "relieve",
+  "relieving",
+  "relight",
+  "relish",
+  "relive",
+  "reload",
+  "relocate",
+  "relock",
+  "reluctant",
+  "rely",
+  "remake",
+  "remark",
+  "remarry",
+  "rematch",
+  "remedial",
+  "remedy",
+  "remember",
+  "reminder",
+  "remindful",
+  "remission",
+  "remix",
+  "remnant",
+  "remodeler",
+  "remold",
+  "remorse",
+  "remote",
+  "removable",
+  "removal",
+  "removed",
+  "remover",
+  "removing",
+  "rename",
+  "renderer",
+  "rendering",
+  "rendition",
+  "renegade",
+  "renewable",
+  "renewably",
+  "renewal",
+  "renewed",
+  "renounce",
+  "renovate",
+  "renovator",
+  "rentable",
+  "rental",
+  "rented",
+  "renter",
+  "reoccupy",
+  "reoccur",
+  "reopen",
+  "reorder",
+  "repackage",
+  "repacking",
+  "repaint",
+  "repair",
+  "repave",
+  "repaying",
+  "repayment",
+  "repeal",
+  "repeated",
+  "repeater",
+  "repent",
+  "rephrase",
+  "replace",
+  "replay",
+  "replica",
+  "reply",
+  "reporter",
+  "repose",
+  "repossess",
+  "repost",
+  "repressed",
+  "reprimand",
+  "reprint",
+  "reprise",
+  "reproach",
+  "reprocess",
+  "reproduce",
+  "reprogram",
+  "reps",
+  "reptile",
+  "reptilian",
+  "repugnant",
+  "repulsion",
+  "repulsive",
+  "repurpose",
+  "reputable",
+  "reputably",
+  "request",
+  "require",
+  "requisite",
+  "reroute",
+  "rerun",
+  "resale",
+  "resample",
+  "rescuer",
+  "reseal",
+  "research",
+  "reselect",
+  "reseller",
+  "resemble",
+  "resend",
+  "resent",
+  "reset",
+  "reshape",
+  "reshoot",
+  "reshuffle",
+  "residence",
+  "residency",
+  "resident",
+  "residual",
+  "residue",
+  "resigned",
+  "resilient",
+  "resistant",
+  "resisting",
+  "resize",
+  "resolute",
+  "resolved",
+  "resonant",
+  "resonate",
+  "resort",
+  "resource",
+  "respect",
+  "resubmit",
+  "result",
+  "resume",
+  "resupply",
+  "resurface",
+  "resurrect",
+  "retail",
+  "retainer",
+  "retaining",
+  "retake",
+  "retaliate",
+  "retention",
+  "rethink",
+  "retinal",
+  "retired",
+  "retiree",
+  "retiring",
+  "retold",
+  "retool",
+  "retorted",
+  "retouch",
+  "retrace",
+  "retract",
+  "retrain",
+  "retread",
+  "retreat",
+  "retrial",
+  "retrieval",
+  "retriever",
+  "retry",
+  "return",
+  "retying",
+  "retype",
+  "reunion",
+  "reunite",
+  "reusable",
+  "reuse",
+  "reveal",
+  "reveler",
+  "revenge",
+  "revenue",
+  "reverb",
+  "revered",
+  "reverence",
+  "reverend",
+  "reversal",
+  "reverse",
+  "reversing",
+  "reversion",
+  "revert",
+  "revisable",
+  "revise",
+  "revision",
+  "revisit",
+  "revivable",
+  "revival",
+  "reviver",
+  "reviving",
+  "revocable",
+  "revoke",
+  "revolt",
+  "revolver",
+  "revolving",
+  "reward",
+  "rewash",
+  "rewind",
+  "rewire",
+  "reword",
+  "rework",
+  "rewrap",
+  "rewrite",
+  "rhyme",
+  "ribbon",
+  "ribcage",
+  "rice",
+  "riches",
+  "richly",
+  "richness",
+  "rickety",
+  "ricotta",
+  "riddance",
+  "ridden",
+  "ride",
+  "riding",
+  "rifling",
+  "rift",
+  "rigging",
+  "rigid",
+  "rigor",
+  "rimless",
+  "rimmed",
+  "rind",
+  "rink",
+  "rinse",
+  "rinsing",
+  "riot",
+  "ripcord",
+  "ripeness",
+  "ripening",
+  "ripping",
+  "ripple",
+  "rippling",
+  "riptide",
+  "rise",
+  "rising",
+  "risk",
+  "risotto",
+  "ritalin",
+  "ritzy",
+  "rival",
+  "riverbank",
+  "riverbed",
+  "riverboat",
+  "riverside",
+  "riveter",
+  "riveting",
+  "roamer",
+  "roaming",
+  "roast",
+  "robbing",
+  "robe",
+  "robin",
+  "robotics",
+  "robust",
+  "rockband",
+  "rocker",
+  "rocket",
+  "rockfish",
+  "rockiness",
+  "rocking",
+  "rocklike",
+  "rockslide",
+  "rockstar",
+  "rocky",
+  "rogue",
+  "roman",
+  "romp",
+  "rope",
+  "roping",
+  "roster",
+  "rosy",
+  "rotten",
+  "rotting",
+  "rotunda",
+  "roulette",
+  "rounding",
+  "roundish",
+  "roundness",
+  "roundup",
+  "roundworm",
+  "routine",
+  "routing",
+  "rover",
+  "roving",
+  "royal",
+  "rubbed",
+  "rubber",
+  "rubbing",
+  "rubble",
+  "rubdown",
+  "ruby",
+  "ruckus",
+  "rudder",
+  "rug",
+  "ruined",
+  "rule",
+  "rumble",
+  "rumbling",
+  "rummage",
+  "rumor",
+  "runaround",
+  "rundown",
+  "runner",
+  "running",
+  "runny",
+  "runt",
+  "runway",
+  "rupture",
+  "rural",
+  "ruse",
+  "rush",
+  "rust",
+  "rut",
+  "sabbath",
+  "sabotage",
+  "sacrament",
+  "sacred",
+  "sacrifice",
+  "sadden",
+  "saddlebag",
+  "saddled",
+  "saddling",
+  "sadly",
+  "sadness",
+  "safari",
+  "safeguard",
+  "safehouse",
+  "safely",
+  "safeness",
+  "saffron",
+  "saga",
+  "sage",
+  "sagging",
+  "saggy",
+  "said",
+  "saint",
+  "sake",
+  "salad",
+  "salami",
+  "salaried",
+  "salary",
+  "saline",
+  "salon",
+  "saloon",
+  "salsa",
+  "salt",
+  "salutary",
+  "salute",
+  "salvage",
+  "salvaging",
+  "salvation",
+  "same",
+  "sample",
+  "sampling",
+  "sanction",
+  "sanctity",
+  "sanctuary",
+  "sandal",
+  "sandbag",
+  "sandbank",
+  "sandbar",
+  "sandblast",
+  "sandbox",
+  "sanded",
+  "sandfish",
+  "sanding",
+  "sandlot",
+  "sandpaper",
+  "sandpit",
+  "sandstone",
+  "sandstorm",
+  "sandworm",
+  "sandy",
+  "sanitary",
+  "sanitizer",
+  "sank",
+  "santa",
+  "sapling",
+  "sappiness",
+  "sappy",
+  "sarcasm",
+  "sarcastic",
+  "sardine",
+  "sash",
+  "sasquatch",
+  "sassy",
+  "satchel",
+  "satiable",
+  "satin",
+  "satirical",
+  "satisfied",
+  "satisfy",
+  "saturate",
+  "saturday",
+  "sauciness",
+  "saucy",
+  "sauna",
+  "savage",
+  "savanna",
+  "saved",
+  "savings",
+  "savior",
+  "savor",
+  "saxophone",
+  "say",
+  "scabbed",
+  "scabby",
+  "scalded",
+  "scalding",
+  "scale",
+  "scaling",
+  "scallion",
+  "scallop",
+  "scalping",
+  "scam",
+  "scandal",
+  "scanner",
+  "scanning",
+  "scant",
+  "scapegoat",
+  "scarce",
+  "scarcity",
+  "scarecrow",
+  "scared",
+  "scarf",
+  "scarily",
+  "scariness",
+  "scarring",
+  "scary",
+  "scavenger",
+  "scenic",
+  "schedule",
+  "schematic",
+  "scheme",
+  "scheming",
+  "schilling",
+  "schnapps",
+  "scholar",
+  "science",
+  "scientist",
+  "scion",
+  "scoff",
+  "scolding",
+  "scone",
+  "scoop",
+  "scooter",
+  "scope",
+  "scorch",
+  "scorebook",
+  "scorecard",
+  "scored",
+  "scoreless",
+  "scorer",
+  "scoring",
+  "scorn",
+  "scorpion",
+  "scotch",
+  "scoundrel",
+  "scoured",
+  "scouring",
+  "scouting",
+  "scouts",
+  "scowling",
+  "scrabble",
+  "scraggly",
+  "scrambled",
+  "scrambler",
+  "scrap",
+  "scratch",
+  "scrawny",
+  "screen",
+  "scribble",
+  "scribe",
+  "scribing",
+  "scrimmage",
+  "script",
+  "scroll",
+  "scrooge",
+  "scrounger",
+  "scrubbed",
+  "scrubber",
+  "scruffy",
+  "scrunch",
+  "scrutiny",
+  "scuba",
+  "scuff",
+  "sculptor",
+  "sculpture",
+  "scurvy",
+  "scuttle",
+  "secluded",
+  "secluding",
+  "seclusion",
+  "second",
+  "secrecy",
+  "secret",
+  "sectional",
+  "sector",
+  "secular",
+  "securely",
+  "security",
+  "sedan",
+  "sedate",
+  "sedation",
+  "sedative",
+  "sediment",
+  "seduce",
+  "seducing",
+  "segment",
+  "seismic",
+  "seizing",
+  "seldom",
+  "selected",
+  "selection",
+  "selective",
+  "selector",
+  "self",
+  "seltzer",
+  "semantic",
+  "semester",
+  "semicolon",
+  "semifinal",
+  "seminar",
+  "semisoft",
+  "semisweet",
+  "senate",
+  "senator",
+  "send",
+  "senior",
+  "senorita",
+  "sensation",
+  "sensitive",
+  "sensitize",
+  "sensually",
+  "sensuous",
+  "sepia",
+  "september",
+  "septic",
+  "septum",
+  "sequel",
+  "sequence",
+  "sequester",
+  "series",
+  "sermon",
+  "serotonin",
+  "serpent",
+  "serrated",
+  "serve",
+  "service",
+  "serving",
+  "sesame",
+  "sessions",
+  "setback",
+  "setting",
+  "settle",
+  "settling",
+  "setup",
+  "sevenfold",
+  "seventeen",
+  "seventh",
+  "seventy",
+  "severity",
+  "shabby",
+  "shack",
+  "shaded",
+  "shadily",
+  "shadiness",
+  "shading",
+  "shadow",
+  "shady",
+  "shaft",
+  "shakable",
+  "shakily",
+  "shakiness",
+  "shaking",
+  "shaky",
+  "shale",
+  "shallot",
+  "shallow",
+  "shame",
+  "shampoo",
+  "shamrock",
+  "shank",
+  "shanty",
+  "shape",
+  "shaping",
+  "share",
+  "sharpener",
+  "sharper",
+  "sharpie",
+  "sharply",
+  "sharpness",
+  "shawl",
+  "sheath",
+  "shed",
+  "sheep",
+  "sheet",
+  "shelf",
+  "shell",
+  "shelter",
+  "shelve",
+  "shelving",
+  "sherry",
+  "shield",
+  "shifter",
+  "shifting",
+  "shiftless",
+  "shifty",
+  "shimmer",
+  "shimmy",
+  "shindig",
+  "shine",
+  "shingle",
+  "shininess",
+  "shining",
+  "shiny",
+  "ship",
+  "shirt",
+  "shivering",
+  "shock",
+  "shone",
+  "shoplift",
+  "shopper",
+  "shopping",
+  "shoptalk",
+  "shore",
+  "shortage",
+  "shortcake",
+  "shortcut",
+  "shorten",
+  "shorter",
+  "shorthand",
+  "shortlist",
+  "shortly",
+  "shortness",
+  "shorts",
+  "shortwave",
+  "shorty",
+  "shout",
+  "shove",
+  "showbiz",
+  "showcase",
+  "showdown",
+  "shower",
+  "showgirl",
+  "showing",
+  "showman",
+  "shown",
+  "showoff",
+  "showpiece",
+  "showplace",
+  "showroom",
+  "showy",
+  "shrank",
+  "shrapnel",
+  "shredder",
+  "shredding",
+  "shrewdly",
+  "shriek",
+  "shrill",
+  "shrimp",
+  "shrine",
+  "shrink",
+  "shrivel",
+  "shrouded",
+  "shrubbery",
+  "shrubs",
+  "shrug",
+  "shrunk",
+  "shucking",
+  "shudder",
+  "shuffle",
+  "shuffling",
+  "shun",
+  "shush",
+  "shut",
+  "shy",
+  "siamese",
+  "siberian",
+  "sibling",
+  "siding",
+  "sierra",
+  "siesta",
+  "sift",
+  "sighing",
+  "silenced",
+  "silencer",
+  "silent",
+  "silica",
+  "silicon",
+  "silk",
+  "silliness",
+  "silly",
+  "silo",
+  "silt",
+  "silver",
+  "similarly",
+  "simile",
+  "simmering",
+  "simple",
+  "simplify",
+  "simply",
+  "sincere",
+  "sincerity",
+  "singer",
+  "singing",
+  "single",
+  "singular",
+  "sinister",
+  "sinless",
+  "sinner",
+  "sinuous",
+  "sip",
+  "siren",
+  "sister",
+  "sitcom",
+  "sitter",
+  "sitting",
+  "situated",
+  "situation",
+  "sixfold",
+  "sixteen",
+  "sixth",
+  "sixties",
+  "sixtieth",
+  "sixtyfold",
+  "sizable",
+  "sizably",
+  "size",
+  "sizing",
+  "sizzle",
+  "sizzling",
+  "skater",
+  "skating",
+  "skedaddle",
+  "skeletal",
+  "skeleton",
+  "skeptic",
+  "sketch",
+  "skewed",
+  "skewer",
+  "skid",
+  "skied",
+  "skier",
+  "skies",
+  "skiing",
+  "skilled",
+  "skillet",
+  "skillful",
+  "skimmed",
+  "skimmer",
+  "skimming",
+  "skimpily",
+  "skincare",
+  "skinhead",
+  "skinless",
+  "skinning",
+  "skinny",
+  "skintight",
+  "skipper",
+  "skipping",
+  "skirmish",
+  "skirt",
+  "skittle",
+  "skydiver",
+  "skylight",
+  "skyline",
+  "skype",
+  "skyrocket",
+  "skyward",
+  "slab",
+  "slacked",
+  "slacker",
+  "slacking",
+  "slackness",
+  "slacks",
+  "slain",
+  "slam",
+  "slander",
+  "slang",
+  "slapping",
+  "slapstick",
+  "slashed",
+  "slashing",
+  "slate",
+  "slather",
+  "slaw",
+  "sled",
+  "sleek",
+  "sleep",
+  "sleet",
+  "sleeve",
+  "slept",
+  "sliceable",
+  "sliced",
+  "slicer",
+  "slicing",
+  "slick",
+  "slider",
+  "slideshow",
+  "sliding",
+  "slighted",
+  "slighting",
+  "slightly",
+  "slimness",
+  "slimy",
+  "slinging",
+  "slingshot",
+  "slinky",
+  "slip",
+  "slit",
+  "sliver",
+  "slobbery",
+  "slogan",
+  "sloped",
+  "sloping",
+  "sloppily",
+  "sloppy",
+  "slot",
+  "slouching",
+  "slouchy",
+  "sludge",
+  "slug",
+  "slum",
+  "slurp",
+  "slush",
+  "sly",
+  "small",
+  "smartly",
+  "smartness",
+  "smasher",
+  "smashing",
+  "smashup",
+  "smell",
+  "smelting",
+  "smile",
+  "smilingly",
+  "smirk",
+  "smite",
+  "smith",
+  "smitten",
+  "smock",
+  "smog",
+  "smoked",
+  "smokeless",
+  "smokiness",
+  "smoking",
+  "smoky",
+  "smolder",
+  "smooth",
+  "smother",
+  "smudge",
+  "smudgy",
+  "smuggler",
+  "smuggling",
+  "smugly",
+  "smugness",
+  "snack",
+  "snagged",
+  "snaking",
+  "snap",
+  "snare",
+  "snarl",
+  "snazzy",
+  "sneak",
+  "sneer",
+  "sneeze",
+  "sneezing",
+  "snide",
+  "sniff",
+  "snippet",
+  "snipping",
+  "snitch",
+  "snooper",
+  "snooze",
+  "snore",
+  "snoring",
+  "snorkel",
+  "snort",
+  "snout",
+  "snowbird",
+  "snowboard",
+  "snowbound",
+  "snowcap",
+  "snowdrift",
+  "snowdrop",
+  "snowfall",
+  "snowfield",
+  "snowflake",
+  "snowiness",
+  "snowless",
+  "snowman",
+  "snowplow",
+  "snowshoe",
+  "snowstorm",
+  "snowsuit",
+  "snowy",
+  "snub",
+  "snuff",
+  "snuggle",
+  "snugly",
+  "snugness",
+  "speak",
+  "spearfish",
+  "spearhead",
+  "spearman",
+  "spearmint",
+  "species",
+  "specimen",
+  "specked",
+  "speckled",
+  "specks",
+  "spectacle",
+  "spectator",
+  "spectrum",
+  "speculate",
+  "speech",
+  "speed",
+  "spellbind",
+  "speller",
+  "spelling",
+  "spendable",
+  "spender",
+  "spending",
+  "spent",
+  "spew",
+  "sphere",
+  "spherical",
+  "sphinx",
+  "spider",
+  "spied",
+  "spiffy",
+  "spill",
+  "spilt",
+  "spinach",
+  "spinal",
+  "spindle",
+  "spinner",
+  "spinning",
+  "spinout",
+  "spinster",
+  "spiny",
+  "spiral",
+  "spirited",
+  "spiritism",
+  "spirits",
+  "spiritual",
+  "splashed",
+  "splashing",
+  "splashy",
+  "splatter",
+  "spleen",
+  "splendid",
+  "splendor",
+  "splice",
+  "splicing",
+  "splinter",
+  "splotchy",
+  "splurge",
+  "spoilage",
+  "spoiled",
+  "spoiler",
+  "spoiling",
+  "spoils",
+  "spoken",
+  "spokesman",
+  "sponge",
+  "spongy",
+  "sponsor",
+  "spoof",
+  "spookily",
+  "spooky",
+  "spool",
+  "spoon",
+  "spore",
+  "sporting",
+  "sports",
+  "sporty",
+  "spotless",
+  "spotlight",
+  "spotted",
+  "spotter",
+  "spotting",
+  "spotty",
+  "spousal",
+  "spouse",
+  "spout",
+  "sprain",
+  "sprang",
+  "sprawl",
+  "spray",
+  "spree",
+  "sprig",
+  "spring",
+  "sprinkled",
+  "sprinkler",
+  "sprint",
+  "sprite",
+  "sprout",
+  "spruce",
+  "sprung",
+  "spry",
+  "spud",
+  "spur",
+  "sputter",
+  "spyglass",
+  "squabble",
+  "squad",
+  "squall",
+  "squander",
+  "squash",
+  "squatted",
+  "squatter",
+  "squatting",
+  "squeak",
+  "squealer",
+  "squealing",
+  "squeamish",
+  "squeegee",
+  "squeeze",
+  "squeezing",
+  "squid",
+  "squiggle",
+  "squiggly",
+  "squint",
+  "squire",
+  "squirt",
+  "squishier",
+  "squishy",
+  "stability",
+  "stabilize",
+  "stable",
+  "stack",
+  "stadium",
+  "staff",
+  "stage",
+  "staging",
+  "stagnant",
+  "stagnate",
+  "stainable",
+  "stained",
+  "staining",
+  "stainless",
+  "stalemate",
+  "staleness",
+  "stalling",
+  "stallion",
+  "stamina",
+  "stammer",
+  "stamp",
+  "stand",
+  "stank",
+  "staple",
+  "stapling",
+  "starboard",
+  "starch",
+  "stardom",
+  "stardust",
+  "starfish",
+  "stargazer",
+  "staring",
+  "stark",
+  "starless",
+  "starlet",
+  "starlight",
+  "starlit",
+  "starring",
+  "starry",
+  "starship",
+  "starter",
+  "starting",
+  "startle",
+  "startling",
+  "startup",
+  "starved",
+  "starving",
+  "stash",
+  "state",
+  "static",
+  "statistic",
+  "statue",
+  "stature",
+  "status",
+  "statute",
+  "statutory",
+  "staunch",
+  "stays",
+  "steadfast",
+  "steadier",
+  "steadily",
+  "steadying",
+  "steam",
+  "steed",
+  "steep",
+  "steerable",
+  "steering",
+  "steersman",
+  "stegosaur",
+  "stellar",
+  "stem",
+  "stench",
+  "stencil",
+  "step",
+  "stereo",
+  "sterile",
+  "sterility",
+  "sterilize",
+  "sterling",
+  "sternness",
+  "sternum",
+  "stew",
+  "stick",
+  "stiffen",
+  "stiffly",
+  "stiffness",
+  "stifle",
+  "stifling",
+  "stillness",
+  "stilt",
+  "stimulant",
+  "stimulate",
+  "stimuli",
+  "stimulus",
+  "stinger",
+  "stingily",
+  "stinging",
+  "stingray",
+  "stingy",
+  "stinking",
+  "stinky",
+  "stipend",
+  "stipulate",
+  "stir",
+  "stitch",
+  "stock",
+  "stoic",
+  "stoke",
+  "stole",
+  "stomp",
+  "stonewall",
+  "stoneware",
+  "stonework",
+  "stoning",
+  "stony",
+  "stood",
+  "stooge",
+  "stool",
+  "stoop",
+  "stoplight",
+  "stoppable",
+  "stoppage",
+  "stopped",
+  "stopper",
+  "stopping",
+  "stopwatch",
+  "storable",
+  "storage",
+  "storeroom",
+  "storewide",
+  "storm",
+  "stout",
+  "stove",
+  "stowaway",
+  "stowing",
+  "straddle",
+  "straggler",
+  "strained",
+  "strainer",
+  "straining",
+  "strangely",
+  "stranger",
+  "strangle",
+  "strategic",
+  "strategy",
+  "stratus",
+  "straw",
+  "stray",
+  "streak",
+  "stream",
+  "street",
+  "strength",
+  "strenuous",
+  "strep",
+  "stress",
+  "stretch",
+  "strewn",
+  "stricken",
+  "strict",
+  "stride",
+  "strife",
+  "strike",
+  "striking",
+  "strive",
+  "striving",
+  "strobe",
+  "strode",
+  "stroller",
+  "strongbox",
+  "strongly",
+  "strongman",
+  "struck",
+  "structure",
+  "strudel",
+  "struggle",
+  "strum",
+  "strung",
+  "strut",
+  "stubbed",
+  "stubble",
+  "stubbly",
+  "stubborn",
+  "stucco",
+  "stuck",
+  "student",
+  "studied",
+  "studio",
+  "study",
+  "stuffed",
+  "stuffing",
+  "stuffy",
+  "stumble",
+  "stumbling",
+  "stump",
+  "stung",
+  "stunned",
+  "stunner",
+  "stunning",
+  "stunt",
+  "stupor",
+  "sturdily",
+  "sturdy",
+  "styling",
+  "stylishly",
+  "stylist",
+  "stylized",
+  "stylus",
+  "suave",
+  "subarctic",
+  "subatomic",
+  "subdivide",
+  "subdued",
+  "subduing",
+  "subfloor",
+  "subgroup",
+  "subheader",
+  "subject",
+  "sublease",
+  "sublet",
+  "sublevel",
+  "sublime",
+  "submarine",
+  "submerge",
+  "submersed",
+  "submitter",
+  "subpanel",
+  "subpar",
+  "subplot",
+  "subprime",
+  "subscribe",
+  "subscript",
+  "subsector",
+  "subside",
+  "subsiding",
+  "subsidize",
+  "subsidy",
+  "subsoil",
+  "subsonic",
+  "substance",
+  "subsystem",
+  "subtext",
+  "subtitle",
+  "subtly",
+  "subtotal",
+  "subtract",
+  "subtype",
+  "suburb",
+  "subway",
+  "subwoofer",
+  "subzero",
+  "succulent",
+  "such",
+  "suction",
+  "sudden",
+  "sudoku",
+  "suds",
+  "sufferer",
+  "suffering",
+  "suffice",
+  "suffix",
+  "suffocate",
+  "suffrage",
+  "sugar",
+  "suggest",
+  "suing",
+  "suitable",
+  "suitably",
+  "suitcase",
+  "suitor",
+  "sulfate",
+  "sulfide",
+  "sulfite",
+  "sulfur",
+  "sulk",
+  "sullen",
+  "sulphate",
+  "sulphuric",
+  "sultry",
+  "superbowl",
+  "superglue",
+  "superhero",
+  "superior",
+  "superjet",
+  "superman",
+  "supermom",
+  "supernova",
+  "supervise",
+  "supper",
+  "supplier",
+  "supply",
+  "support",
+  "supremacy",
+  "supreme",
+  "surcharge",
+  "surely",
+  "sureness",
+  "surface",
+  "surfacing",
+  "surfboard",
+  "surfer",
+  "surgery",
+  "surgical",
+  "surging",
+  "surname",
+  "surpass",
+  "surplus",
+  "surprise",
+  "surreal",
+  "surrender",
+  "surrogate",
+  "surround",
+  "survey",
+  "survival",
+  "survive",
+  "surviving",
+  "survivor",
+  "sushi",
+  "suspect",
+  "suspend",
+  "suspense",
+  "sustained",
+  "sustainer",
+  "swab",
+  "swaddling",
+  "swagger",
+  "swampland",
+  "swan",
+  "swapping",
+  "swarm",
+  "sway",
+  "swear",
+  "sweat",
+  "sweep",
+  "swell",
+  "swept",
+  "swerve",
+  "swifter",
+  "swiftly",
+  "swiftness",
+  "swimmable",
+  "swimmer",
+  "swimming",
+  "swimsuit",
+  "swimwear",
+  "swinger",
+  "swinging",
+  "swipe",
+  "swirl",
+  "switch",
+  "swivel",
+  "swizzle",
+  "swooned",
+  "swoop",
+  "swoosh",
+  "swore",
+  "sworn",
+  "swung",
+  "sycamore",
+  "sympathy",
+  "symphonic",
+  "symphony",
+  "symptom",
+  "synapse",
+  "syndrome",
+  "synergy",
+  "synopses",
+  "synopsis",
+  "synthesis",
+  "synthetic",
+  "syrup",
+  "system",
+  "t-shirt",
+  "tabasco",
+  "tabby",
+  "tableful",
+  "tables",
+  "tablet",
+  "tableware",
+  "tabloid",
+  "tackiness",
+  "tacking",
+  "tackle",
+  "tackling",
+  "tacky",
+  "taco",
+  "tactful",
+  "tactical",
+  "tactics",
+  "tactile",
+  "tactless",
+  "tadpole",
+  "taekwondo",
+  "tag",
+  "tainted",
+  "take",
+  "taking",
+  "talcum",
+  "talisman",
+  "tall",
+  "talon",
+  "tamale",
+  "tameness",
+  "tamer",
+  "tamper",
+  "tank",
+  "tanned",
+  "tannery",
+  "tanning",
+  "tantrum",
+  "tapeless",
+  "tapered",
+  "tapering",
+  "tapestry",
+  "tapioca",
+  "tapping",
+  "taps",
+  "tarantula",
+  "target",
+  "tarmac",
+  "tarnish",
+  "tarot",
+  "tartar",
+  "tartly",
+  "tartness",
+  "task",
+  "tassel",
+  "taste",
+  "tastiness",
+  "tasting",
+  "tasty",
+  "tattered",
+  "tattle",
+  "tattling",
+  "tattoo",
+  "taunt",
+  "tavern",
+  "thank",
+  "that",
+  "thaw",
+  "theater",
+  "theatrics",
+  "thee",
+  "theft",
+  "theme",
+  "theology",
+  "theorize",
+  "thermal",
+  "thermos",
+  "thesaurus",
+  "these",
+  "thesis",
+  "thespian",
+  "thicken",
+  "thicket",
+  "thickness",
+  "thieving",
+  "thievish",
+  "thigh",
+  "thimble",
+  "thing",
+  "think",
+  "thinly",
+  "thinner",
+  "thinness",
+  "thinning",
+  "thirstily",
+  "thirsting",
+  "thirsty",
+  "thirteen",
+  "thirty",
+  "thong",
+  "thorn",
+  "those",
+  "thousand",
+  "thrash",
+  "thread",
+  "threaten",
+  "threefold",
+  "thrift",
+  "thrill",
+  "thrive",
+  "thriving",
+  "throat",
+  "throbbing",
+  "throng",
+  "throttle",
+  "throwaway",
+  "throwback",
+  "thrower",
+  "throwing",
+  "thud",
+  "thumb",
+  "thumping",
+  "thursday",
+  "thus",
+  "thwarting",
+  "thyself",
+  "tiara",
+  "tibia",
+  "tidal",
+  "tidbit",
+  "tidiness",
+  "tidings",
+  "tidy",
+  "tiger",
+  "tighten",
+  "tightly",
+  "tightness",
+  "tightrope",
+  "tightwad",
+  "tigress",
+  "tile",
+  "tiling",
+  "till",
+  "tilt",
+  "timid",
+  "timing",
+  "timothy",
+  "tinderbox",
+  "tinfoil",
+  "tingle",
+  "tingling",
+  "tingly",
+  "tinker",
+  "tinkling",
+  "tinsel",
+  "tinsmith",
+  "tint",
+  "tinwork",
+  "tiny",
+  "tipoff",
+  "tipped",
+  "tipper",
+  "tipping",
+  "tiptoeing",
+  "tiptop",
+  "tiring",
+  "tissue",
+  "trace",
+  "tracing",
+  "track",
+  "traction",
+  "tractor",
+  "trade",
+  "trading",
+  "tradition",
+  "traffic",
+  "tragedy",
+  "trailing",
+  "trailside",
+  "train",
+  "traitor",
+  "trance",
+  "tranquil",
+  "transfer",
+  "transform",
+  "translate",
+  "transpire",
+  "transport",
+  "transpose",
+  "trapdoor",
+  "trapeze",
+  "trapezoid",
+  "trapped",
+  "trapper",
+  "trapping",
+  "traps",
+  "trash",
+  "travel",
+  "traverse",
+  "travesty",
+  "tray",
+  "treachery",
+  "treading",
+  "treadmill",
+  "treason",
+  "treat",
+  "treble",
+  "tree",
+  "trekker",
+  "tremble",
+  "trembling",
+  "tremor",
+  "trench",
+  "trend",
+  "trespass",
+  "triage",
+  "trial",
+  "triangle",
+  "tribesman",
+  "tribunal",
+  "tribune",
+  "tributary",
+  "tribute",
+  "triceps",
+  "trickery",
+  "trickily",
+  "tricking",
+  "trickle",
+  "trickster",
+  "tricky",
+  "tricolor",
+  "tricycle",
+  "trident",
+  "tried",
+  "trifle",
+  "trifocals",
+  "trillion",
+  "trilogy",
+  "trimester",
+  "trimmer",
+  "trimming",
+  "trimness",
+  "trinity",
+  "trio",
+  "tripod",
+  "tripping",
+  "triumph",
+  "trivial",
+  "trodden",
+  "trolling",
+  "trombone",
+  "trophy",
+  "tropical",
+  "tropics",
+  "trouble",
+  "troubling",
+  "trough",
+  "trousers",
+  "trout",
+  "trowel",
+  "truce",
+  "truck",
+  "truffle",
+  "trump",
+  "trunks",
+  "trustable",
+  "trustee",
+  "trustful",
+  "trusting",
+  "trustless",
+  "truth",
+  "try",
+  "tubby",
+  "tubeless",
+  "tubular",
+  "tucking",
+  "tuesday",
+  "tug",
+  "tuition",
+  "tulip",
+  "tumble",
+  "tumbling",
+  "tummy",
+  "turban",
+  "turbine",
+  "turbofan",
+  "turbojet",
+  "turbulent",
+  "turf",
+  "turkey",
+  "turmoil",
+  "turret",
+  "turtle",
+  "tusk",
+  "tutor",
+  "tutu",
+  "tux",
+  "tweak",
+  "tweed",
+  "tweet",
+  "tweezers",
+  "twelve",
+  "twentieth",
+  "twenty",
+  "twerp",
+  "twice",
+  "twiddle",
+  "twiddling",
+  "twig",
+  "twilight",
+  "twine",
+  "twins",
+  "twirl",
+  "twistable",
+  "twisted",
+  "twister",
+  "twisting",
+  "twisty",
+  "twitch",
+  "twitter",
+  "tycoon",
+  "tying",
+  "tyke",
+  "udder",
+  "ultimate",
+  "ultimatum",
+  "ultra",
+  "umbilical",
+  "umbrella",
+  "umpire",
+  "unabashed",
+  "unable",
+  "unadorned",
+  "unadvised",
+  "unafraid",
+  "unaired",
+  "unaligned",
+  "unaltered",
+  "unarmored",
+  "unashamed",
+  "unaudited",
+  "unawake",
+  "unaware",
+  "unbaked",
+  "unbalance",
+  "unbeaten",
+  "unbend",
+  "unbent",
+  "unbiased",
+  "unbitten",
+  "unblended",
+  "unblessed",
+  "unblock",
+  "unbolted",
+  "unbounded",
+  "unboxed",
+  "unbraided",
+  "unbridle",
+  "unbroken",
+  "unbuckled",
+  "unbundle",
+  "unburned",
+  "unbutton",
+  "uncanny",
+  "uncapped",
+  "uncaring",
+  "uncertain",
+  "unchain",
+  "unchanged",
+  "uncharted",
+  "uncheck",
+  "uncivil",
+  "unclad",
+  "unclaimed",
+  "unclamped",
+  "unclasp",
+  "uncle",
+  "unclip",
+  "uncloak",
+  "unclog",
+  "unclothed",
+  "uncoated",
+  "uncoiled",
+  "uncolored",
+  "uncombed",
+  "uncommon",
+  "uncooked",
+  "uncork",
+  "uncorrupt",
+  "uncounted",
+  "uncouple",
+  "uncouth",
+  "uncover",
+  "uncross",
+  "uncrown",
+  "uncrushed",
+  "uncured",
+  "uncurious",
+  "uncurled",
+  "uncut",
+  "undamaged",
+  "undated",
+  "undaunted",
+  "undead",
+  "undecided",
+  "undefined",
+  "underage",
+  "underarm",
+  "undercoat",
+  "undercook",
+  "undercut",
+  "underdog",
+  "underdone",
+  "underfed",
+  "underfeed",
+  "underfoot",
+  "undergo",
+  "undergrad",
+  "underhand",
+  "underline",
+  "underling",
+  "undermine",
+  "undermost",
+  "underpaid",
+  "underpass",
+  "underpay",
+  "underrate",
+  "undertake",
+  "undertone",
+  "undertook",
+  "undertow",
+  "underuse",
+  "underwear",
+  "underwent",
+  "underwire",
+  "undesired",
+  "undiluted",
+  "undivided",
+  "undocked",
+  "undoing",
+  "undone",
+  "undrafted",
+  "undress",
+  "undrilled",
+  "undusted",
+  "undying",
+  "unearned",
+  "unearth",
+  "unease",
+  "uneasily",
+  "uneasy",
+  "uneatable",
+  "uneaten",
+  "unedited",
+  "unelected",
+  "unending",
+  "unengaged",
+  "unenvied",
+  "unequal",
+  "unethical",
+  "uneven",
+  "unexpired",
+  "unexposed",
+  "unfailing",
+  "unfair",
+  "unfasten",
+  "unfazed",
+  "unfeeling",
+  "unfiled",
+  "unfilled",
+  "unfitted",
+  "unfitting",
+  "unfixable",
+  "unfixed",
+  "unflawed",
+  "unfocused",
+  "unfold",
+  "unfounded",
+  "unframed",
+  "unfreeze",
+  "unfrosted",
+  "unfrozen",
+  "unfunded",
+  "unglazed",
+  "ungloved",
+  "unglue",
+  "ungodly",
+  "ungraded",
+  "ungreased",
+  "unguarded",
+  "unguided",
+  "unhappily",
+  "unhappy",
+  "unharmed",
+  "unhealthy",
+  "unheard",
+  "unhearing",
+  "unheated",
+  "unhelpful",
+  "unhidden",
+  "unhinge",
+  "unhitched",
+  "unholy",
+  "unhook",
+  "unicorn",
+  "unicycle",
+  "unified",
+  "unifier",
+  "uniformed",
+  "uniformly",
+  "unify",
+  "unimpeded",
+  "uninjured",
+  "uninstall",
+  "uninsured",
+  "uninvited",
+  "union",
+  "uniquely",
+  "unisexual",
+  "unison",
+  "unissued",
+  "unit",
+  "universal",
+  "universe",
+  "unjustly",
+  "unkempt",
+  "unkind",
+  "unknotted",
+  "unknowing",
+  "unknown",
+  "unlaced",
+  "unlatch",
+  "unlawful",
+  "unleaded",
+  "unlearned",
+  "unleash",
+  "unless",
+  "unleveled",
+  "unlighted",
+  "unlikable",
+  "unlimited",
+  "unlined",
+  "unlinked",
+  "unlisted",
+  "unlit",
+  "unlivable",
+  "unloaded",
+  "unloader",
+  "unlocked",
+  "unlocking",
+  "unlovable",
+  "unloved",
+  "unlovely",
+  "unloving",
+  "unluckily",
+  "unlucky",
+  "unmade",
+  "unmanaged",
+  "unmanned",
+  "unmapped",
+  "unmarked",
+  "unmasked",
+  "unmasking",
+  "unmatched",
+  "unmindful",
+  "unmixable",
+  "unmixed",
+  "unmolded",
+  "unmoral",
+  "unmovable",
+  "unmoved",
+  "unmoving",
+  "unnamable",
+  "unnamed",
+  "unnatural",
+  "unneeded",
+  "unnerve",
+  "unnerving",
+  "unnoticed",
+  "unopened",
+  "unopposed",
+  "unpack",
+  "unpadded",
+  "unpaid",
+  "unpainted",
+  "unpaired",
+  "unpaved",
+  "unpeeled",
+  "unpicked",
+  "unpiloted",
+  "unpinned",
+  "unplanned",
+  "unplanted",
+  "unpleased",
+  "unpledged",
+  "unplowed",
+  "unplug",
+  "unpopular",
+  "unproven",
+  "unquote",
+  "unranked",
+  "unrated",
+  "unraveled",
+  "unreached",
+  "unread",
+  "unreal",
+  "unreeling",
+  "unrefined",
+  "unrelated",
+  "unrented",
+  "unrest",
+  "unretired",
+  "unrevised",
+  "unrigged",
+  "unripe",
+  "unrivaled",
+  "unroasted",
+  "unrobed",
+  "unroll",
+  "unruffled",
+  "unruly",
+  "unrushed",
+  "unsaddle",
+  "unsafe",
+  "unsaid",
+  "unsalted",
+  "unsaved",
+  "unsavory",
+  "unscathed",
+  "unscented",
+  "unscrew",
+  "unsealed",
+  "unseated",
+  "unsecured",
+  "unseeing",
+  "unseemly",
+  "unseen",
+  "unselect",
+  "unselfish",
+  "unsent",
+  "unsettled",
+  "unshackle",
+  "unshaken",
+  "unshaved",
+  "unshaven",
+  "unsheathe",
+  "unshipped",
+  "unsightly",
+  "unsigned",
+  "unskilled",
+  "unsliced",
+  "unsmooth",
+  "unsnap",
+  "unsocial",
+  "unsoiled",
+  "unsold",
+  "unsolved",
+  "unsorted",
+  "unspoiled",
+  "unspoken",
+  "unstable",
+  "unstaffed",
+  "unstamped",
+  "unsteady",
+  "unsterile",
+  "unstirred",
+  "unstitch",
+  "unstopped",
+  "unstuck",
+  "unstuffed",
+  "unstylish",
+  "unsubtle",
+  "unsubtly",
+  "unsuited",
+  "unsure",
+  "unsworn",
+  "untagged",
+  "untainted",
+  "untaken",
+  "untamed",
+  "untangled",
+  "untapped",
+  "untaxed",
+  "unthawed",
+  "unthread",
+  "untidy",
+  "untie",
+  "until",
+  "untimed",
+  "untimely",
+  "untitled",
+  "untoasted",
+  "untold",
+  "untouched",
+  "untracked",
+  "untrained",
+  "untreated",
+  "untried",
+  "untrimmed",
+  "untrue",
+  "untruth",
+  "unturned",
+  "untwist",
+  "untying",
+  "unusable",
+  "unused",
+  "unusual",
+  "unvalued",
+  "unvaried",
+  "unvarying",
+  "unveiled",
+  "unveiling",
+  "unvented",
+  "unviable",
+  "unvisited",
+  "unvocal",
+  "unwanted",
+  "unwarlike",
+  "unwary",
+  "unwashed",
+  "unwatched",
+  "unweave",
+  "unwed",
+  "unwelcome",
+  "unwell",
+  "unwieldy",
+  "unwilling",
+  "unwind",
+  "unwired",
+  "unwitting",
+  "unwomanly",
+  "unworldly",
+  "unworn",
+  "unworried",
+  "unworthy",
+  "unwound",
+  "unwoven",
+  "unwrapped",
+  "unwritten",
+  "unzip",
+  "upbeat",
+  "upchuck",
+  "upcoming",
+  "upcountry",
+  "update",
+  "upfront",
+  "upgrade",
+  "upheaval",
+  "upheld",
+  "uphill",
+  "uphold",
+  "uplifted",
+  "uplifting",
+  "upload",
+  "upon",
+  "upper",
+  "upright",
+  "uprising",
+  "upriver",
+  "uproar",
+  "uproot",
+  "upscale",
+  "upside",
+  "upstage",
+  "upstairs",
+  "upstart",
+  "upstate",
+  "upstream",
+  "upstroke",
+  "upswing",
+  "uptake",
+  "uptight",
+  "uptown",
+  "upturned",
+  "upward",
+  "upwind",
+  "uranium",
+  "urban",
+  "urchin",
+  "urethane",
+  "urgency",
+  "urgent",
+  "urging",
+  "urologist",
+  "urology",
+  "usable",
+  "usage",
+  "useable",
+  "used",
+  "uselessly",
+  "user",
+  "usher",
+  "usual",
+  "utensil",
+  "utility",
+  "utilize",
+  "utmost",
+  "utopia",
+  "utter",
+  "vacancy",
+  "vacant",
+  "vacate",
+  "vacation",
+  "vagabond",
+  "vagrancy",
+  "vagrantly",
+  "vaguely",
+  "vagueness",
+  "valiant",
+  "valid",
+  "valium",
+  "valley",
+  "valuables",
+  "value",
+  "vanilla",
+  "vanish",
+  "vanity",
+  "vanquish",
+  "vantage",
+  "vaporizer",
+  "variable",
+  "variably",
+  "varied",
+  "variety",
+  "various",
+  "varmint",
+  "varnish",
+  "varsity",
+  "varying",
+  "vascular",
+  "vaseline",
+  "vastly",
+  "vastness",
+  "veal",
+  "vegan",
+  "veggie",
+  "vehicular",
+  "velcro",
+  "velocity",
+  "velvet",
+  "vendetta",
+  "vending",
+  "vendor",
+  "veneering",
+  "vengeful",
+  "venomous",
+  "ventricle",
+  "venture",
+  "venue",
+  "venus",
+  "verbalize",
+  "verbally",
+  "verbose",
+  "verdict",
+  "verify",
+  "verse",
+  "version",
+  "versus",
+  "vertebrae",
+  "vertical",
+  "vertigo",
+  "very",
+  "vessel",
+  "vest",
+  "veteran",
+  "veto",
+  "vexingly",
+  "viability",
+  "viable",
+  "vibes",
+  "vice",
+  "vicinity",
+  "victory",
+  "video",
+  "viewable",
+  "viewer",
+  "viewing",
+  "viewless",
+  "viewpoint",
+  "vigorous",
+  "village",
+  "villain",
+  "vindicate",
+  "vineyard",
+  "vintage",
+  "violate",
+  "violation",
+  "violator",
+  "violet",
+  "violin",
+  "viper",
+  "viral",
+  "virtual",
+  "virtuous",
+  "virus",
+  "visa",
+  "viscosity",
+  "viscous",
+  "viselike",
+  "visible",
+  "visibly",
+  "vision",
+  "visiting",
+  "visitor",
+  "visor",
+  "vista",
+  "vitality",
+  "vitalize",
+  "vitally",
+  "vitamins",
+  "vivacious",
+  "vividly",
+  "vividness",
+  "vixen",
+  "vocalist",
+  "vocalize",
+  "vocally",
+  "vocation",
+  "voice",
+  "voicing",
+  "void",
+  "volatile",
+  "volley",
+  "voltage",
+  "volumes",
+  "voter",
+  "voting",
+  "voucher",
+  "vowed",
+  "vowel",
+  "voyage",
+  "wackiness",
+  "wad",
+  "wafer",
+  "waffle",
+  "waged",
+  "wager",
+  "wages",
+  "waggle",
+  "wagon",
+  "wake",
+  "waking",
+  "walk",
+  "walmart",
+  "walnut",
+  "walrus",
+  "waltz",
+  "wand",
+  "wannabe",
+  "wanted",
+  "wanting",
+  "wasabi",
+  "washable",
+  "washbasin",
+  "washboard",
+  "washbowl",
+  "washcloth",
+  "washday",
+  "washed",
+  "washer",
+  "washhouse",
+  "washing",
+  "washout",
+  "washroom",
+  "washstand",
+  "washtub",
+  "wasp",
+  "wasting",
+  "watch",
+  "water",
+  "waviness",
+  "waving",
+  "wavy",
+  "whacking",
+  "whacky",
+  "wham",
+  "wharf",
+  "wheat",
+  "whenever",
+  "whiff",
+  "whimsical",
+  "whinny",
+  "whiny",
+  "whisking",
+  "whoever",
+  "whole",
+  "whomever",
+  "whoopee",
+  "whooping",
+  "whoops",
+  "why",
+  "wick",
+  "widely",
+  "widen",
+  "widget",
+  "widow",
+  "width",
+  "wieldable",
+  "wielder",
+  "wife",
+  "wifi",
+  "wikipedia",
+  "wildcard",
+  "wildcat",
+  "wilder",
+  "wildfire",
+  "wildfowl",
+  "wildland",
+  "wildlife",
+  "wildly",
+  "wildness",
+  "willed",
+  "willfully",
+  "willing",
+  "willow",
+  "willpower",
+  "wilt",
+  "wimp",
+  "wince",
+  "wincing",
+  "wind",
+  "wing",
+  "winking",
+  "winner",
+  "winnings",
+  "winter",
+  "wipe",
+  "wired",
+  "wireless",
+  "wiring",
+  "wiry",
+  "wisdom",
+  "wise",
+  "wish",
+  "wisplike",
+  "wispy",
+  "wistful",
+  "wizard",
+  "wobble",
+  "wobbling",
+  "wobbly",
+  "wok",
+  "wolf",
+  "wolverine",
+  "womanhood",
+  "womankind",
+  "womanless",
+  "womanlike",
+  "womanly",
+  "womb",
+  "woof",
+  "wooing",
+  "wool",
+  "woozy",
+  "word",
+  "work",
+  "worried",
+  "worrier",
+  "worrisome",
+  "worry",
+  "worsening",
+  "worshiper",
+  "worst",
+  "wound",
+  "woven",
+  "wow",
+  "wrangle",
+  "wrath",
+  "wreath",
+  "wreckage",
+  "wrecker",
+  "wrecking",
+  "wrench",
+  "wriggle",
+  "wriggly",
+  "wrinkle",
+  "wrinkly",
+  "wrist",
+  "writing",
+  "written",
+  "wrongdoer",
+  "wronged",
+  "wrongful",
+  "wrongly",
+  "wrongness",
+  "wrought",
+  "xbox",
+  "xerox",
+  "yahoo",
+  "yam",
+  "yanking",
+  "yapping",
+  "yard",
+  "yarn",
+  "yeah",
+  "yearbook",
+  "yearling",
+  "yearly",
+  "yearning",
+  "yeast",
+  "yelling",
+  "yelp",
+  "yen",
+  "yesterday",
+  "yiddish",
+  "yield",
+  "yin",
+  "yippee",
+  "yo-yo",
+  "yodel",
+  "yoga",
+  "yogurt",
+  "yonder",
+  "yoyo",
+  "yummy",
+  "zap",
+  "zealous",
+  "zebra",
+  "zen",
+  "zeppelin",
+  "zero",
+  "zestfully",
+  "zesty",
+  "zigzagged",
+  "zipfile",
+  "zipping",
+  "zippy",
+  "zips",
+  "zit",
+  "zodiac",
+  "zombie",
+  "zone",
+  "zoning",
+  "zookeeper",
+  "zoologist",
+  "zoology",
+  "zoom",
 ];
diff --git a/jslib/common/src/models/api/cardApi.ts b/jslib/common/src/models/api/cardApi.ts
index b837bb90..8d972624 100644
--- a/jslib/common/src/models/api/cardApi.ts
+++ b/jslib/common/src/models/api/cardApi.ts
@@ -1,23 +1,23 @@
-import { BaseResponse } from '../response/baseResponse';
+import { BaseResponse } from "../response/baseResponse";
 
 export class CardApi extends BaseResponse {
-    cardholderName: string;
-    brand: string;
-    number: string;
-    expMonth: string;
-    expYear: string;
-    code: string;
+  cardholderName: string;
+  brand: string;
+  number: string;
+  expMonth: string;
+  expYear: string;
+  code: string;
 
-    constructor(data: any = null) {
-        super(data);
-        if (data == null) {
-            return;
-        }
-        this.cardholderName = this.getResponseProperty('CardholderName');
-        this.brand = this.getResponseProperty('Brand');
-        this.number = this.getResponseProperty('Number');
-        this.expMonth = this.getResponseProperty('ExpMonth');
-        this.expYear = this.getResponseProperty('ExpYear');
-        this.code = this.getResponseProperty('Code');
+  constructor(data: any = null) {
+    super(data);
+    if (data == null) {
+      return;
     }
+    this.cardholderName = this.getResponseProperty("CardholderName");
+    this.brand = this.getResponseProperty("Brand");
+    this.number = this.getResponseProperty("Number");
+    this.expMonth = this.getResponseProperty("ExpMonth");
+    this.expYear = this.getResponseProperty("ExpYear");
+    this.code = this.getResponseProperty("Code");
+  }
 }
diff --git a/jslib/common/src/models/api/fieldApi.ts b/jslib/common/src/models/api/fieldApi.ts
index b9e8e0e9..d7e603ea 100644
--- a/jslib/common/src/models/api/fieldApi.ts
+++ b/jslib/common/src/models/api/fieldApi.ts
@@ -1,22 +1,22 @@
-import { BaseResponse } from '../response/baseResponse';
+import { BaseResponse } from "../response/baseResponse";
 
-import { FieldType } from '../../enums/fieldType';
-import { LinkedIdType } from '../../enums/linkedIdType';
+import { FieldType } from "../../enums/fieldType";
+import { LinkedIdType } from "../../enums/linkedIdType";
 
 export class FieldApi extends BaseResponse {
-    name: string;
-    value: string;
-    type: FieldType;
-    linkedId: LinkedIdType;
+  name: string;
+  value: string;
+  type: FieldType;
+  linkedId: LinkedIdType;
 
-    constructor(data: any = null) {
-        super(data);
-        if (data == null) {
-            return;
-        }
-        this.type = this.getResponseProperty('Type');
-        this.name = this.getResponseProperty('Name');
-        this.value = this.getResponseProperty('Value');
-        this.linkedId = this.getResponseProperty('linkedId');
+  constructor(data: any = null) {
+    super(data);
+    if (data == null) {
+      return;
     }
+    this.type = this.getResponseProperty("Type");
+    this.name = this.getResponseProperty("Name");
+    this.value = this.getResponseProperty("Value");
+    this.linkedId = this.getResponseProperty("linkedId");
+  }
 }
diff --git a/jslib/common/src/models/api/identityApi.ts b/jslib/common/src/models/api/identityApi.ts
index e271e5e3..9312438f 100644
--- a/jslib/common/src/models/api/identityApi.ts
+++ b/jslib/common/src/models/api/identityApi.ts
@@ -1,47 +1,47 @@
-import { BaseResponse } from '../response/baseResponse';
+import { BaseResponse } from "../response/baseResponse";
 
 export class IdentityApi extends BaseResponse {
-    title: string;
-    firstName: string;
-    middleName: string;
-    lastName: string;
-    address1: string;
-    address2: string;
-    address3: string;
-    city: string;
-    state: string;
-    postalCode: string;
-    country: string;
-    company: string;
-    email: string;
-    phone: string;
-    ssn: string;
-    username: string;
-    passportNumber: string;
-    licenseNumber: string;
+  title: string;
+  firstName: string;
+  middleName: string;
+  lastName: string;
+  address1: string;
+  address2: string;
+  address3: string;
+  city: string;
+  state: string;
+  postalCode: string;
+  country: string;
+  company: string;
+  email: string;
+  phone: string;
+  ssn: string;
+  username: string;
+  passportNumber: string;
+  licenseNumber: string;
 
-    constructor(data: any = null) {
-        super(data);
-        if (data == null) {
-            return;
-        }
-        this.title = this.getResponseProperty('Title');
-        this.firstName = this.getResponseProperty('FirstName');
-        this.middleName = this.getResponseProperty('MiddleName');
-        this.lastName = this.getResponseProperty('LastName');
-        this.address1 = this.getResponseProperty('Address1');
-        this.address2 = this.getResponseProperty('Address2');
-        this.address3 = this.getResponseProperty('Address3');
-        this.city = this.getResponseProperty('City');
-        this.state = this.getResponseProperty('State');
-        this.postalCode = this.getResponseProperty('PostalCode');
-        this.country = this.getResponseProperty('Country');
-        this.company = this.getResponseProperty('Company');
-        this.email = this.getResponseProperty('Email');
-        this.phone = this.getResponseProperty('Phone');
-        this.ssn = this.getResponseProperty('SSN');
-        this.username = this.getResponseProperty('Username');
-        this.passportNumber = this.getResponseProperty('PassportNumber');
-        this.licenseNumber = this.getResponseProperty('LicenseNumber');
+  constructor(data: any = null) {
+    super(data);
+    if (data == null) {
+      return;
     }
+    this.title = this.getResponseProperty("Title");
+    this.firstName = this.getResponseProperty("FirstName");
+    this.middleName = this.getResponseProperty("MiddleName");
+    this.lastName = this.getResponseProperty("LastName");
+    this.address1 = this.getResponseProperty("Address1");
+    this.address2 = this.getResponseProperty("Address2");
+    this.address3 = this.getResponseProperty("Address3");
+    this.city = this.getResponseProperty("City");
+    this.state = this.getResponseProperty("State");
+    this.postalCode = this.getResponseProperty("PostalCode");
+    this.country = this.getResponseProperty("Country");
+    this.company = this.getResponseProperty("Company");
+    this.email = this.getResponseProperty("Email");
+    this.phone = this.getResponseProperty("Phone");
+    this.ssn = this.getResponseProperty("SSN");
+    this.username = this.getResponseProperty("Username");
+    this.passportNumber = this.getResponseProperty("PassportNumber");
+    this.licenseNumber = this.getResponseProperty("LicenseNumber");
+  }
 }
diff --git a/jslib/common/src/models/api/loginApi.ts b/jslib/common/src/models/api/loginApi.ts
index a02cde38..ddbe37ec 100644
--- a/jslib/common/src/models/api/loginApi.ts
+++ b/jslib/common/src/models/api/loginApi.ts
@@ -1,29 +1,29 @@
-import { BaseResponse } from '../response/baseResponse';
+import { BaseResponse } from "../response/baseResponse";
 
-import { LoginUriApi } from './loginUriApi';
+import { LoginUriApi } from "./loginUriApi";
 
 export class LoginApi extends BaseResponse {
-    uris: LoginUriApi[];
-    username: string;
-    password: string;
-    passwordRevisionDate: string;
-    totp: string;
-    autofillOnPageLoad: boolean;
+  uris: LoginUriApi[];
+  username: string;
+  password: string;
+  passwordRevisionDate: string;
+  totp: string;
+  autofillOnPageLoad: boolean;
 
-    constructor(data: any = null) {
-        super(data);
-        if (data == null) {
-            return;
-        }
-        this.username = this.getResponseProperty('Username');
-        this.password = this.getResponseProperty('Password');
-        this.passwordRevisionDate = this.getResponseProperty('PasswordRevisionDate');
-        this.totp = this.getResponseProperty('Totp');
-        this.autofillOnPageLoad = this.getResponseProperty('AutofillOnPageLoad');
+  constructor(data: any = null) {
+    super(data);
+    if (data == null) {
+      return;
+    }
+    this.username = this.getResponseProperty("Username");
+    this.password = this.getResponseProperty("Password");
+    this.passwordRevisionDate = this.getResponseProperty("PasswordRevisionDate");
+    this.totp = this.getResponseProperty("Totp");
+    this.autofillOnPageLoad = this.getResponseProperty("AutofillOnPageLoad");
 
-        const uris = this.getResponseProperty('Uris');
-        if (uris != null) {
-            this.uris = uris.map((u: any) => new LoginUriApi(u));
-        }
+    const uris = this.getResponseProperty("Uris");
+    if (uris != null) {
+      this.uris = uris.map((u: any) => new LoginUriApi(u));
     }
+  }
 }
diff --git a/jslib/common/src/models/api/loginUriApi.ts b/jslib/common/src/models/api/loginUriApi.ts
index 6ea8d4e2..9da6e0a7 100644
--- a/jslib/common/src/models/api/loginUriApi.ts
+++ b/jslib/common/src/models/api/loginUriApi.ts
@@ -1,18 +1,18 @@
-import { BaseResponse } from '../response/baseResponse';
+import { BaseResponse } from "../response/baseResponse";
 
-import { UriMatchType } from '../../enums/uriMatchType';
+import { UriMatchType } from "../../enums/uriMatchType";
 
 export class LoginUriApi extends BaseResponse {
-    uri: string;
-    match: UriMatchType = null;
+  uri: string;
+  match: UriMatchType = null;
 
-    constructor(data: any = null) {
-        super(data);
-        if (data == null) {
-            return;
-        }
-        this.uri = this.getResponseProperty('Uri');
-        const match = this.getResponseProperty('Match');
-        this.match = match != null ? match : null;
+  constructor(data: any = null) {
+    super(data);
+    if (data == null) {
+      return;
     }
+    this.uri = this.getResponseProperty("Uri");
+    const match = this.getResponseProperty("Match");
+    this.match = match != null ? match : null;
+  }
 }
diff --git a/jslib/common/src/models/api/permissionsApi.ts b/jslib/common/src/models/api/permissionsApi.ts
index 0755074e..bac79bd3 100644
--- a/jslib/common/src/models/api/permissionsApi.ts
+++ b/jslib/common/src/models/api/permissionsApi.ts
@@ -1,55 +1,55 @@
-import { BaseResponse } from '../response/baseResponse';
+import { BaseResponse } from "../response/baseResponse";
 
 export class PermissionsApi extends BaseResponse {
-    accessEventLogs: boolean;
-    accessImportExport: boolean;
-    accessReports: boolean;
-    /**
-     * @deprecated Sep 29 2021: This permission has been split out to `createNewCollections`, `editAnyCollection`, and
-     * `deleteAnyCollection`. It exists here for backwards compatibility with Server versions <= 1.43.0
-     */
-    manageAllCollections: boolean;
-    createNewCollections: boolean;
-    editAnyCollection: boolean;
-    deleteAnyCollection: boolean;
-    /**
-     * @deprecated Sep 29 2021: This permission has been split out to `editAssignedCollections` and
-     * `deleteAssignedCollections`. It exists here for backwards compatibility with Server versions <= 1.43.0
-     */
-    manageAssignedCollections: boolean;
-    editAssignedCollections: boolean;
-    deleteAssignedCollections: boolean;
-    manageCiphers: boolean;
-    manageGroups: boolean;
-    manageSso: boolean;
-    managePolicies: boolean;
-    manageUsers: boolean;
-    manageResetPassword: boolean;
+  accessEventLogs: boolean;
+  accessImportExport: boolean;
+  accessReports: boolean;
+  /**
+   * @deprecated Sep 29 2021: This permission has been split out to `createNewCollections`, `editAnyCollection`, and
+   * `deleteAnyCollection`. It exists here for backwards compatibility with Server versions <= 1.43.0
+   */
+  manageAllCollections: boolean;
+  createNewCollections: boolean;
+  editAnyCollection: boolean;
+  deleteAnyCollection: boolean;
+  /**
+   * @deprecated Sep 29 2021: This permission has been split out to `editAssignedCollections` and
+   * `deleteAssignedCollections`. It exists here for backwards compatibility with Server versions <= 1.43.0
+   */
+  manageAssignedCollections: boolean;
+  editAssignedCollections: boolean;
+  deleteAssignedCollections: boolean;
+  manageCiphers: boolean;
+  manageGroups: boolean;
+  manageSso: boolean;
+  managePolicies: boolean;
+  manageUsers: boolean;
+  manageResetPassword: boolean;
 
-    constructor(data: any = null) {
-        super(data);
-        if (data == null) {
-            return this;
-        }
-        this.accessEventLogs = this.getResponseProperty('AccessEventLogs');
-        this.accessImportExport = this.getResponseProperty('AccessImportExport');
-        this.accessReports = this.getResponseProperty('AccessReports');
+  constructor(data: any = null) {
+    super(data);
+    if (data == null) {
+      return this;
+    }
+    this.accessEventLogs = this.getResponseProperty("AccessEventLogs");
+    this.accessImportExport = this.getResponseProperty("AccessImportExport");
+    this.accessReports = this.getResponseProperty("AccessReports");
 
-        // For backwards compatibility with Server <= 1.43.0
-        this.manageAllCollections = this.getResponseProperty('ManageAllCollections');
-        this.manageAssignedCollections = this.getResponseProperty('ManageAssignedCollections');
+    // For backwards compatibility with Server <= 1.43.0
+    this.manageAllCollections = this.getResponseProperty("ManageAllCollections");
+    this.manageAssignedCollections = this.getResponseProperty("ManageAssignedCollections");
 
-        this.createNewCollections = this.getResponseProperty('CreateNewCollections');
-        this.editAnyCollection = this.getResponseProperty('EditAnyCollection');
-        this.deleteAnyCollection = this.getResponseProperty('DeleteAnyCollection');
-        this.editAssignedCollections = this.getResponseProperty('EditAssignedCollections');
-        this.deleteAssignedCollections = this.getResponseProperty('DeleteAssignedCollections');
+    this.createNewCollections = this.getResponseProperty("CreateNewCollections");
+    this.editAnyCollection = this.getResponseProperty("EditAnyCollection");
+    this.deleteAnyCollection = this.getResponseProperty("DeleteAnyCollection");
+    this.editAssignedCollections = this.getResponseProperty("EditAssignedCollections");
+    this.deleteAssignedCollections = this.getResponseProperty("DeleteAssignedCollections");
 
-        this.manageCiphers = this.getResponseProperty('ManageCiphers');
-        this.manageGroups = this.getResponseProperty('ManageGroups');
-        this.manageSso = this.getResponseProperty('ManageSso');
-        this.managePolicies = this.getResponseProperty('ManagePolicies');
-        this.manageUsers = this.getResponseProperty('ManageUsers');
-        this.manageResetPassword = this.getResponseProperty('ManageResetPassword');
-    }
+    this.manageCiphers = this.getResponseProperty("ManageCiphers");
+    this.manageGroups = this.getResponseProperty("ManageGroups");
+    this.manageSso = this.getResponseProperty("ManageSso");
+    this.managePolicies = this.getResponseProperty("ManagePolicies");
+    this.manageUsers = this.getResponseProperty("ManageUsers");
+    this.manageResetPassword = this.getResponseProperty("ManageResetPassword");
+  }
 }
diff --git a/jslib/common/src/models/api/secureNoteApi.ts b/jslib/common/src/models/api/secureNoteApi.ts
index 2fbdd94b..dfb25134 100644
--- a/jslib/common/src/models/api/secureNoteApi.ts
+++ b/jslib/common/src/models/api/secureNoteApi.ts
@@ -1,15 +1,15 @@
-import { BaseResponse } from '../response/baseResponse';
+import { BaseResponse } from "../response/baseResponse";
 
-import { SecureNoteType } from '../../enums/secureNoteType';
+import { SecureNoteType } from "../../enums/secureNoteType";
 
 export class SecureNoteApi extends BaseResponse {
-    type: SecureNoteType;
+  type: SecureNoteType;
 
-    constructor(data: any = null) {
-        super(data);
-        if (data == null) {
-            return;
-        }
-        this.type = this.getResponseProperty('Type');
+  constructor(data: any = null) {
+    super(data);
+    if (data == null) {
+      return;
     }
+    this.type = this.getResponseProperty("Type");
+  }
 }
diff --git a/jslib/common/src/models/api/sendFileApi.ts b/jslib/common/src/models/api/sendFileApi.ts
index fc4feeee..f4d0926c 100644
--- a/jslib/common/src/models/api/sendFileApi.ts
+++ b/jslib/common/src/models/api/sendFileApi.ts
@@ -1,21 +1,21 @@
-import { BaseResponse } from '../response/baseResponse';
+import { BaseResponse } from "../response/baseResponse";
 
 export class SendFileApi extends BaseResponse {
-    id: string;
-    fileName: string;
-    key: string;
-    size: string;
-    sizeName: string;
+  id: string;
+  fileName: string;
+  key: string;
+  size: string;
+  sizeName: string;
 
-    constructor(data: any = null) {
-        super(data);
-        if (data == null) {
-            return;
-        }
-        this.id = this.getResponseProperty('Id');
-        this.fileName = this.getResponseProperty('FileName');
-        this.key = this.getResponseProperty('Key');
-        this.size = this.getResponseProperty('Size');
-        this.sizeName = this.getResponseProperty('SizeName');
+  constructor(data: any = null) {
+    super(data);
+    if (data == null) {
+      return;
     }
+    this.id = this.getResponseProperty("Id");
+    this.fileName = this.getResponseProperty("FileName");
+    this.key = this.getResponseProperty("Key");
+    this.size = this.getResponseProperty("Size");
+    this.sizeName = this.getResponseProperty("SizeName");
+  }
 }
diff --git a/jslib/common/src/models/api/sendTextApi.ts b/jslib/common/src/models/api/sendTextApi.ts
index 083077c3..56d21450 100644
--- a/jslib/common/src/models/api/sendTextApi.ts
+++ b/jslib/common/src/models/api/sendTextApi.ts
@@ -1,15 +1,15 @@
-import { BaseResponse } from '../response/baseResponse';
+import { BaseResponse } from "../response/baseResponse";
 
 export class SendTextApi extends BaseResponse {
-    text: string;
-    hidden: boolean;
+  text: string;
+  hidden: boolean;
 
-    constructor(data: any = null) {
-        super(data);
-        if (data == null) {
-            return;
-        }
-        this.text = this.getResponseProperty('Text');
-        this.hidden = this.getResponseProperty('Hidden') || false;
+  constructor(data: any = null) {
+    super(data);
+    if (data == null) {
+      return;
     }
+    this.text = this.getResponseProperty("Text");
+    this.hidden = this.getResponseProperty("Hidden") || false;
+  }
 }
diff --git a/jslib/common/src/models/api/ssoConfigApi.ts b/jslib/common/src/models/api/ssoConfigApi.ts
index c846524a..338ab793 100644
--- a/jslib/common/src/models/api/ssoConfigApi.ts
+++ b/jslib/common/src/models/api/ssoConfigApi.ts
@@ -1,118 +1,124 @@
-import { BaseResponse } from '../response/baseResponse';
+import { BaseResponse } from "../response/baseResponse";
 
 enum SsoType {
-    OpenIdConnect = 1,
-    Saml2 = 2,
+  OpenIdConnect = 1,
+  Saml2 = 2,
 }
 
 enum OpenIdConnectRedirectBehavior {
-    RedirectGet = 0,
-    FormPost = 1,
+  RedirectGet = 0,
+  FormPost = 1,
 }
 
 enum Saml2BindingType {
-    HttpRedirect = 1,
-    HttpPost = 2,
-    Artifact = 4,
+  HttpRedirect = 1,
+  HttpPost = 2,
+  Artifact = 4,
 }
 
 enum Saml2NameIdFormat {
-    NotConfigured = 0,
-    Unspecified = 1,
-    EmailAddress = 2,
-    X509SubjectName = 3,
-    WindowsDomainQualifiedName = 4,
-    KerberosPrincipalName = 5,
-    EntityIdentifier = 6,
-    Persistent = 7,
-    Transient = 8,
+  NotConfigured = 0,
+  Unspecified = 1,
+  EmailAddress = 2,
+  X509SubjectName = 3,
+  WindowsDomainQualifiedName = 4,
+  KerberosPrincipalName = 5,
+  EntityIdentifier = 6,
+  Persistent = 7,
+  Transient = 8,
 }
 
 enum Saml2SigningBehavior {
-    IfIdpWantAuthnRequestsSigned = 0,
-    Always = 1,
-    Never = 3,
+  IfIdpWantAuthnRequestsSigned = 0,
+  Always = 1,
+  Never = 3,
 }
 
 export class SsoConfigApi extends BaseResponse {
-    configType: SsoType;
-
-    keyConnectorEnabled: boolean;
-    keyConnectorUrl: string;
-
-    // OpenId
-    authority: string;
-    clientId: string;
-    clientSecret: string;
-    metadataAddress: string;
-    redirectBehavior: OpenIdConnectRedirectBehavior;
-    getClaimsFromUserInfoEndpoint: boolean;
-    additionalScopes: string;
-    additionalUserIdClaimTypes: string;
-    additionalEmailClaimTypes: string;
-    additionalNameClaimTypes: string;
-    acrValues: string;
-    expectedReturnAcrValue: string;
-
-    // SAML
-    spNameIdFormat: Saml2NameIdFormat;
-    spOutboundSigningAlgorithm: string;
-    spSigningBehavior: Saml2SigningBehavior;
-    spMinIncomingSigningAlgorithm: boolean;
-    spWantAssertionsSigned: boolean;
-    spValidateCertificates: boolean;
-
-    idpEntityId: string;
-    idpBindingType: Saml2BindingType;
-    idpSingleSignOnServiceUrl: string;
-    idpSingleLogoutServiceUrl: string;
-    idpArtifactResolutionServiceUrl: string;
-    idpX509PublicCert: string;
-    idpOutboundSigningAlgorithm: string;
-    idpAllowUnsolicitedAuthnResponse: boolean;
-    idpDisableOutboundLogoutRequests: boolean;
-    idpWantAuthnRequestsSigned: boolean;
-
-    constructor(data: any = null) {
-        super(data);
-        if (data == null) {
-            return;
-        }
-
-        this.configType = this.getResponseProperty('ConfigType');
-
-        this.keyConnectorEnabled = this.getResponseProperty('KeyConnectorEnabled');
-        this.keyConnectorUrl = this.getResponseProperty('KeyConnectorUrl');
-
-        this.authority = this.getResponseProperty('Authority');
-        this.clientId = this.getResponseProperty('ClientId');
-        this.clientSecret = this.getResponseProperty('ClientSecret');
-        this.metadataAddress = this.getResponseProperty('MetadataAddress');
-        this.redirectBehavior = this.getResponseProperty('RedirectBehavior');
-        this.getClaimsFromUserInfoEndpoint = this.getResponseProperty('GetClaimsFromUserInfoEndpoint');
-        this.additionalScopes = this.getResponseProperty('AdditionalScopes');
-        this.additionalUserIdClaimTypes = this.getResponseProperty('AdditionalUserIdClaimTypes');
-        this.additionalEmailClaimTypes = this.getResponseProperty('AdditionalEmailClaimTypes');
-        this.additionalNameClaimTypes = this.getResponseProperty('AdditionalNameClaimTypes');
-        this.acrValues = this.getResponseProperty('AcrValues');
-        this.expectedReturnAcrValue = this.getResponseProperty('ExpectedReturnAcrValue');
-
-        this.spNameIdFormat = this.getResponseProperty('SpNameIdFormat');
-        this.spOutboundSigningAlgorithm = this.getResponseProperty('SpOutboundSigningAlgorithm');
-        this.spSigningBehavior = this.getResponseProperty('SpSigningBehavior');
-        this.spMinIncomingSigningAlgorithm = this.getResponseProperty('SpMinIncomingSigningAlgorithm');
-        this.spWantAssertionsSigned = this.getResponseProperty('SpWantAssertionsSigned');
-        this.spValidateCertificates = this.getResponseProperty('SpValidateCertificates');
-
-        this.idpEntityId = this.getResponseProperty('IdpEntityId');
-        this.idpBindingType = this.getResponseProperty('IdpBindingType');
-        this.idpSingleSignOnServiceUrl = this.getResponseProperty('IdpSingleSignOnServiceUrl');
-        this.idpSingleLogoutServiceUrl = this.getResponseProperty('IdpSingleLogoutServiceUrl');
-        this.idpArtifactResolutionServiceUrl = this.getResponseProperty('IdpArtifactResolutionServiceUrl');
-        this.idpX509PublicCert = this.getResponseProperty('IdpX509PublicCert');
-        this.idpOutboundSigningAlgorithm = this.getResponseProperty('IdpOutboundSigningAlgorithm');
-        this.idpAllowUnsolicitedAuthnResponse = this.getResponseProperty('IdpAllowUnsolicitedAuthnResponse');
-        this.idpDisableOutboundLogoutRequests = this.getResponseProperty('IdpDisableOutboundLogoutRequests');
-        this.idpWantAuthnRequestsSigned = this.getResponseProperty('IdpWantAuthnRequestsSigned');
+  configType: SsoType;
+
+  keyConnectorEnabled: boolean;
+  keyConnectorUrl: string;
+
+  // OpenId
+  authority: string;
+  clientId: string;
+  clientSecret: string;
+  metadataAddress: string;
+  redirectBehavior: OpenIdConnectRedirectBehavior;
+  getClaimsFromUserInfoEndpoint: boolean;
+  additionalScopes: string;
+  additionalUserIdClaimTypes: string;
+  additionalEmailClaimTypes: string;
+  additionalNameClaimTypes: string;
+  acrValues: string;
+  expectedReturnAcrValue: string;
+
+  // SAML
+  spNameIdFormat: Saml2NameIdFormat;
+  spOutboundSigningAlgorithm: string;
+  spSigningBehavior: Saml2SigningBehavior;
+  spMinIncomingSigningAlgorithm: boolean;
+  spWantAssertionsSigned: boolean;
+  spValidateCertificates: boolean;
+
+  idpEntityId: string;
+  idpBindingType: Saml2BindingType;
+  idpSingleSignOnServiceUrl: string;
+  idpSingleLogoutServiceUrl: string;
+  idpArtifactResolutionServiceUrl: string;
+  idpX509PublicCert: string;
+  idpOutboundSigningAlgorithm: string;
+  idpAllowUnsolicitedAuthnResponse: boolean;
+  idpDisableOutboundLogoutRequests: boolean;
+  idpWantAuthnRequestsSigned: boolean;
+
+  constructor(data: any = null) {
+    super(data);
+    if (data == null) {
+      return;
     }
+
+    this.configType = this.getResponseProperty("ConfigType");
+
+    this.keyConnectorEnabled = this.getResponseProperty("KeyConnectorEnabled");
+    this.keyConnectorUrl = this.getResponseProperty("KeyConnectorUrl");
+
+    this.authority = this.getResponseProperty("Authority");
+    this.clientId = this.getResponseProperty("ClientId");
+    this.clientSecret = this.getResponseProperty("ClientSecret");
+    this.metadataAddress = this.getResponseProperty("MetadataAddress");
+    this.redirectBehavior = this.getResponseProperty("RedirectBehavior");
+    this.getClaimsFromUserInfoEndpoint = this.getResponseProperty("GetClaimsFromUserInfoEndpoint");
+    this.additionalScopes = this.getResponseProperty("AdditionalScopes");
+    this.additionalUserIdClaimTypes = this.getResponseProperty("AdditionalUserIdClaimTypes");
+    this.additionalEmailClaimTypes = this.getResponseProperty("AdditionalEmailClaimTypes");
+    this.additionalNameClaimTypes = this.getResponseProperty("AdditionalNameClaimTypes");
+    this.acrValues = this.getResponseProperty("AcrValues");
+    this.expectedReturnAcrValue = this.getResponseProperty("ExpectedReturnAcrValue");
+
+    this.spNameIdFormat = this.getResponseProperty("SpNameIdFormat");
+    this.spOutboundSigningAlgorithm = this.getResponseProperty("SpOutboundSigningAlgorithm");
+    this.spSigningBehavior = this.getResponseProperty("SpSigningBehavior");
+    this.spMinIncomingSigningAlgorithm = this.getResponseProperty("SpMinIncomingSigningAlgorithm");
+    this.spWantAssertionsSigned = this.getResponseProperty("SpWantAssertionsSigned");
+    this.spValidateCertificates = this.getResponseProperty("SpValidateCertificates");
+
+    this.idpEntityId = this.getResponseProperty("IdpEntityId");
+    this.idpBindingType = this.getResponseProperty("IdpBindingType");
+    this.idpSingleSignOnServiceUrl = this.getResponseProperty("IdpSingleSignOnServiceUrl");
+    this.idpSingleLogoutServiceUrl = this.getResponseProperty("IdpSingleLogoutServiceUrl");
+    this.idpArtifactResolutionServiceUrl = this.getResponseProperty(
+      "IdpArtifactResolutionServiceUrl"
+    );
+    this.idpX509PublicCert = this.getResponseProperty("IdpX509PublicCert");
+    this.idpOutboundSigningAlgorithm = this.getResponseProperty("IdpOutboundSigningAlgorithm");
+    this.idpAllowUnsolicitedAuthnResponse = this.getResponseProperty(
+      "IdpAllowUnsolicitedAuthnResponse"
+    );
+    this.idpDisableOutboundLogoutRequests = this.getResponseProperty(
+      "IdpDisableOutboundLogoutRequests"
+    );
+    this.idpWantAuthnRequestsSigned = this.getResponseProperty("IdpWantAuthnRequestsSigned");
+  }
 }
diff --git a/jslib/common/src/models/data/attachmentData.ts b/jslib/common/src/models/data/attachmentData.ts
index dc0f2220..50af03ac 100644
--- a/jslib/common/src/models/data/attachmentData.ts
+++ b/jslib/common/src/models/data/attachmentData.ts
@@ -1,22 +1,22 @@
-import { AttachmentResponse } from '../response/attachmentResponse';
+import { AttachmentResponse } from "../response/attachmentResponse";
 
 export class AttachmentData {
-    id: string;
-    url: string;
-    fileName: string;
-    key: string;
-    size: string;
-    sizeName: string;
+  id: string;
+  url: string;
+  fileName: string;
+  key: string;
+  size: string;
+  sizeName: string;
 
-    constructor(response?: AttachmentResponse) {
-        if (response == null) {
-            return;
-        }
-        this.id = response.id;
-        this.url = response.url;
-        this.fileName = response.fileName;
-        this.key = response.key;
-        this.size = response.size;
-        this.sizeName = response.sizeName;
+  constructor(response?: AttachmentResponse) {
+    if (response == null) {
+      return;
     }
+    this.id = response.id;
+    this.url = response.url;
+    this.fileName = response.fileName;
+    this.key = response.key;
+    this.size = response.size;
+    this.sizeName = response.sizeName;
+  }
 }
diff --git a/jslib/common/src/models/data/cardData.ts b/jslib/common/src/models/data/cardData.ts
index d87c7231..9d90e4b2 100644
--- a/jslib/common/src/models/data/cardData.ts
+++ b/jslib/common/src/models/data/cardData.ts
@@ -1,23 +1,23 @@
-import { CardApi } from '../api/cardApi';
+import { CardApi } from "../api/cardApi";
 
 export class CardData {
-    cardholderName: string;
-    brand: string;
-    number: string;
-    expMonth: string;
-    expYear: string;
-    code: string;
+  cardholderName: string;
+  brand: string;
+  number: string;
+  expMonth: string;
+  expYear: string;
+  code: string;
 
-    constructor(data?: CardApi) {
-        if (data == null) {
-            return;
-        }
-
-        this.cardholderName = data.cardholderName;
-        this.brand = data.brand;
-        this.number = data.number;
-        this.expMonth = data.expMonth;
-        this.expYear = data.expYear;
-        this.code = data.code;
+  constructor(data?: CardApi) {
+    if (data == null) {
+      return;
     }
+
+    this.cardholderName = data.cardholderName;
+    this.brand = data.brand;
+    this.number = data.number;
+    this.expMonth = data.expMonth;
+    this.expYear = data.expYear;
+    this.code = data.code;
+  }
 }
diff --git a/jslib/common/src/models/data/cipherData.ts b/jslib/common/src/models/data/cipherData.ts
index 679db751..cdda0e46 100644
--- a/jslib/common/src/models/data/cipherData.ts
+++ b/jslib/common/src/models/data/cipherData.ts
@@ -1,87 +1,87 @@
-import { CipherRepromptType } from '../../enums/cipherRepromptType';
-import { CipherType } from '../../enums/cipherType';
+import { CipherRepromptType } from "../../enums/cipherRepromptType";
+import { CipherType } from "../../enums/cipherType";
 
-import { AttachmentData } from './attachmentData';
-import { CardData } from './cardData';
-import { FieldData } from './fieldData';
-import { IdentityData } from './identityData';
-import { LoginData } from './loginData';
-import { PasswordHistoryData } from './passwordHistoryData';
-import { SecureNoteData } from './secureNoteData';
+import { AttachmentData } from "./attachmentData";
+import { CardData } from "./cardData";
+import { FieldData } from "./fieldData";
+import { IdentityData } from "./identityData";
+import { LoginData } from "./loginData";
+import { PasswordHistoryData } from "./passwordHistoryData";
+import { SecureNoteData } from "./secureNoteData";
 
-import { CipherResponse } from '../response/cipherResponse';
+import { CipherResponse } from "../response/cipherResponse";
 
 export class CipherData {
-    id: string;
-    organizationId: string;
-    folderId: string;
-    userId: string;
-    edit: boolean;
-    viewPassword: boolean;
-    organizationUseTotp: boolean;
-    favorite: boolean;
-    revisionDate: string;
-    type: CipherType;
-    sizeName: string;
-    name: string;
-    notes: string;
-    login?: LoginData;
-    secureNote?: SecureNoteData;
-    card?: CardData;
-    identity?: IdentityData;
-    fields?: FieldData[];
-    attachments?: AttachmentData[];
-    passwordHistory?: PasswordHistoryData[];
-    collectionIds?: string[];
-    deletedDate: string;
-    reprompt: CipherRepromptType;
+  id: string;
+  organizationId: string;
+  folderId: string;
+  userId: string;
+  edit: boolean;
+  viewPassword: boolean;
+  organizationUseTotp: boolean;
+  favorite: boolean;
+  revisionDate: string;
+  type: CipherType;
+  sizeName: string;
+  name: string;
+  notes: string;
+  login?: LoginData;
+  secureNote?: SecureNoteData;
+  card?: CardData;
+  identity?: IdentityData;
+  fields?: FieldData[];
+  attachments?: AttachmentData[];
+  passwordHistory?: PasswordHistoryData[];
+  collectionIds?: string[];
+  deletedDate: string;
+  reprompt: CipherRepromptType;
 
-    constructor(response?: CipherResponse, userId?: string, collectionIds?: string[]) {
-        if (response == null) {
-            return;
-        }
+  constructor(response?: CipherResponse, userId?: string, collectionIds?: string[]) {
+    if (response == null) {
+      return;
+    }
 
-        this.id = response.id;
-        this.organizationId = response.organizationId;
-        this.folderId = response.folderId;
-        this.userId = userId;
-        this.edit = response.edit;
-        this.viewPassword = response.viewPassword;
-        this.organizationUseTotp = response.organizationUseTotp;
-        this.favorite = response.favorite;
-        this.revisionDate = response.revisionDate;
-        this.type = response.type;
-        this.name = response.name;
-        this.notes = response.notes;
-        this.collectionIds = collectionIds != null ? collectionIds : response.collectionIds;
-        this.deletedDate = response.deletedDate;
-        this.reprompt = response.reprompt;
+    this.id = response.id;
+    this.organizationId = response.organizationId;
+    this.folderId = response.folderId;
+    this.userId = userId;
+    this.edit = response.edit;
+    this.viewPassword = response.viewPassword;
+    this.organizationUseTotp = response.organizationUseTotp;
+    this.favorite = response.favorite;
+    this.revisionDate = response.revisionDate;
+    this.type = response.type;
+    this.name = response.name;
+    this.notes = response.notes;
+    this.collectionIds = collectionIds != null ? collectionIds : response.collectionIds;
+    this.deletedDate = response.deletedDate;
+    this.reprompt = response.reprompt;
 
-        switch (this.type) {
-            case CipherType.Login:
-                this.login = new LoginData(response.login);
-                break;
-            case CipherType.SecureNote:
-                this.secureNote = new SecureNoteData(response.secureNote);
-                break;
-            case CipherType.Card:
-                this.card = new CardData(response.card);
-                break;
-            case CipherType.Identity:
-                this.identity = new IdentityData(response.identity);
-                break;
-            default:
-                break;
-        }
+    switch (this.type) {
+      case CipherType.Login:
+        this.login = new LoginData(response.login);
+        break;
+      case CipherType.SecureNote:
+        this.secureNote = new SecureNoteData(response.secureNote);
+        break;
+      case CipherType.Card:
+        this.card = new CardData(response.card);
+        break;
+      case CipherType.Identity:
+        this.identity = new IdentityData(response.identity);
+        break;
+      default:
+        break;
+    }
 
-        if (response.fields != null) {
-            this.fields = response.fields.map(f => new FieldData(f));
-        }
-        if (response.attachments != null) {
-            this.attachments = response.attachments.map(a => new AttachmentData(a));
-        }
-        if (response.passwordHistory != null) {
-            this.passwordHistory = response.passwordHistory.map(ph => new PasswordHistoryData(ph));
-        }
+    if (response.fields != null) {
+      this.fields = response.fields.map((f) => new FieldData(f));
+    }
+    if (response.attachments != null) {
+      this.attachments = response.attachments.map((a) => new AttachmentData(a));
+    }
+    if (response.passwordHistory != null) {
+      this.passwordHistory = response.passwordHistory.map((ph) => new PasswordHistoryData(ph));
     }
+  }
 }
diff --git a/jslib/common/src/models/data/collectionData.ts b/jslib/common/src/models/data/collectionData.ts
index cc3ef64b..9e2607ed 100644
--- a/jslib/common/src/models/data/collectionData.ts
+++ b/jslib/common/src/models/data/collectionData.ts
@@ -1,17 +1,17 @@
-import { CollectionDetailsResponse } from '../response/collectionResponse';
+import { CollectionDetailsResponse } from "../response/collectionResponse";
 
 export class CollectionData {
-    id: string;
-    organizationId: string;
-    name: string;
-    externalId: string;
-    readOnly: boolean;
+  id: string;
+  organizationId: string;
+  name: string;
+  externalId: string;
+  readOnly: boolean;
 
-    constructor(response: CollectionDetailsResponse) {
-        this.id = response.id;
-        this.organizationId = response.organizationId;
-        this.name = response.name;
-        this.externalId = response.externalId;
-        this.readOnly = response.readOnly;
-    }
+  constructor(response: CollectionDetailsResponse) {
+    this.id = response.id;
+    this.organizationId = response.organizationId;
+    this.name = response.name;
+    this.externalId = response.externalId;
+    this.readOnly = response.readOnly;
+  }
 }
diff --git a/jslib/common/src/models/data/eventData.ts b/jslib/common/src/models/data/eventData.ts
index f8639ad8..c0e38ddc 100644
--- a/jslib/common/src/models/data/eventData.ts
+++ b/jslib/common/src/models/data/eventData.ts
@@ -1,7 +1,7 @@
-import { EventType } from '../../enums/eventType';
+import { EventType } from "../../enums/eventType";
 
 export class EventData {
-    type: EventType;
-    cipherId: string;
-    date: string;
+  type: EventType;
+  cipherId: string;
+  date: string;
 }
diff --git a/jslib/common/src/models/data/fieldData.ts b/jslib/common/src/models/data/fieldData.ts
index e83445f2..7b9fe197 100644
--- a/jslib/common/src/models/data/fieldData.ts
+++ b/jslib/common/src/models/data/fieldData.ts
@@ -1,21 +1,21 @@
-import { FieldType } from '../../enums/fieldType';
-import { LinkedIdType } from '../../enums/linkedIdType';
+import { FieldType } from "../../enums/fieldType";
+import { LinkedIdType } from "../../enums/linkedIdType";
 
-import { FieldApi } from '../api/fieldApi';
+import { FieldApi } from "../api/fieldApi";
 
 export class FieldData {
-    type: FieldType;
-    name: string;
-    value: string;
-    linkedId: LinkedIdType;
+  type: FieldType;
+  name: string;
+  value: string;
+  linkedId: LinkedIdType;
 
-    constructor(response?: FieldApi) {
-        if (response == null) {
-            return;
-        }
-        this.type = response.type;
-        this.name = response.name;
-        this.value = response.value;
-        this.linkedId = response.linkedId;
+  constructor(response?: FieldApi) {
+    if (response == null) {
+      return;
     }
+    this.type = response.type;
+    this.name = response.name;
+    this.value = response.value;
+    this.linkedId = response.linkedId;
+  }
 }
diff --git a/jslib/common/src/models/data/folderData.ts b/jslib/common/src/models/data/folderData.ts
index 509267c9..459ba4de 100644
--- a/jslib/common/src/models/data/folderData.ts
+++ b/jslib/common/src/models/data/folderData.ts
@@ -1,15 +1,15 @@
-import { FolderResponse } from '../response/folderResponse';
+import { FolderResponse } from "../response/folderResponse";
 
 export class FolderData {
-    id: string;
-    userId: string;
-    name: string;
-    revisionDate: string;
+  id: string;
+  userId: string;
+  name: string;
+  revisionDate: string;
 
-    constructor(response: FolderResponse, userId: string) {
-        this.userId = userId;
-        this.name = response.name;
-        this.id = response.id;
-        this.revisionDate = response.revisionDate;
-    }
+  constructor(response: FolderResponse, userId: string) {
+    this.userId = userId;
+    this.name = response.name;
+    this.id = response.id;
+    this.revisionDate = response.revisionDate;
+  }
 }
diff --git a/jslib/common/src/models/data/identityData.ts b/jslib/common/src/models/data/identityData.ts
index 50fff957..02aa7eb6 100644
--- a/jslib/common/src/models/data/identityData.ts
+++ b/jslib/common/src/models/data/identityData.ts
@@ -1,47 +1,47 @@
-import { IdentityApi } from '../api/identityApi';
+import { IdentityApi } from "../api/identityApi";
 
 export class IdentityData {
-    title: string;
-    firstName: string;
-    middleName: string;
-    lastName: string;
-    address1: string;
-    address2: string;
-    address3: string;
-    city: string;
-    state: string;
-    postalCode: string;
-    country: string;
-    company: string;
-    email: string;
-    phone: string;
-    ssn: string;
-    username: string;
-    passportNumber: string;
-    licenseNumber: string;
+  title: string;
+  firstName: string;
+  middleName: string;
+  lastName: string;
+  address1: string;
+  address2: string;
+  address3: string;
+  city: string;
+  state: string;
+  postalCode: string;
+  country: string;
+  company: string;
+  email: string;
+  phone: string;
+  ssn: string;
+  username: string;
+  passportNumber: string;
+  licenseNumber: string;
 
-    constructor(data?: IdentityApi) {
-        if (data == null) {
-            return;
-        }
-
-        this.title = data.title;
-        this.firstName = data.firstName;
-        this.middleName = data.middleName;
-        this.lastName = data.lastName;
-        this.address1 = data.address1;
-        this.address2 = data.address2;
-        this.address3 = data.address3;
-        this.city = data.city;
-        this.state = data.state;
-        this.postalCode = data.postalCode;
-        this.country = data.country;
-        this.company = data.company;
-        this.email = data.email;
-        this.phone = data.phone;
-        this.ssn = data.ssn;
-        this.username = data.username;
-        this.passportNumber = data.passportNumber;
-        this.licenseNumber = data.licenseNumber;
+  constructor(data?: IdentityApi) {
+    if (data == null) {
+      return;
     }
+
+    this.title = data.title;
+    this.firstName = data.firstName;
+    this.middleName = data.middleName;
+    this.lastName = data.lastName;
+    this.address1 = data.address1;
+    this.address2 = data.address2;
+    this.address3 = data.address3;
+    this.city = data.city;
+    this.state = data.state;
+    this.postalCode = data.postalCode;
+    this.country = data.country;
+    this.company = data.company;
+    this.email = data.email;
+    this.phone = data.phone;
+    this.ssn = data.ssn;
+    this.username = data.username;
+    this.passportNumber = data.passportNumber;
+    this.licenseNumber = data.licenseNumber;
+  }
 }
diff --git a/jslib/common/src/models/data/loginData.ts b/jslib/common/src/models/data/loginData.ts
index 7b5d7027..e51180c8 100644
--- a/jslib/common/src/models/data/loginData.ts
+++ b/jslib/common/src/models/data/loginData.ts
@@ -1,28 +1,28 @@
-import { LoginApi } from '../api/loginApi';
+import { LoginApi } from "../api/loginApi";
 
-import { LoginUriData } from './loginUriData';
+import { LoginUriData } from "./loginUriData";
 
 export class LoginData {
-    uris: LoginUriData[];
-    username: string;
-    password: string;
-    passwordRevisionDate: string;
-    totp: string;
-    autofillOnPageLoad: boolean;
+  uris: LoginUriData[];
+  username: string;
+  password: string;
+  passwordRevisionDate: string;
+  totp: string;
+  autofillOnPageLoad: boolean;
 
-    constructor(data?: LoginApi) {
-        if (data == null) {
-            return;
-        }
+  constructor(data?: LoginApi) {
+    if (data == null) {
+      return;
+    }
 
-        this.username = data.username;
-        this.password = data.password;
-        this.passwordRevisionDate = data.passwordRevisionDate;
-        this.totp = data.totp;
-        this.autofillOnPageLoad = data.autofillOnPageLoad;
+    this.username = data.username;
+    this.password = data.password;
+    this.passwordRevisionDate = data.passwordRevisionDate;
+    this.totp = data.totp;
+    this.autofillOnPageLoad = data.autofillOnPageLoad;
 
-        if (data.uris) {
-            this.uris = data.uris.map(u => new LoginUriData(u));
-        }
+    if (data.uris) {
+      this.uris = data.uris.map((u) => new LoginUriData(u));
     }
+  }
 }
diff --git a/jslib/common/src/models/data/loginUriData.ts b/jslib/common/src/models/data/loginUriData.ts
index e696355c..01cad0bf 100644
--- a/jslib/common/src/models/data/loginUriData.ts
+++ b/jslib/common/src/models/data/loginUriData.ts
@@ -1,16 +1,16 @@
-import { UriMatchType } from '../../enums/uriMatchType';
+import { UriMatchType } from "../../enums/uriMatchType";
 
-import { LoginUriApi } from '../api/loginUriApi';
+import { LoginUriApi } from "../api/loginUriApi";
 
 export class LoginUriData {
-    uri: string;
-    match: UriMatchType = null;
+  uri: string;
+  match: UriMatchType = null;
 
-    constructor(data?: LoginUriApi) {
-        if (data == null) {
-            return;
-        }
-        this.uri = data.uri;
-        this.match = data.match;
+  constructor(data?: LoginUriApi) {
+    if (data == null) {
+      return;
     }
+    this.uri = data.uri;
+    this.match = data.match;
+  }
 }
diff --git a/jslib/common/src/models/data/organizationData.ts b/jslib/common/src/models/data/organizationData.ts
index c4061057..3903b0c2 100644
--- a/jslib/common/src/models/data/organizationData.ts
+++ b/jslib/common/src/models/data/organizationData.ts
@@ -1,80 +1,80 @@
-import { ProfileOrganizationResponse } from '../response/profileOrganizationResponse';
+import { ProfileOrganizationResponse } from "../response/profileOrganizationResponse";
 
-import { OrganizationUserStatusType } from '../../enums/organizationUserStatusType';
-import { OrganizationUserType } from '../../enums/organizationUserType';
-import { ProductType } from '../../enums/productType';
+import { OrganizationUserStatusType } from "../../enums/organizationUserStatusType";
+import { OrganizationUserType } from "../../enums/organizationUserType";
+import { ProductType } from "../../enums/productType";
 
-import { PermissionsApi } from '../api/permissionsApi';
+import { PermissionsApi } from "../api/permissionsApi";
 
 export class OrganizationData {
-    id: string;
-    name: string;
-    status: OrganizationUserStatusType;
-    type: OrganizationUserType;
-    enabled: boolean;
-    usePolicies: boolean;
-    useGroups: boolean;
-    useDirectory: boolean;
-    useEvents: boolean;
-    useTotp: boolean;
-    use2fa: boolean;
-    useApi: boolean;
-    useSso: boolean;
-    useKeyConnector: boolean;
-    useResetPassword: boolean;
-    selfHost: boolean;
-    usersGetPremium: boolean;
-    seats: number;
-    maxCollections: number;
-    maxStorageGb?: number;
-    ssoBound: boolean;
-    identifier: string;
-    permissions: PermissionsApi;
-    resetPasswordEnrolled: boolean;
-    userId: string;
-    hasPublicAndPrivateKeys: boolean;
-    providerId: string;
-    providerName: string;
-    isProviderUser: boolean;
-    familySponsorshipFriendlyName: string;
-    familySponsorshipAvailable: boolean;
-    planProductType: ProductType;
-    keyConnectorEnabled: boolean;
-    keyConnectorUrl: string;
+  id: string;
+  name: string;
+  status: OrganizationUserStatusType;
+  type: OrganizationUserType;
+  enabled: boolean;
+  usePolicies: boolean;
+  useGroups: boolean;
+  useDirectory: boolean;
+  useEvents: boolean;
+  useTotp: boolean;
+  use2fa: boolean;
+  useApi: boolean;
+  useSso: boolean;
+  useKeyConnector: boolean;
+  useResetPassword: boolean;
+  selfHost: boolean;
+  usersGetPremium: boolean;
+  seats: number;
+  maxCollections: number;
+  maxStorageGb?: number;
+  ssoBound: boolean;
+  identifier: string;
+  permissions: PermissionsApi;
+  resetPasswordEnrolled: boolean;
+  userId: string;
+  hasPublicAndPrivateKeys: boolean;
+  providerId: string;
+  providerName: string;
+  isProviderUser: boolean;
+  familySponsorshipFriendlyName: string;
+  familySponsorshipAvailable: boolean;
+  planProductType: ProductType;
+  keyConnectorEnabled: boolean;
+  keyConnectorUrl: string;
 
-    constructor(response: ProfileOrganizationResponse) {
-        this.id = response.id;
-        this.name = response.name;
-        this.status = response.status;
-        this.type = response.type;
-        this.enabled = response.enabled;
-        this.usePolicies = response.usePolicies;
-        this.useGroups = response.useGroups;
-        this.useDirectory = response.useDirectory;
-        this.useEvents = response.useEvents;
-        this.useTotp = response.useTotp;
-        this.use2fa = response.use2fa;
-        this.useApi = response.useApi;
-        this.useSso = response.useSso;
-        this.useKeyConnector = response.useKeyConnector;
-        this.useResetPassword = response.useResetPassword;
-        this.selfHost = response.selfHost;
-        this.usersGetPremium = response.usersGetPremium;
-        this.seats = response.seats;
-        this.maxCollections = response.maxCollections;
-        this.maxStorageGb = response.maxStorageGb;
-        this.ssoBound = response.ssoBound;
-        this.identifier = response.identifier;
-        this.permissions = response.permissions;
-        this.resetPasswordEnrolled = response.resetPasswordEnrolled;
-        this.userId = response.userId;
-        this.hasPublicAndPrivateKeys = response.hasPublicAndPrivateKeys;
-        this.providerId = response.providerId;
-        this.providerName = response.providerName;
-        this.familySponsorshipFriendlyName = response.familySponsorshipFriendlyName;
-        this.familySponsorshipAvailable = response.familySponsorshipAvailable;
-        this.planProductType = response.planProductType;
-        this.keyConnectorEnabled = response.keyConnectorEnabled;
-        this.keyConnectorUrl = response.keyConnectorUrl;
-    }
+  constructor(response: ProfileOrganizationResponse) {
+    this.id = response.id;
+    this.name = response.name;
+    this.status = response.status;
+    this.type = response.type;
+    this.enabled = response.enabled;
+    this.usePolicies = response.usePolicies;
+    this.useGroups = response.useGroups;
+    this.useDirectory = response.useDirectory;
+    this.useEvents = response.useEvents;
+    this.useTotp = response.useTotp;
+    this.use2fa = response.use2fa;
+    this.useApi = response.useApi;
+    this.useSso = response.useSso;
+    this.useKeyConnector = response.useKeyConnector;
+    this.useResetPassword = response.useResetPassword;
+    this.selfHost = response.selfHost;
+    this.usersGetPremium = response.usersGetPremium;
+    this.seats = response.seats;
+    this.maxCollections = response.maxCollections;
+    this.maxStorageGb = response.maxStorageGb;
+    this.ssoBound = response.ssoBound;
+    this.identifier = response.identifier;
+    this.permissions = response.permissions;
+    this.resetPasswordEnrolled = response.resetPasswordEnrolled;
+    this.userId = response.userId;
+    this.hasPublicAndPrivateKeys = response.hasPublicAndPrivateKeys;
+    this.providerId = response.providerId;
+    this.providerName = response.providerName;
+    this.familySponsorshipFriendlyName = response.familySponsorshipFriendlyName;
+    this.familySponsorshipAvailable = response.familySponsorshipAvailable;
+    this.planProductType = response.planProductType;
+    this.keyConnectorEnabled = response.keyConnectorEnabled;
+    this.keyConnectorUrl = response.keyConnectorUrl;
+  }
 }
diff --git a/jslib/common/src/models/data/passwordHistoryData.ts b/jslib/common/src/models/data/passwordHistoryData.ts
index 067c46fd..72436f3d 100644
--- a/jslib/common/src/models/data/passwordHistoryData.ts
+++ b/jslib/common/src/models/data/passwordHistoryData.ts
@@ -1,15 +1,15 @@
-import { PasswordHistoryResponse } from '../response/passwordHistoryResponse';
+import { PasswordHistoryResponse } from "../response/passwordHistoryResponse";
 
 export class PasswordHistoryData {
-    password: string;
-    lastUsedDate: string;
+  password: string;
+  lastUsedDate: string;
 
-    constructor(response?: PasswordHistoryResponse) {
-        if (response == null) {
-            return;
-        }
-
-        this.password = response.password;
-        this.lastUsedDate = response.lastUsedDate;
+  constructor(response?: PasswordHistoryResponse) {
+    if (response == null) {
+      return;
     }
+
+    this.password = response.password;
+    this.lastUsedDate = response.lastUsedDate;
+  }
 }
diff --git a/jslib/common/src/models/data/policyData.ts b/jslib/common/src/models/data/policyData.ts
index 5f012424..46cbbeb9 100644
--- a/jslib/common/src/models/data/policyData.ts
+++ b/jslib/common/src/models/data/policyData.ts
@@ -1,19 +1,19 @@
-import { PolicyResponse } from '../response/policyResponse';
+import { PolicyResponse } from "../response/policyResponse";
 
-import { PolicyType } from '../../enums/policyType';
+import { PolicyType } from "../../enums/policyType";
 
 export class PolicyData {
-    id: string;
-    organizationId: string;
-    type: PolicyType;
-    data: any;
-    enabled: boolean;
+  id: string;
+  organizationId: string;
+  type: PolicyType;
+  data: any;
+  enabled: boolean;
 
-    constructor(response: PolicyResponse) {
-        this.id = response.id;
-        this.organizationId = response.organizationId;
-        this.type = response.type;
-        this.data = response.data;
-        this.enabled = response.enabled;
-    }
+  constructor(response: PolicyResponse) {
+    this.id = response.id;
+    this.organizationId = response.organizationId;
+    this.type = response.type;
+    this.data = response.data;
+    this.enabled = response.enabled;
+  }
 }
diff --git a/jslib/common/src/models/data/providerData.ts b/jslib/common/src/models/data/providerData.ts
index 990a0190..7efdab05 100644
--- a/jslib/common/src/models/data/providerData.ts
+++ b/jslib/common/src/models/data/providerData.ts
@@ -1,24 +1,24 @@
-import { ProfileProviderResponse } from '../response/profileProviderResponse';
+import { ProfileProviderResponse } from "../response/profileProviderResponse";
 
-import { ProviderUserStatusType } from '../../enums/providerUserStatusType';
-import { ProviderUserType } from '../../enums/providerUserType';
+import { ProviderUserStatusType } from "../../enums/providerUserStatusType";
+import { ProviderUserType } from "../../enums/providerUserType";
 
 export class ProviderData {
-    id: string;
-    name: string;
-    status: ProviderUserStatusType;
-    type: ProviderUserType;
-    enabled: boolean;
-    userId: string;
-    useEvents: boolean;
+  id: string;
+  name: string;
+  status: ProviderUserStatusType;
+  type: ProviderUserType;
+  enabled: boolean;
+  userId: string;
+  useEvents: boolean;
 
-    constructor(response: ProfileProviderResponse) {
-        this.id = response.id;
-        this.name = response.name;
-        this.status = response.status;
-        this.type = response.type;
-        this.enabled = response.enabled;
-        this.userId = response.userId;
-        this.useEvents = response.useEvents;
-    }
+  constructor(response: ProfileProviderResponse) {
+    this.id = response.id;
+    this.name = response.name;
+    this.status = response.status;
+    this.type = response.type;
+    this.enabled = response.enabled;
+    this.userId = response.userId;
+    this.useEvents = response.useEvents;
+  }
 }
diff --git a/jslib/common/src/models/data/secureNoteData.ts b/jslib/common/src/models/data/secureNoteData.ts
index 4a24f2cf..119c77b5 100644
--- a/jslib/common/src/models/data/secureNoteData.ts
+++ b/jslib/common/src/models/data/secureNoteData.ts
@@ -1,15 +1,15 @@
-import { SecureNoteType } from '../../enums/secureNoteType';
+import { SecureNoteType } from "../../enums/secureNoteType";
 
-import { SecureNoteApi } from '../api/secureNoteApi';
+import { SecureNoteApi } from "../api/secureNoteApi";
 
 export class SecureNoteData {
-    type: SecureNoteType;
+  type: SecureNoteType;
 
-    constructor(data?: SecureNoteApi) {
-        if (data == null) {
-            return;
-        }
-
-        this.type = data.type;
+  constructor(data?: SecureNoteApi) {
+    if (data == null) {
+      return;
     }
+
+    this.type = data.type;
+  }
 }
diff --git a/jslib/common/src/models/data/sendData.ts b/jslib/common/src/models/data/sendData.ts
index 363429cc..d07dc362 100644
--- a/jslib/common/src/models/data/sendData.ts
+++ b/jslib/common/src/models/data/sendData.ts
@@ -1,59 +1,59 @@
-import { SendType } from '../../enums/sendType';
+import { SendType } from "../../enums/sendType";
 
-import { SendFileData } from './sendFileData';
-import { SendTextData } from './sendTextData';
+import { SendFileData } from "./sendFileData";
+import { SendTextData } from "./sendTextData";
 
-import { SendResponse } from '../response/sendResponse';
+import { SendResponse } from "../response/sendResponse";
 
 export class SendData {
-    id: string;
-    accessId: string;
-    userId: string;
-    type: SendType;
-    name: string;
-    notes: string;
-    file: SendFileData;
-    text: SendTextData;
-    key: string;
-    maxAccessCount?: number;
-    accessCount: number;
-    revisionDate: string;
-    expirationDate: string;
-    deletionDate: string;
-    password: string;
-    disabled: boolean;
-    hideEmail: boolean;
+  id: string;
+  accessId: string;
+  userId: string;
+  type: SendType;
+  name: string;
+  notes: string;
+  file: SendFileData;
+  text: SendTextData;
+  key: string;
+  maxAccessCount?: number;
+  accessCount: number;
+  revisionDate: string;
+  expirationDate: string;
+  deletionDate: string;
+  password: string;
+  disabled: boolean;
+  hideEmail: boolean;
 
-    constructor(response?: SendResponse, userId?: string) {
-        if (response == null) {
-            return;
-        }
+  constructor(response?: SendResponse, userId?: string) {
+    if (response == null) {
+      return;
+    }
 
-        this.id = response.id;
-        this.accessId = response.accessId;
-        this.userId = userId;
-        this.type = response.type;
-        this.name = response.name;
-        this.notes = response.notes;
-        this.key = response.key;
-        this.maxAccessCount = response.maxAccessCount;
-        this.accessCount = response.accessCount;
-        this.revisionDate = response.revisionDate;
-        this.expirationDate = response.expirationDate;
-        this.deletionDate = response.deletionDate;
-        this.password = response.password;
-        this.disabled = response.disable;
-        this.hideEmail = response.hideEmail;
+    this.id = response.id;
+    this.accessId = response.accessId;
+    this.userId = userId;
+    this.type = response.type;
+    this.name = response.name;
+    this.notes = response.notes;
+    this.key = response.key;
+    this.maxAccessCount = response.maxAccessCount;
+    this.accessCount = response.accessCount;
+    this.revisionDate = response.revisionDate;
+    this.expirationDate = response.expirationDate;
+    this.deletionDate = response.deletionDate;
+    this.password = response.password;
+    this.disabled = response.disable;
+    this.hideEmail = response.hideEmail;
 
-        switch (this.type) {
-            case SendType.Text:
-                this.text = new SendTextData(response.text);
-                break;
-            case SendType.File:
-                this.file = new SendFileData(response.file);
-                break;
-            default:
-                break;
-        }
+    switch (this.type) {
+      case SendType.Text:
+        this.text = new SendTextData(response.text);
+        break;
+      case SendType.File:
+        this.file = new SendFileData(response.file);
+        break;
+      default:
+        break;
     }
+  }
 }
diff --git a/jslib/common/src/models/data/sendFileData.ts b/jslib/common/src/models/data/sendFileData.ts
index cb7b0850..d7bf8ea4 100644
--- a/jslib/common/src/models/data/sendFileData.ts
+++ b/jslib/common/src/models/data/sendFileData.ts
@@ -1,21 +1,21 @@
-import { SendFileApi } from '../api/sendFileApi';
+import { SendFileApi } from "../api/sendFileApi";
 
 export class SendFileData {
-    id: string;
-    fileName: string;
-    key: string;
-    size: string;
-    sizeName: string;
+  id: string;
+  fileName: string;
+  key: string;
+  size: string;
+  sizeName: string;
 
-    constructor(data?: SendFileApi) {
-        if (data == null) {
-            return;
-        }
-
-        this.id = data.id;
-        this.fileName = data.fileName;
-        this.key = data.key;
-        this.size = data.size;
-        this.sizeName = data.sizeName;
+  constructor(data?: SendFileApi) {
+    if (data == null) {
+      return;
     }
+
+    this.id = data.id;
+    this.fileName = data.fileName;
+    this.key = data.key;
+    this.size = data.size;
+    this.sizeName = data.sizeName;
+  }
 }
diff --git a/jslib/common/src/models/data/sendTextData.ts b/jslib/common/src/models/data/sendTextData.ts
index 1d34adde..fedf2ed6 100644
--- a/jslib/common/src/models/data/sendTextData.ts
+++ b/jslib/common/src/models/data/sendTextData.ts
@@ -1,15 +1,15 @@
-import { SendTextApi } from '../api/sendTextApi';
+import { SendTextApi } from "../api/sendTextApi";
 
 export class SendTextData {
-    text: string;
-    hidden: boolean;
+  text: string;
+  hidden: boolean;
 
-    constructor(data?: SendTextApi) {
-        if (data == null) {
-            return;
-        }
-
-        this.text = data.text;
-        this.hidden = data.hidden;
+  constructor(data?: SendTextApi) {
+    if (data == null) {
+      return;
     }
+
+    this.text = data.text;
+    this.hidden = data.hidden;
+  }
 }
diff --git a/jslib/common/src/models/domain/account.ts b/jslib/common/src/models/domain/account.ts
new file mode 100644
index 00000000..51be98be
--- /dev/null
+++ b/jslib/common/src/models/domain/account.ts
@@ -0,0 +1,177 @@
+import { OrganizationData } from "../data/organizationData";
+
+import { AuthenticationStatus } from "../../enums/authenticationStatus";
+import { KdfType } from "../../enums/kdfType";
+import { UriMatchType } from "../../enums/uriMatchType";
+
+import { CipherView } from "../view/cipherView";
+import { CollectionView } from "../view/collectionView";
+import { FolderView } from "../view/folderView";
+import { SendView } from "../view/sendView";
+
+import { EncString } from "./encString";
+import { GeneratedPasswordHistory } from "./generatedPasswordHistory";
+import { Policy } from "./policy";
+import { SymmetricCryptoKey } from "./symmetricCryptoKey";
+
+import { CipherData } from "../data/cipherData";
+import { CollectionData } from "../data/collectionData";
+import { EventData } from "../data/eventData";
+import { FolderData } from "../data/folderData";
+import { PolicyData } from "../data/policyData";
+import { ProviderData } from "../data/providerData";
+import { SendData } from "../data/sendData";
+import { EnvironmentUrls } from "./environmentUrls";
+
+export class EncryptionPair<TEncrypted, TDecrypted> {
+  encrypted?: TEncrypted;
+  decrypted?: TDecrypted;
+}
+
+export class DataEncryptionPair<TEncrypted, TDecrypted> {
+  encrypted?: { [id: string]: TEncrypted };
+  decrypted?: TDecrypted[];
+}
+
+export class AccountData {
+  ciphers?: DataEncryptionPair<CipherData, CipherView> = new DataEncryptionPair<
+    CipherData,
+    CipherView
+  >();
+  folders?: DataEncryptionPair<FolderData, FolderView> = new DataEncryptionPair<
+    FolderData,
+    FolderView
+  >();
+  localData?: any;
+  sends?: DataEncryptionPair<SendData, SendView> = new DataEncryptionPair<SendData, SendView>();
+  collections?: DataEncryptionPair<CollectionData, CollectionView> = new DataEncryptionPair<
+    CollectionData,
+    CollectionView
+  >();
+  policies?: DataEncryptionPair<PolicyData, Policy> = new DataEncryptionPair<PolicyData, Policy>();
+  passwordGenerationHistory?: EncryptionPair<
+    GeneratedPasswordHistory[],
+    GeneratedPasswordHistory[]
+  > = new EncryptionPair<GeneratedPasswordHistory[], GeneratedPasswordHistory[]>();
+  addEditCipherInfo?: any;
+  collapsedGroupings?: Set<string>;
+  eventCollection?: EventData[];
+  organizations?: { [id: string]: OrganizationData };
+  providers?: { [id: string]: ProviderData };
+}
+
+export class AccountKeys {
+  cryptoMasterKey?: SymmetricCryptoKey;
+  cryptoMasterKeyAuto?: string;
+  cryptoMasterKeyB64?: string;
+  cryptoMasterKeyBiometric?: string;
+  cryptoSymmetricKey?: EncryptionPair<string, SymmetricCryptoKey> = new EncryptionPair<
+    string,
+    SymmetricCryptoKey
+  >();
+  organizationKeys?: EncryptionPair<any, Map<string, SymmetricCryptoKey>> = new EncryptionPair<
+    any,
+    Map<string, SymmetricCryptoKey>
+  >();
+  providerKeys?: EncryptionPair<any, Map<string, SymmetricCryptoKey>> = new EncryptionPair<
+    any,
+    Map<string, SymmetricCryptoKey>
+  >();
+  privateKey?: EncryptionPair<string, ArrayBuffer> = new EncryptionPair<string, ArrayBuffer>();
+  legacyEtmKey?: SymmetricCryptoKey;
+  publicKey?: ArrayBuffer;
+  apiKeyClientSecret?: string;
+}
+
+export class AccountProfile {
+  apiKeyClientId?: string;
+  authenticationStatus?: AuthenticationStatus;
+  convertAccountToKeyConnector?: boolean;
+  email?: string;
+  emailVerified?: boolean;
+  entityId?: string;
+  entityType?: string;
+  everBeenUnlocked?: boolean;
+  forcePasswordReset?: boolean;
+  hasPremiumPersonally?: boolean;
+  lastActive?: number;
+  lastSync?: string;
+  userId?: string;
+  usesKeyConnector?: boolean;
+  keyHash?: string;
+  kdfIterations?: number;
+  kdfType?: KdfType;
+}
+
+export class AccountSettings {
+  autoConfirmFingerPrints?: boolean;
+  autoFillOnPageLoadDefault?: boolean;
+  biometricLocked?: boolean;
+  biometricUnlock?: boolean;
+  clearClipboard?: number;
+  defaultUriMatch?: UriMatchType;
+  disableAddLoginNotification?: boolean;
+  disableAutoBiometricsPrompt?: boolean;
+  disableAutoTotpCopy?: boolean;
+  disableBadgeCounter?: boolean;
+  disableChangedPasswordNotification?: boolean;
+  disableContextMenuItem?: boolean;
+  disableGa?: boolean;
+  dontShowCardsCurrentTab?: boolean;
+  dontShowIdentitiesCurrentTab?: boolean;
+  enableAlwaysOnTop?: boolean;
+  enableAutoFillOnPageLoad?: boolean;
+  enableBiometric?: boolean;
+  enableFullWidth?: boolean;
+  enableGravitars?: boolean;
+  environmentUrls: EnvironmentUrls = new EnvironmentUrls();
+  equivalentDomains?: any;
+  minimizeOnCopyToClipboard?: boolean;
+  neverDomains?: { [id: string]: any };
+  passwordGenerationOptions?: any;
+  pinProtected?: EncryptionPair<string, EncString> = new EncryptionPair<string, EncString>();
+  protectedPin?: string;
+  settings?: any; // TODO: Merge whatever is going on here into the AccountSettings model properly
+  vaultTimeout?: number;
+  vaultTimeoutAction?: string = "lock";
+}
+
+export class AccountTokens {
+  accessToken?: string;
+  decodedToken?: any;
+  refreshToken?: string;
+  securityStamp?: string;
+}
+
+export class Account {
+  data?: AccountData = new AccountData();
+  keys?: AccountKeys = new AccountKeys();
+  profile?: AccountProfile = new AccountProfile();
+  settings?: AccountSettings = new AccountSettings();
+  tokens?: AccountTokens = new AccountTokens();
+
+  constructor(init: Partial<Account>) {
+    Object.assign(this, {
+      data: {
+        ...new AccountData(),
+        ...init?.data,
+      },
+      keys: {
+        ...new AccountKeys(),
+        ...init?.keys,
+      },
+      profile: {
+        ...new AccountProfile(),
+        ...init?.profile,
+      },
+      settings: {
+        ...new AccountSettings(),
+        ...init?.settings,
+      },
+      tokens: {
+        ...new AccountTokens(),
+        ...init?.tokens,
+      },
+    });
+  }
+}
diff --git a/jslib/common/src/models/domain/attachment.ts b/jslib/common/src/models/domain/attachment.ts
index 9f08a9df..ceafce3e 100644
--- a/jslib/common/src/models/domain/attachment.ts
+++ b/jslib/common/src/models/domain/attachment.ts
@@ -1,75 +1,91 @@
-import { AttachmentData } from '../data/attachmentData';
+import { AttachmentData } from "../data/attachmentData";
 
-import { AttachmentView } from '../view/attachmentView';
+import { AttachmentView } from "../view/attachmentView";
 
-import Domain from './domainBase';
-import { EncString } from './encString';
-import { SymmetricCryptoKey } from './symmetricCryptoKey';
+import Domain from "./domainBase";
+import { EncString } from "./encString";
+import { SymmetricCryptoKey } from "./symmetricCryptoKey";
 
-import { CryptoService } from '../../abstractions/crypto.service';
+import { CryptoService } from "../../abstractions/crypto.service";
 
-import { Utils } from '../../misc/utils';
+import { Utils } from "../../misc/utils";
 
 export class Attachment extends Domain {
-    id: string;
-    url: string;
-    size: string;
-    sizeName: string;
-    key: EncString;
-    fileName: EncString;
+  id: string;
+  url: string;
+  size: string;
+  sizeName: string;
+  key: EncString;
+  fileName: EncString;
 
-    constructor(obj?: AttachmentData, alreadyEncrypted: boolean = false) {
-        super();
-        if (obj == null) {
-            return;
-        }
-
-        this.size = obj.size;
-        this.buildDomainModel(this, obj, {
-            id: null,
-            url: null,
-            sizeName: null,
-            fileName: null,
-            key: null,
-        }, alreadyEncrypted, ['id', 'url', 'sizeName']);
+  constructor(obj?: AttachmentData, alreadyEncrypted: boolean = false) {
+    super();
+    if (obj == null) {
+      return;
     }
 
-    async decrypt(orgId: string, encKey?: SymmetricCryptoKey): Promise<AttachmentView> {
-        const view = await this.decryptObj(new AttachmentView(this), {
-            fileName: null,
-        }, orgId, encKey);
+    this.size = obj.size;
+    this.buildDomainModel(
+      this,
+      obj,
+      {
+        id: null,
+        url: null,
+        sizeName: null,
+        fileName: null,
+        key: null,
+      },
+      alreadyEncrypted,
+      ["id", "url", "sizeName"]
+    );
+  }
 
-        if (this.key != null) {
-            let cryptoService: CryptoService;
-            const containerService = (Utils.global as any).bitwardenContainerService;
-            if (containerService) {
-                cryptoService = containerService.getCryptoService();
-            } else {
-                throw new Error('global bitwardenContainerService not initialized.');
-            }
+  async decrypt(orgId: string, encKey?: SymmetricCryptoKey): Promise<AttachmentView> {
+    const view = await this.decryptObj(
+      new AttachmentView(this),
+      {
+        fileName: null,
+      },
+      orgId,
+      encKey
+    );
 
-            try {
-                const orgKey = await cryptoService.getOrgKey(orgId);
-                const decValue = await cryptoService.decryptToBytes(this.key, orgKey ?? encKey);
-                view.key = new SymmetricCryptoKey(decValue);
-            } catch (e) {
-                // TODO: error?
-            }
-        }
+    if (this.key != null) {
+      let cryptoService: CryptoService;
+      const containerService = (Utils.global as any).bitwardenContainerService;
+      if (containerService) {
+        cryptoService = containerService.getCryptoService();
+      } else {
+        throw new Error("global bitwardenContainerService not initialized.");
+      }
 
-        return view;
+      try {
+        const orgKey = await cryptoService.getOrgKey(orgId);
+        const decValue = await cryptoService.decryptToBytes(this.key, orgKey ?? encKey);
+        view.key = new SymmetricCryptoKey(decValue);
+      } catch (e) {
+        // TODO: error?
+      }
     }
 
-    toAttachmentData(): AttachmentData {
-        const a = new AttachmentData();
-        a.size = this.size;
-        this.buildDataModel(this, a, {
-            id: null,
-            url: null,
-            sizeName: null,
-            fileName: null,
-            key: null,
-        }, ['id', 'url', 'sizeName']);
-        return a;
-    }
+    return view;
+  }
+
+  toAttachmentData(): AttachmentData {
+    const a = new AttachmentData();
+    a.size = this.size;
+    this.buildDataModel(
+      this,
+      a,
+      {
+        id: null,
+        url: null,
+        sizeName: null,
+        fileName: null,
+        key: null,
+      },
+      ["id", "url", "sizeName"]
+    );
+    return a;
+  }
 }
diff --git a/jslib/common/src/models/domain/authResult.ts b/jslib/common/src/models/domain/authResult.ts
index 7c5a39c1..eadad50f 100644
--- a/jslib/common/src/models/domain/authResult.ts
+++ b/jslib/common/src/models/domain/authResult.ts
@@ -1,9 +1,9 @@
-import { TwoFactorProviderType } from '../../enums/twoFactorProviderType';
+import { TwoFactorProviderType } from "../../enums/twoFactorProviderType";
 
 export class AuthResult {
-    twoFactor: boolean = false;
-    captchaSiteKey: string = '';
-    resetMasterPassword: boolean = false;
-    forcePasswordReset: boolean = false;
-    twoFactorProviders: Map<TwoFactorProviderType, { [key: string]: string; }> = null;
+  twoFactor: boolean = false;
+  captchaSiteKey: string = "";
+  resetMasterPassword: boolean = false;
+  forcePasswordReset: boolean = false;
+  twoFactorProviders: Map<TwoFactorProviderType, { [key: string]: string }> = null;
 }
diff --git a/jslib/common/src/models/domain/card.ts b/jslib/common/src/models/domain/card.ts
index da703608..62315d63 100644
--- a/jslib/common/src/models/domain/card.ts
+++ b/jslib/common/src/models/domain/card.ts
@@ -1,56 +1,67 @@
-import { CardData } from '../data/cardData';
+import { CardData } from "../data/cardData";
 
-import Domain from './domainBase';
-import { EncString } from './encString';
+import Domain from "./domainBase";
+import { EncString } from "./encString";
 
-import { CardView } from '../view/cardView';
-import { SymmetricCryptoKey } from './symmetricCryptoKey';
+import { CardView } from "../view/cardView";
+import { SymmetricCryptoKey } from "./symmetricCryptoKey";
 
 export class Card extends Domain {
-    cardholderName: EncString;
-    brand: EncString;
-    number: EncString;
-    expMonth: EncString;
-    expYear: EncString;
-    code: EncString;
+  cardholderName: EncString;
+  brand: EncString;
+  number: EncString;
+  expMonth: EncString;
+  expYear: EncString;
+  code: EncString;
 
-    constructor(obj?: CardData, alreadyEncrypted: boolean = false) {
-        super();
-        if (obj == null) {
-            return;
-        }
-
-        this.buildDomainModel(this, obj, {
-            cardholderName: null,
-            brand: null,
-            number: null,
-            expMonth: null,
-            expYear: null,
-            code: null,
-        }, alreadyEncrypted, []);
+  constructor(obj?: CardData, alreadyEncrypted: boolean = false) {
+    super();
+    if (obj == null) {
+      return;
     }
 
-    decrypt(orgId: string, encKey?: SymmetricCryptoKey): Promise<CardView> {
-        return this.decryptObj(new CardView(this), {
-            cardholderName: null,
-            brand: null,
-            number: null,
-            expMonth: null,
-            expYear: null,
-            code: null,
-        }, orgId, encKey);
-    }
+    this.buildDomainModel(
+      this,
+      obj,
+      {
+        cardholderName: null,
+        brand: null,
+        number: null,
+        expMonth: null,
+        expYear: null,
+        code: null,
+      },
+      alreadyEncrypted,
+      []
+    );
+  }
 
-    toCardData(): CardData {
-        const c = new CardData();
-        this.buildDataModel(this, c, {
-            cardholderName: null,
-            brand: null,
-            number: null,
-            expMonth: null,
-            expYear: null,
-            code: null,
-        });
-        return c;
-    }
+  decrypt(orgId: string, encKey?: SymmetricCryptoKey): Promise<CardView> {
+    return this.decryptObj(
+      new CardView(this),
+      {
+        cardholderName: null,
+        brand: null,
+        number: null,
+        expMonth: null,
+        expYear: null,
+        code: null,
+      },
+      orgId,
+      encKey
+    );
+  }
+
+  toCardData(): CardData {
+    const c = new CardData();
+    this.buildDataModel(this, c, {
+      cardholderName: null,
+      brand: null,
+      number: null,
+      expMonth: null,
+      expYear: null,
+      code: null,
+    });
+    return c;
+  }
 }
diff --git a/jslib/common/src/models/domain/cipher.ts b/jslib/common/src/models/domain/cipher.ts
index 1eeb0387..14a7a14a 100644
--- a/jslib/common/src/models/domain/cipher.ts
+++ b/jslib/common/src/models/domain/cipher.ts
@@ -1,224 +1,241 @@
-import { CipherRepromptType } from '../../enums/cipherRepromptType';
-import { CipherType } from '../../enums/cipherType';
+import { CipherRepromptType } from "../../enums/cipherRepromptType";
+import { CipherType } from "../../enums/cipherType";
 
-import { CipherData } from '../data/cipherData';
+import { CipherData } from "../data/cipherData";
 
-import { CipherView } from '../view/cipherView';
+import { CipherView } from "../view/cipherView";
 
-import { Attachment } from './attachment';
-import { Card } from './card';
-import Domain from './domainBase';
-import { EncString } from './encString';
-import { Field } from './field';
-import { Identity } from './identity';
-import { Login } from './login';
-import { Password } from './password';
-import { SecureNote } from './secureNote';
-import { SymmetricCryptoKey } from './symmetricCryptoKey';
+import { Attachment } from "./attachment";
+import { Card } from "./card";
+import Domain from "./domainBase";
+import { EncString } from "./encString";
+import { Field } from "./field";
+import { Identity } from "./identity";
+import { Login } from "./login";
+import { Password } from "./password";
+import { SecureNote } from "./secureNote";
+import { SymmetricCryptoKey } from "./symmetricCryptoKey";
 
 export class Cipher extends Domain {
-    id: string;
-    organizationId: string;
-    folderId: string;
-    name: EncString;
-    notes: EncString;
-    type: CipherType;
-    favorite: boolean;
-    organizationUseTotp: boolean;
-    edit: boolean;
-    viewPassword: boolean;
-    revisionDate: Date;
-    localData: any;
-    login: Login;
-    identity: Identity;
-    card: Card;
-    secureNote: SecureNote;
-    attachments: Attachment[];
-    fields: Field[];
-    passwordHistory: Password[];
-    collectionIds: string[];
-    deletedDate: Date;
-    reprompt: CipherRepromptType;
-
-    constructor(obj?: CipherData, alreadyEncrypted: boolean = false, localData: any = null) {
-        super();
-        if (obj == null) {
-            return;
-        }
-
-        this.buildDomainModel(this, obj, {
-            id: null,
-            userId: null,
-            organizationId: null,
-            folderId: null,
-            name: null,
-            notes: null,
-        }, alreadyEncrypted, ['id', 'userId', 'organizationId', 'folderId']);
-
-        this.type = obj.type;
-        this.favorite = obj.favorite;
-        this.organizationUseTotp = obj.organizationUseTotp;
-        this.edit = obj.edit;
-        if (obj.viewPassword != null) {
-            this.viewPassword = obj.viewPassword;
-        } else {
-            this.viewPassword = true; // Default for already synced Ciphers without viewPassword
-        }
-        this.revisionDate = obj.revisionDate != null ? new Date(obj.revisionDate) : null;
-        this.collectionIds = obj.collectionIds;
-        this.localData = localData;
-        this.deletedDate = obj.deletedDate != null ? new Date(obj.deletedDate) : null;
-        this.reprompt = obj.reprompt;
-
-        switch (this.type) {
-            case CipherType.Login:
-                this.login = new Login(obj.login, alreadyEncrypted);
-                break;
-            case CipherType.SecureNote:
-                this.secureNote = new SecureNote(obj.secureNote, alreadyEncrypted);
-                break;
-            case CipherType.Card:
-                this.card = new Card(obj.card, alreadyEncrypted);
-                break;
-            case CipherType.Identity:
-                this.identity = new Identity(obj.identity, alreadyEncrypted);
-                break;
-            default:
-                break;
-        }
-
-        if (obj.attachments != null) {
-            this.attachments = obj.attachments.map(a => new Attachment(a, alreadyEncrypted));
-        } else {
-            this.attachments = null;
-        }
-
-        if (obj.fields != null) {
-            this.fields = obj.fields.map(f => new Field(f, alreadyEncrypted));
-        } else {
-            this.fields = null;
-        }
-
-        if (obj.passwordHistory != null) {
-            this.passwordHistory = obj.passwordHistory.map(ph => new Password(ph, alreadyEncrypted));
-        } else {
-            this.passwordHistory = null;
-        }
+  id: string;
+  organizationId: string;
+  folderId: string;
+  name: EncString;
+  notes: EncString;
+  type: CipherType;
+  favorite: boolean;
+  organizationUseTotp: boolean;
+  edit: boolean;
+  viewPassword: boolean;
+  revisionDate: Date;
+  localData: any;
+  login: Login;
+  identity: Identity;
+  card: Card;
+  secureNote: SecureNote;
+  attachments: Attachment[];
+  fields: Field[];
+  passwordHistory: Password[];
+  collectionIds: string[];
+  deletedDate: Date;
+  reprompt: CipherRepromptType;
+
+  constructor(obj?: CipherData, alreadyEncrypted: boolean = false, localData: any = null) {
+    super();
+    if (obj == null) {
+      return;
     }
 
-    async decrypt(encKey?: SymmetricCryptoKey): Promise<CipherView> {
-        const model = new CipherView(this);
-
-        await this.decryptObj(model, {
-            name: null,
-            notes: null,
-        }, this.organizationId, encKey);
-
-        switch (this.type) {
-            case CipherType.Login:
-                model.login = await this.login.decrypt(this.organizationId, encKey);
-                break;
-            case CipherType.SecureNote:
-                model.secureNote = await this.secureNote.decrypt(this.organizationId, encKey);
-                break;
-            case CipherType.Card:
-                model.card = await this.card.decrypt(this.organizationId, encKey);
-                break;
-            case CipherType.Identity:
-                model.identity = await this.identity.decrypt(this.organizationId, encKey);
-                break;
-            default:
-                break;
-        }
-
-        const orgId = this.organizationId;
-
-        if (this.attachments != null && this.attachments.length > 0) {
-            const attachments: any[] = [];
-            await this.attachments.reduce((promise, attachment) => {
-                return promise.then(() => {
-                    return attachment.decrypt(orgId, encKey);
-                }).then(decAttachment => {
-                    attachments.push(decAttachment);
-                });
-            }, Promise.resolve());
-            model.attachments = attachments;
-        }
-
-        if (this.fields != null && this.fields.length > 0) {
-            const fields: any[] = [];
-            await this.fields.reduce((promise, field) => {
-                return promise.then(() => {
-                    return field.decrypt(orgId, encKey);
-                }).then(decField => {
-                    fields.push(decField);
-                });
-            }, Promise.resolve());
-            model.fields = fields;
-        }
-
-        if (this.passwordHistory != null && this.passwordHistory.length > 0) {
-            const passwordHistory: any[] = [];
-            await this.passwordHistory.reduce((promise, ph) => {
-                return promise.then(() => {
-                    return ph.decrypt(orgId, encKey);
-                }).then(decPh => {
-                    passwordHistory.push(decPh);
-                });
-            }, Promise.resolve());
-            model.passwordHistory = passwordHistory;
-        }
-
-        return model;
+    this.buildDomainModel(
+      this,
+      obj,
+      {
+        id: null,
+        userId: null,
+        organizationId: null,
+        folderId: null,
+        name: null,
+        notes: null,
+      },
+      alreadyEncrypted,
+      ["id", "userId", "organizationId", "folderId"]
+    );
+
+    this.type = obj.type;
+    this.favorite = obj.favorite;
+    this.organizationUseTotp = obj.organizationUseTotp;
+    this.edit = obj.edit;
+    if (obj.viewPassword != null) {
+      this.viewPassword = obj.viewPassword;
+    } else {
+      this.viewPassword = true; // Default for already synced Ciphers without viewPassword
+    }
+    this.revisionDate = obj.revisionDate != null ? new Date(obj.revisionDate) : null;
+    this.collectionIds = obj.collectionIds;
+    this.localData = localData;
+    this.deletedDate = obj.deletedDate != null ? new Date(obj.deletedDate) : null;
+    this.reprompt = obj.reprompt;
+
+    switch (this.type) {
+      case CipherType.Login:
+        this.login = new Login(obj.login, alreadyEncrypted);
+        break;
+      case CipherType.SecureNote:
+        this.secureNote = new SecureNote(obj.secureNote, alreadyEncrypted);
+        break;
+      case CipherType.Card:
+        this.card = new Card(obj.card, alreadyEncrypted);
+        break;
+      case CipherType.Identity:
+        this.identity = new Identity(obj.identity, alreadyEncrypted);
+        break;
+      default:
+        break;
+    }
+
+    if (obj.attachments != null) {
+      this.attachments = obj.attachments.map((a) => new Attachment(a, alreadyEncrypted));
+    } else {
+      this.attachments = null;
+    }
+
+    if (obj.fields != null) {
+      this.fields = obj.fields.map((f) => new Field(f, alreadyEncrypted));
+    } else {
+      this.fields = null;
+    }
+
+    if (obj.passwordHistory != null) {
+      this.passwordHistory = obj.passwordHistory.map((ph) => new Password(ph, alreadyEncrypted));
+    } else {
+      this.passwordHistory = null;
+    }
+  }
+
+  async decrypt(encKey?: SymmetricCryptoKey): Promise<CipherView> {
+    const model = new CipherView(this);
+
+    await this.decryptObj(
+      model,
+      {
+        name: null,
+        notes: null,
+      },
+      this.organizationId,
+      encKey
+    );
+
+    switch (this.type) {
+      case CipherType.Login:
+        model.login = await this.login.decrypt(this.organizationId, encKey);
+        break;
+      case CipherType.SecureNote:
+        model.secureNote = await this.secureNote.decrypt(this.organizationId, encKey);
+        break;
+      case CipherType.Card:
+        model.card = await this.card.decrypt(this.organizationId, encKey);
+        break;
+      case CipherType.Identity:
+        model.identity = await this.identity.decrypt(this.organizationId, encKey);
+        break;
+      default:
+        break;
+    }
+
+    const orgId = this.organizationId;
+
+    if (this.attachments != null && this.attachments.length > 0) {
+      const attachments: any[] = [];
+      await this.attachments.reduce((promise, attachment) => {
+        return promise
+          .then(() => {
+            return attachment.decrypt(orgId, encKey);
+          })
+          .then((decAttachment) => {
+            attachments.push(decAttachment);
+          });
+      }, Promise.resolve());
+      model.attachments = attachments;
+    }
+
+    if (this.fields != null && this.fields.length > 0) {
+      const fields: any[] = [];
+      await this.fields.reduce((promise, field) => {
+        return promise
+          .then(() => {
+            return field.decrypt(orgId, encKey);
+          })
+          .then((decField) => {
+            fields.push(decField);
+          });
+      }, Promise.resolve());
+      model.fields = fields;
+    }
+
+    if (this.passwordHistory != null && this.passwordHistory.length > 0) {
+      const passwordHistory: any[] = [];
+      await this.passwordHistory.reduce((promise, ph) => {
+        return promise
+          .then(() => {
+            return ph.decrypt(orgId, encKey);
+          })
+          .then((decPh) => {
+            passwordHistory.push(decPh);
+          });
+      }, Promise.resolve());
+      model.passwordHistory = passwordHistory;
     }
 
-    toCipherData(userId: string): CipherData {
-        const c = new CipherData();
-        c.id = this.id;
-        c.organizationId = this.organizationId;
-        c.folderId = this.folderId;
-        c.userId = this.organizationId != null ? userId : null;
-        c.edit = this.edit;
-        c.viewPassword = this.viewPassword;
-        c.organizationUseTotp = this.organizationUseTotp;
-        c.favorite = this.favorite;
-        c.revisionDate = this.revisionDate != null ? this.revisionDate.toISOString() : null;
-        c.type = this.type;
-        c.collectionIds = this.collectionIds;
-        c.deletedDate = this.deletedDate != null ? this.deletedDate.toISOString() : null;
-        c.reprompt = this.reprompt;
-
-        this.buildDataModel(this, c, {
-            name: null,
-            notes: null,
-        });
-
-        switch (c.type) {
-            case CipherType.Login:
-                c.login = this.login.toLoginData();
-                break;
-            case CipherType.SecureNote:
-                c.secureNote = this.secureNote.toSecureNoteData();
-                break;
-            case CipherType.Card:
-                c.card = this.card.toCardData();
-                break;
-            case CipherType.Identity:
-                c.identity = this.identity.toIdentityData();
-                break;
-            default:
-                break;
-        }
-
-        if (this.fields != null) {
-            c.fields = this.fields.map(f => f.toFieldData());
-        }
-        if (this.attachments != null) {
-            c.attachments = this.attachments.map(a => a.toAttachmentData());
-        }
-        if (this.passwordHistory != null) {
-            c.passwordHistory = this.passwordHistory.map(ph => ph.toPasswordHistoryData());
-        }
-        return c;
+    return model;
+  }
+
+  toCipherData(userId: string): CipherData {
+    const c = new CipherData();
+    c.id = this.id;
+    c.organizationId = this.organizationId;
+    c.folderId = this.folderId;
+    c.userId = this.organizationId != null ? userId : null;
+    c.edit = this.edit;
+    c.viewPassword = this.viewPassword;
+    c.organizationUseTotp = this.organizationUseTotp;
+    c.favorite = this.favorite;
+    c.revisionDate = this.revisionDate != null ? this.revisionDate.toISOString() : null;
+    c.type = this.type;
+    c.collectionIds = this.collectionIds;
+    c.deletedDate = this.deletedDate != null ? this.deletedDate.toISOString() : null;
+    c.reprompt = this.reprompt;
+
+    this.buildDataModel(this, c, {
+      name: null,
+      notes: null,
+    });
+
+    switch (c.type) {
+      case CipherType.Login:
+        c.login = this.login.toLoginData();
+        break;
+      case CipherType.SecureNote:
+        c.secureNote = this.secureNote.toSecureNoteData();
+        break;
+      case CipherType.Card:
+        c.card = this.card.toCardData();
+        break;
+      case CipherType.Identity:
+        c.identity = this.identity.toIdentityData();
+        break;
+      default:
+        break;
+    }
+
+    if (this.fields != null) {
+      c.fields = this.fields.map((f) => f.toFieldData());
+    }
+    if (this.attachments != null) {
+      c.attachments = this.attachments.map((a) => a.toAttachmentData());
+    }
+    if (this.passwordHistory != null) {
+      c.passwordHistory = this.passwordHistory.map((ph) => ph.toPasswordHistoryData());
     }
+    return c;
+  }
 }
diff --git a/jslib/common/src/models/domain/collection.ts b/jslib/common/src/models/domain/collection.ts
index 35a014ad..b08ecd0f 100644
--- a/jslib/common/src/models/domain/collection.ts
+++ b/jslib/common/src/models/domain/collection.ts
@@ -1,37 +1,47 @@
-import { CollectionData } from '../data/collectionData';
+import { CollectionData } from "../data/collectionData";
 
-import { CollectionView } from '../view/collectionView';
+import { CollectionView } from "../view/collectionView";
 
-import Domain from './domainBase';
-import { EncString } from './encString';
+import Domain from "./domainBase";
+import { EncString } from "./encString";
 
 export class Collection extends Domain {
-    id: string;
-    organizationId: string;
-    name: EncString;
-    externalId: string;
-    readOnly: boolean;
-    hidePasswords: boolean;
+  id: string;
+  organizationId: string;
+  name: EncString;
+  externalId: string;
+  readOnly: boolean;
+  hidePasswords: boolean;
 
-    constructor(obj?: CollectionData, alreadyEncrypted: boolean = false) {
-        super();
-        if (obj == null) {
-            return;
-        }
-
-        this.buildDomainModel(this, obj, {
-            id: null,
-            organizationId: null,
-            name: null,
-            externalId: null,
-            readOnly: null,
-            hidePasswords: null,
-        }, alreadyEncrypted, ['id', 'organizationId', 'externalId', 'readOnly', 'hidePasswords']);
+  constructor(obj?: CollectionData, alreadyEncrypted: boolean = false) {
+    super();
+    if (obj == null) {
+      return;
     }
 
-    decrypt(): Promise<CollectionView> {
-        return this.decryptObj(new CollectionView(this), {
-            name: null,
-        }, this.organizationId);
-    }
+    this.buildDomainModel(
+      this,
+      obj,
+      {
+        id: null,
+        organizationId: null,
+        name: null,
+        externalId: null,
+        readOnly: null,
+        hidePasswords: null,
+      },
+      alreadyEncrypted,
+      ["id", "organizationId", "externalId", "readOnly", "hidePasswords"]
+    );
+  }
+
+  decrypt(): Promise<CollectionView> {
+    return this.decryptObj(
+      new CollectionView(this),
+      {
+        name: null,
+      },
+      this.organizationId
+    );
+  }
 }
diff --git a/jslib/common/src/models/domain/decryptParameters.ts b/jslib/common/src/models/domain/decryptParameters.ts
index 1274e88d..09a4c1d8 100644
--- a/jslib/common/src/models/domain/decryptParameters.ts
+++ b/jslib/common/src/models/domain/decryptParameters.ts
@@ -1,8 +1,8 @@
 export class DecryptParameters<T> {
-    encKey: T;
-    data: T;
-    iv: T;
-    macKey: T;
-    mac: T;
-    macData: T;
+  encKey: T;
+  data: T;
+  iv: T;
+  macKey: T;
+  mac: T;
+  macData: T;
 }
diff --git a/jslib/common/src/models/domain/domainBase.ts b/jslib/common/src/models/domain/domainBase.ts
index dbf90243..a8c09abe 100644
--- a/jslib/common/src/models/domain/domainBase.ts
+++ b/jslib/common/src/models/domain/domainBase.ts
@@ -1,66 +1,82 @@
-import { EncString } from './encString';
+import { EncString } from "./encString";
 
-import { View } from '../view/view';
+import { View } from "../view/view";
 
-import { SymmetricCryptoKey } from './symmetricCryptoKey';
+import { SymmetricCryptoKey } from "./symmetricCryptoKey";
 
 export default class Domain {
-    protected buildDomainModel<D extends Domain>(domain: D, dataObj: any, map: any,
-        alreadyEncrypted: boolean, notEncList: any[] = []) {
-        for (const prop in map) {
-            if (!map.hasOwnProperty(prop)) {
-                continue;
-            }
+  protected buildDomainModel<D extends Domain>(
+    domain: D,
+    dataObj: any,
+    map: any,
+    alreadyEncrypted: boolean,
+    notEncList: any[] = []
+  ) {
+    for (const prop in map) {
+      if (!map.hasOwnProperty(prop)) {
+        continue;
+      }
 
-            const objProp = dataObj[(map[prop] || prop)];
-            if (alreadyEncrypted === true || notEncList.indexOf(prop) > -1) {
-                (domain as any)[prop] = objProp ? objProp : null;
-            } else {
-                (domain as any)[prop] = objProp ? new EncString(objProp) : null;
-            }
-        }
+      const objProp = dataObj[map[prop] || prop];
+      if (alreadyEncrypted === true || notEncList.indexOf(prop) > -1) {
+        (domain as any)[prop] = objProp ? objProp : null;
+      } else {
+        (domain as any)[prop] = objProp ? new EncString(objProp) : null;
+      }
     }
-    protected buildDataModel<D extends Domain>(domain: D, dataObj: any, map: any, notEncStringList: any[] = []) {
-        for (const prop in map) {
-            if (!map.hasOwnProperty(prop)) {
-                continue;
-            }
+  }
+  protected buildDataModel<D extends Domain>(
+    domain: D,
+    dataObj: any,
+    map: any,
+    notEncStringList: any[] = []
+  ) {
+    for (const prop in map) {
+      if (!map.hasOwnProperty(prop)) {
+        continue;
+      }
 
-            const objProp = (domain as any)[(map[prop] || prop)];
-            if (notEncStringList.indexOf(prop) > -1) {
-                (dataObj as any)[prop] = objProp != null ? objProp : null;
-            } else {
-                (dataObj as any)[prop] = objProp != null ? (objProp as EncString).encryptedString : null;
-            }
-        }
+      const objProp = (domain as any)[map[prop] || prop];
+      if (notEncStringList.indexOf(prop) > -1) {
+        (dataObj as any)[prop] = objProp != null ? objProp : null;
+      } else {
+        (dataObj as any)[prop] = objProp != null ? (objProp as EncString).encryptedString : null;
+      }
     }
+  }
 
-    protected async decryptObj<T extends View>(viewModel: T, map: any, orgId: string,
-        key: SymmetricCryptoKey = null): Promise<T> {
-        const promises = [];
-        const self: any = this;
+  protected async decryptObj<T extends View>(
+    viewModel: T,
+    map: any,
+    orgId: string,
+    key: SymmetricCryptoKey = null
+  ): Promise<T> {
+    const promises = [];
+    const self: any = this;
 
-        for (const prop in map) {
-            if (!map.hasOwnProperty(prop)) {
-                continue;
-            }
-
-            // tslint:disable-next-line
-            (function (theProp) {
-                const p = Promise.resolve().then(() => {
-                    const mapProp = map[theProp] || theProp;
-                    if (self[mapProp]) {
-                        return self[mapProp].decrypt(orgId, key);
-                    }
-                    return null;
-                }).then((val: any) => {
-                    (viewModel as any)[theProp] = val;
-                });
-                promises.push(p);
-            })(prop);
-        }
+    for (const prop in map) {
+      if (!map.hasOwnProperty(prop)) {
+        continue;
+      }
 
-        await Promise.all(promises);
-        return viewModel;
+      // tslint:disable-next-line
+      (function (theProp) {
+        const p = Promise.resolve()
+          .then(() => {
+            const mapProp = map[theProp] || theProp;
+            if (self[mapProp]) {
+              return self[mapProp].decrypt(orgId, key);
+            }
+            return null;
+          })
+          .then((val: any) => {
+            (viewModel as any)[theProp] = val;
+          });
+        promises.push(p);
+      })(prop);
     }
+
+    await Promise.all(promises);
+    return viewModel;
+  }
 }
diff --git a/jslib/common/src/models/domain/encArrayBuffer.ts b/jslib/common/src/models/domain/encArrayBuffer.ts
index abc16917..97f47c39 100644
--- a/jslib/common/src/models/domain/encArrayBuffer.ts
+++ b/jslib/common/src/models/domain/encArrayBuffer.ts
@@ -1,3 +1,3 @@
 export class EncArrayBuffer {
-    constructor(public buffer: ArrayBuffer) { }
+  constructor(public buffer: ArrayBuffer) {}
 }
diff --git a/jslib/common/src/models/domain/encString.ts b/jslib/common/src/models/domain/encString.ts
index 58811e23..9ce1c394 100644
--- a/jslib/common/src/models/domain/encString.ts
+++ b/jslib/common/src/models/domain/encString.ts
@@ -1,117 +1,124 @@
-import { EncryptionType } from '../../enums/encryptionType';
+import { EncryptionType } from "../../enums/encryptionType";
 
-import { CryptoService } from '../../abstractions/crypto.service';
+import { CryptoService } from "../../abstractions/crypto.service";
 
-import { Utils } from '../../misc/utils';
+import { Utils } from "../../misc/utils";
 
-import { SymmetricCryptoKey } from './symmetricCryptoKey';
+import { SymmetricCryptoKey } from "./symmetricCryptoKey";
 
 export class EncString {
-    encryptedString?: string;
-    encryptionType?: EncryptionType;
-    decryptedValue?: string;
-    data?: string;
-    iv?: string;
-    mac?: string;
-
-    constructor(encryptedStringOrType: string | EncryptionType, data?: string, iv?: string, mac?: string) {
-        if (data != null) {
-            // data and header
-            const encType = encryptedStringOrType as EncryptionType;
-
-            if (iv != null) {
-                this.encryptedString = encType + '.' + iv + '|' + data;
-            } else {
-                this.encryptedString = encType + '.' + data;
-            }
-
-            // mac
-            if (mac != null) {
-                this.encryptedString += ('|' + mac);
-            }
-
-            this.encryptionType = encType;
-            this.data = data;
-            this.iv = iv;
-            this.mac = mac;
-
-            return;
-        }
+  encryptedString?: string;
+  encryptionType?: EncryptionType;
+  decryptedValue?: string;
+  data?: string;
+  iv?: string;
+  mac?: string;
+
+  constructor(
+    encryptedStringOrType: string | EncryptionType,
+    data?: string,
+    iv?: string,
+    mac?: string
+  ) {
+    if (data != null) {
+      // data and header
+      const encType = encryptedStringOrType as EncryptionType;
+
+      if (iv != null) {
+        this.encryptedString = encType + "." + iv + "|" + data;
+      } else {
+        this.encryptedString = encType + "." + data;
+      }
+
+      // mac
+      if (mac != null) {
+        this.encryptedString += "|" + mac;
+      }
+
+      this.encryptionType = encType;
+      this.data = data;
+      this.iv = iv;
+      this.mac = mac;
+
+      return;
+    }
+
+    this.encryptedString = encryptedStringOrType as string;
+    if (!this.encryptedString) {
+      return;
+    }
+
+    const headerPieces = this.encryptedString.split(".");
+    let encPieces: string[] = null;
+
+    if (headerPieces.length === 2) {
+      try {
+        this.encryptionType = parseInt(headerPieces[0], null);
+        encPieces = headerPieces[1].split("|");
+      } catch (e) {
+        return;
+      }
+    } else {
+      encPieces = this.encryptedString.split("|");
+      this.encryptionType =
+        encPieces.length === 3
+          ? EncryptionType.AesCbc128_HmacSha256_B64
+          : EncryptionType.AesCbc256_B64;
+    }
 
-        this.encryptedString = encryptedStringOrType as string;
-        if (!this.encryptedString) {
-            return;
+    switch (this.encryptionType) {
+      case EncryptionType.AesCbc128_HmacSha256_B64:
+      case EncryptionType.AesCbc256_HmacSha256_B64:
+        if (encPieces.length !== 3) {
+          return;
         }
 
-        const headerPieces = this.encryptedString.split('.');
-        let encPieces: string[] = null;
-
-        if (headerPieces.length === 2) {
-            try {
-                this.encryptionType = parseInt(headerPieces[0], null);
-                encPieces = headerPieces[1].split('|');
-            } catch (e) {
-                return;
-            }
-        } else {
-            encPieces = this.encryptedString.split('|');
-            this.encryptionType = encPieces.length === 3 ? EncryptionType.AesCbc128_HmacSha256_B64 :
-                EncryptionType.AesCbc256_B64;
+        this.iv = encPieces[0];
+        this.data = encPieces[1];
+        this.mac = encPieces[2];
+        break;
+      case EncryptionType.AesCbc256_B64:
+        if (encPieces.length !== 2) {
+          return;
         }
 
-        switch (this.encryptionType) {
-            case EncryptionType.AesCbc128_HmacSha256_B64:
-            case EncryptionType.AesCbc256_HmacSha256_B64:
-                if (encPieces.length !== 3) {
-                    return;
-                }
-
-                this.iv = encPieces[0];
-                this.data = encPieces[1];
-                this.mac = encPieces[2];
-                break;
-            case EncryptionType.AesCbc256_B64:
-                if (encPieces.length !== 2) {
-                    return;
-                }
-
-                this.iv = encPieces[0];
-                this.data = encPieces[1];
-                break;
-            case EncryptionType.Rsa2048_OaepSha256_B64:
-            case EncryptionType.Rsa2048_OaepSha1_B64:
-                if (encPieces.length !== 1) {
-                    return;
-                }
-
-                this.data = encPieces[0];
-                break;
-            default:
-                return;
+        this.iv = encPieces[0];
+        this.data = encPieces[1];
+        break;
+      case EncryptionType.Rsa2048_OaepSha256_B64:
+      case EncryptionType.Rsa2048_OaepSha1_B64:
+        if (encPieces.length !== 1) {
+          return;
         }
+
+        this.data = encPieces[0];
+        break;
+      default:
+        return;
     }
+  }
 
-    async decrypt(orgId: string, key: SymmetricCryptoKey = null): Promise<string> {
-        if (this.decryptedValue != null) {
-            return this.decryptedValue;
-        }
+  async decrypt(orgId: string, key: SymmetricCryptoKey = null): Promise<string> {
+    if (this.decryptedValue != null) {
+      return this.decryptedValue;
+    }
 
-        let cryptoService: CryptoService;
-        const containerService = (Utils.global as any).bitwardenContainerService;
-        if (containerService) {
-            cryptoService = containerService.getCryptoService();
-        } else {
-            throw new Error('global bitwardenContainerService not initialized.');
-        }
+    let cryptoService: CryptoService;
+    const containerService = (Utils.global as any).bitwardenContainerService;
+    if (containerService) {
+      cryptoService = containerService.getCryptoService();
+    } else {
+      throw new Error("global bitwardenContainerService not initialized.");
+    }
 
-        try {
-            if (key == null) {
-                key = await cryptoService.getOrgKey(orgId);
-            }
-            this.decryptedValue = await cryptoService.decryptToUtf8(this, key);
-        } catch (e) {
-            this.decryptedValue = '[error: cannot decrypt]';
-        }
-        return this.decryptedValue;
+    try {
+      if (key == null) {
+        key = await cryptoService.getOrgKey(orgId);
+      }
+      this.decryptedValue = await cryptoService.decryptToUtf8(this, key);
+    } catch (e) {
+      this.decryptedValue = "[error: cannot decrypt]";
     }
+    return this.decryptedValue;
+  }
 }
diff --git a/jslib/common/src/models/domain/encryptedObject.ts b/jslib/common/src/models/domain/encryptedObject.ts
index f21fe300..5ce93dbe 100644
--- a/jslib/common/src/models/domain/encryptedObject.ts
+++ b/jslib/common/src/models/domain/encryptedObject.ts
@@ -1,8 +1,8 @@
-import { SymmetricCryptoKey } from './symmetricCryptoKey';
+import { SymmetricCryptoKey } from "./symmetricCryptoKey";
 
 export class EncryptedObject {
-    iv: ArrayBuffer;
-    data: ArrayBuffer;
-    mac: ArrayBuffer;
-    key: SymmetricCryptoKey;
+  iv: ArrayBuffer;
+  data: ArrayBuffer;
+  mac: ArrayBuffer;
+  key: SymmetricCryptoKey;
 }
diff --git a/jslib/common/src/models/domain/environmentUrls.ts b/jslib/common/src/models/domain/environmentUrls.ts
index 2241bd0a..d4fd173c 100644
--- a/jslib/common/src/models/domain/environmentUrls.ts
+++ b/jslib/common/src/models/domain/environmentUrls.ts
@@ -1,6 +1,10 @@
 export class EnvironmentUrls {
-    base: string;
-    api: string;
-    identity: string;
-    events: string;
+  base: string = null;
+  api: string = null;
+  identity: string = null;
+  icons: string = null;
+  notifications: string = null;
+  events: string = null;
+  webVault: string = null;
+  keyConnector: string = null;
 }
diff --git a/jslib/common/src/models/domain/field.ts b/jslib/common/src/models/domain/field.ts
index 7174797d..0aaf2a31 100644
--- a/jslib/common/src/models/domain/field.ts
+++ b/jslib/common/src/models/domain/field.ts
@@ -1,49 +1,65 @@
-import { FieldType } from '../../enums/fieldType';
-import { LinkedIdType } from '../../enums/linkedIdType';
+import { FieldType } from "../../enums/fieldType";
+import { LinkedIdType } from "../../enums/linkedIdType";
 
-import { FieldData } from '../data/fieldData';
+import { FieldData } from "../data/fieldData";
 
-import Domain from './domainBase';
-import { EncString } from './encString';
+import Domain from "./domainBase";
+import { EncString } from "./encString";
 
-import { FieldView } from '../view/fieldView';
-import { SymmetricCryptoKey } from './symmetricCryptoKey';
+import { FieldView } from "../view/fieldView";
+import { SymmetricCryptoKey } from "./symmetricCryptoKey";
 
 export class Field extends Domain {
-    name: EncString;
-    value: EncString;
-    type: FieldType;
-    linkedId: LinkedIdType;
-
-    constructor(obj?: FieldData, alreadyEncrypted: boolean = false) {
-        super();
-        if (obj == null) {
-            return;
-        }
-
-        this.type = obj.type;
-        this.linkedId = obj.linkedId;
-        this.buildDomainModel(this, obj, {
-            name: null,
-            value: null,
-        }, alreadyEncrypted, []);
-    }
+  name: EncString;
+  value: EncString;
+  type: FieldType;
+  linkedId: LinkedIdType;
 
-    decrypt(orgId: string, encKey?: SymmetricCryptoKey): Promise<FieldView> {
-        return this.decryptObj(new FieldView(this), {
-            name: null,
-            value: null,
-        }, orgId, encKey);
+  constructor(obj?: FieldData, alreadyEncrypted: boolean = false) {
+    super();
+    if (obj == null) {
+      return;
     }
 
-    toFieldData(): FieldData {
-        const f = new FieldData();
-        this.buildDataModel(this, f, {
-            name: null,
-            value: null,
-            type: null,
-            linkedId: null,
-        }, ['type', 'linkedId']);
-        return f;
-    }
+    this.type = obj.type;
+    this.linkedId = obj.linkedId;
+    this.buildDomainModel(
+      this,
+      obj,
+      {
+        name: null,
+        value: null,
+      },
+      alreadyEncrypted,
+      []
+    );
+  }
+
+  decrypt(orgId: string, encKey?: SymmetricCryptoKey): Promise<FieldView> {
+    return this.decryptObj(
+      new FieldView(this),
+      {
+        name: null,
+        value: null,
+      },
+      orgId,
+      encKey
+    );
+  }
+
+  toFieldData(): FieldData {
+    const f = new FieldData();
+    this.buildDataModel(
+      this,
+      f,
+      {
+        name: null,
+        value: null,
+        type: null,
+        linkedId: null,
+      },
+      ["type", "linkedId"]
+    );
+    return f;
+  }
 }
diff --git a/jslib/common/src/models/domain/folder.ts b/jslib/common/src/models/domain/folder.ts
index 7f267c07..4e4a08f2 100644
--- a/jslib/common/src/models/domain/folder.ts
+++ b/jslib/common/src/models/domain/folder.ts
@@ -1,32 +1,42 @@
-import { FolderData } from '../data/folderData';
+import { FolderData } from "../data/folderData";
 
-import { FolderView } from '../view/folderView';
+import { FolderView } from "../view/folderView";
 
-import Domain from './domainBase';
-import { EncString } from './encString';
+import Domain from "./domainBase";
+import { EncString } from "./encString";
 
 export class Folder extends Domain {
-    id: string;
-    name: EncString;
-    revisionDate: Date;
+  id: string;
+  name: EncString;
+  revisionDate: Date;
 
-    constructor(obj?: FolderData, alreadyEncrypted: boolean = false) {
-        super();
-        if (obj == null) {
-            return;
-        }
+  constructor(obj?: FolderData, alreadyEncrypted: boolean = false) {
+    super();
+    if (obj == null) {
+      return;
+    }
 
-        this.buildDomainModel(this, obj, {
-            id: null,
-            name: null,
-        }, alreadyEncrypted, ['id']);
+    this.buildDomainModel(
+      this,
+      obj,
+      {
+        id: null,
+        name: null,
+      },
+      alreadyEncrypted,
+      ["id"]
+    );
 
-        this.revisionDate = obj.revisionDate != null ? new Date(obj.revisionDate) : null;
-    }
+    this.revisionDate = obj.revisionDate != null ? new Date(obj.revisionDate) : null;
+  }
 
-    decrypt(): Promise<FolderView> {
-        return this.decryptObj(new FolderView(this), {
-            name: null,
-        }, null);
-    }
+  decrypt(): Promise<FolderView> {
+    return this.decryptObj(
+      new FolderView(this),
+      {
+        name: null,
+      },
+      null
+    );
+  }
 }
diff --git a/jslib/common/src/models/domain/generatedPasswordHistory.ts b/jslib/common/src/models/domain/generatedPasswordHistory.ts
index 1b082565..b4cc9b22 100644
--- a/jslib/common/src/models/domain/generatedPasswordHistory.ts
+++ b/jslib/common/src/models/domain/generatedPasswordHistory.ts
@@ -1,9 +1,9 @@
 export class GeneratedPasswordHistory {
-    password: string;
-    date: number;
+  password: string;
+  date: number;
 
-    constructor(password: string, date: number) {
-        this.password = password;
-        this.date = date;
-    }
+  constructor(password: string, date: number) {
+    this.password = password;
+    this.date = date;
+  }
 }
diff --git a/jslib/common/src/models/domain/globalState.ts b/jslib/common/src/models/domain/globalState.ts
new file mode 100644
index 00000000..326ba11b
--- /dev/null
+++ b/jslib/common/src/models/domain/globalState.ts
@@ -0,0 +1,40 @@
+import { StateVersion } from "../../enums/stateVersion";
+import { ThemeType } from "../../enums/themeType";
+
+import { EnvironmentUrls } from "./environmentUrls";
+import { WindowState } from "./windowState";
+
+export class GlobalState {
+  enableAlwaysOnTop?: boolean;
+  installedVersion?: string;
+  locale?: string = "en";
+  organizationInvitation?: any;
+  ssoCodeVerifier?: string;
+  ssoOrganizationIdentifier?: string;
+  ssoState?: string;
+  rememberedEmail?: string;
+  theme?: ThemeType = ThemeType.System;
+  window?: WindowState = new WindowState();
+  twoFactorToken?: string;
+  disableFavicon?: boolean;
+  biometricAwaitingAcceptance?: boolean;
+  biometricFingerprintValidated?: boolean;
+  vaultTimeout?: number;
+  vaultTimeoutAction?: string;
+  loginRedirect?: any;
+  mainWindowSize?: number;
+  enableBiometrics?: boolean;
+  biometricText?: string;
+  noAutoPromptBiometrics?: boolean;
+  noAutoPromptBiometricsText?: string;
+  stateVersion: StateVersion = StateVersion.One;
+  environmentUrls: EnvironmentUrls = new EnvironmentUrls();
+  enableTray?: boolean;
+  enableMinimizeToTray?: boolean;
+  enableCloseToTray?: boolean;
+  enableStartToTray?: boolean;
+  openAtLogin?: boolean;
+  alwaysShowDock?: boolean;
+  enableBrowserIntegration?: boolean;
+  enableBrowserIntegrationFingerprint?: boolean;
+}
diff --git a/jslib/common/src/models/domain/identity.ts b/jslib/common/src/models/domain/identity.ts
index df08293c..8584c946 100644
--- a/jslib/common/src/models/domain/identity.ts
+++ b/jslib/common/src/models/domain/identity.ts
@@ -1,104 +1,115 @@
-import { IdentityData } from '../data/identityData';
+import { IdentityData } from "../data/identityData";
 
-import Domain from './domainBase';
-import { EncString } from './encString';
-import { SymmetricCryptoKey } from './symmetricCryptoKey';
+import Domain from "./domainBase";
+import { EncString } from "./encString";
+import { SymmetricCryptoKey } from "./symmetricCryptoKey";
 
-import { IdentityView } from '../view/identityView';
+import { IdentityView } from "../view/identityView";
 
 export class Identity extends Domain {
-    title: EncString;
-    firstName: EncString;
-    middleName: EncString;
-    lastName: EncString;
-    address1: EncString;
-    address2: EncString;
-    address3: EncString;
-    city: EncString;
-    state: EncString;
-    postalCode: EncString;
-    country: EncString;
-    company: EncString;
-    email: EncString;
-    phone: EncString;
-    ssn: EncString;
-    username: EncString;
-    passportNumber: EncString;
-    licenseNumber: EncString;
+  title: EncString;
+  firstName: EncString;
+  middleName: EncString;
+  lastName: EncString;
+  address1: EncString;
+  address2: EncString;
+  address3: EncString;
+  city: EncString;
+  state: EncString;
+  postalCode: EncString;
+  country: EncString;
+  company: EncString;
+  email: EncString;
+  phone: EncString;
+  ssn: EncString;
+  username: EncString;
+  passportNumber: EncString;
+  licenseNumber: EncString;
 
-    constructor(obj?: IdentityData, alreadyEncrypted: boolean = false) {
-        super();
-        if (obj == null) {
-            return;
-        }
-
-        this.buildDomainModel(this, obj, {
-            title: null,
-            firstName: null,
-            middleName: null,
-            lastName: null,
-            address1: null,
-            address2: null,
-            address3: null,
-            city: null,
-            state: null,
-            postalCode: null,
-            country: null,
-            company: null,
-            email: null,
-            phone: null,
-            ssn: null,
-            username: null,
-            passportNumber: null,
-            licenseNumber: null,
-        }, alreadyEncrypted, []);
+  constructor(obj?: IdentityData, alreadyEncrypted: boolean = false) {
+    super();
+    if (obj == null) {
+      return;
     }
 
-    decrypt(orgId: string, encKey?: SymmetricCryptoKey): Promise<IdentityView> {
-        return this.decryptObj(new IdentityView(this), {
-            title: null,
-            firstName: null,
-            middleName: null,
-            lastName: null,
-            address1: null,
-            address2: null,
-            address3: null,
-            city: null,
-            state: null,
-            postalCode: null,
-            country: null,
-            company: null,
-            email: null,
-            phone: null,
-            ssn: null,
-            username: null,
-            passportNumber: null,
-            licenseNumber: null,
-        }, orgId, encKey);
-    }
+    this.buildDomainModel(
+      this,
+      obj,
+      {
+        title: null,
+        firstName: null,
+        middleName: null,
+        lastName: null,
+        address1: null,
+        address2: null,
+        address3: null,
+        city: null,
+        state: null,
+        postalCode: null,
+        country: null,
+        company: null,
+        email: null,
+        phone: null,
+        ssn: null,
+        username: null,
+        passportNumber: null,
+        licenseNumber: null,
+      },
+      alreadyEncrypted,
+      []
+    );
+  }
 
-    toIdentityData(): IdentityData {
-        const i = new IdentityData();
-        this.buildDataModel(this, i, {
-            title: null,
-            firstName: null,
-            middleName: null,
-            lastName: null,
-            address1: null,
-            address2: null,
-            address3: null,
-            city: null,
-            state: null,
-            postalCode: null,
-            country: null,
-            company: null,
-            email: null,
-            phone: null,
-            ssn: null,
-            username: null,
-            passportNumber: null,
-            licenseNumber: null,
-        });
-        return i;
-    }
+  decrypt(orgId: string, encKey?: SymmetricCryptoKey): Promise<IdentityView> {
+    return this.decryptObj(
+      new IdentityView(this),
+      {
+        title: null,
+        firstName: null,
+        middleName: null,
+        lastName: null,
+        address1: null,
+        address2: null,
+        address3: null,
+        city: null,
+        state: null,
+        postalCode: null,
+        country: null,
+        company: null,
+        email: null,
+        phone: null,
+        ssn: null,
+        username: null,
+        passportNumber: null,
+        licenseNumber: null,
+      },
+      orgId,
+      encKey
+    );
+  }
+
+  toIdentityData(): IdentityData {
+    const i = new IdentityData();
+    this.buildDataModel(this, i, {
+      title: null,
+      firstName: null,
+      middleName: null,
+      lastName: null,
+      address1: null,
+      address2: null,
+      address3: null,
+      city: null,
+      state: null,
+      postalCode: null,
+      country: null,
+      company: null,
+      email: null,
+      phone: null,
+      ssn: null,
+      username: null,
+      passportNumber: null,
+      licenseNumber: null,
+    });
+    return i;
+  }
 }
diff --git a/jslib/common/src/models/domain/importResult.ts b/jslib/common/src/models/domain/importResult.ts
index 00534f4a..1ac28161 100644
--- a/jslib/common/src/models/domain/importResult.ts
+++ b/jslib/common/src/models/domain/importResult.ts
@@ -1,13 +1,13 @@
-import { CipherView } from '../view/cipherView';
-import { CollectionView } from '../view/collectionView';
-import { FolderView } from '../view/folderView';
+import { CipherView } from "../view/cipherView";
+import { CollectionView } from "../view/collectionView";
+import { FolderView } from "../view/folderView";
 
 export class ImportResult {
-    success = false;
-    errorMessage: string;
-    ciphers: CipherView[] = [];
-    folders: FolderView[] = [];
-    folderRelationships: [number, number][] = [];
-    collections: CollectionView[] = [];
-    collectionRelationships: [number, number][] = [];
+  success = false;
+  errorMessage: string;
+  ciphers: CipherView[] = [];
+  folders: FolderView[] = [];
+  folderRelationships: [number, number][] = [];
+  collections: CollectionView[] = [];
+  collectionRelationships: [number, number][] = [];
 }
diff --git a/jslib/common/src/models/domain/login.ts b/jslib/common/src/models/domain/login.ts
index 33bd1216..8507e076 100644
--- a/jslib/common/src/models/domain/login.ts
+++ b/jslib/common/src/models/domain/login.ts
@@ -1,78 +1,91 @@
-import { LoginUri } from './loginUri';
+import { LoginUri } from "./loginUri";
 
-import { LoginData } from '../data/loginData';
+import { LoginData } from "../data/loginData";
 
-import { LoginView } from '../view/loginView';
+import { LoginView } from "../view/loginView";
 
-import Domain from './domainBase';
-import { EncString } from './encString';
-import { SymmetricCryptoKey } from './symmetricCryptoKey';
+import Domain from "./domainBase";
+import { EncString } from "./encString";
+import { SymmetricCryptoKey } from "./symmetricCryptoKey";
 
 export class Login extends Domain {
-    uris: LoginUri[];
-    username: EncString;
-    password: EncString;
-    passwordRevisionDate?: Date;
-    totp: EncString;
-    autofillOnPageLoad: boolean;
+  uris: LoginUri[];
+  username: EncString;
+  password: EncString;
+  passwordRevisionDate?: Date;
+  totp: EncString;
+  autofillOnPageLoad: boolean;
 
-    constructor(obj?: LoginData, alreadyEncrypted: boolean = false) {
-        super();
-        if (obj == null) {
-            return;
-        }
+  constructor(obj?: LoginData, alreadyEncrypted: boolean = false) {
+    super();
+    if (obj == null) {
+      return;
+    }
 
-        this.passwordRevisionDate = obj.passwordRevisionDate != null ? new Date(obj.passwordRevisionDate) : null;
-        this.autofillOnPageLoad = obj.autofillOnPageLoad;
-        this.buildDomainModel(this, obj, {
-            username: null,
-            password: null,
-            totp: null,
-        }, alreadyEncrypted, []);
+    this.passwordRevisionDate =
+      obj.passwordRevisionDate != null ? new Date(obj.passwordRevisionDate) : null;
+    this.autofillOnPageLoad = obj.autofillOnPageLoad;
+    this.buildDomainModel(
+      this,
+      obj,
+      {
+        username: null,
+        password: null,
+        totp: null,
+      },
+      alreadyEncrypted,
+      []
+    );
 
-        if (obj.uris) {
-            this.uris = [];
-            obj.uris.forEach(u => {
-                this.uris.push(new LoginUri(u, alreadyEncrypted));
-            });
-        }
+    if (obj.uris) {
+      this.uris = [];
+      obj.uris.forEach((u) => {
+        this.uris.push(new LoginUri(u, alreadyEncrypted));
+      });
     }
+  }
 
-    async decrypt(orgId: string, encKey?: SymmetricCryptoKey): Promise<LoginView> {
-        const view = await this.decryptObj(new LoginView(this), {
-            username: null,
-            password: null,
-            totp: null,
-        }, orgId, encKey);
-
-        if (this.uris != null) {
-            view.uris = [];
-            for (let i = 0; i < this.uris.length; i++) {
-                const uri = await this.uris[i].decrypt(orgId, encKey);
-                view.uris.push(uri);
-            }
-        }
+  async decrypt(orgId: string, encKey?: SymmetricCryptoKey): Promise<LoginView> {
+    const view = await this.decryptObj(
+      new LoginView(this),
+      {
+        username: null,
+        password: null,
+        totp: null,
+      },
+      orgId,
+      encKey
+    );
 
-        return view;
+    if (this.uris != null) {
+      view.uris = [];
+      for (let i = 0; i < this.uris.length; i++) {
+        const uri = await this.uris[i].decrypt(orgId, encKey);
+        view.uris.push(uri);
+      }
     }
 
-    toLoginData(): LoginData {
-        const l = new LoginData();
-        l.passwordRevisionDate = this.passwordRevisionDate != null ? this.passwordRevisionDate.toISOString() : null;
-        l.autofillOnPageLoad = this.autofillOnPageLoad;
-        this.buildDataModel(this, l, {
-            username: null,
-            password: null,
-            totp: null,
-        });
+    return view;
+  }
 
-        if (this.uris != null && this.uris.length > 0) {
-            l.uris = [];
-            this.uris.forEach(u => {
-                l.uris.push(u.toLoginUriData());
-            });
-        }
+  toLoginData(): LoginData {
+    const l = new LoginData();
+    l.passwordRevisionDate =
+      this.passwordRevisionDate != null ? this.passwordRevisionDate.toISOString() : null;
+    l.autofillOnPageLoad = this.autofillOnPageLoad;
+    this.buildDataModel(this, l, {
+      username: null,
+      password: null,
+      totp: null,
+    });
 
-        return l;
+    if (this.uris != null && this.uris.length > 0) {
+      l.uris = [];
+      this.uris.forEach((u) => {
+        l.uris.push(u.toLoginUriData());
+      });
     }
+
+    return l;
+  }
 }
diff --git a/jslib/common/src/models/domain/loginUri.ts b/jslib/common/src/models/domain/loginUri.ts
index 6f7bac1d..a80f7d0e 100644
--- a/jslib/common/src/models/domain/loginUri.ts
+++ b/jslib/common/src/models/domain/loginUri.ts
@@ -1,40 +1,56 @@
-import { UriMatchType } from '../../enums/uriMatchType';
+import { UriMatchType } from "../../enums/uriMatchType";
 
-import { LoginUriData } from '../data/loginUriData';
+import { LoginUriData } from "../data/loginUriData";
 
-import { LoginUriView } from '../view/loginUriView';
+import { LoginUriView } from "../view/loginUriView";
 
-import Domain from './domainBase';
-import { EncString } from './encString';
-import { SymmetricCryptoKey } from './symmetricCryptoKey';
+import Domain from "./domainBase";
+import { EncString } from "./encString";
+import { SymmetricCryptoKey } from "./symmetricCryptoKey";
 
 export class LoginUri extends Domain {
-    uri: EncString;
-    match: UriMatchType;
-
-    constructor(obj?: LoginUriData, alreadyEncrypted: boolean = false) {
-        super();
-        if (obj == null) {
-            return;
-        }
-
-        this.match = obj.match;
-        this.buildDomainModel(this, obj, {
-            uri: null,
-        }, alreadyEncrypted, []);
-    }
+  uri: EncString;
+  match: UriMatchType;
 
-    decrypt(orgId: string, encKey?: SymmetricCryptoKey): Promise<LoginUriView> {
-        return this.decryptObj(new LoginUriView(this), {
-            uri: null,
-        }, orgId, encKey);
+  constructor(obj?: LoginUriData, alreadyEncrypted: boolean = false) {
+    super();
+    if (obj == null) {
+      return;
     }
 
-    toLoginUriData(): LoginUriData {
-        const u = new LoginUriData();
-        this.buildDataModel(this, u, {
-            uri: null,
-        }, ['match']);
-        return u;
-    }
+    this.match = obj.match;
+    this.buildDomainModel(
+      this,
+      obj,
+      {
+        uri: null,
+      },
+      alreadyEncrypted,
+      []
+    );
+  }
+
+  decrypt(orgId: string, encKey?: SymmetricCryptoKey): Promise<LoginUriView> {
+    return this.decryptObj(
+      new LoginUriView(this),
+      {
+        uri: null,
+      },
+      orgId,
+      encKey
+    );
+  }
+
+  toLoginUriData(): LoginUriData {
+    const u = new LoginUriData();
+    this.buildDataModel(
+      this,
+      u,
+      {
+        uri: null,
+      },
+      ["match"]
+    );
+    return u;
+  }
 }
diff --git a/jslib/common/src/models/domain/masterPasswordPolicyOptions.ts b/jslib/common/src/models/domain/masterPasswordPolicyOptions.ts
index ed04a455..4ffdc91f 100644
--- a/jslib/common/src/models/domain/masterPasswordPolicyOptions.ts
+++ b/jslib/common/src/models/domain/masterPasswordPolicyOptions.ts
@@ -1,10 +1,10 @@
-import Domain from './domainBase';
+import Domain from "./domainBase";
 
 export class MasterPasswordPolicyOptions extends Domain {
-    minComplexity: number = 0;
-    minLength: number = 0;
-    requireUpper: boolean = false;
-    requireLower: boolean = false;
-    requireNumbers: boolean = false;
-    requireSpecial: boolean = false;
+  minComplexity: number = 0;
+  minLength: number = 0;
+  requireUpper: boolean = false;
+  requireLower: boolean = false;
+  requireNumbers: boolean = false;
+  requireSpecial: boolean = false;
 }
diff --git a/jslib/common/src/models/domain/organization.ts b/jslib/common/src/models/domain/organization.ts
index 492afda5..d21b49b9 100644
--- a/jslib/common/src/models/domain/organization.ts
+++ b/jslib/common/src/models/domain/organization.ts
@@ -1,169 +1,185 @@
-import { OrganizationData } from '../data/organizationData';
-
-import { OrganizationUserStatusType } from '../../enums/organizationUserStatusType';
-import { OrganizationUserType } from '../../enums/organizationUserType';
-import { ProductType } from '../../enums/productType';
-import { PermissionsApi } from '../api/permissionsApi';
+import { OrganizationData } from "../data/organizationData";
 
+import { OrganizationUserStatusType } from "../../enums/organizationUserStatusType";
+import { OrganizationUserType } from "../../enums/organizationUserType";
+import { ProductType } from "../../enums/productType";
+import { PermissionsApi } from "../api/permissionsApi";
 
 export class Organization {
-    id: string;
-    name: string;
-    status: OrganizationUserStatusType;
-    type: OrganizationUserType;
-    enabled: boolean;
-    usePolicies: boolean;
-    useGroups: boolean;
-    useDirectory: boolean;
-    useEvents: boolean;
-    useTotp: boolean;
-    use2fa: boolean;
-    useApi: boolean;
-    useSso: boolean;
-    useKeyConnector: boolean;
-    useResetPassword: boolean;
-    selfHost: boolean;
-    usersGetPremium: boolean;
-    seats: number;
-    maxCollections: number;
-    maxStorageGb?: number;
-    ssoBound: boolean;
-    identifier: string;
-    permissions: PermissionsApi;
-    resetPasswordEnrolled: boolean;
-    userId: string;
-    hasPublicAndPrivateKeys: boolean;
-    providerId: string;
-    providerName: string;
-    isProviderUser: boolean;
-    familySponsorshipFriendlyName: string;
-    familySponsorshipAvailable: boolean;
-    planProductType: ProductType;
-    keyConnectorEnabled: boolean;
-    keyConnectorUrl: string;
-
-    constructor(obj?: OrganizationData) {
-        if (obj == null) {
-            return;
-        }
-
-        this.id = obj.id;
-        this.name = obj.name;
-        this.status = obj.status;
-        this.type = obj.type;
-        this.enabled = obj.enabled;
-        this.usePolicies = obj.usePolicies;
-        this.useGroups = obj.useGroups;
-        this.useDirectory = obj.useDirectory;
-        this.useEvents = obj.useEvents;
-        this.useTotp = obj.useTotp;
-        this.use2fa = obj.use2fa;
-        this.useApi = obj.useApi;
-        this.useSso = obj.useSso;
-        this.useKeyConnector = obj.useKeyConnector;
-        this.useResetPassword = obj.useResetPassword;
-        this.selfHost = obj.selfHost;
-        this.usersGetPremium = obj.usersGetPremium;
-        this.seats = obj.seats;
-        this.maxCollections = obj.maxCollections;
-        this.maxStorageGb = obj.maxStorageGb;
-        this.ssoBound = obj.ssoBound;
-        this.identifier = obj.identifier;
-        this.permissions = obj.permissions;
-        this.resetPasswordEnrolled = obj.resetPasswordEnrolled;
-        this.userId = obj.userId;
-        this.hasPublicAndPrivateKeys = obj.hasPublicAndPrivateKeys;
-        this.providerId = obj.providerId;
-        this.providerName = obj.providerName;
-        this.isProviderUser = obj.isProviderUser;
-        this.familySponsorshipFriendlyName = obj.familySponsorshipFriendlyName;
-        this.familySponsorshipAvailable = obj.familySponsorshipAvailable;
-        this.planProductType = obj.planProductType;
-        this.keyConnectorEnabled = obj.keyConnectorEnabled;
-        this.keyConnectorUrl = obj.keyConnectorUrl;
-    }
-
-    get canAccess() {
-        if (this.type === OrganizationUserType.Owner) {
-            return true;
-        }
-        return this.enabled && this.status === OrganizationUserStatusType.Confirmed;
-    }
-
-    get isManager() {
-        return this.type === OrganizationUserType.Manager || this.type === OrganizationUserType.Owner ||
-            this.type === OrganizationUserType.Admin;
-    }
-
-    get isAdmin() {
-        return this.type === OrganizationUserType.Owner || this.type === OrganizationUserType.Admin;
-    }
-
-    get isOwner() {
-        return this.type === OrganizationUserType.Owner || this.isProviderUser;
-    }
-
-    get canAccessEventLogs() {
-        return this.isAdmin || this.permissions.accessEventLogs;
-    }
-
-    get canAccessImportExport() {
-        return this.isAdmin || this.permissions.accessImportExport;
-    }
-
-    get canAccessReports() {
-        return this.isAdmin || this.permissions.accessReports;
-    }
-
-    get canCreateNewCollections() {
-        return this.isManager || (this.permissions.createNewCollections ?? this.permissions.manageAllCollections);
-    }
-
-    get canEditAnyCollection() {
-        return this.isAdmin || (this.permissions.editAnyCollection ?? this.permissions.manageAllCollections);
-    }
-
-    get canDeleteAnyCollection() {
-        return this.isAdmin || (this.permissions.deleteAnyCollection ?? this.permissions.manageAllCollections);
-    }
-
-    get canViewAllCollections() {
-        return this.canCreateNewCollections || this.canEditAnyCollection || this.canDeleteAnyCollection;
-    }
-
-    get canEditAssignedCollections() {
-        return this.isManager || (this.permissions.editAssignedCollections ?? this.permissions.manageAssignedCollections);
-    }
-
-    get canDeleteAssignedCollections() {
-        return this.isManager || (this.permissions.deleteAssignedCollections ?? this.permissions.manageAssignedCollections);
-    }
-
-    get canViewAssignedCollections() {
-        return this.canDeleteAssignedCollections || this.canEditAssignedCollections;
-    }
-
-    get canManageGroups() {
-        return this.isAdmin || this.permissions.manageGroups;
-    }
-
-    get canManageSso() {
-        return this.isAdmin || this.permissions.manageSso;
-    }
-
-    get canManagePolicies() {
-        return this.isAdmin || this.permissions.managePolicies;
-    }
-
-    get canManageUsers() {
-        return this.isAdmin || this.permissions.manageUsers;
-    }
-
-    get canManageUsersPassword() {
-        return this.isAdmin || this.permissions.manageResetPassword;
-    }
-
-    get isExemptFromPolicies() {
-        return this.canManagePolicies;
-    }
+  id: string;
+  name: string;
+  status: OrganizationUserStatusType;
+  type: OrganizationUserType;
+  enabled: boolean;
+  usePolicies: boolean;
+  useGroups: boolean;
+  useDirectory: boolean;
+  useEvents: boolean;
+  useTotp: boolean;
+  use2fa: boolean;
+  useApi: boolean;
+  useSso: boolean;
+  useKeyConnector: boolean;
+  useResetPassword: boolean;
+  selfHost: boolean;
+  usersGetPremium: boolean;
+  seats: number;
+  maxCollections: number;
+  maxStorageGb?: number;
+  ssoBound: boolean;
+  identifier: string;
+  permissions: PermissionsApi;
+  resetPasswordEnrolled: boolean;
+  userId: string;
+  hasPublicAndPrivateKeys: boolean;
+  providerId: string;
+  providerName: string;
+  isProviderUser: boolean;
+  familySponsorshipFriendlyName: string;
+  familySponsorshipAvailable: boolean;
+  planProductType: ProductType;
+  keyConnectorEnabled: boolean;
+  keyConnectorUrl: string;
+
+  constructor(obj?: OrganizationData) {
+    if (obj == null) {
+      return;
+    }
+
+    this.id = obj.id;
+    this.name = obj.name;
+    this.status = obj.status;
+    this.type = obj.type;
+    this.enabled = obj.enabled;
+    this.usePolicies = obj.usePolicies;
+    this.useGroups = obj.useGroups;
+    this.useDirectory = obj.useDirectory;
+    this.useEvents = obj.useEvents;
+    this.useTotp = obj.useTotp;
+    this.use2fa = obj.use2fa;
+    this.useApi = obj.useApi;
+    this.useSso = obj.useSso;
+    this.useKeyConnector = obj.useKeyConnector;
+    this.useResetPassword = obj.useResetPassword;
+    this.selfHost = obj.selfHost;
+    this.usersGetPremium = obj.usersGetPremium;
+    this.seats = obj.seats;
+    this.maxCollections = obj.maxCollections;
+    this.maxStorageGb = obj.maxStorageGb;
+    this.ssoBound = obj.ssoBound;
+    this.identifier = obj.identifier;
+    this.permissions = obj.permissions;
+    this.resetPasswordEnrolled = obj.resetPasswordEnrolled;
+    this.userId = obj.userId;
+    this.hasPublicAndPrivateKeys = obj.hasPublicAndPrivateKeys;
+    this.providerId = obj.providerId;
+    this.providerName = obj.providerName;
+    this.isProviderUser = obj.isProviderUser;
+    this.familySponsorshipFriendlyName = obj.familySponsorshipFriendlyName;
+    this.familySponsorshipAvailable = obj.familySponsorshipAvailable;
+    this.planProductType = obj.planProductType;
+    this.keyConnectorEnabled = obj.keyConnectorEnabled;
+    this.keyConnectorUrl = obj.keyConnectorUrl;
+  }
+
+  get canAccess() {
+    if (this.type === OrganizationUserType.Owner) {
+      return true;
+    }
+    return this.enabled && this.status === OrganizationUserStatusType.Confirmed;
+  }
+
+  get isManager() {
+    return (
+      this.type === OrganizationUserType.Manager ||
+      this.type === OrganizationUserType.Owner ||
+      this.type === OrganizationUserType.Admin
+    );
+  }
+
+  get isAdmin() {
+    return this.type === OrganizationUserType.Owner || this.type === OrganizationUserType.Admin;
+  }
+
+  get isOwner() {
+    return this.type === OrganizationUserType.Owner || this.isProviderUser;
+  }
+
+  get canAccessEventLogs() {
+    return this.isAdmin || this.permissions.accessEventLogs;
+  }
+
+  get canAccessImportExport() {
+    return this.isAdmin || this.permissions.accessImportExport;
+  }
+
+  get canAccessReports() {
+    return this.isAdmin || this.permissions.accessReports;
+  }
+
+  get canCreateNewCollections() {
+    return (
+      this.isManager ||
+      (this.permissions.createNewCollections ?? this.permissions.manageAllCollections)
+    );
+  }
+
+  get canEditAnyCollection() {
+    return (
+      this.isAdmin || (this.permissions.editAnyCollection ?? this.permissions.manageAllCollections)
+    );
+  }
+
+  get canDeleteAnyCollection() {
+    return (
+      this.isAdmin ||
+      (this.permissions.deleteAnyCollection ?? this.permissions.manageAllCollections)
+    );
+  }
+
+  get canViewAllCollections() {
+    return this.canCreateNewCollections || this.canEditAnyCollection || this.canDeleteAnyCollection;
+  }
+
+  get canEditAssignedCollections() {
+    return (
+      this.isManager ||
+      (this.permissions.editAssignedCollections ?? this.permissions.manageAssignedCollections)
+    );
+  }
+
+  get canDeleteAssignedCollections() {
+    return (
+      this.isManager ||
+      (this.permissions.deleteAssignedCollections ?? this.permissions.manageAssignedCollections)
+    );
+  }
+
+  get canViewAssignedCollections() {
+    return this.canDeleteAssignedCollections || this.canEditAssignedCollections;
+  }
+
+  get canManageGroups() {
+    return this.isAdmin || this.permissions.manageGroups;
+  }
+
+  get canManageSso() {
+    return this.isAdmin || this.permissions.manageSso;
+  }
+
+  get canManagePolicies() {
+    return this.isAdmin || this.permissions.managePolicies;
+  }
+
+  get canManageUsers() {
+    return this.isAdmin || this.permissions.manageUsers;
+  }
+
+  get canManageUsersPassword() {
+    return this.isAdmin || this.permissions.manageResetPassword;
+  }
+
+  get isExemptFromPolicies() {
+    return this.canManagePolicies;
+  }
 }
diff --git a/jslib/common/src/models/domain/password.ts b/jslib/common/src/models/domain/password.ts
index 59c9670d..94e098c6 100644
--- a/jslib/common/src/models/domain/password.ts
+++ b/jslib/common/src/models/domain/password.ts
@@ -1,39 +1,49 @@
-import { PasswordHistoryData } from '../data/passwordHistoryData';
+import { PasswordHistoryData } from "../data/passwordHistoryData";
 
-import Domain from './domainBase';
-import { EncString } from './encString';
+import Domain from "./domainBase";
+import { EncString } from "./encString";
 
-import { PasswordHistoryView } from '../view/passwordHistoryView';
-import { SymmetricCryptoKey } from './symmetricCryptoKey';
+import { PasswordHistoryView } from "../view/passwordHistoryView";
+import { SymmetricCryptoKey } from "./symmetricCryptoKey";
 
 export class Password extends Domain {
-    password: EncString;
-    lastUsedDate: Date;
+  password: EncString;
+  lastUsedDate: Date;
 
-    constructor(obj?: PasswordHistoryData, alreadyEncrypted: boolean = false) {
-        super();
-        if (obj == null) {
-            return;
-        }
-
-        this.buildDomainModel(this, obj, {
-            password: null,
-        }, alreadyEncrypted);
-        this.lastUsedDate = new Date(obj.lastUsedDate);
+  constructor(obj?: PasswordHistoryData, alreadyEncrypted: boolean = false) {
+    super();
+    if (obj == null) {
+      return;
     }
 
-    decrypt(orgId: string, encKey?: SymmetricCryptoKey): Promise<PasswordHistoryView> {
-         return this.decryptObj(new PasswordHistoryView(this), {
-            password: null,
-        }, orgId, encKey);
-    }
+    this.buildDomainModel(
+      this,
+      obj,
+      {
+        password: null,
+      },
+      alreadyEncrypted
+    );
+    this.lastUsedDate = new Date(obj.lastUsedDate);
+  }
 
-    toPasswordHistoryData(): PasswordHistoryData {
-        const ph = new PasswordHistoryData();
-        ph.lastUsedDate = this.lastUsedDate.toISOString();
-        this.buildDataModel(this, ph, {
-            password: null,
-        });
-        return ph;
-    }
+  decrypt(orgId: string, encKey?: SymmetricCryptoKey): Promise<PasswordHistoryView> {
+    return this.decryptObj(
+      new PasswordHistoryView(this),
+      {
+        password: null,
+      },
+      orgId,
+      encKey
+    );
+  }
+
+  toPasswordHistoryData(): PasswordHistoryData {
+    const ph = new PasswordHistoryData();
+    ph.lastUsedDate = this.lastUsedDate.toISOString();
+    this.buildDataModel(this, ph, {
+      password: null,
+    });
+    return ph;
+  }
 }
diff --git a/jslib/common/src/models/domain/passwordGeneratorPolicyOptions.ts b/jslib/common/src/models/domain/passwordGeneratorPolicyOptions.ts
index d84b575a..5e37bcec 100644
--- a/jslib/common/src/models/domain/passwordGeneratorPolicyOptions.ts
+++ b/jslib/common/src/models/domain/passwordGeneratorPolicyOptions.ts
@@ -1,29 +1,31 @@
-import Domain from './domainBase';
+import Domain from "./domainBase";
 
 export class PasswordGeneratorPolicyOptions extends Domain {
-    defaultType: string = '';
-    minLength: number = 0;
-    useUppercase: boolean = false;
-    useLowercase: boolean = false;
-    useNumbers: boolean = false;
-    numberCount: number = 0;
-    useSpecial: boolean = false;
-    specialCount: number = 0;
-    minNumberWords: number = 0;
-    capitalize: boolean = false;
-    includeNumber: boolean = false;
+  defaultType: string = "";
+  minLength: number = 0;
+  useUppercase: boolean = false;
+  useLowercase: boolean = false;
+  useNumbers: boolean = false;
+  numberCount: number = 0;
+  useSpecial: boolean = false;
+  specialCount: number = 0;
+  minNumberWords: number = 0;
+  capitalize: boolean = false;
+  includeNumber: boolean = false;
 
-    inEffect() {
-        return this.defaultType !== '' ||
-            this.minLength > 0 ||
-            this.numberCount > 0 ||
-            this.specialCount > 0 ||
-            this.useUppercase ||
-            this.useLowercase ||
-            this.useNumbers ||
-            this.useSpecial ||
-            this.minNumberWords > 0 ||
-            this.capitalize ||
-            this.includeNumber;
-    }
+  inEffect() {
+    return (
+      this.defaultType !== "" ||
+      this.minLength > 0 ||
+      this.numberCount > 0 ||
+      this.specialCount > 0 ||
+      this.useUppercase ||
+      this.useLowercase ||
+      this.useNumbers ||
+      this.useSpecial ||
+      this.minNumberWords > 0 ||
+      this.capitalize ||
+      this.includeNumber
+    );
+  }
 }
diff --git a/jslib/common/src/models/domain/policy.ts b/jslib/common/src/models/domain/policy.ts
index e8e5d00f..174c2c7c 100644
--- a/jslib/common/src/models/domain/policy.ts
+++ b/jslib/common/src/models/domain/policy.ts
@@ -1,26 +1,26 @@
-import { PolicyData } from '../data/policyData';
+import { PolicyData } from "../data/policyData";
 
-import Domain from './domainBase';
+import Domain from "./domainBase";
 
-import { PolicyType } from '../../enums/policyType';
+import { PolicyType } from "../../enums/policyType";
 
 export class Policy extends Domain {
-    id: string;
-    organizationId: string;
-    type: PolicyType;
-    data: any;
-    enabled: boolean;
+  id: string;
+  organizationId: string;
+  type: PolicyType;
+  data: any;
+  enabled: boolean;
 
-    constructor(obj?: PolicyData) {
-        super();
-        if (obj == null) {
-            return;
-        }
-
-        this.id = obj.id;
-        this.organizationId = obj.organizationId;
-        this.type = obj.type;
-        this.data = obj.data;
-        this.enabled = obj.enabled;
+  constructor(obj?: PolicyData) {
+    super();
+    if (obj == null) {
+      return;
     }
+
+    this.id = obj.id;
+    this.organizationId = obj.organizationId;
+    this.type = obj.type;
+    this.data = obj.data;
+    this.enabled = obj.enabled;
+  }
 }
diff --git a/jslib/common/src/models/domain/provider.ts b/jslib/common/src/models/domain/provider.ts
index 24031ea1..6e14340b 100644
--- a/jslib/common/src/models/domain/provider.ts
+++ b/jslib/common/src/models/domain/provider.ts
@@ -1,50 +1,50 @@
-import { ProviderUserStatusType } from '../../enums/providerUserStatusType';
-import { ProviderUserType } from '../../enums/providerUserType';
-import { ProviderData } from '../data/providerData';
+import { ProviderUserStatusType } from "../../enums/providerUserStatusType";
+import { ProviderUserType } from "../../enums/providerUserType";
+import { ProviderData } from "../data/providerData";
 
 export class Provider {
-    id: string;
-    name: string;
-    status: ProviderUserStatusType;
-    type: ProviderUserType;
-    enabled: boolean;
-    userId: string;
-    useEvents: boolean;
-
-    constructor(obj?: ProviderData) {
-        if (obj == null) {
-            return;
-        }
-
-        this.id = obj.id;
-        this.name = obj.name;
-        this.status = obj.status;
-        this.type = obj.type;
-        this.enabled = obj.enabled;
-        this.userId = obj.userId;
-        this.useEvents = obj.useEvents;
+  id: string;
+  name: string;
+  status: ProviderUserStatusType;
+  type: ProviderUserType;
+  enabled: boolean;
+  userId: string;
+  useEvents: boolean;
+
+  constructor(obj?: ProviderData) {
+    if (obj == null) {
+      return;
     }
 
-    get canAccess() {
-        if (this.isProviderAdmin) {
-            return true;
-        }
-        return this.enabled && this.status === ProviderUserStatusType.Confirmed;
+    this.id = obj.id;
+    this.name = obj.name;
+    this.status = obj.status;
+    this.type = obj.type;
+    this.enabled = obj.enabled;
+    this.userId = obj.userId;
+    this.useEvents = obj.useEvents;
+  }
+
+  get canAccess() {
+    if (this.isProviderAdmin) {
+      return true;
     }
+    return this.enabled && this.status === ProviderUserStatusType.Confirmed;
+  }
 
-    get canCreateOrganizations() {
-        return this.enabled && this.isProviderAdmin;
-    }
+  get canCreateOrganizations() {
+    return this.enabled && this.isProviderAdmin;
+  }
 
-    get canManageUsers() {
-        return this.isProviderAdmin;
-    }
+  get canManageUsers() {
+    return this.isProviderAdmin;
+  }
 
-    get canAccessEventLogs() {
-        return this.isProviderAdmin;
-    }
+  get canAccessEventLogs() {
+    return this.isProviderAdmin;
+  }
 
-    get isProviderAdmin() {
-        return this.type === ProviderUserType.ProviderAdmin;
-    }
+  get isProviderAdmin() {
+    return this.type === ProviderUserType.ProviderAdmin;
+  }
 }
diff --git a/jslib/common/src/models/domain/resetPasswordPolicyOptions.ts b/jslib/common/src/models/domain/resetPasswordPolicyOptions.ts
index 6a650e4c..8dbde376 100644
--- a/jslib/common/src/models/domain/resetPasswordPolicyOptions.ts
+++ b/jslib/common/src/models/domain/resetPasswordPolicyOptions.ts
@@ -1,5 +1,5 @@
-import Domain from './domainBase';
+import Domain from "./domainBase";
 
 export class ResetPasswordPolicyOptions extends Domain {
-    autoEnrollEnabled: boolean = false;
+  autoEnrollEnabled: boolean = false;
 }
diff --git a/jslib/common/src/models/domain/secureNote.ts b/jslib/common/src/models/domain/secureNote.ts
index 91b23fff..42f31297 100644
--- a/jslib/common/src/models/domain/secureNote.ts
+++ b/jslib/common/src/models/domain/secureNote.ts
@@ -1,31 +1,31 @@
-import { SecureNoteType } from '../../enums/secureNoteType';
+import { SecureNoteType } from "../../enums/secureNoteType";
 
-import { SecureNoteData } from '../data/secureNoteData';
+import { SecureNoteData } from "../data/secureNoteData";
 
-import Domain from './domainBase';
+import Domain from "./domainBase";
 
-import { SecureNoteView } from '../view/secureNoteView';
-import { SymmetricCryptoKey } from './symmetricCryptoKey';
+import { SecureNoteView } from "../view/secureNoteView";
+import { SymmetricCryptoKey } from "./symmetricCryptoKey";
 
 export class SecureNote extends Domain {
-    type: SecureNoteType;
+  type: SecureNoteType;
 
-    constructor(obj?: SecureNoteData, alreadyEncrypted: boolean = false) {
-        super();
-        if (obj == null) {
-            return;
-        }
-
-        this.type = obj.type;
+  constructor(obj?: SecureNoteData, alreadyEncrypted: boolean = false) {
+    super();
+    if (obj == null) {
+      return;
     }
 
-    decrypt(orgId: string, encKey?: SymmetricCryptoKey): Promise<SecureNoteView> {
-        return Promise.resolve(new SecureNoteView(this));
-    }
+    this.type = obj.type;
+  }
 
-    toSecureNoteData(): SecureNoteData {
-        const n = new SecureNoteData();
-        n.type = this.type;
-        return n;
-    }
+  decrypt(orgId: string, encKey?: SymmetricCryptoKey): Promise<SecureNoteView> {
+    return Promise.resolve(new SecureNoteView(this));
+  }
+
+  toSecureNoteData(): SecureNoteData {
+    const n = new SecureNoteData();
+    n.type = this.type;
+    return n;
+  }
 }
diff --git a/jslib/common/src/models/domain/send.ts b/jslib/common/src/models/domain/send.ts
index 84ed24e7..ab217f92 100644
--- a/jslib/common/src/models/domain/send.ts
+++ b/jslib/common/src/models/domain/send.ts
@@ -1,108 +1,119 @@
-import { CryptoService } from '../../abstractions/crypto.service';
+import { CryptoService } from "../../abstractions/crypto.service";
 
-import { SendType } from '../../enums/sendType';
+import { SendType } from "../../enums/sendType";
 
-import { Utils } from '../../misc/utils';
+import { Utils } from "../../misc/utils";
 
-import { SendData } from '../data/sendData';
+import { SendData } from "../data/sendData";
 
-import { SendView } from '../view/sendView';
+import { SendView } from "../view/sendView";
 
-import Domain from './domainBase';
-import { EncString } from './encString';
-import { SendFile } from './sendFile';
-import { SendText } from './sendText';
+import Domain from "./domainBase";
+import { EncString } from "./encString";
+import { SendFile } from "./sendFile";
+import { SendText } from "./sendText";
 
 export class Send extends Domain {
-    id: string;
-    accessId: string;
-    userId: string;
-    type: SendType;
-    name: EncString;
-    notes: EncString;
-    file: SendFile;
-    text: SendText;
-    key: EncString;
-    maxAccessCount?: number;
-    accessCount: number;
-    revisionDate: Date;
-    expirationDate: Date;
-    deletionDate: Date;
-    password: string;
-    disabled: boolean;
-    hideEmail: boolean;
-
-    constructor(obj?: SendData, alreadyEncrypted: boolean = false) {
-        super();
-        if (obj == null) {
-            return;
-        }
-
-        this.buildDomainModel(this, obj, {
-            id: null,
-            accessId: null,
-            userId: null,
-            name: null,
-            notes: null,
-            key: null,
-        }, alreadyEncrypted, ['id', 'accessId', 'userId']);
-
-        this.type = obj.type;
-        this.maxAccessCount = obj.maxAccessCount;
-        this.accessCount = obj.accessCount;
-        this.password = obj.password;
-        this.disabled = obj.disabled;
-        this.revisionDate = obj.revisionDate != null ? new Date(obj.revisionDate) : null;
-        this.deletionDate = obj.deletionDate != null ? new Date(obj.deletionDate) : null;
-        this.expirationDate = obj.expirationDate != null ? new Date(obj.expirationDate) : null;
-        this.hideEmail = obj.hideEmail;
-
-        switch (this.type) {
-            case SendType.Text:
-                this.text = new SendText(obj.text, alreadyEncrypted);
-                break;
-            case SendType.File:
-                this.file = new SendFile(obj.file, alreadyEncrypted);
-                break;
-            default:
-                break;
-        }
+  id: string;
+  accessId: string;
+  userId: string;
+  type: SendType;
+  name: EncString;
+  notes: EncString;
+  file: SendFile;
+  text: SendText;
+  key: EncString;
+  maxAccessCount?: number;
+  accessCount: number;
+  revisionDate: Date;
+  expirationDate: Date;
+  deletionDate: Date;
+  password: string;
+  disabled: boolean;
+  hideEmail: boolean;
+
+  constructor(obj?: SendData, alreadyEncrypted: boolean = false) {
+    super();
+    if (obj == null) {
+      return;
     }
 
-    async decrypt(): Promise<SendView> {
-        const model = new SendView(this);
-
-        let cryptoService: CryptoService;
-        const containerService = (Utils.global as any).bitwardenContainerService;
-        if (containerService) {
-            cryptoService = containerService.getCryptoService();
-        } else {
-            throw new Error('global bitwardenContainerService not initialized.');
-        }
-
-        try {
-            model.key = await cryptoService.decryptToBytes(this.key, null);
-            model.cryptoKey = await cryptoService.makeSendKey(model.key);
-        } catch (e) {
-            // TODO: error?
-        }
-
-        await this.decryptObj(model, {
-            name: null,
-            notes: null,
-        }, null, model.cryptoKey);
-
-        switch (this.type) {
-            case SendType.File:
-                model.file = await this.file.decrypt(model.cryptoKey);
-                break;
-            case SendType.Text:
-                model.text = await this.text.decrypt(model.cryptoKey);
-                break;
-            default:
-                break;
-        }
-
-        return model;
+    this.buildDomainModel(
+      this,
+      obj,
+      {
+        id: null,
+        accessId: null,
+        userId: null,
+        name: null,
+        notes: null,
+        key: null,
+      },
+      alreadyEncrypted,
+      ["id", "accessId", "userId"]
+    );
+
+    this.type = obj.type;
+    this.maxAccessCount = obj.maxAccessCount;
+    this.accessCount = obj.accessCount;
+    this.password = obj.password;
+    this.disabled = obj.disabled;
+    this.revisionDate = obj.revisionDate != null ? new Date(obj.revisionDate) : null;
+    this.deletionDate = obj.deletionDate != null ? new Date(obj.deletionDate) : null;
+    this.expirationDate = obj.expirationDate != null ? new Date(obj.expirationDate) : null;
+    this.hideEmail = obj.hideEmail;
+
+    switch (this.type) {
+      case SendType.Text:
+        this.text = new SendText(obj.text, alreadyEncrypted);
+        break;
+      case SendType.File:
+        this.file = new SendFile(obj.file, alreadyEncrypted);
+        break;
+      default:
+        break;
     }
+  }
+
+  async decrypt(): Promise<SendView> {
+    const model = new SendView(this);
+
+    let cryptoService: CryptoService;
+    const containerService = (Utils.global as any).bitwardenContainerService;
+    if (containerService) {
+      cryptoService = containerService.getCryptoService();
+    } else {
+      throw new Error("global bitwardenContainerService not initialized.");
+    }
+
+    try {
+      model.key = await cryptoService.decryptToBytes(this.key, null);
+      model.cryptoKey = await cryptoService.makeSendKey(model.key);
+    } catch (e) {
+      // TODO: error?
+    }
+
+    await this.decryptObj(
+      model,
+      {
+        name: null,
+        notes: null,
+      },
+      null,
+      model.cryptoKey
+    );
+
+    switch (this.type) {
+      case SendType.File:
+        model.file = await this.file.decrypt(model.cryptoKey);
+        break;
+      case SendType.Text:
+        model.text = await this.text.decrypt(model.cryptoKey);
+        break;
+      default:
+        break;
+    }
+
+    return model;
+  }
 }
diff --git a/jslib/common/src/models/domain/sendAccess.ts b/jslib/common/src/models/domain/sendAccess.ts
index f3ff1899..05ad9bde 100644
--- a/jslib/common/src/models/domain/sendAccess.ts
+++ b/jslib/common/src/models/domain/sendAccess.ts
@@ -1,69 +1,80 @@
-import { SendType } from '../../enums/sendType';
+import { SendType } from "../../enums/sendType";
 
-import { SendAccessResponse } from '../response/sendAccessResponse';
+import { SendAccessResponse } from "../response/sendAccessResponse";
 
-import { SendAccessView } from '../view/sendAccessView';
+import { SendAccessView } from "../view/sendAccessView";
 
-import Domain from './domainBase';
-import { EncString } from './encString';
-import { SendFile } from './sendFile';
-import { SendText } from './sendText';
-import { SymmetricCryptoKey } from './symmetricCryptoKey';
+import Domain from "./domainBase";
+import { EncString } from "./encString";
+import { SendFile } from "./sendFile";
+import { SendText } from "./sendText";
+import { SymmetricCryptoKey } from "./symmetricCryptoKey";
 
 export class SendAccess extends Domain {
-    id: string;
-    type: SendType;
-    name: EncString;
-    file: SendFile;
-    text: SendText;
-    expirationDate: Date;
-    creatorIdentifier: string;
+  id: string;
+  type: SendType;
+  name: EncString;
+  file: SendFile;
+  text: SendText;
+  expirationDate: Date;
+  creatorIdentifier: string;
 
-    constructor(obj?: SendAccessResponse, alreadyEncrypted: boolean = false) {
-        super();
-        if (obj == null) {
-            return;
-        }
+  constructor(obj?: SendAccessResponse, alreadyEncrypted: boolean = false) {
+    super();
+    if (obj == null) {
+      return;
+    }
 
-        this.buildDomainModel(this, obj, {
-            id: null,
-            name: null,
-            expirationDate: null,
-            creatorIdentifier: null,
-        }, alreadyEncrypted, ['id', 'expirationDate', 'creatorIdentifier']);
+    this.buildDomainModel(
+      this,
+      obj,
+      {
+        id: null,
+        name: null,
+        expirationDate: null,
+        creatorIdentifier: null,
+      },
+      alreadyEncrypted,
+      ["id", "expirationDate", "creatorIdentifier"]
+    );
 
-        this.type = obj.type;
+    this.type = obj.type;
 
-        switch (this.type) {
-            case SendType.Text:
-                this.text = new SendText(obj.text, alreadyEncrypted);
-                break;
-            case SendType.File:
-                this.file = new SendFile(obj.file, alreadyEncrypted);
-                break;
-            default:
-                break;
-        }
+    switch (this.type) {
+      case SendType.Text:
+        this.text = new SendText(obj.text, alreadyEncrypted);
+        break;
+      case SendType.File:
+        this.file = new SendFile(obj.file, alreadyEncrypted);
+        break;
+      default:
+        break;
     }
+  }
 
-    async decrypt(key: SymmetricCryptoKey): Promise<SendAccessView> {
-        const model = new SendAccessView(this);
-
-        await this.decryptObj(model, {
-            name: null,
-        }, null, key);
+  async decrypt(key: SymmetricCryptoKey): Promise<SendAccessView> {
+    const model = new SendAccessView(this);
 
-        switch (this.type) {
-            case SendType.File:
-                model.file = await this.file.decrypt(key);
-                break;
-            case SendType.Text:
-                model.text = await this.text.decrypt(key);
-                break;
-            default:
-                break;
-        }
+    await this.decryptObj(
+      model,
+      {
+        name: null,
+      },
+      null,
+      key
+    );
 
-        return model;
+    switch (this.type) {
+      case SendType.File:
+        model.file = await this.file.decrypt(key);
+        break;
+      case SendType.Text:
+        model.text = await this.text.decrypt(key);
+        break;
+      default:
+        break;
     }
+
+    return model;
+  }
 }
diff --git a/jslib/common/src/models/domain/sendFile.ts b/jslib/common/src/models/domain/sendFile.ts
index 4a057301..76c566df 100644
--- a/jslib/common/src/models/domain/sendFile.ts
+++ b/jslib/common/src/models/domain/sendFile.ts
@@ -1,35 +1,46 @@
-import Domain from './domainBase';
-import { EncString } from './encString';
-import { SymmetricCryptoKey } from './symmetricCryptoKey';
+import Domain from "./domainBase";
+import { EncString } from "./encString";
+import { SymmetricCryptoKey } from "./symmetricCryptoKey";
 
-import { SendFileData } from '../data/sendFileData';
+import { SendFileData } from "../data/sendFileData";
 
-import { SendFileView } from '../view/sendFileView';
+import { SendFileView } from "../view/sendFileView";
 
 export class SendFile extends Domain {
-    id: string;
-    size: string;
-    sizeName: string;
-    fileName: EncString;
+  id: string;
+  size: string;
+  sizeName: string;
+  fileName: EncString;
 
-    constructor(obj?: SendFileData, alreadyEncrypted: boolean = false) {
-        super();
-        if (obj == null) {
-            return;
-        }
-
-        this.size = obj.size;
-        this.buildDomainModel(this, obj, {
-            id: null,
-            sizeName: null,
-            fileName: null,
-        }, alreadyEncrypted, ['id', 'sizeName']);
+  constructor(obj?: SendFileData, alreadyEncrypted: boolean = false) {
+    super();
+    if (obj == null) {
+      return;
     }
 
-    async decrypt(key: SymmetricCryptoKey): Promise<SendFileView> {
-        const view = await this.decryptObj(new SendFileView(this), {
-            fileName: null,
-        }, null, key);
-        return view;
-    }
+    this.size = obj.size;
+    this.buildDomainModel(
+      this,
+      obj,
+      {
+        id: null,
+        sizeName: null,
+        fileName: null,
+      },
+      alreadyEncrypted,
+      ["id", "sizeName"]
+    );
+  }
+
+  async decrypt(key: SymmetricCryptoKey): Promise<SendFileView> {
+    const view = await this.decryptObj(
+      new SendFileView(this),
+      {
+        fileName: null,
+      },
+      null,
+      key
+    );
+    return view;
+  }
 }
diff --git a/jslib/common/src/models/domain/sendText.ts b/jslib/common/src/models/domain/sendText.ts
index edf12000..7d45332f 100644
--- a/jslib/common/src/models/domain/sendText.ts
+++ b/jslib/common/src/models/domain/sendText.ts
@@ -1,30 +1,41 @@
-import Domain from './domainBase';
-import { EncString } from './encString';
-import { SymmetricCryptoKey } from './symmetricCryptoKey';
+import Domain from "./domainBase";
+import { EncString } from "./encString";
+import { SymmetricCryptoKey } from "./symmetricCryptoKey";
 
-import { SendTextData } from '../data/sendTextData';
+import { SendTextData } from "../data/sendTextData";
 
-import { SendTextView } from '../view/sendTextView';
+import { SendTextView } from "../view/sendTextView";
 
 export class SendText extends Domain {
-    text: EncString;
-    hidden: boolean;
+  text: EncString;
+  hidden: boolean;
 
-    constructor(obj?: SendTextData, alreadyEncrypted: boolean = false) {
-        super();
-        if (obj == null) {
-            return;
-        }
-
-        this.hidden = obj.hidden;
-        this.buildDomainModel(this, obj, {
-            text: null,
-        }, alreadyEncrypted, []);
+  constructor(obj?: SendTextData, alreadyEncrypted: boolean = false) {
+    super();
+    if (obj == null) {
+      return;
     }
 
-    decrypt(key: SymmetricCryptoKey): Promise<SendTextView> {
-        return this.decryptObj(new SendTextView(this), {
-            text: null,
-        }, null, key);
-    }
+    this.hidden = obj.hidden;
+    this.buildDomainModel(
+      this,
+      obj,
+      {
+        text: null,
+      },
+      alreadyEncrypted,
+      []
+    );
+  }
+
+  decrypt(key: SymmetricCryptoKey): Promise<SendTextView> {
+    return this.decryptObj(
+      new SendTextView(this),
+      {
+        text: null,
+      },
+      null,
+      key
+    );
+  }
 }
diff --git a/jslib/common/src/models/domain/sortedCiphersCache.ts b/jslib/common/src/models/domain/sortedCiphersCache.ts
index 64f4b049..8c32744e 100644
--- a/jslib/common/src/models/domain/sortedCiphersCache.ts
+++ b/jslib/common/src/models/domain/sortedCiphersCache.ts
@@ -1,82 +1,87 @@
-import { CipherView } from '../view/cipherView';
+import { CipherView } from "../view/cipherView";
 
 const CacheTTL = 3000;
 
 export class SortedCiphersCache {
-    private readonly sortedCiphersByUrl: Map<string, Ciphers> = new Map<string, Ciphers>();
-    private readonly timeouts: Map<string, any> = new Map<string, any>();
-
-    constructor(private readonly comparator: (a: CipherView, b: CipherView) => number) { }
-
-    isCached(url: string) {
-        return this.sortedCiphersByUrl.has(url);
-    }
-
-    addCiphers(url: string, ciphers: CipherView[]) {
-        ciphers.sort(this.comparator);
-        this.sortedCiphersByUrl.set(url, new Ciphers(ciphers));
-        this.resetTimer(url);
-    }
-
-    getLastUsed(url: string) {
-        this.resetTimer(url);
-        return this.isCached(url) ? this.sortedCiphersByUrl.get(url).getLastUsed() : null;
-    }
-
-    getLastLaunched(url: string) {
-        return this.isCached(url) ? this.sortedCiphersByUrl.get(url).getLastLaunched() : null;
-    }
-
-    getNext(url: string) {
-        this.resetTimer(url);
-        return this.isCached(url) ? this.sortedCiphersByUrl.get(url).getNext() : null;
-    }
-
-    updateLastUsedIndex(url: string) {
-        if (this.isCached(url)) {
-            this.sortedCiphersByUrl.get(url).updateLastUsedIndex();
-        }
-    }
-
-    clear() {
-        this.sortedCiphersByUrl.clear();
-        this.timeouts.clear();
-    }
-
-    private resetTimer(url: string) {
-        clearTimeout(this.timeouts.get(url));
-        this.timeouts.set(url, setTimeout(() => {
-            this.sortedCiphersByUrl.delete(url);
-            this.timeouts.delete(url);
-        }, CacheTTL));
+  private readonly sortedCiphersByUrl: Map<string, Ciphers> = new Map<string, Ciphers>();
+  private readonly timeouts: Map<string, any> = new Map<string, any>();
+
+  constructor(private readonly comparator: (a: CipherView, b: CipherView) => number) {}
+
+  isCached(url: string) {
+    return this.sortedCiphersByUrl.has(url);
+  }
+
+  addCiphers(url: string, ciphers: CipherView[]) {
+    ciphers.sort(this.comparator);
+    this.sortedCiphersByUrl.set(url, new Ciphers(ciphers));
+    this.resetTimer(url);
+  }
+
+  getLastUsed(url: string) {
+    this.resetTimer(url);
+    return this.isCached(url) ? this.sortedCiphersByUrl.get(url).getLastUsed() : null;
+  }
+
+  getLastLaunched(url: string) {
+    return this.isCached(url) ? this.sortedCiphersByUrl.get(url).getLastLaunched() : null;
+  }
+
+  getNext(url: string) {
+    this.resetTimer(url);
+    return this.isCached(url) ? this.sortedCiphersByUrl.get(url).getNext() : null;
+  }
+
+  updateLastUsedIndex(url: string) {
+    if (this.isCached(url)) {
+      this.sortedCiphersByUrl.get(url).updateLastUsedIndex();
     }
+  }
+
+  clear() {
+    this.sortedCiphersByUrl.clear();
+    this.timeouts.clear();
+  }
+
+  private resetTimer(url: string) {
+    clearTimeout(this.timeouts.get(url));
+    this.timeouts.set(
+      url,
+      setTimeout(() => {
+        this.sortedCiphersByUrl.delete(url);
+        this.timeouts.delete(url);
+      }, CacheTTL)
+    );
+  }
 }
 
 class Ciphers {
-    lastUsedIndex = -1;
-
-    constructor(private readonly ciphers: CipherView[]) { }
-
-    getLastUsed() {
-        this.lastUsedIndex = Math.max(this.lastUsedIndex, 0);
-        return this.ciphers[this.lastUsedIndex];
-    }
-
-    getLastLaunched() {
-        const usedCiphers = this.ciphers.filter(cipher => cipher.localData?.lastLaunched);
-        const sortedCiphers = usedCiphers.sort((x, y) => y.localData.lastLaunched.valueOf() - x.localData.lastLaunched.valueOf());
-        return sortedCiphers[0];
-    }
-
-    getNextIndex() {
-        return (this.lastUsedIndex + 1) % this.ciphers.length;
-    }
-
-    getNext() {
-        return this.ciphers[this.getNextIndex()];
-    }
-
-    updateLastUsedIndex() {
-        this.lastUsedIndex = this.getNextIndex();
-    }
+  lastUsedIndex = -1;
+
+  constructor(private readonly ciphers: CipherView[]) {}
+
+  getLastUsed() {
+    this.lastUsedIndex = Math.max(this.lastUsedIndex, 0);
+    return this.ciphers[this.lastUsedIndex];
+  }
+
+  getLastLaunched() {
+    const usedCiphers = this.ciphers.filter((cipher) => cipher.localData?.lastLaunched);
+    const sortedCiphers = usedCiphers.sort(
+      (x, y) => y.localData.lastLaunched.valueOf() - x.localData.lastLaunched.valueOf()
+    );
+    return sortedCiphers[0];
+  }
+
+  getNextIndex() {
+    return (this.lastUsedIndex + 1) % this.ciphers.length;
+  }
+
+  getNext() {
+    return this.ciphers[this.getNextIndex()];
+  }
+
+  updateLastUsedIndex() {
+    this.lastUsedIndex = this.getNextIndex();
+  }
 }
diff --git a/jslib/common/src/models/domain/state.ts b/jslib/common/src/models/domain/state.ts
new file mode 100644
index 00000000..c87ff6e8
--- /dev/null
+++ b/jslib/common/src/models/domain/state.ts
@@ -0,0 +1,16 @@
+import { Account } from "./account";
+import { GlobalState } from "./globalState";
+
+export class State<
+  TAccount extends Account = Account,
+  TGlobalState extends GlobalState = GlobalState
+> {
+  accounts: { [userId: string]: TAccount } = {};
+  globals: TGlobalState;
+  activeUserId: string;
+  authenticatedAccounts: string[] = [];
+
+  constructor(globals: TGlobalState) {
+    this.globals = globals;
+  }
+}
diff --git a/jslib/common/src/models/domain/storageOptions.ts b/jslib/common/src/models/domain/storageOptions.ts
new file mode 100644
index 00000000..2db7e0cc
--- /dev/null
+++ b/jslib/common/src/models/domain/storageOptions.ts
@@ -0,0 +1,10 @@
+import { HtmlStorageLocation } from "../../enums/htmlStorageLocation";
+import { StorageLocation } from "../../enums/storageLocation";
+
+export type StorageOptions = {
+  storageLocation?: StorageLocation;
+  useSecureStorage?: boolean;
+  userId?: string;
+  htmlStorageLocation?: HtmlStorageLocation;
+  keySuffix?: string;
+};
diff --git a/jslib/common/src/models/domain/symmetricCryptoKey.ts b/jslib/common/src/models/domain/symmetricCryptoKey.ts
index e6e63b82..c3c80f06 100644
--- a/jslib/common/src/models/domain/symmetricCryptoKey.ts
+++ b/jslib/common/src/models/domain/symmetricCryptoKey.ts
@@ -1,58 +1,58 @@
-import { EncryptionType } from '../../enums/encryptionType';
+import { EncryptionType } from "../../enums/encryptionType";
 
-import { Utils } from '../../misc/utils';
+import { Utils } from "../../misc/utils";
 
 export class SymmetricCryptoKey {
-    key: ArrayBuffer;
-    encKey?: ArrayBuffer;
-    macKey?: ArrayBuffer;
-    encType: EncryptionType;
-
-    keyB64: string;
-    encKeyB64: string;
-    macKeyB64: string;
-
-    meta: any;
-
-    constructor(key: ArrayBuffer, encType?: EncryptionType) {
-        if (key == null) {
-            throw new Error('Must provide key');
-        }
-
-        if (encType == null) {
-            if (key.byteLength === 32) {
-                encType = EncryptionType.AesCbc256_B64;
-            } else if (key.byteLength === 64) {
-                encType = EncryptionType.AesCbc256_HmacSha256_B64;
-            } else {
-                throw new Error('Unable to determine encType.');
-            }
-        }
-
-        this.key = key;
-        this.encType = encType;
-
-        if (encType === EncryptionType.AesCbc256_B64 && key.byteLength === 32) {
-            this.encKey = key;
-            this.macKey = null;
-        } else if (encType === EncryptionType.AesCbc128_HmacSha256_B64 && key.byteLength === 32) {
-            this.encKey = key.slice(0, 16);
-            this.macKey = key.slice(16, 32);
-        } else if (encType === EncryptionType.AesCbc256_HmacSha256_B64 && key.byteLength === 64) {
-            this.encKey = key.slice(0, 32);
-            this.macKey = key.slice(32, 64);
-        } else {
-            throw new Error('Unsupported encType/key length.');
-        }
-
-        if (this.key != null) {
-            this.keyB64 = Utils.fromBufferToB64(this.key);
-        }
-        if (this.encKey != null) {
-            this.encKeyB64 = Utils.fromBufferToB64(this.encKey);
-        }
-        if (this.macKey != null) {
-            this.macKeyB64 = Utils.fromBufferToB64(this.macKey);
-        }
+  key: ArrayBuffer;
+  encKey?: ArrayBuffer;
+  macKey?: ArrayBuffer;
+  encType: EncryptionType;
+
+  keyB64: string;
+  encKeyB64: string;
+  macKeyB64: string;
+
+  meta: any;
+
+  constructor(key: ArrayBuffer, encType?: EncryptionType) {
+    if (key == null) {
+      throw new Error("Must provide key");
+    }
+
+    if (encType == null) {
+      if (key.byteLength === 32) {
+        encType = EncryptionType.AesCbc256_B64;
+      } else if (key.byteLength === 64) {
+        encType = EncryptionType.AesCbc256_HmacSha256_B64;
+      } else {
+        throw new Error("Unable to determine encType.");
+      }
+    }
+
+    this.key = key;
+    this.encType = encType;
+
+    if (encType === EncryptionType.AesCbc256_B64 && key.byteLength === 32) {
+      this.encKey = key;
+      this.macKey = null;
+    } else if (encType === EncryptionType.AesCbc128_HmacSha256_B64 && key.byteLength === 32) {
+      this.encKey = key.slice(0, 16);
+      this.macKey = key.slice(16, 32);
+    } else if (encType === EncryptionType.AesCbc256_HmacSha256_B64 && key.byteLength === 64) {
+      this.encKey = key.slice(0, 32);
+      this.macKey = key.slice(32, 64);
+    } else {
+      throw new Error("Unsupported encType/key length.");
+    }
+
+    if (this.key != null) {
+      this.keyB64 = Utils.fromBufferToB64(this.key);
+    }
+    if (this.encKey != null) {
+      this.encKeyB64 = Utils.fromBufferToB64(this.encKey);
+    }
+    if (this.macKey != null) {
+      this.macKeyB64 = Utils.fromBufferToB64(this.macKey);
     }
+  }
 }
diff --git a/jslib/common/src/models/domain/treeNode.ts b/jslib/common/src/models/domain/treeNode.ts
index 9ea553bc..6af973a5 100644
--- a/jslib/common/src/models/domain/treeNode.ts
+++ b/jslib/common/src/models/domain/treeNode.ts
@@ -1,16 +1,16 @@
 export class TreeNode<T extends ITreeNodeObject> {
-    parent: T;
-    node: T;
-    children: TreeNode<T>[] = [];
+  parent: T;
+  node: T;
+  children: TreeNode<T>[] = [];
 
-    constructor(node: T, name: string, parent: T) {
-        this.parent = parent;
-        this.node = node;
-        this.node.name = name;
-    }
+  constructor(node: T, name: string, parent: T) {
+    this.parent = parent;
+    this.node = node;
+    this.node.name = name;
+  }
 }
 
 export interface ITreeNodeObject {
-    id: string;
-    name: string;
+  id: string;
+  name: string;
 }
diff --git a/jslib/common/src/models/domain/windowState.ts b/jslib/common/src/models/domain/windowState.ts
new file mode 100644
index 00000000..cb260d8b
--- /dev/null
+++ b/jslib/common/src/models/domain/windowState.ts
@@ -0,0 +1,10 @@
+export class WindowState {
+  width?: number;
+  height?: number;
+  isMaximized?: boolean;
+  // TODO: displayBounds is an Electron.Rectangle.
+  // We need to establish some kind of client-specific global state, similiar to the way we already extend a base Account.
+  displayBounds: any;
+  x?: number;
+  y?: number;
+}
diff --git a/jslib/common/src/models/export/card.ts b/jslib/common/src/models/export/card.ts
index a24c3e6e..853ce64b 100644
--- a/jslib/common/src/models/export/card.ts
+++ b/jslib/common/src/models/export/card.ts
@@ -1,66 +1,66 @@
-import { CardView } from '../view/cardView';
+import { CardView } from "../view/cardView";
 
-import { Card as CardDomain } from '../domain/card';
-import { EncString } from '../domain/encString';
+import { Card as CardDomain } from "../domain/card";
+import { EncString } from "../domain/encString";
 
 export class Card {
-    static template(): Card {
-        const req = new Card();
-        req.cardholderName = 'John Doe';
-        req.brand = 'visa';
-        req.number = '4242424242424242';
-        req.expMonth = '04';
-        req.expYear = '2023';
-        req.code = '123';
-        return req;
-    }
+  static template(): Card {
+    const req = new Card();
+    req.cardholderName = "John Doe";
+    req.brand = "visa";
+    req.number = "4242424242424242";
+    req.expMonth = "04";
+    req.expYear = "2023";
+    req.code = "123";
+    return req;
+  }
 
-    static toView(req: Card, view = new CardView()) {
-        view.cardholderName = req.cardholderName;
-        view.brand = req.brand;
-        view.number = req.number;
-        view.expMonth = req.expMonth;
-        view.expYear = req.expYear;
-        view.code = req.code;
-        return view;
-    }
+  static toView(req: Card, view = new CardView()) {
+    view.cardholderName = req.cardholderName;
+    view.brand = req.brand;
+    view.number = req.number;
+    view.expMonth = req.expMonth;
+    view.expYear = req.expYear;
+    view.code = req.code;
+    return view;
+  }
 
-    static toDomain(req: Card, domain = new CardDomain()) {
-        domain.cardholderName = req.cardholderName != null ? new EncString(req.cardholderName) : null;
-        domain.brand = req.brand != null ? new EncString(req.brand) : null;
-        domain.number = req.number != null ? new EncString(req.number) : null;
-        domain.expMonth = req.expMonth != null ? new EncString(req.expMonth) : null;
-        domain.expYear = req.expYear != null ? new EncString(req.expYear) : null;
-        domain.code = req.code != null ? new EncString(req.code) : null;
-        return domain;
-    }
+  static toDomain(req: Card, domain = new CardDomain()) {
+    domain.cardholderName = req.cardholderName != null ? new EncString(req.cardholderName) : null;
+    domain.brand = req.brand != null ? new EncString(req.brand) : null;
+    domain.number = req.number != null ? new EncString(req.number) : null;
+    domain.expMonth = req.expMonth != null ? new EncString(req.expMonth) : null;
+    domain.expYear = req.expYear != null ? new EncString(req.expYear) : null;
+    domain.code = req.code != null ? new EncString(req.code) : null;
+    return domain;
+  }
 
-    cardholderName: string;
-    brand: string;
-    number: string;
-    expMonth: string;
-    expYear: string;
-    code: string;
+  cardholderName: string;
+  brand: string;
+  number: string;
+  expMonth: string;
+  expYear: string;
+  code: string;
 
-    constructor(o?: CardView | CardDomain) {
-        if (o == null) {
-            return;
-        }
+  constructor(o?: CardView | CardDomain) {
+    if (o == null) {
+      return;
+    }
 
-        if (o instanceof CardView) {
-            this.cardholderName = o.cardholderName;
-            this.brand = o.brand;
-            this.number = o.number;
-            this.expMonth = o.expMonth;
-            this.expYear = o.expYear;
-            this.code = o.code;
-        } else {
-            this.cardholderName = o.cardholderName?.encryptedString;
-            this.brand = o.brand?.encryptedString;
-            this.number = o.number?.encryptedString;
-            this.expMonth = o.expMonth?.encryptedString;
-            this.expYear = o.expYear?.encryptedString;
-            this.code = o.code?.encryptedString;
-        }
+    if (o instanceof CardView) {
+      this.cardholderName = o.cardholderName;
+      this.brand = o.brand;
+      this.number = o.number;
+      this.expMonth = o.expMonth;
+      this.expYear = o.expYear;
+      this.code = o.code;
+    } else {
+      this.cardholderName = o.cardholderName?.encryptedString;
+      this.brand = o.brand?.encryptedString;
+      this.number = o.number?.encryptedString;
+      this.expMonth = o.expMonth?.encryptedString;
+      this.expYear = o.expYear?.encryptedString;
+      this.code = o.code?.encryptedString;
     }
+  }
 }
diff --git a/jslib/common/src/models/export/cipher.ts b/jslib/common/src/models/export/cipher.ts
index 6f050776..c433044d 100644
--- a/jslib/common/src/models/export/cipher.ts
+++ b/jslib/common/src/models/export/cipher.ts
@@ -1,158 +1,158 @@
-import { CipherRepromptType } from '../../enums/cipherRepromptType';
-import { CipherType } from '../../enums/cipherType';
+import { CipherRepromptType } from "../../enums/cipherRepromptType";
+import { CipherType } from "../../enums/cipherType";
 
-import { CipherView } from '../view/cipherView';
+import { CipherView } from "../view/cipherView";
 
-import { Cipher as CipherDomain } from '../domain/cipher';
-import { EncString } from '../domain/encString';
+import { Cipher as CipherDomain } from "../domain/cipher";
+import { EncString } from "../domain/encString";
 
-import { Card } from './card';
-import { Field } from './field';
-import { Identity } from './identity';
-import { Login } from './login';
-import { SecureNote } from './secureNote';
+import { Card } from "./card";
+import { Field } from "./field";
+import { Identity } from "./identity";
+import { Login } from "./login";
+import { SecureNote } from "./secureNote";
 
 export class Cipher {
-    static template(): Cipher {
-        const req = new Cipher();
-        req.organizationId = null;
-        req.collectionIds = null;
-        req.folderId = null;
-        req.type = CipherType.Login;
-        req.name = 'Item name';
-        req.notes = 'Some notes about this item.';
-        req.favorite = false;
-        req.fields = [];
-        req.login = null;
-        req.secureNote = null;
-        req.card = null;
-        req.identity = null;
-        req.reprompt = CipherRepromptType.None;
-        return req;
+  static template(): Cipher {
+    const req = new Cipher();
+    req.organizationId = null;
+    req.collectionIds = null;
+    req.folderId = null;
+    req.type = CipherType.Login;
+    req.name = "Item name";
+    req.notes = "Some notes about this item.";
+    req.favorite = false;
+    req.fields = [];
+    req.login = null;
+    req.secureNote = null;
+    req.card = null;
+    req.identity = null;
+    req.reprompt = CipherRepromptType.None;
+    return req;
+  }
+
+  static toView(req: Cipher, view = new CipherView()) {
+    view.type = req.type;
+    view.folderId = req.folderId;
+    if (view.organizationId == null) {
+      view.organizationId = req.organizationId;
+    }
+    if (view.collectionIds || req.collectionIds) {
+      const set = new Set((view.collectionIds ?? []).concat(req.collectionIds ?? []));
+      view.collectionIds = Array.from(set.values());
+    }
+    view.name = req.name;
+    view.notes = req.notes;
+    view.favorite = req.favorite;
+    view.reprompt = req.reprompt ?? CipherRepromptType.None;
+
+    if (req.fields != null) {
+      view.fields = req.fields.map((f) => Field.toView(f));
     }
 
-    static toView(req: Cipher, view = new CipherView()) {
-        view.type = req.type;
-        view.folderId = req.folderId;
-        if (view.organizationId == null) {
-            view.organizationId = req.organizationId;
-        }
-        if (view.collectionIds || req.collectionIds) {
-            const set = new Set((view.collectionIds ?? []).concat(req.collectionIds ?? []));
-            view.collectionIds = Array.from(set.values());
-        }
-        view.name = req.name;
-        view.notes = req.notes;
-        view.favorite = req.favorite;
-        view.reprompt = req.reprompt ?? CipherRepromptType.None;
-
-        if (req.fields != null) {
-            view.fields = req.fields.map(f => Field.toView(f));
-        }
-
-        switch (req.type) {
-            case CipherType.Login:
-                view.login = Login.toView(req.login);
-                break;
-            case CipherType.SecureNote:
-                view.secureNote = SecureNote.toView(req.secureNote);
-                break;
-            case CipherType.Card:
-                view.card = Card.toView(req.card);
-                break;
-            case CipherType.Identity:
-                view.identity = Identity.toView(req.identity);
-                break;
-        }
-
-        return view;
+    switch (req.type) {
+      case CipherType.Login:
+        view.login = Login.toView(req.login);
+        break;
+      case CipherType.SecureNote:
+        view.secureNote = SecureNote.toView(req.secureNote);
+        break;
+      case CipherType.Card:
+        view.card = Card.toView(req.card);
+        break;
+      case CipherType.Identity:
+        view.identity = Identity.toView(req.identity);
+        break;
     }
 
-    static toDomain(req: Cipher, domain = new CipherDomain()) {
-        domain.type = req.type;
-        domain.folderId = req.folderId;
-        if (domain.organizationId == null) {
-            domain.organizationId = req.organizationId;
-        }
-        domain.name = req.name != null ? new EncString(req.name) : null;
-        domain.notes = req.notes != null ? new EncString(req.notes) : null;
-        domain.favorite = req.favorite;
-        domain.reprompt = req.reprompt ?? CipherRepromptType.None;
-
-        if (req.fields != null) {
-            domain.fields = req.fields.map(f => Field.toDomain(f));
-        }
-
-        switch (req.type) {
-            case CipherType.Login:
-                domain.login = Login.toDomain(req.login);
-                break;
-            case CipherType.SecureNote:
-                domain.secureNote = SecureNote.toDomain(req.secureNote);
-                break;
-            case CipherType.Card:
-                domain.card = Card.toDomain(req.card);
-                break;
-            case CipherType.Identity:
-                domain.identity = Identity.toDomain(req.identity);
-                break;
-        }
-
-        return domain;
+    return view;
+  }
+
+  static toDomain(req: Cipher, domain = new CipherDomain()) {
+    domain.type = req.type;
+    domain.folderId = req.folderId;
+    if (domain.organizationId == null) {
+      domain.organizationId = req.organizationId;
+    }
+    domain.name = req.name != null ? new EncString(req.name) : null;
+    domain.notes = req.notes != null ? new EncString(req.notes) : null;
+    domain.favorite = req.favorite;
+    domain.reprompt = req.reprompt ?? CipherRepromptType.None;
+
+    if (req.fields != null) {
+      domain.fields = req.fields.map((f) => Field.toDomain(f));
+    }
+
+    switch (req.type) {
+      case CipherType.Login:
+        domain.login = Login.toDomain(req.login);
+        break;
+      case CipherType.SecureNote:
+        domain.secureNote = SecureNote.toDomain(req.secureNote);
+        break;
+      case CipherType.Card:
+        domain.card = Card.toDomain(req.card);
+        break;
+      case CipherType.Identity:
+        domain.identity = Identity.toDomain(req.identity);
+        break;
+    }
+
+    return domain;
+  }
+
+  type: CipherType;
+  folderId: string;
+  organizationId: string;
+  collectionIds: string[];
+  name: string;
+  notes: string;
+  favorite: boolean;
+  fields: Field[];
+  login: Login;
+  secureNote: SecureNote;
+  card: Card;
+  identity: Identity;
+  reprompt: CipherRepromptType;
+
+  // Use build method instead of ctor so that we can control order of JSON stringify for pretty print
+  build(o: CipherView | CipherDomain) {
+    this.organizationId = o.organizationId;
+    this.folderId = o.folderId;
+    this.type = o.type;
+    this.reprompt = o.reprompt;
+
+    if (o instanceof CipherView) {
+      this.name = o.name;
+      this.notes = o.notes;
+    } else {
+      this.name = o.name?.encryptedString;
+      this.notes = o.notes?.encryptedString;
+    }
+
+    this.favorite = o.favorite;
+
+    if (o.fields != null) {
+      if (o instanceof CipherView) {
+        this.fields = o.fields.map((f) => new Field(f));
+      } else {
+        this.fields = o.fields.map((f) => new Field(f));
+      }
     }
 
-    type: CipherType;
-    folderId: string;
-    organizationId: string;
-    collectionIds: string[];
-    name: string;
-    notes: string;
-    favorite: boolean;
-    fields: Field[];
-    login: Login;
-    secureNote: SecureNote;
-    card: Card;
-    identity: Identity;
-    reprompt: CipherRepromptType;
-
-    // Use build method instead of ctor so that we can control order of JSON stringify for pretty print
-    build(o: CipherView | CipherDomain) {
-        this.organizationId = o.organizationId;
-        this.folderId = o.folderId;
-        this.type = o.type;
-        this.reprompt = o.reprompt;
-
-        if (o instanceof CipherView) {
-            this.name = o.name;
-            this.notes = o.notes;
-        } else {
-            this.name = o.name?.encryptedString;
-            this.notes = o.notes?.encryptedString;
-        }
-
-        this.favorite = o.favorite;
-
-        if (o.fields != null) {
-            if (o instanceof CipherView) {
-                this.fields = o.fields.map(f => new Field(f));
-            } else {
-                this.fields = o.fields.map(f => new Field(f));
-            }
-        }
-
-        switch (o.type) {
-            case CipherType.Login:
-                this.login = new Login(o.login);
-                break;
-            case CipherType.SecureNote:
-                this.secureNote = new SecureNote(o.secureNote);
-                break;
-            case CipherType.Card:
-                this.card = new Card(o.card);
-                break;
-            case CipherType.Identity:
-                this.identity = new Identity(o.identity);
-                break;
-        }
+    switch (o.type) {
+      case CipherType.Login:
+        this.login = new Login(o.login);
+        break;
+      case CipherType.SecureNote:
+        this.secureNote = new SecureNote(o.secureNote);
+        break;
+      case CipherType.Card:
+        this.card = new Card(o.card);
+        break;
+      case CipherType.Identity:
+        this.identity = new Identity(o.identity);
+        break;
     }
+  }
 }
diff --git a/jslib/common/src/models/export/cipherWithIds.ts b/jslib/common/src/models/export/cipherWithIds.ts
index 184cd542..fccf713e 100644
--- a/jslib/common/src/models/export/cipherWithIds.ts
+++ b/jslib/common/src/models/export/cipherWithIds.ts
@@ -1,17 +1,17 @@
-import { Cipher } from './cipher';
+import { Cipher } from "./cipher";
 
-import { CipherView } from '../view/cipherView';
+import { CipherView } from "../view/cipherView";
 
-import { Cipher as CipherDomain } from '../domain/cipher';
+import { Cipher as CipherDomain } from "../domain/cipher";
 
 export class CipherWithIds extends Cipher {
-    id: string;
-    collectionIds: string[];
+  id: string;
+  collectionIds: string[];
 
-    // Use build method instead of ctor so that we can control order of JSON stringify for pretty print
-    build(o: CipherView | CipherDomain) {
-        this.id = o.id;
-        super.build(o);
-        this.collectionIds = o.collectionIds;
-    }
+  // Use build method instead of ctor so that we can control order of JSON stringify for pretty print
+  build(o: CipherView | CipherDomain) {
+    this.id = o.id;
+    super.build(o);
+    this.collectionIds = o.collectionIds;
+  }
 }
diff --git a/jslib/common/src/models/export/collection.ts b/jslib/common/src/models/export/collection.ts
index e628be5b..70d52397 100644
--- a/jslib/common/src/models/export/collection.ts
+++ b/jslib/common/src/models/export/collection.ts
@@ -1,47 +1,47 @@
-import { CollectionView } from '../view/collectionView';
+import { CollectionView } from "../view/collectionView";
 
-import { Collection as CollectionDomain } from '../domain/collection';
-import { EncString } from '../domain/encString';
+import { Collection as CollectionDomain } from "../domain/collection";
+import { EncString } from "../domain/encString";
 
 export class Collection {
-    static template(): Collection {
-        const req = new Collection();
-        req.organizationId = '00000000-0000-0000-0000-000000000000';
-        req.name = 'Collection name';
-        req.externalId = null;
-        return req;
-    }
+  static template(): Collection {
+    const req = new Collection();
+    req.organizationId = "00000000-0000-0000-0000-000000000000";
+    req.name = "Collection name";
+    req.externalId = null;
+    return req;
+  }
 
-    static toView(req: Collection, view = new CollectionView()) {
-        view.name = req.name;
-        view.externalId = req.externalId;
-        if (view.organizationId == null) {
-            view.organizationId = req.organizationId;
-        }
-        return view;
+  static toView(req: Collection, view = new CollectionView()) {
+    view.name = req.name;
+    view.externalId = req.externalId;
+    if (view.organizationId == null) {
+      view.organizationId = req.organizationId;
     }
+    return view;
+  }
 
-    static toDomain(req: Collection, domain = new CollectionDomain()) {
-        domain.name = req.name != null ? new EncString(req.name) : null;
-        domain.externalId = req.externalId;
-        if (domain.organizationId == null) {
-            domain.organizationId = req.organizationId;
-        }
-        return domain;
+  static toDomain(req: Collection, domain = new CollectionDomain()) {
+    domain.name = req.name != null ? new EncString(req.name) : null;
+    domain.externalId = req.externalId;
+    if (domain.organizationId == null) {
+      domain.organizationId = req.organizationId;
     }
+    return domain;
+  }
 
-    organizationId: string;
-    name: string;
-    externalId: string;
+  organizationId: string;
+  name: string;
+  externalId: string;
 
-    // Use build method instead of ctor so that we can control order of JSON stringify for pretty print
-    build(o: CollectionView | CollectionDomain) {
-        this.organizationId = o.organizationId;
-        if (o instanceof CollectionView) {
-            this.name = o.name;
-        } else {
-            this.name = o.name?.encryptedString;
-        }
-        this.externalId = o.externalId;
+  // Use build method instead of ctor so that we can control order of JSON stringify for pretty print
+  build(o: CollectionView | CollectionDomain) {
+    this.organizationId = o.organizationId;
+    if (o instanceof CollectionView) {
+      this.name = o.name;
+    } else {
+      this.name = o.name?.encryptedString;
     }
+    this.externalId = o.externalId;
+  }
 }
diff --git a/jslib/common/src/models/export/collectionWithId.ts b/jslib/common/src/models/export/collectionWithId.ts
index ef48ddd9..d5fcec58 100644
--- a/jslib/common/src/models/export/collectionWithId.ts
+++ b/jslib/common/src/models/export/collectionWithId.ts
@@ -1,15 +1,15 @@
-import { Collection } from './collection';
+import { Collection } from "./collection";
 
-import { CollectionView } from '../view/collectionView';
+import { CollectionView } from "../view/collectionView";
 
-import { Collection as CollectionDomain } from '../domain/collection';
+import { Collection as CollectionDomain } from "../domain/collection";
 
 export class CollectionWithId extends Collection {
-    id: string;
+  id: string;
 
-    // Use build method instead of ctor so that we can control order of JSON stringify for pretty print
-    build(o: CollectionView | CollectionDomain) {
-        this.id = o.id;
-        super.build(o);
-    }
+  // Use build method instead of ctor so that we can control order of JSON stringify for pretty print
+  build(o: CollectionView | CollectionDomain) {
+    this.id = o.id;
+    super.build(o);
+  }
 }
diff --git a/jslib/common/src/models/export/event.ts b/jslib/common/src/models/export/event.ts
index 70e1f19e..09975f2f 100644
--- a/jslib/common/src/models/export/event.ts
+++ b/jslib/common/src/models/export/event.ts
@@ -1,26 +1,26 @@
-import { EventType } from '../../enums/eventType';
-import { EventView } from '../view/eventView';
+import { EventType } from "../../enums/eventType";
+import { EventView } from "../view/eventView";
 
 export class Event {
-    message: string;
-    appIcon: string;
-    appName: string;
-    userId: string;
-    userName: string;
-    userEmail: string;
-    date: string;
-    ip: string;
-    type: string;
+  message: string;
+  appIcon: string;
+  appName: string;
+  userId: string;
+  userName: string;
+  userEmail: string;
+  date: string;
+  ip: string;
+  type: string;
 
-    constructor(event: EventView) {
-        this.message = event.humanReadableMessage;
-        this.appIcon = event.appIcon;
-        this.appName = event.appName;
-        this.userId = event.userId;
-        this.userName = event.userName;
-        this.userEmail = event.userEmail;
-        this.date = event.date;
-        this.ip = event.ip;
-        this.type = EventType[event.type];
-    }
+  constructor(event: EventView) {
+    this.message = event.humanReadableMessage;
+    this.appIcon = event.appIcon;
+    this.appName = event.appName;
+    this.userId = event.userId;
+    this.userName = event.userName;
+    this.userEmail = event.userEmail;
+    this.date = event.date;
+    this.ip = event.ip;
+    this.type = EventType[event.type];
+  }
 }
diff --git a/jslib/common/src/models/export/field.ts b/jslib/common/src/models/export/field.ts
index 0804c123..e4353a71 100644
--- a/jslib/common/src/models/export/field.ts
+++ b/jslib/common/src/models/export/field.ts
@@ -1,54 +1,54 @@
-import { FieldType } from '../../enums/fieldType';
-import { LinkedIdType } from '../../enums/linkedIdType';
+import { FieldType } from "../../enums/fieldType";
+import { LinkedIdType } from "../../enums/linkedIdType";
 
-import { FieldView } from '../view/fieldView';
+import { FieldView } from "../view/fieldView";
 
-import { EncString } from '../domain/encString';
-import { Field as FieldDomain } from '../domain/field';
+import { EncString } from "../domain/encString";
+import { Field as FieldDomain } from "../domain/field";
 
 export class Field {
-    static template(): Field {
-        const req = new Field();
-        req.name = 'Field name';
-        req.value = 'Some value';
-        req.type = FieldType.Text;
-        return req;
+  static template(): Field {
+    const req = new Field();
+    req.name = "Field name";
+    req.value = "Some value";
+    req.type = FieldType.Text;
+    return req;
+  }
+
+  static toView(req: Field, view = new FieldView()) {
+    view.type = req.type;
+    view.value = req.value;
+    view.name = req.name;
+    view.linkedId = req.linkedId;
+    return view;
+  }
+
+  static toDomain(req: Field, domain = new FieldDomain()) {
+    domain.type = req.type;
+    domain.value = req.value != null ? new EncString(req.value) : null;
+    domain.name = req.name != null ? new EncString(req.name) : null;
+    domain.linkedId = req.linkedId;
+    return domain;
+  }
+
+  name: string;
+  value: string;
+  type: FieldType;
+  linkedId: LinkedIdType;
+
+  constructor(o?: FieldView | FieldDomain) {
+    if (o == null) {
+      return;
     }
 
-    static toView(req: Field, view = new FieldView()) {
-        view.type = req.type;
-        view.value = req.value;
-        view.name = req.name;
-        view.linkedId = req.linkedId;
-        return view;
-    }
-
-    static toDomain(req: Field, domain = new FieldDomain()) {
-        domain.type = req.type;
-        domain.value = req.value != null ? new EncString(req.value) : null;
-        domain.name = req.name != null ? new EncString(req.name) : null;
-        domain.linkedId = req.linkedId;
-        return domain;
-    }
-
-    name: string;
-    value: string;
-    type: FieldType;
-    linkedId: LinkedIdType;
-
-    constructor(o?: FieldView | FieldDomain) {
-        if (o == null) {
-            return;
-        }
-
-        if (o instanceof FieldView) {
-            this.name = o.name;
-            this.value = o.value;
-        } else {
-            this.name = o.name?.encryptedString;
-            this.value = o.value?.encryptedString;
-        }
-        this.type = o.type;
-        this.linkedId = o.linkedId;
+    if (o instanceof FieldView) {
+      this.name = o.name;
+      this.value = o.value;
+    } else {
+      this.name = o.name?.encryptedString;
+      this.value = o.value?.encryptedString;
     }
+    this.type = o.type;
+    this.linkedId = o.linkedId;
+  }
 }
diff --git a/jslib/common/src/models/export/folder.ts b/jslib/common/src/models/export/folder.ts
index 8391fb61..9f015b56 100644
--- a/jslib/common/src/models/export/folder.ts
+++ b/jslib/common/src/models/export/folder.ts
@@ -1,33 +1,33 @@
-import { FolderView } from '../view/folderView';
+import { FolderView } from "../view/folderView";
 
-import { EncString } from '../domain/encString';
-import { Folder as FolderDomain } from '../domain/folder';
+import { EncString } from "../domain/encString";
+import { Folder as FolderDomain } from "../domain/folder";
 
 export class Folder {
-    static template(): Folder {
-        const req = new Folder();
-        req.name = 'Folder name';
-        return req;
-    }
+  static template(): Folder {
+    const req = new Folder();
+    req.name = "Folder name";
+    return req;
+  }
 
-    static toView(req: Folder, view = new FolderView()) {
-        view.name = req.name;
-        return view;
-    }
+  static toView(req: Folder, view = new FolderView()) {
+    view.name = req.name;
+    return view;
+  }
 
-    static toDomain(req: Folder, domain = new FolderDomain()) {
-        domain.name = req.name != null ? new EncString(req.name) : null;
-        return domain;
-    }
+  static toDomain(req: Folder, domain = new FolderDomain()) {
+    domain.name = req.name != null ? new EncString(req.name) : null;
+    return domain;
+  }
 
-    name: string;
+  name: string;
 
-    // Use build method instead of ctor so that we can control order of JSON stringify for pretty print
-    build(o: FolderView | FolderDomain) {
-        if (o instanceof FolderView) {
-            this.name = o.name;
-        } else {
-            this.name = o.name?.encryptedString;
-        }
+  // Use build method instead of ctor so that we can control order of JSON stringify for pretty print
+  build(o: FolderView | FolderDomain) {
+    if (o instanceof FolderView) {
+      this.name = o.name;
+    } else {
+      this.name = o.name?.encryptedString;
     }
+  }
 }
diff --git a/jslib/common/src/models/export/folderWithId.ts b/jslib/common/src/models/export/folderWithId.ts
index 83e57e71..69983cab 100644
--- a/jslib/common/src/models/export/folderWithId.ts
+++ b/jslib/common/src/models/export/folderWithId.ts
@@ -1,15 +1,15 @@
-import { Folder } from './folder';
+import { Folder } from "./folder";
 
-import { FolderView } from '../view/folderView';
+import { FolderView } from "../view/folderView";
 
-import { Folder as FolderDomain } from '../domain/folder';
+import { Folder as FolderDomain } from "../domain/folder";
 
 export class FolderWithId extends Folder {
-    id: string;
+  id: string;
 
-    // Use build method instead of ctor so that we can control order of JSON stringify for pretty print
-    build(o: FolderView | FolderDomain) {
-        this.id = o.id;
-        super.build(o);
-    }
+  // Use build method instead of ctor so that we can control order of JSON stringify for pretty print
+  build(o: FolderView | FolderDomain) {
+    this.id = o.id;
+    super.build(o);
+  }
 }
diff --git a/jslib/common/src/models/export/identity.ts b/jslib/common/src/models/export/identity.ts
index abe6fb6c..42fb8865 100644
--- a/jslib/common/src/models/export/identity.ts
+++ b/jslib/common/src/models/export/identity.ts
@@ -1,138 +1,138 @@
-import { IdentityView } from '../view/identityView';
+import { IdentityView } from "../view/identityView";
 
-import { EncString } from '../domain/encString';
-import { Identity as IdentityDomain } from '../domain/identity';
+import { EncString } from "../domain/encString";
+import { Identity as IdentityDomain } from "../domain/identity";
 
 export class Identity {
-    static template(): Identity {
-        const req = new Identity();
-        req.title = 'Mr';
-        req.firstName = 'John';
-        req.middleName = 'William';
-        req.lastName = 'Doe';
-        req.address1 = '123 Any St';
-        req.address2 = 'Apt #123';
-        req.address3 = null;
-        req.city = 'New York';
-        req.state = 'NY';
-        req.postalCode = '10001';
-        req.country = 'US';
-        req.company = 'Acme Inc.';
-        req.email = 'john@company.com';
-        req.phone = '5555551234';
-        req.ssn = '000-123-4567';
-        req.username = 'jdoe';
-        req.passportNumber = 'US-123456789';
-        req.licenseNumber = 'D123-12-123-12333';
-        return req;
-    }
+  static template(): Identity {
+    const req = new Identity();
+    req.title = "Mr";
+    req.firstName = "John";
+    req.middleName = "William";
+    req.lastName = "Doe";
+    req.address1 = "123 Any St";
+    req.address2 = "Apt #123";
+    req.address3 = null;
+    req.city = "New York";
+    req.state = "NY";
+    req.postalCode = "10001";
+    req.country = "US";
+    req.company = "Acme Inc.";
+    req.email = "john@company.com";
+    req.phone = "5555551234";
+    req.ssn = "000-123-4567";
+    req.username = "jdoe";
+    req.passportNumber = "US-123456789";
+    req.licenseNumber = "D123-12-123-12333";
+    return req;
+  }
 
-    static toView(req: Identity, view = new IdentityView()) {
-        view.title = req.title;
-        view.firstName = req.firstName;
-        view.middleName = req.middleName;
-        view.lastName = req.lastName;
-        view.address1 = req.address1;
-        view.address2 = req.address2;
-        view.address3 = req.address3;
-        view.city = req.city;
-        view.state = req.state;
-        view.postalCode = req.postalCode;
-        view.country = req.country;
-        view.company = req.company;
-        view.email = req.email;
-        view.phone = req.phone;
-        view.ssn = req.ssn;
-        view.username = req.username;
-        view.passportNumber = req.passportNumber;
-        view.licenseNumber = req.licenseNumber;
-        return view;
-    }
+  static toView(req: Identity, view = new IdentityView()) {
+    view.title = req.title;
+    view.firstName = req.firstName;
+    view.middleName = req.middleName;
+    view.lastName = req.lastName;
+    view.address1 = req.address1;
+    view.address2 = req.address2;
+    view.address3 = req.address3;
+    view.city = req.city;
+    view.state = req.state;
+    view.postalCode = req.postalCode;
+    view.country = req.country;
+    view.company = req.company;
+    view.email = req.email;
+    view.phone = req.phone;
+    view.ssn = req.ssn;
+    view.username = req.username;
+    view.passportNumber = req.passportNumber;
+    view.licenseNumber = req.licenseNumber;
+    return view;
+  }
 
-    static toDomain(req: Identity, domain = new IdentityDomain()) {
-        domain.title = req.title != null ? new EncString(req.title) : null;
-        domain.firstName = req.firstName != null ? new EncString(req.firstName) : null;
-        domain.middleName = req.middleName != null ? new EncString(req.middleName) : null;
-        domain.lastName = req.lastName != null ? new EncString(req.lastName) : null;
-        domain.address1 = req.address1 != null ? new EncString(req.address1) : null;
-        domain.address2 = req.address2 != null ? new EncString(req.address2) : null;
-        domain.address3 = req.address3 != null ? new EncString(req.address3) : null;
-        domain.city = req.city != null ? new EncString(req.city) : null;
-        domain.state = req.state != null ? new EncString(req.state) : null;
-        domain.postalCode = req.postalCode != null ? new EncString(req.postalCode) : null;
-        domain.country = req.country != null ? new EncString(req.country) : null;
-        domain.company = req.company != null ? new EncString(req.company) : null;
-        domain.email = req.email != null ? new EncString(req.email) : null;
-        domain.phone = req.phone != null ? new EncString(req.phone) : null;
-        domain.ssn = req.ssn != null ? new EncString(req.ssn) : null;
-        domain.username = req.username != null ? new EncString(req.username) : null;
-        domain.passportNumber = req.passportNumber != null ? new EncString(req.passportNumber) : null;
-        domain.licenseNumber = req.licenseNumber != null ? new EncString(req.licenseNumber) : null;
-        return domain;
-    }
+  static toDomain(req: Identity, domain = new IdentityDomain()) {
+    domain.title = req.title != null ? new EncString(req.title) : null;
+    domain.firstName = req.firstName != null ? new EncString(req.firstName) : null;
+    domain.middleName = req.middleName != null ? new EncString(req.middleName) : null;
+    domain.lastName = req.lastName != null ? new EncString(req.lastName) : null;
+    domain.address1 = req.address1 != null ? new EncString(req.address1) : null;
+    domain.address2 = req.address2 != null ? new EncString(req.address2) : null;
+    domain.address3 = req.address3 != null ? new EncString(req.address3) : null;
+    domain.city = req.city != null ? new EncString(req.city) : null;
+    domain.state = req.state != null ? new EncString(req.state) : null;
+    domain.postalCode = req.postalCode != null ? new EncString(req.postalCode) : null;
+    domain.country = req.country != null ? new EncString(req.country) : null;
+    domain.company = req.company != null ? new EncString(req.company) : null;
+    domain.email = req.email != null ? new EncString(req.email) : null;
+    domain.phone = req.phone != null ? new EncString(req.phone) : null;
+    domain.ssn = req.ssn != null ? new EncString(req.ssn) : null;
+    domain.username = req.username != null ? new EncString(req.username) : null;
+    domain.passportNumber = req.passportNumber != null ? new EncString(req.passportNumber) : null;
+    domain.licenseNumber = req.licenseNumber != null ? new EncString(req.licenseNumber) : null;
+    return domain;
+  }
 
-    title: string;
-    firstName: string;
-    middleName: string;
-    lastName: string;
-    address1: string;
-    address2: string;
-    address3: string;
-    city: string;
-    state: string;
-    postalCode: string;
-    country: string;
-    company: string;
-    email: string;
-    phone: string;
-    ssn: string;
-    username: string;
-    passportNumber: string;
-    licenseNumber: string;
+  title: string;
+  firstName: string;
+  middleName: string;
+  lastName: string;
+  address1: string;
+  address2: string;
+  address3: string;
+  city: string;
+  state: string;
+  postalCode: string;
+  country: string;
+  company: string;
+  email: string;
+  phone: string;
+  ssn: string;
+  username: string;
+  passportNumber: string;
+  licenseNumber: string;
 
-    constructor(o?: IdentityView | IdentityDomain) {
-        if (o == null) {
-            return;
-        }
+  constructor(o?: IdentityView | IdentityDomain) {
+    if (o == null) {
+      return;
+    }
 
-        if (o instanceof IdentityView) {
-            this.title = o.title;
-            this.firstName = o.firstName;
-            this.middleName = o.middleName;
-            this.lastName = o.lastName;
-            this.address1 = o.address1;
-            this.address2 = o.address2;
-            this.address3 = o.address3;
-            this.city = o.city;
-            this.state = o.state;
-            this.postalCode = o.postalCode;
-            this.country = o.country;
-            this.company = o.company;
-            this.email = o.email;
-            this.phone = o.phone;
-            this.ssn = o.ssn;
-            this.username = o.username;
-            this.passportNumber = o.passportNumber;
-            this.licenseNumber = o.licenseNumber;
-        } else {
-            this.title = o.title?.encryptedString;
-            this.firstName = o.firstName?.encryptedString;
-            this.middleName = o.middleName?.encryptedString;
-            this.lastName = o.lastName?.encryptedString;
-            this.address1 = o.address1?.encryptedString;
-            this.address2 = o.address2?.encryptedString;
-            this.address3 = o.address3?.encryptedString;
-            this.city = o.city?.encryptedString;
-            this.state = o.state?.encryptedString;
-            this.postalCode = o.postalCode?.encryptedString;
-            this.country = o.country?.encryptedString;
-            this.company = o.company?.encryptedString;
-            this.email = o.email?.encryptedString;
-            this.phone = o.phone?.encryptedString;
-            this.ssn = o.ssn?.encryptedString;
-            this.username = o.username?.encryptedString;
-            this.passportNumber = o.passportNumber?.encryptedString;
-            this.licenseNumber = o.licenseNumber?.encryptedString;
-        }
+    if (o instanceof IdentityView) {
+      this.title = o.title;
+      this.firstName = o.firstName;
+      this.middleName = o.middleName;
+      this.lastName = o.lastName;
+      this.address1 = o.address1;
+      this.address2 = o.address2;
+      this.address3 = o.address3;
+      this.city = o.city;
+      this.state = o.state;
+      this.postalCode = o.postalCode;
+      this.country = o.country;
+      this.company = o.company;
+      this.email = o.email;
+      this.phone = o.phone;
+      this.ssn = o.ssn;
+      this.username = o.username;
+      this.passportNumber = o.passportNumber;
+      this.licenseNumber = o.licenseNumber;
+    } else {
+      this.title = o.title?.encryptedString;
+      this.firstName = o.firstName?.encryptedString;
+      this.middleName = o.middleName?.encryptedString;
+      this.lastName = o.lastName?.encryptedString;
+      this.address1 = o.address1?.encryptedString;
+      this.address2 = o.address2?.encryptedString;
+      this.address3 = o.address3?.encryptedString;
+      this.city = o.city?.encryptedString;
+      this.state = o.state?.encryptedString;
+      this.postalCode = o.postalCode?.encryptedString;
+      this.country = o.country?.encryptedString;
+      this.company = o.company?.encryptedString;
+      this.email = o.email?.encryptedString;
+      this.phone = o.phone?.encryptedString;
+      this.ssn = o.ssn?.encryptedString;
+      this.username = o.username?.encryptedString;
+      this.passportNumber = o.passportNumber?.encryptedString;
+      this.licenseNumber = o.licenseNumber?.encryptedString;
     }
+  }
 }
diff --git a/jslib/common/src/models/export/login.ts b/jslib/common/src/models/export/login.ts
index 3b6b23a2..d64263b3 100644
--- a/jslib/common/src/models/export/login.ts
+++ b/jslib/common/src/models/export/login.ts
@@ -1,66 +1,66 @@
-import { LoginUri } from './loginUri';
+import { LoginUri } from "./loginUri";
 
-import { LoginView } from '../view/loginView';
+import { LoginView } from "../view/loginView";
 
-import { EncString } from '../domain/encString';
-import { Login as LoginDomain } from '../domain/login';
+import { EncString } from "../domain/encString";
+import { Login as LoginDomain } from "../domain/login";
 
 export class Login {
-    static template(): Login {
-        const req = new Login();
-        req.uris = [];
-        req.username = 'jdoe';
-        req.password = 'myp@ssword123';
-        req.totp = 'JBSWY3DPEHPK3PXP';
-        return req;
-    }
+  static template(): Login {
+    const req = new Login();
+    req.uris = [];
+    req.username = "jdoe";
+    req.password = "myp@ssword123";
+    req.totp = "JBSWY3DPEHPK3PXP";
+    return req;
+  }
 
-    static toView(req: Login, view = new LoginView()) {
-        if (req.uris != null) {
-            view.uris = req.uris.map(u => LoginUri.toView(u));
-        }
-        view.username = req.username;
-        view.password = req.password;
-        view.totp = req.totp;
-        return view;
+  static toView(req: Login, view = new LoginView()) {
+    if (req.uris != null) {
+      view.uris = req.uris.map((u) => LoginUri.toView(u));
     }
+    view.username = req.username;
+    view.password = req.password;
+    view.totp = req.totp;
+    return view;
+  }
 
-    static toDomain(req: Login, domain = new LoginDomain()) {
-        if (req.uris != null) {
-            domain.uris = req.uris.map(u => LoginUri.toDomain(u));
-        }
-        domain.username = req.username != null ? new EncString(req.username) : null;
-        domain.password = req.password != null ? new EncString(req.password) : null;
-        domain.totp = req.totp != null ? new EncString(req.totp) : null;
-        return domain;
+  static toDomain(req: Login, domain = new LoginDomain()) {
+    if (req.uris != null) {
+      domain.uris = req.uris.map((u) => LoginUri.toDomain(u));
     }
+    domain.username = req.username != null ? new EncString(req.username) : null;
+    domain.password = req.password != null ? new EncString(req.password) : null;
+    domain.totp = req.totp != null ? new EncString(req.totp) : null;
+    return domain;
+  }
 
-    uris: LoginUri[];
-    username: string;
-    password: string;
-    totp: string;
+  uris: LoginUri[];
+  username: string;
+  password: string;
+  totp: string;
 
-    constructor(o?: LoginView | LoginDomain) {
-        if (o == null) {
-            return;
-        }
+  constructor(o?: LoginView | LoginDomain) {
+    if (o == null) {
+      return;
+    }
 
-        if (o.uris != null) {
-            if (o instanceof LoginView) {
-                this.uris = o.uris.map(u => new LoginUri(u));
-            } else {
-                this.uris = o.uris.map(u => new LoginUri(u));
-            }
-        }
+    if (o.uris != null) {
+      if (o instanceof LoginView) {
+        this.uris = o.uris.map((u) => new LoginUri(u));
+      } else {
+        this.uris = o.uris.map((u) => new LoginUri(u));
+      }
+    }
 
-        if (o instanceof LoginView) {
-            this.username = o.username;
-            this.password = o.password;
-            this.totp = o.totp;
-        } else {
-            this.username = o.username?.encryptedString;
-            this.password = o.password?.encryptedString;
-            this.totp = o.totp?.encryptedString;
-        }
+    if (o instanceof LoginView) {
+      this.username = o.username;
+      this.password = o.password;
+      this.totp = o.totp;
+    } else {
+      this.username = o.username?.encryptedString;
+      this.password = o.password?.encryptedString;
+      this.totp = o.totp?.encryptedString;
     }
+  }
 }
diff --git a/jslib/common/src/models/export/loginUri.ts b/jslib/common/src/models/export/loginUri.ts
index 81d6b625..445b1a25 100644
--- a/jslib/common/src/models/export/loginUri.ts
+++ b/jslib/common/src/models/export/loginUri.ts
@@ -1,43 +1,43 @@
-import { UriMatchType } from '../../enums/uriMatchType';
+import { UriMatchType } from "../../enums/uriMatchType";
 
-import { LoginUriView } from '../view/loginUriView';
+import { LoginUriView } from "../view/loginUriView";
 
-import { EncString } from '../domain/encString';
-import { LoginUri as LoginUriDomain } from '../domain/loginUri';
+import { EncString } from "../domain/encString";
+import { LoginUri as LoginUriDomain } from "../domain/loginUri";
 
 export class LoginUri {
-    static template(): LoginUri {
-        const req = new LoginUri();
-        req.uri = 'https://google.com';
-        req.match = null;
-        return req;
+  static template(): LoginUri {
+    const req = new LoginUri();
+    req.uri = "https://google.com";
+    req.match = null;
+    return req;
+  }
+
+  static toView(req: LoginUri, view = new LoginUriView()) {
+    view.uri = req.uri;
+    view.match = req.match;
+    return view;
+  }
+
+  static toDomain(req: LoginUri, domain = new LoginUriDomain()) {
+    domain.uri = req.uri != null ? new EncString(req.uri) : null;
+    domain.match = req.match;
+    return domain;
+  }
+
+  uri: string;
+  match: UriMatchType = null;
+
+  constructor(o?: LoginUriView | LoginUriDomain) {
+    if (o == null) {
+      return;
     }
 
-    static toView(req: LoginUri, view = new LoginUriView()) {
-        view.uri = req.uri;
-        view.match = req.match;
-        return view;
-    }
-
-    static toDomain(req: LoginUri, domain = new LoginUriDomain()) {
-        domain.uri = req.uri != null ? new EncString(req.uri) : null;
-        domain.match = req.match;
-        return domain;
-    }
-
-    uri: string;
-    match: UriMatchType = null;
-
-    constructor(o?: LoginUriView | LoginUriDomain) {
-        if (o == null) {
-            return;
-        }
-
-        if (o instanceof LoginUriView) {
-            this.uri = o.uri;
-        } else {
-            this.uri = o.uri?.encryptedString;
-        }
-        this.match = o.match;
+    if (o instanceof LoginUriView) {
+      this.uri = o.uri;
+    } else {
+      this.uri = o.uri?.encryptedString;
     }
+    this.match = o.match;
+  }
 }
diff --git a/jslib/common/src/models/export/secureNote.ts b/jslib/common/src/models/export/secureNote.ts
index 078f4033..2dc75a9a 100644
--- a/jslib/common/src/models/export/secureNote.ts
+++ b/jslib/common/src/models/export/secureNote.ts
@@ -1,33 +1,33 @@
-import { SecureNoteType } from '../../enums/secureNoteType';
+import { SecureNoteType } from "../../enums/secureNoteType";
 
-import { SecureNoteView } from '../view/secureNoteView';
+import { SecureNoteView } from "../view/secureNoteView";
 
-import { SecureNote as SecureNoteDomain } from '../domain/secureNote';
+import { SecureNote as SecureNoteDomain } from "../domain/secureNote";
 
 export class SecureNote {
-    static template(): SecureNote {
-        const req = new SecureNote();
-        req.type = SecureNoteType.Generic;
-        return req;
+  static template(): SecureNote {
+    const req = new SecureNote();
+    req.type = SecureNoteType.Generic;
+    return req;
+  }
+
+  static toView(req: SecureNote, view = new SecureNoteView()) {
+    view.type = req.type;
+    return view;
+  }
+
+  static toDomain(req: SecureNote, view = new SecureNoteDomain()) {
+    view.type = req.type;
+    return view;
+  }
+
+  type: SecureNoteType;
+
+  constructor(o?: SecureNoteView | SecureNoteDomain) {
+    if (o == null) {
+      return;
     }
 
-    static toView(req: SecureNote, view = new SecureNoteView()) {
-        view.type = req.type;
-        return view;
-    }
-
-    static toDomain(req: SecureNote, view = new SecureNoteDomain()) {
-        view.type = req.type;
-        return view;
-    }
-
-    type: SecureNoteType;
-
-    constructor(o?: SecureNoteView | SecureNoteDomain) {
-        if (o == null) {
-            return;
-        }
-
-        this.type = o.type;
-    }
+    this.type = o.type;
+  }
 }
diff --git a/jslib/common/src/models/request/account/setKeyConnectorKeyRequest.ts b/jslib/common/src/models/request/account/setKeyConnectorKeyRequest.ts
index 87b580d0..b71ce290 100644
--- a/jslib/common/src/models/request/account/setKeyConnectorKeyRequest.ts
+++ b/jslib/common/src/models/request/account/setKeyConnectorKeyRequest.ts
@@ -1,19 +1,25 @@
-import { KeysRequest } from '../keysRequest';
+import { KeysRequest } from "../keysRequest";
 
-import { KdfType } from '../../../enums/kdfType';
+import { KdfType } from "../../../enums/kdfType";
 
 export class SetKeyConnectorKeyRequest {
-    key: string;
-    keys: KeysRequest;
-    kdf: KdfType;
-    kdfIterations: number;
-    orgIdentifier: string;
+  key: string;
+  keys: KeysRequest;
+  kdf: KdfType;
+  kdfIterations: number;
+  orgIdentifier: string;
 
-    constructor(key: string, kdf: KdfType, kdfIterations: number, orgIdentifier: string, keys: KeysRequest) {
-        this.key = key;
-        this.kdf = kdf;
-        this.kdfIterations = kdfIterations;
-        this.orgIdentifier = orgIdentifier;
-        this.keys = keys;
-    }
+  constructor(
+    key: string,
+    kdf: KdfType,
+    kdfIterations: number,
+    orgIdentifier: string,
+    keys: KeysRequest
+  ) {
+    this.key = key;
+    this.kdf = kdf;
+    this.kdfIterations = kdfIterations;
+    this.orgIdentifier = orgIdentifier;
+    this.keys = keys;
+  }
 }
diff --git a/jslib/common/src/models/request/account/verifyOTPRequest.ts b/jslib/common/src/models/request/account/verifyOTPRequest.ts
index 8cc8f985..2eb8816e 100644
--- a/jslib/common/src/models/request/account/verifyOTPRequest.ts
+++ b/jslib/common/src/models/request/account/verifyOTPRequest.ts
@@ -1,7 +1,7 @@
 export class VerifyOTPRequest {
-    OTP: string;
+  OTP: string;
 
-    constructor(OTP: string) {
-        this.OTP = OTP;
-    }
+  constructor(OTP: string) {
+    this.OTP = OTP;
+  }
 }
diff --git a/jslib/common/src/models/request/attachmentRequest.ts b/jslib/common/src/models/request/attachmentRequest.ts
index 466829aa..ea1ea821 100644
--- a/jslib/common/src/models/request/attachmentRequest.ts
+++ b/jslib/common/src/models/request/attachmentRequest.ts
@@ -1,6 +1,6 @@
 export class AttachmentRequest {
-    fileName: string;
-    key: string;
-    fileSize: number;
-    adminRequest: boolean;
+  fileName: string;
+  key: string;
+  fileSize: number;
+  adminRequest: boolean;
 }
diff --git a/jslib/common/src/models/request/bitPayInvoiceRequest.ts b/jslib/common/src/models/request/bitPayInvoiceRequest.ts
index 2d1369ea..9042611b 100644
--- a/jslib/common/src/models/request/bitPayInvoiceRequest.ts
+++ b/jslib/common/src/models/request/bitPayInvoiceRequest.ts
@@ -1,9 +1,9 @@
 export class BitPayInvoiceRequest {
-    userId: string;
-    organizationId: string;
-    credit: boolean;
-    amount: number;
-    returnUrl: string;
-    name: string;
-    email: string;
+  userId: string;
+  organizationId: string;
+  credit: boolean;
+  amount: number;
+  returnUrl: string;
+  name: string;
+  email: string;
 }
diff --git a/jslib/common/src/models/request/captchaProtectedRequest.ts b/jslib/common/src/models/request/captchaProtectedRequest.ts
index 18b6d6c2..54721e01 100644
--- a/jslib/common/src/models/request/captchaProtectedRequest.ts
+++ b/jslib/common/src/models/request/captchaProtectedRequest.ts
@@ -1,3 +1,3 @@
 export abstract class CaptchaProtectedRequest {
-    captchaResponse: string = null;
+  captchaResponse: string = null;
 }
diff --git a/jslib/common/src/models/request/cipherBulkDeleteRequest.ts b/jslib/common/src/models/request/cipherBulkDeleteRequest.ts
index 97fab41b..227f1a66 100644
--- a/jslib/common/src/models/request/cipherBulkDeleteRequest.ts
+++ b/jslib/common/src/models/request/cipherBulkDeleteRequest.ts
@@ -1,9 +1,9 @@
 export class CipherBulkDeleteRequest {
-    ids: string[];
-    organizationId: string;
+  ids: string[];
+  organizationId: string;
 
-    constructor(ids: string[], organizationId?: string) {
-        this.ids = ids == null ? [] : ids;
-        this.organizationId = organizationId;
-    }
+  constructor(ids: string[], organizationId?: string) {
+    this.ids = ids == null ? [] : ids;
+    this.organizationId = organizationId;
+  }
 }
diff --git a/jslib/common/src/models/request/cipherBulkMoveRequest.ts b/jslib/common/src/models/request/cipherBulkMoveRequest.ts
index c0e8c626..06a737de 100644
--- a/jslib/common/src/models/request/cipherBulkMoveRequest.ts
+++ b/jslib/common/src/models/request/cipherBulkMoveRequest.ts
@@ -1,9 +1,9 @@
 export class CipherBulkMoveRequest {
-    ids: string[];
-    folderId: string;
+  ids: string[];
+  folderId: string;
 
-    constructor(ids: string[], folderId: string) {
-        this.ids = ids == null ? [] : ids;
-        this.folderId = folderId;
-    }
+  constructor(ids: string[], folderId: string) {
+    this.ids = ids == null ? [] : ids;
+    this.folderId = folderId;
+  }
 }
diff --git a/jslib/common/src/models/request/cipherBulkRestoreRequest.ts b/jslib/common/src/models/request/cipherBulkRestoreRequest.ts
index 546cc924..70e5a4e8 100644
--- a/jslib/common/src/models/request/cipherBulkRestoreRequest.ts
+++ b/jslib/common/src/models/request/cipherBulkRestoreRequest.ts
@@ -1,7 +1,7 @@
 export class CipherBulkRestoreRequest {
-    ids: string[];
+  ids: string[];
 
-    constructor(ids: string[]) {
-        this.ids = ids == null ? [] : ids;
-    }
+  constructor(ids: string[]) {
+    this.ids = ids == null ? [] : ids;
+  }
 }
diff --git a/jslib/common/src/models/request/cipherBulkShareRequest.ts b/jslib/common/src/models/request/cipherBulkShareRequest.ts
index 5d1e6781..be36da9d 100644
--- a/jslib/common/src/models/request/cipherBulkShareRequest.ts
+++ b/jslib/common/src/models/request/cipherBulkShareRequest.ts
@@ -1,18 +1,18 @@
-import { CipherWithIdRequest } from './cipherWithIdRequest';
+import { CipherWithIdRequest } from "./cipherWithIdRequest";
 
-import { Cipher } from '../domain/cipher';
+import { Cipher } from "../domain/cipher";
 
 export class CipherBulkShareRequest {
-    ciphers: CipherWithIdRequest[];
-    collectionIds: string[];
+  ciphers: CipherWithIdRequest[];
+  collectionIds: string[];
 
-    constructor(ciphers: Cipher[], collectionIds: string[]) {
-        if (ciphers != null) {
-            this.ciphers = [];
-            ciphers.forEach(c => {
-                this.ciphers.push(new CipherWithIdRequest(c));
-            });
-        }
-        this.collectionIds = collectionIds;
+  constructor(ciphers: Cipher[], collectionIds: string[]) {
+    if (ciphers != null) {
+      this.ciphers = [];
+      ciphers.forEach((c) => {
+        this.ciphers.push(new CipherWithIdRequest(c));
+      });
     }
+    this.collectionIds = collectionIds;
+  }
 }
diff --git a/jslib/common/src/models/request/cipherCollectionsRequest.ts b/jslib/common/src/models/request/cipherCollectionsRequest.ts
index 1473f4e3..8d555389 100644
--- a/jslib/common/src/models/request/cipherCollectionsRequest.ts
+++ b/jslib/common/src/models/request/cipherCollectionsRequest.ts
@@ -1,7 +1,7 @@
 export class CipherCollectionsRequest {
-    collectionIds: string[];
+  collectionIds: string[];
 
-    constructor(collectionIds: string[]) {
-        this.collectionIds = collectionIds == null ? [] : collectionIds;
-    }
+  constructor(collectionIds: string[]) {
+    this.collectionIds = collectionIds == null ? [] : collectionIds;
+  }
 }
diff --git a/jslib/common/src/models/request/cipherCreateRequest.ts b/jslib/common/src/models/request/cipherCreateRequest.ts
index 683d0a52..443ef318 100644
--- a/jslib/common/src/models/request/cipherCreateRequest.ts
+++ b/jslib/common/src/models/request/cipherCreateRequest.ts
@@ -1,13 +1,13 @@
-import { CipherRequest } from './cipherRequest';
+import { CipherRequest } from "./cipherRequest";
 
-import { Cipher } from '../domain/cipher';
+import { Cipher } from "../domain/cipher";
 
 export class CipherCreateRequest {
-    cipher: CipherRequest;
-    collectionIds: string[];
+  cipher: CipherRequest;
+  collectionIds: string[];
 
-    constructor(cipher: Cipher) {
-        this.cipher = new CipherRequest(cipher);
-        this.collectionIds = cipher.collectionIds;
-    }
+  constructor(cipher: Cipher) {
+    this.cipher = new CipherRequest(cipher);
+    this.collectionIds = cipher.collectionIds;
+  }
 }
diff --git a/jslib/common/src/models/request/cipherRequest.ts b/jslib/common/src/models/request/cipherRequest.ts
index 23f09462..c14274d9 100644
--- a/jslib/common/src/models/request/cipherRequest.ts
+++ b/jslib/common/src/models/request/cipherRequest.ts
@@ -1,152 +1,166 @@
-import { CipherRepromptType } from '../../enums/cipherRepromptType';
-import { CipherType } from '../../enums/cipherType';
+import { CipherRepromptType } from "../../enums/cipherRepromptType";
+import { CipherType } from "../../enums/cipherType";
 
-import { Cipher } from '../domain/cipher';
+import { Cipher } from "../domain/cipher";
 
-import { CardApi } from '../api/cardApi';
-import { FieldApi } from '../api/fieldApi';
-import { IdentityApi } from '../api/identityApi';
-import { LoginApi } from '../api/loginApi';
-import { LoginUriApi } from '../api/loginUriApi';
-import { SecureNoteApi } from '../api/secureNoteApi';
+import { CardApi } from "../api/cardApi";
+import { FieldApi } from "../api/fieldApi";
+import { IdentityApi } from "../api/identityApi";
+import { LoginApi } from "../api/loginApi";
+import { LoginUriApi } from "../api/loginUriApi";
+import { SecureNoteApi } from "../api/secureNoteApi";
 
-import { AttachmentRequest } from './attachmentRequest';
-import { PasswordHistoryRequest } from './passwordHistoryRequest';
+import { AttachmentRequest } from "./attachmentRequest";
+import { PasswordHistoryRequest } from "./passwordHistoryRequest";
 
 export class CipherRequest {
-    type: CipherType;
-    folderId: string;
-    organizationId: string;
-    name: string;
-    notes: string;
-    favorite: boolean;
-    login: LoginApi;
-    secureNote: SecureNoteApi;
-    card: CardApi;
-    identity: IdentityApi;
-    fields: FieldApi[];
-    passwordHistory: PasswordHistoryRequest[];
-    // Deprecated, remove at some point and rename attachments2 to attachments
-    attachments: { [id: string]: string; };
-    attachments2: { [id: string]: AttachmentRequest; };
-    lastKnownRevisionDate: Date;
-    reprompt: CipherRepromptType;
+  type: CipherType;
+  folderId: string;
+  organizationId: string;
+  name: string;
+  notes: string;
+  favorite: boolean;
+  login: LoginApi;
+  secureNote: SecureNoteApi;
+  card: CardApi;
+  identity: IdentityApi;
+  fields: FieldApi[];
+  passwordHistory: PasswordHistoryRequest[];
+  // Deprecated, remove at some point and rename attachments2 to attachments
+  attachments: { [id: string]: string };
+  attachments2: { [id: string]: AttachmentRequest };
+  lastKnownRevisionDate: Date;
+  reprompt: CipherRepromptType;
 
-    constructor(cipher: Cipher) {
-        this.type = cipher.type;
-        this.folderId = cipher.folderId;
-        this.organizationId = cipher.organizationId;
-        this.name = cipher.name ? cipher.name.encryptedString : null;
-        this.notes = cipher.notes ? cipher.notes.encryptedString : null;
-        this.favorite = cipher.favorite;
-        this.lastKnownRevisionDate = cipher.revisionDate;
-        this.reprompt = cipher.reprompt;
+  constructor(cipher: Cipher) {
+    this.type = cipher.type;
+    this.folderId = cipher.folderId;
+    this.organizationId = cipher.organizationId;
+    this.name = cipher.name ? cipher.name.encryptedString : null;
+    this.notes = cipher.notes ? cipher.notes.encryptedString : null;
+    this.favorite = cipher.favorite;
+    this.lastKnownRevisionDate = cipher.revisionDate;
+    this.reprompt = cipher.reprompt;
 
-        switch (this.type) {
-            case CipherType.Login:
-                this.login = new LoginApi();
-                this.login.uris = null;
-                this.login.username = cipher.login.username ? cipher.login.username.encryptedString : null;
-                this.login.password = cipher.login.password ? cipher.login.password.encryptedString : null;
-                this.login.passwordRevisionDate = cipher.login.passwordRevisionDate != null ?
-                    cipher.login.passwordRevisionDate.toISOString() : null;
-                this.login.totp = cipher.login.totp ? cipher.login.totp.encryptedString : null;
-                this.login.autofillOnPageLoad = cipher.login.autofillOnPageLoad;
+    switch (this.type) {
+      case CipherType.Login:
+        this.login = new LoginApi();
+        this.login.uris = null;
+        this.login.username = cipher.login.username ? cipher.login.username.encryptedString : null;
+        this.login.password = cipher.login.password ? cipher.login.password.encryptedString : null;
+        this.login.passwordRevisionDate =
+          cipher.login.passwordRevisionDate != null
+            ? cipher.login.passwordRevisionDate.toISOString()
+            : null;
+        this.login.totp = cipher.login.totp ? cipher.login.totp.encryptedString : null;
+        this.login.autofillOnPageLoad = cipher.login.autofillOnPageLoad;
 
-                if (cipher.login.uris != null) {
-                    this.login.uris = cipher.login.uris.map(u => {
-                        const uri = new LoginUriApi();
-                        uri.uri = u.uri != null ? u.uri.encryptedString : null;
-                        uri.match = u.match != null ? u.match : null;
-                        return uri;
-                    });
-                }
-                break;
-            case CipherType.SecureNote:
-                this.secureNote = new SecureNoteApi();
-                this.secureNote.type = cipher.secureNote.type;
-                break;
-            case CipherType.Card:
-                this.card = new CardApi();
-                this.card.cardholderName = cipher.card.cardholderName != null ?
-                    cipher.card.cardholderName.encryptedString : null;
-                this.card.brand = cipher.card.brand != null ? cipher.card.brand.encryptedString : null;
-                this.card.number = cipher.card.number != null ? cipher.card.number.encryptedString : null;
-                this.card.expMonth = cipher.card.expMonth != null ? cipher.card.expMonth.encryptedString : null;
-                this.card.expYear = cipher.card.expYear != null ? cipher.card.expYear.encryptedString : null;
-                this.card.code = cipher.card.code != null ? cipher.card.code.encryptedString : null;
-                break;
-            case CipherType.Identity:
-                this.identity = new IdentityApi();
-                this.identity.title = cipher.identity.title != null ? cipher.identity.title.encryptedString : null;
-                this.identity.firstName = cipher.identity.firstName != null ?
-                    cipher.identity.firstName.encryptedString : null;
-                this.identity.middleName = cipher.identity.middleName != null ?
-                    cipher.identity.middleName.encryptedString : null;
-                this.identity.lastName = cipher.identity.lastName != null ?
-                    cipher.identity.lastName.encryptedString : null;
-                this.identity.address1 = cipher.identity.address1 != null ?
-                    cipher.identity.address1.encryptedString : null;
-                this.identity.address2 = cipher.identity.address2 != null ?
-                    cipher.identity.address2.encryptedString : null;
-                this.identity.address3 = cipher.identity.address3 != null ?
-                    cipher.identity.address3.encryptedString : null;
-                this.identity.city = cipher.identity.city != null ? cipher.identity.city.encryptedString : null;
-                this.identity.state = cipher.identity.state != null ? cipher.identity.state.encryptedString : null;
-                this.identity.postalCode = cipher.identity.postalCode != null ?
-                    cipher.identity.postalCode.encryptedString : null;
-                this.identity.country = cipher.identity.country != null ?
-                    cipher.identity.country.encryptedString : null;
-                this.identity.company = cipher.identity.company != null ?
-                    cipher.identity.company.encryptedString : null;
-                this.identity.email = cipher.identity.email != null ? cipher.identity.email.encryptedString : null;
-                this.identity.phone = cipher.identity.phone != null ? cipher.identity.phone.encryptedString : null;
-                this.identity.ssn = cipher.identity.ssn != null ? cipher.identity.ssn.encryptedString : null;
-                this.identity.username = cipher.identity.username != null ?
-                    cipher.identity.username.encryptedString : null;
-                this.identity.passportNumber = cipher.identity.passportNumber != null ?
-                    cipher.identity.passportNumber.encryptedString : null;
-                this.identity.licenseNumber = cipher.identity.licenseNumber != null ?
-                    cipher.identity.licenseNumber.encryptedString : null;
-                break;
-            default:
-                break;
+        if (cipher.login.uris != null) {
+          this.login.uris = cipher.login.uris.map((u) => {
+            const uri = new LoginUriApi();
+            uri.uri = u.uri != null ? u.uri.encryptedString : null;
+            uri.match = u.match != null ? u.match : null;
+            return uri;
+          });
         }
+        break;
+      case CipherType.SecureNote:
+        this.secureNote = new SecureNoteApi();
+        this.secureNote.type = cipher.secureNote.type;
+        break;
+      case CipherType.Card:
+        this.card = new CardApi();
+        this.card.cardholderName =
+          cipher.card.cardholderName != null ? cipher.card.cardholderName.encryptedString : null;
+        this.card.brand = cipher.card.brand != null ? cipher.card.brand.encryptedString : null;
+        this.card.number = cipher.card.number != null ? cipher.card.number.encryptedString : null;
+        this.card.expMonth =
+          cipher.card.expMonth != null ? cipher.card.expMonth.encryptedString : null;
+        this.card.expYear =
+          cipher.card.expYear != null ? cipher.card.expYear.encryptedString : null;
+        this.card.code = cipher.card.code != null ? cipher.card.code.encryptedString : null;
+        break;
+      case CipherType.Identity:
+        this.identity = new IdentityApi();
+        this.identity.title =
+          cipher.identity.title != null ? cipher.identity.title.encryptedString : null;
+        this.identity.firstName =
+          cipher.identity.firstName != null ? cipher.identity.firstName.encryptedString : null;
+        this.identity.middleName =
+          cipher.identity.middleName != null ? cipher.identity.middleName.encryptedString : null;
+        this.identity.lastName =
+          cipher.identity.lastName != null ? cipher.identity.lastName.encryptedString : null;
+        this.identity.address1 =
+          cipher.identity.address1 != null ? cipher.identity.address1.encryptedString : null;
+        this.identity.address2 =
+          cipher.identity.address2 != null ? cipher.identity.address2.encryptedString : null;
+        this.identity.address3 =
+          cipher.identity.address3 != null ? cipher.identity.address3.encryptedString : null;
+        this.identity.city =
+          cipher.identity.city != null ? cipher.identity.city.encryptedString : null;
+        this.identity.state =
+          cipher.identity.state != null ? cipher.identity.state.encryptedString : null;
+        this.identity.postalCode =
+          cipher.identity.postalCode != null ? cipher.identity.postalCode.encryptedString : null;
+        this.identity.country =
+          cipher.identity.country != null ? cipher.identity.country.encryptedString : null;
+        this.identity.company =
+          cipher.identity.company != null ? cipher.identity.company.encryptedString : null;
+        this.identity.email =
+          cipher.identity.email != null ? cipher.identity.email.encryptedString : null;
+        this.identity.phone =
+          cipher.identity.phone != null ? cipher.identity.phone.encryptedString : null;
+        this.identity.ssn =
+          cipher.identity.ssn != null ? cipher.identity.ssn.encryptedString : null;
+        this.identity.username =
+          cipher.identity.username != null ? cipher.identity.username.encryptedString : null;
+        this.identity.passportNumber =
+          cipher.identity.passportNumber != null
+            ? cipher.identity.passportNumber.encryptedString
+            : null;
+        this.identity.licenseNumber =
+          cipher.identity.licenseNumber != null
+            ? cipher.identity.licenseNumber.encryptedString
+            : null;
+        break;
+      default:
+        break;
+    }
 
-        if (cipher.fields != null) {
-            this.fields = cipher.fields.map(f => {
-                const field = new FieldApi();
-                field.type = f.type;
-                field.name = f.name ? f.name.encryptedString : null;
-                field.value = f.value ? f.value.encryptedString : null;
-                field.linkedId = f.linkedId;
-                return field;
-            });
-        }
+    if (cipher.fields != null) {
+      this.fields = cipher.fields.map((f) => {
+        const field = new FieldApi();
+        field.type = f.type;
+        field.name = f.name ? f.name.encryptedString : null;
+        field.value = f.value ? f.value.encryptedString : null;
+        field.linkedId = f.linkedId;
+        return field;
+      });
+    }
 
-        if (cipher.passwordHistory != null) {
-            this.passwordHistory = [];
-            cipher.passwordHistory.forEach(ph => {
-                this.passwordHistory.push({
-                    lastUsedDate: ph.lastUsedDate,
-                    password: ph.password ? ph.password.encryptedString : null,
-                });
-            });
-        }
+    if (cipher.passwordHistory != null) {
+      this.passwordHistory = [];
+      cipher.passwordHistory.forEach((ph) => {
+        this.passwordHistory.push({
+          lastUsedDate: ph.lastUsedDate,
+          password: ph.password ? ph.password.encryptedString : null,
+        });
+      });
+    }
 
-        if (cipher.attachments != null) {
-            this.attachments = {};
-            this.attachments2 = {};
-            cipher.attachments.forEach(attachment => {
-                const fileName = attachment.fileName ? attachment.fileName.encryptedString : null;
-                this.attachments[attachment.id] = fileName;
-                const attachmentRequest = new AttachmentRequest();
-                attachmentRequest.fileName = fileName;
-                if (attachment.key != null) {
-                    attachmentRequest.key = attachment.key.encryptedString;
-                }
-                this.attachments2[attachment.id] = attachmentRequest;
-            });
+    if (cipher.attachments != null) {
+      this.attachments = {};
+      this.attachments2 = {};
+      cipher.attachments.forEach((attachment) => {
+        const fileName = attachment.fileName ? attachment.fileName.encryptedString : null;
+        this.attachments[attachment.id] = fileName;
+        const attachmentRequest = new AttachmentRequest();
+        attachmentRequest.fileName = fileName;
+        if (attachment.key != null) {
+          attachmentRequest.key = attachment.key.encryptedString;
         }
+        this.attachments2[attachment.id] = attachmentRequest;
+      });
     }
+  }
 }
diff --git a/jslib/common/src/models/request/cipherShareRequest.ts b/jslib/common/src/models/request/cipherShareRequest.ts
index 46468902..430e4ef8 100644
--- a/jslib/common/src/models/request/cipherShareRequest.ts
+++ b/jslib/common/src/models/request/cipherShareRequest.ts
@@ -1,13 +1,13 @@
-import { CipherRequest } from './cipherRequest';
+import { CipherRequest } from "./cipherRequest";
 
-import { Cipher } from '../domain/cipher';
+import { Cipher } from "../domain/cipher";
 
 export class CipherShareRequest {
-    cipher: CipherRequest;
-    collectionIds: string[];
+  cipher: CipherRequest;
+  collectionIds: string[];
 
-    constructor(cipher: Cipher) {
-        this.cipher = new CipherRequest(cipher);
-        this.collectionIds = cipher.collectionIds;
-    }
+  constructor(cipher: Cipher) {
+    this.cipher = new CipherRequest(cipher);
+    this.collectionIds = cipher.collectionIds;
+  }
 }
diff --git a/jslib/common/src/models/request/cipherWithIdRequest.ts b/jslib/common/src/models/request/cipherWithIdRequest.ts
index a3d5e9d8..a722e4a9 100644
--- a/jslib/common/src/models/request/cipherWithIdRequest.ts
+++ b/jslib/common/src/models/request/cipherWithIdRequest.ts
@@ -1,12 +1,12 @@
-import { CipherRequest } from './cipherRequest';
+import { CipherRequest } from "./cipherRequest";
 
-import { Cipher } from '../domain/cipher';
+import { Cipher } from "../domain/cipher";
 
 export class CipherWithIdRequest extends CipherRequest {
-    id: string;
+  id: string;
 
-    constructor(cipher: Cipher) {
-        super(cipher);
-        this.id = cipher.id;
-    }
+  constructor(cipher: Cipher) {
+    super(cipher);
+    this.id = cipher.id;
+  }
 }
diff --git a/jslib/common/src/models/request/collectionRequest.ts b/jslib/common/src/models/request/collectionRequest.ts
index 20f86956..c2176095 100644
--- a/jslib/common/src/models/request/collectionRequest.ts
+++ b/jslib/common/src/models/request/collectionRequest.ts
@@ -1,17 +1,17 @@
-import { Collection } from '../domain/collection';
+import { Collection } from "../domain/collection";
 
-import { SelectionReadOnlyRequest } from './selectionReadOnlyRequest';
+import { SelectionReadOnlyRequest } from "./selectionReadOnlyRequest";
 
 export class CollectionRequest {
-    name: string;
-    externalId: string;
-    groups: SelectionReadOnlyRequest[] = [];
+  name: string;
+  externalId: string;
+  groups: SelectionReadOnlyRequest[] = [];
 
-    constructor(collection?: Collection) {
-        if (collection == null) {
-            return;
-        }
-        this.name = collection.name ? collection.name.encryptedString : null;
-        this.externalId = collection.externalId;
+  constructor(collection?: Collection) {
+    if (collection == null) {
+      return;
     }
+    this.name = collection.name ? collection.name.encryptedString : null;
+    this.externalId = collection.externalId;
+  }
 }
diff --git a/jslib/common/src/models/request/deleteRecoverRequest.ts b/jslib/common/src/models/request/deleteRecoverRequest.ts
index 90d6064f..02a019b8 100644
--- a/jslib/common/src/models/request/deleteRecoverRequest.ts
+++ b/jslib/common/src/models/request/deleteRecoverRequest.ts
@@ -1,3 +1,3 @@
 export class DeleteRecoverRequest {
-    email: string;
+  email: string;
 }
diff --git a/jslib/common/src/models/request/deviceRequest.ts b/jslib/common/src/models/request/deviceRequest.ts
index 2aaa42cb..06da38a1 100644
--- a/jslib/common/src/models/request/deviceRequest.ts
+++ b/jslib/common/src/models/request/deviceRequest.ts
@@ -1,17 +1,17 @@
-import { DeviceType } from '../../enums/deviceType';
+import { DeviceType } from "../../enums/deviceType";
 
-import { PlatformUtilsService } from '../../abstractions/platformUtils.service';
+import { PlatformUtilsService } from "../../abstractions/platformUtils.service";
 
 export class DeviceRequest {
-    type: DeviceType;
-    name: string;
-    identifier: string;
-    pushToken?: string;
+  type: DeviceType;
+  name: string;
+  identifier: string;
+  pushToken?: string;
 
-    constructor(appId: string, platformUtilsService: PlatformUtilsService) {
-        this.type = platformUtilsService.getDevice();
-        this.name = platformUtilsService.getDeviceString();
-        this.identifier = appId;
-        this.pushToken = null;
-    }
+  constructor(appId: string, platformUtilsService: PlatformUtilsService) {
+    this.type = platformUtilsService.getDevice();
+    this.name = platformUtilsService.getDeviceString();
+    this.identifier = appId;
+    this.pushToken = null;
+  }
 }
diff --git a/jslib/common/src/models/request/deviceTokenRequest.ts b/jslib/common/src/models/request/deviceTokenRequest.ts
index 5d663f60..99ca69a2 100644
--- a/jslib/common/src/models/request/deviceTokenRequest.ts
+++ b/jslib/common/src/models/request/deviceTokenRequest.ts
@@ -1,7 +1,7 @@
 export class DeviceTokenRequest {
-    pushToken: string;
+  pushToken: string;
 
-    constructor() {
-        this.pushToken = null;
-    }
+  constructor() {
+    this.pushToken = null;
+  }
 }
diff --git a/jslib/common/src/models/request/emailRequest.ts b/jslib/common/src/models/request/emailRequest.ts
index a2172a1e..0b559615 100644
--- a/jslib/common/src/models/request/emailRequest.ts
+++ b/jslib/common/src/models/request/emailRequest.ts
@@ -1,7 +1,7 @@
-import { EmailTokenRequest } from './emailTokenRequest';
+import { EmailTokenRequest } from "./emailTokenRequest";
 
 export class EmailRequest extends EmailTokenRequest {
-    newMasterPasswordHash: string;
-    token: string;
-    key: string;
+  newMasterPasswordHash: string;
+  token: string;
+  key: string;
 }
diff --git a/jslib/common/src/models/request/emailTokenRequest.ts b/jslib/common/src/models/request/emailTokenRequest.ts
index 90a806b6..7e0515ca 100644
--- a/jslib/common/src/models/request/emailTokenRequest.ts
+++ b/jslib/common/src/models/request/emailTokenRequest.ts
@@ -1,6 +1,6 @@
-import { SecretVerificationRequest } from './secretVerificationRequest';
+import { SecretVerificationRequest } from "./secretVerificationRequest";
 
 export class EmailTokenRequest extends SecretVerificationRequest {
-    newEmail: string;
-    masterPasswordHash: string;
+  newEmail: string;
+  masterPasswordHash: string;
 }
diff --git a/jslib/common/src/models/request/emergencyAccessAcceptRequest.ts b/jslib/common/src/models/request/emergencyAccessAcceptRequest.ts
index ff6f41c4..1cb10253 100644
--- a/jslib/common/src/models/request/emergencyAccessAcceptRequest.ts
+++ b/jslib/common/src/models/request/emergencyAccessAcceptRequest.ts
@@ -1,3 +1,3 @@
 export class EmergencyAccessAcceptRequest {
-    token: string;
+  token: string;
 }
diff --git a/jslib/common/src/models/request/emergencyAccessConfirmRequest.ts b/jslib/common/src/models/request/emergencyAccessConfirmRequest.ts
index 5b138c84..ee54a4fe 100644
--- a/jslib/common/src/models/request/emergencyAccessConfirmRequest.ts
+++ b/jslib/common/src/models/request/emergencyAccessConfirmRequest.ts
@@ -1,3 +1,3 @@
 export class EmergencyAccessConfirmRequest {
-    key: string;
+  key: string;
 }
diff --git a/jslib/common/src/models/request/emergencyAccessInviteRequest.ts b/jslib/common/src/models/request/emergencyAccessInviteRequest.ts
index f97620d5..d75ed419 100644
--- a/jslib/common/src/models/request/emergencyAccessInviteRequest.ts
+++ b/jslib/common/src/models/request/emergencyAccessInviteRequest.ts
@@ -1,7 +1,7 @@
-import { EmergencyAccessType } from '../../enums/emergencyAccessType';
+import { EmergencyAccessType } from "../../enums/emergencyAccessType";
 
 export class EmergencyAccessInviteRequest {
-    email: string;
-    type: EmergencyAccessType;
-    waitTimeDays: number;
+  email: string;
+  type: EmergencyAccessType;
+  waitTimeDays: number;
 }
diff --git a/jslib/common/src/models/request/emergencyAccessPasswordRequest.ts b/jslib/common/src/models/request/emergencyAccessPasswordRequest.ts
index 9d95f86b..3fb459e1 100644
--- a/jslib/common/src/models/request/emergencyAccessPasswordRequest.ts
+++ b/jslib/common/src/models/request/emergencyAccessPasswordRequest.ts
@@ -1,4 +1,4 @@
 export class EmergencyAccessPasswordRequest {
-    newMasterPasswordHash: string;
-    key: string;
+  newMasterPasswordHash: string;
+  key: string;
 }
diff --git a/jslib/common/src/models/request/emergencyAccessUpdateRequest.ts b/jslib/common/src/models/request/emergencyAccessUpdateRequest.ts
index ed535cb0..d7c55c94 100644
--- a/jslib/common/src/models/request/emergencyAccessUpdateRequest.ts
+++ b/jslib/common/src/models/request/emergencyAccessUpdateRequest.ts
@@ -1,7 +1,7 @@
-import { EmergencyAccessType } from '../../enums/emergencyAccessType';
+import { EmergencyAccessType } from "../../enums/emergencyAccessType";
 
 export class EmergencyAccessUpdateRequest {
-    type: EmergencyAccessType;
-    waitTimeDays: number;
-    keyEncrypted?: string;
+  type: EmergencyAccessType;
+  waitTimeDays: number;
+  keyEncrypted?: string;
 }
diff --git a/jslib/common/src/models/request/eventRequest.ts b/jslib/common/src/models/request/eventRequest.ts
index 83bfa390..a6228fd6 100644
--- a/jslib/common/src/models/request/eventRequest.ts
+++ b/jslib/common/src/models/request/eventRequest.ts
@@ -1,7 +1,7 @@
-import { EventType } from '../../enums/eventType';
+import { EventType } from "../../enums/eventType";
 
 export class EventRequest {
-    type: EventType;
-    cipherId: string;
-    date: string;
+  type: EventType;
+  cipherId: string;
+  date: string;
 }
diff --git a/jslib/common/src/models/request/folderRequest.ts b/jslib/common/src/models/request/folderRequest.ts
index 54ec76ca..a37f66dd 100644
--- a/jslib/common/src/models/request/folderRequest.ts
+++ b/jslib/common/src/models/request/folderRequest.ts
@@ -1,9 +1,9 @@
-import { Folder } from '../domain/folder';
+import { Folder } from "../domain/folder";
 
 export class FolderRequest {
-    name: string;
+  name: string;
 
-    constructor(folder: Folder) {
-        this.name = folder.name ? folder.name.encryptedString : null;
-    }
+  constructor(folder: Folder) {
+    this.name = folder.name ? folder.name.encryptedString : null;
+  }
 }
diff --git a/jslib/common/src/models/request/folderWithIdRequest.ts b/jslib/common/src/models/request/folderWithIdRequest.ts
index a97ad6d8..1c83e73f 100644
--- a/jslib/common/src/models/request/folderWithIdRequest.ts
+++ b/jslib/common/src/models/request/folderWithIdRequest.ts
@@ -1,12 +1,12 @@
-import { FolderRequest } from './folderRequest';
+import { FolderRequest } from "./folderRequest";
 
-import { Folder } from '../domain/folder';
+import { Folder } from "../domain/folder";
 
 export class FolderWithIdRequest extends FolderRequest {
-    id: string;
+  id: string;
 
-    constructor(folder: Folder) {
-        super(folder);
-        this.id = folder.id;
-    }
+  constructor(folder: Folder) {
+    super(folder);
+    this.id = folder.id;
+  }
 }
diff --git a/jslib/common/src/models/request/groupRequest.ts b/jslib/common/src/models/request/groupRequest.ts
index d3e18cf1..c4c349c8 100644
--- a/jslib/common/src/models/request/groupRequest.ts
+++ b/jslib/common/src/models/request/groupRequest.ts
@@ -1,8 +1,8 @@
-import { SelectionReadOnlyRequest } from './selectionReadOnlyRequest';
+import { SelectionReadOnlyRequest } from "./selectionReadOnlyRequest";
 
 export class GroupRequest {
-    name: string;
-    accessAll: boolean;
-    externalId: string;
-    collections: SelectionReadOnlyRequest[] = [];
+  name: string;
+  accessAll: boolean;
+  externalId: string;
+  collections: SelectionReadOnlyRequest[] = [];
 }
diff --git a/jslib/common/src/models/request/iapCheckRequest.ts b/jslib/common/src/models/request/iapCheckRequest.ts
index 75ad723c..b8796e8c 100644
--- a/jslib/common/src/models/request/iapCheckRequest.ts
+++ b/jslib/common/src/models/request/iapCheckRequest.ts
@@ -1,5 +1,5 @@
-import { PaymentMethodType } from '../../enums/paymentMethodType';
+import { PaymentMethodType } from "../../enums/paymentMethodType";
 
 export class IapCheckRequest {
-    paymentMethodType: PaymentMethodType;
+  paymentMethodType: PaymentMethodType;
 }
diff --git a/jslib/common/src/models/request/importCiphersRequest.ts b/jslib/common/src/models/request/importCiphersRequest.ts
index eec62602..ebaa03a3 100644
--- a/jslib/common/src/models/request/importCiphersRequest.ts
+++ b/jslib/common/src/models/request/importCiphersRequest.ts
@@ -1,9 +1,9 @@
-import { CipherRequest } from './cipherRequest';
-import { FolderRequest } from './folderRequest';
-import { KvpRequest } from './kvpRequest';
+import { CipherRequest } from "./cipherRequest";
+import { FolderRequest } from "./folderRequest";
+import { KvpRequest } from "./kvpRequest";
 
 export class ImportCiphersRequest {
-    ciphers: CipherRequest[] = [];
-    folders: FolderRequest[] = [];
-    folderRelationships: KvpRequest<number, number>[] = [];
+  ciphers: CipherRequest[] = [];
+  folders: FolderRequest[] = [];
+  folderRelationships: KvpRequest<number, number>[] = [];
 }
diff --git a/jslib/common/src/models/request/importDirectoryRequest.ts b/jslib/common/src/models/request/importDirectoryRequest.ts
index 16bf69b9..a13ce456 100644
--- a/jslib/common/src/models/request/importDirectoryRequest.ts
+++ b/jslib/common/src/models/request/importDirectoryRequest.ts
@@ -1,9 +1,9 @@
-import { ImportDirectoryRequestGroup } from './importDirectoryRequestGroup';
-import { ImportDirectoryRequestUser } from './importDirectoryRequestUser';
+import { ImportDirectoryRequestGroup } from "./importDirectoryRequestGroup";
+import { ImportDirectoryRequestUser } from "./importDirectoryRequestUser";
 
 export class ImportDirectoryRequest {
-    groups: ImportDirectoryRequestGroup[] = [];
-    users: ImportDirectoryRequestUser[] = [];
-    overwriteExisting = false;
-    largeImport = false;
+  groups: ImportDirectoryRequestGroup[] = [];
+  users: ImportDirectoryRequestUser[] = [];
+  overwriteExisting = false;
+  largeImport = false;
 }
diff --git a/jslib/common/src/models/request/importDirectoryRequestGroup.ts b/jslib/common/src/models/request/importDirectoryRequestGroup.ts
index 8e4f7f4a..4b7b3567 100644
--- a/jslib/common/src/models/request/importDirectoryRequestGroup.ts
+++ b/jslib/common/src/models/request/importDirectoryRequestGroup.ts
@@ -1,5 +1,5 @@
 export class ImportDirectoryRequestGroup {
-    name: string;
-    externalId: string;
-    users: string[];
+  name: string;
+  externalId: string;
+  users: string[];
 }
diff --git a/jslib/common/src/models/request/importDirectoryRequestUser.ts b/jslib/common/src/models/request/importDirectoryRequestUser.ts
index 99d699e7..9dbf6a34 100644
--- a/jslib/common/src/models/request/importDirectoryRequestUser.ts
+++ b/jslib/common/src/models/request/importDirectoryRequestUser.ts
@@ -1,5 +1,5 @@
 export class ImportDirectoryRequestUser {
-    externalId: string;
-    email: string;
-    deleted: boolean;
+  externalId: string;
+  email: string;
+  deleted: boolean;
 }
diff --git a/jslib/common/src/models/request/importOrganizationCiphersRequest.ts b/jslib/common/src/models/request/importOrganizationCiphersRequest.ts
index a19293c2..f2936afb 100644
--- a/jslib/common/src/models/request/importOrganizationCiphersRequest.ts
+++ b/jslib/common/src/models/request/importOrganizationCiphersRequest.ts
@@ -1,9 +1,9 @@
-import { CipherRequest } from './cipherRequest';
-import { CollectionRequest } from './collectionRequest';
-import { KvpRequest } from './kvpRequest';
+import { CipherRequest } from "./cipherRequest";
+import { CollectionRequest } from "./collectionRequest";
+import { KvpRequest } from "./kvpRequest";
 
 export class ImportOrganizationCiphersRequest {
-    ciphers: CipherRequest[] = [];
-    collections: CollectionRequest[] = [];
-    collectionRelationships: KvpRequest<number, number>[] = [];
+  ciphers: CipherRequest[] = [];
+  collections: CollectionRequest[] = [];
+  collectionRelationships: KvpRequest<number, number>[] = [];
 }
diff --git a/jslib/common/src/models/request/kdfRequest.ts b/jslib/common/src/models/request/kdfRequest.ts
index 996aab0f..82a031b1 100644
--- a/jslib/common/src/models/request/kdfRequest.ts
+++ b/jslib/common/src/models/request/kdfRequest.ts
@@ -1,8 +1,8 @@
-import { PasswordRequest } from './passwordRequest';
+import { PasswordRequest } from "./passwordRequest";
 
-import { KdfType } from '../../enums/kdfType';
+import { KdfType } from "../../enums/kdfType";
 
 export class KdfRequest extends PasswordRequest {
-    kdf: KdfType;
-    kdfIterations: number;
+  kdf: KdfType;
+  kdfIterations: number;
 }
diff --git a/jslib/common/src/models/request/keyConnectorUserKeyRequest.ts b/jslib/common/src/models/request/keyConnectorUserKeyRequest.ts
index 182de57f..3df2db82 100644
--- a/jslib/common/src/models/request/keyConnectorUserKeyRequest.ts
+++ b/jslib/common/src/models/request/keyConnectorUserKeyRequest.ts
@@ -1,7 +1,7 @@
 export class KeyConnectorUserKeyRequest {
-    key: string;
+  key: string;
 
-    constructor(key: string) {
-        this.key = key;
-    }
+  constructor(key: string) {
+    this.key = key;
+  }
 }
diff --git a/jslib/common/src/models/request/keysRequest.ts b/jslib/common/src/models/request/keysRequest.ts
index 6ce11e8e..da4144e9 100644
--- a/jslib/common/src/models/request/keysRequest.ts
+++ b/jslib/common/src/models/request/keysRequest.ts
@@ -1,9 +1,9 @@
 export class KeysRequest {
-    publicKey: string;
-    encryptedPrivateKey: string;
+  publicKey: string;
+  encryptedPrivateKey: string;
 
-    constructor(publicKey: string, encryptedPrivateKey: string) {
-        this.publicKey = publicKey;
-        this.encryptedPrivateKey = encryptedPrivateKey;
-    }
+  constructor(publicKey: string, encryptedPrivateKey: string) {
+    this.publicKey = publicKey;
+    this.encryptedPrivateKey = encryptedPrivateKey;
+  }
 }
diff --git a/jslib/common/src/models/request/kvpRequest.ts b/jslib/common/src/models/request/kvpRequest.ts
index 0611a4e0..ca37a85d 100644
--- a/jslib/common/src/models/request/kvpRequest.ts
+++ b/jslib/common/src/models/request/kvpRequest.ts
@@ -1,9 +1,9 @@
 export class KvpRequest<TK, TV> {
-    key: TK;
-    value: TV;
+  key: TK;
+  value: TV;
 
-    constructor(key: TK, value: TV) {
-        this.key = key;
-        this.value = value;
-    }
+  constructor(key: TK, value: TV) {
+    this.key = key;
+    this.value = value;
+  }
 }
diff --git a/jslib/common/src/models/request/organization/organizationSponsorshipCreateRequest.ts b/jslib/common/src/models/request/organization/organizationSponsorshipCreateRequest.ts
index 6dd8c267..7cc854b6 100644
--- a/jslib/common/src/models/request/organization/organizationSponsorshipCreateRequest.ts
+++ b/jslib/common/src/models/request/organization/organizationSponsorshipCreateRequest.ts
@@ -1,4 +1,4 @@
-import { PlanSponsorshipType } from '../../../enums/planSponsorshipType';
+import { PlanSponsorshipType } from "../../../enums/planSponsorshipType";
 
 export class OrganizationSponsorshipCreateRequest {
   sponsoredEmail: string;
diff --git a/jslib/common/src/models/request/organization/organizationSponsorshipRedeemRequest.ts b/jslib/common/src/models/request/organization/organizationSponsorshipRedeemRequest.ts
index 7f325ea1..4c73836e 100644
--- a/jslib/common/src/models/request/organization/organizationSponsorshipRedeemRequest.ts
+++ b/jslib/common/src/models/request/organization/organizationSponsorshipRedeemRequest.ts
@@ -1,6 +1,6 @@
-import { PlanSponsorshipType } from '../../../enums/planSponsorshipType';
+import { PlanSponsorshipType } from "../../../enums/planSponsorshipType";
 
 export class OrganizationSponsorshipRedeemRequest {
-    planSponsorshipType: PlanSponsorshipType;
-    sponsoredOrganizationId: string;
+  planSponsorshipType: PlanSponsorshipType;
+  sponsoredOrganizationId: string;
 }
diff --git a/jslib/common/src/models/request/organization/organizationSsoRequest.ts b/jslib/common/src/models/request/organization/organizationSsoRequest.ts
index 74afb318..8a2cbab9 100644
--- a/jslib/common/src/models/request/organization/organizationSsoRequest.ts
+++ b/jslib/common/src/models/request/organization/organizationSsoRequest.ts
@@ -1,6 +1,6 @@
-import { SsoConfigApi } from '../../api/ssoConfigApi';
+import { SsoConfigApi } from "../../api/ssoConfigApi";
 
 export class OrganizationSsoRequest {
-    enabled: boolean = false;
-    data: SsoConfigApi;
+  enabled: boolean = false;
+  data: SsoConfigApi;
 }
diff --git a/jslib/common/src/models/request/organizationCreateRequest.ts b/jslib/common/src/models/request/organizationCreateRequest.ts
index 7be02660..db713d90 100644
--- a/jslib/common/src/models/request/organizationCreateRequest.ts
+++ b/jslib/common/src/models/request/organizationCreateRequest.ts
@@ -1,27 +1,27 @@
-import { PaymentMethodType } from '../../enums/paymentMethodType';
-import { PlanType } from '../../enums/planType';
+import { PaymentMethodType } from "../../enums/paymentMethodType";
+import { PlanType } from "../../enums/planType";
 
-import { OrganizationKeysRequest } from './organizationKeysRequest';
+import { OrganizationKeysRequest } from "./organizationKeysRequest";
 
 export class OrganizationCreateRequest {
-    name: string;
-    businessName: string;
-    billingEmail: string;
-    planType: PlanType;
-    key: string;
-    keys: OrganizationKeysRequest;
-    paymentMethodType: PaymentMethodType;
-    paymentToken: string;
-    additionalSeats: number;
-    maxAutoscaleSeats: number;
-    additionalStorageGb: number;
-    premiumAccessAddon: boolean;
-    collectionName: string;
-    taxIdNumber: string;
-    billingAddressLine1: string;
-    billingAddressLine2: string;
-    billingAddressCity: string;
-    billingAddressState: string;
-    billingAddressPostalCode: string;
-    billingAddressCountry: string;
+  name: string;
+  businessName: string;
+  billingEmail: string;
+  planType: PlanType;
+  key: string;
+  keys: OrganizationKeysRequest;
+  paymentMethodType: PaymentMethodType;
+  paymentToken: string;
+  additionalSeats: number;
+  maxAutoscaleSeats: number;
+  additionalStorageGb: number;
+  premiumAccessAddon: boolean;
+  collectionName: string;
+  taxIdNumber: string;
+  billingAddressLine1: string;
+  billingAddressLine2: string;
+  billingAddressCity: string;
+  billingAddressState: string;
+  billingAddressPostalCode: string;
+  billingAddressCountry: string;
 }
diff --git a/jslib/common/src/models/request/organizationImportGroupRequest.ts b/jslib/common/src/models/request/organizationImportGroupRequest.ts
index 0cbb0faf..086ce653 100644
--- a/jslib/common/src/models/request/organizationImportGroupRequest.ts
+++ b/jslib/common/src/models/request/organizationImportGroupRequest.ts
@@ -1,19 +1,18 @@
-import { ImportDirectoryRequestGroup } from './importDirectoryRequestGroup';
+import { ImportDirectoryRequestGroup } from "./importDirectoryRequestGroup";
 
 export class OrganizationImportGroupRequest {
-    name: string;
-    externalId: string;
-    memberExternalIds: string[];
+  name: string;
+  externalId: string;
+  memberExternalIds: string[];
 
-    constructor(model: Required<OrganizationImportGroupRequest> | ImportDirectoryRequestGroup) {
-        this.name = model.name;
-        this.externalId = model.externalId;
+  constructor(model: Required<OrganizationImportGroupRequest> | ImportDirectoryRequestGroup) {
+    this.name = model.name;
+    this.externalId = model.externalId;
 
-        if (model instanceof ImportDirectoryRequestGroup) {
-            this.memberExternalIds = model.users;
-        }
-        else {
-            this.memberExternalIds = model.memberExternalIds;
-        }
+    if (model instanceof ImportDirectoryRequestGroup) {
+      this.memberExternalIds = model.users;
+    } else {
+      this.memberExternalIds = model.memberExternalIds;
     }
+  }
 }
diff --git a/jslib/common/src/models/request/organizationImportMemberRequest.ts b/jslib/common/src/models/request/organizationImportMemberRequest.ts
index 78b09498..8161365c 100644
--- a/jslib/common/src/models/request/organizationImportMemberRequest.ts
+++ b/jslib/common/src/models/request/organizationImportMemberRequest.ts
@@ -1,13 +1,13 @@
-import { ImportDirectoryRequestUser } from './importDirectoryRequestUser';
+import { ImportDirectoryRequestUser } from "./importDirectoryRequestUser";
 
 export class OrganizationImportMemberRequest {
-    email: string;
-    externalId: string;
-    deleted: boolean;
+  email: string;
+  externalId: string;
+  deleted: boolean;
 
-    constructor(model: Required<OrganizationImportMemberRequest> | ImportDirectoryRequestUser) {
-        this.email = model.email;
-        this.externalId = model.externalId;
-        this.deleted = model.deleted;
-    }
+  constructor(model: Required<OrganizationImportMemberRequest> | ImportDirectoryRequestUser) {
+    this.email = model.email;
+    this.externalId = model.externalId;
+    this.deleted = model.deleted;
+  }
 }
diff --git a/jslib/common/src/models/request/organizationImportRequest.ts b/jslib/common/src/models/request/organizationImportRequest.ts
index 6b1bc304..4ff23df7 100644
--- a/jslib/common/src/models/request/organizationImportRequest.ts
+++ b/jslib/common/src/models/request/organizationImportRequest.ts
@@ -1,25 +1,31 @@
-import { ImportDirectoryRequest } from './importDirectoryRequest';
-import { OrganizationImportGroupRequest } from './organizationImportGroupRequest';
-import { OrganizationImportMemberRequest } from './organizationImportMemberRequest';
+import { ImportDirectoryRequest } from "./importDirectoryRequest";
+import { OrganizationImportGroupRequest } from "./organizationImportGroupRequest";
+import { OrganizationImportMemberRequest } from "./organizationImportMemberRequest";
 
 export class OrganizationImportRequest {
-    groups: OrganizationImportGroupRequest[] = [];
-    members: OrganizationImportMemberRequest[] = [];
-    overwriteExisting: boolean = false;
-    largeImport: boolean = false;
+  groups: OrganizationImportGroupRequest[] = [];
+  members: OrganizationImportMemberRequest[] = [];
+  overwriteExisting: boolean = false;
+  largeImport: boolean = false;
 
-    constructor(model: {
-        groups: Required<OrganizationImportGroupRequest>[],
-        users: Required<OrganizationImportMemberRequest>[], overwriteExisting: boolean, largeImport: boolean;
-    } | ImportDirectoryRequest) {
-        if (model instanceof ImportDirectoryRequest) {
-            this.groups = model.groups.map(g => new OrganizationImportGroupRequest(g));
-            this.members = model.users.map(u => new OrganizationImportMemberRequest(u));
-        } else {
-            this.groups = model.groups.map(g => new OrganizationImportGroupRequest(g));
-            this.members = model.users.map(u => new OrganizationImportMemberRequest(u));
+  constructor(
+    model:
+      | {
+          groups: Required<OrganizationImportGroupRequest>[];
+          users: Required<OrganizationImportMemberRequest>[];
+          overwriteExisting: boolean;
+          largeImport: boolean;
         }
-        this.overwriteExisting = model.overwriteExisting;
-        this.largeImport = model.largeImport;
+      | ImportDirectoryRequest
+  ) {
+    if (model instanceof ImportDirectoryRequest) {
+      this.groups = model.groups.map((g) => new OrganizationImportGroupRequest(g));
+      this.members = model.users.map((u) => new OrganizationImportMemberRequest(u));
+    } else {
+      this.groups = model.groups.map((g) => new OrganizationImportGroupRequest(g));
+      this.members = model.users.map((u) => new OrganizationImportMemberRequest(u));
     }
+    this.overwriteExisting = model.overwriteExisting;
+    this.largeImport = model.largeImport;
+  }
 }
diff --git a/jslib/common/src/models/request/organizationKeysRequest.ts b/jslib/common/src/models/request/organizationKeysRequest.ts
index 932f28ce..c63e05ab 100644
--- a/jslib/common/src/models/request/organizationKeysRequest.ts
+++ b/jslib/common/src/models/request/organizationKeysRequest.ts
@@ -1,7 +1,7 @@
-import { KeysRequest } from './keysRequest';
+import { KeysRequest } from "./keysRequest";
 
 export class OrganizationKeysRequest extends KeysRequest {
-    constructor(publicKey: string, encryptedPrivateKey: string) {
-        super(publicKey, encryptedPrivateKey);
-    }
+  constructor(publicKey: string, encryptedPrivateKey: string) {
+    super(publicKey, encryptedPrivateKey);
+  }
 }
diff --git a/jslib/common/src/models/request/organizationSubscriptionUpdateRequest.ts b/jslib/common/src/models/request/organizationSubscriptionUpdateRequest.ts
index 85ea6f4f..9db3d4be 100644
--- a/jslib/common/src/models/request/organizationSubscriptionUpdateRequest.ts
+++ b/jslib/common/src/models/request/organizationSubscriptionUpdateRequest.ts
@@ -1,3 +1,3 @@
 export class OrganizationSubscriptionUpdateRequest {
-    constructor(public seatAdjustment: number, public maxAutoscaleSeats?: number) { }
+  constructor(public seatAdjustment: number, public maxAutoscaleSeats?: number) {}
 }
diff --git a/jslib/common/src/models/request/organizationTaxInfoUpdateRequest.ts b/jslib/common/src/models/request/organizationTaxInfoUpdateRequest.ts
index 73df4ad5..283151f4 100644
--- a/jslib/common/src/models/request/organizationTaxInfoUpdateRequest.ts
+++ b/jslib/common/src/models/request/organizationTaxInfoUpdateRequest.ts
@@ -1,9 +1,9 @@
-import { TaxInfoUpdateRequest } from './taxInfoUpdateRequest';
+import { TaxInfoUpdateRequest } from "./taxInfoUpdateRequest";
 
 export class OrganizationTaxInfoUpdateRequest extends TaxInfoUpdateRequest {
-    taxId: string;
-    line1: string;
-    line2: string;
-    city: string;
-    state: string;
+  taxId: string;
+  line1: string;
+  line2: string;
+  city: string;
+  state: string;
 }
diff --git a/jslib/common/src/models/request/organizationUpdateRequest.ts b/jslib/common/src/models/request/organizationUpdateRequest.ts
index 6e20b671..faddf641 100644
--- a/jslib/common/src/models/request/organizationUpdateRequest.ts
+++ b/jslib/common/src/models/request/organizationUpdateRequest.ts
@@ -1,9 +1,9 @@
-import { OrganizationKeysRequest } from './organizationKeysRequest';
+import { OrganizationKeysRequest } from "./organizationKeysRequest";
 
 export class OrganizationUpdateRequest {
-    name: string;
-    identifier: string;
-    businessName: string;
-    billingEmail: string;
-    keys: OrganizationKeysRequest;
+  name: string;
+  identifier: string;
+  businessName: string;
+  billingEmail: string;
+  keys: OrganizationKeysRequest;
 }
diff --git a/jslib/common/src/models/request/organizationUpgradeRequest.ts b/jslib/common/src/models/request/organizationUpgradeRequest.ts
index 1000e19e..b62976fa 100644
--- a/jslib/common/src/models/request/organizationUpgradeRequest.ts
+++ b/jslib/common/src/models/request/organizationUpgradeRequest.ts
@@ -1,14 +1,14 @@
-import { PlanType } from '../../enums/planType';
+import { PlanType } from "../../enums/planType";
 
-import { OrganizationKeysRequest } from './organizationKeysRequest';
+import { OrganizationKeysRequest } from "./organizationKeysRequest";
 
 export class OrganizationUpgradeRequest {
-    businessName: string;
-    planType: PlanType;
-    additionalSeats: number;
-    additionalStorageGb: number;
-    premiumAccessAddon: boolean;
-    billingAddressCountry: string;
-    billingAddressPostalCode: string;
-    keys: OrganizationKeysRequest;
+  businessName: string;
+  planType: PlanType;
+  additionalSeats: number;
+  additionalStorageGb: number;
+  premiumAccessAddon: boolean;
+  billingAddressCountry: string;
+  billingAddressPostalCode: string;
+  keys: OrganizationKeysRequest;
 }
diff --git a/jslib/common/src/models/request/organizationUserAcceptRequest.ts b/jslib/common/src/models/request/organizationUserAcceptRequest.ts
index acd36a67..c4b2a4d3 100644
--- a/jslib/common/src/models/request/organizationUserAcceptRequest.ts
+++ b/jslib/common/src/models/request/organizationUserAcceptRequest.ts
@@ -1,3 +1,3 @@
 export class OrganizationUserAcceptRequest {
-    token: string;
+  token: string;
 }
diff --git a/jslib/common/src/models/request/organizationUserBulkConfirmRequest.ts b/jslib/common/src/models/request/organizationUserBulkConfirmRequest.ts
index 8412baed..35e05602 100644
--- a/jslib/common/src/models/request/organizationUserBulkConfirmRequest.ts
+++ b/jslib/common/src/models/request/organizationUserBulkConfirmRequest.ts
@@ -1,12 +1,12 @@
 type OrganizationUserBulkRequestEntry = {
-    id: string;
-    key: string;
+  id: string;
+  key: string;
 };
 
 export class OrganizationUserBulkConfirmRequest {
-    keys: OrganizationUserBulkRequestEntry[];
+  keys: OrganizationUserBulkRequestEntry[];
 
-    constructor(keys: OrganizationUserBulkRequestEntry[]) {
-        this.keys = keys;
-    }
+  constructor(keys: OrganizationUserBulkRequestEntry[]) {
+    this.keys = keys;
+  }
 }
diff --git a/jslib/common/src/models/request/organizationUserBulkRequest.ts b/jslib/common/src/models/request/organizationUserBulkRequest.ts
index 4b92620c..c73800eb 100644
--- a/jslib/common/src/models/request/organizationUserBulkRequest.ts
+++ b/jslib/common/src/models/request/organizationUserBulkRequest.ts
@@ -1,7 +1,7 @@
 export class OrganizationUserBulkRequest {
-    ids: string[];
+  ids: string[];
 
-    constructor(ids: string[]) {
-        this.ids = ids == null ? [] : ids;
-    }
+  constructor(ids: string[]) {
+    this.ids = ids == null ? [] : ids;
+  }
 }
diff --git a/jslib/common/src/models/request/organizationUserConfirmRequest.ts b/jslib/common/src/models/request/organizationUserConfirmRequest.ts
index c4d23305..abd48749 100644
--- a/jslib/common/src/models/request/organizationUserConfirmRequest.ts
+++ b/jslib/common/src/models/request/organizationUserConfirmRequest.ts
@@ -1,3 +1,3 @@
 export class OrganizationUserConfirmRequest {
-    key: string;
+  key: string;
 }
diff --git a/jslib/common/src/models/request/organizationUserInviteRequest.ts b/jslib/common/src/models/request/organizationUserInviteRequest.ts
index 4195eec8..5c4046af 100644
--- a/jslib/common/src/models/request/organizationUserInviteRequest.ts
+++ b/jslib/common/src/models/request/organizationUserInviteRequest.ts
@@ -1,12 +1,12 @@
-import { SelectionReadOnlyRequest } from './selectionReadOnlyRequest';
+import { SelectionReadOnlyRequest } from "./selectionReadOnlyRequest";
 
-import { OrganizationUserType } from '../../enums/organizationUserType';
-import { PermissionsApi } from '../api/permissionsApi';
+import { OrganizationUserType } from "../../enums/organizationUserType";
+import { PermissionsApi } from "../api/permissionsApi";
 
 export class OrganizationUserInviteRequest {
-    emails: string[] = [];
-    type: OrganizationUserType;
-    accessAll: boolean;
-    collections: SelectionReadOnlyRequest[] = [];
-    permissions: PermissionsApi;
+  emails: string[] = [];
+  type: OrganizationUserType;
+  accessAll: boolean;
+  collections: SelectionReadOnlyRequest[] = [];
+  permissions: PermissionsApi;
 }
diff --git a/jslib/common/src/models/request/organizationUserResetPasswordEnrollmentRequest.ts b/jslib/common/src/models/request/organizationUserResetPasswordEnrollmentRequest.ts
index d017c4a6..8d88164d 100644
--- a/jslib/common/src/models/request/organizationUserResetPasswordEnrollmentRequest.ts
+++ b/jslib/common/src/models/request/organizationUserResetPasswordEnrollmentRequest.ts
@@ -1,3 +1,3 @@
 export class OrganizationUserResetPasswordEnrollmentRequest {
-    resetPasswordKey: string;
+  resetPasswordKey: string;
 }
diff --git a/jslib/common/src/models/request/organizationUserResetPasswordRequest.ts b/jslib/common/src/models/request/organizationUserResetPasswordRequest.ts
index 7e0b1bdb..b0c4e483 100644
--- a/jslib/common/src/models/request/organizationUserResetPasswordRequest.ts
+++ b/jslib/common/src/models/request/organizationUserResetPasswordRequest.ts
@@ -1,4 +1,4 @@
 export class OrganizationUserResetPasswordRequest {
-    newMasterPasswordHash: string;
-    key: string;
+  newMasterPasswordHash: string;
+  key: string;
 }
diff --git a/jslib/common/src/models/request/organizationUserUpdateGroupsRequest.ts b/jslib/common/src/models/request/organizationUserUpdateGroupsRequest.ts
index 0d7805cc..cd30d940 100644
--- a/jslib/common/src/models/request/organizationUserUpdateGroupsRequest.ts
+++ b/jslib/common/src/models/request/organizationUserUpdateGroupsRequest.ts
@@ -1,3 +1,3 @@
 export class OrganizationUserUpdateGroupsRequest {
-    groupIds: string[] = [];
+  groupIds: string[] = [];
 }
diff --git a/jslib/common/src/models/request/organizationUserUpdateRequest.ts b/jslib/common/src/models/request/organizationUserUpdateRequest.ts
index 80803cd6..2bd9dd62 100644
--- a/jslib/common/src/models/request/organizationUserUpdateRequest.ts
+++ b/jslib/common/src/models/request/organizationUserUpdateRequest.ts
@@ -1,11 +1,11 @@
-import { SelectionReadOnlyRequest } from './selectionReadOnlyRequest';
+import { SelectionReadOnlyRequest } from "./selectionReadOnlyRequest";
 
-import { OrganizationUserType } from '../../enums/organizationUserType';
-import { PermissionsApi } from '../api/permissionsApi';
+import { OrganizationUserType } from "../../enums/organizationUserType";
+import { PermissionsApi } from "../api/permissionsApi";
 
 export class OrganizationUserUpdateRequest {
-    type: OrganizationUserType;
-    accessAll: boolean;
-    collections: SelectionReadOnlyRequest[] = [];
-    permissions: PermissionsApi;
+  type: OrganizationUserType;
+  accessAll: boolean;
+  collections: SelectionReadOnlyRequest[] = [];
+  permissions: PermissionsApi;
 }
diff --git a/jslib/common/src/models/request/passwordHintRequest.ts b/jslib/common/src/models/request/passwordHintRequest.ts
index 35b37f4f..7182e05e 100644
--- a/jslib/common/src/models/request/passwordHintRequest.ts
+++ b/jslib/common/src/models/request/passwordHintRequest.ts
@@ -1,7 +1,7 @@
 export class PasswordHintRequest {
-    email: string;
+  email: string;
 
-    constructor(email: string) {
-        this.email = email;
-    }
+  constructor(email: string) {
+    this.email = email;
+  }
 }
diff --git a/jslib/common/src/models/request/passwordHistoryRequest.ts b/jslib/common/src/models/request/passwordHistoryRequest.ts
index 7b74cb12..6cca2b86 100644
--- a/jslib/common/src/models/request/passwordHistoryRequest.ts
+++ b/jslib/common/src/models/request/passwordHistoryRequest.ts
@@ -1,4 +1,4 @@
 export class PasswordHistoryRequest {
-    password: string;
-    lastUsedDate: Date;
+  password: string;
+  lastUsedDate: Date;
 }
diff --git a/jslib/common/src/models/request/passwordRequest.ts b/jslib/common/src/models/request/passwordRequest.ts
index 0d639a09..9f7df7df 100644
--- a/jslib/common/src/models/request/passwordRequest.ts
+++ b/jslib/common/src/models/request/passwordRequest.ts
@@ -1,6 +1,6 @@
-import { SecretVerificationRequest } from './secretVerificationRequest';
+import { SecretVerificationRequest } from "./secretVerificationRequest";
 
 export class PasswordRequest extends SecretVerificationRequest {
-    newMasterPasswordHash: string;
-    key: string;
+  newMasterPasswordHash: string;
+  key: string;
 }
diff --git a/jslib/common/src/models/request/paymentRequest.ts b/jslib/common/src/models/request/paymentRequest.ts
index e3d420ea..8e7f70a1 100644
--- a/jslib/common/src/models/request/paymentRequest.ts
+++ b/jslib/common/src/models/request/paymentRequest.ts
@@ -1,7 +1,7 @@
-import { PaymentMethodType } from '../../enums/paymentMethodType';
-import { OrganizationTaxInfoUpdateRequest } from '../request/organizationTaxInfoUpdateRequest';
+import { PaymentMethodType } from "../../enums/paymentMethodType";
+import { OrganizationTaxInfoUpdateRequest } from "../request/organizationTaxInfoUpdateRequest";
 
 export class PaymentRequest extends OrganizationTaxInfoUpdateRequest {
-    paymentMethodType: PaymentMethodType;
-    paymentToken: string;
+  paymentMethodType: PaymentMethodType;
+  paymentToken: string;
 }
diff --git a/jslib/common/src/models/request/policyRequest.ts b/jslib/common/src/models/request/policyRequest.ts
index a1314d08..98b05912 100644
--- a/jslib/common/src/models/request/policyRequest.ts
+++ b/jslib/common/src/models/request/policyRequest.ts
@@ -1,7 +1,7 @@
-import { PolicyType } from '../../enums/policyType';
+import { PolicyType } from "../../enums/policyType";
 
 export class PolicyRequest {
-    type: PolicyType;
-    enabled: boolean;
-    data: any;
+  type: PolicyType;
+  enabled: boolean;
+  data: any;
 }
diff --git a/jslib/common/src/models/request/preloginRequest.ts b/jslib/common/src/models/request/preloginRequest.ts
index bee6058c..689204b7 100644
--- a/jslib/common/src/models/request/preloginRequest.ts
+++ b/jslib/common/src/models/request/preloginRequest.ts
@@ -1,7 +1,7 @@
 export class PreloginRequest {
-    email: string;
+  email: string;
 
-    constructor(email: string) {
-        this.email = email;
-    }
+  constructor(email: string) {
+    this.email = email;
+  }
 }
diff --git a/jslib/common/src/models/request/provider/providerAddOrganizationRequest.ts b/jslib/common/src/models/request/provider/providerAddOrganizationRequest.ts
index ebdd1bc6..380eea1d 100644
--- a/jslib/common/src/models/request/provider/providerAddOrganizationRequest.ts
+++ b/jslib/common/src/models/request/provider/providerAddOrganizationRequest.ts
@@ -1,4 +1,4 @@
 export class ProviderAddOrganizationRequest {
-    organizationId: string;
-    key: string;
+  organizationId: string;
+  key: string;
 }
diff --git a/jslib/common/src/models/request/provider/providerOrganizationCreateRequest.ts b/jslib/common/src/models/request/provider/providerOrganizationCreateRequest.ts
index e116de6a..8d02f530 100644
--- a/jslib/common/src/models/request/provider/providerOrganizationCreateRequest.ts
+++ b/jslib/common/src/models/request/provider/providerOrganizationCreateRequest.ts
@@ -1,5 +1,8 @@
-import { OrganizationCreateRequest } from '../organizationCreateRequest';
+import { OrganizationCreateRequest } from "../organizationCreateRequest";
 
 export class ProviderOrganizationCreateRequest {
-    constructor(public clientOwnerEmail: string, public organizationCreateRequest: OrganizationCreateRequest) { }
+  constructor(
+    public clientOwnerEmail: string,
+    public organizationCreateRequest: OrganizationCreateRequest
+  ) {}
 }
diff --git a/jslib/common/src/models/request/provider/providerSetupRequest.ts b/jslib/common/src/models/request/provider/providerSetupRequest.ts
index 5063fec0..61eb943f 100644
--- a/jslib/common/src/models/request/provider/providerSetupRequest.ts
+++ b/jslib/common/src/models/request/provider/providerSetupRequest.ts
@@ -1,7 +1,7 @@
 export class ProviderSetupRequest {
-    name: string;
-    businessName: string;
-    billingEmail: string;
-    token: string;
-    key: string;
+  name: string;
+  businessName: string;
+  billingEmail: string;
+  token: string;
+  key: string;
 }
diff --git a/jslib/common/src/models/request/provider/providerUpdateRequest.ts b/jslib/common/src/models/request/provider/providerUpdateRequest.ts
index d30e6346..dafa7418 100644
--- a/jslib/common/src/models/request/provider/providerUpdateRequest.ts
+++ b/jslib/common/src/models/request/provider/providerUpdateRequest.ts
@@ -1,5 +1,5 @@
 export class ProviderUpdateRequest {
-    name: string;
-    businessName: string;
-    billingEmail: string;
+  name: string;
+  businessName: string;
+  billingEmail: string;
 }
diff --git a/jslib/common/src/models/request/provider/providerUserAcceptRequest.ts b/jslib/common/src/models/request/provider/providerUserAcceptRequest.ts
index 15e0370b..0435e1df 100644
--- a/jslib/common/src/models/request/provider/providerUserAcceptRequest.ts
+++ b/jslib/common/src/models/request/provider/providerUserAcceptRequest.ts
@@ -1,3 +1,3 @@
 export class ProviderUserAcceptRequest {
-    token: string;
+  token: string;
 }
diff --git a/jslib/common/src/models/request/provider/providerUserBulkConfirmRequest.ts b/jslib/common/src/models/request/provider/providerUserBulkConfirmRequest.ts
index cb5a252c..76628b09 100644
--- a/jslib/common/src/models/request/provider/providerUserBulkConfirmRequest.ts
+++ b/jslib/common/src/models/request/provider/providerUserBulkConfirmRequest.ts
@@ -1,12 +1,12 @@
 type ProviderUserBulkRequestEntry = {
-    id: string;
-    key: string;
+  id: string;
+  key: string;
 };
 
 export class ProviderUserBulkConfirmRequest {
-    keys: ProviderUserBulkRequestEntry[];
+  keys: ProviderUserBulkRequestEntry[];
 
-    constructor(keys: ProviderUserBulkRequestEntry[]) {
-        this.keys = keys;
-    }
+  constructor(keys: ProviderUserBulkRequestEntry[]) {
+    this.keys = keys;
+  }
 }
diff --git a/jslib/common/src/models/request/provider/providerUserBulkRequest.ts b/jslib/common/src/models/request/provider/providerUserBulkRequest.ts
index e676b1f8..f45ed1bb 100644
--- a/jslib/common/src/models/request/provider/providerUserBulkRequest.ts
+++ b/jslib/common/src/models/request/provider/providerUserBulkRequest.ts
@@ -1,7 +1,7 @@
 export class ProviderUserBulkRequest {
-    ids: string[];
+  ids: string[];
 
-    constructor(ids: string[]) {
-        this.ids = ids == null ? [] : ids;
-    }
+  constructor(ids: string[]) {
+    this.ids = ids == null ? [] : ids;
+  }
 }
diff --git a/jslib/common/src/models/request/provider/providerUserConfirmRequest.ts b/jslib/common/src/models/request/provider/providerUserConfirmRequest.ts
index 8d7203d6..1b7d4a06 100644
--- a/jslib/common/src/models/request/provider/providerUserConfirmRequest.ts
+++ b/jslib/common/src/models/request/provider/providerUserConfirmRequest.ts
@@ -1,3 +1,3 @@
 export class ProviderUserConfirmRequest {
-    key: string;
+  key: string;
 }
diff --git a/jslib/common/src/models/request/provider/providerUserInviteRequest.ts b/jslib/common/src/models/request/provider/providerUserInviteRequest.ts
index d8daedd2..65d8ba67 100644
--- a/jslib/common/src/models/request/provider/providerUserInviteRequest.ts
+++ b/jslib/common/src/models/request/provider/providerUserInviteRequest.ts
@@ -1,6 +1,6 @@
-import { ProviderUserType } from '../../../enums/providerUserType';
+import { ProviderUserType } from "../../../enums/providerUserType";
 
 export class ProviderUserInviteRequest {
-    emails: string[] = [];
-    type: ProviderUserType;
+  emails: string[] = [];
+  type: ProviderUserType;
 }
diff --git a/jslib/common/src/models/request/provider/providerUserUpdateRequest.ts b/jslib/common/src/models/request/provider/providerUserUpdateRequest.ts
index 77519e24..25efdd89 100644
--- a/jslib/common/src/models/request/provider/providerUserUpdateRequest.ts
+++ b/jslib/common/src/models/request/provider/providerUserUpdateRequest.ts
@@ -1,5 +1,5 @@
-import { ProviderUserType } from '../../../enums/providerUserType';
+import { ProviderUserType } from "../../../enums/providerUserType";
 
 export class ProviderUserUpdateRequest {
-    type: ProviderUserType;
+  type: ProviderUserType;
 }
diff --git a/jslib/common/src/models/request/referenceEventRequest.ts b/jslib/common/src/models/request/referenceEventRequest.ts
index 4cd8c507..7a0b535a 100644
--- a/jslib/common/src/models/request/referenceEventRequest.ts
+++ b/jslib/common/src/models/request/referenceEventRequest.ts
@@ -1,5 +1,5 @@
 export class ReferenceEventRequest {
-    id: string;
-    layout: string;
-    flow: string;
+  id: string;
+  layout: string;
+  flow: string;
 }
diff --git a/jslib/common/src/models/request/registerRequest.ts b/jslib/common/src/models/request/registerRequest.ts
index 04f06b49..5c53ce59 100644
--- a/jslib/common/src/models/request/registerRequest.ts
+++ b/jslib/common/src/models/request/registerRequest.ts
@@ -1,20 +1,27 @@
-import { KeysRequest } from './keysRequest';
-import { ReferenceEventRequest } from './referenceEventRequest';
+import { KeysRequest } from "./keysRequest";
+import { ReferenceEventRequest } from "./referenceEventRequest";
 
-import { KdfType } from '../../enums/kdfType';
+import { KdfType } from "../../enums/kdfType";
 
-import { CaptchaProtectedRequest } from './captchaProtectedRequest';
+import { CaptchaProtectedRequest } from "./captchaProtectedRequest";
 
 export class RegisterRequest implements CaptchaProtectedRequest {
-    masterPasswordHint: string;
-    keys: KeysRequest;
-    token: string;
-    organizationUserId: string;
+  masterPasswordHint: string;
+  keys: KeysRequest;
+  token: string;
+  organizationUserId: string;
 
-
-    constructor(public email: string, public name: string, public masterPasswordHash: string,
-        masterPasswordHint: string, public key: string, public kdf: KdfType, public kdfIterations: number,
-        public referenceData: ReferenceEventRequest, public captchaResponse: string) {
-        this.masterPasswordHint = masterPasswordHint ? masterPasswordHint : null;
-    }
+  constructor(
+    public email: string,
+    public name: string,
+    public masterPasswordHash: string,
+    masterPasswordHint: string,
+    public key: string,
+    public kdf: KdfType,
+    public kdfIterations: number,
+    public referenceData: ReferenceEventRequest,
+    public captchaResponse: string
+  ) {
+    this.masterPasswordHint = masterPasswordHint ? masterPasswordHint : null;
+  }
 }
diff --git a/jslib/common/src/models/request/seatRequest.ts b/jslib/common/src/models/request/seatRequest.ts
index 92d47669..d60e41fa 100644
--- a/jslib/common/src/models/request/seatRequest.ts
+++ b/jslib/common/src/models/request/seatRequest.ts
@@ -1,3 +1,3 @@
 export class SeatRequest {
-    seatAdjustment: number;
+  seatAdjustment: number;
 }
diff --git a/jslib/common/src/models/request/secretVerificationRequest.ts b/jslib/common/src/models/request/secretVerificationRequest.ts
index 554aa1c6..c0170a3e 100644
--- a/jslib/common/src/models/request/secretVerificationRequest.ts
+++ b/jslib/common/src/models/request/secretVerificationRequest.ts
@@ -1,4 +1,4 @@
 export class SecretVerificationRequest {
-    masterPasswordHash: string;
-    otp: string;
+  masterPasswordHash: string;
+  otp: string;
 }
diff --git a/jslib/common/src/models/request/selectionReadOnlyRequest.ts b/jslib/common/src/models/request/selectionReadOnlyRequest.ts
index d001edb2..7b007324 100644
--- a/jslib/common/src/models/request/selectionReadOnlyRequest.ts
+++ b/jslib/common/src/models/request/selectionReadOnlyRequest.ts
@@ -1,11 +1,11 @@
 export class SelectionReadOnlyRequest {
-    id: string;
-    readOnly: boolean;
-    hidePasswords: boolean;
+  id: string;
+  readOnly: boolean;
+  hidePasswords: boolean;
 
-    constructor(id: string, readOnly: boolean, hidePasswords: boolean) {
-        this.id = id;
-        this.readOnly = readOnly;
-        this.hidePasswords = hidePasswords;
-    }
+  constructor(id: string, readOnly: boolean, hidePasswords: boolean) {
+    this.id = id;
+    this.readOnly = readOnly;
+    this.hidePasswords = hidePasswords;
+  }
 }
diff --git a/jslib/common/src/models/request/sendAccessRequest.ts b/jslib/common/src/models/request/sendAccessRequest.ts
index 3d49c0c2..7607b03c 100644
--- a/jslib/common/src/models/request/sendAccessRequest.ts
+++ b/jslib/common/src/models/request/sendAccessRequest.ts
@@ -1,3 +1,3 @@
 export class SendAccessRequest {
-    password: string;
+  password: string;
 }
diff --git a/jslib/common/src/models/request/sendRequest.ts b/jslib/common/src/models/request/sendRequest.ts
index 5e5861f0..6fa481ee 100644
--- a/jslib/common/src/models/request/sendRequest.ts
+++ b/jslib/common/src/models/request/sendRequest.ts
@@ -1,50 +1,50 @@
-import { SendType } from '../../enums/sendType';
+import { SendType } from "../../enums/sendType";
 
-import { SendFileApi } from '../api/sendFileApi';
-import { SendTextApi } from '../api/sendTextApi';
+import { SendFileApi } from "../api/sendFileApi";
+import { SendTextApi } from "../api/sendTextApi";
 
-import { Send } from '../domain/send';
+import { Send } from "../domain/send";
 
 export class SendRequest {
-    type: SendType;
-    fileLength?: number;
-    name: string;
-    notes: string;
-    key: string;
-    maxAccessCount?: number;
-    expirationDate: string;
-    deletionDate: string;
-    text: SendTextApi;
-    file: SendFileApi;
-    password: string;
-    disabled: boolean;
-    hideEmail: boolean;
+  type: SendType;
+  fileLength?: number;
+  name: string;
+  notes: string;
+  key: string;
+  maxAccessCount?: number;
+  expirationDate: string;
+  deletionDate: string;
+  text: SendTextApi;
+  file: SendFileApi;
+  password: string;
+  disabled: boolean;
+  hideEmail: boolean;
 
-    constructor(send: Send, fileLength?: number) {
-        this.type = send.type;
-        this.fileLength = fileLength;
-        this.name = send.name ? send.name.encryptedString : null;
-        this.notes = send.notes ? send.notes.encryptedString : null;
-        this.maxAccessCount = send.maxAccessCount;
-        this.expirationDate = send.expirationDate != null ? send.expirationDate.toISOString() : null;
-        this.deletionDate = send.deletionDate != null ? send.deletionDate.toISOString() : null;
-        this.key = send.key != null ? send.key.encryptedString : null;
-        this.password = send.password;
-        this.disabled = send.disabled;
-        this.hideEmail = send.hideEmail;
+  constructor(send: Send, fileLength?: number) {
+    this.type = send.type;
+    this.fileLength = fileLength;
+    this.name = send.name ? send.name.encryptedString : null;
+    this.notes = send.notes ? send.notes.encryptedString : null;
+    this.maxAccessCount = send.maxAccessCount;
+    this.expirationDate = send.expirationDate != null ? send.expirationDate.toISOString() : null;
+    this.deletionDate = send.deletionDate != null ? send.deletionDate.toISOString() : null;
+    this.key = send.key != null ? send.key.encryptedString : null;
+    this.password = send.password;
+    this.disabled = send.disabled;
+    this.hideEmail = send.hideEmail;
 
-        switch (this.type) {
-            case SendType.Text:
-                this.text = new SendTextApi();
-                this.text.text = send.text.text != null ? send.text.text.encryptedString : null;
-                this.text.hidden = send.text.hidden;
-                break;
-            case SendType.File:
-                this.file = new SendFileApi();
-                this.file.fileName = send.file.fileName != null ? send.file.fileName.encryptedString : null;
-                break;
-            default:
-                break;
-        }
+    switch (this.type) {
+      case SendType.Text:
+        this.text = new SendTextApi();
+        this.text.text = send.text.text != null ? send.text.text.encryptedString : null;
+        this.text.hidden = send.text.hidden;
+        break;
+      case SendType.File:
+        this.file = new SendFileApi();
+        this.file.fileName = send.file.fileName != null ? send.file.fileName.encryptedString : null;
+        break;
+      default:
+        break;
     }
+  }
 }
diff --git a/jslib/common/src/models/request/sendWithIdRequest.ts b/jslib/common/src/models/request/sendWithIdRequest.ts
index 277cfa48..903151e3 100644
--- a/jslib/common/src/models/request/sendWithIdRequest.ts
+++ b/jslib/common/src/models/request/sendWithIdRequest.ts
@@ -1,12 +1,12 @@
-import { SendRequest } from './sendRequest';
+import { SendRequest } from "./sendRequest";
 
-import { Send } from '../domain/send';
+import { Send } from "../domain/send";
 
 export class SendWithIdRequest extends SendRequest {
-    id: string;
+  id: string;
 
-    constructor(send: Send) {
-        super(send);
-        this.id = send.id;
-    }
+  constructor(send: Send) {
+    super(send);
+    this.id = send.id;
+  }
 }
diff --git a/jslib/common/src/models/request/setPasswordRequest.ts b/jslib/common/src/models/request/setPasswordRequest.ts
index 70c77e62..de3b8489 100644
--- a/jslib/common/src/models/request/setPasswordRequest.ts
+++ b/jslib/common/src/models/request/setPasswordRequest.ts
@@ -1,24 +1,31 @@
-import { KeysRequest } from './keysRequest';
+import { KeysRequest } from "./keysRequest";
 
-import { KdfType } from '../../enums/kdfType';
+import { KdfType } from "../../enums/kdfType";
 
 export class SetPasswordRequest {
-    masterPasswordHash: string;
-    key: string;
-    masterPasswordHint: string;
-    keys: KeysRequest;
-    kdf: KdfType;
-    kdfIterations: number;
-    orgIdentifier: string;
+  masterPasswordHash: string;
+  key: string;
+  masterPasswordHint: string;
+  keys: KeysRequest;
+  kdf: KdfType;
+  kdfIterations: number;
+  orgIdentifier: string;
 
-    constructor(masterPasswordHash: string, key: string, masterPasswordHint: string, kdf: KdfType,
-        kdfIterations: number, orgIdentifier: string, keys: KeysRequest) {
-        this.masterPasswordHash = masterPasswordHash;
-        this.key = key;
-        this.masterPasswordHint = masterPasswordHint;
-        this.kdf = kdf;
-        this.kdfIterations = kdfIterations;
-        this.orgIdentifier = orgIdentifier;
-        this.keys = keys;
-    }
+  constructor(
+    masterPasswordHash: string,
+    key: string,
+    masterPasswordHint: string,
+    kdf: KdfType,
+    kdfIterations: number,
+    orgIdentifier: string,
+    keys: KeysRequest
+  ) {
+    this.masterPasswordHash = masterPasswordHash;
+    this.key = key;
+    this.masterPasswordHint = masterPasswordHint;
+    this.kdf = kdf;
+    this.kdfIterations = kdfIterations;
+    this.orgIdentifier = orgIdentifier;
+    this.keys = keys;
+  }
 }
diff --git a/jslib/common/src/models/request/storageRequest.ts b/jslib/common/src/models/request/storageRequest.ts
index f4b78559..4b3b614d 100644
--- a/jslib/common/src/models/request/storageRequest.ts
+++ b/jslib/common/src/models/request/storageRequest.ts
@@ -1,3 +1,3 @@
 export class StorageRequest {
-    storageGbAdjustment: number;
+  storageGbAdjustment: number;
 }
diff --git a/jslib/common/src/models/request/taxInfoUpdateRequest.ts b/jslib/common/src/models/request/taxInfoUpdateRequest.ts
index 5485164e..6881a8a4 100644
--- a/jslib/common/src/models/request/taxInfoUpdateRequest.ts
+++ b/jslib/common/src/models/request/taxInfoUpdateRequest.ts
@@ -1,4 +1,4 @@
 export class TaxInfoUpdateRequest {
-    country: string;
-    postalCode: string;
+  country: string;
+  postalCode: string;
 }
diff --git a/jslib/common/src/models/request/tokenRequest.ts b/jslib/common/src/models/request/tokenRequest.ts
index 41797eb0..72b8ac07 100644
--- a/jslib/common/src/models/request/tokenRequest.ts
+++ b/jslib/common/src/models/request/tokenRequest.ts
@@ -1,84 +1,96 @@
-import { TwoFactorProviderType } from '../../enums/twoFactorProviderType';
+import { TwoFactorProviderType } from "../../enums/twoFactorProviderType";
 
-import { CaptchaProtectedRequest } from './captchaProtectedRequest';
-import { DeviceRequest } from './deviceRequest';
+import { CaptchaProtectedRequest } from "./captchaProtectedRequest";
+import { DeviceRequest } from "./deviceRequest";
 
-import { Utils } from '../../misc/utils';
+import { Utils } from "../../misc/utils";
 
 export class TokenRequest implements CaptchaProtectedRequest {
-    email: string;
-    masterPasswordHash: string;
-    code: string;
-    codeVerifier: string;
-    redirectUri: string;
-    clientId: string;
-    clientSecret: string;
-    device?: DeviceRequest;
+  email: string;
+  masterPasswordHash: string;
+  code: string;
+  codeVerifier: string;
+  redirectUri: string;
+  clientId: string;
+  clientSecret: string;
+  device?: DeviceRequest;
+  orgId?: string;
 
-    constructor(credentials: string[], codes: string[], clientIdClientSecret: string[], public provider: TwoFactorProviderType,
-        public token: string, public remember: boolean, public captchaResponse: string, device?: DeviceRequest) {
-        if (credentials != null && credentials.length > 1) {
-            this.email = credentials[0];
-            this.masterPasswordHash = credentials[1];
-        } else if (codes != null && codes.length > 2) {
-            this.code = codes[0];
-            this.codeVerifier = codes[1];
-            this.redirectUri = codes[2];
-        } else if (clientIdClientSecret != null && clientIdClientSecret.length > 1) {
-            this.clientId = clientIdClientSecret[0];
-            this.clientSecret = clientIdClientSecret[1];
-        }
-        this.device = device != null ? device : null;
+  constructor(
+    credentials: string[],
+    codes: string[],
+    clientIdClientSecret: string[],
+    public provider: TwoFactorProviderType,
+    public token: string,
+    public remember: boolean,
+    public captchaResponse: string,
+    device?: DeviceRequest,
+    orgId?: string
+  ) {
+    if (credentials != null && credentials.length > 1) {
+      this.email = credentials[0];
+      this.masterPasswordHash = credentials[1];
+    } else if (codes != null && codes.length > 2) {
+      this.code = codes[0];
+      this.codeVerifier = codes[1];
+      this.redirectUri = codes[2];
+    } else if (clientIdClientSecret != null && clientIdClientSecret.length > 1) {
+      this.clientId = clientIdClientSecret[0];
+      this.clientSecret = clientIdClientSecret[1];
     }
+    if (orgId && orgId !== '') {
+      this.orgId = orgId;
+    }
+    this.device = device != null ? device : null;
+  }
 
-    toIdentityToken(clientId: string) {
-        const obj: any = {
-            scope: 'api offline_access',
-            client_id: clientId,
-        };
-
-        if (this.clientSecret != null) {
-            obj.scope = clientId.startsWith('organization') ? 'api.organization' : 'api';
-            obj.grant_type = 'client_credentials';
-            obj.client_secret = this.clientSecret;
-        } else if (this.masterPasswordHash != null && this.email != null) {
-            obj.grant_type = 'password';
-            obj.username = this.email;
-            obj.password = this.masterPasswordHash;
-        } else if (this.code != null && this.codeVerifier != null && this.redirectUri != null) {
-            obj.grant_type = 'authorization_code';
-            obj.code = this.code;
-            obj.code_verifier = this.codeVerifier;
-            obj.redirect_uri = this.redirectUri;
-        } else {
-            throw new Error('must provide credentials or codes');
-        }
-
-        if (this.device) {
-            obj.deviceType = this.device.type;
-            obj.deviceIdentifier = this.device.identifier;
-            obj.deviceName = this.device.name;
-            // no push tokens for browser apps yet
-            // obj.devicePushToken = this.device.pushToken;
-        }
+  toIdentityToken(clientId: string) {
+    const obj: any = {
+      scope: "api offline_access",
+      client_id: clientId,
+    };
 
-        if (this.token && this.provider != null) {
-            obj.twoFactorToken = this.token;
-            obj.twoFactorProvider = this.provider;
-            obj.twoFactorRemember = this.remember ? '1' : '0';
-        }
+    if (this.clientSecret != null) {
+      obj.scope = clientId.startsWith("organization") ? "api.organization" : "api";
+      obj.grant_type = "client_credentials";
+      obj.client_secret = this.clientSecret;
+    } else if (this.masterPasswordHash != null && this.email != null) {
+      obj.grant_type = "password";
+      obj.username = this.email;
+      obj.password = this.masterPasswordHash;
+    } else if (this.code != null && this.codeVerifier != null && this.redirectUri != null) {
+      obj.grant_type = "authorization_code";
+      obj.code = this.code;
+      obj.code_verifier = this.codeVerifier;
+      obj.redirect_uri = this.redirectUri;
+    } else {
+      throw new Error("must provide credentials or codes");
+    }
 
-        if (this.captchaResponse != null) {
-            obj.captchaResponse = this.captchaResponse;
-        }
+    if (this.device) {
+      obj.deviceType = this.device.type;
+      obj.deviceIdentifier = this.device.identifier;
+      obj.deviceName = this.device.name;
+      // no push tokens for browser apps yet
+      // obj.devicePushToken = this.device.pushToken;
+    }
 
+    if (this.token && this.provider != null) {
+      obj.twoFactorToken = this.token;
+      obj.twoFactorProvider = this.provider;
+      obj.twoFactorRemember = this.remember ? "1" : "0";
+    }
 
-        return obj;
+    if (this.captchaResponse != null) {
+      obj.captchaResponse = this.captchaResponse;
     }
 
-    alterIdentityTokenHeaders(headers: Headers) {
-        if (this.clientSecret == null && this.masterPasswordHash != null && this.email != null) {
-            headers.set('Auth-Email', Utils.fromUtf8ToUrlB64(this.email));
-        }
+    return obj;
+  }
+
+  alterIdentityTokenHeaders(headers: Headers) {
+    if (this.clientSecret == null && this.masterPasswordHash != null && this.email != null) {
+      headers.set("Auth-Email", Utils.fromUtf8ToUrlB64(this.email));
     }
+  }
 }
diff --git a/jslib/common/src/models/request/twoFactorEmailRequest.ts b/jslib/common/src/models/request/twoFactorEmailRequest.ts
index 6eeb0185..36c168b6 100644
--- a/jslib/common/src/models/request/twoFactorEmailRequest.ts
+++ b/jslib/common/src/models/request/twoFactorEmailRequest.ts
@@ -1,5 +1,5 @@
-import { SecretVerificationRequest } from './secretVerificationRequest';
+import { SecretVerificationRequest } from "./secretVerificationRequest";
 
 export class TwoFactorEmailRequest extends SecretVerificationRequest {
-    email: string;
+  email: string;
 }
diff --git a/jslib/common/src/models/request/twoFactorProviderRequest.ts b/jslib/common/src/models/request/twoFactorProviderRequest.ts
index c9138597..d80ba5ba 100644
--- a/jslib/common/src/models/request/twoFactorProviderRequest.ts
+++ b/jslib/common/src/models/request/twoFactorProviderRequest.ts
@@ -1,7 +1,7 @@
-import { SecretVerificationRequest } from './secretVerificationRequest';
+import { SecretVerificationRequest } from "./secretVerificationRequest";
 
-import { TwoFactorProviderType } from '../../enums/twoFactorProviderType';
+import { TwoFactorProviderType } from "../../enums/twoFactorProviderType";
 
 export class TwoFactorProviderRequest extends SecretVerificationRequest {
-    type: TwoFactorProviderType;
+  type: TwoFactorProviderType;
 }
diff --git a/jslib/common/src/models/request/twoFactorRecoveryRequest.ts b/jslib/common/src/models/request/twoFactorRecoveryRequest.ts
index 3352f327..39135a37 100644
--- a/jslib/common/src/models/request/twoFactorRecoveryRequest.ts
+++ b/jslib/common/src/models/request/twoFactorRecoveryRequest.ts
@@ -1,6 +1,6 @@
-import { SecretVerificationRequest } from './secretVerificationRequest';
+import { SecretVerificationRequest } from "./secretVerificationRequest";
 
 export class TwoFactorRecoveryRequest extends SecretVerificationRequest {
-    recoveryCode: string;
-    email: string;
+  recoveryCode: string;
+  email: string;
 }
diff --git a/jslib/common/src/models/request/updateDomainsRequest.ts b/jslib/common/src/models/request/updateDomainsRequest.ts
index d624369d..528d3682 100644
--- a/jslib/common/src/models/request/updateDomainsRequest.ts
+++ b/jslib/common/src/models/request/updateDomainsRequest.ts
@@ -1,4 +1,4 @@
 export class UpdateDomainsRequest {
-    equivalentDomains: string[][];
-    excludedGlobalEquivalentDomains: number[];
+  equivalentDomains: string[][];
+  excludedGlobalEquivalentDomains: number[];
 }
diff --git a/jslib/common/src/models/request/updateKeyRequest.ts b/jslib/common/src/models/request/updateKeyRequest.ts
index c0521b9b..a9fceffd 100644
--- a/jslib/common/src/models/request/updateKeyRequest.ts
+++ b/jslib/common/src/models/request/updateKeyRequest.ts
@@ -1,12 +1,12 @@
-import { CipherWithIdRequest } from './cipherWithIdRequest';
-import { FolderWithIdRequest } from './folderWithIdRequest';
-import { SendWithIdRequest } from './sendWithIdRequest';
+import { CipherWithIdRequest } from "./cipherWithIdRequest";
+import { FolderWithIdRequest } from "./folderWithIdRequest";
+import { SendWithIdRequest } from "./sendWithIdRequest";
 
 export class UpdateKeyRequest {
-    ciphers: CipherWithIdRequest[] = [];
-    folders: FolderWithIdRequest[] = [];
-    sends: SendWithIdRequest[] = [];
-    masterPasswordHash: string;
-    privateKey: string;
-    key: string;
+  ciphers: CipherWithIdRequest[] = [];
+  folders: FolderWithIdRequest[] = [];
+  sends: SendWithIdRequest[] = [];
+  masterPasswordHash: string;
+  privateKey: string;
+  key: string;
 }
diff --git a/jslib/common/src/models/request/updateProfileRequest.ts b/jslib/common/src/models/request/updateProfileRequest.ts
index e029f3f7..14ed554d 100644
--- a/jslib/common/src/models/request/updateProfileRequest.ts
+++ b/jslib/common/src/models/request/updateProfileRequest.ts
@@ -1,10 +1,10 @@
 export class UpdateProfileRequest {
-    name: string;
-    masterPasswordHint: string;
-    culture = 'en-US'; // deprecated
+  name: string;
+  masterPasswordHint: string;
+  culture = "en-US"; // deprecated
 
-    constructor(name: string, masterPasswordHint: string) {
-        this.name = name;
-        this.masterPasswordHint = masterPasswordHint ? masterPasswordHint : null;
-    }
+  constructor(name: string, masterPasswordHint: string) {
+    this.name = name;
+    this.masterPasswordHint = masterPasswordHint ? masterPasswordHint : null;
+  }
 }
diff --git a/jslib/common/src/models/request/updateTempPasswordRequest.ts b/jslib/common/src/models/request/updateTempPasswordRequest.ts
index 044311d3..1bd97697 100644
--- a/jslib/common/src/models/request/updateTempPasswordRequest.ts
+++ b/jslib/common/src/models/request/updateTempPasswordRequest.ts
@@ -1,5 +1,5 @@
-import { OrganizationUserResetPasswordRequest } from './organizationUserResetPasswordRequest';
+import { OrganizationUserResetPasswordRequest } from "./organizationUserResetPasswordRequest";
 
 export class UpdateTempPasswordRequest extends OrganizationUserResetPasswordRequest {
-    masterPasswordHint: string;
+  masterPasswordHint: string;
 }
diff --git a/jslib/common/src/models/request/updateTwoFactorAuthenticatorRequest.ts b/jslib/common/src/models/request/updateTwoFactorAuthenticatorRequest.ts
index fa0a96c0..9b718287 100644
--- a/jslib/common/src/models/request/updateTwoFactorAuthenticatorRequest.ts
+++ b/jslib/common/src/models/request/updateTwoFactorAuthenticatorRequest.ts
@@ -1,6 +1,6 @@
-import { SecretVerificationRequest } from './secretVerificationRequest';
+import { SecretVerificationRequest } from "./secretVerificationRequest";
 
 export class UpdateTwoFactorAuthenticatorRequest extends SecretVerificationRequest {
-    token: string;
-    key: string;
+  token: string;
+  key: string;
 }
diff --git a/jslib/common/src/models/request/updateTwoFactorDuoRequest.ts b/jslib/common/src/models/request/updateTwoFactorDuoRequest.ts
index 9465e2f9..cd82215d 100644
--- a/jslib/common/src/models/request/updateTwoFactorDuoRequest.ts
+++ b/jslib/common/src/models/request/updateTwoFactorDuoRequest.ts
@@ -1,7 +1,7 @@
-import { SecretVerificationRequest } from './secretVerificationRequest';
+import { SecretVerificationRequest } from "./secretVerificationRequest";
 
 export class UpdateTwoFactorDuoRequest extends SecretVerificationRequest {
-    integrationKey: string;
-    secretKey: string;
-    host: string;
+  integrationKey: string;
+  secretKey: string;
+  host: string;
 }
diff --git a/jslib/common/src/models/request/updateTwoFactorEmailRequest.ts b/jslib/common/src/models/request/updateTwoFactorEmailRequest.ts
index ce2fedb5..be7da1fd 100644
--- a/jslib/common/src/models/request/updateTwoFactorEmailRequest.ts
+++ b/jslib/common/src/models/request/updateTwoFactorEmailRequest.ts
@@ -1,6 +1,6 @@
-import { SecretVerificationRequest } from './secretVerificationRequest';
+import { SecretVerificationRequest } from "./secretVerificationRequest";
 
 export class UpdateTwoFactorEmailRequest extends SecretVerificationRequest {
-    token: string;
-    email: string;
+  token: string;
+  email: string;
 }
diff --git a/jslib/common/src/models/request/updateTwoFactorWebAuthnDeleteRequest.ts b/jslib/common/src/models/request/updateTwoFactorWebAuthnDeleteRequest.ts
index 8fa5fcd0..1decda72 100644
--- a/jslib/common/src/models/request/updateTwoFactorWebAuthnDeleteRequest.ts
+++ b/jslib/common/src/models/request/updateTwoFactorWebAuthnDeleteRequest.ts
@@ -1,5 +1,5 @@
-import { SecretVerificationRequest } from './secretVerificationRequest';
+import { SecretVerificationRequest } from "./secretVerificationRequest";
 
 export class UpdateTwoFactorWebAuthnDeleteRequest extends SecretVerificationRequest {
-    id: number;
+  id: number;
 }
diff --git a/jslib/common/src/models/request/updateTwoFactorWebAuthnRequest.ts b/jslib/common/src/models/request/updateTwoFactorWebAuthnRequest.ts
index 09976c31..2e788b52 100644
--- a/jslib/common/src/models/request/updateTwoFactorWebAuthnRequest.ts
+++ b/jslib/common/src/models/request/updateTwoFactorWebAuthnRequest.ts
@@ -1,7 +1,7 @@
-import { SecretVerificationRequest } from './secretVerificationRequest';
+import { SecretVerificationRequest } from "./secretVerificationRequest";
 
 export class UpdateTwoFactorWebAuthnRequest extends SecretVerificationRequest {
-    deviceResponse: PublicKeyCredential;
-    name: string;
-    id: number;
+  deviceResponse: PublicKeyCredential;
+  name: string;
+  id: number;
 }
diff --git a/jslib/common/src/models/request/updateTwoFactorYubioOtpRequest.ts b/jslib/common/src/models/request/updateTwoFactorYubioOtpRequest.ts
index 29a9dd81..cb495b1e 100644
--- a/jslib/common/src/models/request/updateTwoFactorYubioOtpRequest.ts
+++ b/jslib/common/src/models/request/updateTwoFactorYubioOtpRequest.ts
@@ -1,10 +1,10 @@
-import { SecretVerificationRequest } from './secretVerificationRequest';
+import { SecretVerificationRequest } from "./secretVerificationRequest";
 
 export class UpdateTwoFactorYubioOtpRequest extends SecretVerificationRequest {
-    key1: string;
-    key2: string;
-    key3: string;
-    key4: string;
-    key5: string;
-    nfc: boolean;
+  key1: string;
+  key2: string;
+  key3: string;
+  key4: string;
+  key5: string;
+  nfc: boolean;
 }
diff --git a/jslib/common/src/models/request/verifyBankRequest.ts b/jslib/common/src/models/request/verifyBankRequest.ts
index bddd452d..823eaf46 100644
--- a/jslib/common/src/models/request/verifyBankRequest.ts
+++ b/jslib/common/src/models/request/verifyBankRequest.ts
@@ -1,4 +1,4 @@
 export class VerifyBankRequest {
-    amount1: number;
-    amount2: number;
+  amount1: number;
+  amount2: number;
 }
diff --git a/jslib/common/src/models/request/verifyDeleteRecoverRequest.ts b/jslib/common/src/models/request/verifyDeleteRecoverRequest.ts
index 9372b4bf..2374d32d 100644
--- a/jslib/common/src/models/request/verifyDeleteRecoverRequest.ts
+++ b/jslib/common/src/models/request/verifyDeleteRecoverRequest.ts
@@ -1,9 +1,9 @@
 export class VerifyDeleteRecoverRequest {
-    userId: string;
-    token: string;
+  userId: string;
+  token: string;
 
-    constructor(userId: string, token: string) {
-        this.userId = userId;
-        this.token = token;
-    }
+  constructor(userId: string, token: string) {
+    this.userId = userId;
+    this.token = token;
+  }
 }
diff --git a/jslib/common/src/models/request/verifyEmailRequest.ts b/jslib/common/src/models/request/verifyEmailRequest.ts
index 7609fd06..ecee0190 100644
--- a/jslib/common/src/models/request/verifyEmailRequest.ts
+++ b/jslib/common/src/models/request/verifyEmailRequest.ts
@@ -1,9 +1,9 @@
 export class VerifyEmailRequest {
-    userId: string;
-    token: string;
+  userId: string;
+  token: string;
 
-    constructor(userId: string, token: string) {
-        this.userId = userId;
-        this.token = token;
-    }
+  constructor(userId: string, token: string) {
+    this.userId = userId;
+    this.token = token;
+  }
 }
diff --git a/jslib/common/src/models/response/apiKeyResponse.ts b/jslib/common/src/models/response/apiKeyResponse.ts
index b530b2dc..f1a24be0 100644
--- a/jslib/common/src/models/response/apiKeyResponse.ts
+++ b/jslib/common/src/models/response/apiKeyResponse.ts
@@ -1,10 +1,10 @@
-import { BaseResponse } from './baseResponse';
+import { BaseResponse } from "./baseResponse";
 
 export class ApiKeyResponse extends BaseResponse {
-    apiKey: string;
+  apiKey: string;
 
-    constructor(response: any) {
-        super(response);
-        this.apiKey = this.getResponseProperty('ApiKey');
-    }
+  constructor(response: any) {
+    super(response);
+    this.apiKey = this.getResponseProperty("ApiKey");
+  }
 }
diff --git a/jslib/common/src/models/response/attachmentResponse.ts b/jslib/common/src/models/response/attachmentResponse.ts
index 47c01cad..a9ebfaf3 100644
--- a/jslib/common/src/models/response/attachmentResponse.ts
+++ b/jslib/common/src/models/response/attachmentResponse.ts
@@ -1,20 +1,20 @@
-import { BaseResponse } from './baseResponse';
+import { BaseResponse } from "./baseResponse";
 
 export class AttachmentResponse extends BaseResponse {
-    id: string;
-    url: string;
-    fileName: string;
-    key: string;
-    size: string;
-    sizeName: string;
+  id: string;
+  url: string;
+  fileName: string;
+  key: string;
+  size: string;
+  sizeName: string;
 
-    constructor(response: any) {
-        super(response);
-        this.id = this.getResponseProperty('Id');
-        this.url = this.getResponseProperty('Url');
-        this.fileName = this.getResponseProperty('FileName');
-        this.key = this.getResponseProperty('Key');
-        this.size = this.getResponseProperty('Size');
-        this.sizeName = this.getResponseProperty('SizeName');
-    }
+  constructor(response: any) {
+    super(response);
+    this.id = this.getResponseProperty("Id");
+    this.url = this.getResponseProperty("Url");
+    this.fileName = this.getResponseProperty("FileName");
+    this.key = this.getResponseProperty("Key");
+    this.size = this.getResponseProperty("Size");
+    this.sizeName = this.getResponseProperty("SizeName");
+  }
 }
diff --git a/jslib/common/src/models/response/attachmentUploadDataResponse.ts b/jslib/common/src/models/response/attachmentUploadDataResponse.ts
index dd71276c..e9651452 100644
--- a/jslib/common/src/models/response/attachmentUploadDataResponse.ts
+++ b/jslib/common/src/models/response/attachmentUploadDataResponse.ts
@@ -1,22 +1,22 @@
-import { FileUploadType } from '../../enums/fileUploadType';
-import { BaseResponse } from './baseResponse';
-import { CipherResponse } from './cipherResponse';
+import { FileUploadType } from "../../enums/fileUploadType";
+import { BaseResponse } from "./baseResponse";
+import { CipherResponse } from "./cipherResponse";
 
 export class AttachmentUploadDataResponse extends BaseResponse {
-    attachmentId: string;
-    fileUploadType: FileUploadType;
-    cipherResponse: CipherResponse;
-    cipherMiniResponse: CipherResponse;
-    url: string = null;
-    constructor(response: any) {
-        super(response);
-        this.attachmentId = this.getResponseProperty('AttachmentId');
-        this.fileUploadType = this.getResponseProperty('FileUploadType');
-        const cipherResponse = this.getResponseProperty('CipherResponse');
-        const cipherMiniResponse = this.getResponseProperty('CipherMiniResponse');
-        this.cipherResponse = cipherResponse == null ? null : new CipherResponse(cipherResponse);
-        this.cipherMiniResponse = cipherMiniResponse == null ? null : new CipherResponse(cipherMiniResponse);
-        this.url = this.getResponseProperty('Url');
-    }
-
+  attachmentId: string;
+  fileUploadType: FileUploadType;
+  cipherResponse: CipherResponse;
+  cipherMiniResponse: CipherResponse;
+  url: string = null;
+  constructor(response: any) {
+    super(response);
+    this.attachmentId = this.getResponseProperty("AttachmentId");
+    this.fileUploadType = this.getResponseProperty("FileUploadType");
+    const cipherResponse = this.getResponseProperty("CipherResponse");
+    const cipherMiniResponse = this.getResponseProperty("CipherMiniResponse");
+    this.cipherResponse = cipherResponse == null ? null : new CipherResponse(cipherResponse);
+    this.cipherMiniResponse =
+      cipherMiniResponse == null ? null : new CipherResponse(cipherMiniResponse);
+    this.url = this.getResponseProperty("Url");
+  }
 }
diff --git a/jslib/common/src/models/response/baseResponse.ts b/jslib/common/src/models/response/baseResponse.ts
index 38184322..8c599fba 100644
--- a/jslib/common/src/models/response/baseResponse.ts
+++ b/jslib/common/src/models/response/baseResponse.ts
@@ -1,39 +1,43 @@
 export abstract class BaseResponse {
-    private response: any;
+  private response: any;
 
-    constructor(response: any) {
-        this.response = response;
-    }
+  constructor(response: any) {
+    this.response = response;
+  }
 
-    protected getResponseProperty(propertyName: string, response: any = null, exactName = false): any {
-        if (propertyName == null || propertyName === '') {
-            throw new Error('propertyName must not be null/empty.');
-        }
-        if (response == null && this.response != null) {
-            response = this.response;
-        }
-        if (response == null) {
-            return null;
-        }
-        if (!exactName && response[propertyName] === undefined) {
-            let otherCasePropertyName: string = null;
-            if (propertyName.charAt(0) === propertyName.charAt(0).toUpperCase()) {
-                otherCasePropertyName = propertyName.charAt(0).toLowerCase();
-            } else {
-                otherCasePropertyName = propertyName.charAt(0).toUpperCase();
-            }
-            if (propertyName.length > 1) {
-                otherCasePropertyName += propertyName.slice(1);
-            }
+  protected getResponseProperty(
+    propertyName: string,
+    response: any = null,
+    exactName = false
+  ): any {
+    if (propertyName == null || propertyName === "") {
+      throw new Error("propertyName must not be null/empty.");
+    }
+    if (response == null && this.response != null) {
+      response = this.response;
+    }
+    if (response == null) {
+      return null;
+    }
+    if (!exactName && response[propertyName] === undefined) {
+      let otherCasePropertyName: string = null;
+      if (propertyName.charAt(0) === propertyName.charAt(0).toUpperCase()) {
+        otherCasePropertyName = propertyName.charAt(0).toLowerCase();
+      } else {
+        otherCasePropertyName = propertyName.charAt(0).toUpperCase();
+      }
+      if (propertyName.length > 1) {
+        otherCasePropertyName += propertyName.slice(1);
+      }
 
-            propertyName = otherCasePropertyName;
-            if (response[propertyName] === undefined) {
-                propertyName = propertyName.toLowerCase();
-            }
-            if (response[propertyName] === undefined) {
-                propertyName = propertyName.toUpperCase();
-            }
-        }
-        return response[propertyName];
+      propertyName = otherCasePropertyName;
+      if (response[propertyName] === undefined) {
+        propertyName = propertyName.toLowerCase();
+      }
+      if (response[propertyName] === undefined) {
+        propertyName = propertyName.toUpperCase();
+      }
     }
+    return response[propertyName];
+  }
 }
diff --git a/jslib/common/src/models/response/billingResponse.ts b/jslib/common/src/models/response/billingResponse.ts
index 36954db6..91905cb2 100644
--- a/jslib/common/src/models/response/billingResponse.ts
+++ b/jslib/common/src/models/response/billingResponse.ts
@@ -1,83 +1,83 @@
-import { BaseResponse } from './baseResponse';
+import { BaseResponse } from "./baseResponse";
 
-import { PaymentMethodType } from '../../enums/paymentMethodType';
-import { TransactionType } from '../../enums/transactionType';
+import { PaymentMethodType } from "../../enums/paymentMethodType";
+import { TransactionType } from "../../enums/transactionType";
 
 export class BillingResponse extends BaseResponse {
-    balance: number;
-    paymentSource: BillingSourceResponse;
-    invoices: BillingInvoiceResponse[] = [];
-    transactions: BillingTransactionResponse[] = [];
+  balance: number;
+  paymentSource: BillingSourceResponse;
+  invoices: BillingInvoiceResponse[] = [];
+  transactions: BillingTransactionResponse[] = [];
 
-    constructor(response: any) {
-        super(response);
-        this.balance = this.getResponseProperty('Balance');
-        const paymentSource = this.getResponseProperty('PaymentSource');
-        const transactions = this.getResponseProperty('Transactions');
-        const invoices = this.getResponseProperty('Invoices');
-        this.paymentSource = paymentSource == null ? null : new BillingSourceResponse(paymentSource);
-        if (transactions != null) {
-            this.transactions = transactions.map((t: any) => new BillingTransactionResponse(t));
-        }
-        if (invoices != null) {
-            this.invoices = invoices.map((i: any) => new BillingInvoiceResponse(i));
-        }
+  constructor(response: any) {
+    super(response);
+    this.balance = this.getResponseProperty("Balance");
+    const paymentSource = this.getResponseProperty("PaymentSource");
+    const transactions = this.getResponseProperty("Transactions");
+    const invoices = this.getResponseProperty("Invoices");
+    this.paymentSource = paymentSource == null ? null : new BillingSourceResponse(paymentSource);
+    if (transactions != null) {
+      this.transactions = transactions.map((t: any) => new BillingTransactionResponse(t));
     }
+    if (invoices != null) {
+      this.invoices = invoices.map((i: any) => new BillingInvoiceResponse(i));
+    }
+  }
 }
 
 export class BillingSourceResponse extends BaseResponse {
-    type: PaymentMethodType;
-    cardBrand: string;
-    description: string;
-    needsVerification: boolean;
+  type: PaymentMethodType;
+  cardBrand: string;
+  description: string;
+  needsVerification: boolean;
 
-    constructor(response: any) {
-        super(response);
-        this.type = this.getResponseProperty('Type');
-        this.cardBrand = this.getResponseProperty('CardBrand');
-        this.description = this.getResponseProperty('Description');
-        this.needsVerification = this.getResponseProperty('NeedsVerification');
-    }
+  constructor(response: any) {
+    super(response);
+    this.type = this.getResponseProperty("Type");
+    this.cardBrand = this.getResponseProperty("CardBrand");
+    this.description = this.getResponseProperty("Description");
+    this.needsVerification = this.getResponseProperty("NeedsVerification");
+  }
 }
 
 export class BillingInvoiceResponse extends BaseResponse {
-    url: string;
-    pdfUrl: string;
-    number: string;
-    paid: boolean;
-    date: string;
-    amount: number;
+  url: string;
+  pdfUrl: string;
+  number: string;
+  paid: boolean;
+  date: string;
+  amount: number;
 
-    constructor(response: any) {
-        super(response);
-        this.url = this.getResponseProperty('Url');
-        this.pdfUrl = this.getResponseProperty('PdfUrl');
-        this.number = this.getResponseProperty('Number');
-        this.paid = this.getResponseProperty('Paid');
-        this.date = this.getResponseProperty('Date');
-        this.amount = this.getResponseProperty('Amount');
-    }
+  constructor(response: any) {
+    super(response);
+    this.url = this.getResponseProperty("Url");
+    this.pdfUrl = this.getResponseProperty("PdfUrl");
+    this.number = this.getResponseProperty("Number");
+    this.paid = this.getResponseProperty("Paid");
+    this.date = this.getResponseProperty("Date");
+    this.amount = this.getResponseProperty("Amount");
+  }
 }
 
 export class BillingTransactionResponse extends BaseResponse {
-    createdDate: string;
-    amount: number;
-    refunded: boolean;
-    partiallyRefunded: boolean;
-    refundedAmount: number;
-    type: TransactionType;
-    paymentMethodType: PaymentMethodType;
-    details: string;
+  createdDate: string;
+  amount: number;
+  refunded: boolean;
+  partiallyRefunded: boolean;
+  refundedAmount: number;
+  type: TransactionType;
+  paymentMethodType: PaymentMethodType;
+  details: string;
 
-    constructor(response: any) {
-        super(response);
-        this.createdDate = this.getResponseProperty('CreatedDate');
-        this.amount = this.getResponseProperty('Amount');
-        this.refunded = this.getResponseProperty('Refunded');
-        this.partiallyRefunded = this.getResponseProperty('PartiallyRefunded');
-        this.refundedAmount = this.getResponseProperty('RefundedAmount');
-        this.type = this.getResponseProperty('Type');
-        this.paymentMethodType = this.getResponseProperty('PaymentMethodType');
-        this.details = this.getResponseProperty('Details');
-    }
+  constructor(response: any) {
+    super(response);
+    this.createdDate = this.getResponseProperty("CreatedDate");
+    this.amount = this.getResponseProperty("Amount");
+    this.refunded = this.getResponseProperty("Refunded");
+    this.partiallyRefunded = this.getResponseProperty("PartiallyRefunded");
+    this.refundedAmount = this.getResponseProperty("RefundedAmount");
+    this.type = this.getResponseProperty("Type");
+    this.paymentMethodType = this.getResponseProperty("PaymentMethodType");
+    this.details = this.getResponseProperty("Details");
+  }
 }
diff --git a/jslib/common/src/models/response/breachAccountResponse.ts b/jslib/common/src/models/response/breachAccountResponse.ts
index bfa4f70c..00d39acc 100644
--- a/jslib/common/src/models/response/breachAccountResponse.ts
+++ b/jslib/common/src/models/response/breachAccountResponse.ts
@@ -1,32 +1,32 @@
-import { BaseResponse } from './baseResponse';
+import { BaseResponse } from "./baseResponse";
 
 export class BreachAccountResponse extends BaseResponse {
-    addedDate: string;
-    breachDate: string;
-    dataClasses: string[];
-    description: string;
-    domain: string;
-    isActive: boolean;
-    isVerified: boolean;
-    logoPath: string;
-    modifiedDate: string;
-    name: string;
-    pwnCount: number;
-    title: string;
+  addedDate: string;
+  breachDate: string;
+  dataClasses: string[];
+  description: string;
+  domain: string;
+  isActive: boolean;
+  isVerified: boolean;
+  logoPath: string;
+  modifiedDate: string;
+  name: string;
+  pwnCount: number;
+  title: string;
 
-    constructor(response: any) {
-        super(response);
-        this.addedDate = this.getResponseProperty('AddedDate');
-        this.breachDate = this.getResponseProperty('BreachDate');
-        this.dataClasses = this.getResponseProperty('DataClasses');
-        this.description = this.getResponseProperty('Description');
-        this.domain = this.getResponseProperty('Domain');
-        this.isActive = this.getResponseProperty('IsActive');
-        this.isVerified = this.getResponseProperty('IsVerified');
-        this.logoPath = this.getResponseProperty('LogoPath');
-        this.modifiedDate = this.getResponseProperty('ModifiedDate');
-        this.name = this.getResponseProperty('Name');
-        this.pwnCount = this.getResponseProperty('PwnCount');
-        this.title = this.getResponseProperty('Title');
-    }
+  constructor(response: any) {
+    super(response);
+    this.addedDate = this.getResponseProperty("AddedDate");
+    this.breachDate = this.getResponseProperty("BreachDate");
+    this.dataClasses = this.getResponseProperty("DataClasses");
+    this.description = this.getResponseProperty("Description");
+    this.domain = this.getResponseProperty("Domain");
+    this.isActive = this.getResponseProperty("IsActive");
+    this.isVerified = this.getResponseProperty("IsVerified");
+    this.logoPath = this.getResponseProperty("LogoPath");
+    this.modifiedDate = this.getResponseProperty("ModifiedDate");
+    this.name = this.getResponseProperty("Name");
+    this.pwnCount = this.getResponseProperty("PwnCount");
+    this.title = this.getResponseProperty("Title");
+  }
 }
diff --git a/jslib/common/src/models/response/cipherResponse.ts b/jslib/common/src/models/response/cipherResponse.ts
index 55548939..0be26463 100644
--- a/jslib/common/src/models/response/cipherResponse.ts
+++ b/jslib/common/src/models/response/cipherResponse.ts
@@ -1,92 +1,92 @@
-import { AttachmentResponse } from './attachmentResponse';
-import { BaseResponse } from './baseResponse';
-import { PasswordHistoryResponse } from './passwordHistoryResponse';
+import { AttachmentResponse } from "./attachmentResponse";
+import { BaseResponse } from "./baseResponse";
+import { PasswordHistoryResponse } from "./passwordHistoryResponse";
 
-import { CipherRepromptType } from '../../enums/cipherRepromptType';
-import { CardApi } from '../api/cardApi';
-import { FieldApi } from '../api/fieldApi';
-import { IdentityApi } from '../api/identityApi';
-import { LoginApi } from '../api/loginApi';
-import { SecureNoteApi } from '../api/secureNoteApi';
+import { CipherRepromptType } from "../../enums/cipherRepromptType";
+import { CardApi } from "../api/cardApi";
+import { FieldApi } from "../api/fieldApi";
+import { IdentityApi } from "../api/identityApi";
+import { LoginApi } from "../api/loginApi";
+import { SecureNoteApi } from "../api/secureNoteApi";
 
 export class CipherResponse extends BaseResponse {
-    id: string;
-    organizationId: string;
-    folderId: string;
-    type: number;
-    name: string;
-    notes: string;
-    fields: FieldApi[];
-    login: LoginApi;
-    card: CardApi;
-    identity: IdentityApi;
-    secureNote: SecureNoteApi;
-    favorite: boolean;
-    edit: boolean;
-    viewPassword: boolean;
-    organizationUseTotp: boolean;
-    revisionDate: string;
-    attachments: AttachmentResponse[];
-    passwordHistory: PasswordHistoryResponse[];
-    collectionIds: string[];
-    deletedDate: string;
-    reprompt: CipherRepromptType;
+  id: string;
+  organizationId: string;
+  folderId: string;
+  type: number;
+  name: string;
+  notes: string;
+  fields: FieldApi[];
+  login: LoginApi;
+  card: CardApi;
+  identity: IdentityApi;
+  secureNote: SecureNoteApi;
+  favorite: boolean;
+  edit: boolean;
+  viewPassword: boolean;
+  organizationUseTotp: boolean;
+  revisionDate: string;
+  attachments: AttachmentResponse[];
+  passwordHistory: PasswordHistoryResponse[];
+  collectionIds: string[];
+  deletedDate: string;
+  reprompt: CipherRepromptType;
 
-    constructor(response: any) {
-        super(response);
-        this.id = this.getResponseProperty('Id');
-        this.organizationId = this.getResponseProperty('OrganizationId');
-        this.folderId = this.getResponseProperty('FolderId') || null;
-        this.type = this.getResponseProperty('Type');
-        this.name = this.getResponseProperty('Name');
-        this.notes = this.getResponseProperty('Notes');
-        this.favorite = this.getResponseProperty('Favorite') || false;
-        this.edit = !!this.getResponseProperty('Edit');
-        if (this.getResponseProperty('ViewPassword') == null) {
-            this.viewPassword = true;
-        } else {
-            this.viewPassword = this.getResponseProperty('ViewPassword');
-        }
-        this.organizationUseTotp = this.getResponseProperty('OrganizationUseTotp');
-        this.revisionDate = this.getResponseProperty('RevisionDate');
-        this.collectionIds = this.getResponseProperty('CollectionIds');
-        this.deletedDate = this.getResponseProperty('DeletedDate');
-
-        const login = this.getResponseProperty('Login');
-        if (login != null) {
-            this.login = new LoginApi(login);
-        }
+  constructor(response: any) {
+    super(response);
+    this.id = this.getResponseProperty("Id");
+    this.organizationId = this.getResponseProperty("OrganizationId");
+    this.folderId = this.getResponseProperty("FolderId") || null;
+    this.type = this.getResponseProperty("Type");
+    this.name = this.getResponseProperty("Name");
+    this.notes = this.getResponseProperty("Notes");
+    this.favorite = this.getResponseProperty("Favorite") || false;
+    this.edit = !!this.getResponseProperty("Edit");
+    if (this.getResponseProperty("ViewPassword") == null) {
+      this.viewPassword = true;
+    } else {
+      this.viewPassword = this.getResponseProperty("ViewPassword");
+    }
+    this.organizationUseTotp = this.getResponseProperty("OrganizationUseTotp");
+    this.revisionDate = this.getResponseProperty("RevisionDate");
+    this.collectionIds = this.getResponseProperty("CollectionIds");
+    this.deletedDate = this.getResponseProperty("DeletedDate");
 
-        const card = this.getResponseProperty('Card');
-        if (card != null) {
-            this.card = new CardApi(card);
-        }
+    const login = this.getResponseProperty("Login");
+    if (login != null) {
+      this.login = new LoginApi(login);
+    }
 
-        const identity = this.getResponseProperty('Identity');
-        if (identity != null) {
-            this.identity = new IdentityApi(identity);
-        }
+    const card = this.getResponseProperty("Card");
+    if (card != null) {
+      this.card = new CardApi(card);
+    }
 
-        const secureNote = this.getResponseProperty('SecureNote');
-        if (secureNote != null) {
-            this.secureNote = new SecureNoteApi(secureNote);
-        }
+    const identity = this.getResponseProperty("Identity");
+    if (identity != null) {
+      this.identity = new IdentityApi(identity);
+    }
 
-        const fields = this.getResponseProperty('Fields');
-        if (fields != null) {
-            this.fields = fields.map((f: any) => new FieldApi(f));
-        }
+    const secureNote = this.getResponseProperty("SecureNote");
+    if (secureNote != null) {
+      this.secureNote = new SecureNoteApi(secureNote);
+    }
 
-        const attachments = this.getResponseProperty('Attachments');
-        if (attachments != null) {
-            this.attachments = attachments.map((a: any) => new AttachmentResponse(a));
-        }
+    const fields = this.getResponseProperty("Fields");
+    if (fields != null) {
+      this.fields = fields.map((f: any) => new FieldApi(f));
+    }
 
-        const passwordHistory = this.getResponseProperty('PasswordHistory');
-        if (passwordHistory != null) {
-            this.passwordHistory = passwordHistory.map((h: any) => new PasswordHistoryResponse(h));
-        }
+    const attachments = this.getResponseProperty("Attachments");
+    if (attachments != null) {
+      this.attachments = attachments.map((a: any) => new AttachmentResponse(a));
+    }
 
-        this.reprompt = this.getResponseProperty('Reprompt') || CipherRepromptType.None;
+    const passwordHistory = this.getResponseProperty("PasswordHistory");
+    if (passwordHistory != null) {
+      this.passwordHistory = passwordHistory.map((h: any) => new PasswordHistoryResponse(h));
     }
+
+    this.reprompt = this.getResponseProperty("Reprompt") || CipherRepromptType.None;
+  }
 }
diff --git a/jslib/common/src/models/response/collectionResponse.ts b/jslib/common/src/models/response/collectionResponse.ts
index eb9441c4..2f677f7d 100644
--- a/jslib/common/src/models/response/collectionResponse.ts
+++ b/jslib/common/src/models/response/collectionResponse.ts
@@ -1,38 +1,38 @@
-import { BaseResponse } from './baseResponse';
-import { SelectionReadOnlyResponse } from './selectionReadOnlyResponse';
+import { BaseResponse } from "./baseResponse";
+import { SelectionReadOnlyResponse } from "./selectionReadOnlyResponse";
 
 export class CollectionResponse extends BaseResponse {
-    id: string;
-    organizationId: string;
-    name: string;
-    externalId: string;
+  id: string;
+  organizationId: string;
+  name: string;
+  externalId: string;
 
-    constructor(response: any) {
-        super(response);
-        this.id = this.getResponseProperty('Id');
-        this.organizationId = this.getResponseProperty('OrganizationId');
-        this.name = this.getResponseProperty('Name');
-        this.externalId = this.getResponseProperty('ExternalId');
-    }
+  constructor(response: any) {
+    super(response);
+    this.id = this.getResponseProperty("Id");
+    this.organizationId = this.getResponseProperty("OrganizationId");
+    this.name = this.getResponseProperty("Name");
+    this.externalId = this.getResponseProperty("ExternalId");
+  }
 }
 
 export class CollectionDetailsResponse extends CollectionResponse {
-    readOnly: boolean;
+  readOnly: boolean;
 
-    constructor(response: any) {
-        super(response);
-        this.readOnly = this.getResponseProperty('ReadOnly') || false;
-    }
+  constructor(response: any) {
+    super(response);
+    this.readOnly = this.getResponseProperty("ReadOnly") || false;
+  }
 }
 
 export class CollectionGroupDetailsResponse extends CollectionResponse {
-    groups: SelectionReadOnlyResponse[] = [];
+  groups: SelectionReadOnlyResponse[] = [];
 
-    constructor(response: any) {
-        super(response);
-        const groups = this.getResponseProperty('Groups');
-        if (groups != null) {
-            this.groups = groups.map((g: any) => new SelectionReadOnlyResponse(g));
-        }
+  constructor(response: any) {
+    super(response);
+    const groups = this.getResponseProperty("Groups");
+    if (groups != null) {
+      this.groups = groups.map((g: any) => new SelectionReadOnlyResponse(g));
     }
+  }
 }
diff --git a/jslib/common/src/models/response/deviceResponse.ts b/jslib/common/src/models/response/deviceResponse.ts
index 30f4e400..e3857cc1 100644
--- a/jslib/common/src/models/response/deviceResponse.ts
+++ b/jslib/common/src/models/response/deviceResponse.ts
@@ -1,20 +1,20 @@
-import { BaseResponse } from './baseResponse';
+import { BaseResponse } from "./baseResponse";
 
-import { DeviceType } from '../../enums/deviceType';
+import { DeviceType } from "../../enums/deviceType";
 
 export class DeviceResponse extends BaseResponse {
-    id: string;
-    name: number;
-    identifier: string;
-    type: DeviceType;
-    creationDate: string;
+  id: string;
+  name: number;
+  identifier: string;
+  type: DeviceType;
+  creationDate: string;
 
-    constructor(response: any) {
-        super(response);
-        this.id = this.getResponseProperty('Id');
-        this.name = this.getResponseProperty('Name');
-        this.identifier = this.getResponseProperty('Identifier');
-        this.type = this.getResponseProperty('Type');
-        this.creationDate = this.getResponseProperty('CreationDate');
-    }
+  constructor(response: any) {
+    super(response);
+    this.id = this.getResponseProperty("Id");
+    this.name = this.getResponseProperty("Name");
+    this.identifier = this.getResponseProperty("Identifier");
+    this.type = this.getResponseProperty("Type");
+    this.creationDate = this.getResponseProperty("CreationDate");
+  }
 }
diff --git a/jslib/common/src/models/response/domainsResponse.ts b/jslib/common/src/models/response/domainsResponse.ts
index 3e7727e9..3014c2f2 100644
--- a/jslib/common/src/models/response/domainsResponse.ts
+++ b/jslib/common/src/models/response/domainsResponse.ts
@@ -1,18 +1,20 @@
-import { BaseResponse } from './baseResponse';
-import { GlobalDomainResponse } from './globalDomainResponse';
+import { BaseResponse } from "./baseResponse";
+import { GlobalDomainResponse } from "./globalDomainResponse";
 
 export class DomainsResponse extends BaseResponse {
-    equivalentDomains: string[][];
-    globalEquivalentDomains: GlobalDomainResponse[] = [];
+  equivalentDomains: string[][];
+  globalEquivalentDomains: GlobalDomainResponse[] = [];
 
-    constructor(response: any) {
-        super(response);
-        this.equivalentDomains = this.getResponseProperty('EquivalentDomains');
-        const globalEquivalentDomains = this.getResponseProperty('GlobalEquivalentDomains');
-        if (globalEquivalentDomains != null) {
-            this.globalEquivalentDomains = globalEquivalentDomains.map((d: any) => new GlobalDomainResponse(d));
-        } else {
-            this.globalEquivalentDomains = [];
-        }
+  constructor(response: any) {
+    super(response);
+    this.equivalentDomains = this.getResponseProperty("EquivalentDomains");
+    const globalEquivalentDomains = this.getResponseProperty("GlobalEquivalentDomains");
+    if (globalEquivalentDomains != null) {
+      this.globalEquivalentDomains = globalEquivalentDomains.map(
+        (d: any) => new GlobalDomainResponse(d)
+      );
+    } else {
+      this.globalEquivalentDomains = [];
     }
+  }
 }
diff --git a/jslib/common/src/models/response/emergencyAccessResponse.ts b/jslib/common/src/models/response/emergencyAccessResponse.ts
index fbd60849..703543b2 100644
--- a/jslib/common/src/models/response/emergencyAccessResponse.ts
+++ b/jslib/common/src/models/response/emergencyAccessResponse.ts
@@ -1,81 +1,81 @@
-import { EmergencyAccessStatusType } from '../../enums/emergencyAccessStatusType';
-import { EmergencyAccessType } from '../../enums/emergencyAccessType';
-import { KdfType } from '../../enums/kdfType';
-import { BaseResponse } from './baseResponse';
-import { CipherResponse } from './cipherResponse';
+import { EmergencyAccessStatusType } from "../../enums/emergencyAccessStatusType";
+import { EmergencyAccessType } from "../../enums/emergencyAccessType";
+import { KdfType } from "../../enums/kdfType";
+import { BaseResponse } from "./baseResponse";
+import { CipherResponse } from "./cipherResponse";
 
 export class EmergencyAccessGranteeDetailsResponse extends BaseResponse {
-    id: string;
-    granteeId: string;
-    name: string;
-    email: string;
-    type: EmergencyAccessType;
-    status: EmergencyAccessStatusType;
-    waitTimeDays: number;
-    creationDate: string;
+  id: string;
+  granteeId: string;
+  name: string;
+  email: string;
+  type: EmergencyAccessType;
+  status: EmergencyAccessStatusType;
+  waitTimeDays: number;
+  creationDate: string;
 
-    constructor(response: any) {
-        super(response);
-        this.id = this.getResponseProperty('Id');
-        this.granteeId = this.getResponseProperty('GranteeId');
-        this.name = this.getResponseProperty('Name');
-        this.email = this.getResponseProperty('Email');
-        this.type = this.getResponseProperty('Type');
-        this.status = this.getResponseProperty('Status');
-        this.waitTimeDays = this.getResponseProperty('WaitTimeDays');
-        this.creationDate = this.getResponseProperty('CreationDate');
-    }
+  constructor(response: any) {
+    super(response);
+    this.id = this.getResponseProperty("Id");
+    this.granteeId = this.getResponseProperty("GranteeId");
+    this.name = this.getResponseProperty("Name");
+    this.email = this.getResponseProperty("Email");
+    this.type = this.getResponseProperty("Type");
+    this.status = this.getResponseProperty("Status");
+    this.waitTimeDays = this.getResponseProperty("WaitTimeDays");
+    this.creationDate = this.getResponseProperty("CreationDate");
+  }
 }
 
 export class EmergencyAccessGrantorDetailsResponse extends BaseResponse {
-    id: string;
-    grantorId: string;
-    name: string;
-    email: string;
-    type: EmergencyAccessType;
-    status: EmergencyAccessStatusType;
-    waitTimeDays: number;
-    creationDate: string;
+  id: string;
+  grantorId: string;
+  name: string;
+  email: string;
+  type: EmergencyAccessType;
+  status: EmergencyAccessStatusType;
+  waitTimeDays: number;
+  creationDate: string;
 
-    constructor(response: any) {
-        super(response);
-        this.id = this.getResponseProperty('Id');
-        this.grantorId = this.getResponseProperty('GrantorId');
-        this.name = this.getResponseProperty('Name');
-        this.email = this.getResponseProperty('Email');
-        this.type = this.getResponseProperty('Type');
-        this.status = this.getResponseProperty('Status');
-        this.waitTimeDays = this.getResponseProperty('WaitTimeDays');
-        this.creationDate = this.getResponseProperty('CreationDate');
-    }
+  constructor(response: any) {
+    super(response);
+    this.id = this.getResponseProperty("Id");
+    this.grantorId = this.getResponseProperty("GrantorId");
+    this.name = this.getResponseProperty("Name");
+    this.email = this.getResponseProperty("Email");
+    this.type = this.getResponseProperty("Type");
+    this.status = this.getResponseProperty("Status");
+    this.waitTimeDays = this.getResponseProperty("WaitTimeDays");
+    this.creationDate = this.getResponseProperty("CreationDate");
+  }
 }
 
 export class EmergencyAccessTakeoverResponse extends BaseResponse {
-    keyEncrypted: string;
-    kdf: KdfType;
-    kdfIterations: number;
+  keyEncrypted: string;
+  kdf: KdfType;
+  kdfIterations: number;
 
-    constructor(response: any) {
-        super(response);
+  constructor(response: any) {
+    super(response);
 
-        this.keyEncrypted = this.getResponseProperty('KeyEncrypted');
-        this.kdf = this.getResponseProperty('Kdf');
-        this.kdfIterations = this.getResponseProperty('KdfIterations');
-    }
+    this.keyEncrypted = this.getResponseProperty("KeyEncrypted");
+    this.kdf = this.getResponseProperty("Kdf");
+    this.kdfIterations = this.getResponseProperty("KdfIterations");
+  }
 }
 
 export class EmergencyAccessViewResponse extends BaseResponse {
-    keyEncrypted: string;
-    ciphers: CipherResponse[] = [];
+  keyEncrypted: string;
+  ciphers: CipherResponse[] = [];
 
-    constructor(response: any) {
-        super(response);
+  constructor(response: any) {
+    super(response);
 
-        this.keyEncrypted = this.getResponseProperty('KeyEncrypted');
+    this.keyEncrypted = this.getResponseProperty("KeyEncrypted");
 
-        const ciphers = this.getResponseProperty('Ciphers');
-        if (ciphers != null) {
-            this.ciphers = ciphers.map((c: any) => new CipherResponse(c));
-        }
+    const ciphers = this.getResponseProperty("Ciphers");
+    if (ciphers != null) {
+      this.ciphers = ciphers.map((c: any) => new CipherResponse(c));
     }
+  }
 }
diff --git a/jslib/common/src/models/response/errorResponse.ts b/jslib/common/src/models/response/errorResponse.ts
index bac1ff12..6e19ace9 100644
--- a/jslib/common/src/models/response/errorResponse.ts
+++ b/jslib/common/src/models/response/errorResponse.ts
@@ -1,72 +1,72 @@
-import { Utils } from '../../misc/utils';
+import { Utils } from "../../misc/utils";
 
-import { BaseResponse } from './baseResponse';
+import { BaseResponse } from "./baseResponse";
 
 export class ErrorResponse extends BaseResponse {
-    message: string;
-    validationErrors: { [key: string]: string[]; };
-    statusCode: number;
-    captchaRequired: boolean;
-    captchaSiteKey: string;
+  message: string;
+  validationErrors: { [key: string]: string[] };
+  statusCode: number;
+  captchaRequired: boolean;
+  captchaSiteKey: string;
 
-    constructor(response: any, status: number, identityResponse?: boolean) {
-        super(response);
-        let errorModel = null;
-        if (response != null) {
-            const responseErrorModel = this.getResponseProperty('ErrorModel');
-            if (responseErrorModel && identityResponse) {
-                errorModel = responseErrorModel;
-            } else {
-                errorModel = response;
-            }
-        }
+  constructor(response: any, status: number, identityResponse?: boolean) {
+    super(response);
+    let errorModel = null;
+    if (response != null) {
+      const responseErrorModel = this.getResponseProperty("ErrorModel");
+      if (responseErrorModel && identityResponse) {
+        errorModel = responseErrorModel;
+      } else {
+        errorModel = response;
+      }
+    }
 
-        if (errorModel) {
-            this.message = this.getResponseProperty('Message', errorModel);
-            this.validationErrors = this.getResponseProperty('ValidationErrors', errorModel);
-            this.captchaSiteKey = this.validationErrors?.HCaptcha_SiteKey?.[0];
-            this.captchaRequired = !Utils.isNullOrWhitespace(this.captchaSiteKey);
-        } else {
-            if (status === 429) {
-                this.message = 'Rate limit exceeded. Try again later.';
-            }
-        }
-        this.statusCode = status;
+    if (errorModel) {
+      this.message = this.getResponseProperty("Message", errorModel);
+      this.validationErrors = this.getResponseProperty("ValidationErrors", errorModel);
+      this.captchaSiteKey = this.validationErrors?.HCaptcha_SiteKey?.[0];
+      this.captchaRequired = !Utils.isNullOrWhitespace(this.captchaSiteKey);
+    } else {
+      if (status === 429) {
+        this.message = "Rate limit exceeded. Try again later.";
+      }
     }
+    this.statusCode = status;
+  }
 
-    getSingleMessage(): string {
-        if (this.validationErrors == null) {
-            return this.message;
-        }
-        for (const key in this.validationErrors) {
-            if (!this.validationErrors.hasOwnProperty(key)) {
-                continue;
-            }
-            if (this.validationErrors[key].length) {
-                return this.validationErrors[key][0];
-            }
-        }
-        return this.message;
+  getSingleMessage(): string {
+    if (this.validationErrors == null) {
+      return this.message;
+    }
+    for (const key in this.validationErrors) {
+      if (!this.validationErrors.hasOwnProperty(key)) {
+        continue;
+      }
+      if (this.validationErrors[key].length) {
+        return this.validationErrors[key][0];
+      }
     }
+    return this.message;
+  }
 
-    getAllMessages(): string[] {
-        const messages: string[] = [];
-        if (this.validationErrors == null) {
-            return messages;
-        }
-        for (const key in this.validationErrors) {
-            if (!this.validationErrors.hasOwnProperty(key)) {
-                continue;
-            }
-            this.validationErrors[key].forEach((item: string) => {
-                let prefix = '';
-                if (key.indexOf('[') > -1 && key.indexOf(']') > -1) {
-                    const lastSep = key.lastIndexOf('.');
-                    prefix = key.substr(0, lastSep > -1 ? lastSep : key.length) + ': ';
-                }
-                messages.push(prefix + item);
-            });
+  getAllMessages(): string[] {
+    const messages: string[] = [];
+    if (this.validationErrors == null) {
+      return messages;
+    }
+    for (const key in this.validationErrors) {
+      if (!this.validationErrors.hasOwnProperty(key)) {
+        continue;
+      }
+      this.validationErrors[key].forEach((item: string) => {
+        let prefix = "";
+        if (key.indexOf("[") > -1 && key.indexOf("]") > -1) {
+          const lastSep = key.lastIndexOf(".");
+          prefix = key.substr(0, lastSep > -1 ? lastSep : key.length) + ": ";
         }
-        return messages;
+        messages.push(prefix + item);
+      });
     }
+    return messages;
+  }
 }
diff --git a/jslib/common/src/models/response/eventResponse.ts b/jslib/common/src/models/response/eventResponse.ts
index ef7ab807..b56e172c 100644
--- a/jslib/common/src/models/response/eventResponse.ts
+++ b/jslib/common/src/models/response/eventResponse.ts
@@ -1,41 +1,41 @@
-import { BaseResponse } from './baseResponse';
+import { BaseResponse } from "./baseResponse";
 
-import { DeviceType } from '../../enums/deviceType';
-import { EventType } from '../../enums/eventType';
+import { DeviceType } from "../../enums/deviceType";
+import { EventType } from "../../enums/eventType";
 
 export class EventResponse extends BaseResponse {
-    type: EventType;
-    userId: string;
-    organizationId: string;
-    providerId: string;
-    cipherId: string;
-    collectionId: string;
-    groupId: string;
-    policyId: string;
-    organizationUserId: string;
-    providerUserId: string;
-    providerOrganizationId: string;
-    actingUserId: string;
-    date: string;
-    deviceType: DeviceType;
-    ipAddress: string;
+  type: EventType;
+  userId: string;
+  organizationId: string;
+  providerId: string;
+  cipherId: string;
+  collectionId: string;
+  groupId: string;
+  policyId: string;
+  organizationUserId: string;
+  providerUserId: string;
+  providerOrganizationId: string;
+  actingUserId: string;
+  date: string;
+  deviceType: DeviceType;
+  ipAddress: string;
 
-    constructor(response: any) {
-        super(response);
-        this.type = this.getResponseProperty('Type');
-        this.userId = this.getResponseProperty('UserId');
-        this.organizationId = this.getResponseProperty('OrganizationId');
-        this.providerId = this.getResponseProperty('ProviderId');
-        this.cipherId = this.getResponseProperty('CipherId');
-        this.collectionId = this.getResponseProperty('CollectionId');
-        this.groupId = this.getResponseProperty('GroupId');
-        this.policyId = this.getResponseProperty('PolicyId');
-        this.organizationUserId = this.getResponseProperty('OrganizationUserId');
-        this.providerUserId = this.getResponseProperty('ProviderUserId');
-        this.providerOrganizationId = this.getResponseProperty('ProviderOrganizationId');
-        this.actingUserId = this.getResponseProperty('ActingUserId');
-        this.date = this.getResponseProperty('Date');
-        this.deviceType = this.getResponseProperty('DeviceType');
-        this.ipAddress = this.getResponseProperty('IpAddress');
-    }
+  constructor(response: any) {
+    super(response);
+    this.type = this.getResponseProperty("Type");
+    this.userId = this.getResponseProperty("UserId");
+    this.organizationId = this.getResponseProperty("OrganizationId");
+    this.providerId = this.getResponseProperty("ProviderId");
+    this.cipherId = this.getResponseProperty("CipherId");
+    this.collectionId = this.getResponseProperty("CollectionId");
+    this.groupId = this.getResponseProperty("GroupId");
+    this.policyId = this.getResponseProperty("PolicyId");
+    this.organizationUserId = this.getResponseProperty("OrganizationUserId");
+    this.providerUserId = this.getResponseProperty("ProviderUserId");
+    this.providerOrganizationId = this.getResponseProperty("ProviderOrganizationId");
+    this.actingUserId = this.getResponseProperty("ActingUserId");
+    this.date = this.getResponseProperty("Date");
+    this.deviceType = this.getResponseProperty("DeviceType");
+    this.ipAddress = this.getResponseProperty("IpAddress");
+  }
 }
diff --git a/jslib/common/src/models/response/folderResponse.ts b/jslib/common/src/models/response/folderResponse.ts
index 00b3d3d8..70d4897f 100644
--- a/jslib/common/src/models/response/folderResponse.ts
+++ b/jslib/common/src/models/response/folderResponse.ts
@@ -1,14 +1,14 @@
-import { BaseResponse } from './baseResponse';
+import { BaseResponse } from "./baseResponse";
 
 export class FolderResponse extends BaseResponse {
-    id: string;
-    name: string;
-    revisionDate: string;
+  id: string;
+  name: string;
+  revisionDate: string;
 
-    constructor(response: any) {
-        super(response);
-        this.id = this.getResponseProperty('Id');
-        this.name = this.getResponseProperty('Name');
-        this.revisionDate = this.getResponseProperty('RevisionDate');
-    }
+  constructor(response: any) {
+    super(response);
+    this.id = this.getResponseProperty("Id");
+    this.name = this.getResponseProperty("Name");
+    this.revisionDate = this.getResponseProperty("RevisionDate");
+  }
 }
diff --git a/jslib/common/src/models/response/globalDomainResponse.ts b/jslib/common/src/models/response/globalDomainResponse.ts
index 861282a9..e3197e76 100644
--- a/jslib/common/src/models/response/globalDomainResponse.ts
+++ b/jslib/common/src/models/response/globalDomainResponse.ts
@@ -1,14 +1,14 @@
-import { BaseResponse } from './baseResponse';
+import { BaseResponse } from "./baseResponse";
 
 export class GlobalDomainResponse extends BaseResponse {
-    type: number;
-    domains: string[];
-    excluded: boolean;
+  type: number;
+  domains: string[];
+  excluded: boolean;
 
-    constructor(response: any) {
-        super(response);
-        this.type = this.getResponseProperty('Type');
-        this.domains = this.getResponseProperty('Domains');
-        this.excluded = this.getResponseProperty('Excluded');
-    }
+  constructor(response: any) {
+    super(response);
+    this.type = this.getResponseProperty("Type");
+    this.domains = this.getResponseProperty("Domains");
+    this.excluded = this.getResponseProperty("Excluded");
+  }
 }
diff --git a/jslib/common/src/models/response/groupResponse.ts b/jslib/common/src/models/response/groupResponse.ts
index 2c3cf119..ab4b58b7 100644
--- a/jslib/common/src/models/response/groupResponse.ts
+++ b/jslib/common/src/models/response/groupResponse.ts
@@ -1,31 +1,31 @@
-import { BaseResponse } from './baseResponse';
-import { SelectionReadOnlyResponse } from './selectionReadOnlyResponse';
+import { BaseResponse } from "./baseResponse";
+import { SelectionReadOnlyResponse } from "./selectionReadOnlyResponse";
 
 export class GroupResponse extends BaseResponse {
-    id: string;
-    organizationId: string;
-    name: string;
-    accessAll: boolean;
-    externalId: string;
+  id: string;
+  organizationId: string;
+  name: string;
+  accessAll: boolean;
+  externalId: string;
 
-    constructor(response: any) {
-        super(response);
-        this.id = this.getResponseProperty('Id');
-        this.organizationId = this.getResponseProperty('OrganizationId');
-        this.name = this.getResponseProperty('Name');
-        this.accessAll = this.getResponseProperty('AccessAll');
-        this.externalId = this.getResponseProperty('ExternalId');
-    }
+  constructor(response: any) {
+    super(response);
+    this.id = this.getResponseProperty("Id");
+    this.organizationId = this.getResponseProperty("OrganizationId");
+    this.name = this.getResponseProperty("Name");
+    this.accessAll = this.getResponseProperty("AccessAll");
+    this.externalId = this.getResponseProperty("ExternalId");
+  }
 }
 
 export class GroupDetailsResponse extends GroupResponse {
-    collections: SelectionReadOnlyResponse[] = [];
+  collections: SelectionReadOnlyResponse[] = [];
 
-    constructor(response: any) {
-        super(response);
-        const collections = this.getResponseProperty('Collections');
-        if (collections != null) {
-            this.collections = collections.map((c: any) => new SelectionReadOnlyResponse(c));
-        }
+  constructor(response: any) {
+    super(response);
+    const collections = this.getResponseProperty("Collections");
+    if (collections != null) {
+      this.collections = collections.map((c: any) => new SelectionReadOnlyResponse(c));
     }
+  }
 }
diff --git a/jslib/common/src/models/response/identityCaptchaResponse.ts b/jslib/common/src/models/response/identityCaptchaResponse.ts
index 082423e3..2537057e 100644
--- a/jslib/common/src/models/response/identityCaptchaResponse.ts
+++ b/jslib/common/src/models/response/identityCaptchaResponse.ts
@@ -1,10 +1,10 @@
-import { BaseResponse } from './baseResponse';
+import { BaseResponse } from "./baseResponse";
 
 export class IdentityCaptchaResponse extends BaseResponse {
-    siteKey: string;
+  siteKey: string;
 
-    constructor(response: any) {
-        super(response);
-        this.siteKey = this.getResponseProperty('HCaptcha_SiteKey');
-    }
+  constructor(response: any) {
+    super(response);
+    this.siteKey = this.getResponseProperty("HCaptcha_SiteKey");
+  }
 }
diff --git a/jslib/common/src/models/response/identityTokenResponse.ts b/jslib/common/src/models/response/identityTokenResponse.ts
index c2283956..f17e144a 100644
--- a/jslib/common/src/models/response/identityTokenResponse.ts
+++ b/jslib/common/src/models/response/identityTokenResponse.ts
@@ -1,38 +1,38 @@
-import { BaseResponse } from './baseResponse';
+import { BaseResponse } from "./baseResponse";
 
-import { KdfType } from '../../enums/kdfType';
+import { KdfType } from "../../enums/kdfType";
 
 export class IdentityTokenResponse extends BaseResponse {
-    accessToken: string;
-    expiresIn: number;
-    refreshToken: string;
-    tokenType: string;
+  accessToken: string;
+  expiresIn: number;
+  refreshToken: string;
+  tokenType: string;
 
-    resetMasterPassword: boolean;
-    privateKey: string;
-    key: string;
-    twoFactorToken: string;
-    kdf: KdfType;
-    kdfIterations: number;
-    forcePasswordReset: boolean;
-    apiUseKeyConnector: boolean;
-    keyConnectorUrl: string;
+  resetMasterPassword: boolean;
+  privateKey: string;
+  key: string;
+  twoFactorToken: string;
+  kdf: KdfType;
+  kdfIterations: number;
+  forcePasswordReset: boolean;
+  apiUseKeyConnector: boolean;
+  keyConnectorUrl: string;
 
-    constructor(response: any) {
-        super(response);
-        this.accessToken = response.access_token;
-        this.expiresIn = response.expires_in;
-        this.refreshToken = response.refresh_token;
-        this.tokenType = response.token_type;
+  constructor(response: any) {
+    super(response);
+    this.accessToken = response.access_token;
+    this.expiresIn = response.expires_in;
+    this.refreshToken = response.refresh_token;
+    this.tokenType = response.token_type;
 
-        this.resetMasterPassword = this.getResponseProperty('ResetMasterPassword');
-        this.privateKey = this.getResponseProperty('PrivateKey');
-        this.key = this.getResponseProperty('Key');
-        this.twoFactorToken = this.getResponseProperty('TwoFactorToken');
-        this.kdf = this.getResponseProperty('Kdf');
-        this.kdfIterations = this.getResponseProperty('KdfIterations');
-        this.forcePasswordReset = this.getResponseProperty('ForcePasswordReset');
-        this.apiUseKeyConnector = this.getResponseProperty('ApiUseKeyConnector');
-        this.keyConnectorUrl = this.getResponseProperty('KeyConnectorUrl');
-    }
+    this.resetMasterPassword = this.getResponseProperty("ResetMasterPassword");
+    this.privateKey = this.getResponseProperty("PrivateKey");
+    this.key = this.getResponseProperty("Key");
+    this.twoFactorToken = this.getResponseProperty("TwoFactorToken");
+    this.kdf = this.getResponseProperty("Kdf");
+    this.kdfIterations = this.getResponseProperty("KdfIterations");
+    this.forcePasswordReset = this.getResponseProperty("ForcePasswordReset");
+    this.apiUseKeyConnector = this.getResponseProperty("ApiUseKeyConnector");
+    this.keyConnectorUrl = this.getResponseProperty("KeyConnectorUrl");
+  }
 }
diff --git a/jslib/common/src/models/response/identityTwoFactorResponse.ts b/jslib/common/src/models/response/identityTwoFactorResponse.ts
index 92886a40..bb826537 100644
--- a/jslib/common/src/models/response/identityTwoFactorResponse.ts
+++ b/jslib/common/src/models/response/identityTwoFactorResponse.ts
@@ -1,23 +1,23 @@
-import { BaseResponse } from './baseResponse';
+import { BaseResponse } from "./baseResponse";
 
-import { TwoFactorProviderType } from '../../enums/twoFactorProviderType';
+import { TwoFactorProviderType } from "../../enums/twoFactorProviderType";
 
 export class IdentityTwoFactorResponse extends BaseResponse {
-    twoFactorProviders: TwoFactorProviderType[];
-    twoFactorProviders2 = new Map<TwoFactorProviderType, { [key: string]: string; }>();
-    captchaToken: string;
+  twoFactorProviders: TwoFactorProviderType[];
+  twoFactorProviders2 = new Map<TwoFactorProviderType, { [key: string]: string }>();
+  captchaToken: string;
 
-    constructor(response: any) {
-        super(response);
-        this.captchaToken = this.getResponseProperty('CaptchaBypassToken');
-        this.twoFactorProviders = this.getResponseProperty('TwoFactorProviders');
-        const twoFactorProviders2 = this.getResponseProperty('TwoFactorProviders2');
-        if (twoFactorProviders2 != null) {
-            for (const prop in twoFactorProviders2) {
-                if (twoFactorProviders2.hasOwnProperty(prop)) {
-                    this.twoFactorProviders2.set(parseInt(prop, null), twoFactorProviders2[prop]);
-                }
-            }
+  constructor(response: any) {
+    super(response);
+    this.captchaToken = this.getResponseProperty("CaptchaBypassToken");
+    this.twoFactorProviders = this.getResponseProperty("TwoFactorProviders");
+    const twoFactorProviders2 = this.getResponseProperty("TwoFactorProviders2");
+    if (twoFactorProviders2 != null) {
+      for (const prop in twoFactorProviders2) {
+        if (twoFactorProviders2.hasOwnProperty(prop)) {
+          this.twoFactorProviders2.set(parseInt(prop, null), twoFactorProviders2[prop]);
         }
+      }
     }
+  }
 }
diff --git a/jslib/common/src/models/response/keyConnectorUserKeyResponse.ts b/jslib/common/src/models/response/keyConnectorUserKeyResponse.ts
index 4da60be3..5183397b 100644
--- a/jslib/common/src/models/response/keyConnectorUserKeyResponse.ts
+++ b/jslib/common/src/models/response/keyConnectorUserKeyResponse.ts
@@ -1,10 +1,10 @@
-import { BaseResponse } from './baseResponse';
+import { BaseResponse } from "./baseResponse";
 
 export class KeyConnectorUserKeyResponse extends BaseResponse {
-    key: string;
+  key: string;
 
-    constructor(response: any) {
-        super(response);
-        this.key = this.getResponseProperty('Key');
-    }
+  constructor(response: any) {
+    super(response);
+    this.key = this.getResponseProperty("Key");
+  }
 }
diff --git a/jslib/common/src/models/response/keysResponse.ts b/jslib/common/src/models/response/keysResponse.ts
index 405edcdc..e1e8e5db 100644
--- a/jslib/common/src/models/response/keysResponse.ts
+++ b/jslib/common/src/models/response/keysResponse.ts
@@ -1,12 +1,12 @@
-import { BaseResponse } from './baseResponse';
+import { BaseResponse } from "./baseResponse";
 
 export class KeysResponse extends BaseResponse {
-    privateKey: string;
-    publicKey: string;
+  privateKey: string;
+  publicKey: string;
 
-    constructor(response: any) {
-        super(response);
-        this.privateKey = this.getResponseProperty('PrivateKey');
-        this.publicKey = this.getResponseProperty('PublicKey');
-    }
+  constructor(response: any) {
+    super(response);
+    this.privateKey = this.getResponseProperty("PrivateKey");
+    this.publicKey = this.getResponseProperty("PublicKey");
+  }
 }
diff --git a/jslib/common/src/models/response/listResponse.ts b/jslib/common/src/models/response/listResponse.ts
index 3b15a3f5..e37c6697 100644
--- a/jslib/common/src/models/response/listResponse.ts
+++ b/jslib/common/src/models/response/listResponse.ts
@@ -1,13 +1,13 @@
-import { BaseResponse } from './baseResponse';
+import { BaseResponse } from "./baseResponse";
 
 export class ListResponse<T> extends BaseResponse {
-    data: T[];
-    continuationToken: string;
+  data: T[];
+  continuationToken: string;
 
-    constructor(response: any, t: new (dataResponse: any) => T) {
-        super(response);
-        const data = this.getResponseProperty('Data');
-        this.data = data == null ? [] : data.map((dr: any) => new t(dr));
-        this.continuationToken = this.getResponseProperty('ContinuationToken');
-    }
+  constructor(response: any, t: new (dataResponse: any) => T) {
+    super(response);
+    const data = this.getResponseProperty("Data");
+    this.data = data == null ? [] : data.map((dr: any) => new t(dr));
+    this.continuationToken = this.getResponseProperty("ContinuationToken");
+  }
 }
diff --git a/jslib/common/src/models/response/notificationResponse.ts b/jslib/common/src/models/response/notificationResponse.ts
index b60f38a6..79bbdb0e 100644
--- a/jslib/common/src/models/response/notificationResponse.ts
+++ b/jslib/common/src/models/response/notificationResponse.ts
@@ -1,97 +1,97 @@
-import { BaseResponse } from './baseResponse';
+import { BaseResponse } from "./baseResponse";
 
-import { NotificationType } from '../../enums/notificationType';
+import { NotificationType } from "../../enums/notificationType";
 
 export class NotificationResponse extends BaseResponse {
-    contextId: string;
-    type: NotificationType;
-    payload: any;
+  contextId: string;
+  type: NotificationType;
+  payload: any;
 
-    constructor(response: any) {
-        super(response);
-        this.contextId = this.getResponseProperty('ContextId');
-        this.type = this.getResponseProperty('Type');
+  constructor(response: any) {
+    super(response);
+    this.contextId = this.getResponseProperty("ContextId");
+    this.type = this.getResponseProperty("Type");
 
-        const payload = this.getResponseProperty('Payload');
-        switch (this.type) {
-            case NotificationType.SyncCipherCreate:
-            case NotificationType.SyncCipherDelete:
-            case NotificationType.SyncCipherUpdate:
-            case NotificationType.SyncLoginDelete:
-                this.payload = new SyncCipherNotification(payload);
-                break;
-            case NotificationType.SyncFolderCreate:
-            case NotificationType.SyncFolderDelete:
-            case NotificationType.SyncFolderUpdate:
-                this.payload = new SyncFolderNotification(payload);
-                break;
-            case NotificationType.SyncVault:
-            case NotificationType.SyncCiphers:
-            case NotificationType.SyncOrgKeys:
-            case NotificationType.SyncSettings:
-            case NotificationType.LogOut:
-                this.payload = new UserNotification(payload);
-                break;
-            case NotificationType.SyncSendCreate:
-            case NotificationType.SyncSendUpdate:
-            case NotificationType.SyncSendDelete:
-                this.payload = new SyncSendNotification(payload);
-            default:
-                break;
-        }
+    const payload = this.getResponseProperty("Payload");
+    switch (this.type) {
+      case NotificationType.SyncCipherCreate:
+      case NotificationType.SyncCipherDelete:
+      case NotificationType.SyncCipherUpdate:
+      case NotificationType.SyncLoginDelete:
+        this.payload = new SyncCipherNotification(payload);
+        break;
+      case NotificationType.SyncFolderCreate:
+      case NotificationType.SyncFolderDelete:
+      case NotificationType.SyncFolderUpdate:
+        this.payload = new SyncFolderNotification(payload);
+        break;
+      case NotificationType.SyncVault:
+      case NotificationType.SyncCiphers:
+      case NotificationType.SyncOrgKeys:
+      case NotificationType.SyncSettings:
+      case NotificationType.LogOut:
+        this.payload = new UserNotification(payload);
+        break;
+      case NotificationType.SyncSendCreate:
+      case NotificationType.SyncSendUpdate:
+      case NotificationType.SyncSendDelete:
+        this.payload = new SyncSendNotification(payload);
+      default:
+        break;
     }
+  }
 }
 
 export class SyncCipherNotification extends BaseResponse {
-    id: string;
-    userId: string;
-    organizationId: string;
-    collectionIds: string[];
-    revisionDate: Date;
+  id: string;
+  userId: string;
+  organizationId: string;
+  collectionIds: string[];
+  revisionDate: Date;
 
-    constructor(response: any) {
-        super(response);
-        this.id = this.getResponseProperty('Id');
-        this.userId = this.getResponseProperty('UserId');
-        this.organizationId = this.getResponseProperty('OrganizationId');
-        this.collectionIds = this.getResponseProperty('CollectionIds');
-        this.revisionDate = new Date(this.getResponseProperty('RevisionDate'));
-    }
+  constructor(response: any) {
+    super(response);
+    this.id = this.getResponseProperty("Id");
+    this.userId = this.getResponseProperty("UserId");
+    this.organizationId = this.getResponseProperty("OrganizationId");
+    this.collectionIds = this.getResponseProperty("CollectionIds");
+    this.revisionDate = new Date(this.getResponseProperty("RevisionDate"));
+  }
 }
 
 export class SyncFolderNotification extends BaseResponse {
-    id: string;
-    userId: string;
-    revisionDate: Date;
+  id: string;
+  userId: string;
+  revisionDate: Date;
 
-    constructor(response: any) {
-        super(response);
-        this.id = this.getResponseProperty('Id');
-        this.userId = this.getResponseProperty('UserId');
-        this.revisionDate = new Date(this.getResponseProperty('RevisionDate'));
-    }
+  constructor(response: any) {
+    super(response);
+    this.id = this.getResponseProperty("Id");
+    this.userId = this.getResponseProperty("UserId");
+    this.revisionDate = new Date(this.getResponseProperty("RevisionDate"));
+  }
 }
 
 export class UserNotification extends BaseResponse {
-    userId: string;
-    date: Date;
+  userId: string;
+  date: Date;
 
-    constructor(response: any) {
-        super(response);
-        this.userId = this.getResponseProperty('UserId');
-        this.date = new Date(this.getResponseProperty('Date'));
-    }
+  constructor(response: any) {
+    super(response);
+    this.userId = this.getResponseProperty("UserId");
+    this.date = new Date(this.getResponseProperty("Date"));
+  }
 }
 
 export class SyncSendNotification extends BaseResponse {
-    id: string;
-    userId: string;
-    revisionDate: Date;
+  id: string;
+  userId: string;
+  revisionDate: Date;
 
-    constructor(response: any) {
-        super(response);
-        this.id = this.getResponseProperty('Id');
-        this.userId = this.getResponseProperty('UserId');
-        this.revisionDate = new Date(this.getResponseProperty('RevisionDate'));
-    }
+  constructor(response: any) {
+    super(response);
+    this.id = this.getResponseProperty("Id");
+    this.userId = this.getResponseProperty("UserId");
+    this.revisionDate = new Date(this.getResponseProperty("RevisionDate"));
+  }
 }
diff --git a/jslib/common/src/models/response/organization/organizationSsoResponse.ts b/jslib/common/src/models/response/organization/organizationSsoResponse.ts
index 46709d61..71432912 100644
--- a/jslib/common/src/models/response/organization/organizationSsoResponse.ts
+++ b/jslib/common/src/models/response/organization/organizationSsoResponse.ts
@@ -1,32 +1,32 @@
-import { SsoConfigApi } from '../../api/ssoConfigApi';
-import { BaseResponse } from '../baseResponse';
+import { SsoConfigApi } from "../../api/ssoConfigApi";
+import { BaseResponse } from "../baseResponse";
 
 export class OrganizationSsoResponse extends BaseResponse {
-    enabled: boolean;
-    data: SsoConfigApi;
-    urls: SsoUrls;
+  enabled: boolean;
+  data: SsoConfigApi;
+  urls: SsoUrls;
 
-    constructor(response: any) {
-        super(response);
-        this.enabled = this.getResponseProperty('Enabled');
-        this.data = new SsoConfigApi(this.getResponseProperty('Data'));
-        this.urls = new SsoUrls(this.getResponseProperty('Urls'));
-    }
+  constructor(response: any) {
+    super(response);
+    this.enabled = this.getResponseProperty("Enabled");
+    this.data = new SsoConfigApi(this.getResponseProperty("Data"));
+    this.urls = new SsoUrls(this.getResponseProperty("Urls"));
+  }
 }
 
 class SsoUrls extends BaseResponse {
-    callbackPath: string;
-    signedOutCallbackPath: string;
-    spEntityId: string;
-    spMetadataUrl: string;
-    spAcsUrl: string;
+  callbackPath: string;
+  signedOutCallbackPath: string;
+  spEntityId: string;
+  spMetadataUrl: string;
+  spAcsUrl: string;
 
-    constructor(response: any) {
-        super(response);
-        this.callbackPath = this.getResponseProperty('CallbackPath');
-        this.signedOutCallbackPath = this.getResponseProperty('SignedOutCallbackPath');
-        this.spEntityId = this.getResponseProperty('SpEntityId');
-        this.spMetadataUrl = this.getResponseProperty('SpMetadataUrl');
-        this.spAcsUrl = this.getResponseProperty('SpAcsUrl');
-    }
+  constructor(response: any) {
+    super(response);
+    this.callbackPath = this.getResponseProperty("CallbackPath");
+    this.signedOutCallbackPath = this.getResponseProperty("SignedOutCallbackPath");
+    this.spEntityId = this.getResponseProperty("SpEntityId");
+    this.spMetadataUrl = this.getResponseProperty("SpMetadataUrl");
+    this.spAcsUrl = this.getResponseProperty("SpAcsUrl");
+  }
 }
diff --git a/jslib/common/src/models/response/organizationAutoEnrollStatusResponse.ts b/jslib/common/src/models/response/organizationAutoEnrollStatusResponse.ts
index 1f9f77b5..d960463e 100644
--- a/jslib/common/src/models/response/organizationAutoEnrollStatusResponse.ts
+++ b/jslib/common/src/models/response/organizationAutoEnrollStatusResponse.ts
@@ -1,12 +1,12 @@
-import { BaseResponse } from './baseResponse';
+import { BaseResponse } from "./baseResponse";
 
 export class OrganizationAutoEnrollStatusResponse extends BaseResponse {
-    id: string;
-    resetPasswordEnabled: boolean;
+  id: string;
+  resetPasswordEnabled: boolean;
 
-    constructor(response: any) {
-        super(response);
-        this.id = this.getResponseProperty('Id');
-        this.resetPasswordEnabled = this.getResponseProperty('ResetPasswordEnabled');
-    }
+  constructor(response: any) {
+    super(response);
+    this.id = this.getResponseProperty("Id");
+    this.resetPasswordEnabled = this.getResponseProperty("ResetPasswordEnabled");
+  }
 }
diff --git a/jslib/common/src/models/response/organizationKeysResponse.ts b/jslib/common/src/models/response/organizationKeysResponse.ts
index a5ed77d3..3d5c0d29 100644
--- a/jslib/common/src/models/response/organizationKeysResponse.ts
+++ b/jslib/common/src/models/response/organizationKeysResponse.ts
@@ -1,7 +1,7 @@
-import { KeysResponse } from './keysResponse';
+import { KeysResponse } from "./keysResponse";
 
 export class OrganizationKeysResponse extends KeysResponse {
-    constructor(response: any) {
-        super(response);
-    }
+  constructor(response: any) {
+    super(response);
+  }
 }
diff --git a/jslib/common/src/models/response/organizationResponse.ts b/jslib/common/src/models/response/organizationResponse.ts
index 0965bea9..c1938253 100644
--- a/jslib/common/src/models/response/organizationResponse.ts
+++ b/jslib/common/src/models/response/organizationResponse.ts
@@ -1,60 +1,60 @@
-import { BaseResponse } from './baseResponse';
-import { PlanResponse } from './planResponse';
+import { BaseResponse } from "./baseResponse";
+import { PlanResponse } from "./planResponse";
 
-import { PlanType } from '../../enums/planType';
+import { PlanType } from "../../enums/planType";
 
 export class OrganizationResponse extends BaseResponse {
-    id: string;
-    identifier: string;
-    name: string;
-    businessName: string;
-    businessAddress1: string;
-    businessAddress2: string;
-    businessAddress3: string;
-    businessCountry: string;
-    businessTaxNumber: string;
-    billingEmail: string;
-    plan: PlanResponse;
-    planType: PlanType;
-    seats: number;
-    maxAutoscaleSeats: number;
-    maxCollections: number;
-    maxStorageGb: number;
-    useGroups: boolean;
-    useDirectory: boolean;
-    useEvents: boolean;
-    useTotp: boolean;
-    use2fa: boolean;
-    useApi: boolean;
-    useResetPassword: boolean;
-    hasPublicAndPrivateKeys: boolean;
+  id: string;
+  identifier: string;
+  name: string;
+  businessName: string;
+  businessAddress1: string;
+  businessAddress2: string;
+  businessAddress3: string;
+  businessCountry: string;
+  businessTaxNumber: string;
+  billingEmail: string;
+  plan: PlanResponse;
+  planType: PlanType;
+  seats: number;
+  maxAutoscaleSeats: number;
+  maxCollections: number;
+  maxStorageGb: number;
+  useGroups: boolean;
+  useDirectory: boolean;
+  useEvents: boolean;
+  useTotp: boolean;
+  use2fa: boolean;
+  useApi: boolean;
+  useResetPassword: boolean;
+  hasPublicAndPrivateKeys: boolean;
 
-    constructor(response: any) {
-        super(response);
-        this.id = this.getResponseProperty('Id');
-        this.identifier = this.getResponseProperty('Identifier');
-        this.name = this.getResponseProperty('Name');
-        this.businessName = this.getResponseProperty('BusinessName');
-        this.businessAddress1 = this.getResponseProperty('BusinessAddress1');
-        this.businessAddress2 = this.getResponseProperty('BusinessAddress2');
-        this.businessAddress3 = this.getResponseProperty('BusinessAddress3');
-        this.businessCountry = this.getResponseProperty('BusinessCountry');
-        this.businessTaxNumber = this.getResponseProperty('BusinessTaxNumber');
-        this.billingEmail = this.getResponseProperty('BillingEmail');
-        const plan = this.getResponseProperty('Plan');
-        this.plan = plan == null ? null : new PlanResponse(plan);
-        this.planType = this.getResponseProperty('PlanType');
-        this.seats = this.getResponseProperty('Seats');
-        this.maxAutoscaleSeats = this.getResponseProperty('MaxAutoscaleSeats');
-        this.maxCollections = this.getResponseProperty('MaxCollections');
-        this.maxStorageGb = this.getResponseProperty('MaxStorageGb');
-        this.useGroups = this.getResponseProperty('UseGroups');
-        this.useDirectory = this.getResponseProperty('UseDirectory');
-        this.useEvents = this.getResponseProperty('UseEvents');
-        this.useTotp = this.getResponseProperty('UseTotp');
-        this.use2fa = this.getResponseProperty('Use2fa');
-        this.useApi = this.getResponseProperty('UseApi');
-        this.useResetPassword = this.getResponseProperty('UseResetPassword');
-        this.hasPublicAndPrivateKeys = this.getResponseProperty('HasPublicAndPrivateKeys');
-    }
+  constructor(response: any) {
+    super(response);
+    this.id = this.getResponseProperty("Id");
+    this.identifier = this.getResponseProperty("Identifier");
+    this.name = this.getResponseProperty("Name");
+    this.businessName = this.getResponseProperty("BusinessName");
+    this.businessAddress1 = this.getResponseProperty("BusinessAddress1");
+    this.businessAddress2 = this.getResponseProperty("BusinessAddress2");
+    this.businessAddress3 = this.getResponseProperty("BusinessAddress3");
+    this.businessCountry = this.getResponseProperty("BusinessCountry");
+    this.businessTaxNumber = this.getResponseProperty("BusinessTaxNumber");
+    this.billingEmail = this.getResponseProperty("BillingEmail");
+    const plan = this.getResponseProperty("Plan");
+    this.plan = plan == null ? null : new PlanResponse(plan);
+    this.planType = this.getResponseProperty("PlanType");
+    this.seats = this.getResponseProperty("Seats");
+    this.maxAutoscaleSeats = this.getResponseProperty("MaxAutoscaleSeats");
+    this.maxCollections = this.getResponseProperty("MaxCollections");
+    this.maxStorageGb = this.getResponseProperty("MaxStorageGb");
+    this.useGroups = this.getResponseProperty("UseGroups");
+    this.useDirectory = this.getResponseProperty("UseDirectory");
+    this.useEvents = this.getResponseProperty("UseEvents");
+    this.useTotp = this.getResponseProperty("UseTotp");
+    this.use2fa = this.getResponseProperty("Use2fa");
+    this.useApi = this.getResponseProperty("UseApi");
+    this.useResetPassword = this.getResponseProperty("UseResetPassword");
+    this.hasPublicAndPrivateKeys = this.getResponseProperty("HasPublicAndPrivateKeys");
+  }
 }
diff --git a/jslib/common/src/models/response/organizationSubscriptionResponse.ts b/jslib/common/src/models/response/organizationSubscriptionResponse.ts
index 9fbd16d5..1985dc6e 100644
--- a/jslib/common/src/models/response/organizationSubscriptionResponse.ts
+++ b/jslib/common/src/models/response/organizationSubscriptionResponse.ts
@@ -1,25 +1,27 @@
-import { OrganizationResponse } from './organizationResponse';
+import { OrganizationResponse } from "./organizationResponse";
 import {
-    BillingSubscriptionResponse,
-    BillingSubscriptionUpcomingInvoiceResponse,
-} from './subscriptionResponse';
+  BillingSubscriptionResponse,
+  BillingSubscriptionUpcomingInvoiceResponse,
+} from "./subscriptionResponse";
 
 export class OrganizationSubscriptionResponse extends OrganizationResponse {
-    storageName: string;
-    storageGb: number;
-    subscription: BillingSubscriptionResponse;
-    upcomingInvoice: BillingSubscriptionUpcomingInvoiceResponse;
-    expiration: string;
+  storageName: string;
+  storageGb: number;
+  subscription: BillingSubscriptionResponse;
+  upcomingInvoice: BillingSubscriptionUpcomingInvoiceResponse;
+  expiration: string;
 
-    constructor(response: any) {
-        super(response);
-        this.storageName = this.getResponseProperty('StorageName');
-        this.storageGb = this.getResponseProperty('StorageGb');
-        const subscription = this.getResponseProperty('Subscription');
-        this.subscription = subscription == null ? null : new BillingSubscriptionResponse(subscription);
-        const upcomingInvoice = this.getResponseProperty('UpcomingInvoice');
-        this.upcomingInvoice = upcomingInvoice == null ? null :
-            new BillingSubscriptionUpcomingInvoiceResponse(upcomingInvoice);
-        this.expiration = this.getResponseProperty('Expiration');
-    }
+  constructor(response: any) {
+    super(response);
+    this.storageName = this.getResponseProperty("StorageName");
+    this.storageGb = this.getResponseProperty("StorageGb");
+    const subscription = this.getResponseProperty("Subscription");
+    this.subscription = subscription == null ? null : new BillingSubscriptionResponse(subscription);
+    const upcomingInvoice = this.getResponseProperty("UpcomingInvoice");
+    this.upcomingInvoice =
+      upcomingInvoice == null
+        ? null
+        : new BillingSubscriptionUpcomingInvoiceResponse(upcomingInvoice);
+    this.expiration = this.getResponseProperty("Expiration");
+  }
 }
diff --git a/jslib/common/src/models/response/organizationUserBulkPublicKeyResponse.ts b/jslib/common/src/models/response/organizationUserBulkPublicKeyResponse.ts
index f5891c10..1b77e036 100644
--- a/jslib/common/src/models/response/organizationUserBulkPublicKeyResponse.ts
+++ b/jslib/common/src/models/response/organizationUserBulkPublicKeyResponse.ts
@@ -1,14 +1,14 @@
-import { BaseResponse } from './baseResponse';
+import { BaseResponse } from "./baseResponse";
 
 export class OrganizationUserBulkPublicKeyResponse extends BaseResponse {
-    id: string;
-    userId: string;
-    key: string;
+  id: string;
+  userId: string;
+  key: string;
 
-    constructor(response: any) {
-        super(response);
-        this.id = this.getResponseProperty('Id');
-        this.userId = this.getResponseProperty('UserId');
-        this.key = this.getResponseProperty('Key');
-    }
+  constructor(response: any) {
+    super(response);
+    this.id = this.getResponseProperty("Id");
+    this.userId = this.getResponseProperty("UserId");
+    this.key = this.getResponseProperty("Key");
+  }
 }
diff --git a/jslib/common/src/models/response/organizationUserBulkResponse.ts b/jslib/common/src/models/response/organizationUserBulkResponse.ts
index eeee2c8f..15c6f371 100644
--- a/jslib/common/src/models/response/organizationUserBulkResponse.ts
+++ b/jslib/common/src/models/response/organizationUserBulkResponse.ts
@@ -1,12 +1,12 @@
-import { BaseResponse } from './baseResponse';
+import { BaseResponse } from "./baseResponse";
 
 export class OrganizationUserBulkResponse extends BaseResponse {
-    id: string;
-    error: string;
+  id: string;
+  error: string;
 
-    constructor(response: any) {
-        super(response);
-        this.id = this.getResponseProperty('Id');
-        this.error = this.getResponseProperty('Error');
-    }
+  constructor(response: any) {
+    super(response);
+    this.id = this.getResponseProperty("Id");
+    this.error = this.getResponseProperty("Error");
+  }
 }
diff --git a/jslib/common/src/models/response/organizationUserResponse.ts b/jslib/common/src/models/response/organizationUserResponse.ts
index 3b155f01..493d2661 100644
--- a/jslib/common/src/models/response/organizationUserResponse.ts
+++ b/jslib/common/src/models/response/organizationUserResponse.ts
@@ -1,71 +1,71 @@
-import { BaseResponse } from './baseResponse';
-import { SelectionReadOnlyResponse } from './selectionReadOnlyResponse';
+import { BaseResponse } from "./baseResponse";
+import { SelectionReadOnlyResponse } from "./selectionReadOnlyResponse";
 
-import { PermissionsApi } from '../api/permissionsApi';
+import { PermissionsApi } from "../api/permissionsApi";
 
-import { KdfType } from '../../enums/kdfType';
-import { OrganizationUserStatusType } from '../../enums/organizationUserStatusType';
-import { OrganizationUserType } from '../../enums/organizationUserType';
+import { KdfType } from "../../enums/kdfType";
+import { OrganizationUserStatusType } from "../../enums/organizationUserStatusType";
+import { OrganizationUserType } from "../../enums/organizationUserType";
 
 export class OrganizationUserResponse extends BaseResponse {
-    id: string;
-    userId: string;
-    type: OrganizationUserType;
-    status: OrganizationUserStatusType;
-    accessAll: boolean;
-    permissions: PermissionsApi;
-    resetPasswordEnrolled: boolean;
+  id: string;
+  userId: string;
+  type: OrganizationUserType;
+  status: OrganizationUserStatusType;
+  accessAll: boolean;
+  permissions: PermissionsApi;
+  resetPasswordEnrolled: boolean;
 
-    constructor(response: any) {
-        super(response);
-        this.id = this.getResponseProperty('Id');
-        this.userId = this.getResponseProperty('UserId');
-        this.type = this.getResponseProperty('Type');
-        this.status = this.getResponseProperty('Status');
-        this.permissions = new PermissionsApi(this.getResponseProperty('Permissions'));
-        this.accessAll = this.getResponseProperty('AccessAll');
-        this.resetPasswordEnrolled = this.getResponseProperty('ResetPasswordEnrolled');
-    }
+  constructor(response: any) {
+    super(response);
+    this.id = this.getResponseProperty("Id");
+    this.userId = this.getResponseProperty("UserId");
+    this.type = this.getResponseProperty("Type");
+    this.status = this.getResponseProperty("Status");
+    this.permissions = new PermissionsApi(this.getResponseProperty("Permissions"));
+    this.accessAll = this.getResponseProperty("AccessAll");
+    this.resetPasswordEnrolled = this.getResponseProperty("ResetPasswordEnrolled");
+  }
 }
 
 export class OrganizationUserUserDetailsResponse extends OrganizationUserResponse {
-    name: string;
-    email: string;
-    twoFactorEnabled: boolean;
-    usesKeyConnector: boolean;
+  name: string;
+  email: string;
+  twoFactorEnabled: boolean;
+  usesKeyConnector: boolean;
 
-    constructor(response: any) {
-        super(response);
-        this.name = this.getResponseProperty('Name');
-        this.email = this.getResponseProperty('Email');
-        this.twoFactorEnabled = this.getResponseProperty('TwoFactorEnabled');
-        this.usesKeyConnector = this.getResponseProperty('UsesKeyConnector') ?? false;
-    }
+  constructor(response: any) {
+    super(response);
+    this.name = this.getResponseProperty("Name");
+    this.email = this.getResponseProperty("Email");
+    this.twoFactorEnabled = this.getResponseProperty("TwoFactorEnabled");
+    this.usesKeyConnector = this.getResponseProperty("UsesKeyConnector") ?? false;
+  }
 }
 
 export class OrganizationUserDetailsResponse extends OrganizationUserResponse {
-    collections: SelectionReadOnlyResponse[] = [];
+  collections: SelectionReadOnlyResponse[] = [];
 
-    constructor(response: any) {
-        super(response);
-        const collections = this.getResponseProperty('Collections');
-        if (collections != null) {
-            this.collections = collections.map((c: any) => new SelectionReadOnlyResponse(c));
-        }
+  constructor(response: any) {
+    super(response);
+    const collections = this.getResponseProperty("Collections");
+    if (collections != null) {
+      this.collections = collections.map((c: any) => new SelectionReadOnlyResponse(c));
     }
+  }
 }
 
 export class OrganizationUserResetPasswordDetailsReponse extends BaseResponse {
-    kdf: KdfType;
-    kdfIterations: number;
-    resetPasswordKey: string;
-    encryptedPrivateKey: string;
+  kdf: KdfType;
+  kdfIterations: number;
+  resetPasswordKey: string;
+  encryptedPrivateKey: string;
 
-    constructor(response: any) {
-        super(response);
-        this.kdf = this.getResponseProperty('Kdf');
-        this.kdfIterations = this.getResponseProperty('KdfIterations');
-        this.resetPasswordKey = this.getResponseProperty('ResetPasswordKey');
-        this.encryptedPrivateKey = this.getResponseProperty('EncryptedPrivateKey');
-    }
+  constructor(response: any) {
+    super(response);
+    this.kdf = this.getResponseProperty("Kdf");
+    this.kdfIterations = this.getResponseProperty("KdfIterations");
+    this.resetPasswordKey = this.getResponseProperty("ResetPasswordKey");
+    this.encryptedPrivateKey = this.getResponseProperty("EncryptedPrivateKey");
+  }
 }
diff --git a/jslib/common/src/models/response/passwordHistoryResponse.ts b/jslib/common/src/models/response/passwordHistoryResponse.ts
index 805a5668..f3a8a133 100644
--- a/jslib/common/src/models/response/passwordHistoryResponse.ts
+++ b/jslib/common/src/models/response/passwordHistoryResponse.ts
@@ -1,12 +1,12 @@
-import { BaseResponse } from './baseResponse';
+import { BaseResponse } from "./baseResponse";
 
 export class PasswordHistoryResponse extends BaseResponse {
-    password: string;
-    lastUsedDate: string;
+  password: string;
+  lastUsedDate: string;
 
-    constructor(response: any) {
-        super(response);
-        this.password = this.getResponseProperty('Password');
-        this.lastUsedDate = this.getResponseProperty('LastUsedDate');
-    }
+  constructor(response: any) {
+    super(response);
+    this.password = this.getResponseProperty("Password");
+    this.lastUsedDate = this.getResponseProperty("LastUsedDate");
+  }
 }
diff --git a/jslib/common/src/models/response/paymentResponse.ts b/jslib/common/src/models/response/paymentResponse.ts
index f4cc6745..ec4977cd 100644
--- a/jslib/common/src/models/response/paymentResponse.ts
+++ b/jslib/common/src/models/response/paymentResponse.ts
@@ -1,18 +1,18 @@
-import { BaseResponse } from './baseResponse';
-import { ProfileResponse } from './profileResponse';
+import { BaseResponse } from "./baseResponse";
+import { ProfileResponse } from "./profileResponse";
 
 export class PaymentResponse extends BaseResponse {
-    userProfile: ProfileResponse;
-    paymentIntentClientSecret: string;
-    success: boolean;
+  userProfile: ProfileResponse;
+  paymentIntentClientSecret: string;
+  success: boolean;
 
-    constructor(response: any) {
-        super(response);
-        const userProfile = this.getResponseProperty('UserProfile');
-        if (userProfile != null) {
-            this.userProfile = new ProfileResponse(userProfile);
-        }
-        this.paymentIntentClientSecret = this.getResponseProperty('PaymentIntentClientSecret');
-        this.success = this.getResponseProperty('Success');
+  constructor(response: any) {
+    super(response);
+    const userProfile = this.getResponseProperty("UserProfile");
+    if (userProfile != null) {
+      this.userProfile = new ProfileResponse(userProfile);
     }
+    this.paymentIntentClientSecret = this.getResponseProperty("PaymentIntentClientSecret");
+    this.success = this.getResponseProperty("Success");
+  }
 }
diff --git a/jslib/common/src/models/response/planResponse.ts b/jslib/common/src/models/response/planResponse.ts
index cd201db9..04652542 100644
--- a/jslib/common/src/models/response/planResponse.ts
+++ b/jslib/common/src/models/response/planResponse.ts
@@ -1,95 +1,95 @@
-import { PlanType } from '../../enums/planType';
-import { ProductType } from '../../enums/productType';
+import { PlanType } from "../../enums/planType";
+import { ProductType } from "../../enums/productType";
 
-import { BaseResponse } from './baseResponse';
+import { BaseResponse } from "./baseResponse";
 
 export class PlanResponse extends BaseResponse {
-    type: PlanType;
-    product: ProductType;
-    name: string;
-    isAnnual: boolean;
-    nameLocalizationKey: string;
-    descriptionLocalizationKey: string;
-    canBeUsedByBusiness: boolean;
-    baseSeats: number;
-    baseStorageGb: number;
-    maxCollections: number;
-    maxUsers: number;
+  type: PlanType;
+  product: ProductType;
+  name: string;
+  isAnnual: boolean;
+  nameLocalizationKey: string;
+  descriptionLocalizationKey: string;
+  canBeUsedByBusiness: boolean;
+  baseSeats: number;
+  baseStorageGb: number;
+  maxCollections: number;
+  maxUsers: number;
 
-    hasAdditionalSeatsOption: boolean;
-    maxAdditionalSeats: number;
-    hasAdditionalStorageOption: boolean;
-    maxAdditionalStorage: number;
-    hasPremiumAccessOption: boolean;
-    trialPeriodDays: number;
+  hasAdditionalSeatsOption: boolean;
+  maxAdditionalSeats: number;
+  hasAdditionalStorageOption: boolean;
+  maxAdditionalStorage: number;
+  hasPremiumAccessOption: boolean;
+  trialPeriodDays: number;
 
-    hasSelfHost: boolean;
-    hasPolicies: boolean;
-    hasGroups: boolean;
-    hasDirectory: boolean;
-    hasEvents: boolean;
-    hasTotp: boolean;
-    has2fa: boolean;
-    hasApi: boolean;
-    hasSso: boolean;
-    hasResetPassword: boolean;
-    usersGetPremium: boolean;
+  hasSelfHost: boolean;
+  hasPolicies: boolean;
+  hasGroups: boolean;
+  hasDirectory: boolean;
+  hasEvents: boolean;
+  hasTotp: boolean;
+  has2fa: boolean;
+  hasApi: boolean;
+  hasSso: boolean;
+  hasResetPassword: boolean;
+  usersGetPremium: boolean;
 
-    upgradeSortOrder: number;
-    displaySortOrder: number;
-    legacyYear: number;
-    disabled: boolean;
+  upgradeSortOrder: number;
+  displaySortOrder: number;
+  legacyYear: number;
+  disabled: boolean;
 
-    stripePlanId: string;
-    stripeSeatPlanId: string;
-    stripeStoragePlanId: string;
-    stripePremiumAccessPlanId: string;
-    basePrice: number;
-    seatPrice: number;
-    additionalStoragePricePerGb: number;
-    premiumAccessOptionPrice: number;
+  stripePlanId: string;
+  stripeSeatPlanId: string;
+  stripeStoragePlanId: string;
+  stripePremiumAccessPlanId: string;
+  basePrice: number;
+  seatPrice: number;
+  additionalStoragePricePerGb: number;
+  premiumAccessOptionPrice: number;
 
-    constructor(response: any) {
-        super(response);
-        this.type = this.getResponseProperty('Type');
-        this.product = this.getResponseProperty('Product');
-        this.name = this.getResponseProperty('Name');
-        this.isAnnual = this.getResponseProperty('IsAnnual');
-        this.nameLocalizationKey = this.getResponseProperty('NameLocalizationKey');
-        this.descriptionLocalizationKey = this.getResponseProperty('DescriptionLocalizationKey');
-        this.canBeUsedByBusiness = this.getResponseProperty('CanBeUsedByBusiness');
-        this.baseSeats = this.getResponseProperty('BaseSeats');
-        this.baseStorageGb = this.getResponseProperty('BaseStorageGb');
-        this.maxCollections = this.getResponseProperty('MaxCollections');
-        this.maxUsers = this.getResponseProperty('MaxUsers');
-        this.hasAdditionalSeatsOption = this.getResponseProperty('HasAdditionalSeatsOption');
-        this.maxAdditionalSeats = this.getResponseProperty('MaxAdditionalSeats');
-        this.hasAdditionalStorageOption = this.getResponseProperty('HasAdditionalStorageOption');
-        this.maxAdditionalStorage = this.getResponseProperty('MaxAdditionalStorage');
-        this.hasPremiumAccessOption = this.getResponseProperty('HasPremiumAccessOption');
-        this.trialPeriodDays = this.getResponseProperty('TrialPeriodDays');
-        this.hasSelfHost = this.getResponseProperty('HasSelfHost');
-        this.hasPolicies = this.getResponseProperty('HasPolicies');
-        this.hasGroups = this.getResponseProperty('HasGroups');
-        this.hasDirectory = this.getResponseProperty('HasDirectory');
-        this.hasEvents = this.getResponseProperty('HasEvents');
-        this.hasTotp = this.getResponseProperty('HasTotp');
-        this.has2fa = this.getResponseProperty('Has2fa');
-        this.hasApi = this.getResponseProperty('HasApi');
-        this.hasSso = this.getResponseProperty('HasSso');
-        this.hasResetPassword = this.getResponseProperty('HasResetPassword');
-        this.usersGetPremium = this.getResponseProperty('UsersGetPremium');
-        this.upgradeSortOrder = this.getResponseProperty('UpgradeSortOrder');
-        this.displaySortOrder = this.getResponseProperty('SortOrder');
-        this.legacyYear = this.getResponseProperty('LegacyYear');
-        this.disabled = this.getResponseProperty('Disabled');
-        this.stripePlanId = this.getResponseProperty('StripePlanId');
-        this.stripeSeatPlanId = this.getResponseProperty('StripeSeatPlanId');
-        this.stripeStoragePlanId = this.getResponseProperty('StripeStoragePlanId');
-        this.stripePremiumAccessPlanId = this.getResponseProperty('StripePremiumAccessPlanId');
-        this.basePrice = this.getResponseProperty('BasePrice');
-        this.seatPrice = this.getResponseProperty('SeatPrice');
-        this.additionalStoragePricePerGb = this.getResponseProperty('AdditionalStoragePricePerGb');
-        this.premiumAccessOptionPrice = this.getResponseProperty('PremiumAccessOptionPrice');
-    }
+  constructor(response: any) {
+    super(response);
+    this.type = this.getResponseProperty("Type");
+    this.product = this.getResponseProperty("Product");
+    this.name = this.getResponseProperty("Name");
+    this.isAnnual = this.getResponseProperty("IsAnnual");
+    this.nameLocalizationKey = this.getResponseProperty("NameLocalizationKey");
+    this.descriptionLocalizationKey = this.getResponseProperty("DescriptionLocalizationKey");
+    this.canBeUsedByBusiness = this.getResponseProperty("CanBeUsedByBusiness");
+    this.baseSeats = this.getResponseProperty("BaseSeats");
+    this.baseStorageGb = this.getResponseProperty("BaseStorageGb");
+    this.maxCollections = this.getResponseProperty("MaxCollections");
+    this.maxUsers = this.getResponseProperty("MaxUsers");
+    this.hasAdditionalSeatsOption = this.getResponseProperty("HasAdditionalSeatsOption");
+    this.maxAdditionalSeats = this.getResponseProperty("MaxAdditionalSeats");
+    this.hasAdditionalStorageOption = this.getResponseProperty("HasAdditionalStorageOption");
+    this.maxAdditionalStorage = this.getResponseProperty("MaxAdditionalStorage");
+    this.hasPremiumAccessOption = this.getResponseProperty("HasPremiumAccessOption");
+    this.trialPeriodDays = this.getResponseProperty("TrialPeriodDays");
+    this.hasSelfHost = this.getResponseProperty("HasSelfHost");
+    this.hasPolicies = this.getResponseProperty("HasPolicies");
+    this.hasGroups = this.getResponseProperty("HasGroups");
+    this.hasDirectory = this.getResponseProperty("HasDirectory");
+    this.hasEvents = this.getResponseProperty("HasEvents");
+    this.hasTotp = this.getResponseProperty("HasTotp");
+    this.has2fa = this.getResponseProperty("Has2fa");
+    this.hasApi = this.getResponseProperty("HasApi");
+    this.hasSso = this.getResponseProperty("HasSso");
+    this.hasResetPassword = this.getResponseProperty("HasResetPassword");
+    this.usersGetPremium = this.getResponseProperty("UsersGetPremium");
+    this.upgradeSortOrder = this.getResponseProperty("UpgradeSortOrder");
+    this.displaySortOrder = this.getResponseProperty("SortOrder");
+    this.legacyYear = this.getResponseProperty("LegacyYear");
+    this.disabled = this.getResponseProperty("Disabled");
+    this.stripePlanId = this.getResponseProperty("StripePlanId");
+    this.stripeSeatPlanId = this.getResponseProperty("StripeSeatPlanId");
+    this.stripeStoragePlanId = this.getResponseProperty("StripeStoragePlanId");
+    this.stripePremiumAccessPlanId = this.getResponseProperty("StripePremiumAccessPlanId");
+    this.basePrice = this.getResponseProperty("BasePrice");
+    this.seatPrice = this.getResponseProperty("SeatPrice");
+    this.additionalStoragePricePerGb = this.getResponseProperty("AdditionalStoragePricePerGb");
+    this.premiumAccessOptionPrice = this.getResponseProperty("PremiumAccessOptionPrice");
+  }
 }
diff --git a/jslib/common/src/models/response/policyResponse.ts b/jslib/common/src/models/response/policyResponse.ts
index 2fa931f3..328491cf 100644
--- a/jslib/common/src/models/response/policyResponse.ts
+++ b/jslib/common/src/models/response/policyResponse.ts
@@ -1,20 +1,20 @@
-import { BaseResponse } from './baseResponse';
+import { BaseResponse } from "./baseResponse";
 
-import { PolicyType } from '../../enums/policyType';
+import { PolicyType } from "../../enums/policyType";
 
 export class PolicyResponse extends BaseResponse {
-    id: string;
-    organizationId: string;
-    type: PolicyType;
-    data: any;
-    enabled: boolean;
+  id: string;
+  organizationId: string;
+  type: PolicyType;
+  data: any;
+  enabled: boolean;
 
-    constructor(response: any) {
-        super(response);
-        this.id = this.getResponseProperty('Id');
-        this.organizationId = this.getResponseProperty('OrganizationId');
-        this.type = this.getResponseProperty('Type');
-        this.data = this.getResponseProperty('Data');
-        this.enabled = this.getResponseProperty('Enabled');
-    }
+  constructor(response: any) {
+    super(response);
+    this.id = this.getResponseProperty("Id");
+    this.organizationId = this.getResponseProperty("OrganizationId");
+    this.type = this.getResponseProperty("Type");
+    this.data = this.getResponseProperty("Data");
+    this.enabled = this.getResponseProperty("Enabled");
+  }
 }
diff --git a/jslib/common/src/models/response/preloginResponse.ts b/jslib/common/src/models/response/preloginResponse.ts
index fcbd4cb2..d5396830 100644
--- a/jslib/common/src/models/response/preloginResponse.ts
+++ b/jslib/common/src/models/response/preloginResponse.ts
@@ -1,14 +1,14 @@
-import { BaseResponse } from './baseResponse';
+import { BaseResponse } from "./baseResponse";
 
-import { KdfType } from '../../enums/kdfType';
+import { KdfType } from "../../enums/kdfType";
 
 export class PreloginResponse extends BaseResponse {
-    kdf: KdfType;
-    kdfIterations: number;
+  kdf: KdfType;
+  kdfIterations: number;
 
-    constructor(response: any) {
-        super(response);
-        this.kdf = this.getResponseProperty('Kdf');
-        this.kdfIterations = this.getResponseProperty('KdfIterations');
-    }
+  constructor(response: any) {
+    super(response);
+    this.kdf = this.getResponseProperty("Kdf");
+    this.kdfIterations = this.getResponseProperty("KdfIterations");
+  }
 }
diff --git a/jslib/common/src/models/response/profileOrganizationResponse.ts b/jslib/common/src/models/response/profileOrganizationResponse.ts
index fdd873ba..efa2e3f8 100644
--- a/jslib/common/src/models/response/profileOrganizationResponse.ts
+++ b/jslib/common/src/models/response/profileOrganizationResponse.ts
@@ -1,81 +1,81 @@
-import { BaseResponse } from './baseResponse';
+import { BaseResponse } from "./baseResponse";
 
-import { OrganizationUserStatusType } from '../../enums/organizationUserStatusType';
-import { OrganizationUserType } from '../../enums/organizationUserType';
-import { ProductType } from '../../enums/productType';
-import { PermissionsApi } from '../api/permissionsApi';
+import { OrganizationUserStatusType } from "../../enums/organizationUserStatusType";
+import { OrganizationUserType } from "../../enums/organizationUserType";
+import { ProductType } from "../../enums/productType";
+import { PermissionsApi } from "../api/permissionsApi";
 
 export class ProfileOrganizationResponse extends BaseResponse {
-    id: string;
-    name: string;
-    usePolicies: boolean;
-    useGroups: boolean;
-    useDirectory: boolean;
-    useEvents: boolean;
-    useTotp: boolean;
-    use2fa: boolean;
-    useApi: boolean;
-    useSso: boolean;
-    useKeyConnector: boolean;
-    useResetPassword: boolean;
-    selfHost: boolean;
-    usersGetPremium: boolean;
-    seats: number;
-    maxCollections: number;
-    maxStorageGb?: number;
-    key: string;
-    hasPublicAndPrivateKeys: boolean;
-    status: OrganizationUserStatusType;
-    type: OrganizationUserType;
-    enabled: boolean;
-    ssoBound: boolean;
-    identifier: string;
-    permissions: PermissionsApi;
-    resetPasswordEnrolled: boolean;
-    userId: string;
-    providerId: string;
-    providerName: string;
-    familySponsorshipFriendlyName: string;
-    familySponsorshipAvailable: boolean;
-    planProductType: ProductType;
-    keyConnectorEnabled: boolean;
-    keyConnectorUrl: string;
+  id: string;
+  name: string;
+  usePolicies: boolean;
+  useGroups: boolean;
+  useDirectory: boolean;
+  useEvents: boolean;
+  useTotp: boolean;
+  use2fa: boolean;
+  useApi: boolean;
+  useSso: boolean;
+  useKeyConnector: boolean;
+  useResetPassword: boolean;
+  selfHost: boolean;
+  usersGetPremium: boolean;
+  seats: number;
+  maxCollections: number;
+  maxStorageGb?: number;
+  key: string;
+  hasPublicAndPrivateKeys: boolean;
+  status: OrganizationUserStatusType;
+  type: OrganizationUserType;
+  enabled: boolean;
+  ssoBound: boolean;
+  identifier: string;
+  permissions: PermissionsApi;
+  resetPasswordEnrolled: boolean;
+  userId: string;
+  providerId: string;
+  providerName: string;
+  familySponsorshipFriendlyName: string;
+  familySponsorshipAvailable: boolean;
+  planProductType: ProductType;
+  keyConnectorEnabled: boolean;
+  keyConnectorUrl: string;
 
-    constructor(response: any) {
-        super(response);
-        this.id = this.getResponseProperty('Id');
-        this.name = this.getResponseProperty('Name');
-        this.usePolicies = this.getResponseProperty('UsePolicies');
-        this.useGroups = this.getResponseProperty('UseGroups');
-        this.useDirectory = this.getResponseProperty('UseDirectory');
-        this.useEvents = this.getResponseProperty('UseEvents');
-        this.useTotp = this.getResponseProperty('UseTotp');
-        this.use2fa = this.getResponseProperty('Use2fa');
-        this.useApi = this.getResponseProperty('UseApi');
-        this.useSso = this.getResponseProperty('UseSso');
-        this.useKeyConnector = this.getResponseProperty('UseKeyConnector') ?? false;
-        this.useResetPassword = this.getResponseProperty('UseResetPassword');
-        this.selfHost = this.getResponseProperty('SelfHost');
-        this.usersGetPremium = this.getResponseProperty('UsersGetPremium');
-        this.seats = this.getResponseProperty('Seats');
-        this.maxCollections = this.getResponseProperty('MaxCollections');
-        this.maxStorageGb = this.getResponseProperty('MaxStorageGb');
-        this.key = this.getResponseProperty('Key');
-        this.hasPublicAndPrivateKeys = this.getResponseProperty('HasPublicAndPrivateKeys');
-        this.status = this.getResponseProperty('Status');
-        this.type = this.getResponseProperty('Type');
-        this.enabled = this.getResponseProperty('Enabled');
-        this.ssoBound = this.getResponseProperty('SsoBound');
-        this.identifier = this.getResponseProperty('Identifier');
-        this.permissions = new PermissionsApi(this.getResponseProperty('permissions'));
-        this.resetPasswordEnrolled = this.getResponseProperty('ResetPasswordEnrolled');
-        this.userId = this.getResponseProperty('UserId');
-        this.providerId = this.getResponseProperty('ProviderId');
-        this.providerName = this.getResponseProperty('ProviderName');
-        this.familySponsorshipFriendlyName = this.getResponseProperty('FamilySponsorshipFriendlyName');
-        this.familySponsorshipAvailable = this.getResponseProperty('FamilySponsorshipAvailable');
-        this.planProductType = this.getResponseProperty('PlanProductType');
-        this.keyConnectorEnabled = this.getResponseProperty('KeyConnectorEnabled') ?? false;
-        this.keyConnectorUrl = this.getResponseProperty('KeyConnectorUrl');
-    }
+  constructor(response: any) {
+    super(response);
+    this.id = this.getResponseProperty("Id");
+    this.name = this.getResponseProperty("Name");
+    this.usePolicies = this.getResponseProperty("UsePolicies");
+    this.useGroups = this.getResponseProperty("UseGroups");
+    this.useDirectory = this.getResponseProperty("UseDirectory");
+    this.useEvents = this.getResponseProperty("UseEvents");
+    this.useTotp = this.getResponseProperty("UseTotp");
+    this.use2fa = this.getResponseProperty("Use2fa");
+    this.useApi = this.getResponseProperty("UseApi");
+    this.useSso = this.getResponseProperty("UseSso");
+    this.useKeyConnector = this.getResponseProperty("UseKeyConnector") ?? false;
+    this.useResetPassword = this.getResponseProperty("UseResetPassword");
+    this.selfHost = this.getResponseProperty("SelfHost");
+    this.usersGetPremium = this.getResponseProperty("UsersGetPremium");
+    this.seats = this.getResponseProperty("Seats");
+    this.maxCollections = this.getResponseProperty("MaxCollections");
+    this.maxStorageGb = this.getResponseProperty("MaxStorageGb");
+    this.key = this.getResponseProperty("Key");
+    this.hasPublicAndPrivateKeys = this.getResponseProperty("HasPublicAndPrivateKeys");
+    this.status = this.getResponseProperty("Status");
+    this.type = this.getResponseProperty("Type");
+    this.enabled = this.getResponseProperty("Enabled");
+    this.ssoBound = this.getResponseProperty("SsoBound");
+    this.identifier = this.getResponseProperty("Identifier");
+    this.permissions = new PermissionsApi(this.getResponseProperty("permissions"));
+    this.resetPasswordEnrolled = this.getResponseProperty("ResetPasswordEnrolled");
+    this.userId = this.getResponseProperty("UserId");
+    this.providerId = this.getResponseProperty("ProviderId");
+    this.providerName = this.getResponseProperty("ProviderName");
+    this.familySponsorshipFriendlyName = this.getResponseProperty("FamilySponsorshipFriendlyName");
+    this.familySponsorshipAvailable = this.getResponseProperty("FamilySponsorshipAvailable");
+    this.planProductType = this.getResponseProperty("PlanProductType");
+    this.keyConnectorEnabled = this.getResponseProperty("KeyConnectorEnabled") ?? false;
+    this.keyConnectorUrl = this.getResponseProperty("KeyConnectorUrl");
+  }
 }
diff --git a/jslib/common/src/models/response/profileProviderOrganizationResponse.ts b/jslib/common/src/models/response/profileProviderOrganizationResponse.ts
index d34b78d0..74b74c00 100644
--- a/jslib/common/src/models/response/profileProviderOrganizationResponse.ts
+++ b/jslib/common/src/models/response/profileProviderOrganizationResponse.ts
@@ -1,8 +1,8 @@
-import { ProfileOrganizationResponse } from './profileOrganizationResponse';
+import { ProfileOrganizationResponse } from "./profileOrganizationResponse";
 
 export class ProfileProviderOrganizationResponse extends ProfileOrganizationResponse {
-    constructor(response: any) {
-        super(response);
-        this.keyConnectorEnabled = false;
-    }
+  constructor(response: any) {
+    super(response);
+    this.keyConnectorEnabled = false;
+  }
 }
diff --git a/jslib/common/src/models/response/profileProviderResponse.ts b/jslib/common/src/models/response/profileProviderResponse.ts
index b3c23404..04610080 100644
--- a/jslib/common/src/models/response/profileProviderResponse.ts
+++ b/jslib/common/src/models/response/profileProviderResponse.ts
@@ -1,31 +1,31 @@
-import { BaseResponse } from './baseResponse';
+import { BaseResponse } from "./baseResponse";
 
-import { ProviderUserStatusType } from '../../enums/providerUserStatusType';
-import { ProviderUserType } from '../../enums/providerUserType';
+import { ProviderUserStatusType } from "../../enums/providerUserStatusType";
+import { ProviderUserType } from "../../enums/providerUserType";
 
-import { PermissionsApi } from '../api/permissionsApi';
+import { PermissionsApi } from "../api/permissionsApi";
 
 export class ProfileProviderResponse extends BaseResponse {
-    id: string;
-    name: string;
-    key: string;
-    status: ProviderUserStatusType;
-    type: ProviderUserType;
-    enabled: boolean;
-    permissions: PermissionsApi;
-    userId: string;
-    useEvents: boolean;
+  id: string;
+  name: string;
+  key: string;
+  status: ProviderUserStatusType;
+  type: ProviderUserType;
+  enabled: boolean;
+  permissions: PermissionsApi;
+  userId: string;
+  useEvents: boolean;
 
-    constructor(response: any) {
-        super(response);
-        this.id = this.getResponseProperty('Id');
-        this.name = this.getResponseProperty('Name');
-        this.key = this.getResponseProperty('Key');
-        this.status = this.getResponseProperty('Status');
-        this.type = this.getResponseProperty('Type');
-        this.enabled = this.getResponseProperty('Enabled');
-        this.permissions = new PermissionsApi(this.getResponseProperty('permissions'));
-        this.userId = this.getResponseProperty('UserId');
-        this.useEvents = this.getResponseProperty('UseEvents');
-    }
+  constructor(response: any) {
+    super(response);
+    this.id = this.getResponseProperty("Id");
+    this.name = this.getResponseProperty("Name");
+    this.key = this.getResponseProperty("Key");
+    this.status = this.getResponseProperty("Status");
+    this.type = this.getResponseProperty("Type");
+    this.enabled = this.getResponseProperty("Enabled");
+    this.permissions = new PermissionsApi(this.getResponseProperty("permissions"));
+    this.userId = this.getResponseProperty("UserId");
+    this.useEvents = this.getResponseProperty("UseEvents");
+  }
 }
diff --git a/jslib/common/src/models/response/profileResponse.ts b/jslib/common/src/models/response/profileResponse.ts
index 913ff820..2c3e66fb 100644
--- a/jslib/common/src/models/response/profileResponse.ts
+++ b/jslib/common/src/models/response/profileResponse.ts
@@ -1,53 +1,55 @@
-import { BaseResponse } from './baseResponse';
-import { ProfileOrganizationResponse } from './profileOrganizationResponse';
-import { ProfileProviderOrganizationResponse } from './profileProviderOrganizationResponse';
-import { ProfileProviderResponse } from './profileProviderResponse';
+import { BaseResponse } from "./baseResponse";
+import { ProfileOrganizationResponse } from "./profileOrganizationResponse";
+import { ProfileProviderOrganizationResponse } from "./profileProviderOrganizationResponse";
+import { ProfileProviderResponse } from "./profileProviderResponse";
 
 export class ProfileResponse extends BaseResponse {
-    id: string;
-    name: string;
-    email: string;
-    emailVerified: boolean;
-    masterPasswordHint: string;
-    premium: boolean;
-    culture: string;
-    twoFactorEnabled: boolean;
-    key: string;
-    privateKey: string;
-    securityStamp: string;
-    forcePasswordReset: boolean;
-    usesKeyConnector: boolean;
-    organizations: ProfileOrganizationResponse[] = [];
-    providers: ProfileProviderResponse[] = [];
-    providerOrganizations: ProfileProviderOrganizationResponse[] = [];
+  id: string;
+  name: string;
+  email: string;
+  emailVerified: boolean;
+  masterPasswordHint: string;
+  premium: boolean;
+  culture: string;
+  twoFactorEnabled: boolean;
+  key: string;
+  privateKey: string;
+  securityStamp: string;
+  forcePasswordReset: boolean;
+  usesKeyConnector: boolean;
+  organizations: ProfileOrganizationResponse[] = [];
+  providers: ProfileProviderResponse[] = [];
+  providerOrganizations: ProfileProviderOrganizationResponse[] = [];
 
-    constructor(response: any) {
-        super(response);
-        this.id = this.getResponseProperty('Id');
-        this.name = this.getResponseProperty('Name');
-        this.email = this.getResponseProperty('Email');
-        this.emailVerified = this.getResponseProperty('EmailVerified');
-        this.masterPasswordHint = this.getResponseProperty('MasterPasswordHint');
-        this.premium = this.getResponseProperty('Premium');
-        this.culture = this.getResponseProperty('Culture');
-        this.twoFactorEnabled = this.getResponseProperty('TwoFactorEnabled');
-        this.key = this.getResponseProperty('Key');
-        this.privateKey = this.getResponseProperty('PrivateKey');
-        this.securityStamp = this.getResponseProperty('SecurityStamp');
-        this.forcePasswordReset = this.getResponseProperty('ForcePasswordReset') ?? false;
-        this.usesKeyConnector = this.getResponseProperty('UsesKeyConnector') ?? false;
+  constructor(response: any) {
+    super(response);
+    this.id = this.getResponseProperty("Id");
+    this.name = this.getResponseProperty("Name");
+    this.email = this.getResponseProperty("Email");
+    this.emailVerified = this.getResponseProperty("EmailVerified");
+    this.masterPasswordHint = this.getResponseProperty("MasterPasswordHint");
+    this.premium = this.getResponseProperty("Premium");
+    this.culture = this.getResponseProperty("Culture");
+    this.twoFactorEnabled = this.getResponseProperty("TwoFactorEnabled");
+    this.key = this.getResponseProperty("Key");
+    this.privateKey = this.getResponseProperty("PrivateKey");
+    this.securityStamp = this.getResponseProperty("SecurityStamp");
+    this.forcePasswordReset = this.getResponseProperty("ForcePasswordReset") ?? false;
+    this.usesKeyConnector = this.getResponseProperty("UsesKeyConnector") ?? false;
 
-        const organizations = this.getResponseProperty('Organizations');
-        if (organizations != null) {
-            this.organizations = organizations.map((o: any) => new ProfileOrganizationResponse(o));
-        }
-        const providers = this.getResponseProperty('Providers');
-        if (providers != null) {
-            this.providers = providers.map((o: any) => new ProfileProviderResponse(o));
-        }
-        const providerOrganizations = this.getResponseProperty('ProviderOrganizations');
-        if (providerOrganizations != null) {
-            this.providerOrganizations = providerOrganizations.map((o: any) => new ProfileProviderOrganizationResponse(o));
-        }
+    const organizations = this.getResponseProperty("Organizations");
+    if (organizations != null) {
+      this.organizations = organizations.map((o: any) => new ProfileOrganizationResponse(o));
     }
+    const providers = this.getResponseProperty("Providers");
+    if (providers != null) {
+      this.providers = providers.map((o: any) => new ProfileProviderResponse(o));
+    }
+    const providerOrganizations = this.getResponseProperty("ProviderOrganizations");
+    if (providerOrganizations != null) {
+      this.providerOrganizations = providerOrganizations.map(
+        (o: any) => new ProfileProviderOrganizationResponse(o)
+      );
+    }
+  }
 }
diff --git a/jslib/common/src/models/response/provider/providerOrganizationResponse.ts b/jslib/common/src/models/response/provider/providerOrganizationResponse.ts
index 91fa6a46..d733362a 100644
--- a/jslib/common/src/models/response/provider/providerOrganizationResponse.ts
+++ b/jslib/common/src/models/response/provider/providerOrganizationResponse.ts
@@ -1,31 +1,31 @@
-import { BaseResponse } from '../baseResponse';
+import { BaseResponse } from "../baseResponse";
 
 export class ProviderOrganizationResponse extends BaseResponse {
-    id: string;
-    providerId: string;
-    organizationId: string;
-    key: string;
-    settings: string;
-    creationDate: string;
-    revisionDate: string;
+  id: string;
+  providerId: string;
+  organizationId: string;
+  key: string;
+  settings: string;
+  creationDate: string;
+  revisionDate: string;
 
-    constructor(response: any) {
-        super(response);
-        this.id = this.getResponseProperty('Id');
-        this.providerId = this.getResponseProperty('ProviderId');
-        this.organizationId = this.getResponseProperty('OrganizationId');
-        this.key = this.getResponseProperty('Key');
-        this.settings = this.getResponseProperty('Settings');
-        this.creationDate = this.getResponseProperty('CreationDate');
-        this.revisionDate = this.getResponseProperty('RevisionDate');
-    }
+  constructor(response: any) {
+    super(response);
+    this.id = this.getResponseProperty("Id");
+    this.providerId = this.getResponseProperty("ProviderId");
+    this.organizationId = this.getResponseProperty("OrganizationId");
+    this.key = this.getResponseProperty("Key");
+    this.settings = this.getResponseProperty("Settings");
+    this.creationDate = this.getResponseProperty("CreationDate");
+    this.revisionDate = this.getResponseProperty("RevisionDate");
+  }
 }
 
 export class ProviderOrganizationOrganizationDetailsResponse extends ProviderOrganizationResponse {
-    organizationName: string;
+  organizationName: string;
 
-    constructor(response: any) {
-        super(response);
-        this.organizationName = this.getResponseProperty('OrganizationName');
-    }
+  constructor(response: any) {
+    super(response);
+    this.organizationName = this.getResponseProperty("OrganizationName");
+  }
 }
diff --git a/jslib/common/src/models/response/provider/providerResponse.ts b/jslib/common/src/models/response/provider/providerResponse.ts
index d3d2364e..2b8729fa 100644
--- a/jslib/common/src/models/response/provider/providerResponse.ts
+++ b/jslib/common/src/models/response/provider/providerResponse.ts
@@ -1,16 +1,16 @@
-import { BaseResponse } from '../baseResponse';
+import { BaseResponse } from "../baseResponse";
 
 export class ProviderResponse extends BaseResponse {
-    id: string;
-    name: string;
-    businessName: string;
-    billingEmail: string;
+  id: string;
+  name: string;
+  businessName: string;
+  billingEmail: string;
 
-    constructor(response: any) {
-        super(response);
-        this.id = this.getResponseProperty('Id');
-        this.name = this.getResponseProperty('Name');
-        this.businessName = this.getResponseProperty('BusinessName');
-        this.billingEmail = this.getResponseProperty('BillingEmail');
-    }
+  constructor(response: any) {
+    super(response);
+    this.id = this.getResponseProperty("Id");
+    this.name = this.getResponseProperty("Name");
+    this.businessName = this.getResponseProperty("BusinessName");
+    this.billingEmail = this.getResponseProperty("BillingEmail");
+  }
 }
diff --git a/jslib/common/src/models/response/provider/providerUserBulkPublicKeyResponse.ts b/jslib/common/src/models/response/provider/providerUserBulkPublicKeyResponse.ts
index 122be2aa..ad078f98 100644
--- a/jslib/common/src/models/response/provider/providerUserBulkPublicKeyResponse.ts
+++ b/jslib/common/src/models/response/provider/providerUserBulkPublicKeyResponse.ts
@@ -1,5 +1,3 @@
-import { OrganizationUserBulkPublicKeyResponse } from '../organizationUserBulkPublicKeyResponse';
+import { OrganizationUserBulkPublicKeyResponse } from "../organizationUserBulkPublicKeyResponse";
 
-export class ProviderUserBulkPublicKeyResponse extends OrganizationUserBulkPublicKeyResponse {
-
-}
+export class ProviderUserBulkPublicKeyResponse extends OrganizationUserBulkPublicKeyResponse {}
diff --git a/jslib/common/src/models/response/provider/providerUserBulkResponse.ts b/jslib/common/src/models/response/provider/providerUserBulkResponse.ts
index 019ee4f5..6cf12f96 100644
--- a/jslib/common/src/models/response/provider/providerUserBulkResponse.ts
+++ b/jslib/common/src/models/response/provider/providerUserBulkResponse.ts
@@ -1,12 +1,12 @@
-import { BaseResponse } from '../baseResponse';
+import { BaseResponse } from "../baseResponse";
 
 export class ProviderUserBulkResponse extends BaseResponse {
-    id: string;
-    error: string;
+  id: string;
+  error: string;
 
-    constructor(response: any) {
-        super(response);
-        this.id = this.getResponseProperty('Id');
-        this.error = this.getResponseProperty('Error');
-    }
+  constructor(response: any) {
+    super(response);
+    this.id = this.getResponseProperty("Id");
+    this.error = this.getResponseProperty("Error");
+  }
 }
diff --git a/jslib/common/src/models/response/provider/providerUserResponse.ts b/jslib/common/src/models/response/provider/providerUserResponse.ts
index 728b708f..4aad5814 100644
--- a/jslib/common/src/models/response/provider/providerUserResponse.ts
+++ b/jslib/common/src/models/response/provider/providerUserResponse.ts
@@ -1,34 +1,34 @@
-import { BaseResponse } from '../baseResponse';
+import { BaseResponse } from "../baseResponse";
 
-import { PermissionsApi } from '../../api/permissionsApi';
+import { PermissionsApi } from "../../api/permissionsApi";
 
-import { ProviderUserStatusType } from '../../../enums/providerUserStatusType';
-import { ProviderUserType } from '../../../enums/providerUserType';
+import { ProviderUserStatusType } from "../../../enums/providerUserStatusType";
+import { ProviderUserType } from "../../../enums/providerUserType";
 
 export class ProviderUserResponse extends BaseResponse {
-    id: string;
-    userId: string;
-    type: ProviderUserType;
-    status: ProviderUserStatusType;
-    permissions: PermissionsApi;
+  id: string;
+  userId: string;
+  type: ProviderUserType;
+  status: ProviderUserStatusType;
+  permissions: PermissionsApi;
 
-    constructor(response: any) {
-        super(response);
-        this.id = this.getResponseProperty('Id');
-        this.userId = this.getResponseProperty('UserId');
-        this.type = this.getResponseProperty('Type');
-        this.status = this.getResponseProperty('Status');
-        this.permissions = new PermissionsApi(this.getResponseProperty('Permissions'));
-    }
+  constructor(response: any) {
+    super(response);
+    this.id = this.getResponseProperty("Id");
+    this.userId = this.getResponseProperty("UserId");
+    this.type = this.getResponseProperty("Type");
+    this.status = this.getResponseProperty("Status");
+    this.permissions = new PermissionsApi(this.getResponseProperty("Permissions"));
+  }
 }
 
 export class ProviderUserUserDetailsResponse extends ProviderUserResponse {
-    name: string;
-    email: string;
+  name: string;
+  email: string;
 
-    constructor(response: any) {
-        super(response);
-        this.name = this.getResponseProperty('Name');
-        this.email = this.getResponseProperty('Email');
-    }
+  constructor(response: any) {
+    super(response);
+    this.name = this.getResponseProperty("Name");
+    this.email = this.getResponseProperty("Email");
+  }
 }
diff --git a/jslib/common/src/models/response/selectionReadOnlyResponse.ts b/jslib/common/src/models/response/selectionReadOnlyResponse.ts
index ebcf5247..cee9361c 100644
--- a/jslib/common/src/models/response/selectionReadOnlyResponse.ts
+++ b/jslib/common/src/models/response/selectionReadOnlyResponse.ts
@@ -1,14 +1,14 @@
-import { BaseResponse } from './baseResponse';
+import { BaseResponse } from "./baseResponse";
 
 export class SelectionReadOnlyResponse extends BaseResponse {
-    id: string;
-    readOnly: boolean;
-    hidePasswords: boolean;
+  id: string;
+  readOnly: boolean;
+  hidePasswords: boolean;
 
-    constructor(response: any) {
-        super(response);
-        this.id = this.getResponseProperty('Id');
-        this.readOnly = this.getResponseProperty('ReadOnly');
-        this.hidePasswords = this.getResponseProperty('HidePasswords');
-    }
+  constructor(response: any) {
+    super(response);
+    this.id = this.getResponseProperty("Id");
+    this.readOnly = this.getResponseProperty("ReadOnly");
+    this.hidePasswords = this.getResponseProperty("HidePasswords");
+  }
 }
diff --git a/jslib/common/src/models/response/sendAccessResponse.ts b/jslib/common/src/models/response/sendAccessResponse.ts
index ef4a57aa..2742c7f9 100644
--- a/jslib/common/src/models/response/sendAccessResponse.ts
+++ b/jslib/common/src/models/response/sendAccessResponse.ts
@@ -1,36 +1,36 @@
-import { BaseResponse } from './baseResponse';
+import { BaseResponse } from "./baseResponse";
 
-import { SendType } from '../../enums/sendType';
+import { SendType } from "../../enums/sendType";
 
-import { SendFileApi } from '../api/sendFileApi';
-import { SendTextApi } from '../api/sendTextApi';
+import { SendFileApi } from "../api/sendFileApi";
+import { SendTextApi } from "../api/sendTextApi";
 
 export class SendAccessResponse extends BaseResponse {
-    id: string;
-    type: SendType;
-    name: string;
-    file: SendFileApi;
-    text: SendTextApi;
-    expirationDate: Date;
-    creatorIdentifier: string;
+  id: string;
+  type: SendType;
+  name: string;
+  file: SendFileApi;
+  text: SendTextApi;
+  expirationDate: Date;
+  creatorIdentifier: string;
 
-    constructor(response: any) {
-        super(response);
-        this.id = this.getResponseProperty('Id');
-        this.type = this.getResponseProperty('Type');
-        this.name = this.getResponseProperty('Name');
+  constructor(response: any) {
+    super(response);
+    this.id = this.getResponseProperty("Id");
+    this.type = this.getResponseProperty("Type");
+    this.name = this.getResponseProperty("Name");
 
-        const text = this.getResponseProperty('Text');
-        if (text != null) {
-            this.text = new SendTextApi(text);
-        }
-
-        const file = this.getResponseProperty('File');
-        if (file != null) {
-            this.file = new SendFileApi(file);
-        }
+    const text = this.getResponseProperty("Text");
+    if (text != null) {
+      this.text = new SendTextApi(text);
+    }
 
-        this.expirationDate = this.getResponseProperty('ExpirationDate');
-        this.creatorIdentifier = this.getResponseProperty('CreatorIdentifier');
+    const file = this.getResponseProperty("File");
+    if (file != null) {
+      this.file = new SendFileApi(file);
     }
+
+    this.expirationDate = this.getResponseProperty("ExpirationDate");
+    this.creatorIdentifier = this.getResponseProperty("CreatorIdentifier");
+  }
 }
diff --git a/jslib/common/src/models/response/sendFileDownloadDataResponse.ts b/jslib/common/src/models/response/sendFileDownloadDataResponse.ts
index 734ef224..ca2575a2 100644
--- a/jslib/common/src/models/response/sendFileDownloadDataResponse.ts
+++ b/jslib/common/src/models/response/sendFileDownloadDataResponse.ts
@@ -1,12 +1,11 @@
-import { BaseResponse } from './baseResponse';
+import { BaseResponse } from "./baseResponse";
 
 export class SendFileDownloadDataResponse extends BaseResponse {
-
-    id: string = null;
-    url: string = null;
-    constructor(response: any) {
-        super(response);
-        this.id = this.getResponseProperty('Id');
-        this.url = this.getResponseProperty('Url');
-    }
+  id: string = null;
+  url: string = null;
+  constructor(response: any) {
+    super(response);
+    this.id = this.getResponseProperty("Id");
+    this.url = this.getResponseProperty("Url");
+  }
 }
diff --git a/jslib/common/src/models/response/sendFileUploadDataResponse.ts b/jslib/common/src/models/response/sendFileUploadDataResponse.ts
index 3f7f0b3d..b787f2cc 100644
--- a/jslib/common/src/models/response/sendFileUploadDataResponse.ts
+++ b/jslib/common/src/models/response/sendFileUploadDataResponse.ts
@@ -1,18 +1,17 @@
-import { FileUploadType } from '../../enums/fileUploadType';
+import { FileUploadType } from "../../enums/fileUploadType";
 
-import { BaseResponse } from './baseResponse';
-import { SendResponse } from './sendResponse';
+import { BaseResponse } from "./baseResponse";
+import { SendResponse } from "./sendResponse";
 
 export class SendFileUploadDataResponse extends BaseResponse {
-
-    fileUploadType: FileUploadType;
-    sendResponse: SendResponse;
-    url: string = null;
-    constructor(response: any) {
-        super(response);
-        this.fileUploadType = this.getResponseProperty('FileUploadType');
-        const sendResponse = this.getResponseProperty('SendResponse');
-        this.sendResponse = sendResponse == null ? null : new SendResponse(sendResponse);
-        this.url = this.getResponseProperty('Url');
-    }
+  fileUploadType: FileUploadType;
+  sendResponse: SendResponse;
+  url: string = null;
+  constructor(response: any) {
+    super(response);
+    this.fileUploadType = this.getResponseProperty("FileUploadType");
+    const sendResponse = this.getResponseProperty("SendResponse");
+    this.sendResponse = sendResponse == null ? null : new SendResponse(sendResponse);
+    this.url = this.getResponseProperty("Url");
+  }
 }
diff --git a/jslib/common/src/models/response/sendResponse.ts b/jslib/common/src/models/response/sendResponse.ts
index fdbbf334..edb009c3 100644
--- a/jslib/common/src/models/response/sendResponse.ts
+++ b/jslib/common/src/models/response/sendResponse.ts
@@ -1,53 +1,53 @@
-import { BaseResponse } from './baseResponse';
+import { BaseResponse } from "./baseResponse";
 
-import { SendType } from '../../enums/sendType';
+import { SendType } from "../../enums/sendType";
 
-import { SendFileApi } from '../api/sendFileApi';
-import { SendTextApi } from '../api/sendTextApi';
+import { SendFileApi } from "../api/sendFileApi";
+import { SendTextApi } from "../api/sendTextApi";
 
 export class SendResponse extends BaseResponse {
-    id: string;
-    accessId: string;
-    type: SendType;
-    name: string;
-    notes: string;
-    file: SendFileApi;
-    text: SendTextApi;
-    key: string;
-    maxAccessCount?: number;
-    accessCount: number;
-    revisionDate: string;
-    expirationDate: string;
-    deletionDate: string;
-    password: string;
-    disable: boolean;
-    hideEmail: boolean;
+  id: string;
+  accessId: string;
+  type: SendType;
+  name: string;
+  notes: string;
+  file: SendFileApi;
+  text: SendTextApi;
+  key: string;
+  maxAccessCount?: number;
+  accessCount: number;
+  revisionDate: string;
+  expirationDate: string;
+  deletionDate: string;
+  password: string;
+  disable: boolean;
+  hideEmail: boolean;
 
-    constructor(response: any) {
-        super(response);
-        this.id = this.getResponseProperty('Id');
-        this.accessId = this.getResponseProperty('AccessId');
-        this.type = this.getResponseProperty('Type');
-        this.name = this.getResponseProperty('Name');
-        this.notes = this.getResponseProperty('Notes');
-        this.key = this.getResponseProperty('Key');
-        this.maxAccessCount = this.getResponseProperty('MaxAccessCount');
-        this.accessCount = this.getResponseProperty('AccessCount');
-        this.revisionDate = this.getResponseProperty('RevisionDate');
-        this.expirationDate = this.getResponseProperty('ExpirationDate');
-        this.deletionDate = this.getResponseProperty('DeletionDate');
-        this.password = this.getResponseProperty('Password');
-        this.disable = this.getResponseProperty('Disabled') || false;
-        this.hideEmail = this.getResponseProperty('HideEmail') || false;
+  constructor(response: any) {
+    super(response);
+    this.id = this.getResponseProperty("Id");
+    this.accessId = this.getResponseProperty("AccessId");
+    this.type = this.getResponseProperty("Type");
+    this.name = this.getResponseProperty("Name");
+    this.notes = this.getResponseProperty("Notes");
+    this.key = this.getResponseProperty("Key");
+    this.maxAccessCount = this.getResponseProperty("MaxAccessCount");
+    this.accessCount = this.getResponseProperty("AccessCount");
+    this.revisionDate = this.getResponseProperty("RevisionDate");
+    this.expirationDate = this.getResponseProperty("ExpirationDate");
+    this.deletionDate = this.getResponseProperty("DeletionDate");
+    this.password = this.getResponseProperty("Password");
+    this.disable = this.getResponseProperty("Disabled") || false;
+    this.hideEmail = this.getResponseProperty("HideEmail") || false;
 
-        const text = this.getResponseProperty('Text');
-        if (text != null) {
-            this.text = new SendTextApi(text);
-        }
+    const text = this.getResponseProperty("Text");
+    if (text != null) {
+      this.text = new SendTextApi(text);
+    }
 
-        const file = this.getResponseProperty('File');
-        if (file != null) {
-            this.file = new SendFileApi(file);
-        }
+    const file = this.getResponseProperty("File");
+    if (file != null) {
+      this.file = new SendFileApi(file);
     }
+  }
 }
diff --git a/jslib/common/src/models/response/subscriptionResponse.ts b/jslib/common/src/models/response/subscriptionResponse.ts
index 616d5a8b..fc5570c3 100644
--- a/jslib/common/src/models/response/subscriptionResponse.ts
+++ b/jslib/common/src/models/response/subscriptionResponse.ts
@@ -1,83 +1,85 @@
-import { BaseResponse } from './baseResponse';
+import { BaseResponse } from "./baseResponse";
 
 export class SubscriptionResponse extends BaseResponse {
-    storageName: string;
-    storageGb: number;
-    maxStorageGb: number;
-    subscription: BillingSubscriptionResponse;
-    upcomingInvoice: BillingSubscriptionUpcomingInvoiceResponse;
-    license: any;
-    expiration: string;
-    usingInAppPurchase: boolean;
+  storageName: string;
+  storageGb: number;
+  maxStorageGb: number;
+  subscription: BillingSubscriptionResponse;
+  upcomingInvoice: BillingSubscriptionUpcomingInvoiceResponse;
+  license: any;
+  expiration: string;
+  usingInAppPurchase: boolean;
 
-    constructor(response: any) {
-        super(response);
-        this.storageName = this.getResponseProperty('StorageName');
-        this.storageGb = this.getResponseProperty('StorageGb');
-        this.maxStorageGb = this.getResponseProperty('MaxStorageGb');
-        this.license = this.getResponseProperty('License');
-        this.expiration = this.getResponseProperty('Expiration');
-        this.usingInAppPurchase = this.getResponseProperty('UsingInAppPurchase');
-        const subscription = this.getResponseProperty('Subscription');
-        const upcomingInvoice = this.getResponseProperty('UpcomingInvoice');
-        this.subscription = subscription == null ? null : new BillingSubscriptionResponse(subscription);
-        this.upcomingInvoice = upcomingInvoice == null ? null :
-            new BillingSubscriptionUpcomingInvoiceResponse(upcomingInvoice);
-    }
+  constructor(response: any) {
+    super(response);
+    this.storageName = this.getResponseProperty("StorageName");
+    this.storageGb = this.getResponseProperty("StorageGb");
+    this.maxStorageGb = this.getResponseProperty("MaxStorageGb");
+    this.license = this.getResponseProperty("License");
+    this.expiration = this.getResponseProperty("Expiration");
+    this.usingInAppPurchase = this.getResponseProperty("UsingInAppPurchase");
+    const subscription = this.getResponseProperty("Subscription");
+    const upcomingInvoice = this.getResponseProperty("UpcomingInvoice");
+    this.subscription = subscription == null ? null : new BillingSubscriptionResponse(subscription);
+    this.upcomingInvoice =
+      upcomingInvoice == null
+        ? null
+        : new BillingSubscriptionUpcomingInvoiceResponse(upcomingInvoice);
+  }
 }
 
 export class BillingSubscriptionResponse extends BaseResponse {
-    trialStartDate: string;
-    trialEndDate: string;
-    periodStartDate: string;
-    periodEndDate: string;
-    cancelledDate: string;
-    cancelAtEndDate: boolean;
-    status: string;
-    cancelled: boolean;
-    items: BillingSubscriptionItemResponse[] = [];
+  trialStartDate: string;
+  trialEndDate: string;
+  periodStartDate: string;
+  periodEndDate: string;
+  cancelledDate: string;
+  cancelAtEndDate: boolean;
+  status: string;
+  cancelled: boolean;
+  items: BillingSubscriptionItemResponse[] = [];
 
-    constructor(response: any) {
-        super(response);
-        this.trialEndDate = this.getResponseProperty('TrialStartDate');
-        this.trialEndDate = this.getResponseProperty('TrialEndDate');
-        this.periodStartDate = this.getResponseProperty('PeriodStartDate');
-        this.periodEndDate = this.getResponseProperty('PeriodEndDate');
-        this.cancelledDate = this.getResponseProperty('CancelledDate');
-        this.cancelAtEndDate = this.getResponseProperty('CancelAtEndDate');
-        this.status = this.getResponseProperty('Status');
-        this.cancelled = this.getResponseProperty('Cancelled');
-        const items = this.getResponseProperty('Items');
-        if (items != null) {
-            this.items = items.map((i: any) => new BillingSubscriptionItemResponse(i));
-        }
+  constructor(response: any) {
+    super(response);
+    this.trialEndDate = this.getResponseProperty("TrialStartDate");
+    this.trialEndDate = this.getResponseProperty("TrialEndDate");
+    this.periodStartDate = this.getResponseProperty("PeriodStartDate");
+    this.periodEndDate = this.getResponseProperty("PeriodEndDate");
+    this.cancelledDate = this.getResponseProperty("CancelledDate");
+    this.cancelAtEndDate = this.getResponseProperty("CancelAtEndDate");
+    this.status = this.getResponseProperty("Status");
+    this.cancelled = this.getResponseProperty("Cancelled");
+    const items = this.getResponseProperty("Items");
+    if (items != null) {
+      this.items = items.map((i: any) => new BillingSubscriptionItemResponse(i));
     }
+  }
 }
 
 export class BillingSubscriptionItemResponse extends BaseResponse {
-    name: string;
-    amount: number;
-    quantity: number;
-    interval: string;
-    sponsoredSubscriptionItem: boolean;
+  name: string;
+  amount: number;
+  quantity: number;
+  interval: string;
+  sponsoredSubscriptionItem: boolean;
 
-    constructor(response: any) {
-        super(response);
-        this.name = this.getResponseProperty('Name');
-        this.amount = this.getResponseProperty('Amount');
-        this.quantity = this.getResponseProperty('Quantity');
-        this.interval = this.getResponseProperty('Interval');
-        this.sponsoredSubscriptionItem = this.getResponseProperty('SponsoredSubscriptionItem');
-    }
+  constructor(response: any) {
+    super(response);
+    this.name = this.getResponseProperty("Name");
+    this.amount = this.getResponseProperty("Amount");
+    this.quantity = this.getResponseProperty("Quantity");
+    this.interval = this.getResponseProperty("Interval");
+    this.sponsoredSubscriptionItem = this.getResponseProperty("SponsoredSubscriptionItem");
+  }
 }
 
 export class BillingSubscriptionUpcomingInvoiceResponse extends BaseResponse {
-    date: string;
-    amount: number;
+  date: string;
+  amount: number;
 
-    constructor(response: any) {
-        super(response);
-        this.date = this.getResponseProperty('Date');
-        this.amount = this.getResponseProperty('Amount');
-    }
+  constructor(response: any) {
+    super(response);
+    this.date = this.getResponseProperty("Date");
+    this.amount = this.getResponseProperty("Amount");
+  }
 }
diff --git a/jslib/common/src/models/response/syncResponse.ts b/jslib/common/src/models/response/syncResponse.ts
index 1fb655a3..cab3ff2e 100644
--- a/jslib/common/src/models/response/syncResponse.ts
+++ b/jslib/common/src/models/response/syncResponse.ts
@@ -1,57 +1,57 @@
-import { BaseResponse } from './baseResponse';
-import { CipherResponse } from './cipherResponse';
-import { CollectionDetailsResponse } from './collectionResponse';
-import { DomainsResponse } from './domainsResponse';
-import { FolderResponse } from './folderResponse';
-import { PolicyResponse } from './policyResponse';
-import { ProfileResponse } from './profileResponse';
-import { SendResponse } from './sendResponse';
+import { BaseResponse } from "./baseResponse";
+import { CipherResponse } from "./cipherResponse";
+import { CollectionDetailsResponse } from "./collectionResponse";
+import { DomainsResponse } from "./domainsResponse";
+import { FolderResponse } from "./folderResponse";
+import { PolicyResponse } from "./policyResponse";
+import { ProfileResponse } from "./profileResponse";
+import { SendResponse } from "./sendResponse";
 
 export class SyncResponse extends BaseResponse {
-    profile?: ProfileResponse;
-    folders: FolderResponse[] = [];
-    collections: CollectionDetailsResponse[] = [];
-    ciphers: CipherResponse[] = [];
-    domains?: DomainsResponse;
-    policies?: PolicyResponse[] = [];
-    sends: SendResponse[] = [];
-
-    constructor(response: any) {
-        super(response);
-
-        const profile = this.getResponseProperty('Profile');
-        if (profile != null) {
-            this.profile = new ProfileResponse(profile);
-        }
-
-        const folders = this.getResponseProperty('Folders');
-        if (folders != null) {
-            this.folders = folders.map((f: any) => new FolderResponse(f));
-        }
-
-        const collections = this.getResponseProperty('Collections');
-        if (collections != null) {
-            this.collections = collections.map((c: any) => new CollectionDetailsResponse(c));
-        }
-
-        const ciphers = this.getResponseProperty('Ciphers');
-        if (ciphers != null) {
-            this.ciphers = ciphers.map((c: any) => new CipherResponse(c));
-        }
-
-        const domains = this.getResponseProperty('Domains');
-        if (domains != null) {
-            this.domains = new DomainsResponse(domains);
-        }
-
-        const policies = this.getResponseProperty('Policies');
-        if (policies != null) {
-            this.policies = policies.map((p: any) => new PolicyResponse(p));
-        }
-
-        const sends = this.getResponseProperty('Sends');
-        if (sends != null) {
-            this.sends = sends.map((s: any) => new SendResponse(s));
-        }
+  profile?: ProfileResponse;
+  folders: FolderResponse[] = [];
+  collections: CollectionDetailsResponse[] = [];
+  ciphers: CipherResponse[] = [];
+  domains?: DomainsResponse;
+  policies?: PolicyResponse[] = [];
+  sends: SendResponse[] = [];
+
+  constructor(response: any) {
+    super(response);
+
+    const profile = this.getResponseProperty("Profile");
+    if (profile != null) {
+      this.profile = new ProfileResponse(profile);
     }
+
+    const folders = this.getResponseProperty("Folders");
+    if (folders != null) {
+      this.folders = folders.map((f: any) => new FolderResponse(f));
+    }
+
+    const collections = this.getResponseProperty("Collections");
+    if (collections != null) {
+      this.collections = collections.map((c: any) => new CollectionDetailsResponse(c));
+    }
+
+    const ciphers = this.getResponseProperty("Ciphers");
+    if (ciphers != null) {
+      this.ciphers = ciphers.map((c: any) => new CipherResponse(c));
+    }
+
+    const domains = this.getResponseProperty("Domains");
+    if (domains != null) {
+      this.domains = new DomainsResponse(domains);
+    }
+
+    const policies = this.getResponseProperty("Policies");
+    if (policies != null) {
+      this.policies = policies.map((p: any) => new PolicyResponse(p));
+    }
+
+    const sends = this.getResponseProperty("Sends");
+    if (sends != null) {
+      this.sends = sends.map((s: any) => new SendResponse(s));
+    }
+  }
 }
diff --git a/jslib/common/src/models/response/taxInfoResponse.ts b/jslib/common/src/models/response/taxInfoResponse.ts
index 9759bbe3..bb4693ca 100644
--- a/jslib/common/src/models/response/taxInfoResponse.ts
+++ b/jslib/common/src/models/response/taxInfoResponse.ts
@@ -1,24 +1,24 @@
-import { BaseResponse } from './baseResponse';
+import { BaseResponse } from "./baseResponse";
 
 export class TaxInfoResponse extends BaseResponse {
-    taxId: string;
-    taxIdType: string;
-    line1: string;
-    line2: string;
-    city: string;
-    state: string;
-    country: string;
-    postalCode: string;
+  taxId: string;
+  taxIdType: string;
+  line1: string;
+  line2: string;
+  city: string;
+  state: string;
+  country: string;
+  postalCode: string;
 
-    constructor(response: any) {
-        super(response);
-        this.taxId = this.getResponseProperty('TaxIdNumber');
-        this.taxIdType = this.getResponseProperty('TaxIdType');
-        this.line1 = this.getResponseProperty('Line1');
-        this.line2 = this.getResponseProperty('Line2');
-        this.city = this.getResponseProperty('City');
-        this.state = this.getResponseProperty('State');
-        this.postalCode = this.getResponseProperty('PostalCode');
-        this.country = this.getResponseProperty('Country');
-    }
+  constructor(response: any) {
+    super(response);
+    this.taxId = this.getResponseProperty("TaxIdNumber");
+    this.taxIdType = this.getResponseProperty("TaxIdType");
+    this.line1 = this.getResponseProperty("Line1");
+    this.line2 = this.getResponseProperty("Line2");
+    this.city = this.getResponseProperty("City");
+    this.state = this.getResponseProperty("State");
+    this.postalCode = this.getResponseProperty("PostalCode");
+    this.country = this.getResponseProperty("Country");
+  }
 }
diff --git a/jslib/common/src/models/response/taxRateResponse.ts b/jslib/common/src/models/response/taxRateResponse.ts
index 83970afa..28274a50 100644
--- a/jslib/common/src/models/response/taxRateResponse.ts
+++ b/jslib/common/src/models/response/taxRateResponse.ts
@@ -1,18 +1,18 @@
-import { BaseResponse } from './baseResponse';
+import { BaseResponse } from "./baseResponse";
 
 export class TaxRateResponse extends BaseResponse {
-    id: string;
-    country: string;
-    state: string;
-    postalCode: string;
-    rate: number;
+  id: string;
+  country: string;
+  state: string;
+  postalCode: string;
+  rate: number;
 
-    constructor(response: any) {
-        super(response);
-        this.id = this.getResponseProperty('Id');
-        this.country = this.getResponseProperty('Country');
-        this.state = this.getResponseProperty('State');
-        this.postalCode = this.getResponseProperty('PostalCode');
-        this.rate = this.getResponseProperty('Rate');
-    }
+  constructor(response: any) {
+    super(response);
+    this.id = this.getResponseProperty("Id");
+    this.country = this.getResponseProperty("Country");
+    this.state = this.getResponseProperty("State");
+    this.postalCode = this.getResponseProperty("PostalCode");
+    this.rate = this.getResponseProperty("Rate");
+  }
 }
diff --git a/jslib/common/src/models/response/twoFactorAuthenticatorResponse.ts b/jslib/common/src/models/response/twoFactorAuthenticatorResponse.ts
index b08ecb19..8eb73eaa 100644
--- a/jslib/common/src/models/response/twoFactorAuthenticatorResponse.ts
+++ b/jslib/common/src/models/response/twoFactorAuthenticatorResponse.ts
@@ -1,12 +1,12 @@
-import { BaseResponse } from './baseResponse';
+import { BaseResponse } from "./baseResponse";
 
 export class TwoFactorAuthenticatorResponse extends BaseResponse {
-    enabled: boolean;
-    key: string;
+  enabled: boolean;
+  key: string;
 
-    constructor(response: any) {
-        super(response);
-        this.enabled = this.getResponseProperty('Enabled');
-        this.key = this.getResponseProperty('Key');
-    }
+  constructor(response: any) {
+    super(response);
+    this.enabled = this.getResponseProperty("Enabled");
+    this.key = this.getResponseProperty("Key");
+  }
 }
diff --git a/jslib/common/src/models/response/twoFactorDuoResponse.ts b/jslib/common/src/models/response/twoFactorDuoResponse.ts
index 087fce48..401de796 100644
--- a/jslib/common/src/models/response/twoFactorDuoResponse.ts
+++ b/jslib/common/src/models/response/twoFactorDuoResponse.ts
@@ -1,16 +1,16 @@
-import { BaseResponse } from './baseResponse';
+import { BaseResponse } from "./baseResponse";
 
 export class TwoFactorDuoResponse extends BaseResponse {
-    enabled: boolean;
-    host: string;
-    secretKey: string;
-    integrationKey: string;
+  enabled: boolean;
+  host: string;
+  secretKey: string;
+  integrationKey: string;
 
-    constructor(response: any) {
-        super(response);
-        this.enabled = this.getResponseProperty('Enabled');
-        this.host = this.getResponseProperty('Host');
-        this.secretKey = this.getResponseProperty('SecretKey');
-        this.integrationKey = this.getResponseProperty('IntegrationKey');
-    }
+  constructor(response: any) {
+    super(response);
+    this.enabled = this.getResponseProperty("Enabled");
+    this.host = this.getResponseProperty("Host");
+    this.secretKey = this.getResponseProperty("SecretKey");
+    this.integrationKey = this.getResponseProperty("IntegrationKey");
+  }
 }
diff --git a/jslib/common/src/models/response/twoFactorEmailResponse.ts b/jslib/common/src/models/response/twoFactorEmailResponse.ts
index 54f4a551..ad1936d3 100644
--- a/jslib/common/src/models/response/twoFactorEmailResponse.ts
+++ b/jslib/common/src/models/response/twoFactorEmailResponse.ts
@@ -1,12 +1,12 @@
-import { BaseResponse } from './baseResponse';
+import { BaseResponse } from "./baseResponse";
 
 export class TwoFactorEmailResponse extends BaseResponse {
-    enabled: boolean;
-    email: string;
+  enabled: boolean;
+  email: string;
 
-    constructor(response: any) {
-        super(response);
-        this.enabled = this.getResponseProperty('Enabled');
-        this.email = this.getResponseProperty('Email');
-    }
+  constructor(response: any) {
+    super(response);
+    this.enabled = this.getResponseProperty("Enabled");
+    this.email = this.getResponseProperty("Email");
+  }
 }
diff --git a/jslib/common/src/models/response/twoFactorProviderResponse.ts b/jslib/common/src/models/response/twoFactorProviderResponse.ts
index 570b1d6e..6f149136 100644
--- a/jslib/common/src/models/response/twoFactorProviderResponse.ts
+++ b/jslib/common/src/models/response/twoFactorProviderResponse.ts
@@ -1,14 +1,14 @@
-import { BaseResponse } from './baseResponse';
+import { BaseResponse } from "./baseResponse";
 
-import { TwoFactorProviderType } from '../../enums/twoFactorProviderType';
+import { TwoFactorProviderType } from "../../enums/twoFactorProviderType";
 
 export class TwoFactorProviderResponse extends BaseResponse {
-    enabled: boolean;
-    type: TwoFactorProviderType;
+  enabled: boolean;
+  type: TwoFactorProviderType;
 
-    constructor(response: any) {
-        super(response);
-        this.enabled = this.getResponseProperty('Enabled');
-        this.type = this.getResponseProperty('Type');
-    }
+  constructor(response: any) {
+    super(response);
+    this.enabled = this.getResponseProperty("Enabled");
+    this.type = this.getResponseProperty("Type");
+  }
 }
diff --git a/jslib/common/src/models/response/twoFactorRescoverResponse.ts b/jslib/common/src/models/response/twoFactorRescoverResponse.ts
index 62bfdfe6..0e26db9b 100644
--- a/jslib/common/src/models/response/twoFactorRescoverResponse.ts
+++ b/jslib/common/src/models/response/twoFactorRescoverResponse.ts
@@ -1,10 +1,10 @@
-import { BaseResponse } from './baseResponse';
+import { BaseResponse } from "./baseResponse";
 
 export class TwoFactorRecoverResponse extends BaseResponse {
-    code: string;
+  code: string;
 
-    constructor(response: any) {
-        super(response);
-        this.code = this.getResponseProperty('Code');
-    }
+  constructor(response: any) {
+    super(response);
+    this.code = this.getResponseProperty("Code");
+  }
 }
diff --git a/jslib/common/src/models/response/twoFactorWebAuthnResponse.ts b/jslib/common/src/models/response/twoFactorWebAuthnResponse.ts
index 499bdca5..9c855b76 100644
--- a/jslib/common/src/models/response/twoFactorWebAuthnResponse.ts
+++ b/jslib/common/src/models/response/twoFactorWebAuthnResponse.ts
@@ -1,59 +1,59 @@
-import { Utils } from '../../misc/utils';
-import { BaseResponse } from './baseResponse';
+import { Utils } from "../../misc/utils";
+import { BaseResponse } from "./baseResponse";
 
 export class TwoFactorWebAuthnResponse extends BaseResponse {
-    enabled: boolean;
-    keys: KeyResponse[];
-
-    constructor(response: any) {
-        super(response);
-        this.enabled = this.getResponseProperty('Enabled');
-        const keys = this.getResponseProperty('Keys');
-        this.keys = keys == null ? null : keys.map((k: any) => new KeyResponse(k));
-    }
+  enabled: boolean;
+  keys: KeyResponse[];
+
+  constructor(response: any) {
+    super(response);
+    this.enabled = this.getResponseProperty("Enabled");
+    const keys = this.getResponseProperty("Keys");
+    this.keys = keys == null ? null : keys.map((k: any) => new KeyResponse(k));
+  }
 }
 
 export class KeyResponse extends BaseResponse {
-    name: string;
-    id: number;
-    migrated: boolean;
-
-    constructor(response: any) {
-        super(response);
-        this.name = this.getResponseProperty('Name');
-        this.id = this.getResponseProperty('Id');
-        this.migrated = this.getResponseProperty('Migrated');
-    }
+  name: string;
+  id: number;
+  migrated: boolean;
+
+  constructor(response: any) {
+    super(response);
+    this.name = this.getResponseProperty("Name");
+    this.id = this.getResponseProperty("Id");
+    this.migrated = this.getResponseProperty("Migrated");
+  }
 }
 
 export class ChallengeResponse extends BaseResponse implements PublicKeyCredentialCreationOptions {
-    attestation?: AttestationConveyancePreference;
-    authenticatorSelection?: AuthenticatorSelectionCriteria;
-    challenge: BufferSource;
-    excludeCredentials?: PublicKeyCredentialDescriptor[];
-    extensions?: AuthenticationExtensionsClientInputs;
-    pubKeyCredParams: PublicKeyCredentialParameters[];
-    rp: PublicKeyCredentialRpEntity;
-    timeout?: number;
-    user: PublicKeyCredentialUserEntity;
-
-    constructor(response: any) {
-        super(response);
-        this.attestation = this.getResponseProperty('attestation');
-        this.authenticatorSelection = this.getResponseProperty('authenticatorSelection');
-        this.challenge = Utils.fromUrlB64ToArray(this.getResponseProperty('challenge'));
-        this.excludeCredentials = this.getResponseProperty('excludeCredentials').map((c: any) => {
-            c.id = Utils.fromUrlB64ToArray(c.id).buffer;
-            return c;
-        });
-        this.extensions = this.getResponseProperty('extensions');
-        this.pubKeyCredParams = this.getResponseProperty('pubKeyCredParams');
-        this.rp = this.getResponseProperty('rp');
-        this.timeout = this.getResponseProperty('timeout');
-
-        const user = this.getResponseProperty('user');
-        user.id = Utils.fromUrlB64ToArray(user.id);
-
-        this.user = user;
-    }
+  attestation?: AttestationConveyancePreference;
+  authenticatorSelection?: AuthenticatorSelectionCriteria;
+  challenge: BufferSource;
+  excludeCredentials?: PublicKeyCredentialDescriptor[];
+  extensions?: AuthenticationExtensionsClientInputs;
+  pubKeyCredParams: PublicKeyCredentialParameters[];
+  rp: PublicKeyCredentialRpEntity;
+  timeout?: number;
+  user: PublicKeyCredentialUserEntity;
+
+  constructor(response: any) {
+    super(response);
+    this.attestation = this.getResponseProperty("attestation");
+    this.authenticatorSelection = this.getResponseProperty("authenticatorSelection");
+    this.challenge = Utils.fromUrlB64ToArray(this.getResponseProperty("challenge"));
+    this.excludeCredentials = this.getResponseProperty("excludeCredentials").map((c: any) => {
+      c.id = Utils.fromUrlB64ToArray(c.id).buffer;
+      return c;
+    });
+    this.extensions = this.getResponseProperty("extensions");
+    this.pubKeyCredParams = this.getResponseProperty("pubKeyCredParams");
+    this.rp = this.getResponseProperty("rp");
+    this.timeout = this.getResponseProperty("timeout");
+
+    const user = this.getResponseProperty("user");
+    user.id = Utils.fromUrlB64ToArray(user.id);
+
+    this.user = user;
+  }
 }
diff --git a/jslib/common/src/models/response/twoFactorYubiKeyResponse.ts b/jslib/common/src/models/response/twoFactorYubiKeyResponse.ts
index 92d8cffb..ee75074b 100644
--- a/jslib/common/src/models/response/twoFactorYubiKeyResponse.ts
+++ b/jslib/common/src/models/response/twoFactorYubiKeyResponse.ts
@@ -1,22 +1,22 @@
-import { BaseResponse } from './baseResponse';
+import { BaseResponse } from "./baseResponse";
 
 export class TwoFactorYubiKeyResponse extends BaseResponse {
-    enabled: boolean;
-    key1: string;
-    key2: string;
-    key3: string;
-    key4: string;
-    key5: string;
-    nfc: boolean;
+  enabled: boolean;
+  key1: string;
+  key2: string;
+  key3: string;
+  key4: string;
+  key5: string;
+  nfc: boolean;
 
-    constructor(response: any) {
-        super(response);
-        this.enabled = this.getResponseProperty('Enabled');
-        this.key1 = this.getResponseProperty('Key1');
-        this.key2 = this.getResponseProperty('Key2');
-        this.key3 = this.getResponseProperty('Key3');
-        this.key4 = this.getResponseProperty('Key4');
-        this.key5 = this.getResponseProperty('Key5');
-        this.nfc = this.getResponseProperty('Nfc');
-    }
+  constructor(response: any) {
+    super(response);
+    this.enabled = this.getResponseProperty("Enabled");
+    this.key1 = this.getResponseProperty("Key1");
+    this.key2 = this.getResponseProperty("Key2");
+    this.key3 = this.getResponseProperty("Key3");
+    this.key4 = this.getResponseProperty("Key4");
+    this.key5 = this.getResponseProperty("Key5");
+    this.nfc = this.getResponseProperty("Nfc");
+  }
 }
diff --git a/jslib/common/src/models/response/userKeyResponse.ts b/jslib/common/src/models/response/userKeyResponse.ts
index 66af3639..5550abdf 100644
--- a/jslib/common/src/models/response/userKeyResponse.ts
+++ b/jslib/common/src/models/response/userKeyResponse.ts
@@ -1,12 +1,12 @@
-import { BaseResponse } from './baseResponse';
+import { BaseResponse } from "./baseResponse";
 
 export class UserKeyResponse extends BaseResponse {
-    userId: string;
-    publicKey: string;
+  userId: string;
+  publicKey: string;
 
-    constructor(response: any) {
-        super(response);
-        this.userId = this.getResponseProperty('UserId');
-        this.publicKey = this.getResponseProperty('PublicKey');
-    }
+  constructor(response: any) {
+    super(response);
+    this.userId = this.getResponseProperty("UserId");
+    this.publicKey = this.getResponseProperty("PublicKey");
+  }
 }
diff --git a/jslib/common/src/models/view/attachmentView.ts b/jslib/common/src/models/view/attachmentView.ts
index 45c04f48..7bf8186f 100644
--- a/jslib/common/src/models/view/attachmentView.ts
+++ b/jslib/common/src/models/view/attachmentView.ts
@@ -1,35 +1,35 @@
-import { View } from './view';
+import { View } from "./view";
 
-import { Attachment } from '../domain/attachment';
-import { SymmetricCryptoKey } from '../domain/symmetricCryptoKey';
+import { Attachment } from "../domain/attachment";
+import { SymmetricCryptoKey } from "../domain/symmetricCryptoKey";
 
 export class AttachmentView implements View {
-    id: string = null;
-    url: string = null;
-    size: string = null;
-    sizeName: string = null;
-    fileName: string = null;
-    key: SymmetricCryptoKey = null;
+  id: string = null;
+  url: string = null;
+  size: string = null;
+  sizeName: string = null;
+  fileName: string = null;
+  key: SymmetricCryptoKey = null;
 
-    constructor(a?: Attachment) {
-        if (!a) {
-            return;
-        }
-
-        this.id = a.id;
-        this.url = a.url;
-        this.size = a.size;
-        this.sizeName = a.sizeName;
+  constructor(a?: Attachment) {
+    if (!a) {
+      return;
     }
 
-    get fileSize(): number {
-        try {
-            if (this.size != null) {
-                return parseInt(this.size, null);
-            }
-        } catch {
-            // Invalid file size.
-        }
-        return 0;
+    this.id = a.id;
+    this.url = a.url;
+    this.size = a.size;
+    this.sizeName = a.sizeName;
+  }
+
+  get fileSize(): number {
+    try {
+      if (this.size != null) {
+        return parseInt(this.size, null);
+      }
+    } catch {
+      // Invalid file size.
     }
+    return 0;
+  }
 }
diff --git a/jslib/common/src/models/view/cardView.ts b/jslib/common/src/models/view/cardView.ts
index 94e7ae49..4aa3a999 100644
--- a/jslib/common/src/models/view/cardView.ts
+++ b/jslib/common/src/models/view/cardView.ts
@@ -1,86 +1,87 @@
-import { ItemView } from './itemView';
+import { ItemView } from "./itemView";
 
-import { Card } from '../domain/card';
+import { Card } from "../domain/card";
 
-import { CardLinkedId as LinkedId } from '../../enums/linkedIdType';
+import { CardLinkedId as LinkedId } from "../../enums/linkedIdType";
 
-import { linkedFieldOption } from '../../misc/linkedFieldOption.decorator';
+import { linkedFieldOption } from "../../misc/linkedFieldOption.decorator";
 
 export class CardView extends ItemView {
-    @linkedFieldOption(LinkedId.CardholderName)
-    cardholderName: string = null;
-    @linkedFieldOption(LinkedId.ExpMonth, 'expirationMonth')
-    expMonth: string = null;
-    @linkedFieldOption(LinkedId.ExpYear, 'expirationYear')
-    expYear: string = null;
-    @linkedFieldOption(LinkedId.Code, 'securityCode')
-    code: string = null;
+  @linkedFieldOption(LinkedId.CardholderName)
+  cardholderName: string = null;
+  @linkedFieldOption(LinkedId.ExpMonth, "expirationMonth")
+  expMonth: string = null;
+  @linkedFieldOption(LinkedId.ExpYear, "expirationYear")
+  expYear: string = null;
+  @linkedFieldOption(LinkedId.Code, "securityCode")
+  code: string = null;
 
-    // tslint:disable
-    private _brand: string = null;
-    private _number: string = null;
-    private _subTitle: string = null;
-    // tslint:enable
+  // tslint:disable
+  private _brand: string = null;
+  private _number: string = null;
+  private _subTitle: string = null;
+  // tslint:enable
 
-    constructor(c?: Card) {
-        super();
-    }
+  constructor(c?: Card) {
+    super();
+  }
 
-    get maskedCode(): string {
-        return this.code != null ? '•'.repeat(this.code.length) : null;
-    }
+  get maskedCode(): string {
+    return this.code != null ? "•".repeat(this.code.length) : null;
+  }
 
-    get maskedNumber(): string {
-        return this.number != null ? '•'.repeat(this.number.length) : null;
-    }
+  get maskedNumber(): string {
+    return this.number != null ? "•".repeat(this.number.length) : null;
+  }
 
-    @linkedFieldOption(LinkedId.Brand)
-    get brand(): string {
-        return this._brand;
-    }
-    set brand(value: string) {
-        this._brand = value;
-        this._subTitle = null;
-    }
+  @linkedFieldOption(LinkedId.Brand)
+  get brand(): string {
+    return this._brand;
+  }
+  set brand(value: string) {
+    this._brand = value;
+    this._subTitle = null;
+  }
 
-    @linkedFieldOption(LinkedId.Number)
-    get number(): string {
-        return this._number;
-    }
-    set number(value: string) {
-        this._number = value;
-        this._subTitle = null;
-    }
+  @linkedFieldOption(LinkedId.Number)
+  get number(): string {
+    return this._number;
+  }
+  set number(value: string) {
+    this._number = value;
+    this._subTitle = null;
+  }
 
-    get subTitle(): string {
-        if (this._subTitle == null) {
-            this._subTitle = this.brand;
-            if (this.number != null && this.number.length >= 4) {
-                if (this._subTitle != null && this._subTitle !== '') {
-                    this._subTitle += ', ';
-                } else {
-                    this._subTitle = '';
-                }
-
-                // Show last 5 on amex, last 4 for all others
-                const count = this.number.length >= 5 && this.number.match(new RegExp('^3[47]')) != null ? 5 : 4;
-                this._subTitle += ('*' + this.number.substr(this.number.length - count));
-            }
-        }
-        return this._subTitle;
-    }
-
-    get expiration(): string {
-        if (!this.expMonth && !this.expYear) {
-            return null;
+  get subTitle(): string {
+    if (this._subTitle == null) {
+      this._subTitle = this.brand;
+      if (this.number != null && this.number.length >= 4) {
+        if (this._subTitle != null && this._subTitle !== "") {
+          this._subTitle += ", ";
+        } else {
+          this._subTitle = "";
         }
 
-        let exp = this.expMonth != null ? ('0' + this.expMonth).slice(-2) : '__';
-        exp += (' / ' + (this.expYear != null ? this.formatYear(this.expYear) : '____'));
-        return exp;
+        // Show last 5 on amex, last 4 for all others
+        const count =
+          this.number.length >= 5 && this.number.match(new RegExp("^3[47]")) != null ? 5 : 4;
+        this._subTitle += "*" + this.number.substr(this.number.length - count);
+      }
     }
+    return this._subTitle;
+  }
 
-    private formatYear(year: string): string {
-        return year.length === 2 ? '20' + year : year;
+  get expiration(): string {
+    if (!this.expMonth && !this.expYear) {
+      return null;
     }
+
+    let exp = this.expMonth != null ? ("0" + this.expMonth).slice(-2) : "__";
+    exp += " / " + (this.expYear != null ? this.formatYear(this.expYear) : "____");
+    return exp;
+  }
+
+  private formatYear(year: string): string {
+    return year.length === 2 ? "20" + year : year;
+  }
 }
diff --git a/jslib/common/src/models/view/cipherView.ts b/jslib/common/src/models/view/cipherView.ts
index e4e5c3f1..073b2a2c 100644
--- a/jslib/common/src/models/view/cipherView.ts
+++ b/jslib/common/src/models/view/cipherView.ts
@@ -1,136 +1,136 @@
-import { CipherRepromptType } from '../../enums/cipherRepromptType';
-import { CipherType } from '../../enums/cipherType';
-import { LinkedIdType } from '../../enums/linkedIdType';
-
-import { Cipher } from '../domain/cipher';
-
-import { AttachmentView } from './attachmentView';
-import { CardView } from './cardView';
-import { FieldView } from './fieldView';
-import { IdentityView } from './identityView';
-import { ItemView } from './itemView';
-import { LoginView } from './loginView';
-import { PasswordHistoryView } from './passwordHistoryView';
-import { SecureNoteView } from './secureNoteView';
-import { View } from './view';
+import { CipherRepromptType } from "../../enums/cipherRepromptType";
+import { CipherType } from "../../enums/cipherType";
+import { LinkedIdType } from "../../enums/linkedIdType";
+
+import { Cipher } from "../domain/cipher";
+
+import { AttachmentView } from "./attachmentView";
+import { CardView } from "./cardView";
+import { FieldView } from "./fieldView";
+import { IdentityView } from "./identityView";
+import { ItemView } from "./itemView";
+import { LoginView } from "./loginView";
+import { PasswordHistoryView } from "./passwordHistoryView";
+import { SecureNoteView } from "./secureNoteView";
+import { View } from "./view";
 
 export class CipherView implements View {
-    id: string = null;
-    organizationId: string = null;
-    folderId: string = null;
-    name: string = null;
-    notes: string = null;
-    type: CipherType = null;
-    favorite = false;
-    organizationUseTotp = false;
-    edit = false;
-    viewPassword = true;
-    localData: any;
-    login = new LoginView();
-    identity = new IdentityView();
-    card = new CardView();
-    secureNote = new SecureNoteView();
-    attachments: AttachmentView[] = null;
-    fields: FieldView[] = null;
-    passwordHistory: PasswordHistoryView[] = null;
-    collectionIds: string[] = null;
-    revisionDate: Date = null;
-    deletedDate: Date = null;
-    reprompt: CipherRepromptType = CipherRepromptType.None;
-
-    constructor(c?: Cipher) {
-        if (!c) {
-            return;
-        }
-
-        this.id = c.id;
-        this.organizationId = c.organizationId;
-        this.folderId = c.folderId;
-        this.favorite = c.favorite;
-        this.organizationUseTotp = c.organizationUseTotp;
-        this.edit = c.edit;
-        this.viewPassword = c.viewPassword;
-        this.type = c.type;
-        this.localData = c.localData;
-        this.collectionIds = c.collectionIds;
-        this.revisionDate = c.revisionDate;
-        this.deletedDate = c.deletedDate;
-        // Old locally stored ciphers might have reprompt == null. If so set it to None.
-        this.reprompt = c.reprompt ?? CipherRepromptType.None;
-    }
-
-    private get item() {
-        switch (this.type) {
-            case CipherType.Login:
-                return this.login;
-            case CipherType.SecureNote:
-                return this.secureNote;
-            case CipherType.Card:
-                return this.card;
-            case CipherType.Identity:
-                return this.identity;
-            default:
-                break;
-        }
-
-        return null;
+  id: string = null;
+  organizationId: string = null;
+  folderId: string = null;
+  name: string = null;
+  notes: string = null;
+  type: CipherType = null;
+  favorite = false;
+  organizationUseTotp = false;
+  edit = false;
+  viewPassword = true;
+  localData: any;
+  login = new LoginView();
+  identity = new IdentityView();
+  card = new CardView();
+  secureNote = new SecureNoteView();
+  attachments: AttachmentView[] = null;
+  fields: FieldView[] = null;
+  passwordHistory: PasswordHistoryView[] = null;
+  collectionIds: string[] = null;
+  revisionDate: Date = null;
+  deletedDate: Date = null;
+  reprompt: CipherRepromptType = CipherRepromptType.None;
+
+  constructor(c?: Cipher) {
+    if (!c) {
+      return;
     }
 
-    get subTitle(): string {
-        return this.item.subTitle;
+    this.id = c.id;
+    this.organizationId = c.organizationId;
+    this.folderId = c.folderId;
+    this.favorite = c.favorite;
+    this.organizationUseTotp = c.organizationUseTotp;
+    this.edit = c.edit;
+    this.viewPassword = c.viewPassword;
+    this.type = c.type;
+    this.localData = c.localData;
+    this.collectionIds = c.collectionIds;
+    this.revisionDate = c.revisionDate;
+    this.deletedDate = c.deletedDate;
+    // Old locally stored ciphers might have reprompt == null. If so set it to None.
+    this.reprompt = c.reprompt ?? CipherRepromptType.None;
+  }
+
+  private get item() {
+    switch (this.type) {
+      case CipherType.Login:
+        return this.login;
+      case CipherType.SecureNote:
+        return this.secureNote;
+      case CipherType.Card:
+        return this.card;
+      case CipherType.Identity:
+        return this.identity;
+      default:
+        break;
     }
 
-    get hasPasswordHistory(): boolean {
-        return this.passwordHistory && this.passwordHistory.length > 0;
-    }
+    return null;
+  }
 
-    get hasAttachments(): boolean {
-        return this.attachments && this.attachments.length > 0;
-    }
+  get subTitle(): string {
+    return this.item.subTitle;
+  }
 
-    get hasOldAttachments(): boolean {
-        if (this.hasAttachments) {
-            for (let i = 0; i < this.attachments.length; i++) {
-                if (this.attachments[i].key == null) {
-                    return true;
-                }
-            }
-        }
-        return false;
-    }
+  get hasPasswordHistory(): boolean {
+    return this.passwordHistory && this.passwordHistory.length > 0;
+  }
 
-    get hasFields(): boolean {
-        return this.fields && this.fields.length > 0;
-    }
+  get hasAttachments(): boolean {
+    return this.attachments && this.attachments.length > 0;
+  }
 
-    get passwordRevisionDisplayDate(): Date {
-        if (this.type !== CipherType.Login || this.login == null) {
-            return null;
-        } else if (this.login.password == null || this.login.password === '') {
-            return null;
+  get hasOldAttachments(): boolean {
+    if (this.hasAttachments) {
+      for (let i = 0; i < this.attachments.length; i++) {
+        if (this.attachments[i].key == null) {
+          return true;
         }
-        return this.login.passwordRevisionDate;
+      }
     }
-
-    get isDeleted(): boolean {
-        return this.deletedDate != null;
+    return false;
+  }
+
+  get hasFields(): boolean {
+    return this.fields && this.fields.length > 0;
+  }
+
+  get passwordRevisionDisplayDate(): Date {
+    if (this.type !== CipherType.Login || this.login == null) {
+      return null;
+    } else if (this.login.password == null || this.login.password === "") {
+      return null;
     }
+    return this.login.passwordRevisionDate;
+  }
 
-    get linkedFieldOptions() {
-        return this.item.linkedFieldOptions;
-    }
+  get isDeleted(): boolean {
+    return this.deletedDate != null;
+  }
 
-    linkedFieldValue(id: LinkedIdType) {
-        const linkedFieldOption = this.linkedFieldOptions?.get(id);
-        if (linkedFieldOption == null) {
-            return null;
-        }
+  get linkedFieldOptions() {
+    return this.item.linkedFieldOptions;
+  }
 
-        const item = this.item;
-        return this.item[linkedFieldOption.propertyKey as keyof typeof item];
+  linkedFieldValue(id: LinkedIdType) {
+    const linkedFieldOption = this.linkedFieldOptions?.get(id);
+    if (linkedFieldOption == null) {
+      return null;
     }
 
-    linkedFieldI18nKey(id: LinkedIdType): string {
-        return this.linkedFieldOptions.get(id)?.i18nKey;
-    }
+    const item = this.item;
+    return this.item[linkedFieldOption.propertyKey as keyof typeof item];
+  }
+
+  linkedFieldI18nKey(id: LinkedIdType): string {
+    return this.linkedFieldOptions.get(id)?.i18nKey;
+  }
 }
diff --git a/jslib/common/src/models/view/collectionView.ts b/jslib/common/src/models/view/collectionView.ts
index 9c27c9fb..0f580837 100644
--- a/jslib/common/src/models/view/collectionView.ts
+++ b/jslib/common/src/models/view/collectionView.ts
@@ -1,29 +1,29 @@
-import { View } from './view';
+import { View } from "./view";
 
-import { Collection } from '../domain/collection';
-import { ITreeNodeObject } from '../domain/treeNode';
+import { Collection } from "../domain/collection";
+import { ITreeNodeObject } from "../domain/treeNode";
 
-import { CollectionGroupDetailsResponse } from '../response/collectionResponse';
+import { CollectionGroupDetailsResponse } from "../response/collectionResponse";
 
 export class CollectionView implements View, ITreeNodeObject {
-    id: string = null;
-    organizationId: string = null;
-    name: string = null;
-    externalId: string = null;
-    readOnly: boolean = null;
-    hidePasswords: boolean = null;
+  id: string = null;
+  organizationId: string = null;
+  name: string = null;
+  externalId: string = null;
+  readOnly: boolean = null;
+  hidePasswords: boolean = null;
 
-    constructor(c?: Collection | CollectionGroupDetailsResponse) {
-        if (!c) {
-            return;
-        }
+  constructor(c?: Collection | CollectionGroupDetailsResponse) {
+    if (!c) {
+      return;
+    }
 
-        this.id = c.id;
-        this.organizationId = c.organizationId;
-        this.externalId = c.externalId;
-        if (c instanceof Collection) {
-            this.readOnly = c.readOnly;
-            this.hidePasswords = c.hidePasswords;
-        }
+    this.id = c.id;
+    this.organizationId = c.organizationId;
+    this.externalId = c.externalId;
+    if (c instanceof Collection) {
+      this.readOnly = c.readOnly;
+      this.hidePasswords = c.hidePasswords;
     }
+  }
 }
diff --git a/jslib/common/src/models/view/eventView.ts b/jslib/common/src/models/view/eventView.ts
index 39e40c4d..17339ecb 100644
--- a/jslib/common/src/models/view/eventView.ts
+++ b/jslib/common/src/models/view/eventView.ts
@@ -1,27 +1,27 @@
-import { EventType } from '../../enums/eventType';
+import { EventType } from "../../enums/eventType";
 
 export class EventView {
-    message: string;
-    humanReadableMessage: string;
-    appIcon: string;
-    appName: string;
-    userId: string;
-    userName: string;
-    userEmail: string;
-    date: string;
-    ip: string;
-    type: EventType;
+  message: string;
+  humanReadableMessage: string;
+  appIcon: string;
+  appName: string;
+  userId: string;
+  userName: string;
+  userEmail: string;
+  date: string;
+  ip: string;
+  type: EventType;
 
-    constructor(data: Required<EventView>) {
-        this.message = data.message;
-        this.humanReadableMessage = data.humanReadableMessage;
-        this.appIcon = data.appIcon;
-        this.appName = data.appName;
-        this.userId = data.userId;
-        this.userName = data.userName;
-        this.userEmail = data.userEmail;
-        this.date = data.date;
-        this.ip = data.ip;
-        this.type = data.type;
-    }
+  constructor(data: Required<EventView>) {
+    this.message = data.message;
+    this.humanReadableMessage = data.humanReadableMessage;
+    this.appIcon = data.appIcon;
+    this.appName = data.appName;
+    this.userId = data.userId;
+    this.userName = data.userName;
+    this.userEmail = data.userEmail;
+    this.date = data.date;
+    this.ip = data.ip;
+    this.type = data.type;
+  }
 }
diff --git a/jslib/common/src/models/view/fieldView.ts b/jslib/common/src/models/view/fieldView.ts
index 3202d4b1..c1c1b1e4 100644
--- a/jslib/common/src/models/view/fieldView.ts
+++ b/jslib/common/src/models/view/fieldView.ts
@@ -1,28 +1,28 @@
-import { FieldType } from '../../enums/fieldType';
-import { LinkedIdType } from '../../enums/linkedIdType';
+import { FieldType } from "../../enums/fieldType";
+import { LinkedIdType } from "../../enums/linkedIdType";
 
-import { View } from './view';
+import { View } from "./view";
 
-import { Field } from '../domain/field';
+import { Field } from "../domain/field";
 
 export class FieldView implements View {
-    name: string = null;
-    value: string = null;
-    type: FieldType = null;
-    newField: boolean = false; // Marks if the field is new and hasn't been saved
-    showValue: boolean = false;
-    linkedId: LinkedIdType = null;
+  name: string = null;
+  value: string = null;
+  type: FieldType = null;
+  newField: boolean = false; // Marks if the field is new and hasn't been saved
+  showValue: boolean = false;
+  linkedId: LinkedIdType = null;
 
-    constructor(f?: Field) {
-        if (!f) {
-            return;
-        }
-
-        this.type = f.type;
-        this.linkedId = f.linkedId;
+  constructor(f?: Field) {
+    if (!f) {
+      return;
     }
 
-    get maskedValue(): string {
-        return this.value != null ? '••••••••' : null;
-    }
+    this.type = f.type;
+    this.linkedId = f.linkedId;
+  }
+
+  get maskedValue(): string {
+    return this.value != null ? "••••••••" : null;
+  }
 }
diff --git a/jslib/common/src/models/view/folderView.ts b/jslib/common/src/models/view/folderView.ts
index 1446a972..5ecd8822 100644
--- a/jslib/common/src/models/view/folderView.ts
+++ b/jslib/common/src/models/view/folderView.ts
@@ -1,19 +1,19 @@
-import { View } from './view';
+import { View } from "./view";
 
-import { Folder } from '../domain/folder';
-import { ITreeNodeObject } from '../domain/treeNode';
+import { Folder } from "../domain/folder";
+import { ITreeNodeObject } from "../domain/treeNode";
 
 export class FolderView implements View, ITreeNodeObject {
-    id: string = null;
-    name: string = null;
-    revisionDate: Date = null;
+  id: string = null;
+  name: string = null;
+  revisionDate: Date = null;
 
-    constructor(f?: Folder) {
-        if (!f) {
-            return;
-        }
-
-        this.id = f.id;
-        this.revisionDate = f.revisionDate;
+  constructor(f?: Folder) {
+    if (!f) {
+      return;
     }
+
+    this.id = f.id;
+    this.revisionDate = f.revisionDate;
+  }
 }
diff --git a/jslib/common/src/models/view/identityView.ts b/jslib/common/src/models/view/identityView.ts
index 844a8acd..10e6616e 100644
--- a/jslib/common/src/models/view/identityView.ts
+++ b/jslib/common/src/models/view/identityView.ts
@@ -1,143 +1,148 @@
-import { ItemView } from './itemView';
+import { ItemView } from "./itemView";
 
-import { Identity } from '../domain/identity';
+import { Identity } from "../domain/identity";
 
-import { Utils } from '../../misc/utils';
+import { Utils } from "../../misc/utils";
 
-import { IdentityLinkedId as LinkedId } from '../../enums/linkedIdType';
+import { IdentityLinkedId as LinkedId } from "../../enums/linkedIdType";
 
-import { linkedFieldOption } from '../../misc/linkedFieldOption.decorator';
+import { linkedFieldOption } from "../../misc/linkedFieldOption.decorator";
 
 export class IdentityView extends ItemView {
-    @linkedFieldOption(LinkedId.Title)
-    title: string = null;
-    @linkedFieldOption(LinkedId.MiddleName)
-    middleName: string = null;
-    @linkedFieldOption(LinkedId.Address1)
-    address1: string = null;
-    @linkedFieldOption(LinkedId.Address2)
-    address2: string = null;
-    @linkedFieldOption(LinkedId.Address3)
-    address3: string = null;
-    @linkedFieldOption(LinkedId.City, 'cityTown')
-    city: string = null;
-    @linkedFieldOption(LinkedId.State, 'stateProvince')
-    state: string = null;
-    @linkedFieldOption(LinkedId.PostalCode, 'zipPostalCode')
-    postalCode: string = null;
-    @linkedFieldOption(LinkedId.Country)
-    country: string = null;
-    @linkedFieldOption(LinkedId.Company)
-    company: string = null;
-    @linkedFieldOption(LinkedId.Email)
-    email: string = null;
-    @linkedFieldOption(LinkedId.Phone)
-    phone: string = null;
-    @linkedFieldOption(LinkedId.Ssn)
-    ssn: string = null;
-    @linkedFieldOption(LinkedId.Username)
-    username: string = null;
-    @linkedFieldOption(LinkedId.PassportNumber)
-    passportNumber: string = null;
-    @linkedFieldOption(LinkedId.LicenseNumber)
-    licenseNumber: string = null;
+  @linkedFieldOption(LinkedId.Title)
+  title: string = null;
+  @linkedFieldOption(LinkedId.MiddleName)
+  middleName: string = null;
+  @linkedFieldOption(LinkedId.Address1)
+  address1: string = null;
+  @linkedFieldOption(LinkedId.Address2)
+  address2: string = null;
+  @linkedFieldOption(LinkedId.Address3)
+  address3: string = null;
+  @linkedFieldOption(LinkedId.City, "cityTown")
+  city: string = null;
+  @linkedFieldOption(LinkedId.State, "stateProvince")
+  state: string = null;
+  @linkedFieldOption(LinkedId.PostalCode, "zipPostalCode")
+  postalCode: string = null;
+  @linkedFieldOption(LinkedId.Country)
+  country: string = null;
+  @linkedFieldOption(LinkedId.Company)
+  company: string = null;
+  @linkedFieldOption(LinkedId.Email)
+  email: string = null;
+  @linkedFieldOption(LinkedId.Phone)
+  phone: string = null;
+  @linkedFieldOption(LinkedId.Ssn)
+  ssn: string = null;
+  @linkedFieldOption(LinkedId.Username)
+  username: string = null;
+  @linkedFieldOption(LinkedId.PassportNumber)
+  passportNumber: string = null;
+  @linkedFieldOption(LinkedId.LicenseNumber)
+  licenseNumber: string = null;
 
-    // tslint:disable
-    private _firstName: string = null;
-    private _lastName: string = null;
-    private _subTitle: string = null;
-    // tslint:enable
+  // tslint:disable
+  private _firstName: string = null;
+  private _lastName: string = null;
+  private _subTitle: string = null;
+  // tslint:enable
 
-    constructor(i?: Identity) {
-        super();
-    }
+  constructor(i?: Identity) {
+    super();
+  }
 
-    @linkedFieldOption(LinkedId.FirstName)
-    get firstName(): string {
-        return this._firstName;
-    }
-    set firstName(value: string) {
-        this._firstName = value;
-        this._subTitle = null;
-    }
+  @linkedFieldOption(LinkedId.FirstName)
+  get firstName(): string {
+    return this._firstName;
+  }
+  set firstName(value: string) {
+    this._firstName = value;
+    this._subTitle = null;
+  }
 
-    @linkedFieldOption(LinkedId.LastName)
-    get lastName(): string {
-        return this._lastName;
-    }
-    set lastName(value: string) {
-        this._lastName = value;
-        this._subTitle = null;
-    }
+  @linkedFieldOption(LinkedId.LastName)
+  get lastName(): string {
+    return this._lastName;
+  }
+  set lastName(value: string) {
+    this._lastName = value;
+    this._subTitle = null;
+  }
 
-    get subTitle(): string {
-        if (this._subTitle == null && (this.firstName != null || this.lastName != null)) {
-            this._subTitle = '';
-            if (this.firstName != null) {
-                this._subTitle = this.firstName;
-            }
-            if (this.lastName != null) {
-                if (this._subTitle !== '') {
-                    this._subTitle += ' ';
-                }
-                this._subTitle += this.lastName;
-            }
+  get subTitle(): string {
+    if (this._subTitle == null && (this.firstName != null || this.lastName != null)) {
+      this._subTitle = "";
+      if (this.firstName != null) {
+        this._subTitle = this.firstName;
+      }
+      if (this.lastName != null) {
+        if (this._subTitle !== "") {
+          this._subTitle += " ";
         }
-
-        return this._subTitle;
+        this._subTitle += this.lastName;
+      }
     }
 
-    @linkedFieldOption(LinkedId.FullName)
-    get fullName(): string {
-        if (this.title != null || this.firstName != null || this.middleName != null || this.lastName != null) {
-            let name = '';
-            if (this.title != null) {
-                name += (this.title + ' ');
-            }
-            if (this.firstName != null) {
-                name += (this.firstName + ' ');
-            }
-            if (this.middleName != null) {
-                name += (this.middleName + ' ');
-            }
-            if (this.lastName != null) {
-                name += this.lastName;
-            }
-            return name.trim();
-        }
+    return this._subTitle;
+  }
 
-        return null;
+  @linkedFieldOption(LinkedId.FullName)
+  get fullName(): string {
+    if (
+      this.title != null ||
+      this.firstName != null ||
+      this.middleName != null ||
+      this.lastName != null
+    ) {
+      let name = "";
+      if (this.title != null) {
+        name += this.title + " ";
+      }
+      if (this.firstName != null) {
+        name += this.firstName + " ";
+      }
+      if (this.middleName != null) {
+        name += this.middleName + " ";
+      }
+      if (this.lastName != null) {
+        name += this.lastName;
+      }
+      return name.trim();
     }
 
-    get fullAddress(): string {
-        let address = this.address1;
-        if (!Utils.isNullOrWhitespace(this.address2)) {
-            if (!Utils.isNullOrWhitespace(address)) {
-                address += ', ';
-            }
-            address += this.address2;
-        }
-        if (!Utils.isNullOrWhitespace(this.address3)) {
-            if (!Utils.isNullOrWhitespace(address)) {
-                address += ', ';
-            }
-            address += this.address3;
-        }
-        return address;
+    return null;
+  }
+
+  get fullAddress(): string {
+    let address = this.address1;
+    if (!Utils.isNullOrWhitespace(this.address2)) {
+      if (!Utils.isNullOrWhitespace(address)) {
+        address += ", ";
+      }
+      address += this.address2;
+    }
+    if (!Utils.isNullOrWhitespace(this.address3)) {
+      if (!Utils.isNullOrWhitespace(address)) {
+        address += ", ";
+      }
+      address += this.address3;
     }
+    return address;
+  }
 
-    get fullAddressPart2(): string {
-        if (this.city == null && this.state == null && this.postalCode == null) {
-            return null;
-        }
-        const city = this.city || '-';
-        const state = this.state;
-        const postalCode = this.postalCode || '-';
-        let addressPart2 = city;
-        if (!Utils.isNullOrWhitespace(state)) {
-            addressPart2 += ', ' + state;
-        }
-        addressPart2 += ', ' + postalCode;
-        return addressPart2;
+  get fullAddressPart2(): string {
+    if (this.city == null && this.state == null && this.postalCode == null) {
+      return null;
+    }
+    const city = this.city || "-";
+    const state = this.state;
+    const postalCode = this.postalCode || "-";
+    let addressPart2 = city;
+    if (!Utils.isNullOrWhitespace(state)) {
+      addressPart2 += ", " + state;
     }
+    addressPart2 += ", " + postalCode;
+    return addressPart2;
+  }
 }
diff --git a/jslib/common/src/models/view/itemView.ts b/jslib/common/src/models/view/itemView.ts
index aaeac473..edd85b7d 100644
--- a/jslib/common/src/models/view/itemView.ts
+++ b/jslib/common/src/models/view/itemView.ts
@@ -1,8 +1,8 @@
-import { View } from './view';
+import { View } from "./view";
 
-import { LinkedMetadata } from '../../misc/linkedFieldOption.decorator';
+import { LinkedMetadata } from "../../misc/linkedFieldOption.decorator";
 
 export abstract class ItemView implements View {
-    linkedFieldOptions: Map<number, LinkedMetadata>;
-    abstract get subTitle(): string;
+  linkedFieldOptions: Map<number, LinkedMetadata>;
+  abstract get subTitle(): string;
 }
diff --git a/jslib/common/src/models/view/loginUriView.ts b/jslib/common/src/models/view/loginUriView.ts
index eab4806b..cd5dc2b8 100644
--- a/jslib/common/src/models/view/loginUriView.ts
+++ b/jslib/common/src/models/view/loginUriView.ts
@@ -1,125 +1,131 @@
-import { UriMatchType } from '../../enums/uriMatchType';
+import { UriMatchType } from "../../enums/uriMatchType";
 
-import { View } from './view';
+import { View } from "./view";
 
-import { LoginUri } from '../domain/loginUri';
+import { LoginUri } from "../domain/loginUri";
 
-import { Utils } from '../../misc/utils';
+import { Utils } from "../../misc/utils";
 
 const CanLaunchWhitelist = [
-    'https://',
-    'http://',
-    'ssh://',
-    'ftp://',
-    'sftp://',
-    'irc://',
-    'vnc://',
-    // https://docs.microsoft.com/en-us/windows-server/remote/remote-desktop-services/clients/remote-desktop-uri
-    'rdp://', // Legacy RDP URI scheme
-    'ms-rd:', // Preferred RDP URI scheme
-    'chrome://',
-    'iosapp://',
-    'androidapp://',
+  "https://",
+  "http://",
+  "ssh://",
+  "ftp://",
+  "sftp://",
+  "irc://",
+  "vnc://",
+  // https://docs.microsoft.com/en-us/windows-server/remote/remote-desktop-services/clients/remote-desktop-uri
+  "rdp://", // Legacy RDP URI scheme
+  "ms-rd:", // Preferred RDP URI scheme
+  "chrome://",
+  "iosapp://",
+  "androidapp://",
 ];
 
 export class LoginUriView implements View {
-    match: UriMatchType = null;
-
-    // tslint:disable
-    private _uri: string = null;
-    private _domain: string = null;
-    private _hostname: string = null;
-    private _host: string = null;
-    private _canLaunch: boolean = null;
-    // tslint:enable
-
-    constructor(u?: LoginUri) {
-        if (!u) {
-            return;
-        }
-
-        this.match = u.match;
+  match: UriMatchType = null;
+
+  // tslint:disable
+  private _uri: string = null;
+  private _domain: string = null;
+  private _hostname: string = null;
+  private _host: string = null;
+  private _canLaunch: boolean = null;
+  // tslint:enable
+
+  constructor(u?: LoginUri) {
+    if (!u) {
+      return;
     }
 
-    get uri(): string {
-        return this._uri;
-    }
-    set uri(value: string) {
-        this._uri = value;
+    this.match = u.match;
+  }
+
+  get uri(): string {
+    return this._uri;
+  }
+  set uri(value: string) {
+    this._uri = value;
+    this._domain = null;
+    this._canLaunch = null;
+  }
+
+  get domain(): string {
+    if (this._domain == null && this.uri != null) {
+      this._domain = Utils.getDomain(this.uri);
+      if (this._domain === "") {
         this._domain = null;
-        this._canLaunch = null;
+      }
     }
 
-    get domain(): string {
-        if (this._domain == null && this.uri != null) {
-            this._domain = Utils.getDomain(this.uri);
-            if (this._domain === '') {
-                this._domain = null;
-            }
-        }
+    return this._domain;
+  }
 
-        return this._domain;
+  get hostname(): string {
+    if (this.match === UriMatchType.RegularExpression) {
+      return null;
     }
-
-    get hostname(): string {
-        if (this.match === UriMatchType.RegularExpression) {
-            return null;
-        }
-        if (this._hostname == null && this.uri != null) {
-            this._hostname = Utils.getHostname(this.uri);
-            if (this._hostname === '') {
-                this._hostname = null;
-            }
-        }
-
-        return this._hostname;
+    if (this._hostname == null && this.uri != null) {
+      this._hostname = Utils.getHostname(this.uri);
+      if (this._hostname === "") {
+        this._hostname = null;
+      }
     }
 
-    get host(): string {
-        if (this.match === UriMatchType.RegularExpression) {
-            return null;
-        }
-        if (this._host == null && this.uri != null) {
-            this._host = Utils.getHost(this.uri);
-            if (this._host === '') {
-                this._host = null;
-            }
-        }
-
-        return this._host;
-    }
+    return this._hostname;
+  }
 
-    get hostnameOrUri(): string {
-        return this.hostname != null ? this.hostname : this.uri;
+  get host(): string {
+    if (this.match === UriMatchType.RegularExpression) {
+      return null;
     }
-
-    get hostOrUri(): string {
-        return this.host != null ? this.host : this.uri;
+    if (this._host == null && this.uri != null) {
+      this._host = Utils.getHost(this.uri);
+      if (this._host === "") {
+        this._host = null;
+      }
     }
 
-    get isWebsite(): boolean {
-        return this.uri != null && (this.uri.indexOf('http://') === 0 || this.uri.indexOf('https://') === 0 ||
-            (this.uri.indexOf('://') < 0 && Utils.tldEndingRegex.test(this.uri)));
+    return this._host;
+  }
+
+  get hostnameOrUri(): string {
+    return this.hostname != null ? this.hostname : this.uri;
+  }
+
+  get hostOrUri(): string {
+    return this.host != null ? this.host : this.uri;
+  }
+
+  get isWebsite(): boolean {
+    return (
+      this.uri != null &&
+      (this.uri.indexOf("http://") === 0 ||
+        this.uri.indexOf("https://") === 0 ||
+        (this.uri.indexOf("://") < 0 && Utils.tldEndingRegex.test(this.uri)))
+    );
+  }
+
+  get canLaunch(): boolean {
+    if (this._canLaunch != null) {
+      return this._canLaunch;
     }
-
-    get canLaunch(): boolean {
-        if (this._canLaunch != null) {
-            return this._canLaunch;
-        }
-        if (this.uri != null && this.match !== UriMatchType.RegularExpression) {
-            const uri = this.launchUri;
-            for (let i = 0; i < CanLaunchWhitelist.length; i++) {
-                if (uri.indexOf(CanLaunchWhitelist[i]) === 0) {
-                    this._canLaunch = true;
-                    return this._canLaunch;
-                }
-            }
+    if (this.uri != null && this.match !== UriMatchType.RegularExpression) {
+      const uri = this.launchUri;
+      for (let i = 0; i < CanLaunchWhitelist.length; i++) {
+        if (uri.indexOf(CanLaunchWhitelist[i]) === 0) {
+          this._canLaunch = true;
+          return this._canLaunch;
         }
-        this._canLaunch = false;
-        return this._canLaunch;
-    }
-
-    get launchUri(): string {
-        return this.uri.indexOf('://') < 0 && Utils.tldEndingRegex.test(this.uri) ? ('http://' + this.uri) : this.uri;
+      }
     }
+    this._canLaunch = false;
+    return this._canLaunch;
+  }
+
+  get launchUri(): string {
+    return this.uri.indexOf("://") < 0 && Utils.tldEndingRegex.test(this.uri)
+      ? "http://" + this.uri
+      : this.uri;
+  }
 }
diff --git a/jslib/common/src/models/view/loginView.ts b/jslib/common/src/models/view/loginView.ts
index 3bd1ea58..b301f532 100644
--- a/jslib/common/src/models/view/loginView.ts
+++ b/jslib/common/src/models/view/loginView.ts
@@ -1,66 +1,66 @@
-import { ItemView } from './itemView';
-import { LoginUriView } from './loginUriView';
+import { ItemView } from "./itemView";
+import { LoginUriView } from "./loginUriView";
 
-import { Utils } from '../../misc/utils';
+import { Utils } from "../../misc/utils";
 
-import { Login } from '../domain/login';
+import { Login } from "../domain/login";
 
-import { LoginLinkedId as LinkedId } from '../../enums/linkedIdType';
+import { LoginLinkedId as LinkedId } from "../../enums/linkedIdType";
 
-import { linkedFieldOption } from '../../misc/linkedFieldOption.decorator';
+import { linkedFieldOption } from "../../misc/linkedFieldOption.decorator";
 
 export class LoginView extends ItemView {
-    @linkedFieldOption(LinkedId.Username)
-    username: string = null;
-    @linkedFieldOption(LinkedId.Password)
-    password: string = null;
+  @linkedFieldOption(LinkedId.Username)
+  username: string = null;
+  @linkedFieldOption(LinkedId.Password)
+  password: string = null;
 
-    passwordRevisionDate?: Date = null;
-    totp: string = null;
-    uris: LoginUriView[] = null;
-    autofillOnPageLoad: boolean = null;
+  passwordRevisionDate?: Date = null;
+  totp: string = null;
+  uris: LoginUriView[] = null;
+  autofillOnPageLoad: boolean = null;
 
-    constructor(l?: Login) {
-        super();
-        if (!l) {
-            return;
-        }
-
-        this.passwordRevisionDate = l.passwordRevisionDate;
-        this.autofillOnPageLoad = l.autofillOnPageLoad;
+  constructor(l?: Login) {
+    super();
+    if (!l) {
+      return;
     }
 
-    get uri(): string {
-        return this.hasUris ? this.uris[0].uri : null;
-    }
+    this.passwordRevisionDate = l.passwordRevisionDate;
+    this.autofillOnPageLoad = l.autofillOnPageLoad;
+  }
 
-    get maskedPassword(): string {
-        return this.password != null ? '••••••••' : null;
-    }
+  get uri(): string {
+    return this.hasUris ? this.uris[0].uri : null;
+  }
 
-    get subTitle(): string {
-        return this.username;
-    }
+  get maskedPassword(): string {
+    return this.password != null ? "••••••••" : null;
+  }
 
-    get canLaunch(): boolean {
-        return this.hasUris && this.uris.some(u => u.canLaunch);
-    }
+  get subTitle(): string {
+    return this.username;
+  }
 
-    get hasTotp(): boolean {
-        return !Utils.isNullOrWhitespace(this.totp);
-    }
+  get canLaunch(): boolean {
+    return this.hasUris && this.uris.some((u) => u.canLaunch);
+  }
 
-    get launchUri(): string {
-        if (this.hasUris) {
-            const uri = this.uris.find(u => u.canLaunch);
-            if (uri != null) {
-                return uri.launchUri;
-            }
-        }
-        return null;
-    }
+  get hasTotp(): boolean {
+    return !Utils.isNullOrWhitespace(this.totp);
+  }
 
-    get hasUris(): boolean {
-        return this.uris != null && this.uris.length > 0;
+  get launchUri(): string {
+    if (this.hasUris) {
+      const uri = this.uris.find((u) => u.canLaunch);
+      if (uri != null) {
+        return uri.launchUri;
+      }
     }
+    return null;
+  }
+
+  get hasUris(): boolean {
+    return this.uris != null && this.uris.length > 0;
+  }
 }
diff --git a/jslib/common/src/models/view/passwordHistoryView.ts b/jslib/common/src/models/view/passwordHistoryView.ts
index 5a0ca0e6..637b9b4f 100644
--- a/jslib/common/src/models/view/passwordHistoryView.ts
+++ b/jslib/common/src/models/view/passwordHistoryView.ts
@@ -1,16 +1,16 @@
-import { View } from './view';
+import { View } from "./view";
 
-import { Password } from '../domain/password';
+import { Password } from "../domain/password";
 
 export class PasswordHistoryView implements View {
-    password: string = null;
-    lastUsedDate: Date = null;
+  password: string = null;
+  lastUsedDate: Date = null;
 
-    constructor(ph?: Password) {
-        if (!ph) {
-            return;
-        }
-
-        this.lastUsedDate = ph.lastUsedDate;
+  constructor(ph?: Password) {
+    if (!ph) {
+      return;
     }
+
+    this.lastUsedDate = ph.lastUsedDate;
+  }
 }
diff --git a/jslib/common/src/models/view/secureNoteView.ts b/jslib/common/src/models/view/secureNoteView.ts
index 2d209025..c660ac9f 100644
--- a/jslib/common/src/models/view/secureNoteView.ts
+++ b/jslib/common/src/models/view/secureNoteView.ts
@@ -1,22 +1,22 @@
-import { SecureNoteType } from '../../enums/secureNoteType';
+import { SecureNoteType } from "../../enums/secureNoteType";
 
-import { ItemView } from './itemView';
+import { ItemView } from "./itemView";
 
-import { SecureNote } from '../domain/secureNote';
+import { SecureNote } from "../domain/secureNote";
 
 export class SecureNoteView extends ItemView {
-    type: SecureNoteType = null;
+  type: SecureNoteType = null;
 
-    constructor(n?: SecureNote) {
-        super();
-        if (!n) {
-            return;
-        }
-
-        this.type = n.type;
+  constructor(n?: SecureNote) {
+    super();
+    if (!n) {
+      return;
     }
 
-    get subTitle(): string {
-        return null;
-    }
+    this.type = n.type;
+  }
+
+  get subTitle(): string {
+    return null;
+  }
 }
diff --git a/jslib/common/src/models/view/sendAccessView.ts b/jslib/common/src/models/view/sendAccessView.ts
index 2aec827e..1b848169 100644
--- a/jslib/common/src/models/view/sendAccessView.ts
+++ b/jslib/common/src/models/view/sendAccessView.ts
@@ -1,28 +1,28 @@
-import { SendType } from '../../enums/sendType';
+import { SendType } from "../../enums/sendType";
 
-import { SendAccess } from '../domain/sendAccess';
+import { SendAccess } from "../domain/sendAccess";
 
-import { SendFileView } from './sendFileView';
-import { SendTextView } from './sendTextView';
-import { View } from './view';
+import { SendFileView } from "./sendFileView";
+import { SendTextView } from "./sendTextView";
+import { View } from "./view";
 
 export class SendAccessView implements View {
-    id: string = null;
-    name: string = null;
-    type: SendType = null;
-    text = new SendTextView();
-    file = new SendFileView();
-    expirationDate: Date = null;
-    creatorIdentifier: string = null;
+  id: string = null;
+  name: string = null;
+  type: SendType = null;
+  text = new SendTextView();
+  file = new SendFileView();
+  expirationDate: Date = null;
+  creatorIdentifier: string = null;
 
-    constructor(s?: SendAccess) {
-        if (!s) {
-            return;
-        }
-
-        this.id = s.id;
-        this.type = s.type;
-        this.expirationDate = s.expirationDate;
-        this.creatorIdentifier = s.creatorIdentifier;
+  constructor(s?: SendAccess) {
+    if (!s) {
+      return;
     }
+
+    this.id = s.id;
+    this.type = s.type;
+    this.expirationDate = s.expirationDate;
+    this.creatorIdentifier = s.creatorIdentifier;
+  }
 }
diff --git a/jslib/common/src/models/view/sendFileView.ts b/jslib/common/src/models/view/sendFileView.ts
index a58df8f3..deff8700 100644
--- a/jslib/common/src/models/view/sendFileView.ts
+++ b/jslib/common/src/models/view/sendFileView.ts
@@ -1,31 +1,31 @@
-import { View } from './view';
+import { View } from "./view";
 
-import { SendFile } from '../domain/sendFile';
+import { SendFile } from "../domain/sendFile";
 
 export class SendFileView implements View {
-    id: string = null;
-    size: string = null;
-    sizeName: string = null;
-    fileName: string = null;
+  id: string = null;
+  size: string = null;
+  sizeName: string = null;
+  fileName: string = null;
 
-    constructor(f?: SendFile) {
-        if (!f) {
-            return;
-        }
-
-        this.id = f.id;
-        this.size = f.size;
-        this.sizeName = f.sizeName;
+  constructor(f?: SendFile) {
+    if (!f) {
+      return;
     }
 
-    get fileSize(): number {
-        try {
-            if (this.size != null) {
-                return parseInt(this.size, null);
-            }
-        } catch {
-            // Invalid file size.
-        }
-        return 0;
+    this.id = f.id;
+    this.size = f.size;
+    this.sizeName = f.sizeName;
+  }
+
+  get fileSize(): number {
+    try {
+      if (this.size != null) {
+        return parseInt(this.size, null);
+      }
+    } catch {
+      // Invalid file size.
     }
+    return 0;
+  }
 }
diff --git a/jslib/common/src/models/view/sendTextView.ts b/jslib/common/src/models/view/sendTextView.ts
index b6ec45ee..5c1f018e 100644
--- a/jslib/common/src/models/view/sendTextView.ts
+++ b/jslib/common/src/models/view/sendTextView.ts
@@ -1,20 +1,20 @@
-import { View } from './view';
+import { View } from "./view";
 
-import { SendText } from '../domain/sendText';
+import { SendText } from "../domain/sendText";
 
 export class SendTextView implements View {
-    text: string = null;
-    hidden: boolean;
+  text: string = null;
+  hidden: boolean;
 
-    constructor(t?: SendText) {
-        if (!t) {
-            return;
-        }
-
-        this.hidden = t.hidden;
+  constructor(t?: SendText) {
+    if (!t) {
+      return;
     }
 
-    get maskedText(): string {
-        return this.text != null ? '••••••••' : null;
-    }
+    this.hidden = t.hidden;
+  }
+
+  get maskedText(): string {
+    return this.text != null ? "••••••••" : null;
+  }
 }
diff --git a/jslib/common/src/models/view/sendView.ts b/jslib/common/src/models/view/sendView.ts
index 1730bce6..48aa887e 100644
--- a/jslib/common/src/models/view/sendView.ts
+++ b/jslib/common/src/models/view/sendView.ts
@@ -1,69 +1,69 @@
-import { SendType } from '../../enums/sendType';
-import { Utils } from '../../misc/utils';
+import { SendType } from "../../enums/sendType";
+import { Utils } from "../../misc/utils";
 
-import { Send } from '../domain/send';
-import { SymmetricCryptoKey } from '../domain/symmetricCryptoKey';
+import { Send } from "../domain/send";
+import { SymmetricCryptoKey } from "../domain/symmetricCryptoKey";
 
-import { SendFileView } from './sendFileView';
-import { SendTextView } from './sendTextView';
-import { View } from './view';
+import { SendFileView } from "./sendFileView";
+import { SendTextView } from "./sendTextView";
+import { View } from "./view";
 
 export class SendView implements View {
-    id: string = null;
-    accessId: string = null;
-    name: string = null;
-    notes: string = null;
-    key: ArrayBuffer;
-    cryptoKey: SymmetricCryptoKey;
-    type: SendType = null;
-    text = new SendTextView();
-    file = new SendFileView();
-    maxAccessCount?: number = null;
-    accessCount: number = 0;
-    revisionDate: Date = null;
-    deletionDate: Date = null;
-    expirationDate: Date = null;
-    password: string = null;
-    disabled: boolean = false;
-    hideEmail: boolean = false;
+  id: string = null;
+  accessId: string = null;
+  name: string = null;
+  notes: string = null;
+  key: ArrayBuffer;
+  cryptoKey: SymmetricCryptoKey;
+  type: SendType = null;
+  text = new SendTextView();
+  file = new SendFileView();
+  maxAccessCount?: number = null;
+  accessCount: number = 0;
+  revisionDate: Date = null;
+  deletionDate: Date = null;
+  expirationDate: Date = null;
+  password: string = null;
+  disabled: boolean = false;
+  hideEmail: boolean = false;
 
-    constructor(s?: Send) {
-        if (!s) {
-            return;
-        }
-
-        this.id = s.id;
-        this.accessId = s.accessId;
-        this.type = s.type;
-        this.maxAccessCount = s.maxAccessCount;
-        this.accessCount = s.accessCount;
-        this.revisionDate = s.revisionDate;
-        this.deletionDate = s.deletionDate;
-        this.expirationDate = s.expirationDate;
-        this.disabled = s.disabled;
-        this.password = s.password;
-        this.hideEmail = s.hideEmail;
+  constructor(s?: Send) {
+    if (!s) {
+      return;
     }
 
-    get urlB64Key(): string {
-        return Utils.fromBufferToUrlB64(this.key);
-    }
+    this.id = s.id;
+    this.accessId = s.accessId;
+    this.type = s.type;
+    this.maxAccessCount = s.maxAccessCount;
+    this.accessCount = s.accessCount;
+    this.revisionDate = s.revisionDate;
+    this.deletionDate = s.deletionDate;
+    this.expirationDate = s.expirationDate;
+    this.disabled = s.disabled;
+    this.password = s.password;
+    this.hideEmail = s.hideEmail;
+  }
 
-    get maxAccessCountReached(): boolean {
-        if (this.maxAccessCount == null) {
-            return false;
-        }
-        return this.accessCount >= this.maxAccessCount;
-    }
+  get urlB64Key(): string {
+    return Utils.fromBufferToUrlB64(this.key);
+  }
 
-    get expired(): boolean {
-        if (this.expirationDate == null) {
-            return false;
-        }
-        return this.expirationDate <= new Date();
+  get maxAccessCountReached(): boolean {
+    if (this.maxAccessCount == null) {
+      return false;
     }
+    return this.accessCount >= this.maxAccessCount;
+  }
 
-    get pendingDelete(): boolean {
-        return this.deletionDate <= new Date();
+  get expired(): boolean {
+    if (this.expirationDate == null) {
+      return false;
     }
+    return this.expirationDate <= new Date();
+  }
+
+  get pendingDelete(): boolean {
+    return this.deletionDate <= new Date();
+  }
 }
diff --git a/jslib/common/src/models/view/view.ts b/jslib/common/src/models/view/view.ts
index c295888e..1f16b3d5 100644
--- a/jslib/common/src/models/view/view.ts
+++ b/jslib/common/src/models/view/view.ts
@@ -1,2 +1 @@
-export class View {
-}
+export class View {}
diff --git a/jslib/common/src/services/api.service.ts b/jslib/common/src/services/api.service.ts
index 46fdc139..72b6d222 100644
--- a/jslib/common/src/services/api.service.ts
+++ b/jslib/common/src/services/api.service.ts
@@ -1,1776 +1,2508 @@
-import { DeviceType } from '../enums/deviceType';
-import { PolicyType } from '../enums/policyType';
-
-import { ApiService as ApiServiceAbstraction } from '../abstractions/api.service';
-import { EnvironmentService } from '../abstractions/environment.service';
-import { PlatformUtilsService } from '../abstractions/platformUtils.service';
-import { TokenService } from '../abstractions/token.service';
-
-import { AttachmentRequest } from '../models/request/attachmentRequest';
-import { BitPayInvoiceRequest } from '../models/request/bitPayInvoiceRequest';
-import { CipherBulkDeleteRequest } from '../models/request/cipherBulkDeleteRequest';
-import { CipherBulkMoveRequest } from '../models/request/cipherBulkMoveRequest';
-import { CipherBulkShareRequest } from '../models/request/cipherBulkShareRequest';
-import { CipherCollectionsRequest } from '../models/request/cipherCollectionsRequest';
-import { CipherCreateRequest } from '../models/request/cipherCreateRequest';
-import { CipherRequest } from '../models/request/cipherRequest';
-import { CipherShareRequest } from '../models/request/cipherShareRequest';
-import { CollectionRequest } from '../models/request/collectionRequest';
-import { DeleteRecoverRequest } from '../models/request/deleteRecoverRequest';
-import { EmailRequest } from '../models/request/emailRequest';
-import { EmailTokenRequest } from '../models/request/emailTokenRequest';
-import { EmergencyAccessAcceptRequest } from '../models/request/emergencyAccessAcceptRequest';
-import { EmergencyAccessConfirmRequest } from '../models/request/emergencyAccessConfirmRequest';
-import { EmergencyAccessInviteRequest } from '../models/request/emergencyAccessInviteRequest';
-import { EmergencyAccessPasswordRequest } from '../models/request/emergencyAccessPasswordRequest';
-import { EmergencyAccessUpdateRequest } from '../models/request/emergencyAccessUpdateRequest';
-import { EventRequest } from '../models/request/eventRequest';
-import { FolderRequest } from '../models/request/folderRequest';
-import { GroupRequest } from '../models/request/groupRequest';
-import { IapCheckRequest } from '../models/request/iapCheckRequest';
-import { ImportCiphersRequest } from '../models/request/importCiphersRequest';
-import { ImportDirectoryRequest } from '../models/request/importDirectoryRequest';
-import { ImportOrganizationCiphersRequest } from '../models/request/importOrganizationCiphersRequest';
-import { KdfRequest } from '../models/request/kdfRequest';
-import { KeysRequest } from '../models/request/keysRequest';
-import { OrganizationSponsorshipCreateRequest } from '../models/request/organization/organizationSponsorshipCreateRequest';
-import { OrganizationSponsorshipRedeemRequest } from '../models/request/organization/organizationSponsorshipRedeemRequest';
-import { OrganizationSsoRequest } from '../models/request/organization/organizationSsoRequest';
-import { OrganizationCreateRequest } from '../models/request/organizationCreateRequest';
-import { OrganizationImportRequest } from '../models/request/organizationImportRequest';
-import { OrganizationKeysRequest } from '../models/request/organizationKeysRequest';
-import { OrganizationSubscriptionUpdateRequest } from '../models/request/organizationSubscriptionUpdateRequest';
-import { OrganizationTaxInfoUpdateRequest } from '../models/request/organizationTaxInfoUpdateRequest';
-import { OrganizationUpdateRequest } from '../models/request/organizationUpdateRequest';
-import { OrganizationUpgradeRequest } from '../models/request/organizationUpgradeRequest';
-import { OrganizationUserAcceptRequest } from '../models/request/organizationUserAcceptRequest';
-import { OrganizationUserBulkConfirmRequest } from '../models/request/organizationUserBulkConfirmRequest';
-import { OrganizationUserBulkRequest } from '../models/request/organizationUserBulkRequest';
-import { OrganizationUserConfirmRequest } from '../models/request/organizationUserConfirmRequest';
-import { OrganizationUserInviteRequest } from '../models/request/organizationUserInviteRequest';
-import { OrganizationUserResetPasswordEnrollmentRequest } from '../models/request/organizationUserResetPasswordEnrollmentRequest';
-import { OrganizationUserResetPasswordRequest } from '../models/request/organizationUserResetPasswordRequest';
-import { OrganizationUserUpdateGroupsRequest } from '../models/request/organizationUserUpdateGroupsRequest';
-import { OrganizationUserUpdateRequest } from '../models/request/organizationUserUpdateRequest';
-import { PasswordHintRequest } from '../models/request/passwordHintRequest';
-import { PasswordRequest } from '../models/request/passwordRequest';
-import { PaymentRequest } from '../models/request/paymentRequest';
-import { PolicyRequest } from '../models/request/policyRequest';
-import { PreloginRequest } from '../models/request/preloginRequest';
-import { ProviderAddOrganizationRequest } from '../models/request/provider/providerAddOrganizationRequest';
-import { ProviderOrganizationCreateRequest } from '../models/request/provider/providerOrganizationCreateRequest';
-import { ProviderSetupRequest } from '../models/request/provider/providerSetupRequest';
-import { ProviderUpdateRequest } from '../models/request/provider/providerUpdateRequest';
-import { ProviderUserAcceptRequest } from '../models/request/provider/providerUserAcceptRequest';
-import { ProviderUserBulkConfirmRequest } from '../models/request/provider/providerUserBulkConfirmRequest';
-import { ProviderUserBulkRequest } from '../models/request/provider/providerUserBulkRequest';
-import { ProviderUserConfirmRequest } from '../models/request/provider/providerUserConfirmRequest';
-import { ProviderUserInviteRequest } from '../models/request/provider/providerUserInviteRequest';
-import { ProviderUserUpdateRequest } from '../models/request/provider/providerUserUpdateRequest';
-import { RegisterRequest } from '../models/request/registerRequest';
-import { SeatRequest } from '../models/request/seatRequest';
-import { SecretVerificationRequest } from '../models/request/secretVerificationRequest';
-import { SelectionReadOnlyRequest } from '../models/request/selectionReadOnlyRequest';
-import { SendAccessRequest } from '../models/request/sendAccessRequest';
-import { SendRequest } from '../models/request/sendRequest';
-import { SetPasswordRequest } from '../models/request/setPasswordRequest';
-import { StorageRequest } from '../models/request/storageRequest';
-import { TaxInfoUpdateRequest } from '../models/request/taxInfoUpdateRequest';
-import { TokenRequest } from '../models/request/tokenRequest';
-import { TwoFactorEmailRequest } from '../models/request/twoFactorEmailRequest';
-import { TwoFactorProviderRequest } from '../models/request/twoFactorProviderRequest';
-import { TwoFactorRecoveryRequest } from '../models/request/twoFactorRecoveryRequest';
-import { UpdateDomainsRequest } from '../models/request/updateDomainsRequest';
-import { UpdateKeyRequest } from '../models/request/updateKeyRequest';
-import { UpdateProfileRequest } from '../models/request/updateProfileRequest';
-import { UpdateTempPasswordRequest } from '../models/request/updateTempPasswordRequest';
-import { UpdateTwoFactorAuthenticatorRequest } from '../models/request/updateTwoFactorAuthenticatorRequest';
-import { UpdateTwoFactorDuoRequest } from '../models/request/updateTwoFactorDuoRequest';
-import { UpdateTwoFactorEmailRequest } from '../models/request/updateTwoFactorEmailRequest';
-import { UpdateTwoFactorWebAuthnDeleteRequest } from '../models/request/updateTwoFactorWebAuthnDeleteRequest';
-import { UpdateTwoFactorWebAuthnRequest } from '../models/request/updateTwoFactorWebAuthnRequest';
-import { UpdateTwoFactorYubioOtpRequest } from '../models/request/updateTwoFactorYubioOtpRequest';
-import { VerifyBankRequest } from '../models/request/verifyBankRequest';
-import { VerifyDeleteRecoverRequest } from '../models/request/verifyDeleteRecoverRequest';
-import { VerifyEmailRequest } from '../models/request/verifyEmailRequest';
-
-import { Utils } from '../misc/utils';
-
-import { ApiKeyResponse } from '../models/response/apiKeyResponse';
-import { AttachmentResponse } from '../models/response/attachmentResponse';
-import { AttachmentUploadDataResponse } from '../models/response/attachmentUploadDataResponse';
-import { BillingResponse } from '../models/response/billingResponse';
-import { BreachAccountResponse } from '../models/response/breachAccountResponse';
-import { CipherResponse } from '../models/response/cipherResponse';
+import { DeviceType } from "../enums/deviceType";
+import { PolicyType } from "../enums/policyType";
+
+import { ApiService as ApiServiceAbstraction } from "../abstractions/api.service";
+import { EnvironmentService } from "../abstractions/environment.service";
+import { PlatformUtilsService } from "../abstractions/platformUtils.service";
+import { TokenService } from "../abstractions/token.service";
+
+import { AttachmentRequest } from "../models/request/attachmentRequest";
+import { BitPayInvoiceRequest } from "../models/request/bitPayInvoiceRequest";
+import { CipherBulkDeleteRequest } from "../models/request/cipherBulkDeleteRequest";
+import { CipherBulkMoveRequest } from "../models/request/cipherBulkMoveRequest";
+import { CipherBulkShareRequest } from "../models/request/cipherBulkShareRequest";
+import { CipherCollectionsRequest } from "../models/request/cipherCollectionsRequest";
+import { CipherCreateRequest } from "../models/request/cipherCreateRequest";
+import { CipherRequest } from "../models/request/cipherRequest";
+import { CipherShareRequest } from "../models/request/cipherShareRequest";
+import { CollectionRequest } from "../models/request/collectionRequest";
+import { DeleteRecoverRequest } from "../models/request/deleteRecoverRequest";
+import { EmailRequest } from "../models/request/emailRequest";
+import { EmailTokenRequest } from "../models/request/emailTokenRequest";
+import { EmergencyAccessAcceptRequest } from "../models/request/emergencyAccessAcceptRequest";
+import { EmergencyAccessConfirmRequest } from "../models/request/emergencyAccessConfirmRequest";
+import { EmergencyAccessInviteRequest } from "../models/request/emergencyAccessInviteRequest";
+import { EmergencyAccessPasswordRequest } from "../models/request/emergencyAccessPasswordRequest";
+import { EmergencyAccessUpdateRequest } from "../models/request/emergencyAccessUpdateRequest";
+import { EventRequest } from "../models/request/eventRequest";
+import { FolderRequest } from "../models/request/folderRequest";
+import { GroupRequest } from "../models/request/groupRequest";
+import { IapCheckRequest } from "../models/request/iapCheckRequest";
+import { ImportCiphersRequest } from "../models/request/importCiphersRequest";
+import { ImportDirectoryRequest } from "../models/request/importDirectoryRequest";
+import { ImportOrganizationCiphersRequest } from "../models/request/importOrganizationCiphersRequest";
+import { KdfRequest } from "../models/request/kdfRequest";
+import { KeysRequest } from "../models/request/keysRequest";
+import { OrganizationSponsorshipCreateRequest } from "../models/request/organization/organizationSponsorshipCreateRequest";
+import { OrganizationSponsorshipRedeemRequest } from "../models/request/organization/organizationSponsorshipRedeemRequest";
+import { OrganizationSsoRequest } from "../models/request/organization/organizationSsoRequest";
+import { OrganizationCreateRequest } from "../models/request/organizationCreateRequest";
+import { OrganizationImportRequest } from "../models/request/organizationImportRequest";
+import { OrganizationKeysRequest } from "../models/request/organizationKeysRequest";
+import { OrganizationSsoUpdateRequest } from '../models/request/organizationSsoUpdateRequest';
+import { OrganizationSubscriptionUpdateRequest } from "../models/request/organizationSubscriptionUpdateRequest";
+import { OrganizationTaxInfoUpdateRequest } from "../models/request/organizationTaxInfoUpdateRequest";
+import { OrganizationUpdateRequest } from "../models/request/organizationUpdateRequest";
+import { OrganizationUpgradeRequest } from "../models/request/organizationUpgradeRequest";
+import { OrganizationUserAcceptRequest } from "../models/request/organizationUserAcceptRequest";
+import { OrganizationUserBulkConfirmRequest } from "../models/request/organizationUserBulkConfirmRequest";
+import { OrganizationUserBulkRequest } from "../models/request/organizationUserBulkRequest";
+import { OrganizationUserConfirmRequest } from "../models/request/organizationUserConfirmRequest";
+import { OrganizationUserInviteRequest } from "../models/request/organizationUserInviteRequest";
+import { OrganizationUserResetPasswordEnrollmentRequest } from "../models/request/organizationUserResetPasswordEnrollmentRequest";
+import { OrganizationUserResetPasswordRequest } from "../models/request/organizationUserResetPasswordRequest";
+import { OrganizationUserUpdateGroupsRequest } from "../models/request/organizationUserUpdateGroupsRequest";
+import { OrganizationUserUpdateRequest } from "../models/request/organizationUserUpdateRequest";
+import { PasswordHintRequest } from "../models/request/passwordHintRequest";
+import { PasswordRequest } from "../models/request/passwordRequest";
+import { PaymentRequest } from "../models/request/paymentRequest";
+import { PolicyRequest } from "../models/request/policyRequest";
+import { PreloginRequest } from "../models/request/preloginRequest";
+import { ProviderAddOrganizationRequest } from "../models/request/provider/providerAddOrganizationRequest";
+import { ProviderOrganizationCreateRequest } from "../models/request/provider/providerOrganizationCreateRequest";
+import { ProviderSetupRequest } from "../models/request/provider/providerSetupRequest";
+import { ProviderUpdateRequest } from "../models/request/provider/providerUpdateRequest";
+import { ProviderUserAcceptRequest } from "../models/request/provider/providerUserAcceptRequest";
+import { ProviderUserBulkConfirmRequest } from "../models/request/provider/providerUserBulkConfirmRequest";
+import { ProviderUserBulkRequest } from "../models/request/provider/providerUserBulkRequest";
+import { ProviderUserConfirmRequest } from "../models/request/provider/providerUserConfirmRequest";
+import { ProviderUserInviteRequest } from "../models/request/provider/providerUserInviteRequest";
+import { ProviderUserUpdateRequest } from "../models/request/provider/providerUserUpdateRequest";
+import { RegisterRequest } from "../models/request/registerRequest";
+import { SeatRequest } from "../models/request/seatRequest";
+import { SecretVerificationRequest } from "../models/request/secretVerificationRequest";
+import { SelectionReadOnlyRequest } from "../models/request/selectionReadOnlyRequest";
+import { SendAccessRequest } from "../models/request/sendAccessRequest";
+import { SendRequest } from "../models/request/sendRequest";
+import { SetPasswordRequest } from "../models/request/setPasswordRequest";
+import { StorageRequest } from "../models/request/storageRequest";
+import { TaxInfoUpdateRequest } from "../models/request/taxInfoUpdateRequest";
+import { TokenRequest } from "../models/request/tokenRequest";
+import { TwoFactorEmailRequest } from "../models/request/twoFactorEmailRequest";
+import { TwoFactorProviderRequest } from "../models/request/twoFactorProviderRequest";
+import { TwoFactorRecoveryRequest } from "../models/request/twoFactorRecoveryRequest";
+import { UpdateDomainsRequest } from "../models/request/updateDomainsRequest";
+import { UpdateKeyRequest } from "../models/request/updateKeyRequest";
+import { UpdateProfileRequest } from "../models/request/updateProfileRequest";
+import { UpdateTempPasswordRequest } from "../models/request/updateTempPasswordRequest";
+import { UpdateTwoFactorAuthenticatorRequest } from "../models/request/updateTwoFactorAuthenticatorRequest";
+import { UpdateTwoFactorDuoRequest } from "../models/request/updateTwoFactorDuoRequest";
+import { UpdateTwoFactorEmailRequest } from "../models/request/updateTwoFactorEmailRequest";
+import { UpdateTwoFactorWebAuthnDeleteRequest } from "../models/request/updateTwoFactorWebAuthnDeleteRequest";
+import { UpdateTwoFactorWebAuthnRequest } from "../models/request/updateTwoFactorWebAuthnRequest";
+import { UpdateTwoFactorYubioOtpRequest } from "../models/request/updateTwoFactorYubioOtpRequest";
+import { VerifyBankRequest } from "../models/request/verifyBankRequest";
+import { VerifyDeleteRecoverRequest } from "../models/request/verifyDeleteRecoverRequest";
+import { VerifyEmailRequest } from "../models/request/verifyEmailRequest";
+
+import { Utils } from "../misc/utils";
+
+import { ApiKeyResponse } from "../models/response/apiKeyResponse";
+import { AttachmentResponse } from "../models/response/attachmentResponse";
+import { AttachmentUploadDataResponse } from "../models/response/attachmentUploadDataResponse";
+import { BillingResponse } from "../models/response/billingResponse";
+import { BreachAccountResponse } from "../models/response/breachAccountResponse";
+import { CipherResponse } from "../models/response/cipherResponse";
 import {
-    CollectionGroupDetailsResponse,
-    CollectionResponse,
-} from '../models/response/collectionResponse';
-import { DomainsResponse } from '../models/response/domainsResponse';
+  CollectionGroupDetailsResponse,
+  CollectionResponse,
+} from "../models/response/collectionResponse";
+import { DomainsResponse } from "../models/response/domainsResponse";
 import {
-    EmergencyAccessGranteeDetailsResponse,
-    EmergencyAccessGrantorDetailsResponse,
-    EmergencyAccessTakeoverResponse,
-    EmergencyAccessViewResponse
-} from '../models/response/emergencyAccessResponse';
-import { ErrorResponse } from '../models/response/errorResponse';
-import { EventResponse } from '../models/response/eventResponse';
-import { FolderResponse } from '../models/response/folderResponse';
+  EmergencyAccessGranteeDetailsResponse,
+  EmergencyAccessGrantorDetailsResponse,
+  EmergencyAccessTakeoverResponse,
+  EmergencyAccessViewResponse,
+} from "../models/response/emergencyAccessResponse";
+import { ErrorResponse } from "../models/response/errorResponse";
+import { EventResponse } from "../models/response/eventResponse";
+import { FolderResponse } from "../models/response/folderResponse";
+import { GroupDetailsResponse, GroupResponse } from "../models/response/groupResponse";
+import { IdentityCaptchaResponse } from "../models/response/identityCaptchaResponse";
+import { IdentityTokenResponse } from "../models/response/identityTokenResponse";
+import { IdentityTwoFactorResponse } from "../models/response/identityTwoFactorResponse";
+import { ListResponse } from "../models/response/listResponse";
+import { OrganizationSsoResponse } from "../models/response/organization/organizationSsoResponse";
+import { OrganizationAutoEnrollStatusResponse } from "../models/response/organizationAutoEnrollStatusResponse";
+import { OrganizationKeysResponse } from "../models/response/organizationKeysResponse";
+import { OrganizationResponse } from "../models/response/organizationResponse";
+import { OrganizationSubscriptionResponse } from "../models/response/organizationSubscriptionResponse";
+import { OrganizationUserBulkPublicKeyResponse } from "../models/response/organizationUserBulkPublicKeyResponse";
+import { OrganizationUserBulkResponse } from "../models/response/organizationUserBulkResponse";
 import {
-    GroupDetailsResponse,
-    GroupResponse,
-} from '../models/response/groupResponse';
-import { IdentityCaptchaResponse } from '../models/response/identityCaptchaResponse';
-import { IdentityTokenResponse } from '../models/response/identityTokenResponse';
-import { IdentityTwoFactorResponse } from '../models/response/identityTwoFactorResponse';
-import { ListResponse } from '../models/response/listResponse';
-import { OrganizationSsoResponse } from '../models/response/organization/organizationSsoResponse';
-import { OrganizationAutoEnrollStatusResponse } from '../models/response/organizationAutoEnrollStatusResponse';
-import { OrganizationKeysResponse } from '../models/response/organizationKeysResponse';
-import { OrganizationResponse } from '../models/response/organizationResponse';
-import { OrganizationSubscriptionResponse } from '../models/response/organizationSubscriptionResponse';
-import { OrganizationUserBulkPublicKeyResponse } from '../models/response/organizationUserBulkPublicKeyResponse';
-import { OrganizationUserBulkResponse } from '../models/response/organizationUserBulkResponse';
+  OrganizationUserDetailsResponse,
+  OrganizationUserResetPasswordDetailsReponse,
+  OrganizationUserUserDetailsResponse,
+} from "../models/response/organizationUserResponse";
+import { PaymentResponse } from "../models/response/paymentResponse";
+import { PlanResponse } from "../models/response/planResponse";
+import { PolicyResponse } from "../models/response/policyResponse";
+import { PreloginResponse } from "../models/response/preloginResponse";
+import { ProfileResponse } from "../models/response/profileResponse";
 import {
-    OrganizationUserDetailsResponse,
-    OrganizationUserResetPasswordDetailsReponse,
-    OrganizationUserUserDetailsResponse,
-} from '../models/response/organizationUserResponse';
-import { PaymentResponse } from '../models/response/paymentResponse';
-import { PlanResponse } from '../models/response/planResponse';
-import { PolicyResponse } from '../models/response/policyResponse';
-import { PreloginResponse } from '../models/response/preloginResponse';
-import { ProfileResponse } from '../models/response/profileResponse';
-import { ProviderOrganizationOrganizationDetailsResponse, ProviderOrganizationResponse } from '../models/response/provider/providerOrganizationResponse';
-import { ProviderResponse } from '../models/response/provider/providerResponse';
-import { ProviderUserBulkPublicKeyResponse } from '../models/response/provider/providerUserBulkPublicKeyResponse';
-import { ProviderUserBulkResponse } from '../models/response/provider/providerUserBulkResponse';
+  ProviderOrganizationOrganizationDetailsResponse,
+  ProviderOrganizationResponse,
+} from "../models/response/provider/providerOrganizationResponse";
+import { ProviderResponse } from "../models/response/provider/providerResponse";
+import { ProviderUserBulkPublicKeyResponse } from "../models/response/provider/providerUserBulkPublicKeyResponse";
+import { ProviderUserBulkResponse } from "../models/response/provider/providerUserBulkResponse";
 import {
-    ProviderUserResponse,
-    ProviderUserUserDetailsResponse
-} from '../models/response/provider/providerUserResponse';
-import { SelectionReadOnlyResponse } from '../models/response/selectionReadOnlyResponse';
-import { SendAccessResponse } from '../models/response/sendAccessResponse';
-import { SendFileDownloadDataResponse } from '../models/response/sendFileDownloadDataResponse';
-import { SendFileUploadDataResponse } from '../models/response/sendFileUploadDataResponse';
-import { SendResponse } from '../models/response/sendResponse';
-import { SubscriptionResponse } from '../models/response/subscriptionResponse';
-import { SyncResponse } from '../models/response/syncResponse';
-import { TaxInfoResponse } from '../models/response/taxInfoResponse';
-import { TaxRateResponse } from '../models/response/taxRateResponse';
-import { TwoFactorAuthenticatorResponse } from '../models/response/twoFactorAuthenticatorResponse';
-import { TwoFactorDuoResponse } from '../models/response/twoFactorDuoResponse';
-import { TwoFactorEmailResponse } from '../models/response/twoFactorEmailResponse';
-import { TwoFactorProviderResponse } from '../models/response/twoFactorProviderResponse';
-import { TwoFactorRecoverResponse } from '../models/response/twoFactorRescoverResponse';
-import { TwoFactorWebAuthnResponse } from '../models/response/twoFactorWebAuthnResponse';
-import { ChallengeResponse } from '../models/response/twoFactorWebAuthnResponse';
-import { TwoFactorYubiKeyResponse } from '../models/response/twoFactorYubiKeyResponse';
-import { UserKeyResponse } from '../models/response/userKeyResponse';
-
-import { SetKeyConnectorKeyRequest } from '../models/request/account/setKeyConnectorKeyRequest';
-import { VerifyOTPRequest } from '../models/request/account/verifyOTPRequest';
-import { KeyConnectorUserKeyRequest } from '../models/request/keyConnectorUserKeyRequest';
-import { KeyConnectorUserKeyResponse } from '../models/response/keyConnectorUserKeyResponse';
-import { SendAccessView } from '../models/view/sendAccessView';
+  ProviderUserResponse,
+  ProviderUserUserDetailsResponse,
+} from "../models/response/provider/providerUserResponse";
+import { SelectionReadOnlyResponse } from "../models/response/selectionReadOnlyResponse";
+import { SendAccessResponse } from "../models/response/sendAccessResponse";
+import { SendFileDownloadDataResponse } from "../models/response/sendFileDownloadDataResponse";
+import { SendFileUploadDataResponse } from "../models/response/sendFileUploadDataResponse";
+import { SendResponse } from "../models/response/sendResponse";
+import { SsoConfigResponse } from '../models/response/ssoConfigResponse';
+import { SubscriptionResponse } from "../models/response/subscriptionResponse";
+import { SyncResponse } from "../models/response/syncResponse";
+import { TaxInfoResponse } from "../models/response/taxInfoResponse";
+import { TaxRateResponse } from "../models/response/taxRateResponse";
+import { TwoFactorAuthenticatorResponse } from "../models/response/twoFactorAuthenticatorResponse";
+import { TwoFactorDuoResponse } from "../models/response/twoFactorDuoResponse";
+import { TwoFactorEmailResponse } from "../models/response/twoFactorEmailResponse";
+import { TwoFactorProviderResponse } from "../models/response/twoFactorProviderResponse";
+import { TwoFactorRecoverResponse } from "../models/response/twoFactorRescoverResponse";
+import { TwoFactorWebAuthnResponse } from "../models/response/twoFactorWebAuthnResponse";
+import { ChallengeResponse } from "../models/response/twoFactorWebAuthnResponse";
+import { TwoFactorYubiKeyResponse } from "../models/response/twoFactorYubiKeyResponse";
+import { UserKeyResponse } from "../models/response/userKeyResponse";
+
+import { SetKeyConnectorKeyRequest } from "../models/request/account/setKeyConnectorKeyRequest";
+import { VerifyOTPRequest } from "../models/request/account/verifyOTPRequest";
+import { KeyConnectorUserKeyRequest } from "../models/request/keyConnectorUserKeyRequest";
+import { KeyConnectorUserKeyResponse } from "../models/response/keyConnectorUserKeyResponse";
+import { SendAccessView } from "../models/view/sendAccessView";
 
-
-
-export class ApiService implements ApiServiceAbstraction {
-    protected apiKeyRefresh: (clientId: string, clientSecret: string) => Promise<any>;
-    private device: DeviceType;
-    private deviceType: string;
-    private isWebClient = false;
-    private isDesktopClient = false;
-
-    constructor(private tokenService: TokenService, private platformUtilsService: PlatformUtilsService,
-        private environmentService: EnvironmentService, private logoutCallback: (expired: boolean) => Promise<void>,
-        private customUserAgent: string = null) {
-        this.device = platformUtilsService.getDevice();
-        this.deviceType = this.device.toString();
-        this.isWebClient = this.device === DeviceType.IEBrowser || this.device === DeviceType.ChromeBrowser ||
-            this.device === DeviceType.EdgeBrowser || this.device === DeviceType.FirefoxBrowser ||
-            this.device === DeviceType.OperaBrowser || this.device === DeviceType.SafariBrowser ||
-            this.device === DeviceType.UnknownBrowser || this.device === DeviceType.VivaldiBrowser;
-        this.isDesktopClient = this.device === DeviceType.WindowsDesktop || this.device === DeviceType.MacOsDesktop ||
-            this.device === DeviceType.LinuxDesktop;
-    }
-
-    // Auth APIs
-
-    async postIdentityToken(request: TokenRequest): Promise<IdentityTokenResponse | IdentityTwoFactorResponse | IdentityCaptchaResponse> {
-        const headers = new Headers({
-            'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8',
-            'Accept': 'application/json',
-            'Device-Type': this.deviceType,
-        });
-        if (this.customUserAgent != null) {
-            headers.set('User-Agent', this.customUserAgent);
-        }
-        request.alterIdentityTokenHeaders(headers);
-        const response = await this.fetch(new Request(this.environmentService.getIdentityUrl() + '/connect/token', {
-            body: this.qsStringify(request.toIdentityToken(request.clientId ?? this.platformUtilsService.identityClientId)),
-            credentials: this.getCredentials(),
-            cache: 'no-store',
-            headers: headers,
-            method: 'POST',
-        }));
-
-        let responseJson: any = null;
-        if (this.isJsonResponse(response)) {
-            responseJson = await response.json();
-        }
-
-        if (responseJson != null) {
-            if (response.status === 200) {
-                return new IdentityTokenResponse(responseJson);
-            } else if (response.status === 400 && responseJson.TwoFactorProviders2 &&
-                Object.keys(responseJson.TwoFactorProviders2).length) {
-                await this.tokenService.clearTwoFactorToken(request.email);
-                return new IdentityTwoFactorResponse(responseJson);
-            } else if (response.status === 400 && responseJson.HCaptcha_SiteKey &&
-                Object.keys(responseJson.HCaptcha_SiteKey).length) {
-                return new IdentityCaptchaResponse(responseJson);
-            }
-        }
-
-        return Promise.reject(new ErrorResponse(responseJson, response.status, true));
-    }
-
-    async refreshIdentityToken(): Promise<any> {
-        try {
-            await this.doAuthRefresh();
-        } catch (e) {
-            return Promise.reject(null);
-        }
-    }
-
-    // Account APIs
-
-    async getProfile(): Promise<ProfileResponse> {
-        const r = await this.send('GET', '/accounts/profile', null, true, true);
-        return new ProfileResponse(r);
-    }
-
-    async getUserBilling(): Promise<BillingResponse> {
-        const r = await this.send('GET', '/accounts/billing', null, true, true);
-        return new BillingResponse(r);
-    }
-
-    async getUserSubscription(): Promise<SubscriptionResponse> {
-        const r = await this.send('GET', '/accounts/subscription', null, true, true);
-        return new SubscriptionResponse(r);
-    }
-
-    async getTaxInfo(): Promise<TaxInfoResponse> {
-        const r = await this.send('GET', '/accounts/tax', null, true, true);
-        return new TaxInfoResponse(r);
-    }
-
-    async putProfile(request: UpdateProfileRequest): Promise<ProfileResponse> {
-        const r = await this.send('PUT', '/accounts/profile', request, true, true);
-        return new ProfileResponse(r);
-    }
-
-    putTaxInfo(request: TaxInfoUpdateRequest): Promise<any> {
-        return this.send('PUT', '/accounts/tax', request, true, false);
-    }
-
-    async postPrelogin(request: PreloginRequest): Promise<PreloginResponse> {
-        const r = await this.send('POST', '/accounts/prelogin', request, false, true);
-        return new PreloginResponse(r);
-    }
-
-    postEmailToken(request: EmailTokenRequest): Promise<any> {
-        return this.send('POST', '/accounts/email-token', request, true, false);
-    }
-
-    postEmail(request: EmailRequest): Promise<any> {
-        return this.send('POST', '/accounts/email', request, true, false);
-    }
-
-    postPassword(request: PasswordRequest): Promise<any> {
-        return this.send('POST', '/accounts/password', request, true, false);
-    }
-
-    setPassword(request: SetPasswordRequest): Promise<any> {
-        return this.send('POST', '/accounts/set-password', request, true, false);
-    }
-
-    postSetKeyConnectorKey(request: SetKeyConnectorKeyRequest): Promise<any> {
-        return this.send('POST', '/accounts/set-key-connector-key', request, true, false);
-    }
-
-    postSecurityStamp(request: SecretVerificationRequest): Promise<any> {
-        return this.send('POST', '/accounts/security-stamp', request, true, false);
-    }
-
-    deleteAccount(request: SecretVerificationRequest): Promise<any> {
-        return this.send('DELETE', '/accounts', request, true, false);
-    }
-
-    async getAccountRevisionDate(): Promise<number> {
-        const r = await this.send('GET', '/accounts/revision-date', null, true, true);
-        return r as number;
-    }
-
-    postPasswordHint(request: PasswordHintRequest): Promise<any> {
-        return this.send('POST', '/accounts/password-hint', request, false, false);
-    }
-
-    postRegister(request: RegisterRequest): Promise<any> {
-        return this.send('POST', '/accounts/register', request, false, false);
-    }
-
-    async postPremium(data: FormData): Promise<PaymentResponse> {
-        const r = await this.send('POST', '/accounts/premium', data, true, true);
-        return new PaymentResponse(r);
-    }
-
-    async postIapCheck(request: IapCheckRequest): Promise<any> {
-        return this.send('POST', '/accounts/iap-check', request, true, false);
-    }
-
-    postReinstatePremium(): Promise<any> {
-        return this.send('POST', '/accounts/reinstate-premium', null, true, false);
-    }
-
-    postCancelPremium(): Promise<any> {
-        return this.send('POST', '/accounts/cancel-premium', null, true, false);
-    }
-
-    async postAccountStorage(request: StorageRequest): Promise<PaymentResponse> {
-        const r = await this.send('POST', '/accounts/storage', request, true, true);
-        return new PaymentResponse(r);
-    }
-
-    postAccountPayment(request: PaymentRequest): Promise<any> {
-        return this.send('POST', '/accounts/payment', request, true, false);
-    }
-
-    postAccountLicense(data: FormData): Promise<any> {
-        return this.send('POST', '/accounts/license', data, true, false);
-    }
-
-    postAccountKeys(request: KeysRequest): Promise<any> {
-        return this.send('POST', '/accounts/keys', request, true, false);
-    }
-
-    postAccountKey(request: UpdateKeyRequest): Promise<any> {
-        return this.send('POST', '/accounts/key', request, true, false);
-    }
-
-    postAccountVerifyEmail(): Promise<any> {
-        return this.send('POST', '/accounts/verify-email', null, true, false);
-    }
-
-    postAccountVerifyEmailToken(request: VerifyEmailRequest): Promise<any> {
-        return this.send('POST', '/accounts/verify-email-token', request, false, false);
-    }
-
-    postAccountVerifyPassword(request: SecretVerificationRequest): Promise<any> {
-        return this.send('POST', '/accounts/verify-password', request, true, false);
-    }
-
-    postAccountRecoverDelete(request: DeleteRecoverRequest): Promise<any> {
-        return this.send('POST', '/accounts/delete-recover', request, false, false);
-    }
-
-    postAccountRecoverDeleteToken(request: VerifyDeleteRecoverRequest): Promise<any> {
-        return this.send('POST', '/accounts/delete-recover-token', request, false, false);
-    }
-
-    postAccountKdf(request: KdfRequest): Promise<any> {
-        return this.send('POST', '/accounts/kdf', request, true, false);
-    }
-
-    async deleteSsoUser(organizationId: string): Promise<any> {
-        return this.send('DELETE', '/accounts/sso/' + organizationId, null, true, false);
-    }
-
-    async getSsoUserIdentifier(): Promise<string> {
-        return this.send('GET', '/accounts/sso/user-identifier', null, true, true);
-    }
-
-    async postUserApiKey(id: string, request: SecretVerificationRequest): Promise<ApiKeyResponse> {
-        const r = await this.send('POST', '/accounts/api-key', request, true, true);
-        return new ApiKeyResponse(r);
-    }
-
-    async postUserRotateApiKey(id: string, request: SecretVerificationRequest): Promise<ApiKeyResponse> {
-        const r = await this.send('POST', '/accounts/rotate-api-key', request, true, true);
-        return new ApiKeyResponse(r);
-    }
-
-    putUpdateTempPassword(request: UpdateTempPasswordRequest): Promise<any> {
-        return this.send('PUT', '/accounts/update-temp-password', request, true, false);
-    }
-
-    postAccountRequestOTP(): Promise<void> {
-        return this.send('POST', '/accounts/request-otp', null, true, false);
-    }
-
-    postAccountVerifyOTP(request: VerifyOTPRequest): Promise<void> {
-        return this.send('POST', '/accounts/verify-otp', request, true, false);
-    }
-
-    postConvertToKeyConnector(): Promise<void> {
-        return this.send('POST', '/accounts/convert-to-key-connector', null, true, false);
-    }
-
-    // Folder APIs
-
-    async getFolder(id: string): Promise<FolderResponse> {
-        const r = await this.send('GET', '/folders/' + id, null, true, true);
-        return new FolderResponse(r);
-    }
-
-    async postFolder(request: FolderRequest): Promise<FolderResponse> {
-        const r = await this.send('POST', '/folders', request, true, true);
-        return new FolderResponse(r);
-    }
-
-    async putFolder(id: string, request: FolderRequest): Promise<FolderResponse> {
-        const r = await this.send('PUT', '/folders/' + id, request, true, true);
-        return new FolderResponse(r);
-    }
-
-    deleteFolder(id: string): Promise<any> {
-        return this.send('DELETE', '/folders/' + id, null, true, false);
-    }
-
-    // Send APIs
-
-    async getSend(id: string): Promise<SendResponse> {
-        const r = await this.send('GET', '/sends/' + id, null, true, true);
-        return new SendResponse(r);
-    }
-
-    async postSendAccess(id: string, request: SendAccessRequest, apiUrl?: string): Promise<SendAccessResponse> {
-        const addSendIdHeader = (headers: Headers) => {
-            headers.set('Send-Id', id);
-        };
-        const r = await this.send('POST', '/sends/access/' + id, request, false, true, apiUrl, addSendIdHeader);
-        return new SendAccessResponse(r);
-    }
-
-    async getSendFileDownloadData(send: SendAccessView, request: SendAccessRequest, apiUrl?: string): Promise<SendFileDownloadDataResponse> {
-        const addSendIdHeader = (headers: Headers) => {
-            headers.set('Send-Id', send.id);
-        };
-        const r = await this.send('POST', '/sends/' + send.id + '/access/file/' + send.file.id, request, false, true,
-            apiUrl, addSendIdHeader);
-        return new SendFileDownloadDataResponse(r);
-    }
-
-    async getSends(): Promise<ListResponse<SendResponse>> {
-        const r = await this.send('GET', '/sends', null, true, true);
-        return new ListResponse(r, SendResponse);
-    }
-
-    async postSend(request: SendRequest): Promise<SendResponse> {
-        const r = await this.send('POST', '/sends', request, true, true);
-        return new SendResponse(r);
-    }
-
-    async postFileTypeSend(request: SendRequest): Promise<SendFileUploadDataResponse> {
-        const r = await this.send('POST', '/sends/file/v2', request, true, true);
-        return new SendFileUploadDataResponse(r);
-    }
-
-    async renewSendFileUploadUrl(sendId: string, fileId: string): Promise<SendFileUploadDataResponse> {
-        const r = await this.send('GET', '/sends/' + sendId + '/file/' + fileId, null, true, true);
-        return new SendFileUploadDataResponse(r);
-    }
-
-    postSendFile(sendId: string, fileId: string, data: FormData): Promise<any> {
-        return this.send('POST', '/sends/' + sendId + '/file/' + fileId, data, true, false);
-    }
-
-    /**
-     * @deprecated Mar 25 2021: This method has been deprecated in favor of direct uploads.
-     * This method still exists for backward compatibility with old server versions.
-     */
-    async postSendFileLegacy(data: FormData): Promise<SendResponse> {
-        const r = await this.send('POST', '/sends/file', data, true, true);
-        return new SendResponse(r);
-    }
-
-    async putSend(id: string, request: SendRequest): Promise<SendResponse> {
-        const r = await this.send('PUT', '/sends/' + id, request, true, true);
-        return new SendResponse(r);
-    }
-
-    async putSendRemovePassword(id: string): Promise<SendResponse> {
-        const r = await this.send('PUT', '/sends/' + id + '/remove-password', null, true, true);
-        return new SendResponse(r);
-    }
-
-    deleteSend(id: string): Promise<any> {
-        return this.send('DELETE', '/sends/' + id, null, true, false);
-    }
-
-    // Cipher APIs
-
-    async getCipher(id: string): Promise<CipherResponse> {
-        const r = await this.send('GET', '/ciphers/' + id, null, true, true);
-        return new CipherResponse(r);
-    }
-
-    async getCipherAdmin(id: string): Promise<CipherResponse> {
-        const r = await this.send('GET', '/ciphers/' + id + '/admin', null, true, true);
-        return new CipherResponse(r);
-    }
-
-    async getCiphersOrganization(organizationId: string): Promise<ListResponse<CipherResponse>> {
-        const r = await this.send('GET', '/ciphers/organization-details?organizationId=' + organizationId,
-            null, true, true);
-        return new ListResponse(r, CipherResponse);
-    }
-
-    async postCipher(request: CipherRequest): Promise<CipherResponse> {
-        const r = await this.send('POST', '/ciphers', request, true, true);
-        return new CipherResponse(r);
-    }
-
-    async postCipherCreate(request: CipherCreateRequest): Promise<CipherResponse> {
-        const r = await this.send('POST', '/ciphers/create', request, true, true);
-        return new CipherResponse(r);
-    }
-
-    async postCipherAdmin(request: CipherCreateRequest): Promise<CipherResponse> {
-        const r = await this.send('POST', '/ciphers/admin', request, true, true);
-        return new CipherResponse(r);
-    }
-
-    async putCipher(id: string, request: CipherRequest): Promise<CipherResponse> {
-        const r = await this.send('PUT', '/ciphers/' + id, request, true, true);
-        return new CipherResponse(r);
-    }
-
-    async putCipherAdmin(id: string, request: CipherRequest): Promise<CipherResponse> {
-        const r = await this.send('PUT', '/ciphers/' + id + '/admin', request, true, true);
-        return new CipherResponse(r);
-    }
-
-    deleteCipher(id: string): Promise<any> {
-        return this.send('DELETE', '/ciphers/' + id, null, true, false);
-    }
-
-    deleteCipherAdmin(id: string): Promise<any> {
-        return this.send('DELETE', '/ciphers/' + id + '/admin', null, true, false);
-    }
-
-    deleteManyCiphers(request: CipherBulkDeleteRequest): Promise<any> {
-        return this.send('DELETE', '/ciphers', request, true, false);
-    }
-
-    deleteManyCiphersAdmin(request: CipherBulkDeleteRequest): Promise<any> {
-        return this.send('DELETE', '/ciphers/admin', request, true, false);
-    }
-
-    putMoveCiphers(request: CipherBulkMoveRequest): Promise<any> {
-        return this.send('PUT', '/ciphers/move', request, true, false);
-    }
-
-    async putShareCipher(id: string, request: CipherShareRequest): Promise<CipherResponse> {
-        const r = await this.send('PUT', '/ciphers/' + id + '/share', request, true, true);
-        return new CipherResponse(r);
-    }
-
-    putShareCiphers(request: CipherBulkShareRequest): Promise<any> {
-        return this.send('PUT', '/ciphers/share', request, true, false);
-    }
-
-    putCipherCollections(id: string, request: CipherCollectionsRequest): Promise<any> {
-        return this.send('PUT', '/ciphers/' + id + '/collections', request, true, false);
-    }
-
-    putCipherCollectionsAdmin(id: string, request: CipherCollectionsRequest): Promise<any> {
-        return this.send('PUT', '/ciphers/' + id + '/collections-admin', request, true, false);
-    }
-
-    postPurgeCiphers(request: SecretVerificationRequest, organizationId: string = null): Promise<any> {
-        let path = '/ciphers/purge';
-        if (organizationId != null) {
-            path += '?organizationId=' + organizationId;
-        }
-        return this.send('POST', path, request, true, false);
-    }
-
-    postImportCiphers(request: ImportCiphersRequest): Promise<any> {
-        return this.send('POST', '/ciphers/import', request, true, false);
-    }
-
-    postImportOrganizationCiphers(organizationId: string, request: ImportOrganizationCiphersRequest): Promise<any> {
-        return this.send('POST', '/ciphers/import-organization?organizationId=' + organizationId, request, true, false);
-    }
-
-    putDeleteCipher(id: string): Promise<any> {
-        return this.send('PUT', '/ciphers/' + id + '/delete', null, true, false);
-    }
-
-    putDeleteCipherAdmin(id: string): Promise<any> {
-        return this.send('PUT', '/ciphers/' + id + '/delete-admin', null, true, false);
-    }
-
-    putDeleteManyCiphers(request: CipherBulkDeleteRequest): Promise<any> {
-        return this.send('PUT', '/ciphers/delete', request, true, false);
-    }
-
-    putDeleteManyCiphersAdmin(request: CipherBulkDeleteRequest): Promise<any> {
-        return this.send('PUT', '/ciphers/delete-admin', request, true, false);
-    }
-
-    async putRestoreCipher(id: string): Promise<CipherResponse> {
-        const r = await this.send('PUT', '/ciphers/' + id + '/restore', null, true, true);
-        return new CipherResponse(r);
-    }
-
-    async putRestoreCipherAdmin(id: string): Promise<CipherResponse> {
-        const r = await this.send('PUT', '/ciphers/' + id + '/restore-admin', null, true, true);
-        return new CipherResponse(r);
-    }
-
-    async putRestoreManyCiphers(request: CipherBulkDeleteRequest): Promise<ListResponse<CipherResponse>> {
-        const r = await this.send('PUT', '/ciphers/restore', request, true, true);
-        return new ListResponse<CipherResponse>(r, CipherResponse);
-    }
-
-    // Attachments APIs
-
-    async getAttachmentData(cipherId: string, attachmentId: string, emergencyAccessId?: string): Promise<AttachmentResponse> {
-        const path = (emergencyAccessId != null ?
-            '/emergency-access/' + emergencyAccessId + '/' :
-            '/ciphers/') + cipherId + '/attachment/' + attachmentId;
-        const r = await this.send('GET', path, null, true, true);
-        return new AttachmentResponse(r);
-    }
-
-    async postCipherAttachment(id: string, request: AttachmentRequest): Promise<AttachmentUploadDataResponse> {
-        const r = await this.send('POST', '/ciphers/' + id + '/attachment/v2', request, true, true);
-        return new AttachmentUploadDataResponse(r);
-    }
-
-    /**
-     * @deprecated Mar 25 2021: This method has been deprecated in favor of direct uploads.
-     * This method still exists for backward compatibility with old server versions.
-     */
-    async postCipherAttachmentLegacy(id: string, data: FormData): Promise<CipherResponse> {
-        const r = await this.send('POST', '/ciphers/' + id + '/attachment', data, true, true);
-        return new CipherResponse(r);
-    }
-
-    /**
-     * @deprecated Mar 25 2021: This method has been deprecated in favor of direct uploads.
-     * This method still exists for backward compatibility with old server versions.
-     */
-    async postCipherAttachmentAdminLegacy(id: string, data: FormData): Promise<CipherResponse> {
-        const r = await this.send('POST', '/ciphers/' + id + '/attachment-admin', data, true, true);
-        return new CipherResponse(r);
-    }
-
-    deleteCipherAttachment(id: string, attachmentId: string): Promise<any> {
-        return this.send('DELETE', '/ciphers/' + id + '/attachment/' + attachmentId, null, true, false);
-    }
-
-    deleteCipherAttachmentAdmin(id: string, attachmentId: string): Promise<any> {
-        return this.send('DELETE', '/ciphers/' + id + '/attachment/' + attachmentId + '/admin', null, true, false);
-    }
-
-    postShareCipherAttachment(id: string, attachmentId: string, data: FormData,
-        organizationId: string): Promise<any> {
-        return this.send('POST', '/ciphers/' + id + '/attachment/' +
-            attachmentId + '/share?organizationId=' + organizationId, data, true, false);
-    }
-
-    async renewAttachmentUploadUrl(id: string, attachmentId: string): Promise<AttachmentUploadDataResponse> {
-        const r = await this.send('GET', '/ciphers/' + id + '/attachment/' + attachmentId + '/renew', null, true, true);
-        return new AttachmentUploadDataResponse(r);
-    }
-
-    postAttachmentFile(id: string, attachmentId: string, data: FormData): Promise<any> {
-        return this.send('POST', '/ciphers/' + id + '/attachment/' + attachmentId, data, true, false);
-    }
-
-    // Collections APIs
-
-    async getCollectionDetails(organizationId: string, id: string): Promise<CollectionGroupDetailsResponse> {
-        const r = await this.send('GET', '/organizations/' + organizationId + '/collections/' + id + '/details',
-            null, true, true);
-        return new CollectionGroupDetailsResponse(r);
-    }
-
-    async getUserCollections(): Promise<ListResponse<CollectionResponse>> {
-        const r = await this.send('GET', '/collections', null, true, true);
-        return new ListResponse(r, CollectionResponse);
-    }
-
-    async getCollections(organizationId: string): Promise<ListResponse<CollectionResponse>> {
-        const r = await this.send('GET', '/organizations/' + organizationId + '/collections', null, true, true);
-        return new ListResponse(r, CollectionResponse);
-    }
-
-    async getCollectionUsers(organizationId: string, id: string): Promise<SelectionReadOnlyResponse[]> {
-        const r = await this.send('GET', '/organizations/' + organizationId + '/collections/' + id + '/users',
-            null, true, true);
-        return r.map((dr: any) => new SelectionReadOnlyResponse(dr));
-    }
-
-    async postCollection(organizationId: string, request: CollectionRequest): Promise<CollectionResponse> {
-        const r = await this.send('POST', '/organizations/' + organizationId + '/collections', request, true, true);
-        return new CollectionResponse(r);
-    }
-
-    async putCollection(organizationId: string, id: string, request: CollectionRequest): Promise<CollectionResponse> {
-        const r = await this.send('PUT', '/organizations/' + organizationId + '/collections/' + id,
-            request, true, true);
-        return new CollectionResponse(r);
-    }
-
-    async putCollectionUsers(organizationId: string, id: string, request: SelectionReadOnlyRequest[]): Promise<any> {
-        await this.send('PUT', '/organizations/' + organizationId + '/collections/' + id + '/users',
-            request, true, false);
-    }
-
-    deleteCollection(organizationId: string, id: string): Promise<any> {
-        return this.send('DELETE', '/organizations/' + organizationId + '/collections/' + id, null, true, false);
-    }
-
-    deleteCollectionUser(organizationId: string, id: string, organizationUserId: string): Promise<any> {
-        return this.send('DELETE',
-            '/organizations/' + organizationId + '/collections/' + id + '/user/' + organizationUserId,
-            null, true, false);
-    }
-
-    // Groups APIs
-
-    async getGroupDetails(organizationId: string, id: string): Promise<GroupDetailsResponse> {
-        const r = await this.send('GET', '/organizations/' + organizationId + '/groups/' + id + '/details',
-            null, true, true);
-        return new GroupDetailsResponse(r);
-    }
-
-    async getGroups(organizationId: string): Promise<ListResponse<GroupResponse>> {
-        const r = await this.send('GET', '/organizations/' + organizationId + '/groups', null, true, true);
-        return new ListResponse(r, GroupResponse);
-    }
-
-    async getGroupUsers(organizationId: string, id: string): Promise<string[]> {
-        const r = await this.send('GET', '/organizations/' + organizationId + '/groups/' + id + '/users',
-            null, true, true);
-        return r;
-    }
-
-    async postGroup(organizationId: string, request: GroupRequest): Promise<GroupResponse> {
-        const r = await this.send('POST', '/organizations/' + organizationId + '/groups', request, true, true);
-        return new GroupResponse(r);
-    }
-
-    async putGroup(organizationId: string, id: string, request: GroupRequest): Promise<GroupResponse> {
-        const r = await this.send('PUT', '/organizations/' + organizationId + '/groups/' + id, request, true, true);
-        return new GroupResponse(r);
-    }
-
-    async putGroupUsers(organizationId: string, id: string, request: string[]): Promise<any> {
-        await this.send('PUT', '/organizations/' + organizationId + '/groups/' + id + '/users', request, true, false);
-    }
-
-    deleteGroup(organizationId: string, id: string): Promise<any> {
-        return this.send('DELETE', '/organizations/' + organizationId + '/groups/' + id, null, true, false);
-    }
-
-    deleteGroupUser(organizationId: string, id: string, organizationUserId: string): Promise<any> {
-        return this.send('DELETE',
-            '/organizations/' + organizationId + '/groups/' + id + '/user/' + organizationUserId, null, true, false);
-    }
-
-    // Policy APIs
-
-    async getPolicy(organizationId: string, type: PolicyType): Promise<PolicyResponse> {
-        const r = await this.send('GET', '/organizations/' + organizationId + '/policies/' + type, null, true, true);
-        return new PolicyResponse(r);
-    }
-
-    async getPolicies(organizationId: string): Promise<ListResponse<PolicyResponse>> {
-        const r = await this.send('GET', '/organizations/' + organizationId + '/policies', null, true, true);
-        return new ListResponse(r, PolicyResponse);
-    }
-
-    async getPoliciesByToken(organizationId: string, token: string, email: string, organizationUserId: string):
-        Promise<ListResponse<PolicyResponse>> {
-        const r = await this.send('GET', '/organizations/' + organizationId + '/policies/token?' +
-            'token=' + encodeURIComponent(token) + '&email=' + encodeURIComponent(email) +
-            '&organizationUserId=' + organizationUserId, null, false, true);
-        return new ListResponse(r, PolicyResponse);
-    }
-
-    async putPolicy(organizationId: string, type: PolicyType, request: PolicyRequest): Promise<PolicyResponse> {
-        const r = await this.send('PUT', '/organizations/' + organizationId + '/policies/' + type, request, true, true);
-        return new PolicyResponse(r);
-    }
-
-    // Organization User APIs
-
-    async getOrganizationUser(organizationId: string, id: string): Promise<OrganizationUserDetailsResponse> {
-        const r = await this.send('GET', '/organizations/' + organizationId + '/users/' + id, null, true, true);
-        return new OrganizationUserDetailsResponse(r);
-    }
-
-    async getOrganizationUserGroups(organizationId: string, id: string): Promise<string[]> {
-        const r = await this.send('GET', '/organizations/' + organizationId + '/users/' + id + '/groups',
-            null, true, true);
-        return r;
-    }
-
-    async getOrganizationUsers(organizationId: string): Promise<ListResponse<OrganizationUserUserDetailsResponse>> {
-        const r = await this.send('GET', '/organizations/' + organizationId + '/users', null, true, true);
-        return new ListResponse(r, OrganizationUserUserDetailsResponse);
-    }
-
-    async getOrganizationUserResetPasswordDetails(organizationId: string, id: string):
-        Promise<OrganizationUserResetPasswordDetailsReponse> {
-        const r = await this.send('GET', '/organizations/' + organizationId + '/users/' + id +
-            '/reset-password-details', null, true, true);
-        return new OrganizationUserResetPasswordDetailsReponse(r);
-    }
-
-    async getOrganizationAutoEnrollStatus(identifier: string): Promise<OrganizationAutoEnrollStatusResponse> {
-        const r = await this.send('GET', '/organizations/' + identifier + '/auto-enroll-status', null, true, true);
-        return new OrganizationAutoEnrollStatusResponse(r);
-    }
-
-    postOrganizationUserInvite(organizationId: string, request: OrganizationUserInviteRequest): Promise<any> {
-        return this.send('POST', '/organizations/' + organizationId + '/users/invite', request, true, false);
-    }
-
-    postOrganizationUserReinvite(organizationId: string, id: string): Promise<any> {
-        return this.send('POST', '/organizations/' + organizationId + '/users/' + id + '/reinvite', null, true, false);
-    }
-
-    async postManyOrganizationUserReinvite(organizationId: string, request: OrganizationUserBulkRequest): Promise<ListResponse<OrganizationUserBulkResponse>> {
-        const r = await this.send('POST', '/organizations/' + organizationId + '/users/reinvite', request, true, true);
-        return new ListResponse(r, OrganizationUserBulkResponse);
-    }
-
-    postOrganizationUserAccept(organizationId: string, id: string,
-        request: OrganizationUserAcceptRequest): Promise<any> {
-        return this.send('POST', '/organizations/' + organizationId + '/users/' + id + '/accept', request, true, false);
-    }
-
-    postOrganizationUserConfirm(organizationId: string, id: string,
-        request: OrganizationUserConfirmRequest): Promise<any> {
-        return this.send('POST', '/organizations/' + organizationId + '/users/' + id + '/confirm',
-            request, true, false);
-    }
-
-    async postOrganizationUsersPublicKey(organizationId: string, request: OrganizationUserBulkRequest): Promise<ListResponse<OrganizationUserBulkPublicKeyResponse>> {
-        const r = await this.send('POST', '/organizations/' + organizationId + '/users/public-keys', request, true, true);
-        return new ListResponse(r, OrganizationUserBulkPublicKeyResponse);
-    }
-
-    async postOrganizationUserBulkConfirm(organizationId: string, request: OrganizationUserBulkConfirmRequest): Promise<ListResponse<OrganizationUserBulkResponse>> {
-        const r = await this.send('POST', '/organizations/' + organizationId + '/users/confirm', request, true, true);
-        return new ListResponse(r, OrganizationUserBulkResponse);
-    }
-
-    putOrganizationUser(organizationId: string, id: string, request: OrganizationUserUpdateRequest): Promise<any> {
-        return this.send('PUT', '/organizations/' + organizationId + '/users/' + id, request, true, false);
-    }
-
-    putOrganizationUserGroups(organizationId: string, id: string,
-        request: OrganizationUserUpdateGroupsRequest): Promise<any> {
-        return this.send('PUT', '/organizations/' + organizationId + '/users/' + id + '/groups', request, true, false);
-    }
-
-    putOrganizationUserResetPasswordEnrollment(organizationId: string, userId: string,
-        request: OrganizationUserResetPasswordEnrollmentRequest): Promise<any> {
-        return this.send('PUT', '/organizations/' + organizationId + '/users/' + userId + '/reset-password-enrollment',
-            request, true, false);
-    }
-
-    putOrganizationUserResetPassword(organizationId: string, id: string,
-        request: OrganizationUserResetPasswordRequest): Promise<any> {
-        return this.send('PUT', '/organizations/' + organizationId + '/users/' + id + '/reset-password',
-            request, true, false);
-    }
-
-    deleteOrganizationUser(organizationId: string, id: string): Promise<any> {
-        return this.send('DELETE', '/organizations/' + organizationId + '/users/' + id, null, true, false);
-    }
-
-    async deleteManyOrganizationUsers(organizationId: string, request: OrganizationUserBulkRequest): Promise<ListResponse<OrganizationUserBulkResponse>> {
-        const r = await this.send('DELETE', '/organizations/' + organizationId + '/users', request, true, true);
-        return new ListResponse(r, OrganizationUserBulkResponse);
-    }
-
-    // Plan APIs
-
-    async getPlans(): Promise<ListResponse<PlanResponse>> {
-        const r = await this.send('GET', '/plans/', null, true, true);
-        return new ListResponse(r, PlanResponse);
-    }
-
-    async postImportDirectory(organizationId: string, request: ImportDirectoryRequest): Promise<any> {
-        return this.send('POST', '/organizations/' + organizationId + '/import', request, true, false);
-    }
-
-    async postPublicImportDirectory(request: OrganizationImportRequest): Promise<any> {
-        return this.send('POST', '/public/organization/import', request, true, false);
-    }
-
-    async getTaxRates(): Promise<ListResponse<TaxRateResponse>> {
-        const r = await this.send('GET', '/plans/sales-tax-rates/', null, true, true);
-        return new ListResponse(r, TaxRateResponse);
-    }
-
-    // Settings APIs
-
-    async getSettingsDomains(): Promise<DomainsResponse> {
-        const r = await this.send('GET', '/settings/domains', null, true, true);
-        return new DomainsResponse(r);
-    }
-
-    async putSettingsDomains(request: UpdateDomainsRequest): Promise<DomainsResponse> {
-        const r = await this.send('PUT', '/settings/domains', request, true, true);
-        return new DomainsResponse(r);
-    }
-
-    // Sync APIs
-
-    async getSync(): Promise<SyncResponse> {
-        const path = this.isDesktopClient || this.isWebClient ? '/sync?excludeDomains=true' : '/sync';
-        const r = await this.send('GET', path, null, true, true);
-        return new SyncResponse(r);
-    }
-
-    // Two-factor APIs
-
-    async getTwoFactorProviders(): Promise<ListResponse<TwoFactorProviderResponse>> {
-        const r = await this.send('GET', '/two-factor', null, true, true);
-        return new ListResponse(r, TwoFactorProviderResponse);
-    }
-
-    async getTwoFactorOrganizationProviders(organizationId: string): Promise<ListResponse<TwoFactorProviderResponse>> {
-        const r = await this.send('GET', '/organizations/' + organizationId + '/two-factor', null, true, true);
-        return new ListResponse(r, TwoFactorProviderResponse);
-    }
-
-    async getTwoFactorAuthenticator(request: SecretVerificationRequest): Promise<TwoFactorAuthenticatorResponse> {
-        const r = await this.send('POST', '/two-factor/get-authenticator', request, true, true);
-        return new TwoFactorAuthenticatorResponse(r);
-    }
-
-    async getTwoFactorEmail(request: SecretVerificationRequest): Promise<TwoFactorEmailResponse> {
-        const r = await this.send('POST', '/two-factor/get-email', request, true, true);
-        return new TwoFactorEmailResponse(r);
-    }
-
-    async getTwoFactorDuo(request: SecretVerificationRequest): Promise<TwoFactorDuoResponse> {
-        const r = await this.send('POST', '/two-factor/get-duo', request, true, true);
-        return new TwoFactorDuoResponse(r);
-    }
-
-    async getTwoFactorOrganizationDuo(organizationId: string,
-        request: SecretVerificationRequest): Promise<TwoFactorDuoResponse> {
-        const r = await this.send('POST', '/organizations/' + organizationId + '/two-factor/get-duo',
-            request, true, true);
-        return new TwoFactorDuoResponse(r);
-    }
-
-    async getTwoFactorYubiKey(request: SecretVerificationRequest): Promise<TwoFactorYubiKeyResponse> {
-        const r = await this.send('POST', '/two-factor/get-yubikey', request, true, true);
-        return new TwoFactorYubiKeyResponse(r);
-    }
-
-    async getTwoFactorWebAuthn(request: SecretVerificationRequest): Promise<TwoFactorWebAuthnResponse> {
-        const r = await this.send('POST', '/two-factor/get-webauthn', request, true, true);
-        return new TwoFactorWebAuthnResponse(r);
-    }
-
-    async getTwoFactorWebAuthnChallenge(request: SecretVerificationRequest): Promise<ChallengeResponse> {
-        const r = await this.send('POST', '/two-factor/get-webauthn-challenge', request, true, true);
-        return new ChallengeResponse(r);
-    }
-
-    async getTwoFactorRecover(request: SecretVerificationRequest): Promise<TwoFactorRecoverResponse> {
-        const r = await this.send('POST', '/two-factor/get-recover', request, true, true);
-        return new TwoFactorRecoverResponse(r);
-    }
-
-    async putTwoFactorAuthenticator(
-        request: UpdateTwoFactorAuthenticatorRequest): Promise<TwoFactorAuthenticatorResponse> {
-        const r = await this.send('PUT', '/two-factor/authenticator', request, true, true);
-        return new TwoFactorAuthenticatorResponse(r);
-    }
-
-    async putTwoFactorEmail(request: UpdateTwoFactorEmailRequest): Promise<TwoFactorEmailResponse> {
-        const r = await this.send('PUT', '/two-factor/email', request, true, true);
-        return new TwoFactorEmailResponse(r);
-    }
-
-    async putTwoFactorDuo(request: UpdateTwoFactorDuoRequest): Promise<TwoFactorDuoResponse> {
-        const r = await this.send('PUT', '/two-factor/duo', request, true, true);
-        return new TwoFactorDuoResponse(r);
-    }
-
-    async putTwoFactorOrganizationDuo(organizationId: string,
-        request: UpdateTwoFactorDuoRequest): Promise<TwoFactorDuoResponse> {
-        const r = await this.send('PUT', '/organizations/' + organizationId + '/two-factor/duo', request, true, true);
-        return new TwoFactorDuoResponse(r);
-    }
-
-    async putTwoFactorYubiKey(request: UpdateTwoFactorYubioOtpRequest): Promise<TwoFactorYubiKeyResponse> {
-        const r = await this.send('PUT', '/two-factor/yubikey', request, true, true);
-        return new TwoFactorYubiKeyResponse(r);
-    }
-
-    async putTwoFactorWebAuthn(request: UpdateTwoFactorWebAuthnRequest): Promise<TwoFactorWebAuthnResponse> {
-        const response = request.deviceResponse.response as AuthenticatorAttestationResponse;
-        const data: any = Object.assign({}, request);
-
-        data.deviceResponse = {
-            id: request.deviceResponse.id,
-            rawId: btoa(request.deviceResponse.id),
-            type: request.deviceResponse.type,
-            extensions: request.deviceResponse.getClientExtensionResults(),
-            response: {
-                AttestationObject: Utils.fromBufferToB64(response.attestationObject),
-                clientDataJson: Utils.fromBufferToB64(response.clientDataJSON),
-            },
-        };
-
-        const r = await this.send('PUT', '/two-factor/webauthn', data, true, true);
-        return new TwoFactorWebAuthnResponse(r);
-    }
-
-    async deleteTwoFactorWebAuthn(request: UpdateTwoFactorWebAuthnDeleteRequest): Promise<TwoFactorWebAuthnResponse> {
-        const r = await this.send('DELETE', '/two-factor/webauthn', request, true, true);
-        return new TwoFactorWebAuthnResponse(r);
-    }
-
-    async putTwoFactorDisable(request: TwoFactorProviderRequest): Promise<TwoFactorProviderResponse> {
-        const r = await this.send('PUT', '/two-factor/disable', request, true, true);
-        return new TwoFactorProviderResponse(r);
-    }
-
-    async putTwoFactorOrganizationDisable(organizationId: string,
-        request: TwoFactorProviderRequest): Promise<TwoFactorProviderResponse> {
-        const r = await this.send('PUT', '/organizations/' + organizationId + '/two-factor/disable',
-            request, true, true);
-        return new TwoFactorProviderResponse(r);
-    }
-
-    postTwoFactorRecover(request: TwoFactorRecoveryRequest): Promise<any> {
-        return this.send('POST', '/two-factor/recover', request, false, false);
-    }
-
-    postTwoFactorEmailSetup(request: TwoFactorEmailRequest): Promise<any> {
-        return this.send('POST', '/two-factor/send-email', request, true, false);
-    }
-
-    postTwoFactorEmail(request: TwoFactorEmailRequest): Promise<any> {
-        return this.send('POST', '/two-factor/send-email-login', request, false, false);
-    }
-
-    // Emergency Access APIs
-
-    async getEmergencyAccessTrusted(): Promise<ListResponse<EmergencyAccessGranteeDetailsResponse>> {
-        const r = await this.send('GET', '/emergency-access/trusted', null, true, true);
-        return new ListResponse(r, EmergencyAccessGranteeDetailsResponse);
-    }
-
-    async getEmergencyAccessGranted(): Promise<ListResponse<EmergencyAccessGrantorDetailsResponse>> {
-        const r = await this.send('GET', '/emergency-access/granted', null, true, true);
-        return new ListResponse(r, EmergencyAccessGrantorDetailsResponse);
-    }
-
-    async getEmergencyAccess(id: string): Promise<EmergencyAccessGranteeDetailsResponse> {
-        const r = await this.send('GET', '/emergency-access/' + id, null, true, true);
-        return new EmergencyAccessGranteeDetailsResponse(r);
-    }
-
-    async getEmergencyGrantorPolicies(id: string): Promise<ListResponse<PolicyResponse>> {
-        const r = await this.send('GET', '/emergency-access/' + id + '/policies', null, true, true);
-        return new ListResponse(r, PolicyResponse);
-    }
-
-    putEmergencyAccess(id: string, request: EmergencyAccessUpdateRequest): Promise<any> {
-        return this.send('PUT', '/emergency-access/' + id, request, true, false);
-    }
-
-    deleteEmergencyAccess(id: string): Promise<any> {
-        return this.send('DELETE', '/emergency-access/' + id, null, true, false);
-    }
-
-    postEmergencyAccessInvite(request: EmergencyAccessInviteRequest): Promise<any> {
-        return this.send('POST', '/emergency-access/invite', request, true, false);
-    }
-
-    postEmergencyAccessReinvite(id: string): Promise<any> {
-        return this.send('POST', '/emergency-access/' + id + '/reinvite', null, true, false);
-    }
-
-    postEmergencyAccessAccept(id: string, request: EmergencyAccessAcceptRequest): Promise<any> {
-        return this.send('POST', '/emergency-access/' + id + '/accept', request, true, false);
-    }
-
-    postEmergencyAccessConfirm(id: string, request: EmergencyAccessConfirmRequest): Promise<any> {
-        return this.send('POST', '/emergency-access/' + id + '/confirm', request, true, false);
-    }
-
-    postEmergencyAccessInitiate(id: string): Promise<any> {
-        return this.send('POST', '/emergency-access/' + id + '/initiate', null, true, false);
-    }
-
-    postEmergencyAccessApprove(id: string): Promise<any> {
-        return this.send('POST', '/emergency-access/' + id + '/approve', null, true, false);
-    }
-
-    postEmergencyAccessReject(id: string): Promise<any> {
-        return this.send('POST', '/emergency-access/' + id + '/reject', null, true, false);
-    }
-
-    async postEmergencyAccessTakeover(id: string): Promise<EmergencyAccessTakeoverResponse> {
-        const r = await this.send('POST', '/emergency-access/' + id + '/takeover', null, true, true);
-        return new EmergencyAccessTakeoverResponse(r);
-    }
-
-    async postEmergencyAccessPassword(id: string, request: EmergencyAccessPasswordRequest): Promise<any> {
-        const r = await this.send('POST', '/emergency-access/' + id + '/password', request, true, true);
-    }
-
-    async postEmergencyAccessView(id: string): Promise<EmergencyAccessViewResponse> {
-        const r = await this.send('POST', '/emergency-access/' + id + '/view', null, true, true);
-        return new EmergencyAccessViewResponse(r);
-    }
-
-    // Organization APIs
-
-    async getOrganization(id: string): Promise<OrganizationResponse> {
-        const r = await this.send('GET', '/organizations/' + id, null, true, true);
-        return new OrganizationResponse(r);
-    }
-
-    async getOrganizationBilling(id: string): Promise<BillingResponse> {
-        const r = await this.send('GET', '/organizations/' + id + '/billing', null, true, true);
-        return new BillingResponse(r);
-    }
-
-    async getOrganizationSubscription(id: string): Promise<OrganizationSubscriptionResponse> {
-        const r = await this.send('GET', '/organizations/' + id + '/subscription', null, true, true);
-        return new OrganizationSubscriptionResponse(r);
-    }
-
-    async getOrganizationLicense(id: string, installationId: string): Promise<any> {
-        return this.send('GET', '/organizations/' + id + '/license?installationId=' + installationId,
-            null, true, true);
-    }
-
-    async getOrganizationTaxInfo(id: string): Promise<TaxInfoResponse> {
-        const r = await this.send('GET', '/organizations/' + id + '/tax', null, true, true);
-        return new TaxInfoResponse(r);
-    }
-
-    async getOrganizationSso(id: string): Promise<OrganizationSsoResponse> {
-        const r = await this.send('GET', '/organizations/' + id + '/sso', null, true, true);
-        return new OrganizationSsoResponse(r);
-    }
-
-    async postOrganization(request: OrganizationCreateRequest): Promise<OrganizationResponse> {
-        const r = await this.send('POST', '/organizations', request, true, true);
-        return new OrganizationResponse(r);
-    }
-
-    async putOrganization(id: string, request: OrganizationUpdateRequest): Promise<OrganizationResponse> {
-        const r = await this.send('PUT', '/organizations/' + id, request, true, true);
-        return new OrganizationResponse(r);
-    }
-
-    async putOrganizationTaxInfo(id: string, request: OrganizationTaxInfoUpdateRequest): Promise<any> {
-        return this.send('PUT', '/organizations/' + id + '/tax', request, true, false);
-    }
-
-    postLeaveOrganization(id: string): Promise<any> {
-        return this.send('POST', '/organizations/' + id + '/leave', null, true, false);
-    }
-
-    async postOrganizationLicense(data: FormData): Promise<OrganizationResponse> {
-        const r = await this.send('POST', '/organizations/license', data, true, true);
-        return new OrganizationResponse(r);
-    }
-
-    async postOrganizationLicenseUpdate(id: string, data: FormData): Promise<any> {
-        return this.send('POST', '/organizations/' + id + '/license', data, true, false);
-    }
-
-    async postOrganizationApiKey(id: string, request: SecretVerificationRequest): Promise<ApiKeyResponse> {
-        const r = await this.send('POST', '/organizations/' + id + '/api-key', request, true, true);
-        return new ApiKeyResponse(r);
-    }
-
-    async postOrganizationRotateApiKey(id: string, request: SecretVerificationRequest): Promise<ApiKeyResponse> {
-        const r = await this.send('POST', '/organizations/' + id + '/rotate-api-key', request, true, true);
-        return new ApiKeyResponse(r);
-    }
-
-    async postOrganizationSso(id: string, request: OrganizationSsoRequest): Promise<OrganizationSsoResponse> {
-        const r = await this.send('POST', '/organizations/' + id + '/sso', request, true, true);
-        return new OrganizationSsoResponse(r);
-    }
-
-    async postOrganizationUpgrade(id: string, request: OrganizationUpgradeRequest): Promise<PaymentResponse> {
-        const r = await this.send('POST', '/organizations/' + id + '/upgrade', request, true, true);
-        return new PaymentResponse(r);
-    }
-
-    async postOrganizationUpdateSubscription(id: string, request: OrganizationSubscriptionUpdateRequest): Promise<void> {
-        return this.send('POST', '/organizations/' + id + '/subscription', request, true, false);
-    }
-
-    async postOrganizationSeat(id: string, request: SeatRequest): Promise<PaymentResponse> {
-        const r = await this.send('POST', '/organizations/' + id + '/seat', request, true, true);
-        return new PaymentResponse(r);
-    }
-
-    async postOrganizationStorage(id: string, request: StorageRequest): Promise<PaymentResponse> {
-        const r = await this.send('POST', '/organizations/' + id + '/storage', request, true, true);
-        return new PaymentResponse(r);
-    }
-
-    postOrganizationPayment(id: string, request: PaymentRequest): Promise<any> {
-        return this.send('POST', '/organizations/' + id + '/payment', request, true, false);
-    }
-
-    postOrganizationVerifyBank(id: string, request: VerifyBankRequest): Promise<any> {
-        return this.send('POST', '/organizations/' + id + '/verify-bank', request, true, false);
-    }
-
-    postOrganizationCancel(id: string): Promise<any> {
-        return this.send('POST', '/organizations/' + id + '/cancel', null, true, false);
-    }
-
-    postOrganizationReinstate(id: string): Promise<any> {
-        return this.send('POST', '/organizations/' + id + '/reinstate', null, true, false);
-    }
-
-    deleteOrganization(id: string, request: SecretVerificationRequest): Promise<any> {
-        return this.send('DELETE', '/organizations/' + id, request, true, false);
-    }
-
-    async getOrganizationKeys(id: string): Promise<OrganizationKeysResponse> {
-        const r = await this.send('GET', '/organizations/' + id + '/keys', null, true, true);
-        return new OrganizationKeysResponse(r);
-    }
-
-    async postOrganizationKeys(id: string, request: OrganizationKeysRequest): Promise<OrganizationKeysResponse> {
-        const r = await this.send('POST', '/organizations/' + id + '/keys', request, true, true);
-        return new OrganizationKeysResponse(r);
-    }
-
-    // Provider APIs
-
-    async postProviderSetup(id: string, request: ProviderSetupRequest) {
-        const r = await this.send('POST', '/providers/' + id + '/setup', request, true, true);
-        return new ProviderResponse(r);
-    }
-
-    async getProvider(id: string) {
-        const r = await this.send('GET', '/providers/' + id, null, true, true);
-        return new ProviderResponse(r);
-    }
-
-    async putProvider(id: string, request: ProviderUpdateRequest) {
-        const r = await this.send('PUT', '/providers/' + id, request, true, true);
-        return new ProviderResponse(r);
-    }
-
-    // Provider User APIs
-
-    async getProviderUsers(providerId: string): Promise<ListResponse<ProviderUserUserDetailsResponse>> {
-        const r = await this.send('GET', '/providers/' + providerId + '/users', null, true, true);
-        return new ListResponse(r, ProviderUserUserDetailsResponse);
-    }
-
-    async getProviderUser(providerId: string, id: string): Promise<ProviderUserResponse> {
-        const r = await this.send('GET', '/providers/' + providerId + '/users/' + id, null, true, true);
-        return new ProviderUserResponse(r);
-    }
-
-    postProviderUserInvite(providerId: string, request: ProviderUserInviteRequest): Promise<any> {
-        return this.send('POST', '/providers/' + providerId + '/users/invite', request, true, false);
-    }
-
-    postProviderUserReinvite(providerId: string, id: string): Promise<any> {
-        return this.send('POST', '/providers/' + providerId + '/users/' + id + '/reinvite', null, true, false);
-    }
-
-    async postManyProviderUserReinvite(providerId: string, request: ProviderUserBulkRequest): Promise<ListResponse<ProviderUserBulkResponse>> {
-        const r = await this.send('POST', '/providers/' + providerId + '/users/reinvite', request, true, true);
-        return new ListResponse(r, ProviderUserBulkResponse);
-    }
-
-    async postProviderUserBulkConfirm(providerId: string, request: ProviderUserBulkConfirmRequest): Promise<ListResponse<ProviderUserBulkResponse>> {
-        const r = await this.send('POST', '/providers/' + providerId + '/users/confirm', request, true, true);
-        return new ListResponse(r, ProviderUserBulkResponse);
-    }
-
-    async deleteManyProviderUsers(providerId: string, request: ProviderUserBulkRequest): Promise<ListResponse<ProviderUserBulkResponse>> {
-        const r = await this.send('DELETE', '/providers/' + providerId + '/users', request, true, true);
-        return new ListResponse(r, ProviderUserBulkResponse);
-    }
-
-    postProviderUserAccept(providerId: string, id: string, request: ProviderUserAcceptRequest): Promise<any> {
-        return this.send('POST', '/providers/' + providerId + '/users/' + id + '/accept', request, true, false);
-    }
-
-    postProviderUserConfirm(providerId: string, id: string, request: ProviderUserConfirmRequest): Promise<any> {
-        return this.send('POST', '/providers/' + providerId + '/users/' + id + '/confirm',
-            request, true, false);
-    }
-
-    async postProviderUsersPublicKey(providerId: string, request: ProviderUserBulkRequest): Promise<ListResponse<ProviderUserBulkPublicKeyResponse>> {
-        const r = await this.send('POST', '/providers/' + providerId + '/users/public-keys', request, true, true);
-        return new ListResponse(r, ProviderUserBulkPublicKeyResponse);
-    }
-
-
-    putProviderUser(providerId: string, id: string, request: ProviderUserUpdateRequest): Promise<any> {
-        return this.send('PUT', '/providers/' + providerId + '/users/' + id, request, true, false);
-    }
-
-    deleteProviderUser(providerId: string, id: string): Promise<any> {
-        return this.send('DELETE', '/providers/' + providerId + '/users/' + id, null, true, false);
-    }
-
-    // Provider Organization APIs
-
-    async getProviderClients(providerId: string): Promise<ListResponse<ProviderOrganizationOrganizationDetailsResponse>> {
-        const r = await this.send('GET', '/providers/' + providerId + '/organizations', null, true, true);
-        return new ListResponse(r, ProviderOrganizationOrganizationDetailsResponse);
-    }
-
-    postProviderAddOrganization(providerId: string, request: ProviderAddOrganizationRequest): Promise<any> {
-        return this.send('POST', '/providers/' + providerId + '/organizations/add', request, true, false);
-    }
-
-    async postProviderCreateOrganization(providerId: string, request: ProviderOrganizationCreateRequest): Promise<ProviderOrganizationResponse> {
-        const r = await this.send('POST', '/providers/' + providerId + '/organizations', request, true, true);
-        return new ProviderOrganizationResponse(r);
-    }
-
-    deleteProviderOrganization(providerId: string, id: string): Promise<any> {
-        return this.send('DELETE', '/providers/' + providerId + '/organizations/' + id, null, true, false);
-    }
-
-    // Event APIs
-
-    async getEvents(start: string, end: string, token: string): Promise<ListResponse<EventResponse>> {
-        const r = await this.send('GET', this.addEventParameters('/events', start, end, token), null, true, true);
-        return new ListResponse(r, EventResponse);
-    }
-
-    async getEventsCipher(id: string, start: string, end: string,
-        token: string): Promise<ListResponse<EventResponse>> {
-        const r = await this.send('GET', this.addEventParameters('/ciphers/' + id + '/events', start, end, token),
-            null, true, true);
-        return new ListResponse(r, EventResponse);
-    }
-
-    async getEventsOrganization(id: string, start: string, end: string,
-        token: string): Promise<ListResponse<EventResponse>> {
-        const r = await this.send('GET', this.addEventParameters('/organizations/' + id + '/events', start, end, token),
-            null, true, true);
-        return new ListResponse(r, EventResponse);
-    }
-
-    async getEventsOrganizationUser(organizationId: string, id: string,
-        start: string, end: string, token: string): Promise<ListResponse<EventResponse>> {
-        const r = await this.send('GET',
-            this.addEventParameters('/organizations/' + organizationId + '/users/' + id + '/events', start, end, token),
-            null, true, true);
-        return new ListResponse(r, EventResponse);
-    }
-
-    async getEventsProvider(id: string, start: string, end: string, token: string): Promise<ListResponse<EventResponse>> {
-        const r = await this.send('GET', this.addEventParameters('/providers/' + id + '/events', start, end, token), null, true, true);
-        return new ListResponse(r, EventResponse);
-    }
-
-    async getEventsProviderUser(providerId: string, id: string,
-        start: string, end: string, token: string): Promise<ListResponse<EventResponse>> {
-        const r = await this.send('GET',
-            this.addEventParameters('/providers/' + providerId + '/users/' + id + '/events', start, end, token),
-            null, true, true);
-        return new ListResponse(r, EventResponse);
-    }
-
-    async postEventsCollect(request: EventRequest[]): Promise<any> {
-        const authHeader = await this.getActiveBearerToken();
-        const headers = new Headers({
-            'Device-Type': this.deviceType,
-            'Authorization': 'Bearer ' + authHeader,
-            'Content-Type': 'application/json; charset=utf-8',
-        });
-        if (this.customUserAgent != null) {
-            headers.set('User-Agent', this.customUserAgent);
-        }
-        const response = await this.fetch(new Request(this.environmentService.getEventsUrl() + '/collect', {
-            cache: 'no-store',
-            credentials: this.getCredentials(),
-            method: 'POST',
-            body: JSON.stringify(request),
-            headers: headers,
-        }));
-        if (response.status !== 200) {
-            return Promise.reject('Event post failed.');
-        }
-    }
-
-    // User APIs
-
-    async getUserPublicKey(id: string): Promise<UserKeyResponse> {
-        const r = await this.send('GET', '/users/' + id + '/public-key', null, true, true);
-        return new UserKeyResponse(r);
-    }
-
-    // HIBP APIs
-
-    async getHibpBreach(username: string): Promise<BreachAccountResponse[]> {
-        const r = await this.send('GET', '/hibp/breach?username=' + username, null, true, true);
-        return r.map((a: any) => new BreachAccountResponse(a));
-    }
-
-    // Misc
-
-    async postBitPayInvoice(request: BitPayInvoiceRequest): Promise<string> {
-        const r = await this.send('POST', '/bitpay-invoice', request, true, true);
-        return r as string;
-    }
-
-    async postSetupPayment(): Promise<string> {
-        const r = await this.send('POST', '/setup-payment', null, true, true);
-        return r as string;
-    }
-
-    // Key Connector
-
-    async getUserKeyFromKeyConnector(keyConnectorUrl: string): Promise<KeyConnectorUserKeyResponse> {
-        const authHeader = await this.getActiveBearerToken();
-
-        const response = await this.fetch(new Request(keyConnectorUrl + '/user-keys', {
-            cache: 'no-store',
-            method: 'GET',
-            headers: new Headers({
-                'Accept': 'application/json',
-                'Authorization': 'Bearer ' + authHeader,
-            }),
-        }));
-
-        if (response.status !== 200) {
-            const error = await this.handleError(response, false, true);
-            return Promise.reject(error);
-        }
-
-        return new KeyConnectorUserKeyResponse(await response.json());
-    }
-
-    async postUserKeyToKeyConnector(keyConnectorUrl: string, request: KeyConnectorUserKeyRequest): Promise<void> {
-        const authHeader = await this.getActiveBearerToken();
-
-        const response = await this.fetch(new Request(keyConnectorUrl + '/user-keys', {
-            cache: 'no-store',
-            method: 'POST',
-            headers: new Headers({
-                'Accept': 'application/json',
-                'Authorization': 'Bearer ' + authHeader,
-                'Content-Type': 'application/json; charset=utf-8',
-            }),
-            body: JSON.stringify(request),
-        }));
-
-        if (response.status !== 200) {
-            const error = await this.handleError(response, false, true);
-            return Promise.reject(error);
-        }
-    }
-
-    async getKeyConnectorAlive(keyConnectorUrl: string) {
-        const response = await this.fetch(new Request(keyConnectorUrl + '/alive', {
-            cache: 'no-store',
-            method: 'GET',
-            headers: new Headers({
-                'Accept': 'application/json',
-                'Content-Type': 'application/json; charset=utf-8',
-            }),
-        }));
-
-        if (response.status !== 200) {
-            const error = await this.handleError(response, false, true);
-            return Promise.reject(error);
-        }
-    }
-
-    // Helpers
-
-    async getActiveBearerToken(): Promise<string> {
-        let accessToken = await this.tokenService.getToken();
-        if (this.tokenService.tokenNeedsRefresh()) {
-            await this.doAuthRefresh();
-            accessToken = await this.tokenService.getToken();
-        }
-        return accessToken;
-    }
-
-    fetch(request: Request): Promise<Response> {
-        if (request.method === 'GET') {
-            request.headers.set('Cache-Control', 'no-store');
-            request.headers.set('Pragma', 'no-cache');
-        }
-        return this.nativeFetch(request);
-    }
-
-    nativeFetch(request: Request): Promise<Response> {
-        return fetch(request);
-    }
-
-    async preValidateSso(identifier: string): Promise<boolean> {
-        if (identifier == null || identifier === '') {
-            throw new Error('Organization Identifier was not provided.');
-        }
-        const headers = new Headers({
-            'Accept': 'application/json',
-            'Device-Type': this.deviceType,
-        });
-        if (this.customUserAgent != null) {
-            headers.set('User-Agent', this.customUserAgent);
-        }
-
-        const path = `/account/prevalidate?domainHint=${encodeURIComponent(identifier)}`;
-        const response = await this.fetch(new Request(this.environmentService.getIdentityUrl() + path, {
-            cache: 'no-store',
-            credentials: this.getCredentials(),
-            headers: headers,
-            method: 'GET',
-        }));
-
-        if (response.status === 200) {
-            return true;
-        } else {
-            const error = await this.handleError(response, false, true);
-            return Promise.reject(error);
-        }
-    }
-
-    async postCreateSponsorship(sponsoredOrgId: string, request: OrganizationSponsorshipCreateRequest): Promise<void> {
-        return await this.send('POST',
-            '/organization/sponsorship/' + sponsoredOrgId + '/families-for-enterprise',
-            request, true, false);
-    }
-
-    async deleteRevokeSponsorship(sponsoringOrganizationId: string): Promise<void> {
-        return await this.send('DELETE',
-            '/organization/sponsorship/' + sponsoringOrganizationId,
-            null, true, false);
-    }
-
-    async deleteRemoveSponsorship(sponsoringOrgId: string): Promise<void> {
-        return await this.send('DELETE',
-            '/organization/sponsorship/sponsored/' + sponsoringOrgId,
-            null, true, false);
-    }
-
-    async postPreValidateSponsorshipToken(sponsorshipToken: string): Promise<boolean> {
-        const r = await this.send('POST', '/organization/sponsorship/validate-token?sponsorshipToken=' + encodeURIComponent(sponsorshipToken),
-            null, true, true);
-        return r as boolean;
-    }
-
-    async postRedeemSponsorship(sponsorshipToken: string, request: OrganizationSponsorshipRedeemRequest): Promise<void> {
-        return await this.send('POST', '/organization/sponsorship/redeem?sponsorshipToken=' + encodeURIComponent(sponsorshipToken),
-            request, true, false);
-    }
-
-    async postResendSponsorshipOffer(sponsoringOrgId: string): Promise<void> {
-        return await this.send('POST',
-            '/organization/sponsorship/' + sponsoringOrgId + '/families-for-enterprise/resend',
-            null, true, false);
-    }
-
-
-    protected async doAuthRefresh(): Promise<void> {
-        const refreshToken = await this.tokenService.getRefreshToken();
-        if (refreshToken != null && refreshToken !== '') {
-            return this.doRefreshToken();
-        }
-
-        const clientId = await this.tokenService.getClientId();
-        const clientSecret = await this.tokenService.getClientSecret();
-        if (!Utils.isNullOrWhitespace(clientId) && !Utils.isNullOrWhitespace(clientSecret)) {
-            return this.doApiTokenRefresh();
-        }
-
-        throw new Error('Cannot refresh token, no refresh token or api keys are stored');
-    }
-
-    protected async doApiTokenRefresh(): Promise<void> {
-        const clientId = await this.tokenService.getClientId();
-        const clientSecret = await this.tokenService.getClientSecret();
-        if (Utils.isNullOrWhitespace(clientId) || Utils.isNullOrWhitespace(clientSecret) || this.apiKeyRefresh == null) {
-            throw new Error();
-        }
-
-        await this.apiKeyRefresh(clientId, clientSecret);
-    }
-
-    protected async doRefreshToken(): Promise<void> {
-        const refreshToken = await this.tokenService.getRefreshToken();
-        if (refreshToken == null || refreshToken === '') {
-            throw new Error();
-        }
-        const headers = new Headers({
-            'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8',
-            'Accept': 'application/json',
-            'Device-Type': this.deviceType,
-        });
-        if (this.customUserAgent != null) {
-            headers.set('User-Agent', this.customUserAgent);
-        }
-
-        const decodedToken = this.tokenService.decodeToken();
-        const response = await this.fetch(new Request(this.environmentService.getIdentityUrl() + '/connect/token', {
-            body: this.qsStringify({
-                grant_type: 'refresh_token',
-                client_id: decodedToken.client_id,
-                refresh_token: refreshToken,
-            }),
-            cache: 'no-store',
-            credentials: this.getCredentials(),
-            headers: headers,
-            method: 'POST',
-        }));
-
-        if (response.status === 200) {
-            const responseJson = await response.json();
-            const tokenResponse = new IdentityTokenResponse(responseJson);
-            await this.tokenService.setTokens(tokenResponse.accessToken, tokenResponse.refreshToken, null);
+export class ApiService implements ApiServiceAbstraction {
+  protected apiKeyRefresh: (clientId: string, clientSecret: string) => Promise<any>;
+  private device: DeviceType;
+  private deviceType: string;
+  private isWebClient = false;
+  private isDesktopClient = false;
+
+  constructor(
+    private tokenService: TokenService,
+    private platformUtilsService: PlatformUtilsService,
+    private environmentService: EnvironmentService,
+    private logoutCallback: (expired: boolean) => Promise<void>,
+    private customUserAgent: string = null
+  ) {
+    this.device = platformUtilsService.getDevice();
+    this.deviceType = this.device.toString();
+    this.isWebClient =
+      this.device === DeviceType.IEBrowser ||
+      this.device === DeviceType.ChromeBrowser ||
+      this.device === DeviceType.EdgeBrowser ||
+      this.device === DeviceType.FirefoxBrowser ||
+      this.device === DeviceType.OperaBrowser ||
+      this.device === DeviceType.SafariBrowser ||
+      this.device === DeviceType.UnknownBrowser ||
+      this.device === DeviceType.VivaldiBrowser;
+    this.isDesktopClient =
+      this.device === DeviceType.WindowsDesktop ||
+      this.device === DeviceType.MacOsDesktop ||
+      this.device === DeviceType.LinuxDesktop;
+  }
+
+  // Auth APIs
+
+  async postIdentityToken(
+    request: TokenRequest
+  ): Promise<IdentityTokenResponse | IdentityTwoFactorResponse | IdentityCaptchaResponse> {
+    const headers = new Headers({
+      "Content-Type": "application/x-www-form-urlencoded; charset=utf-8",
+      Accept: "application/json",
+      "Device-Type": this.deviceType,
+    });
+    if (this.customUserAgent != null) {
+      headers.set("User-Agent", this.customUserAgent);
+    }
+    request.alterIdentityTokenHeaders(headers);
+    const response = await this.fetch(
+      new Request(this.environmentService.getIdentityUrl() + "/connect/token", {
+        body: this.qsStringify(
+          request.toIdentityToken(request.clientId ?? this.platformUtilsService.identityClientId)
+        ),
+        credentials: this.getCredentials(),
+        cache: "no-store",
+        headers: headers,
+        method: "POST",
+      })
+    );
+
+    let responseJson: any = null;
+    if (this.isJsonResponse(response)) {
+      responseJson = await response.json();
+    }
+
+    if (responseJson != null) {
+      if (response.status === 200) {
+        return new IdentityTokenResponse(responseJson);
+      } else if (
+        response.status === 400 &&
+        responseJson.TwoFactorProviders2 &&
+        Object.keys(responseJson.TwoFactorProviders2).length
+      ) {
+        await this.tokenService.clearTwoFactorToken(request.email);
+        return new IdentityTwoFactorResponse(responseJson);
+      } else if (
+        response.status === 400 &&
+        responseJson.HCaptcha_SiteKey &&
+        Object.keys(responseJson.HCaptcha_SiteKey).length
+      ) {
+        return new IdentityCaptchaResponse(responseJson);
+      }
+    }
+
+    return Promise.reject(new ErrorResponse(responseJson, response.status, true));
+  }
+
+  async refreshIdentityToken(): Promise<any> {
+    try {
+      await this.doAuthRefresh();
+    } catch (e) {
+      return Promise.reject(null);
+    }
+  }
+
+  // Account APIs
+
+  async getProfile(): Promise<ProfileResponse> {
+    const r = await this.send("GET", "/accounts/profile", null, true, true);
+    return new ProfileResponse(r);
+  }
+
+  async getUserBilling(): Promise<BillingResponse> {
+    const r = await this.send("GET", "/accounts/billing", null, true, true);
+    return new BillingResponse(r);
+  }
+
+  async getUserSubscription(): Promise<SubscriptionResponse> {
+    const r = await this.send("GET", "/accounts/subscription", null, true, true);
+    return new SubscriptionResponse(r);
+  }
+
+  async getTaxInfo(): Promise<TaxInfoResponse> {
+    const r = await this.send("GET", "/accounts/tax", null, true, true);
+    return new TaxInfoResponse(r);
+  }
+
+  async putProfile(request: UpdateProfileRequest): Promise<ProfileResponse> {
+    const r = await this.send("PUT", "/accounts/profile", request, true, true);
+    return new ProfileResponse(r);
+  }
+
+  putTaxInfo(request: TaxInfoUpdateRequest): Promise<any> {
+    return this.send("PUT", "/accounts/tax", request, true, false);
+  }
+
+  async postPrelogin(request: PreloginRequest): Promise<PreloginResponse> {
+    const r = await this.send("POST", "/accounts/prelogin", request, false, true);
+    return new PreloginResponse(r);
+  }
+
+  postEmailToken(request: EmailTokenRequest): Promise<any> {
+    return this.send("POST", "/accounts/email-token", request, true, false);
+  }
+
+  postEmail(request: EmailRequest): Promise<any> {
+    return this.send("POST", "/accounts/email", request, true, false);
+  }
+
+  postPassword(request: PasswordRequest): Promise<any> {
+    return this.send("POST", "/accounts/password", request, true, false);
+  }
+
+  setPassword(request: SetPasswordRequest): Promise<any> {
+    return this.send("POST", "/accounts/set-password", request, true, false);
+  }
+
+  postSetKeyConnectorKey(request: SetKeyConnectorKeyRequest): Promise<any> {
+    return this.send("POST", "/accounts/set-key-connector-key", request, true, false);
+  }
+
+  postSecurityStamp(request: SecretVerificationRequest): Promise<any> {
+    return this.send("POST", "/accounts/security-stamp", request, true, false);
+  }
+
+  deleteAccount(request: SecretVerificationRequest): Promise<any> {
+    return this.send("DELETE", "/accounts", request, true, false);
+  }
+
+  async getAccountRevisionDate(): Promise<number> {
+    const r = await this.send("GET", "/accounts/revision-date", null, true, true);
+    return r as number;
+  }
+
+  postPasswordHint(request: PasswordHintRequest): Promise<any> {
+    return this.send("POST", "/accounts/password-hint", request, false, false);
+  }
+
+  postRegister(request: RegisterRequest): Promise<any> {
+    return this.send("POST", "/accounts/register", request, false, false);
+  }
+
+  async postPremium(data: FormData): Promise<PaymentResponse> {
+    const r = await this.send("POST", "/accounts/premium", data, true, true);
+    return new PaymentResponse(r);
+  }
+
+  async postIapCheck(request: IapCheckRequest): Promise<any> {
+    return this.send("POST", "/accounts/iap-check", request, true, false);
+  }
+
+  postReinstatePremium(): Promise<any> {
+    return this.send("POST", "/accounts/reinstate-premium", null, true, false);
+  }
+
+  postCancelPremium(): Promise<any> {
+    return this.send("POST", "/accounts/cancel-premium", null, true, false);
+  }
+
+  async postAccountStorage(request: StorageRequest): Promise<PaymentResponse> {
+    const r = await this.send("POST", "/accounts/storage", request, true, true);
+    return new PaymentResponse(r);
+  }
+
+  postAccountPayment(request: PaymentRequest): Promise<any> {
+    return this.send("POST", "/accounts/payment", request, true, false);
+  }
+
+  postAccountLicense(data: FormData): Promise<any> {
+    return this.send("POST", "/accounts/license", data, true, false);
+  }
+
+  postAccountKeys(request: KeysRequest): Promise<any> {
+    return this.send("POST", "/accounts/keys", request, true, false);
+  }
+
+  postAccountKey(request: UpdateKeyRequest): Promise<any> {
+    return this.send("POST", "/accounts/key", request, true, false);
+  }
+
+  postAccountVerifyEmail(): Promise<any> {
+    return this.send("POST", "/accounts/verify-email", null, true, false);
+  }
+
+  postAccountVerifyEmailToken(request: VerifyEmailRequest): Promise<any> {
+    return this.send("POST", "/accounts/verify-email-token", request, false, false);
+  }
+
+  postAccountVerifyPassword(request: SecretVerificationRequest): Promise<any> {
+    return this.send("POST", "/accounts/verify-password", request, true, false);
+  }
+
+  postAccountRecoverDelete(request: DeleteRecoverRequest): Promise<any> {
+    return this.send("POST", "/accounts/delete-recover", request, false, false);
+  }
+
+  postAccountRecoverDeleteToken(request: VerifyDeleteRecoverRequest): Promise<any> {
+    return this.send("POST", "/accounts/delete-recover-token", request, false, false);
+  }
+
+  postAccountKdf(request: KdfRequest): Promise<any> {
+    return this.send("POST", "/accounts/kdf", request, true, false);
+  }
+
+  async deleteSsoUser(organizationId: string): Promise<any> {
+    return this.send("DELETE", "/accounts/sso/" + organizationId, null, true, false);
+  }
+
+  async getSsoUserIdentifier(): Promise<string> {
+    return this.send("GET", "/accounts/sso/user-identifier", null, true, true);
+  }
+
+  async postUserApiKey(id: string, request: SecretVerificationRequest): Promise<ApiKeyResponse> {
+    const r = await this.send("POST", "/accounts/api-key", request, true, true);
+    return new ApiKeyResponse(r);
+  }
+
+  async postUserRotateApiKey(
+    id: string,
+    request: SecretVerificationRequest
+  ): Promise<ApiKeyResponse> {
+    const r = await this.send("POST", "/accounts/rotate-api-key", request, true, true);
+    return new ApiKeyResponse(r);
+  }
+
+  putUpdateTempPassword(request: UpdateTempPasswordRequest): Promise<any> {
+    return this.send("PUT", "/accounts/update-temp-password", request, true, false);
+  }
+
+  postAccountRequestOTP(): Promise<void> {
+    return this.send("POST", "/accounts/request-otp", null, true, false);
+  }
+
+  postAccountVerifyOTP(request: VerifyOTPRequest): Promise<void> {
+    return this.send("POST", "/accounts/verify-otp", request, true, false);
+  }
+
+  postConvertToKeyConnector(): Promise<void> {
+    return this.send("POST", "/accounts/convert-to-key-connector", null, true, false);
+  }
+
+  // Folder APIs
+
+  async getFolder(id: string): Promise<FolderResponse> {
+    const r = await this.send("GET", "/folders/" + id, null, true, true);
+    return new FolderResponse(r);
+  }
+
+  async postFolder(request: FolderRequest): Promise<FolderResponse> {
+    const r = await this.send("POST", "/folders", request, true, true);
+    return new FolderResponse(r);
+  }
+
+  async putFolder(id: string, request: FolderRequest): Promise<FolderResponse> {
+    const r = await this.send("PUT", "/folders/" + id, request, true, true);
+    return new FolderResponse(r);
+  }
+
+  deleteFolder(id: string): Promise<any> {
+    return this.send("DELETE", "/folders/" + id, null, true, false);
+  }
+
+  // Send APIs
+
+  async getSend(id: string): Promise<SendResponse> {
+    const r = await this.send("GET", "/sends/" + id, null, true, true);
+    return new SendResponse(r);
+  }
+
+  async postSendAccess(
+    id: string,
+    request: SendAccessRequest,
+    apiUrl?: string
+  ): Promise<SendAccessResponse> {
+    const addSendIdHeader = (headers: Headers) => {
+      headers.set("Send-Id", id);
+    };
+    const r = await this.send(
+      "POST",
+      "/sends/access/" + id,
+      request,
+      false,
+      true,
+      apiUrl,
+      addSendIdHeader
+    );
+    return new SendAccessResponse(r);
+  }
+
+  async getSendFileDownloadData(
+    send: SendAccessView,
+    request: SendAccessRequest,
+    apiUrl?: string
+  ): Promise<SendFileDownloadDataResponse> {
+    const addSendIdHeader = (headers: Headers) => {
+      headers.set("Send-Id", send.id);
+    };
+    const r = await this.send(
+      "POST",
+      "/sends/" + send.id + "/access/file/" + send.file.id,
+      request,
+      false,
+      true,
+      apiUrl,
+      addSendIdHeader
+    );
+    return new SendFileDownloadDataResponse(r);
+  }
+
+  async getSends(): Promise<ListResponse<SendResponse>> {
+    const r = await this.send("GET", "/sends", null, true, true);
+    return new ListResponse(r, SendResponse);
+  }
+
+  async postSend(request: SendRequest): Promise<SendResponse> {
+    const r = await this.send("POST", "/sends", request, true, true);
+    return new SendResponse(r);
+  }
+
+  async postFileTypeSend(request: SendRequest): Promise<SendFileUploadDataResponse> {
+    const r = await this.send("POST", "/sends/file/v2", request, true, true);
+    return new SendFileUploadDataResponse(r);
+  }
+
+  async renewSendFileUploadUrl(
+    sendId: string,
+    fileId: string
+  ): Promise<SendFileUploadDataResponse> {
+    const r = await this.send("GET", "/sends/" + sendId + "/file/" + fileId, null, true, true);
+    return new SendFileUploadDataResponse(r);
+  }
+
+  postSendFile(sendId: string, fileId: string, data: FormData): Promise<any> {
+    return this.send("POST", "/sends/" + sendId + "/file/" + fileId, data, true, false);
+  }
+
+  /**
+   * @deprecated Mar 25 2021: This method has been deprecated in favor of direct uploads.
+   * This method still exists for backward compatibility with old server versions.
+   */
+  async postSendFileLegacy(data: FormData): Promise<SendResponse> {
+    const r = await this.send("POST", "/sends/file", data, true, true);
+    return new SendResponse(r);
+  }
+
+  async putSend(id: string, request: SendRequest): Promise<SendResponse> {
+    const r = await this.send("PUT", "/sends/" + id, request, true, true);
+    return new SendResponse(r);
+  }
+
+  async putSendRemovePassword(id: string): Promise<SendResponse> {
+    const r = await this.send("PUT", "/sends/" + id + "/remove-password", null, true, true);
+    return new SendResponse(r);
+  }
+
+  deleteSend(id: string): Promise<any> {
+    return this.send("DELETE", "/sends/" + id, null, true, false);
+  }
+
+  // Cipher APIs
+
+  async getCipher(id: string): Promise<CipherResponse> {
+    const r = await this.send("GET", "/ciphers/" + id, null, true, true);
+    return new CipherResponse(r);
+  }
+
+  async getCipherAdmin(id: string): Promise<CipherResponse> {
+    const r = await this.send("GET", "/ciphers/" + id + "/admin", null, true, true);
+    return new CipherResponse(r);
+  }
+
+  async getCiphersOrganization(organizationId: string): Promise<ListResponse<CipherResponse>> {
+    const r = await this.send(
+      "GET",
+      "/ciphers/organization-details?organizationId=" + organizationId,
+      null,
+      true,
+      true
+    );
+    return new ListResponse(r, CipherResponse);
+  }
+
+  async postCipher(request: CipherRequest): Promise<CipherResponse> {
+    const r = await this.send("POST", "/ciphers", request, true, true);
+    return new CipherResponse(r);
+  }
+
+  async postCipherCreate(request: CipherCreateRequest): Promise<CipherResponse> {
+    const r = await this.send("POST", "/ciphers/create", request, true, true);
+    return new CipherResponse(r);
+  }
+
+  async postCipherAdmin(request: CipherCreateRequest): Promise<CipherResponse> {
+    const r = await this.send("POST", "/ciphers/admin", request, true, true);
+    return new CipherResponse(r);
+  }
+
+  async putCipher(id: string, request: CipherRequest): Promise<CipherResponse> {
+    const r = await this.send("PUT", "/ciphers/" + id, request, true, true);
+    return new CipherResponse(r);
+  }
+
+  async putCipherAdmin(id: string, request: CipherRequest): Promise<CipherResponse> {
+    const r = await this.send("PUT", "/ciphers/" + id + "/admin", request, true, true);
+    return new CipherResponse(r);
+  }
+
+  deleteCipher(id: string): Promise<any> {
+    return this.send("DELETE", "/ciphers/" + id, null, true, false);
+  }
+
+  deleteCipherAdmin(id: string): Promise<any> {
+    return this.send("DELETE", "/ciphers/" + id + "/admin", null, true, false);
+  }
+
+  deleteManyCiphers(request: CipherBulkDeleteRequest): Promise<any> {
+    return this.send("DELETE", "/ciphers", request, true, false);
+  }
+
+  deleteManyCiphersAdmin(request: CipherBulkDeleteRequest): Promise<any> {
+    return this.send("DELETE", "/ciphers/admin", request, true, false);
+  }
+
+  putMoveCiphers(request: CipherBulkMoveRequest): Promise<any> {
+    return this.send("PUT", "/ciphers/move", request, true, false);
+  }
+
+  async putShareCipher(id: string, request: CipherShareRequest): Promise<CipherResponse> {
+    const r = await this.send("PUT", "/ciphers/" + id + "/share", request, true, true);
+    return new CipherResponse(r);
+  }
+
+  putShareCiphers(request: CipherBulkShareRequest): Promise<any> {
+    return this.send("PUT", "/ciphers/share", request, true, false);
+  }
+
+  putCipherCollections(id: string, request: CipherCollectionsRequest): Promise<any> {
+    return this.send("PUT", "/ciphers/" + id + "/collections", request, true, false);
+  }
+
+  putCipherCollectionsAdmin(id: string, request: CipherCollectionsRequest): Promise<any> {
+    return this.send("PUT", "/ciphers/" + id + "/collections-admin", request, true, false);
+  }
+
+  postPurgeCiphers(
+    request: SecretVerificationRequest,
+    organizationId: string = null
+  ): Promise<any> {
+    let path = "/ciphers/purge";
+    if (organizationId != null) {
+      path += "?organizationId=" + organizationId;
+    }
+    return this.send("POST", path, request, true, false);
+  }
+
+  postImportCiphers(request: ImportCiphersRequest): Promise<any> {
+    return this.send("POST", "/ciphers/import", request, true, false);
+  }
+
+  postImportOrganizationCiphers(
+    organizationId: string,
+    request: ImportOrganizationCiphersRequest
+  ): Promise<any> {
+    return this.send(
+      "POST",
+      "/ciphers/import-organization?organizationId=" + organizationId,
+      request,
+      true,
+      false
+    );
+  }
+
+  putDeleteCipher(id: string): Promise<any> {
+    return this.send("PUT", "/ciphers/" + id + "/delete", null, true, false);
+  }
+
+  putDeleteCipherAdmin(id: string): Promise<any> {
+    return this.send("PUT", "/ciphers/" + id + "/delete-admin", null, true, false);
+  }
+
+  putDeleteManyCiphers(request: CipherBulkDeleteRequest): Promise<any> {
+    return this.send("PUT", "/ciphers/delete", request, true, false);
+  }
+
+  putDeleteManyCiphersAdmin(request: CipherBulkDeleteRequest): Promise<any> {
+    return this.send("PUT", "/ciphers/delete-admin", request, true, false);
+  }
+
+  async putRestoreCipher(id: string): Promise<CipherResponse> {
+    const r = await this.send("PUT", "/ciphers/" + id + "/restore", null, true, true);
+    return new CipherResponse(r);
+  }
+
+  async putRestoreCipherAdmin(id: string): Promise<CipherResponse> {
+    const r = await this.send("PUT", "/ciphers/" + id + "/restore-admin", null, true, true);
+    return new CipherResponse(r);
+  }
+
+  async putRestoreManyCiphers(
+    request: CipherBulkDeleteRequest
+  ): Promise<ListResponse<CipherResponse>> {
+    const r = await this.send("PUT", "/ciphers/restore", request, true, true);
+    return new ListResponse<CipherResponse>(r, CipherResponse);
+  }
+
+  // Attachments APIs
+
+  async getAttachmentData(
+    cipherId: string,
+    attachmentId: string,
+    emergencyAccessId?: string
+  ): Promise<AttachmentResponse> {
+    const path =
+      (emergencyAccessId != null ? "/emergency-access/" + emergencyAccessId + "/" : "/ciphers/") +
+      cipherId +
+      "/attachment/" +
+      attachmentId;
+    const r = await this.send("GET", path, null, true, true);
+    return new AttachmentResponse(r);
+  }
+
+  async postCipherAttachment(
+    id: string,
+    request: AttachmentRequest
+  ): Promise<AttachmentUploadDataResponse> {
+    const r = await this.send("POST", "/ciphers/" + id + "/attachment/v2", request, true, true);
+    return new AttachmentUploadDataResponse(r);
+  }
+
+  /**
+   * @deprecated Mar 25 2021: This method has been deprecated in favor of direct uploads.
+   * This method still exists for backward compatibility with old server versions.
+   */
+  async postCipherAttachmentLegacy(id: string, data: FormData): Promise<CipherResponse> {
+    const r = await this.send("POST", "/ciphers/" + id + "/attachment", data, true, true);
+    return new CipherResponse(r);
+  }
+
+  /**
+   * @deprecated Mar 25 2021: This method has been deprecated in favor of direct uploads.
+   * This method still exists for backward compatibility with old server versions.
+   */
+  async postCipherAttachmentAdminLegacy(id: string, data: FormData): Promise<CipherResponse> {
+    const r = await this.send("POST", "/ciphers/" + id + "/attachment-admin", data, true, true);
+    return new CipherResponse(r);
+  }
+
+  deleteCipherAttachment(id: string, attachmentId: string): Promise<any> {
+    return this.send("DELETE", "/ciphers/" + id + "/attachment/" + attachmentId, null, true, false);
+  }
+
+  deleteCipherAttachmentAdmin(id: string, attachmentId: string): Promise<any> {
+    return this.send(
+      "DELETE",
+      "/ciphers/" + id + "/attachment/" + attachmentId + "/admin",
+      null,
+      true,
+      false
+    );
+  }
+
+  postShareCipherAttachment(
+    id: string,
+    attachmentId: string,
+    data: FormData,
+    organizationId: string
+  ): Promise<any> {
+    return this.send(
+      "POST",
+      "/ciphers/" + id + "/attachment/" + attachmentId + "/share?organizationId=" + organizationId,
+      data,
+      true,
+      false
+    );
+  }
+
+  async renewAttachmentUploadUrl(
+    id: string,
+    attachmentId: string
+  ): Promise<AttachmentUploadDataResponse> {
+    const r = await this.send(
+      "GET",
+      "/ciphers/" + id + "/attachment/" + attachmentId + "/renew",
+      null,
+      true,
+      true
+    );
+    return new AttachmentUploadDataResponse(r);
+  }
+
+  postAttachmentFile(id: string, attachmentId: string, data: FormData): Promise<any> {
+    return this.send("POST", "/ciphers/" + id + "/attachment/" + attachmentId, data, true, false);
+  }
+
+  // Collections APIs
+
+  async getCollectionDetails(
+    organizationId: string,
+    id: string
+  ): Promise<CollectionGroupDetailsResponse> {
+    const r = await this.send(
+      "GET",
+      "/organizations/" + organizationId + "/collections/" + id + "/details",
+      null,
+      true,
+      true
+    );
+    return new CollectionGroupDetailsResponse(r);
+  }
+
+  async getUserCollections(): Promise<ListResponse<CollectionResponse>> {
+    const r = await this.send("GET", "/collections", null, true, true);
+    return new ListResponse(r, CollectionResponse);
+  }
+
+  async getCollections(organizationId: string): Promise<ListResponse<CollectionResponse>> {
+    const r = await this.send(
+      "GET",
+      "/organizations/" + organizationId + "/collections",
+      null,
+      true,
+      true
+    );
+    return new ListResponse(r, CollectionResponse);
+  }
+
+  async getCollectionUsers(
+    organizationId: string,
+    id: string
+  ): Promise<SelectionReadOnlyResponse[]> {
+    const r = await this.send(
+      "GET",
+      "/organizations/" + organizationId + "/collections/" + id + "/users",
+      null,
+      true,
+      true
+    );
+    return r.map((dr: any) => new SelectionReadOnlyResponse(dr));
+  }
+
+  async postCollection(
+    organizationId: string,
+    request: CollectionRequest
+  ): Promise<CollectionResponse> {
+    const r = await this.send(
+      "POST",
+      "/organizations/" + organizationId + "/collections",
+      request,
+      true,
+      true
+    );
+    return new CollectionResponse(r);
+  }
+
+  async putCollection(
+    organizationId: string,
+    id: string,
+    request: CollectionRequest
+  ): Promise<CollectionResponse> {
+    const r = await this.send(
+      "PUT",
+      "/organizations/" + organizationId + "/collections/" + id,
+      request,
+      true,
+      true
+    );
+    return new CollectionResponse(r);
+  }
+
+  async putCollectionUsers(
+    organizationId: string,
+    id: string,
+    request: SelectionReadOnlyRequest[]
+  ): Promise<any> {
+    await this.send(
+      "PUT",
+      "/organizations/" + organizationId + "/collections/" + id + "/users",
+      request,
+      true,
+      false
+    );
+  }
+
+  deleteCollection(organizationId: string, id: string): Promise<any> {
+    return this.send(
+      "DELETE",
+      "/organizations/" + organizationId + "/collections/" + id,
+      null,
+      true,
+      false
+    );
+  }
+
+  deleteCollectionUser(
+    organizationId: string,
+    id: string,
+    organizationUserId: string
+  ): Promise<any> {
+    return this.send(
+      "DELETE",
+      "/organizations/" + organizationId + "/collections/" + id + "/user/" + organizationUserId,
+      null,
+      true,
+      false
+    );
+  }
+
+  // Groups APIs
+
+  async getGroupDetails(organizationId: string, id: string): Promise<GroupDetailsResponse> {
+    const r = await this.send(
+      "GET",
+      "/organizations/" + organizationId + "/groups/" + id + "/details",
+      null,
+      true,
+      true
+    );
+    return new GroupDetailsResponse(r);
+  }
+
+  async getGroups(organizationId: string): Promise<ListResponse<GroupResponse>> {
+    const r = await this.send(
+      "GET",
+      "/organizations/" + organizationId + "/groups",
+      null,
+      true,
+      true
+    );
+    return new ListResponse(r, GroupResponse);
+  }
+
+  async getGroupUsers(organizationId: string, id: string): Promise<string[]> {
+    const r = await this.send(
+      "GET",
+      "/organizations/" + organizationId + "/groups/" + id + "/users",
+      null,
+      true,
+      true
+    );
+    return r;
+  }
+
+  async postGroup(organizationId: string, request: GroupRequest): Promise<GroupResponse> {
+    const r = await this.send(
+      "POST",
+      "/organizations/" + organizationId + "/groups",
+      request,
+      true,
+      true
+    );
+    return new GroupResponse(r);
+  }
+
+  async putGroup(
+    organizationId: string,
+    id: string,
+    request: GroupRequest
+  ): Promise<GroupResponse> {
+    const r = await this.send(
+      "PUT",
+      "/organizations/" + organizationId + "/groups/" + id,
+      request,
+      true,
+      true
+    );
+    return new GroupResponse(r);
+  }
+
+  async putGroupUsers(organizationId: string, id: string, request: string[]): Promise<any> {
+    await this.send(
+      "PUT",
+      "/organizations/" + organizationId + "/groups/" + id + "/users",
+      request,
+      true,
+      false
+    );
+  }
+
+  deleteGroup(organizationId: string, id: string): Promise<any> {
+    return this.send(
+      "DELETE",
+      "/organizations/" + organizationId + "/groups/" + id,
+      null,
+      true,
+      false
+    );
+  }
+
+  deleteGroupUser(organizationId: string, id: string, organizationUserId: string): Promise<any> {
+    return this.send(
+      "DELETE",
+      "/organizations/" + organizationId + "/groups/" + id + "/user/" + organizationUserId,
+      null,
+      true,
+      false
+    );
+  }
+
+  // Policy APIs
+
+  async getPolicy(organizationId: string, type: PolicyType): Promise<PolicyResponse> {
+    const r = await this.send(
+      "GET",
+      "/organizations/" + organizationId + "/policies/" + type,
+      null,
+      true,
+      true
+    );
+    return new PolicyResponse(r);
+  }
+
+  async getPolicies(organizationId: string): Promise<ListResponse<PolicyResponse>> {
+    const r = await this.send(
+      "GET",
+      "/organizations/" + organizationId + "/policies",
+      null,
+      true,
+      true
+    );
+    return new ListResponse(r, PolicyResponse);
+  }
+
+  async getPoliciesByToken(
+    organizationId: string,
+    token: string,
+    email: string,
+    organizationUserId: string
+  ): Promise<ListResponse<PolicyResponse>> {
+    const r = await this.send(
+      "GET",
+      "/organizations/" +
+        organizationId +
+        "/policies/token?" +
+        "token=" +
+        encodeURIComponent(token) +
+        "&email=" +
+        encodeURIComponent(email) +
+        "&organizationUserId=" +
+        organizationUserId,
+      null,
+      false,
+      true
+    );
+    return new ListResponse(r, PolicyResponse);
+  }
+
+  async getPoliciesByInvitedUser(
+    organizationId: string,
+    userId: string
+  ): Promise<ListResponse<PolicyResponse>> {
+    const r = await this.send(
+      "GET",
+      "/organizations/" + organizationId + "/policies/invited-user?" + "userId=" + userId,
+      null,
+      false,
+      true
+    );
+    return new ListResponse(r, PolicyResponse);
+  }
+
+  async putPolicy(
+    organizationId: string,
+    type: PolicyType,
+    request: PolicyRequest
+  ): Promise<PolicyResponse> {
+    const r = await this.send(
+      "PUT",
+      "/organizations/" + organizationId + "/policies/" + type,
+      request,
+      true,
+      true
+    );
+    return new PolicyResponse(r);
+  }
+
+  // Organization User APIs
+
+  async getOrganizationUser(
+    organizationId: string,
+    id: string
+  ): Promise<OrganizationUserDetailsResponse> {
+    const r = await this.send(
+      "GET",
+      "/organizations/" + organizationId + "/users/" + id,
+      null,
+      true,
+      true
+    );
+    return new OrganizationUserDetailsResponse(r);
+  }
+
+  async getOrganizationUserGroups(organizationId: string, id: string): Promise<string[]> {
+    const r = await this.send(
+      "GET",
+      "/organizations/" + organizationId + "/users/" + id + "/groups",
+      null,
+      true,
+      true
+    );
+    return r;
+  }
+
+  async getOrganizationUsers(
+    organizationId: string
+  ): Promise<ListResponse<OrganizationUserUserDetailsResponse>> {
+    const r = await this.send(
+      "GET",
+      "/organizations/" + organizationId + "/users",
+      null,
+      true,
+      true
+    );
+    return new ListResponse(r, OrganizationUserUserDetailsResponse);
+  }
+
+  async getOrganizationUserResetPasswordDetails(
+    organizationId: string,
+    id: string
+  ): Promise<OrganizationUserResetPasswordDetailsReponse> {
+    const r = await this.send(
+      "GET",
+      "/organizations/" + organizationId + "/users/" + id + "/reset-password-details",
+      null,
+      true,
+      true
+    );
+    return new OrganizationUserResetPasswordDetailsReponse(r);
+  }
+
+  async getOrganizationAutoEnrollStatus(
+    identifier: string
+  ): Promise<OrganizationAutoEnrollStatusResponse> {
+    const r = await this.send(
+      "GET",
+      "/organizations/" + identifier + "/auto-enroll-status",
+      null,
+      true,
+      true
+    );
+    return new OrganizationAutoEnrollStatusResponse(r);
+  }
+
+  postOrganizationUserInvite(
+    organizationId: string,
+    request: OrganizationUserInviteRequest
+  ): Promise<any> {
+    return this.send(
+      "POST",
+      "/organizations/" + organizationId + "/users/invite",
+      request,
+      true,
+      false
+    );
+  }
+
+  postOrganizationUserReinvite(organizationId: string, id: string): Promise<any> {
+    return this.send(
+      "POST",
+      "/organizations/" + organizationId + "/users/" + id + "/reinvite",
+      null,
+      true,
+      false
+    );
+  }
+
+  async postManyOrganizationUserReinvite(
+    organizationId: string,
+    request: OrganizationUserBulkRequest
+  ): Promise<ListResponse<OrganizationUserBulkResponse>> {
+    const r = await this.send(
+      "POST",
+      "/organizations/" + organizationId + "/users/reinvite",
+      request,
+      true,
+      true
+    );
+    return new ListResponse(r, OrganizationUserBulkResponse);
+  }
+
+  postOrganizationUserAccept(
+    organizationId: string,
+    id: string,
+    request: OrganizationUserAcceptRequest
+  ): Promise<any> {
+    return this.send(
+      "POST",
+      "/organizations/" + organizationId + "/users/" + id + "/accept",
+      request,
+      true,
+      false
+    );
+  }
+
+  postOrganizationUserConfirm(
+    organizationId: string,
+    id: string,
+    request: OrganizationUserConfirmRequest
+  ): Promise<any> {
+    return this.send(
+      "POST",
+      "/organizations/" + organizationId + "/users/" + id + "/confirm",
+      request,
+      true,
+      false
+    );
+  }
+
+  async postOrganizationUsersPublicKey(
+    organizationId: string,
+    request: OrganizationUserBulkRequest
+  ): Promise<ListResponse<OrganizationUserBulkPublicKeyResponse>> {
+    const r = await this.send(
+      "POST",
+      "/organizations/" + organizationId + "/users/public-keys",
+      request,
+      true,
+      true
+    );
+    return new ListResponse(r, OrganizationUserBulkPublicKeyResponse);
+  }
+
+  async postOrganizationUserBulkConfirm(
+    organizationId: string,
+    request: OrganizationUserBulkConfirmRequest
+  ): Promise<ListResponse<OrganizationUserBulkResponse>> {
+    const r = await this.send(
+      "POST",
+      "/organizations/" + organizationId + "/users/confirm",
+      request,
+      true,
+      true
+    );
+    return new ListResponse(r, OrganizationUserBulkResponse);
+  }
+
+  putOrganizationUser(
+    organizationId: string,
+    id: string,
+    request: OrganizationUserUpdateRequest
+  ): Promise<any> {
+    return this.send(
+      "PUT",
+      "/organizations/" + organizationId + "/users/" + id,
+      request,
+      true,
+      false
+    );
+  }
+
+  putOrganizationUserGroups(
+    organizationId: string,
+    id: string,
+    request: OrganizationUserUpdateGroupsRequest
+  ): Promise<any> {
+    return this.send(
+      "PUT",
+      "/organizations/" + organizationId + "/users/" + id + "/groups",
+      request,
+      true,
+      false
+    );
+  }
+
+  putOrganizationUserResetPasswordEnrollment(
+    organizationId: string,
+    userId: string,
+    request: OrganizationUserResetPasswordEnrollmentRequest
+  ): Promise<any> {
+    return this.send(
+      "PUT",
+      "/organizations/" + organizationId + "/users/" + userId + "/reset-password-enrollment",
+      request,
+      true,
+      false
+    );
+  }
+
+  putOrganizationUserResetPassword(
+    organizationId: string,
+    id: string,
+    request: OrganizationUserResetPasswordRequest
+  ): Promise<any> {
+    return this.send(
+      "PUT",
+      "/organizations/" + organizationId + "/users/" + id + "/reset-password",
+      request,
+      true,
+      false
+    );
+  }
+
+  deleteOrganizationUser(organizationId: string, id: string): Promise<any> {
+    return this.send(
+      "DELETE",
+      "/organizations/" + organizationId + "/users/" + id,
+      null,
+      true,
+      false
+    );
+  }
+
+  async deleteManyOrganizationUsers(
+    organizationId: string,
+    request: OrganizationUserBulkRequest
+  ): Promise<ListResponse<OrganizationUserBulkResponse>> {
+    const r = await this.send(
+      "DELETE",
+      "/organizations/" + organizationId + "/users",
+      request,
+      true,
+      true
+    );
+    return new ListResponse(r, OrganizationUserBulkResponse);
+  }
+
+  // Plan APIs
+
+  async getPlans(): Promise<ListResponse<PlanResponse>> {
+    const r = await this.send("GET", "/plans/", null, true, true);
+    return new ListResponse(r, PlanResponse);
+  }
+
+  async postImportDirectory(organizationId: string, request: ImportDirectoryRequest): Promise<any> {
+    return this.send("POST", "/organizations/" + organizationId + "/import", request, true, false);
+  }
+
+  async postPublicImportDirectory(request: OrganizationImportRequest): Promise<any> {
+    return this.send("POST", "/public/organization/import", request, true, false);
+  }
+
+  async getTaxRates(): Promise<ListResponse<TaxRateResponse>> {
+    const r = await this.send("GET", "/plans/sales-tax-rates/", null, true, true);
+    return new ListResponse(r, TaxRateResponse);
+  }
+
+  // Settings APIs
+
+  async getSettingsDomains(): Promise<DomainsResponse> {
+    const r = await this.send("GET", "/settings/domains", null, true, true);
+    return new DomainsResponse(r);
+  }
+
+  async putSettingsDomains(request: UpdateDomainsRequest): Promise<DomainsResponse> {
+    const r = await this.send("PUT", "/settings/domains", request, true, true);
+    return new DomainsResponse(r);
+  }
+
+  // Sync APIs
+
+  async getSync(): Promise<SyncResponse> {
+    const path = this.isDesktopClient || this.isWebClient ? "/sync?excludeDomains=true" : "/sync";
+    const r = await this.send("GET", path, null, true, true);
+    return new SyncResponse(r);
+  }
+
+  // Two-factor APIs
+
+  async getTwoFactorProviders(): Promise<ListResponse<TwoFactorProviderResponse>> {
+    const r = await this.send("GET", "/two-factor", null, true, true);
+    return new ListResponse(r, TwoFactorProviderResponse);
+  }
+
+  async getTwoFactorOrganizationProviders(
+    organizationId: string
+  ): Promise<ListResponse<TwoFactorProviderResponse>> {
+    const r = await this.send(
+      "GET",
+      "/organizations/" + organizationId + "/two-factor",
+      null,
+      true,
+      true
+    );
+    return new ListResponse(r, TwoFactorProviderResponse);
+  }
+
+  async getTwoFactorAuthenticator(
+    request: SecretVerificationRequest
+  ): Promise<TwoFactorAuthenticatorResponse> {
+    const r = await this.send("POST", "/two-factor/get-authenticator", request, true, true);
+    return new TwoFactorAuthenticatorResponse(r);
+  }
+
+  async getTwoFactorEmail(request: SecretVerificationRequest): Promise<TwoFactorEmailResponse> {
+    const r = await this.send("POST", "/two-factor/get-email", request, true, true);
+    return new TwoFactorEmailResponse(r);
+  }
+
+  async getTwoFactorDuo(request: SecretVerificationRequest): Promise<TwoFactorDuoResponse> {
+    const r = await this.send("POST", "/two-factor/get-duo", request, true, true);
+    return new TwoFactorDuoResponse(r);
+  }
+
+  async getTwoFactorOrganizationDuo(
+    organizationId: string,
+    request: SecretVerificationRequest
+  ): Promise<TwoFactorDuoResponse> {
+    const r = await this.send(
+      "POST",
+      "/organizations/" + organizationId + "/two-factor/get-duo",
+      request,
+      true,
+      true
+    );
+    return new TwoFactorDuoResponse(r);
+  }
+
+  async getTwoFactorYubiKey(request: SecretVerificationRequest): Promise<TwoFactorYubiKeyResponse> {
+    const r = await this.send("POST", "/two-factor/get-yubikey", request, true, true);
+    return new TwoFactorYubiKeyResponse(r);
+  }
+
+  async getTwoFactorWebAuthn(
+    request: SecretVerificationRequest
+  ): Promise<TwoFactorWebAuthnResponse> {
+    const r = await this.send("POST", "/two-factor/get-webauthn", request, true, true);
+    return new TwoFactorWebAuthnResponse(r);
+  }
+
+  async getTwoFactorWebAuthnChallenge(
+    request: SecretVerificationRequest
+  ): Promise<ChallengeResponse> {
+    const r = await this.send("POST", "/two-factor/get-webauthn-challenge", request, true, true);
+    return new ChallengeResponse(r);
+  }
+
+  async getTwoFactorRecover(request: SecretVerificationRequest): Promise<TwoFactorRecoverResponse> {
+    const r = await this.send("POST", "/two-factor/get-recover", request, true, true);
+    return new TwoFactorRecoverResponse(r);
+  }
+
+  async putTwoFactorAuthenticator(
+    request: UpdateTwoFactorAuthenticatorRequest
+  ): Promise<TwoFactorAuthenticatorResponse> {
+    const r = await this.send("PUT", "/two-factor/authenticator", request, true, true);
+    return new TwoFactorAuthenticatorResponse(r);
+  }
+
+  async putTwoFactorEmail(request: UpdateTwoFactorEmailRequest): Promise<TwoFactorEmailResponse> {
+    const r = await this.send("PUT", "/two-factor/email", request, true, true);
+    return new TwoFactorEmailResponse(r);
+  }
+
+  async putTwoFactorDuo(request: UpdateTwoFactorDuoRequest): Promise<TwoFactorDuoResponse> {
+    const r = await this.send("PUT", "/two-factor/duo", request, true, true);
+    return new TwoFactorDuoResponse(r);
+  }
+
+  async putTwoFactorOrganizationDuo(
+    organizationId: string,
+    request: UpdateTwoFactorDuoRequest
+  ): Promise<TwoFactorDuoResponse> {
+    const r = await this.send(
+      "PUT",
+      "/organizations/" + organizationId + "/two-factor/duo",
+      request,
+      true,
+      true
+    );
+    return new TwoFactorDuoResponse(r);
+  }
+
+  async putTwoFactorYubiKey(
+    request: UpdateTwoFactorYubioOtpRequest
+  ): Promise<TwoFactorYubiKeyResponse> {
+    const r = await this.send("PUT", "/two-factor/yubikey", request, true, true);
+    return new TwoFactorYubiKeyResponse(r);
+  }
+
+  async putTwoFactorWebAuthn(
+    request: UpdateTwoFactorWebAuthnRequest
+  ): Promise<TwoFactorWebAuthnResponse> {
+    const response = request.deviceResponse.response as AuthenticatorAttestationResponse;
+    const data: any = Object.assign({}, request);
+
+    data.deviceResponse = {
+      id: request.deviceResponse.id,
+      rawId: btoa(request.deviceResponse.id),
+      type: request.deviceResponse.type,
+      extensions: request.deviceResponse.getClientExtensionResults(),
+      response: {
+        AttestationObject: Utils.fromBufferToB64(response.attestationObject),
+        clientDataJson: Utils.fromBufferToB64(response.clientDataJSON),
+      },
+    };
+
+    const r = await this.send("PUT", "/two-factor/webauthn", data, true, true);
+    return new TwoFactorWebAuthnResponse(r);
+  }
+
+  async deleteTwoFactorWebAuthn(
+    request: UpdateTwoFactorWebAuthnDeleteRequest
+  ): Promise<TwoFactorWebAuthnResponse> {
+    const r = await this.send("DELETE", "/two-factor/webauthn", request, true, true);
+    return new TwoFactorWebAuthnResponse(r);
+  }
+
+  async putTwoFactorDisable(request: TwoFactorProviderRequest): Promise<TwoFactorProviderResponse> {
+    const r = await this.send("PUT", "/two-factor/disable", request, true, true);
+    return new TwoFactorProviderResponse(r);
+  }
+
+  async putTwoFactorOrganizationDisable(
+    organizationId: string,
+    request: TwoFactorProviderRequest
+  ): Promise<TwoFactorProviderResponse> {
+    const r = await this.send(
+      "PUT",
+      "/organizations/" + organizationId + "/two-factor/disable",
+      request,
+      true,
+      true
+    );
+    return new TwoFactorProviderResponse(r);
+  }
+
+  postTwoFactorRecover(request: TwoFactorRecoveryRequest): Promise<any> {
+    return this.send("POST", "/two-factor/recover", request, false, false);
+  }
+
+  postTwoFactorEmailSetup(request: TwoFactorEmailRequest): Promise<any> {
+    return this.send("POST", "/two-factor/send-email", request, true, false);
+  }
+
+  postTwoFactorEmail(request: TwoFactorEmailRequest): Promise<any> {
+    return this.send("POST", "/two-factor/send-email-login", request, false, false);
+  }
+
+  // Emergency Access APIs
+
+  async getEmergencyAccessTrusted(): Promise<ListResponse<EmergencyAccessGranteeDetailsResponse>> {
+    const r = await this.send("GET", "/emergency-access/trusted", null, true, true);
+    return new ListResponse(r, EmergencyAccessGranteeDetailsResponse);
+  }
+
+  async getEmergencyAccessGranted(): Promise<ListResponse<EmergencyAccessGrantorDetailsResponse>> {
+    const r = await this.send("GET", "/emergency-access/granted", null, true, true);
+    return new ListResponse(r, EmergencyAccessGrantorDetailsResponse);
+  }
+
+  async getEmergencyAccess(id: string): Promise<EmergencyAccessGranteeDetailsResponse> {
+    const r = await this.send("GET", "/emergency-access/" + id, null, true, true);
+    return new EmergencyAccessGranteeDetailsResponse(r);
+  }
+
+  async getEmergencyGrantorPolicies(id: string): Promise<ListResponse<PolicyResponse>> {
+    const r = await this.send("GET", "/emergency-access/" + id + "/policies", null, true, true);
+    return new ListResponse(r, PolicyResponse);
+  }
+
+  putEmergencyAccess(id: string, request: EmergencyAccessUpdateRequest): Promise<any> {
+    return this.send("PUT", "/emergency-access/" + id, request, true, false);
+  }
+
+  deleteEmergencyAccess(id: string): Promise<any> {
+    return this.send("DELETE", "/emergency-access/" + id, null, true, false);
+  }
+
+  postEmergencyAccessInvite(request: EmergencyAccessInviteRequest): Promise<any> {
+    return this.send("POST", "/emergency-access/invite", request, true, false);
+  }
+
+  postEmergencyAccessReinvite(id: string): Promise<any> {
+    return this.send("POST", "/emergency-access/" + id + "/reinvite", null, true, false);
+  }
+
+  postEmergencyAccessAccept(id: string, request: EmergencyAccessAcceptRequest): Promise<any> {
+    return this.send("POST", "/emergency-access/" + id + "/accept", request, true, false);
+  }
+
+  postEmergencyAccessConfirm(id: string, request: EmergencyAccessConfirmRequest): Promise<any> {
+    return this.send("POST", "/emergency-access/" + id + "/confirm", request, true, false);
+  }
+
+  postEmergencyAccessInitiate(id: string): Promise<any> {
+    return this.send("POST", "/emergency-access/" + id + "/initiate", null, true, false);
+  }
+
+  postEmergencyAccessApprove(id: string): Promise<any> {
+    return this.send("POST", "/emergency-access/" + id + "/approve", null, true, false);
+  }
+
+  postEmergencyAccessReject(id: string): Promise<any> {
+    return this.send("POST", "/emergency-access/" + id + "/reject", null, true, false);
+  }
+
+  async postEmergencyAccessTakeover(id: string): Promise<EmergencyAccessTakeoverResponse> {
+    const r = await this.send("POST", "/emergency-access/" + id + "/takeover", null, true, true);
+    return new EmergencyAccessTakeoverResponse(r);
+  }
+
+  async postEmergencyAccessPassword(
+    id: string,
+    request: EmergencyAccessPasswordRequest
+  ): Promise<any> {
+    const r = await this.send("POST", "/emergency-access/" + id + "/password", request, true, true);
+  }
+
+  async postEmergencyAccessView(id: string): Promise<EmergencyAccessViewResponse> {
+    const r = await this.send("POST", "/emergency-access/" + id + "/view", null, true, true);
+    return new EmergencyAccessViewResponse(r);
+  }
+
+  // Organization APIs
+
+  async getOrganization(id: string): Promise<OrganizationResponse> {
+    const r = await this.send("GET", "/organizations/" + id, null, true, true);
+    return new OrganizationResponse(r);
+  }
+
+  async getOrganizationBilling(id: string): Promise<BillingResponse> {
+    const r = await this.send("GET", "/organizations/" + id + "/billing", null, true, true);
+    return new BillingResponse(r);
+  }
+
+  async getOrganizationSubscription(id: string): Promise<OrganizationSubscriptionResponse> {
+    const r = await this.send("GET", "/organizations/" + id + "/subscription", null, true, true);
+    return new OrganizationSubscriptionResponse(r);
+  }
+
+  async getOrganizationLicense(id: string, installationId: string): Promise<any> {
+    return this.send(
+      "GET",
+      "/organizations/" + id + "/license?installationId=" + installationId,
+      null,
+      true,
+      true
+    );
+  }
+
+  async getOrganizationTaxInfo(id: string): Promise<TaxInfoResponse> {
+    const r = await this.send("GET", "/organizations/" + id + "/tax", null, true, true);
+    return new TaxInfoResponse(r);
+  }
+
+  async getOrganizationSso(id: string): Promise<OrganizationSsoResponse> {
+    const r = await this.send("GET", "/organizations/" + id + "/sso", null, true, true);
+    return new OrganizationSsoResponse(r);
+  }
+
+  async postOrganization(request: OrganizationCreateRequest): Promise<OrganizationResponse> {
+    const r = await this.send("POST", "/organizations", request, true, true);
+    return new OrganizationResponse(r);
+  }
+
+  async putOrganization(
+    id: string,
+    request: OrganizationUpdateRequest
+  ): Promise<OrganizationResponse> {
+    const r = await this.send("PUT", "/organizations/" + id, request, true, true);
+    return new OrganizationResponse(r);
+  }
+
+  async getSsoConfig(id: string): Promise<SsoConfigResponse> {
+      const r = await this.send('GET', '/organizations/' + id + '/sso', null, true, true);
+      return new SsoConfigResponse(r);
+  }
+
+  async putOrganizationSso(id: string, request: OrganizationSsoUpdateRequest): Promise<SsoConfigResponse> {
+      const r = await this.send('PUT', '/organizations/' + id + '/sso', request, true, false);
+      return new SsoConfigResponse(r);
+  }
+
+  async putOrganizationTaxInfo(
+    id: string,
+    request: OrganizationTaxInfoUpdateRequest
+  ): Promise<any> {
+    return this.send("PUT", "/organizations/" + id + "/tax", request, true, false);
+  }
+
+  postLeaveOrganization(id: string): Promise<any> {
+    return this.send("POST", "/organizations/" + id + "/leave", null, true, false);
+  }
+
+  async postOrganizationLicense(data: FormData): Promise<OrganizationResponse> {
+    const r = await this.send("POST", "/organizations/license", data, true, true);
+    return new OrganizationResponse(r);
+  }
+
+  async postOrganizationLicenseUpdate(id: string, data: FormData): Promise<any> {
+    return this.send("POST", "/organizations/" + id + "/license", data, true, false);
+  }
+
+  async postOrganizationApiKey(
+    id: string,
+    request: SecretVerificationRequest
+  ): Promise<ApiKeyResponse> {
+    const r = await this.send("POST", "/organizations/" + id + "/api-key", request, true, true);
+    return new ApiKeyResponse(r);
+  }
+
+  async postOrganizationRotateApiKey(
+    id: string,
+    request: SecretVerificationRequest
+  ): Promise<ApiKeyResponse> {
+    const r = await this.send(
+      "POST",
+      "/organizations/" + id + "/rotate-api-key",
+      request,
+      true,
+      true
+    );
+    return new ApiKeyResponse(r);
+  }
+
+  async postOrganizationSso(
+    id: string,
+    request: OrganizationSsoRequest
+  ): Promise<OrganizationSsoResponse> {
+    const r = await this.send("POST", "/organizations/" + id + "/sso", request, true, true);
+    return new OrganizationSsoResponse(r);
+  }
+
+  async postOrganizationUpgrade(
+    id: string,
+    request: OrganizationUpgradeRequest
+  ): Promise<PaymentResponse> {
+    const r = await this.send("POST", "/organizations/" + id + "/upgrade", request, true, true);
+    return new PaymentResponse(r);
+  }
+
+  async postOrganizationUpdateSubscription(
+    id: string,
+    request: OrganizationSubscriptionUpdateRequest
+  ): Promise<void> {
+    return this.send("POST", "/organizations/" + id + "/subscription", request, true, false);
+  }
+
+  async postOrganizationSeat(id: string, request: SeatRequest): Promise<PaymentResponse> {
+    const r = await this.send("POST", "/organizations/" + id + "/seat", request, true, true);
+    return new PaymentResponse(r);
+  }
+
+  async postOrganizationStorage(id: string, request: StorageRequest): Promise<PaymentResponse> {
+    const r = await this.send("POST", "/organizations/" + id + "/storage", request, true, true);
+    return new PaymentResponse(r);
+  }
+
+  postOrganizationPayment(id: string, request: PaymentRequest): Promise<any> {
+    return this.send("POST", "/organizations/" + id + "/payment", request, true, false);
+  }
+
+  postOrganizationVerifyBank(id: string, request: VerifyBankRequest): Promise<any> {
+    return this.send("POST", "/organizations/" + id + "/verify-bank", request, true, false);
+  }
+
+  postOrganizationCancel(id: string): Promise<any> {
+    return this.send("POST", "/organizations/" + id + "/cancel", null, true, false);
+  }
+
+  postOrganizationReinstate(id: string): Promise<any> {
+    return this.send("POST", "/organizations/" + id + "/reinstate", null, true, false);
+  }
+
+  deleteOrganization(id: string, request: SecretVerificationRequest): Promise<any> {
+    return this.send("DELETE", "/organizations/" + id, request, true, false);
+  }
+
+  async getOrganizationKeys(id: string): Promise<OrganizationKeysResponse> {
+    const r = await this.send("GET", "/organizations/" + id + "/keys", null, true, true);
+    return new OrganizationKeysResponse(r);
+  }
+
+  async postOrganizationKeys(
+    id: string,
+    request: OrganizationKeysRequest
+  ): Promise<OrganizationKeysResponse> {
+    const r = await this.send("POST", "/organizations/" + id + "/keys", request, true, true);
+    return new OrganizationKeysResponse(r);
+  }
+
+  // Provider APIs
+
+  async postProviderSetup(id: string, request: ProviderSetupRequest) {
+    const r = await this.send("POST", "/providers/" + id + "/setup", request, true, true);
+    return new ProviderResponse(r);
+  }
+
+  async getProvider(id: string) {
+    const r = await this.send("GET", "/providers/" + id, null, true, true);
+    return new ProviderResponse(r);
+  }
+
+  async putProvider(id: string, request: ProviderUpdateRequest) {
+    const r = await this.send("PUT", "/providers/" + id, request, true, true);
+    return new ProviderResponse(r);
+  }
+
+  // Provider User APIs
+
+  async getProviderUsers(
+    providerId: string
+  ): Promise<ListResponse<ProviderUserUserDetailsResponse>> {
+    const r = await this.send("GET", "/providers/" + providerId + "/users", null, true, true);
+    return new ListResponse(r, ProviderUserUserDetailsResponse);
+  }
+
+  async getProviderUser(providerId: string, id: string): Promise<ProviderUserResponse> {
+    const r = await this.send("GET", "/providers/" + providerId + "/users/" + id, null, true, true);
+    return new ProviderUserResponse(r);
+  }
+
+  postProviderUserInvite(providerId: string, request: ProviderUserInviteRequest): Promise<any> {
+    return this.send("POST", "/providers/" + providerId + "/users/invite", request, true, false);
+  }
+
+  postProviderUserReinvite(providerId: string, id: string): Promise<any> {
+    return this.send(
+      "POST",
+      "/providers/" + providerId + "/users/" + id + "/reinvite",
+      null,
+      true,
+      false
+    );
+  }
+
+  async postManyProviderUserReinvite(
+    providerId: string,
+    request: ProviderUserBulkRequest
+  ): Promise<ListResponse<ProviderUserBulkResponse>> {
+    const r = await this.send(
+      "POST",
+      "/providers/" + providerId + "/users/reinvite",
+      request,
+      true,
+      true
+    );
+    return new ListResponse(r, ProviderUserBulkResponse);
+  }
+
+  async postProviderUserBulkConfirm(
+    providerId: string,
+    request: ProviderUserBulkConfirmRequest
+  ): Promise<ListResponse<ProviderUserBulkResponse>> {
+    const r = await this.send(
+      "POST",
+      "/providers/" + providerId + "/users/confirm",
+      request,
+      true,
+      true
+    );
+    return new ListResponse(r, ProviderUserBulkResponse);
+  }
+
+  async deleteManyProviderUsers(
+    providerId: string,
+    request: ProviderUserBulkRequest
+  ): Promise<ListResponse<ProviderUserBulkResponse>> {
+    const r = await this.send("DELETE", "/providers/" + providerId + "/users", request, true, true);
+    return new ListResponse(r, ProviderUserBulkResponse);
+  }
+
+  postProviderUserAccept(
+    providerId: string,
+    id: string,
+    request: ProviderUserAcceptRequest
+  ): Promise<any> {
+    return this.send(
+      "POST",
+      "/providers/" + providerId + "/users/" + id + "/accept",
+      request,
+      true,
+      false
+    );
+  }
+
+  postProviderUserConfirm(
+    providerId: string,
+    id: string,
+    request: ProviderUserConfirmRequest
+  ): Promise<any> {
+    return this.send(
+      "POST",
+      "/providers/" + providerId + "/users/" + id + "/confirm",
+      request,
+      true,
+      false
+    );
+  }
+
+  async postProviderUsersPublicKey(
+    providerId: string,
+    request: ProviderUserBulkRequest
+  ): Promise<ListResponse<ProviderUserBulkPublicKeyResponse>> {
+    const r = await this.send(
+      "POST",
+      "/providers/" + providerId + "/users/public-keys",
+      request,
+      true,
+      true
+    );
+    return new ListResponse(r, ProviderUserBulkPublicKeyResponse);
+  }
+
+  putProviderUser(
+    providerId: string,
+    id: string,
+    request: ProviderUserUpdateRequest
+  ): Promise<any> {
+    return this.send("PUT", "/providers/" + providerId + "/users/" + id, request, true, false);
+  }
+
+  deleteProviderUser(providerId: string, id: string): Promise<any> {
+    return this.send("DELETE", "/providers/" + providerId + "/users/" + id, null, true, false);
+  }
+
+  // Provider Organization APIs
+
+  async getProviderClients(
+    providerId: string
+  ): Promise<ListResponse<ProviderOrganizationOrganizationDetailsResponse>> {
+    const r = await this.send(
+      "GET",
+      "/providers/" + providerId + "/organizations",
+      null,
+      true,
+      true
+    );
+    return new ListResponse(r, ProviderOrganizationOrganizationDetailsResponse);
+  }
+
+  postProviderAddOrganization(
+    providerId: string,
+    request: ProviderAddOrganizationRequest
+  ): Promise<any> {
+    return this.send(
+      "POST",
+      "/providers/" + providerId + "/organizations/add",
+      request,
+      true,
+      false
+    );
+  }
+
+  async postProviderCreateOrganization(
+    providerId: string,
+    request: ProviderOrganizationCreateRequest
+  ): Promise<ProviderOrganizationResponse> {
+    const r = await this.send(
+      "POST",
+      "/providers/" + providerId + "/organizations",
+      request,
+      true,
+      true
+    );
+    return new ProviderOrganizationResponse(r);
+  }
+
+  deleteProviderOrganization(providerId: string, id: string): Promise<any> {
+    return this.send(
+      "DELETE",
+      "/providers/" + providerId + "/organizations/" + id,
+      null,
+      true,
+      false
+    );
+  }
+
+  // Event APIs
+
+  async getEvents(start: string, end: string, token: string): Promise<ListResponse<EventResponse>> {
+    const r = await this.send(
+      "GET",
+      this.addEventParameters("/events", start, end, token),
+      null,
+      true,
+      true
+    );
+    return new ListResponse(r, EventResponse);
+  }
+
+  async getEventsCipher(
+    id: string,
+    start: string,
+    end: string,
+    token: string
+  ): Promise<ListResponse<EventResponse>> {
+    const r = await this.send(
+      "GET",
+      this.addEventParameters("/ciphers/" + id + "/events", start, end, token),
+      null,
+      true,
+      true
+    );
+    return new ListResponse(r, EventResponse);
+  }
+
+  async getEventsOrganization(
+    id: string,
+    start: string,
+    end: string,
+    token: string
+  ): Promise<ListResponse<EventResponse>> {
+    const r = await this.send(
+      "GET",
+      this.addEventParameters("/organizations/" + id + "/events", start, end, token),
+      null,
+      true,
+      true
+    );
+    return new ListResponse(r, EventResponse);
+  }
+
+  async getEventsOrganizationUser(
+    organizationId: string,
+    id: string,
+    start: string,
+    end: string,
+    token: string
+  ): Promise<ListResponse<EventResponse>> {
+    const r = await this.send(
+      "GET",
+      this.addEventParameters(
+        "/organizations/" + organizationId + "/users/" + id + "/events",
+        start,
+        end,
+        token
+      ),
+      null,
+      true,
+      true
+    );
+    return new ListResponse(r, EventResponse);
+  }
+
+  async getEventsProvider(
+    id: string,
+    start: string,
+    end: string,
+    token: string
+  ): Promise<ListResponse<EventResponse>> {
+    const r = await this.send(
+      "GET",
+      this.addEventParameters("/providers/" + id + "/events", start, end, token),
+      null,
+      true,
+      true
+    );
+    return new ListResponse(r, EventResponse);
+  }
+
+  async getEventsProviderUser(
+    providerId: string,
+    id: string,
+    start: string,
+    end: string,
+    token: string
+  ): Promise<ListResponse<EventResponse>> {
+    const r = await this.send(
+      "GET",
+      this.addEventParameters(
+        "/providers/" + providerId + "/users/" + id + "/events",
+        start,
+        end,
+        token
+      ),
+      null,
+      true,
+      true
+    );
+    return new ListResponse(r, EventResponse);
+  }
+
+  async postEventsCollect(request: EventRequest[]): Promise<any> {
+    const authHeader = await this.getActiveBearerToken();
+    const headers = new Headers({
+      "Device-Type": this.deviceType,
+      Authorization: "Bearer " + authHeader,
+      "Content-Type": "application/json; charset=utf-8",
+    });
+    if (this.customUserAgent != null) {
+      headers.set("User-Agent", this.customUserAgent);
+    }
+    const response = await this.fetch(
+      new Request(this.environmentService.getEventsUrl() + "/collect", {
+        cache: "no-store",
+        credentials: this.getCredentials(),
+        method: "POST",
+        body: JSON.stringify(request),
+        headers: headers,
+      })
+    );
+    if (response.status !== 200) {
+      return Promise.reject("Event post failed.");
+    }
+  }
+
+  // User APIs
+
+  async getUserPublicKey(id: string): Promise<UserKeyResponse> {
+    const r = await this.send("GET", "/users/" + id + "/public-key", null, true, true);
+    return new UserKeyResponse(r);
+  }
+
+  // HIBP APIs
+
+  async getHibpBreach(username: string): Promise<BreachAccountResponse[]> {
+    const r = await this.send("GET", "/hibp/breach?username=" + username, null, true, true);
+    return r.map((a: any) => new BreachAccountResponse(a));
+  }
+
+  // Misc
+
+  async postBitPayInvoice(request: BitPayInvoiceRequest): Promise<string> {
+    const r = await this.send("POST", "/bitpay-invoice", request, true, true);
+    return r as string;
+  }
+
+  async postSetupPayment(): Promise<string> {
+    const r = await this.send("POST", "/setup-payment", null, true, true);
+    return r as string;
+  }
+
+  // Key Connector
+
+  async getUserKeyFromKeyConnector(keyConnectorUrl: string): Promise<KeyConnectorUserKeyResponse> {
+    const authHeader = await this.getActiveBearerToken();
+
+    const response = await this.fetch(
+      new Request(keyConnectorUrl + "/user-keys", {
+        cache: "no-store",
+        method: "GET",
+        headers: new Headers({
+          Accept: "application/json",
+          Authorization: "Bearer " + authHeader,
+        }),
+      })
+    );
+
+    if (response.status !== 200) {
+      const error = await this.handleError(response, false, true);
+      return Promise.reject(error);
+    }
+
+    return new KeyConnectorUserKeyResponse(await response.json());
+  }
+
+  async postUserKeyToKeyConnector(
+    keyConnectorUrl: string,
+    request: KeyConnectorUserKeyRequest
+  ): Promise<void> {
+    const authHeader = await this.getActiveBearerToken();
+
+    const response = await this.fetch(
+      new Request(keyConnectorUrl + "/user-keys", {
+        cache: "no-store",
+        method: "POST",
+        headers: new Headers({
+          Accept: "application/json",
+          Authorization: "Bearer " + authHeader,
+          "Content-Type": "application/json; charset=utf-8",
+        }),
+        body: JSON.stringify(request),
+      })
+    );
+
+    if (response.status !== 200) {
+      const error = await this.handleError(response, false, true);
+      return Promise.reject(error);
+    }
+  }
+
+  async getKeyConnectorAlive(keyConnectorUrl: string) {
+    const response = await this.fetch(
+      new Request(keyConnectorUrl + "/alive", {
+        cache: "no-store",
+        method: "GET",
+        headers: new Headers({
+          Accept: "application/json",
+          "Content-Type": "application/json; charset=utf-8",
+        }),
+      })
+    );
+
+    if (response.status !== 200) {
+      const error = await this.handleError(response, false, true);
+      return Promise.reject(error);
+    }
+  }
+
+  // Helpers
+
+  async getActiveBearerToken(): Promise<string> {
+    let accessToken = await this.tokenService.getToken();
+    if (await this.tokenService.tokenNeedsRefresh()) {
+      await this.doAuthRefresh();
+      accessToken = await this.tokenService.getToken();
+    }
+    return accessToken;
+  }
+
+  fetch(request: Request): Promise<Response> {
+    if (request.method === "GET") {
+      request.headers.set("Cache-Control", "no-store");
+      request.headers.set("Pragma", "no-cache");
+    }
+    return this.nativeFetch(request);
+  }
+
+  nativeFetch(request: Request): Promise<Response> {
+    return fetch(request);
+  }
+
+  async preValidateSso(identifier: string): Promise<boolean> {
+    if (identifier == null || identifier === "") {
+      throw new Error("Organization Identifier was not provided.");
+    }
+    const headers = new Headers({
+      Accept: "application/json",
+      "Device-Type": this.deviceType,
+    });
+    if (this.customUserAgent != null) {
+      headers.set("User-Agent", this.customUserAgent);
+    }
+
+    const path = `/account/prevalidate?domainHint=${encodeURIComponent(identifier)}`;
+    const response = await this.fetch(
+      new Request(this.environmentService.getIdentityUrl() + path, {
+        cache: "no-store",
+        credentials: this.getCredentials(),
+        headers: headers,
+        method: "GET",
+      })
+    );
+
+    if (response.status === 200) {
+      return true;
+    } else {
+      const error = await this.handleError(response, false, true);
+      return Promise.reject(error);
+    }
+  }
+
+  async postCreateSponsorship(
+    sponsoredOrgId: string,
+    request: OrganizationSponsorshipCreateRequest
+  ): Promise<void> {
+    return await this.send(
+      "POST",
+      "/organization/sponsorship/" + sponsoredOrgId + "/families-for-enterprise",
+      request,
+      true,
+      false
+    );
+  }
+
+  async deleteRevokeSponsorship(sponsoringOrganizationId: string): Promise<void> {
+    return await this.send(
+      "DELETE",
+      "/organization/sponsorship/" + sponsoringOrganizationId,
+      null,
+      true,
+      false
+    );
+  }
+
+  async deleteRemoveSponsorship(sponsoringOrgId: string): Promise<void> {
+    return await this.send(
+      "DELETE",
+      "/organization/sponsorship/sponsored/" + sponsoringOrgId,
+      null,
+      true,
+      false
+    );
+  }
+
+  async postPreValidateSponsorshipToken(sponsorshipToken: string): Promise<boolean> {
+    const r = await this.send(
+      "POST",
+      "/organization/sponsorship/validate-token?sponsorshipToken=" +
+        encodeURIComponent(sponsorshipToken),
+      null,
+      true,
+      true
+    );
+    return r as boolean;
+  }
+
+  async postRedeemSponsorship(
+    sponsorshipToken: string,
+    request: OrganizationSponsorshipRedeemRequest
+  ): Promise<void> {
+    return await this.send(
+      "POST",
+      "/organization/sponsorship/redeem?sponsorshipToken=" + encodeURIComponent(sponsorshipToken),
+      request,
+      true,
+      false
+    );
+  }
+
+  async postResendSponsorshipOffer(sponsoringOrgId: string): Promise<void> {
+    return await this.send(
+      "POST",
+      "/organization/sponsorship/" + sponsoringOrgId + "/families-for-enterprise/resend",
+      null,
+      true,
+      false
+    );
+  }
+
+  protected async doAuthRefresh(): Promise<void> {
+    const refreshToken = await this.tokenService.getRefreshToken();
+    if (refreshToken != null && refreshToken !== "") {
+      return this.doRefreshToken();
+    }
+
+    const clientId = await this.tokenService.getClientId();
+    const clientSecret = await this.tokenService.getClientSecret();
+    if (!Utils.isNullOrWhitespace(clientId) && !Utils.isNullOrWhitespace(clientSecret)) {
+      return this.doApiTokenRefresh();
+    }
+
+    throw new Error("Cannot refresh token, no refresh token or api keys are stored");
+  }
+
+  protected async doApiTokenRefresh(): Promise<void> {
+    const clientId = await this.tokenService.getClientId();
+    const clientSecret = await this.tokenService.getClientSecret();
+    if (
+      Utils.isNullOrWhitespace(clientId) ||
+      Utils.isNullOrWhitespace(clientSecret) ||
+      this.apiKeyRefresh == null
+    ) {
+      throw new Error();
+    }
+
+    await this.apiKeyRefresh(clientId, clientSecret);
+  }
+
+  protected async doRefreshToken(): Promise<void> {
+    const refreshToken = await this.tokenService.getRefreshToken();
+    if (refreshToken == null || refreshToken === "") {
+      throw new Error();
+    }
+    const headers = new Headers({
+      "Content-Type": "application/x-www-form-urlencoded; charset=utf-8",
+      Accept: "application/json",
+      "Device-Type": this.deviceType,
+    });
+    if (this.customUserAgent != null) {
+      headers.set("User-Agent", this.customUserAgent);
+    }
+
+    const decodedToken = await this.tokenService.decodeToken();
+    const response = await this.fetch(
+      new Request(this.environmentService.getIdentityUrl() + "/connect/token", {
+        body: this.qsStringify({
+          grant_type: "refresh_token",
+          client_id: decodedToken.client_id,
+          refresh_token: refreshToken,
+        }),
+        cache: "no-store",
+        credentials: this.getCredentials(),
+        headers: headers,
+        method: "POST",
+      })
+    );
+
+    if (response.status === 200) {
+      const responseJson = await response.json();
+      const tokenResponse = new IdentityTokenResponse(responseJson);
+      await this.tokenService.setTokens(
+        tokenResponse.accessToken,
+        tokenResponse.refreshToken,
+        null
+      );
+    } else {
+      const error = await this.handleError(response, true, true);
+      return Promise.reject(error);
+    }
+  }
+
+  private async send(
+    method: "GET" | "POST" | "PUT" | "DELETE",
+    path: string,
+    body: any,
+    authed: boolean,
+    hasResponse: boolean,
+    apiUrl?: string,
+    alterHeaders?: (headers: Headers) => void
+  ): Promise<any> {
+    apiUrl = Utils.isNullOrWhitespace(apiUrl) ? this.environmentService.getApiUrl() : apiUrl;
+
+    const requestUrl = apiUrl + path;
+    // Prevent directory traversal from malicious paths
+    if (new URL(requestUrl).href !== requestUrl) {
+      return Promise.reject("Invalid request url path.");
+    }
+
+    const headers = new Headers({
+      "Device-Type": this.deviceType,
+    });
+    if (this.customUserAgent != null) {
+      headers.set("User-Agent", this.customUserAgent);
+    }
+
+    const requestInit: RequestInit = {
+      cache: "no-store",
+      credentials: this.getCredentials(),
+      method: method,
+    };
+
+    if (authed) {
+      const authHeader = await this.getActiveBearerToken();
+      headers.set("Authorization", "Bearer " + authHeader);
+    }
+    if (body != null) {
+      if (typeof body === "string") {
+        requestInit.body = body;
+        headers.set("Content-Type", "application/x-www-form-urlencoded; charset=utf-8");
+      } else if (typeof body === "object") {
+        if (body instanceof FormData) {
+          requestInit.body = body;
         } else {
-            const error = await this.handleError(response, true, true);
-            return Promise.reject(error);
-        }
-    }
-
-    private async send(method: 'GET' | 'POST' | 'PUT' | 'DELETE', path: string, body: any,
-        authed: boolean, hasResponse: boolean, apiUrl?: string,
-        alterHeaders?: (headers: Headers) => void): Promise<any> {
-        apiUrl = Utils.isNullOrWhitespace(apiUrl) ? this.environmentService.getApiUrl() : apiUrl;
-
-        const requestUrl = apiUrl + path;
-        // Prevent directory traversal from malicious paths
-        if (new URL(requestUrl).href !== requestUrl) {
-            return Promise.reject('Invalid request url path.');
+          headers.set("Content-Type", "application/json; charset=utf-8");
+          requestInit.body = JSON.stringify(body);
         }
-
-        const headers = new Headers({
-            'Device-Type': this.deviceType,
-        });
-        if (this.customUserAgent != null) {
-            headers.set('User-Agent', this.customUserAgent);
-        }
-
-        const requestInit: RequestInit = {
-            cache: 'no-store',
-            credentials: this.getCredentials(),
-            method: method,
-        };
-
-        if (authed) {
-            const authHeader = await this.getActiveBearerToken();
-            headers.set('Authorization', 'Bearer ' + authHeader);
-        }
-        if (body != null) {
-            if (typeof body === 'string') {
-                requestInit.body = body;
-                headers.set('Content-Type', 'application/x-www-form-urlencoded; charset=utf-8');
-            } else if (typeof body === 'object') {
-                if (body instanceof FormData) {
-                    requestInit.body = body;
-                } else {
-                    headers.set('Content-Type', 'application/json; charset=utf-8');
-                    requestInit.body = JSON.stringify(body);
-                }
-            }
-        }
-        if (hasResponse) {
-            headers.set('Accept', 'application/json');
-        }
-        if (alterHeaders != null) {
-            alterHeaders(headers);
-        }
-
-        requestInit.headers = headers;
-        const response = await this.fetch(new Request(requestUrl, requestInit));
-
-        if (hasResponse && response.status === 200) {
-            const responseJson = await response.json();
-            return responseJson;
-        } else if (response.status !== 200) {
-            const error = await this.handleError(response, false, authed);
-            return Promise.reject(error);
-        }
-    }
-
-    private async handleError(response: Response, tokenError: boolean, authed: boolean): Promise<ErrorResponse> {
-        if (authed && ((tokenError && response.status === 400) || response.status === 401 || response.status === 403)) {
-            await this.logoutCallback(true);
-            return null;
-        }
-
-        let responseJson: any = null;
-        if (this.isJsonResponse(response)) {
-            responseJson = await response.json();
-        } else if (this.isTextResponse(response)) {
-            responseJson = { Message: await response.text() };
-        }
-
-        return new ErrorResponse(responseJson, response.status, tokenError);
-    }
-
-    private qsStringify(params: any): string {
-        return Object.keys(params).map(key => {
-            return encodeURIComponent(key) + '=' + encodeURIComponent(params[key]);
-        }).join('&');
-    }
-
-    private getCredentials(): RequestCredentials {
-        if (!this.isWebClient || this.environmentService.hasBaseUrl()) {
-            return 'include';
-        }
-        return undefined;
-    }
-
-    private addEventParameters(base: string, start: string, end: string, token: string) {
-        if (start != null) {
-            base += ('?start=' + start);
-        }
-        if (end != null) {
-            base += (base.indexOf('?') > -1 ? '&' : '?');
-            base += ('end=' + end);
-        }
-        if (token != null) {
-            base += (base.indexOf('?') > -1 ? '&' : '?');
-            base += ('continuationToken=' + token);
-        }
-        return base;
-    }
-
-    private isJsonResponse(response: Response): boolean {
-        const typeHeader = response.headers.get('content-type');
-        return typeHeader != null && typeHeader.indexOf('application/json') > -1;
-    }
-
-    private isTextResponse(response: Response): boolean {
-        const typeHeader = response.headers.get('content-type');
-        return typeHeader != null && typeHeader.indexOf('text') > -1;
-    }
+      }
+    }
+    if (hasResponse) {
+      headers.set("Accept", "application/json");
+    }
+    if (alterHeaders != null) {
+      alterHeaders(headers);
+    }
+
+    requestInit.headers = headers;
+    const response = await this.fetch(new Request(requestUrl, requestInit));
+
+    if (hasResponse && response.status === 200) {
+      const responseJson = await response.json();
+      return responseJson;
+    } else if (response.status !== 200) {
+      const error = await this.handleError(response, false, authed);
+      return Promise.reject(error);
+    }
+  }
+
+  private async handleError(
+    response: Response,
+    tokenError: boolean,
+    authed: boolean
+  ): Promise<ErrorResponse> {
+    if (
+      authed &&
+      ((tokenError && response.status === 400) ||
+        response.status === 401 ||
+        response.status === 403)
+    ) {
+      await this.logoutCallback(true);
+      return null;
+    }
+
+    let responseJson: any = null;
+    if (this.isJsonResponse(response)) {
+      responseJson = await response.json();
+    } else if (this.isTextResponse(response)) {
+      responseJson = { Message: await response.text() };
+    }
+
+    return new ErrorResponse(responseJson, response.status, tokenError);
+  }
+
+  private qsStringify(params: any): string {
+    return Object.keys(params)
+      .map((key) => {
+        return encodeURIComponent(key) + "=" + encodeURIComponent(params[key]);
+      })
+      .join("&");
+  }
+
+  private getCredentials(): RequestCredentials {
+    if (!this.isWebClient || this.environmentService.hasBaseUrl()) {
+      return "include";
+    }
+    return undefined;
+  }
+
+  private addEventParameters(base: string, start: string, end: string, token: string) {
+    if (start != null) {
+      base += "?start=" + start;
+    }
+    if (end != null) {
+      base += base.indexOf("?") > -1 ? "&" : "?";
+      base += "end=" + end;
+    }
+    if (token != null) {
+      base += base.indexOf("?") > -1 ? "&" : "?";
+      base += "continuationToken=" + token;
+    }
+    return base;
+  }
+
+  private isJsonResponse(response: Response): boolean {
+    const typeHeader = response.headers.get("content-type");
+    return typeHeader != null && typeHeader.indexOf("application/json") > -1;
+  }
+
+  private isTextResponse(response: Response): boolean {
+    const typeHeader = response.headers.get("content-type");
+    return typeHeader != null && typeHeader.indexOf("text") > -1;
+  }
 }
diff --git a/jslib/common/src/services/apiKey.service.ts b/jslib/common/src/services/apiKey.service.ts
deleted file mode 100644
index 0b67781b..00000000
--- a/jslib/common/src/services/apiKey.service.ts
+++ /dev/null
@@ -1,86 +0,0 @@
-import { ApiKeyService as ApiKeyServiceAbstraction } from '../abstractions/apiKey.service';
-import { StorageService } from '../abstractions/storage.service';
-import { TokenService } from '../abstractions/token.service';
-
-import { Utils } from '../misc/utils';
-
-const Keys = {
-    clientId: 'clientId',
-    clientSecret: 'clientSecret',
-    entityType: 'entityType',
-    entityId: 'entityId',
-};
-
-
-export class ApiKeyService implements ApiKeyServiceAbstraction {
-    private clientId: string;
-    private clientSecret: string;
-    private entityType: string;
-    private entityId: string;
-
-    constructor(private tokenService: TokenService, private storageService: StorageService) { }
-
-    async setInformation(clientId: string, clientSecret: string) {
-        this.clientId = clientId;
-        this.clientSecret = clientSecret;
-        const idParts = clientId.split('.');
-
-        if (idParts.length !== 2 || !Utils.isGuid(idParts[1])) {
-            throw Error('Invalid clientId');
-        }
-        this.entityType = idParts[0];
-        this.entityId = idParts[1];
-
-        await this.storageService.save(Keys.clientId, this.clientId);
-        await this.storageService.save(Keys.entityId, this.entityId);
-        await this.storageService.save(Keys.entityType, this.entityType);
-        await this.storageService.save(Keys.clientSecret, this.clientSecret);
-    }
-
-    async getClientId(): Promise<string> {
-        if (this.clientId == null) {
-            this.clientId = await this.storageService.get<string>(Keys.clientId);
-        }
-        return this.clientId;
-    }
-
-    async getClientSecret(): Promise<string> {
-        if (this.clientSecret == null) {
-            this.clientSecret = await this.storageService.get<string>(Keys.clientSecret);
-        }
-        return this.clientSecret;
-    }
-
-    async getEntityType(): Promise<string> {
-        if (this.entityType == null) {
-            this.entityType = await this.storageService.get<string>(Keys.entityType);
-        }
-        return this.entityType;
-    }
-
-    async getEntityId(): Promise<string> {
-        if (this.entityId == null) {
-            this.entityId = await this.storageService.get<string>(Keys.entityId);
-        }
-        return this.entityId;
-    }
-
-    async clear(): Promise<any> {
-        await this.storageService.remove(Keys.clientId);
-        await this.storageService.remove(Keys.clientSecret);
-        await this.storageService.remove(Keys.entityId);
-        await this.storageService.remove(Keys.entityType);
-
-        this.clientId = this.clientSecret = this.entityId = this.entityType = null;
-    }
-
-    async isAuthenticated(): Promise<boolean> {
-        const token = await this.tokenService.getToken();
-        if (token == null) {
-            return false;
-        }
-
-        const entityId = await this.getEntityId();
-        return entityId != null;
-    }
-}
diff --git a/jslib/common/src/services/appId.service.ts b/jslib/common/src/services/appId.service.ts
index c37668d1..8ffd20f9 100644
--- a/jslib/common/src/services/appId.service.ts
+++ b/jslib/common/src/services/appId.service.ts
@@ -1,28 +1,27 @@
-import { Utils } from '../misc/utils';
+import { Utils } from "../misc/utils";
 
-import { AppIdService as AppIdServiceAbstraction } from '../abstractions/appId.service';
-import { StorageService } from '../abstractions/storage.service';
+import { AppIdService as AppIdServiceAbstraction } from "../abstractions/appId.service";
+import { StorageService } from "../abstractions/storage.service";
 
 export class AppIdService implements AppIdServiceAbstraction {
-    constructor(private storageService: StorageService) {
-    }
+  constructor(private storageService: StorageService) {}
 
-    getAppId(): Promise<string> {
-        return this.makeAndGetAppId('appId');
-    }
+  getAppId(): Promise<string> {
+    return this.makeAndGetAppId("appId");
+  }
 
-    getAnonymousAppId(): Promise<string> {
-        return this.makeAndGetAppId('anonymousAppId');
-    }
+  getAnonymousAppId(): Promise<string> {
+    return this.makeAndGetAppId("anonymousAppId");
+  }
 
-    private async makeAndGetAppId(key: string) {
-        const existingId = await this.storageService.get<string>(key);
-        if (existingId != null) {
-            return existingId;
-        }
-
-        const guid = Utils.newGuid();
-        await this.storageService.save(key, guid);
-        return guid;
+  private async makeAndGetAppId(key: string) {
+    const existingId = await this.storageService.get<string>(key);
+    if (existingId != null) {
+      return existingId;
     }
+
+    const guid = Utils.newGuid();
+    await this.storageService.save(key, guid);
+    return guid;
+  }
 }
diff --git a/jslib/common/src/services/audit.service.ts b/jslib/common/src/services/audit.service.ts
index db9a0457..2136b442 100644
--- a/jslib/common/src/services/audit.service.ts
+++ b/jslib/common/src/services/audit.service.ts
@@ -1,43 +1,46 @@
-import { ApiService } from '../abstractions/api.service';
-import { AuditService as AuditServiceAbstraction } from '../abstractions/audit.service';
-import { CryptoFunctionService } from '../abstractions/cryptoFunction.service';
+import { ApiService } from "../abstractions/api.service";
+import { AuditService as AuditServiceAbstraction } from "../abstractions/audit.service";
+import { CryptoFunctionService } from "../abstractions/cryptoFunction.service";
 
-import { throttle } from '../misc/throttle';
-import { Utils } from '../misc/utils';
+import { throttle } from "../misc/throttle";
+import { Utils } from "../misc/utils";
 
-import { BreachAccountResponse } from '../models/response/breachAccountResponse';
-import { ErrorResponse } from '../models/response/errorResponse';
+import { BreachAccountResponse } from "../models/response/breachAccountResponse";
+import { ErrorResponse } from "../models/response/errorResponse";
 
-const PwnedPasswordsApi = 'https://api.pwnedpasswords.com/range/';
+const PwnedPasswordsApi = "https://api.pwnedpasswords.com/range/";
 
 export class AuditService implements AuditServiceAbstraction {
-    constructor(private cryptoFunctionService: CryptoFunctionService, private apiService: ApiService) { }
-
-    @throttle(100, () => 'passwordLeaked')
-    async passwordLeaked(password: string): Promise<number> {
-        const hashBytes = await this.cryptoFunctionService.hash(password, 'sha1');
-        const hash = Utils.fromBufferToHex(hashBytes).toUpperCase();
-        const hashStart = hash.substr(0, 5);
-        const hashEnding = hash.substr(5);
-
-        const response = await this.apiService.nativeFetch(new Request(PwnedPasswordsApi + hashStart));
-        const leakedHashes = await response.text();
-        const match = leakedHashes.split(/\r?\n/).find(v => {
-            return v.split(':')[0] === hashEnding;
-        });
-
-        return match != null ? parseInt(match.split(':')[1], 10) : 0;
-    }
-
-    async breachedAccounts(username: string): Promise<BreachAccountResponse[]> {
-        try {
-            return await this.apiService.getHibpBreach(username);
-        } catch (e) {
-            const error = e as ErrorResponse;
-            if (error.statusCode === 404) {
-                return [];
-            }
-            throw new Error();
-        }
+  constructor(
+    private cryptoFunctionService: CryptoFunctionService,
+    private apiService: ApiService
+  ) {}
+
+  @throttle(100, () => "passwordLeaked")
+  async passwordLeaked(password: string): Promise<number> {
+    const hashBytes = await this.cryptoFunctionService.hash(password, "sha1");
+    const hash = Utils.fromBufferToHex(hashBytes).toUpperCase();
+    const hashStart = hash.substr(0, 5);
+    const hashEnding = hash.substr(5);
+
+    const response = await this.apiService.nativeFetch(new Request(PwnedPasswordsApi + hashStart));
+    const leakedHashes = await response.text();
+    const match = leakedHashes.split(/\r?\n/).find((v) => {
+      return v.split(":")[0] === hashEnding;
+    });
+
+    return match != null ? parseInt(match.split(":")[1], 10) : 0;
+  }
+
+  async breachedAccounts(username: string): Promise<BreachAccountResponse[]> {
+    try {
+      return await this.apiService.getHibpBreach(username);
+    } catch (e) {
+      const error = e as ErrorResponse;
+      if (error.statusCode === 404) {
+        return [];
+      }
+      throw new Error();
     }
+  }
 }
diff --git a/jslib/common/src/services/auth.service.ts b/jslib/common/src/services/auth.service.ts
index e4f670d7..f6559730 100644
--- a/jslib/common/src/services/auth.service.ts
+++ b/jslib/common/src/services/auth.service.ts
@@ -1,438 +1,674 @@
-import { HashPurpose } from '../enums/hashPurpose';
-import { KdfType } from '../enums/kdfType';
-import { TwoFactorProviderType } from '../enums/twoFactorProviderType';
-
-import { AuthResult } from '../models/domain/authResult';
-import { SymmetricCryptoKey } from '../models/domain/symmetricCryptoKey';
-
-import { SetKeyConnectorKeyRequest } from '../models/request/account/setKeyConnectorKeyRequest';
-import { DeviceRequest } from '../models/request/deviceRequest';
-import { KeyConnectorUserKeyRequest } from '../models/request/keyConnectorUserKeyRequest';
-import { KeysRequest } from '../models/request/keysRequest';
-import { PreloginRequest } from '../models/request/preloginRequest';
-import { TokenRequest } from '../models/request/tokenRequest';
-
-import { IdentityTokenResponse } from '../models/response/identityTokenResponse';
-import { IdentityTwoFactorResponse } from '../models/response/identityTwoFactorResponse';
-
-import { ApiService } from '../abstractions/api.service';
-import { AppIdService } from '../abstractions/appId.service';
-import { AuthService as AuthServiceAbstraction } from '../abstractions/auth.service';
-import { CryptoService } from '../abstractions/crypto.service';
-import { CryptoFunctionService } from '../abstractions/cryptoFunction.service';
-import { EnvironmentService } from '../abstractions/environment.service';
-import { I18nService } from '../abstractions/i18n.service';
-import { KeyConnectorService } from '../abstractions/keyConnector.service';
-import { LogService } from '../abstractions/log.service';
-import { MessagingService } from '../abstractions/messaging.service';
-import { PlatformUtilsService } from '../abstractions/platformUtils.service';
-import { TokenService } from '../abstractions/token.service';
-import { UserService } from '../abstractions/user.service';
-import { VaultTimeoutService } from '../abstractions/vaultTimeout.service';
-
-import { Utils } from '../misc/utils';
+import { HashPurpose } from "../enums/hashPurpose";
+import { KdfType } from "../enums/kdfType";
+import { TwoFactorProviderType } from "../enums/twoFactorProviderType";
+
+import {
+  Account,
+  AccountData,
+  AccountKeys,
+  AccountProfile,
+  AccountTokens,
+} from "../models/domain/account";
+import { AuthResult } from "../models/domain/authResult";
+import { SymmetricCryptoKey } from "../models/domain/symmetricCryptoKey";
+
+import { SetKeyConnectorKeyRequest } from "../models/request/account/setKeyConnectorKeyRequest";
+import { DeviceRequest } from "../models/request/deviceRequest";
+import { KeyConnectorUserKeyRequest } from "../models/request/keyConnectorUserKeyRequest";
+import { KeysRequest } from "../models/request/keysRequest";
+import { PreloginRequest } from "../models/request/preloginRequest";
+import { TokenRequest } from "../models/request/tokenRequest";
+
+import { IdentityTokenResponse } from "../models/response/identityTokenResponse";
+import { IdentityTwoFactorResponse } from "../models/response/identityTwoFactorResponse";
+
+import { ApiService } from "../abstractions/api.service";
+import { AppIdService } from "../abstractions/appId.service";
+import { AuthService as AuthServiceAbstraction } from "../abstractions/auth.service";
+import { CryptoService } from "../abstractions/crypto.service";
+import { CryptoFunctionService } from "../abstractions/cryptoFunction.service";
+import { EnvironmentService } from "../abstractions/environment.service";
+import { I18nService } from "../abstractions/i18n.service";
+import { KeyConnectorService } from "../abstractions/keyConnector.service";
+import { LogService } from "../abstractions/log.service";
+import { MessagingService } from "../abstractions/messaging.service";
+import { PlatformUtilsService } from "../abstractions/platformUtils.service";
+import { StateService } from "../abstractions/state.service";
+import { TokenService } from "../abstractions/token.service";
+import { VaultTimeoutService } from "../abstractions/vaultTimeout.service";
+
+import { Utils } from "../misc/utils";
 
 export const TwoFactorProviders = {
-    [TwoFactorProviderType.Authenticator]: {
-        type: TwoFactorProviderType.Authenticator,
-        name: null as string,
-        description: null as string,
-        priority: 1,
-        sort: 1,
-        premium: false,
-    },
-    [TwoFactorProviderType.Yubikey]: {
-        type: TwoFactorProviderType.Yubikey,
-        name: null as string,
-        description: null as string,
-        priority: 3,
-        sort: 2,
-        premium: true,
-    },
-    [TwoFactorProviderType.Duo]: {
-        type: TwoFactorProviderType.Duo,
-        name: 'Duo',
-        description: null as string,
-        priority: 2,
-        sort: 3,
-        premium: true,
-    },
-    [TwoFactorProviderType.OrganizationDuo]: {
-        type: TwoFactorProviderType.OrganizationDuo,
-        name: 'Duo (Organization)',
-        description: null as string,
-        priority: 10,
-        sort: 4,
-        premium: false,
-    },
-    [TwoFactorProviderType.Email]: {
-        type: TwoFactorProviderType.Email,
-        name: null as string,
-        description: null as string,
-        priority: 0,
-        sort: 6,
-        premium: false,
-    },
-    [TwoFactorProviderType.WebAuthn]: {
-        type: TwoFactorProviderType.WebAuthn,
-        name: null as string,
-        description: null as string,
-        priority: 4,
-        sort: 5,
-        premium: true,
-    },
+  [TwoFactorProviderType.Authenticator]: {
+    type: TwoFactorProviderType.Authenticator,
+    name: null as string,
+    description: null as string,
+    priority: 1,
+    sort: 1,
+    premium: false,
+  },
+  [TwoFactorProviderType.Yubikey]: {
+    type: TwoFactorProviderType.Yubikey,
+    name: null as string,
+    description: null as string,
+    priority: 3,
+    sort: 2,
+    premium: true,
+  },
+  [TwoFactorProviderType.Duo]: {
+    type: TwoFactorProviderType.Duo,
+    name: "Duo",
+    description: null as string,
+    priority: 2,
+    sort: 3,
+    premium: true,
+  },
+  [TwoFactorProviderType.OrganizationDuo]: {
+    type: TwoFactorProviderType.OrganizationDuo,
+    name: "Duo (Organization)",
+    description: null as string,
+    priority: 10,
+    sort: 4,
+    premium: false,
+  },
+  [TwoFactorProviderType.Email]: {
+    type: TwoFactorProviderType.Email,
+    name: null as string,
+    description: null as string,
+    priority: 0,
+    sort: 6,
+    premium: false,
+  },
+  [TwoFactorProviderType.WebAuthn]: {
+    type: TwoFactorProviderType.WebAuthn,
+    name: null as string,
+    description: null as string,
+    priority: 4,
+    sort: 5,
+    premium: true,
+  },
 };
 
 export class AuthService implements AuthServiceAbstraction {
-    email: string;
-    masterPasswordHash: string;
-    localMasterPasswordHash: string;
-    code: string;
-    codeVerifier: string;
-    ssoRedirectUrl: string;
-    clientId: string;
-    clientSecret: string;
-    twoFactorProvidersData: Map<TwoFactorProviderType, { [key: string]: string; }>;
-    selectedTwoFactorProviderType: TwoFactorProviderType = null;
-    captchaToken: string;
-
-    private key: SymmetricCryptoKey;
-
-    constructor(private cryptoService: CryptoService, protected apiService: ApiService,
-        private userService: UserService, protected tokenService: TokenService,
-        protected appIdService: AppIdService, private i18nService: I18nService,
-        protected platformUtilsService: PlatformUtilsService, private messagingService: MessagingService,
-        private vaultTimeoutService: VaultTimeoutService, private logService: LogService,
-        private cryptoFunctionService: CryptoFunctionService, private environmentService: EnvironmentService,
-        private keyConnectorService: KeyConnectorService, private setCryptoKeys = true) {
+  email: string;
+  masterPasswordHash: string;
+  localMasterPasswordHash: string;
+  code: string;
+  codeVerifier: string;
+  ssoRedirectUrl: string;
+  clientId: string;
+  clientSecret: string;
+  twoFactorProvidersData: Map<TwoFactorProviderType, { [key: string]: string }>;
+  selectedTwoFactorProviderType: TwoFactorProviderType = null;
+  captchaToken: string;
+
+  private key: SymmetricCryptoKey;
+
+  constructor(
+    private cryptoService: CryptoService,
+    protected apiService: ApiService,
+    protected tokenService: TokenService,
+    protected appIdService: AppIdService,
+    private i18nService: I18nService,
+    protected platformUtilsService: PlatformUtilsService,
+    private messagingService: MessagingService,
+    private vaultTimeoutService: VaultTimeoutService,
+    private logService: LogService,
+    protected cryptoFunctionService: CryptoFunctionService,
+    private keyConnectorService: KeyConnectorService,
+    protected environmentService: EnvironmentService,
+    protected stateService: StateService,
+    private setCryptoKeys = true
+  ) {}
+
+  init() {
+    TwoFactorProviders[TwoFactorProviderType.Email].name = this.i18nService.t("emailTitle");
+    TwoFactorProviders[TwoFactorProviderType.Email].description = this.i18nService.t("emailDesc");
+
+    TwoFactorProviders[TwoFactorProviderType.Authenticator].name =
+      this.i18nService.t("authenticatorAppTitle");
+    TwoFactorProviders[TwoFactorProviderType.Authenticator].description =
+      this.i18nService.t("authenticatorAppDesc");
+
+    TwoFactorProviders[TwoFactorProviderType.Duo].description = this.i18nService.t("duoDesc");
+
+    TwoFactorProviders[TwoFactorProviderType.OrganizationDuo].name =
+      "Duo (" + this.i18nService.t("organization") + ")";
+    TwoFactorProviders[TwoFactorProviderType.OrganizationDuo].description =
+      this.i18nService.t("duoOrganizationDesc");
+
+    TwoFactorProviders[TwoFactorProviderType.WebAuthn].name = this.i18nService.t("webAuthnTitle");
+    TwoFactorProviders[TwoFactorProviderType.WebAuthn].description =
+      this.i18nService.t("webAuthnDesc");
+
+    TwoFactorProviders[TwoFactorProviderType.Yubikey].name = this.i18nService.t("yubiKeyTitle");
+    TwoFactorProviders[TwoFactorProviderType.Yubikey].description =
+      this.i18nService.t("yubiKeyDesc");
+  }
+
+  async logIn(email: string, masterPassword: string, captchaToken?: string): Promise<AuthResult> {
+    this.selectedTwoFactorProviderType = null;
+    const key = await this.makePreloginKey(masterPassword, email);
+    const hashedPassword = await this.cryptoService.hashPassword(masterPassword, key);
+    const localHashedPassword = await this.cryptoService.hashPassword(
+      masterPassword,
+      key,
+      HashPurpose.LocalAuthorization
+    );
+    return await this.logInHelper(
+      email,
+      hashedPassword,
+      localHashedPassword,
+      null,
+      null,
+      null,
+      null,
+      null,
+      key,
+      null,
+      null,
+      null,
+      captchaToken,
+      null
+    );
+  }
+
+  async logInSso(
+    code: string,
+    codeVerifier: string,
+    redirectUrl: string,
+    orgId: string
+  ): Promise<AuthResult> {
+    this.selectedTwoFactorProviderType = null;
+    return await this.logInHelper(
+      null,
+      null,
+      null,
+      code,
+      codeVerifier,
+      redirectUrl,
+      null,
+      null,
+      null,
+      null,
+      null,
+      null,
+      null,
+      orgId
+    );
+  }
+
+  async logInApiKey(clientId: string, clientSecret: string): Promise<AuthResult> {
+    this.selectedTwoFactorProviderType = null;
+    return await this.logInHelper(
+      null,
+      null,
+      null,
+      null,
+      null,
+      null,
+      clientId,
+      clientSecret,
+      null,
+      null,
+      null,
+      null,
+      null,
+      null
+    );
+  }
+
+  async logInTwoFactor(
+    twoFactorProvider: TwoFactorProviderType,
+    twoFactorToken: string,
+    remember?: boolean
+  ): Promise<AuthResult> {
+    return await this.logInHelper(
+      this.email,
+      this.masterPasswordHash,
+      this.localMasterPasswordHash,
+      this.code,
+      this.codeVerifier,
+      this.ssoRedirectUrl,
+      this.clientId,
+      this.clientSecret,
+      this.key,
+      twoFactorProvider,
+      twoFactorToken,
+      remember,
+      this.captchaToken,
+      null
+    );
+  }
+
+  async logInComplete(
+    email: string,
+    masterPassword: string,
+    twoFactorProvider: TwoFactorProviderType,
+    twoFactorToken: string,
+    remember?: boolean,
+    captchaToken?: string
+  ): Promise<AuthResult> {
+    this.selectedTwoFactorProviderType = null;
+    const key = await this.makePreloginKey(masterPassword, email);
+    const hashedPassword = await this.cryptoService.hashPassword(masterPassword, key);
+    const localHashedPassword = await this.cryptoService.hashPassword(
+      masterPassword,
+      key,
+      HashPurpose.LocalAuthorization
+    );
+    return await this.logInHelper(
+      email,
+      hashedPassword,
+      localHashedPassword,
+      null,
+      null,
+      null,
+      null,
+      null,
+      key,
+      twoFactorProvider,
+      twoFactorToken,
+      remember,
+      captchaToken,
+      null
+    );
+  }
+
+  async logInSsoComplete(
+    code: string,
+    codeVerifier: string,
+    redirectUrl: string,
+    twoFactorProvider: TwoFactorProviderType,
+    twoFactorToken: string,
+    remember?: boolean
+  ): Promise<AuthResult> {
+    this.selectedTwoFactorProviderType = null;
+    return await this.logInHelper(
+      null,
+      null,
+      null,
+      code,
+      codeVerifier,
+      redirectUrl,
+      null,
+      null,
+      null,
+      twoFactorProvider,
+      twoFactorToken,
+      remember,
+      null,
+      null
+    );
+  }
+
+  async logInApiKeyComplete(
+    clientId: string,
+    clientSecret: string,
+    twoFactorProvider: TwoFactorProviderType,
+    twoFactorToken: string,
+    remember?: boolean
+  ): Promise<AuthResult> {
+    this.selectedTwoFactorProviderType = null;
+    return await this.logInHelper(
+      null,
+      null,
+      null,
+      null,
+      null,
+      null,
+      clientId,
+      clientSecret,
+      null,
+      twoFactorProvider,
+      twoFactorToken,
+      remember,
+      null,
+      null
+    );
+  }
+
+  logOut(callback: Function) {
+    callback();
+    this.messagingService.send("loggedOut");
+  }
+
+  getSupportedTwoFactorProviders(win: Window): any[] {
+    const providers: any[] = [];
+    if (this.twoFactorProvidersData == null) {
+      return providers;
     }
 
-    init() {
-        TwoFactorProviders[TwoFactorProviderType.Email].name = this.i18nService.t('emailTitle');
-        TwoFactorProviders[TwoFactorProviderType.Email].description = this.i18nService.t('emailDesc');
-
-        TwoFactorProviders[TwoFactorProviderType.Authenticator].name = this.i18nService.t('authenticatorAppTitle');
-        TwoFactorProviders[TwoFactorProviderType.Authenticator].description =
-            this.i18nService.t('authenticatorAppDesc');
-
-        TwoFactorProviders[TwoFactorProviderType.Duo].description = this.i18nService.t('duoDesc');
-
-        TwoFactorProviders[TwoFactorProviderType.OrganizationDuo].name =
-            'Duo (' + this.i18nService.t('organization') + ')';
-        TwoFactorProviders[TwoFactorProviderType.OrganizationDuo].description =
-            this.i18nService.t('duoOrganizationDesc');
-
-        TwoFactorProviders[TwoFactorProviderType.WebAuthn].name = this.i18nService.t('webAuthnTitle');
-        TwoFactorProviders[TwoFactorProviderType.WebAuthn].description = this.i18nService.t('webAuthnDesc');
-
-        TwoFactorProviders[TwoFactorProviderType.Yubikey].name = this.i18nService.t('yubiKeyTitle');
-        TwoFactorProviders[TwoFactorProviderType.Yubikey].description = this.i18nService.t('yubiKeyDesc');
+    if (
+      this.twoFactorProvidersData.has(TwoFactorProviderType.OrganizationDuo) &&
+      this.platformUtilsService.supportsDuo()
+    ) {
+      providers.push(TwoFactorProviders[TwoFactorProviderType.OrganizationDuo]);
     }
 
-    async logIn(email: string, masterPassword: string, captchaToken?: string): Promise<AuthResult> {
-        this.selectedTwoFactorProviderType = null;
-        const key = await this.makePreloginKey(masterPassword, email);
-        const hashedPassword = await this.cryptoService.hashPassword(masterPassword, key);
-        const localHashedPassword = await this.cryptoService.hashPassword(masterPassword, key,
-            HashPurpose.LocalAuthorization);
-        return await this.logInHelper(email, hashedPassword, localHashedPassword, null, null, null, null, null,
-            key, null, null, null, captchaToken, null);
+    if (this.twoFactorProvidersData.has(TwoFactorProviderType.Authenticator)) {
+      providers.push(TwoFactorProviders[TwoFactorProviderType.Authenticator]);
     }
 
-    async logInSso(code: string, codeVerifier: string, redirectUrl: string, orgId: string): Promise<AuthResult> {
-        this.selectedTwoFactorProviderType = null;
-        return await this.logInHelper(null, null, null, code, codeVerifier, redirectUrl, null, null,
-            null, null, null, null, null, orgId);
+    if (this.twoFactorProvidersData.has(TwoFactorProviderType.Yubikey)) {
+      providers.push(TwoFactorProviders[TwoFactorProviderType.Yubikey]);
     }
 
-    async logInApiKey(clientId: string, clientSecret: string): Promise<AuthResult> {
-        this.selectedTwoFactorProviderType = null;
-        return await this.logInHelper(null, null, null, null, null, null, clientId, clientSecret,
-            null, null, null, null, null, null);
+    if (
+      this.twoFactorProvidersData.has(TwoFactorProviderType.Duo) &&
+      this.platformUtilsService.supportsDuo()
+    ) {
+      providers.push(TwoFactorProviders[TwoFactorProviderType.Duo]);
     }
 
-    async logInTwoFactor(twoFactorProvider: TwoFactorProviderType, twoFactorToken: string,
-        remember?: boolean): Promise<AuthResult> {
-        return await this.logInHelper(this.email, this.masterPasswordHash, this.localMasterPasswordHash, this.code,
-            this.codeVerifier, this.ssoRedirectUrl, this.clientId, this.clientSecret, this.key, twoFactorProvider,
-            twoFactorToken, remember, this.captchaToken, null);
+    if (
+      this.twoFactorProvidersData.has(TwoFactorProviderType.WebAuthn) &&
+      this.platformUtilsService.supportsWebAuthn(win)
+    ) {
+      providers.push(TwoFactorProviders[TwoFactorProviderType.WebAuthn]);
     }
 
-    async logInComplete(email: string, masterPassword: string, twoFactorProvider: TwoFactorProviderType,
-        twoFactorToken: string, remember?: boolean, captchaToken?: string): Promise<AuthResult> {
-        this.selectedTwoFactorProviderType = null;
-        const key = await this.makePreloginKey(masterPassword, email);
-        const hashedPassword = await this.cryptoService.hashPassword(masterPassword, key);
-        const localHashedPassword = await this.cryptoService.hashPassword(masterPassword, key,
-            HashPurpose.LocalAuthorization);
-        return await this.logInHelper(email, hashedPassword, localHashedPassword, null, null, null, null, null, key,
-            twoFactorProvider, twoFactorToken, remember, captchaToken, null);
+    if (this.twoFactorProvidersData.has(TwoFactorProviderType.Email)) {
+      providers.push(TwoFactorProviders[TwoFactorProviderType.Email]);
     }
 
-    async logInSsoComplete(code: string, codeVerifier: string, redirectUrl: string,
-        twoFactorProvider: TwoFactorProviderType, twoFactorToken: string, remember?: boolean): Promise<AuthResult> {
-        this.selectedTwoFactorProviderType = null;
-        return await this.logInHelper(null, null, null, code, codeVerifier, redirectUrl, null,
-            null, null, twoFactorProvider, twoFactorToken, remember, null, null);
-    }
+    return providers;
+  }
 
-    async logInApiKeyComplete(clientId: string, clientSecret: string, twoFactorProvider: TwoFactorProviderType,
-        twoFactorToken: string, remember?: boolean): Promise<AuthResult> {
-        this.selectedTwoFactorProviderType = null;
-        return await this.logInHelper(null, null, null, null, null, null, clientId, clientSecret, null,
-            twoFactorProvider, twoFactorToken, remember, null, null);
+  getDefaultTwoFactorProvider(webAuthnSupported: boolean): TwoFactorProviderType {
+    if (this.twoFactorProvidersData == null) {
+      return null;
     }
 
-    logOut(callback: Function) {
-        callback();
-        this.messagingService.send('loggedOut');
+    if (
+      this.selectedTwoFactorProviderType != null &&
+      this.twoFactorProvidersData.has(this.selectedTwoFactorProviderType)
+    ) {
+      return this.selectedTwoFactorProviderType;
     }
 
-    getSupportedTwoFactorProviders(win: Window): any[] {
-        const providers: any[] = [];
-        if (this.twoFactorProvidersData == null) {
-            return providers;
-        }
-
-        if (this.twoFactorProvidersData.has(TwoFactorProviderType.OrganizationDuo) &&
-            this.platformUtilsService.supportsDuo()) {
-            providers.push(TwoFactorProviders[TwoFactorProviderType.OrganizationDuo]);
-        }
-
-        if (this.twoFactorProvidersData.has(TwoFactorProviderType.Authenticator)) {
-            providers.push(TwoFactorProviders[TwoFactorProviderType.Authenticator]);
+    let providerType: TwoFactorProviderType = null;
+    let providerPriority = -1;
+    this.twoFactorProvidersData.forEach((_value, type) => {
+      const provider = (TwoFactorProviders as any)[type];
+      if (provider != null && provider.priority > providerPriority) {
+        if (type === TwoFactorProviderType.WebAuthn && !webAuthnSupported) {
+          return;
         }
 
-        if (this.twoFactorProvidersData.has(TwoFactorProviderType.Yubikey)) {
-            providers.push(TwoFactorProviders[TwoFactorProviderType.Yubikey]);
-        }
-
-        if (this.twoFactorProvidersData.has(TwoFactorProviderType.Duo) && this.platformUtilsService.supportsDuo()) {
-            providers.push(TwoFactorProviders[TwoFactorProviderType.Duo]);
-        }
-
-        if (this.twoFactorProvidersData.has(TwoFactorProviderType.WebAuthn) && this.platformUtilsService.supportsWebAuthn(win)) {
-            providers.push(TwoFactorProviders[TwoFactorProviderType.WebAuthn]);
-        }
-
-        if (this.twoFactorProvidersData.has(TwoFactorProviderType.Email)) {
-            providers.push(TwoFactorProviders[TwoFactorProviderType.Email]);
-        }
-
-        return providers;
+        providerType = type;
+        providerPriority = provider.priority;
+      }
+    });
+
+    return providerType;
+  }
+
+  async makePreloginKey(masterPassword: string, email: string): Promise<SymmetricCryptoKey> {
+    email = email.trim().toLowerCase();
+    let kdf: KdfType = null;
+    let kdfIterations: number = null;
+    try {
+      const preloginResponse = await this.apiService.postPrelogin(new PreloginRequest(email));
+      if (preloginResponse != null) {
+        kdf = preloginResponse.kdf;
+        kdfIterations = preloginResponse.kdfIterations;
+      }
+    } catch (e) {
+      if (e == null || e.statusCode !== 404) {
+        throw e;
+      }
     }
-
-    getDefaultTwoFactorProvider(webAuthnSupported: boolean): TwoFactorProviderType {
-        if (this.twoFactorProvidersData == null) {
-            return null;
-        }
-
-        if (this.selectedTwoFactorProviderType != null &&
-            this.twoFactorProvidersData.has(this.selectedTwoFactorProviderType)) {
-            return this.selectedTwoFactorProviderType;
-        }
-
-        let providerType: TwoFactorProviderType = null;
-        let providerPriority = -1;
-        this.twoFactorProvidersData.forEach((value, type) => {
-            const provider = (TwoFactorProviders as any)[type];
-            if (provider != null && provider.priority > providerPriority) {
-                if (type === TwoFactorProviderType.WebAuthn && !webAuthnSupported) {
-                    return;
-                }
-
-                providerType = type;
-                providerPriority = provider.priority;
-            }
-        });
-
-        return providerType;
+    return this.cryptoService.makeKey(masterPassword, email, kdf, kdfIterations);
+  }
+
+  authingWithApiKey(): boolean {
+    return this.clientId != null && this.clientSecret != null;
+  }
+
+  authingWithSso(): boolean {
+    return this.code != null && this.codeVerifier != null && this.ssoRedirectUrl != null;
+  }
+
+  authingWithPassword(): boolean {
+    return this.email != null && this.masterPasswordHash != null;
+  }
+
+  private async logInHelper(
+    email: string,
+    hashedPassword: string,
+    localHashedPassword: string,
+    code: string,
+    codeVerifier: string,
+    redirectUrl: string,
+    clientId: string,
+    clientSecret: string,
+    key: SymmetricCryptoKey,
+    twoFactorProvider?: TwoFactorProviderType,
+    twoFactorToken?: string,
+    remember?: boolean,
+    captchaToken?: string,
+    orgId?: string
+  ): Promise<AuthResult> {
+    const storedTwoFactorToken = await this.tokenService.getTwoFactorToken(email);
+    const appId = await this.appIdService.getAppId();
+    const deviceRequest = new DeviceRequest(appId, this.platformUtilsService);
+
+    let emailPassword: string[] = [];
+    let codeCodeVerifier: string[] = [];
+    let clientIdClientSecret: [string, string] = [null, null];
+
+    if (email != null && hashedPassword != null) {
+      emailPassword = [email, hashedPassword];
+    } else {
+      emailPassword = null;
     }
-
-    async makePreloginKey(masterPassword: string, email: string): Promise<SymmetricCryptoKey> {
-        email = email.trim().toLowerCase();
-        let kdf: KdfType = null;
-        let kdfIterations: number = null;
-        try {
-            const preloginResponse = await this.apiService.postPrelogin(new PreloginRequest(email));
-            if (preloginResponse != null) {
-                kdf = preloginResponse.kdf;
-                kdfIterations = preloginResponse.kdfIterations;
-            }
-        } catch (e) {
-            if (e == null || e.statusCode !== 404) {
-                throw e;
-            }
-        }
-        return this.cryptoService.makeKey(masterPassword, email, kdf, kdfIterations);
+    if (code != null && codeVerifier != null && redirectUrl != null) {
+      codeCodeVerifier = [code, codeVerifier, redirectUrl];
+    } else {
+      codeCodeVerifier = null;
+    }
+    if (clientId != null && clientSecret != null) {
+      clientIdClientSecret = [clientId, clientSecret];
+    } else {
+      clientIdClientSecret = null;
     }
 
-    authingWithApiKey(): boolean {
-        return this.clientId != null && this.clientSecret != null;
+    let request: TokenRequest;
+    if (twoFactorToken != null && twoFactorProvider != null) {
+      request = new TokenRequest(
+        emailPassword,
+        codeCodeVerifier,
+        clientIdClientSecret,
+        twoFactorProvider,
+        twoFactorToken,
+        remember,
+        captchaToken,
+        deviceRequest,
+        orgId
+      );
+    } else if (storedTwoFactorToken != null) {
+      request = new TokenRequest(
+        emailPassword,
+        codeCodeVerifier,
+        clientIdClientSecret,
+        TwoFactorProviderType.Remember,
+        storedTwoFactorToken,
+        false,
+        captchaToken,
+        deviceRequest,
+        orgId
+      );
+    } else {
+      request = new TokenRequest(
+        emailPassword,
+        codeCodeVerifier,
+        clientIdClientSecret,
+        null,
+        null,
+        false,
+        captchaToken,
+        deviceRequest,
+        orgId
+      );
     }
 
-    authingWithSso(): boolean {
-        return this.code != null && this.codeVerifier != null && this.ssoRedirectUrl != null;
+    const response = await this.apiService.postIdentityToken(request);
+
+    this.clearState();
+    const result = new AuthResult();
+    result.captchaSiteKey = (response as any).siteKey;
+    if (!!result.captchaSiteKey) {
+      return result;
+    }
+    result.twoFactor = !!(response as any).twoFactorProviders2;
+
+    if (result.twoFactor) {
+      // two factor required
+      this.email = email;
+      this.masterPasswordHash = hashedPassword;
+      this.localMasterPasswordHash = localHashedPassword;
+      this.code = code;
+      this.codeVerifier = codeVerifier;
+      this.ssoRedirectUrl = redirectUrl;
+      this.clientId = clientId;
+      this.clientSecret = clientSecret;
+      this.key = this.setCryptoKeys ? key : null;
+      const twoFactorResponse = response as IdentityTwoFactorResponse;
+      this.twoFactorProvidersData = twoFactorResponse.twoFactorProviders2;
+      result.twoFactorProviders = twoFactorResponse.twoFactorProviders2;
+      this.captchaToken = twoFactorResponse.captchaToken;
+      return result;
     }
 
-    authingWithPassword(): boolean {
-        return this.email != null && this.masterPasswordHash != null;
+    const tokenResponse = response as IdentityTokenResponse;
+    result.resetMasterPassword = tokenResponse.resetMasterPassword;
+    result.forcePasswordReset = tokenResponse.forcePasswordReset;
+
+    const accountInformation = await this.tokenService.decodeToken(tokenResponse.accessToken);
+    await this.stateService.addAccount(
+      new Account({
+        profile: {
+          ...new AccountProfile(),
+          ...{
+            userId: accountInformation.sub,
+            email: accountInformation.email,
+            apiKeyClientId: clientId,
+            hasPremiumPersonally: accountInformation.premium,
+            kdfIterations: tokenResponse.kdfIterations,
+            kdfType: tokenResponse.kdf,
+          },
+        },
+        keys: {
+          ...new AccountKeys(),
+          ...{
+            apiKeyClientSecret: clientSecret,
+          },
+        },
+        tokens: {
+          ...new AccountTokens(),
+          ...{
+            accessToken: tokenResponse.accessToken,
+            refreshToken: tokenResponse.refreshToken,
+          },
+        },
+      })
+    );
+
+    if (tokenResponse.twoFactorToken != null) {
+      await this.tokenService.setTwoFactorToken(tokenResponse.twoFactorToken, email);
     }
 
-    private async logInHelper(email: string, hashedPassword: string, localHashedPassword: string, code: string,
-        codeVerifier: string, redirectUrl: string, clientId: string, clientSecret: string, key: SymmetricCryptoKey,
-        twoFactorProvider?: TwoFactorProviderType, twoFactorToken?: string, remember?: boolean, captchaToken?: string,
-        orgId?: string): Promise<AuthResult> {
-        const storedTwoFactorToken = await this.tokenService.getTwoFactorToken(email);
-        const appId = await this.appIdService.getAppId();
-        const deviceRequest = new DeviceRequest(appId, this.platformUtilsService);
-
-        let emailPassword: string[] = [];
-        let codeCodeVerifier: string[] = [];
-        let clientIdClientSecret: [string, string] = [null, null];
-
-        if (email != null && hashedPassword != null) {
-            emailPassword = [email, hashedPassword];
-        } else {
-            emailPassword = null;
-        }
-        if (code != null && codeVerifier != null && redirectUrl != null) {
-            codeCodeVerifier = [code, codeVerifier, redirectUrl];
-        } else {
-            codeCodeVerifier = null;
-        }
-        if (clientId != null && clientSecret != null) {
-            clientIdClientSecret = [clientId, clientSecret];
-        } else {
-            clientIdClientSecret = null;
+    if (this.setCryptoKeys) {
+      if (key != null) {
+        await this.cryptoService.setKey(key);
+      }
+      if (localHashedPassword != null) {
+        await this.cryptoService.setKeyHash(localHashedPassword);
+      }
+
+      // Skip this step during SSO new user flow. No key is returned from server.
+      if (code == null || tokenResponse.key != null) {
+        if (tokenResponse.keyConnectorUrl != null) {
+          await this.keyConnectorService.getAndSetKey(tokenResponse.keyConnectorUrl);
+        } else if (tokenResponse.apiUseKeyConnector) {
+          const keyConnectorUrl = this.environmentService.getKeyConnectorUrl();
+          await this.keyConnectorService.getAndSetKey(keyConnectorUrl);
         }
 
-        let request: TokenRequest;
-        if (twoFactorToken != null && twoFactorProvider != null) {
-            request = new TokenRequest(emailPassword, codeCodeVerifier, clientIdClientSecret, twoFactorProvider,
-                twoFactorToken, remember, captchaToken, deviceRequest);
-        } else if (storedTwoFactorToken != null) {
-            request = new TokenRequest(emailPassword, codeCodeVerifier, clientIdClientSecret,
-                TwoFactorProviderType.Remember, storedTwoFactorToken, false, captchaToken, deviceRequest);
-        } else {
-            request = new TokenRequest(emailPassword, codeCodeVerifier, clientIdClientSecret, null,
-                null, false, captchaToken, deviceRequest);
+        await this.cryptoService.setEncKey(tokenResponse.key);
+
+        // User doesn't have a key pair yet (old account), let's generate one for them
+        if (tokenResponse.privateKey == null) {
+          try {
+            const keyPair = await this.cryptoService.makeKeyPair();
+            await this.apiService.postAccountKeys(
+              new KeysRequest(keyPair[0], keyPair[1].encryptedString)
+            );
+            tokenResponse.privateKey = keyPair[1].encryptedString;
+          } catch (e) {
+            this.logService.error(e);
+          }
         }
 
-        const response = await this.apiService.postIdentityToken(request);
+        await this.cryptoService.setEncPrivateKey(tokenResponse.privateKey);
+      } else if (tokenResponse.keyConnectorUrl != null) {
+        const password = await this.cryptoFunctionService.randomBytes(64);
 
-        this.clearState();
-        const result = new AuthResult();
-        result.captchaSiteKey = (response as any).siteKey;
-        if (!!result.captchaSiteKey) {
-            return result;
-        }
-        result.twoFactor = !!(response as any).twoFactorProviders2;
-
-        if (result.twoFactor) {
-            // two factor required
-            this.email = email;
-            this.masterPasswordHash = hashedPassword;
-            this.localMasterPasswordHash = localHashedPassword;
-            this.code = code;
-            this.codeVerifier = codeVerifier;
-            this.ssoRedirectUrl = redirectUrl;
-            this.clientId = clientId;
-            this.clientSecret = clientSecret;
-            this.key = this.setCryptoKeys ? key : null;
-            const twoFactorResponse = response as IdentityTwoFactorResponse;
-            this.twoFactorProvidersData = twoFactorResponse.twoFactorProviders2;
-            result.twoFactorProviders = twoFactorResponse.twoFactorProviders2;
-            this.captchaToken = twoFactorResponse.captchaToken;
-            return result;
-        }
+        const k = await this.cryptoService.makeKey(
+          Utils.fromBufferToB64(password),
+          await this.tokenService.getEmail(),
+          tokenResponse.kdf,
+          tokenResponse.kdfIterations
+        );
+        const keyConnectorRequest = new KeyConnectorUserKeyRequest(k.encKeyB64);
+        await this.cryptoService.setKey(k);
 
-        const tokenResponse = response as IdentityTokenResponse;
-        result.resetMasterPassword = tokenResponse.resetMasterPassword;
-        result.forcePasswordReset = tokenResponse.forcePasswordReset;
-        if (tokenResponse.twoFactorToken != null) {
-            await this.tokenService.setTwoFactorToken(tokenResponse.twoFactorToken, email);
-        }
+        const encKey = await this.cryptoService.makeEncKey(k);
+        await this.cryptoService.setEncKey(encKey[1].encryptedString);
 
-        await this.tokenService.setTokens(tokenResponse.accessToken, tokenResponse.refreshToken, clientIdClientSecret);
-        await this.userService.setInformation(this.tokenService.getUserId(), this.tokenService.getEmail(),
-            tokenResponse.kdf, tokenResponse.kdfIterations);
-        if (this.setCryptoKeys) {
-            if (key != null) {
-                await this.cryptoService.setKey(key);
-            }
-            if (localHashedPassword != null) {
-                await this.cryptoService.setKeyHash(localHashedPassword);
-            }
-
-            // Skip this step during SSO new user flow. No key is returned from server.
-            if (code == null || tokenResponse.key != null) {
-
-                if (tokenResponse.keyConnectorUrl != null) {
-                    await this.keyConnectorService.getAndSetKey(tokenResponse.keyConnectorUrl);
-                } else if (tokenResponse.apiUseKeyConnector) {
-                    const keyConnectorUrl = this.environmentService.getKeyConnectorUrl();
-                    await this.keyConnectorService.getAndSetKey(keyConnectorUrl);
-                }
-
-                await this.cryptoService.setEncKey(tokenResponse.key);
-
-                // User doesn't have a key pair yet (old account), let's generate one for them
-                if (tokenResponse.privateKey == null) {
-                    try {
-                        const keyPair = await this.cryptoService.makeKeyPair();
-                        await this.apiService.postAccountKeys(new KeysRequest(keyPair[0], keyPair[1].encryptedString));
-                        tokenResponse.privateKey = keyPair[1].encryptedString;
-                    } catch (e) {
-                        this.logService.error(e);
-                    }
-                }
-
-                await this.cryptoService.setEncPrivateKey(tokenResponse.privateKey);
-            } else if (tokenResponse.keyConnectorUrl != null) {
-                const password = await this.cryptoFunctionService.randomBytes(64);
-
-                const k = await this.cryptoService.makeKey(Utils.fromBufferToB64(password), this.tokenService.getEmail(), tokenResponse.kdf, tokenResponse.kdfIterations);
-                const keyConnectorRequest = new KeyConnectorUserKeyRequest(k.encKeyB64);
-                await this.cryptoService.setKey(k);
-
-                const encKey = await this.cryptoService.makeEncKey(k);
-                await this.cryptoService.setEncKey(encKey[1].encryptedString);
-
-                const [pubKey, privKey] = await this.cryptoService.makeKeyPair();
-
-                try {
-                    await this.apiService.postUserKeyToKeyConnector(tokenResponse.keyConnectorUrl, keyConnectorRequest);
-                } catch (e) {
-                    throw new Error('Unable to reach key connector');
-                }
-
-                const keys = new KeysRequest(pubKey, privKey.encryptedString);
-                const setPasswordRequest = new SetKeyConnectorKeyRequest(
-                    encKey[1].encryptedString, tokenResponse.kdf, tokenResponse.kdfIterations, orgId, keys
-                );
-                await this.apiService.postSetKeyConnectorKey(setPasswordRequest);
-            }
-        }
+        const [pubKey, privKey] = await this.cryptoService.makeKeyPair();
 
-        if (this.vaultTimeoutService != null) {
-            this.vaultTimeoutService.biometricLocked = false;
+        try {
+          await this.apiService.postUserKeyToKeyConnector(
+            tokenResponse.keyConnectorUrl,
+            keyConnectorRequest
+          );
+        } catch (e) {
+          throw new Error("Unable to reach key connector");
         }
-        this.messagingService.send('loggedIn');
-        return result;
+
+        const keys = new KeysRequest(pubKey, privKey.encryptedString);
+        const setPasswordRequest = new SetKeyConnectorKeyRequest(
+          encKey[1].encryptedString,
+          tokenResponse.kdf,
+          tokenResponse.kdfIterations,
+          orgId,
+          keys
+        );
+        await this.apiService.postSetKeyConnectorKey(setPasswordRequest);
+      }
     }
 
-    private clearState(): void {
-        this.key = null;
-        this.email = null;
-        this.masterPasswordHash = null;
-        this.localMasterPasswordHash = null;
-        this.code = null;
-        this.codeVerifier = null;
-        this.ssoRedirectUrl = null;
-        this.clientId = null;
-        this.clientSecret = null;
-        this.twoFactorProvidersData = null;
-        this.selectedTwoFactorProviderType = null;
+    if (this.vaultTimeoutService != null) {
+      await this.stateService.setBiometricLocked(false);
     }
+    this.messagingService.send("loggedIn");
+    return result;
+  }
+
+  private clearState(): void {
+    this.key = null;
+    this.email = null;
+    this.masterPasswordHash = null;
+    this.localMasterPasswordHash = null;
+    this.code = null;
+    this.codeVerifier = null;
+    this.ssoRedirectUrl = null;
+    this.clientId = null;
+    this.clientSecret = null;
+    this.twoFactorProvidersData = null;
+    this.selectedTwoFactorProviderType = null;
+  }
 }
diff --git a/jslib/common/src/services/azureFileUpload.service.ts b/jslib/common/src/services/azureFileUpload.service.ts
index 680e5ffc..300ee7b7 100644
--- a/jslib/common/src/services/azureFileUpload.service.ts
+++ b/jslib/common/src/services/azureFileUpload.service.ts
@@ -1,201 +1,215 @@
-import { LogService } from '../abstractions/log.service';
+import { LogService } from "../abstractions/log.service";
 
-import { Utils } from '../misc/utils';
+import { Utils } from "../misc/utils";
 
-import { EncArrayBuffer } from '../models/domain/encArrayBuffer';
+import { EncArrayBuffer } from "../models/domain/encArrayBuffer";
 
 const MAX_SINGLE_BLOB_UPLOAD_SIZE = 256 * 1024 * 1024; // 256 MiB
 const MAX_BLOCKS_PER_BLOB = 50000;
 
 export class AzureFileUploadService {
-    constructor(private logService: LogService) { }
+  constructor(private logService: LogService) {}
 
-    async upload(url: string, data: EncArrayBuffer, renewalCallback: () => Promise<string>) {
-        if (data.buffer.byteLength <= MAX_SINGLE_BLOB_UPLOAD_SIZE) {
-            return await this.azureUploadBlob(url, data);
-        } else {
-            return await this.azureUploadBlocks(url, data, renewalCallback);
-        }
+  async upload(url: string, data: EncArrayBuffer, renewalCallback: () => Promise<string>) {
+    if (data.buffer.byteLength <= MAX_SINGLE_BLOB_UPLOAD_SIZE) {
+      return await this.azureUploadBlob(url, data);
+    } else {
+      return await this.azureUploadBlocks(url, data, renewalCallback);
+    }
+  }
+  private async azureUploadBlob(url: string, data: EncArrayBuffer) {
+    const urlObject = Utils.getUrl(url);
+    const headers = new Headers({
+      "x-ms-date": new Date().toUTCString(),
+      "x-ms-version": urlObject.searchParams.get("sv"),
+      "Content-Length": data.buffer.byteLength.toString(),
+      "x-ms-blob-type": "BlockBlob",
+    });
+
+    const request = new Request(url, {
+      body: data.buffer,
+      cache: "no-store",
+      method: "PUT",
+      headers: headers,
+    });
+
+    const blobResponse = await fetch(request);
+
+    if (blobResponse.status !== 201) {
+      throw new Error(`Failed to create Azure blob: ${blobResponse.status}`);
+    }
+  }
+  private async azureUploadBlocks(
+    url: string,
+    data: EncArrayBuffer,
+    renewalCallback: () => Promise<string>
+  ) {
+    const baseUrl = Utils.getUrl(url);
+    const blockSize = this.getMaxBlockSize(baseUrl.searchParams.get("sv"));
+    let blockIndex = 0;
+    const numBlocks = Math.ceil(data.buffer.byteLength / blockSize);
+    const blocksStaged: string[] = [];
+
+    if (numBlocks > MAX_BLOCKS_PER_BLOB) {
+      throw new Error(
+        `Cannot upload file, exceeds maximum size of ${blockSize * MAX_BLOCKS_PER_BLOB}`
+      );
     }
-    private async azureUploadBlob(url: string, data: EncArrayBuffer) {
-        const urlObject = Utils.getUrl(url);
-        const headers = new Headers({
-            'x-ms-date': new Date().toUTCString(),
-            'x-ms-version': urlObject.searchParams.get('sv'),
-            'Content-Length': data.buffer.byteLength.toString(),
-            'x-ms-blob-type': 'BlockBlob',
+
+    try {
+      while (blockIndex < numBlocks) {
+        url = await this.renewUrlIfNecessary(url, renewalCallback);
+        const blockUrl = Utils.getUrl(url);
+        const blockId = this.encodedBlockId(blockIndex);
+        blockUrl.searchParams.append("comp", "block");
+        blockUrl.searchParams.append("blockid", blockId);
+        const start = blockIndex * blockSize;
+        const blockData = data.buffer.slice(start, start + blockSize);
+        const blockHeaders = new Headers({
+          "x-ms-date": new Date().toUTCString(),
+          "x-ms-version": blockUrl.searchParams.get("sv"),
+          "Content-Length": blockData.byteLength.toString(),
         });
 
-        const request = new Request(url, {
-            body: data.buffer,
-            cache: 'no-store',
-            method: 'PUT',
-            headers: headers,
+        const blockRequest = new Request(blockUrl.toString(), {
+          body: blockData,
+          cache: "no-store",
+          method: "PUT",
+          headers: blockHeaders,
         });
 
-        const blobResponse = await fetch(request);
+        const blockResponse = await fetch(blockRequest);
 
-        if (blobResponse.status !== 201) {
-            throw new Error(`Failed to create Azure blob: ${blobResponse.status}`);
-        }
-    }
-    private async azureUploadBlocks(url: string, data: EncArrayBuffer, renewalCallback: () => Promise<string>) {
-        const baseUrl = Utils.getUrl(url);
-        const blockSize = this.getMaxBlockSize(baseUrl.searchParams.get('sv'));
-        let blockIndex = 0;
-        const numBlocks = Math.ceil(data.buffer.byteLength / blockSize);
-        const blocksStaged: string[] = [];
-
-        if (numBlocks > MAX_BLOCKS_PER_BLOB) {
-            throw new Error(`Cannot upload file, exceeds maximum size of ${blockSize * MAX_BLOCKS_PER_BLOB}`);
+        if (blockResponse.status !== 201) {
+          const message = `Unsuccessful block PUT. Received status ${blockResponse.status}`;
+          this.logService.error(message + "\n" + (await blockResponse.json()));
+          throw new Error(message);
         }
 
-        try {
-            while (blockIndex < numBlocks) {
-                url = await this.renewUrlIfNecessary(url, renewalCallback);
-                const blockUrl = Utils.getUrl(url);
-                const blockId = this.encodedBlockId(blockIndex);
-                blockUrl.searchParams.append('comp', 'block');
-                blockUrl.searchParams.append('blockid', blockId);
-                const start = blockIndex * blockSize;
-                const blockData = data.buffer.slice(start, start + blockSize);
-                const blockHeaders = new Headers({
-                    'x-ms-date': new Date().toUTCString(),
-                    'x-ms-version': blockUrl.searchParams.get('sv'),
-                    'Content-Length': blockData.byteLength.toString(),
-                });
-
-                const blockRequest = new Request(blockUrl.toString(), {
-                    body: blockData,
-                    cache: 'no-store',
-                    method: 'PUT',
-                    headers: blockHeaders,
-                });
-
-                const blockResponse = await fetch(blockRequest);
-
-                if (blockResponse.status !== 201) {
-                    const message = `Unsuccessful block PUT. Received status ${blockResponse.status}`;
-                    this.logService.error(message + '\n' + await blockResponse.json());
-                    throw new Error(message);
-                }
-
-                blocksStaged.push(blockId);
-                blockIndex++;
-            }
-
-            url = await this.renewUrlIfNecessary(url, renewalCallback);
-            const blockListUrl = Utils.getUrl(url);
-            const blockListXml = this.blockListXml(blocksStaged);
-            blockListUrl.searchParams.append('comp', 'blocklist');
-            const headers = new Headers({
-                'x-ms-date': new Date().toUTCString(),
-                'x-ms-version': blockListUrl.searchParams.get('sv'),
-                'Content-Length': blockListXml.length.toString(),
-            });
-
-            const request = new Request(blockListUrl.toString(), {
-                body: blockListXml,
-                cache: 'no-store',
-                method: 'PUT',
-                headers: headers,
-            });
-
-            const response = await fetch(request);
-
-            if (response.status !== 201) {
-                const message = `Unsuccessful block list PUT. Received status ${response.status}`;
-                this.logService.error(message + '\n' + await response.json());
-                throw new Error(message);
-            }
-        } catch (e) {
-            throw e;
-        }
+        blocksStaged.push(blockId);
+        blockIndex++;
+      }
+
+      url = await this.renewUrlIfNecessary(url, renewalCallback);
+      const blockListUrl = Utils.getUrl(url);
+      const blockListXml = this.blockListXml(blocksStaged);
+      blockListUrl.searchParams.append("comp", "blocklist");
+      const headers = new Headers({
+        "x-ms-date": new Date().toUTCString(),
+        "x-ms-version": blockListUrl.searchParams.get("sv"),
+        "Content-Length": blockListXml.length.toString(),
+      });
+
+      const request = new Request(blockListUrl.toString(), {
+        body: blockListXml,
+        cache: "no-store",
+        method: "PUT",
+        headers: headers,
+      });
+
+      const response = await fetch(request);
+
+      if (response.status !== 201) {
+        const message = `Unsuccessful block list PUT. Received status ${response.status}`;
+        this.logService.error(message + "\n" + (await response.json()));
+        throw new Error(message);
+      }
+    } catch (e) {
+      throw e;
     }
+  }
 
-    private async renewUrlIfNecessary(url: string, renewalCallback: () => Promise<string>): Promise<string> {
-        const urlObject = Utils.getUrl(url);
-        const expiry = new Date(urlObject.searchParams.get('se') ?? '');
-
-        if (isNaN(expiry.getTime())) {
-            expiry.setTime(Date.now() + 3600000);
-        }
-
-        if (expiry.getTime() < Date.now() + 1000) {
-            return await renewalCallback();
-        }
-        return url;
-    }
+  private async renewUrlIfNecessary(
+    url: string,
+    renewalCallback: () => Promise<string>
+  ): Promise<string> {
+    const urlObject = Utils.getUrl(url);
+    const expiry = new Date(urlObject.searchParams.get("se") ?? "");
 
-    private encodedBlockId(blockIndex: number) {
-        // Encoded blockId max size is 64, so pre-encoding max size is 48
-        const utfBlockId = ('000000000000000000000000000000000000000000000000' + blockIndex.toString()).slice(-48);
-        return Utils.fromUtf8ToB64(utfBlockId);
+    if (isNaN(expiry.getTime())) {
+      expiry.setTime(Date.now() + 3600000);
     }
 
-    private blockListXml(blockIdList: string[]) {
-        let xml = '<?xml version="1.0" encoding="utf-8"?><BlockList>';
-        blockIdList.forEach(blockId => {
-            xml += `<Latest>${blockId}</Latest>`;
-        });
-        xml += '</BlockList>';
-        return xml;
+    if (expiry.getTime() < Date.now() + 1000) {
+      return await renewalCallback();
     }
-
-    private getMaxBlockSize(version: string) {
-        if (Version.compare(version, '2019-12-12') >= 0) {
-            return 4000 * 1024 * 1024; // 4000 MiB
-        } else if (Version.compare(version, '2016-05-31') >= 0) {
-            return 100 * 1024 * 1024; // 100 MiB
-        } else {
-            return 4 * 1024 * 1024; // 4 MiB
-        }
+    return url;
+  }
+
+  private encodedBlockId(blockIndex: number) {
+    // Encoded blockId max size is 64, so pre-encoding max size is 48
+    const utfBlockId = (
+      "000000000000000000000000000000000000000000000000" + blockIndex.toString()
+    ).slice(-48);
+    return Utils.fromUtf8ToB64(utfBlockId);
+  }
+
+  private blockListXml(blockIdList: string[]) {
+    let xml = '<?xml version="1.0" encoding="utf-8"?><BlockList>';
+    blockIdList.forEach((blockId) => {
+      xml += `<Latest>${blockId}</Latest>`;
+    });
+    xml += "</BlockList>";
+    return xml;
+  }
+
+  private getMaxBlockSize(version: string) {
+    if (Version.compare(version, "2019-12-12") >= 0) {
+      return 4000 * 1024 * 1024; // 4000 MiB
+    } else if (Version.compare(version, "2016-05-31") >= 0) {
+      return 100 * 1024 * 1024; // 100 MiB
+    } else {
+      return 4 * 1024 * 1024; // 4 MiB
     }
+  }
 }
 
 class Version {
-    /**
-     * Compares two Azure Versions against each other
-     * @param a Version to compare
-     * @param b Version to compare
-     * @returns a number less than zero if b is newer than a, 0 if equal,
-     * and greater than zero if a is newer than b
-     */
-    static compare(a: Required<Version> | string, b: Required<Version> | string) {
-        if (typeof (a) === 'string') {
-            a = new Version(a);
-        }
-
-        if (typeof (b) === 'string') {
-            b = new Version(b);
-        }
-
-        return a.year !== b.year ? a.year - b.year :
-            a.month !== b.month ? a.month - b.month :
-                a.day !== b.day ? a.day - b.day :
-                    0;
+  /**
+   * Compares two Azure Versions against each other
+   * @param a Version to compare
+   * @param b Version to compare
+   * @returns a number less than zero if b is newer than a, 0 if equal,
+   * and greater than zero if a is newer than b
+   */
+  static compare(a: Required<Version> | string, b: Required<Version> | string) {
+    if (typeof a === "string") {
+      a = new Version(a);
     }
-    year = 0;
-    month = 0;
-    day = 0;
-
-    constructor(version: string) {
-        try {
-            const parts = version.split('-').map(v => Number.parseInt(v, 10));
-            this.year = parts[0];
-            this.month = parts[1];
-            this.day = parts[2];
-        } catch {
-            // Ignore error
-        }
+
+    if (typeof b === "string") {
+      b = new Version(b);
     }
-    /**
-     * Compares two Azure Versions against each other
-     * @param compareTo Version to compare against
-     * @returns a number less than zero if compareTo is newer, 0 if equal,
-     * and greater than zero if this is greater than compareTo
-     */
-    compare(compareTo: Required<Version> | string) {
-        return Version.compare(this, compareTo);
+
+    return a.year !== b.year
+      ? a.year - b.year
+      : a.month !== b.month
+      ? a.month - b.month
+      : a.day !== b.day
+      ? a.day - b.day
+      : 0;
+  }
+  year = 0;
+  month = 0;
+  day = 0;
+
+  constructor(version: string) {
+    try {
+      const parts = version.split("-").map((v) => Number.parseInt(v, 10));
+      this.year = parts[0];
+      this.month = parts[1];
+      this.day = parts[2];
+    } catch {
+      // Ignore error
     }
+  }
+  /**
+   * Compares two Azure Versions against each other
+   * @param compareTo Version to compare against
+   * @returns a number less than zero if compareTo is newer, 0 if equal,
+   * and greater than zero if this is greater than compareTo
+   */
+  compare(compareTo: Required<Version> | string) {
+    return Version.compare(this, compareTo);
+  }
 }
diff --git a/jslib/common/src/services/bitwardenFileUpload.service.ts b/jslib/common/src/services/bitwardenFileUpload.service.ts
index 9c699a48..3f54f73e 100644
--- a/jslib/common/src/services/bitwardenFileUpload.service.ts
+++ b/jslib/common/src/services/bitwardenFileUpload.service.ts
@@ -1,29 +1,36 @@
-import { ApiService } from '../abstractions/api.service';
+import { ApiService } from "../abstractions/api.service";
 
-import { EncArrayBuffer } from '../models/domain/encArrayBuffer';
+import { EncArrayBuffer } from "../models/domain/encArrayBuffer";
 
-import { Utils } from '../misc/utils';
+import { Utils } from "../misc/utils";
 
-export class BitwardenFileUploadService
-{
-    constructor(private apiService: ApiService) { }
+export class BitwardenFileUploadService {
+  constructor(private apiService: ApiService) {}
 
-    async upload(encryptedFileName: string, encryptedFileData: EncArrayBuffer, apiCall: (fd: FormData) => Promise<any>) {
-        const fd = new FormData();
-        try {
-            const blob = new Blob([encryptedFileData.buffer], { type: 'application/octet-stream' });
-            fd.append('data', blob, encryptedFileName);
-        } catch (e) {
-            if (Utils.isNode && !Utils.isBrowser) {
-                fd.append('data', Buffer.from(encryptedFileData.buffer) as any, {
-                    filepath: encryptedFileName,
-                    contentType: 'application/octet-stream',
-                } as any);
-            } else {
-                throw e;
-            }
-        }
-
-        await apiCall(fd);
+  async upload(
+    encryptedFileName: string,
+    encryptedFileData: EncArrayBuffer,
+    apiCall: (fd: FormData) => Promise<any>
+  ) {
+    const fd = new FormData();
+    try {
+      const blob = new Blob([encryptedFileData.buffer], { type: "application/octet-stream" });
+      fd.append("data", blob, encryptedFileName);
+    } catch (e) {
+      if (Utils.isNode && !Utils.isBrowser) {
+        fd.append(
+          "data",
+          Buffer.from(encryptedFileData.buffer) as any,
+          {
+            filepath: encryptedFileName,
+            contentType: "application/octet-stream",
+          } as any
+        );
+      } else {
+        throw e;
+      }
     }
+
+    await apiCall(fd);
+  }
 }
diff --git a/jslib/common/src/services/broadcaster.service.ts b/jslib/common/src/services/broadcaster.service.ts
index 6dfbfa64..999fbe4b 100644
--- a/jslib/common/src/services/broadcaster.service.ts
+++ b/jslib/common/src/services/broadcaster.service.ts
@@ -1,28 +1,28 @@
-import { BroadcasterService as BroadcasterServiceAbstraction } from '../abstractions/broadcaster.service';
+import { BroadcasterService as BroadcasterServiceAbstraction } from "../abstractions/broadcaster.service";
 
 export class BroadcasterService implements BroadcasterServiceAbstraction {
-    subscribers: Map<string, (message: any) => any> = new Map<string, (message: any) => any>();
+  subscribers: Map<string, (message: any) => any> = new Map<string, (message: any) => any>();
 
-    send(message: any, id?: string) {
-        if (id != null) {
-            if (this.subscribers.has(id)) {
-                this.subscribers.get(id)(message);
-            }
-            return;
-        }
-
-        this.subscribers.forEach(value => {
-            value(message);
-        });
+  send(message: any, id?: string) {
+    if (id != null) {
+      if (this.subscribers.has(id)) {
+        this.subscribers.get(id)(message);
+      }
+      return;
     }
 
-    subscribe(id: string, messageCallback: (message: any) => any) {
-        this.subscribers.set(id, messageCallback);
-    }
+    this.subscribers.forEach((value) => {
+      value(message);
+    });
+  }
+
+  subscribe(id: string, messageCallback: (message: any) => any) {
+    this.subscribers.set(id, messageCallback);
+  }
 
-    unsubscribe(id: string) {
-        if (this.subscribers.has(id)) {
-            this.subscribers.delete(id);
-        }
+  unsubscribe(id: string) {
+    if (this.subscribers.has(id)) {
+      this.subscribers.delete(id);
     }
+  }
 }
diff --git a/jslib/common/src/services/cipher.service.ts b/jslib/common/src/services/cipher.service.ts
index 421f381a..e9002146 100644
--- a/jslib/common/src/services/cipher.service.ts
+++ b/jslib/common/src/services/cipher.service.ts
@@ -1,1131 +1,1283 @@
-import { CipherType } from '../enums/cipherType';
-import { FieldType } from '../enums/fieldType';
-import { UriMatchType } from '../enums/uriMatchType';
-
-import { CipherData } from '../models/data/cipherData';
-
-import { Attachment } from '../models/domain/attachment';
-import { Card } from '../models/domain/card';
-import { Cipher } from '../models/domain/cipher';
-import Domain from '../models/domain/domainBase';
-import { EncArrayBuffer } from '../models/domain/encArrayBuffer';
-import { EncString } from '../models/domain/encString';
-import { Field } from '../models/domain/field';
-import { Identity } from '../models/domain/identity';
-import { Login } from '../models/domain/login';
-import { LoginUri } from '../models/domain/loginUri';
-import { Password } from '../models/domain/password';
-import { SecureNote } from '../models/domain/secureNote';
-import { SymmetricCryptoKey } from '../models/domain/symmetricCryptoKey';
-
-import { AttachmentRequest } from '../models/request/attachmentRequest';
-import { CipherBulkDeleteRequest } from '../models/request/cipherBulkDeleteRequest';
-import { CipherBulkMoveRequest } from '../models/request/cipherBulkMoveRequest';
-import { CipherBulkRestoreRequest } from '../models/request/cipherBulkRestoreRequest';
-import { CipherBulkShareRequest } from '../models/request/cipherBulkShareRequest';
-import { CipherCollectionsRequest } from '../models/request/cipherCollectionsRequest';
-import { CipherCreateRequest } from '../models/request/cipherCreateRequest';
-import { CipherRequest } from '../models/request/cipherRequest';
-import { CipherShareRequest } from '../models/request/cipherShareRequest';
-
-import { CipherResponse } from '../models/response/cipherResponse';
-import { ErrorResponse } from '../models/response/errorResponse';
-
-import { AttachmentView } from '../models/view/attachmentView';
-import { CipherView } from '../models/view/cipherView';
-import { FieldView } from '../models/view/fieldView';
-import { PasswordHistoryView } from '../models/view/passwordHistoryView';
-import { View } from '../models/view/view';
-
-import { SortedCiphersCache } from '../models/domain/sortedCiphersCache';
-
-import { ApiService } from '../abstractions/api.service';
-import { CipherService as CipherServiceAbstraction } from '../abstractions/cipher.service';
-import { CryptoService } from '../abstractions/crypto.service';
-import { FileUploadService } from '../abstractions/fileUpload.service';
-import { I18nService } from '../abstractions/i18n.service';
-import { SearchService } from '../abstractions/search.service';
-import { SettingsService } from '../abstractions/settings.service';
-import { StorageService } from '../abstractions/storage.service';
-import { UserService } from '../abstractions/user.service';
-
-import { ConstantsService } from './constants.service';
-
-import { LogService } from '../abstractions/log.service';
-import { sequentialize } from '../misc/sequentialize';
-import { Utils } from '../misc/utils';
-
-const Keys = {
-    ciphersPrefix: 'ciphers_',
-    localData: 'sitesLocalData',
-    neverDomains: 'neverDomains',
-};
+import { CipherType } from "../enums/cipherType";
+import { FieldType } from "../enums/fieldType";
+import { UriMatchType } from "../enums/uriMatchType";
+
+import { CipherData } from "../models/data/cipherData";
+
+import { Attachment } from "../models/domain/attachment";
+import { Card } from "../models/domain/card";
+import { Cipher } from "../models/domain/cipher";
+import Domain from "../models/domain/domainBase";
+import { EncArrayBuffer } from "../models/domain/encArrayBuffer";
+import { EncString } from "../models/domain/encString";
+import { Field } from "../models/domain/field";
+import { Identity } from "../models/domain/identity";
+import { Login } from "../models/domain/login";
+import { LoginUri } from "../models/domain/loginUri";
+import { Password } from "../models/domain/password";
+import { SecureNote } from "../models/domain/secureNote";
+import { SymmetricCryptoKey } from "../models/domain/symmetricCryptoKey";
+
+import { AttachmentRequest } from "../models/request/attachmentRequest";
+import { CipherBulkDeleteRequest } from "../models/request/cipherBulkDeleteRequest";
+import { CipherBulkMoveRequest } from "../models/request/cipherBulkMoveRequest";
+import { CipherBulkRestoreRequest } from "../models/request/cipherBulkRestoreRequest";
+import { CipherBulkShareRequest } from "../models/request/cipherBulkShareRequest";
+import { CipherCollectionsRequest } from "../models/request/cipherCollectionsRequest";
+import { CipherCreateRequest } from "../models/request/cipherCreateRequest";
+import { CipherRequest } from "../models/request/cipherRequest";
+import { CipherShareRequest } from "../models/request/cipherShareRequest";
+
+import { CipherResponse } from "../models/response/cipherResponse";
+import { ErrorResponse } from "../models/response/errorResponse";
+
+import { AttachmentView } from "../models/view/attachmentView";
+import { CipherView } from "../models/view/cipherView";
+import { FieldView } from "../models/view/fieldView";
+import { PasswordHistoryView } from "../models/view/passwordHistoryView";
+import { View } from "../models/view/view";
+
+import { SortedCiphersCache } from "../models/domain/sortedCiphersCache";
+
+import { ApiService } from "../abstractions/api.service";
+import { CipherService as CipherServiceAbstraction } from "../abstractions/cipher.service";
+import { CryptoService } from "../abstractions/crypto.service";
+import { FileUploadService } from "../abstractions/fileUpload.service";
+import { I18nService } from "../abstractions/i18n.service";
+import { SearchService } from "../abstractions/search.service";
+import { SettingsService } from "../abstractions/settings.service";
+import { StateService } from "../abstractions/state.service";
+
+import { LogService } from "../abstractions/log.service";
+import { sequentialize } from "../misc/sequentialize";
+import { Utils } from "../misc/utils";
 
 const DomainMatchBlacklist = new Map<string, Set<string>>([
-    ['google.com', new Set(['script.google.com'])],
+  ["google.com", new Set(["script.google.com"])],
 ]);
 
 export class CipherService implements CipherServiceAbstraction {
-    // tslint:disable-next-line
-    _decryptedCipherCache: CipherView[];
-
-    private sortedCiphersCache: SortedCiphersCache = new SortedCiphersCache(this.sortCiphersByLastUsed);
-
-    constructor(private cryptoService: CryptoService, private userService: UserService,
-        private settingsService: SettingsService, private apiService: ApiService,
-        private fileUploadService: FileUploadService, private storageService: StorageService,
-        private i18nService: I18nService, private searchService: () => SearchService,
-        private logService: LogService) {
-    }
-
-    get decryptedCipherCache() {
-        return this._decryptedCipherCache;
+  private sortedCiphersCache: SortedCiphersCache = new SortedCiphersCache(
+    this.sortCiphersByLastUsed
+  );
+
+  constructor(
+    private cryptoService: CryptoService,
+    private settingsService: SettingsService,
+    private apiService: ApiService,
+    private fileUploadService: FileUploadService,
+    private i18nService: I18nService,
+    private searchService: () => SearchService,
+    private logService: LogService,
+    private stateService: StateService
+  ) {}
+
+  async getDecryptedCipherCache(): Promise<CipherView[]> {
+    const decryptedCiphers = await this.stateService.getDecryptedCiphers();
+    return decryptedCiphers;
+  }
+
+  async setDecryptedCipherCache(value: CipherView[]) {
+    await this.stateService.setDecryptedCiphers(value);
+    if (this.searchService != null) {
+      if (value == null) {
+        this.searchService().clearIndex();
+      } else {
+        this.searchService().indexCiphers();
+      }
     }
-    set decryptedCipherCache(value: CipherView[]) {
-        this._decryptedCipherCache = value;
-        if (this.searchService != null) {
-            if (value == null) {
-                this.searchService().clearIndex();
-            } else {
-                this.searchService().indexCiphers();
+  }
+
+  async clearCache(userId?: string): Promise<void> {
+    await this.clearDecryptedCiphersState(userId);
+  }
+
+  async encrypt(
+    model: CipherView,
+    key?: SymmetricCryptoKey,
+    originalCipher: Cipher = null
+  ): Promise<Cipher> {
+    // Adjust password history
+    if (model.id != null) {
+      if (originalCipher == null) {
+        originalCipher = await this.get(model.id);
+      }
+      if (originalCipher != null) {
+        const existingCipher = await originalCipher.decrypt();
+        model.passwordHistory = existingCipher.passwordHistory || [];
+        if (model.type === CipherType.Login && existingCipher.type === CipherType.Login) {
+          if (
+            existingCipher.login.password != null &&
+            existingCipher.login.password !== "" &&
+            existingCipher.login.password !== model.login.password
+          ) {
+            const ph = new PasswordHistoryView();
+            ph.password = existingCipher.login.password;
+            ph.lastUsedDate = model.login.passwordRevisionDate = new Date();
+            model.passwordHistory.splice(0, 0, ph);
+          } else {
+            model.login.passwordRevisionDate = existingCipher.login.passwordRevisionDate;
+          }
+        }
+        if (existingCipher.hasFields) {
+          const existingHiddenFields = existingCipher.fields.filter(
+            (f) =>
+              f.type === FieldType.Hidden &&
+              f.name != null &&
+              f.name !== "" &&
+              f.value != null &&
+              f.value !== ""
+          );
+          const hiddenFields =
+            model.fields == null
+              ? []
+              : model.fields.filter(
+                  (f) => f.type === FieldType.Hidden && f.name != null && f.name !== ""
+                );
+          existingHiddenFields.forEach((ef) => {
+            const matchedField = hiddenFields.find((f) => f.name === ef.name);
+            if (matchedField == null || matchedField.value !== ef.value) {
+              const ph = new PasswordHistoryView();
+              ph.password = ef.name + ": " + ef.value;
+              ph.lastUsedDate = new Date();
+              model.passwordHistory.splice(0, 0, ph);
             }
+          });
         }
+      }
+      if (model.passwordHistory != null && model.passwordHistory.length === 0) {
+        model.passwordHistory = null;
+      } else if (model.passwordHistory != null && model.passwordHistory.length > 5) {
+        // only save last 5 history
+        model.passwordHistory = model.passwordHistory.slice(0, 5);
+      }
     }
 
-    clearCache(): void {
-        this.decryptedCipherCache = null;
-        this.sortedCiphersCache.clear();
+    const cipher = new Cipher();
+    cipher.id = model.id;
+    cipher.folderId = model.folderId;
+    cipher.favorite = model.favorite;
+    cipher.organizationId = model.organizationId;
+    cipher.type = model.type;
+    cipher.collectionIds = model.collectionIds;
+    cipher.revisionDate = model.revisionDate;
+    cipher.reprompt = model.reprompt;
+
+    if (key == null && cipher.organizationId != null) {
+      key = await this.cryptoService.getOrgKey(cipher.organizationId);
+      if (key == null) {
+        throw new Error("Cannot encrypt cipher for organization. No key.");
+      }
     }
-
-    async encrypt(model: CipherView, key?: SymmetricCryptoKey, originalCipher: Cipher = null): Promise<Cipher> {
-        // Adjust password history
-        if (model.id != null) {
-            if (originalCipher == null) {
-                originalCipher = await this.get(model.id);
-            }
-            if (originalCipher != null) {
-                const existingCipher = await originalCipher.decrypt();
-                model.passwordHistory = existingCipher.passwordHistory || [];
-                if (model.type === CipherType.Login && existingCipher.type === CipherType.Login) {
-                    if (existingCipher.login.password != null && existingCipher.login.password !== '' &&
-                        existingCipher.login.password !== model.login.password) {
-                        const ph = new PasswordHistoryView();
-                        ph.password = existingCipher.login.password;
-                        ph.lastUsedDate = model.login.passwordRevisionDate = new Date();
-                        model.passwordHistory.splice(0, 0, ph);
-                    } else {
-                        model.login.passwordRevisionDate = existingCipher.login.passwordRevisionDate;
-                    }
-                }
-                if (existingCipher.hasFields) {
-                    const existingHiddenFields = existingCipher.fields.filter(f => f.type === FieldType.Hidden &&
-                        f.name != null && f.name !== '' && f.value != null && f.value !== '');
-                    const hiddenFields = model.fields == null ? [] :
-                        model.fields.filter(f => f.type === FieldType.Hidden && f.name != null && f.name !== '');
-                    existingHiddenFields.forEach(ef => {
-                        const matchedField = hiddenFields.find(f => f.name === ef.name);
-                        if (matchedField == null || matchedField.value !== ef.value) {
-                            const ph = new PasswordHistoryView();
-                            ph.password = ef.name + ': ' + ef.value;
-                            ph.lastUsedDate = new Date();
-                            model.passwordHistory.splice(0, 0, ph);
-                        }
-                    });
-                }
-            }
-            if (model.passwordHistory != null && model.passwordHistory.length === 0) {
-                model.passwordHistory = null;
-            } else if (model.passwordHistory != null && model.passwordHistory.length > 5) {
-                // only save last 5 history
-                model.passwordHistory = model.passwordHistory.slice(0, 5);
-            }
-        }
-
-        const cipher = new Cipher();
-        cipher.id = model.id;
-        cipher.folderId = model.folderId;
-        cipher.favorite = model.favorite;
-        cipher.organizationId = model.organizationId;
-        cipher.type = model.type;
-        cipher.collectionIds = model.collectionIds;
-        cipher.revisionDate = model.revisionDate;
-        cipher.reprompt = model.reprompt;
-
-        if (key == null && cipher.organizationId != null) {
-            key = await this.cryptoService.getOrgKey(cipher.organizationId);
-            if (key == null) {
-                throw new Error('Cannot encrypt cipher for organization. No key.');
-            }
-        }
-        await Promise.all([
-            this.encryptObjProperty(model, cipher, {
-                name: null,
-                notes: null,
-            }, key),
-            this.encryptCipherData(cipher, model, key),
-            this.encryptFields(model.fields, key).then(fields => {
-                cipher.fields = fields;
-            }),
-            this.encryptPasswordHistories(model.passwordHistory, key).then(ph => {
-                cipher.passwordHistory = ph;
-            }),
-            this.encryptAttachments(model.attachments, key).then(attachments => {
-                cipher.attachments = attachments;
-            }),
-        ]);
-
-        return cipher;
+    await Promise.all([
+      this.encryptObjProperty(
+        model,
+        cipher,
+        {
+          name: null,
+          notes: null,
+        },
+        key
+      ),
+      this.encryptCipherData(cipher, model, key),
+      this.encryptFields(model.fields, key).then((fields) => {
+        cipher.fields = fields;
+      }),
+      this.encryptPasswordHistories(model.passwordHistory, key).then((ph) => {
+        cipher.passwordHistory = ph;
+      }),
+      this.encryptAttachments(model.attachments, key).then((attachments) => {
+        cipher.attachments = attachments;
+      }),
+    ]);
+
+    return cipher;
+  }
+
+  async encryptAttachments(
+    attachmentsModel: AttachmentView[],
+    key: SymmetricCryptoKey
+  ): Promise<Attachment[]> {
+    if (attachmentsModel == null || attachmentsModel.length === 0) {
+      return null;
     }
 
-    async encryptAttachments(attachmentsModel: AttachmentView[], key: SymmetricCryptoKey): Promise<Attachment[]> {
-        if (attachmentsModel == null || attachmentsModel.length === 0) {
-            return null;
+    const promises: Promise<any>[] = [];
+    const encAttachments: Attachment[] = [];
+    attachmentsModel.forEach(async (model) => {
+      const attachment = new Attachment();
+      attachment.id = model.id;
+      attachment.size = model.size;
+      attachment.sizeName = model.sizeName;
+      attachment.url = model.url;
+      const promise = this.encryptObjProperty(
+        model,
+        attachment,
+        {
+          fileName: null,
+        },
+        key
+      ).then(async () => {
+        if (model.key != null) {
+          attachment.key = await this.cryptoService.encrypt(model.key.key, key);
         }
-
-        const promises: Promise<any>[] = [];
-        const encAttachments: Attachment[] = [];
-        attachmentsModel.forEach(async model => {
-            const attachment = new Attachment();
-            attachment.id = model.id;
-            attachment.size = model.size;
-            attachment.sizeName = model.sizeName;
-            attachment.url = model.url;
-            const promise = this.encryptObjProperty(model, attachment, {
-                fileName: null,
-            }, key).then(async () => {
-                if (model.key != null) {
-                    attachment.key = await this.cryptoService.encrypt(model.key.key, key);
-                }
-                encAttachments.push(attachment);
-            });
-            promises.push(promise);
-        });
-
-        await Promise.all(promises);
-        return encAttachments;
+        encAttachments.push(attachment);
+      });
+      promises.push(promise);
+    });
+
+    await Promise.all(promises);
+    return encAttachments;
+  }
+
+  async encryptFields(fieldsModel: FieldView[], key: SymmetricCryptoKey): Promise<Field[]> {
+    if (!fieldsModel || !fieldsModel.length) {
+      return null;
     }
 
-    async encryptFields(fieldsModel: FieldView[], key: SymmetricCryptoKey): Promise<Field[]> {
-        if (!fieldsModel || !fieldsModel.length) {
-            return null;
-        }
-
-        const self = this;
-        const encFields: Field[] = [];
-        await fieldsModel.reduce((promise, field) => {
-            return promise.then(() => {
-                return self.encryptField(field, key);
-            }).then((encField: Field) => {
-                encFields.push(encField);
-            });
-        }, Promise.resolve());
-
-        return encFields;
+    const self = this;
+    const encFields: Field[] = [];
+    await fieldsModel.reduce(async (promise, field) => {
+      await promise;
+      const encField = await self.encryptField(field, key);
+      encFields.push(encField);
+    }, Promise.resolve());
+
+    return encFields;
+  }
+
+  async encryptField(fieldModel: FieldView, key: SymmetricCryptoKey): Promise<Field> {
+    const field = new Field();
+    field.type = fieldModel.type;
+    field.linkedId = fieldModel.linkedId;
+    // normalize boolean type field values
+    if (fieldModel.type === FieldType.Boolean && fieldModel.value !== "true") {
+      fieldModel.value = "false";
     }
 
-    async encryptField(fieldModel: FieldView, key: SymmetricCryptoKey): Promise<Field> {
-        const field = new Field();
-        field.type = fieldModel.type;
-        field.linkedId = fieldModel.linkedId;
-        // normalize boolean type field values
-        if (fieldModel.type === FieldType.Boolean && fieldModel.value !== 'true') {
-            fieldModel.value = 'false';
-        }
-
-        await this.encryptObjProperty(fieldModel, field, {
-            name: null,
-            value: null,
-        }, key);
-
-        return field;
+    await this.encryptObjProperty(
+      fieldModel,
+      field,
+      {
+        name: null,
+        value: null,
+      },
+      key
+    );
+
+    return field;
+  }
+
+  async encryptPasswordHistories(
+    phModels: PasswordHistoryView[],
+    key: SymmetricCryptoKey
+  ): Promise<Password[]> {
+    if (!phModels || !phModels.length) {
+      return null;
     }
 
-    async encryptPasswordHistories(phModels: PasswordHistoryView[], key: SymmetricCryptoKey): Promise<Password[]> {
-        if (!phModels || !phModels.length) {
-            return null;
-        }
-
-        const self = this;
-        const encPhs: Password[] = [];
-        await phModels.reduce((promise, ph) => {
-            return promise.then(() => {
-                return self.encryptPasswordHistory(ph, key);
-            }).then((encPh: Password) => {
-                encPhs.push(encPh);
-            });
-        }, Promise.resolve());
-
-        return encPhs;
+    const self = this;
+    const encPhs: Password[] = [];
+    await phModels.reduce(async (promise, ph) => {
+      await promise;
+      const encPh = await self.encryptPasswordHistory(ph, key);
+      encPhs.push(encPh);
+    }, Promise.resolve());
+
+    return encPhs;
+  }
+
+  async encryptPasswordHistory(
+    phModel: PasswordHistoryView,
+    key: SymmetricCryptoKey
+  ): Promise<Password> {
+    const ph = new Password();
+    ph.lastUsedDate = phModel.lastUsedDate;
+
+    await this.encryptObjProperty(
+      phModel,
+      ph,
+      {
+        password: null,
+      },
+      key
+    );
+
+    return ph;
+  }
+
+  async get(id: string): Promise<Cipher> {
+    const ciphers = await this.stateService.getEncryptedCiphers();
+    if (ciphers == null || !ciphers.hasOwnProperty(id)) {
+      return null;
     }
 
-    async encryptPasswordHistory(phModel: PasswordHistoryView, key: SymmetricCryptoKey): Promise<Password> {
-        const ph = new Password();
-        ph.lastUsedDate = phModel.lastUsedDate;
-
-        await this.encryptObjProperty(phModel, ph, {
-            password: null,
-        }, key);
-
-        return ph;
+    const localData = await this.stateService.getLocalData();
+    return new Cipher(ciphers[id], false, localData ? localData[id] : null);
+  }
+
+  async getAll(): Promise<Cipher[]> {
+    const localData = await this.stateService.getLocalData();
+    const ciphers = await this.stateService.getEncryptedCiphers();
+    const response: Cipher[] = [];
+    for (const id in ciphers) {
+      if (ciphers.hasOwnProperty(id)) {
+        response.push(new Cipher(ciphers[id], false, localData ? localData[id] : null));
+      }
+    }
+    return response;
+  }
+
+  @sequentialize(() => "getAllDecrypted")
+  async getAllDecrypted(): Promise<CipherView[]> {
+    const userId = await this.stateService.getUserId();
+    if ((await this.getDecryptedCipherCache()) != null) {
+      if (
+        this.searchService != null &&
+        (this.searchService().indexedEntityId ?? userId) !== userId
+      ) {
+        await this.searchService().indexCiphers(userId, await this.getDecryptedCipherCache());
+      }
+      return await this.getDecryptedCipherCache();
     }
 
-    async get(id: string): Promise<Cipher> {
-        const userId = await this.userService.getUserId();
-        const localData = await this.storageService.get<any>(Keys.localData);
-        const ciphers = await this.storageService.get<{ [id: string]: CipherData; }>(
-            Keys.ciphersPrefix + userId);
-        if (ciphers == null || !ciphers.hasOwnProperty(id)) {
-            return null;
-        }
-
-        return new Cipher(ciphers[id], false, localData ? localData[id] : null);
+    const decCiphers: CipherView[] = [];
+    const hasKey = await this.cryptoService.hasKey();
+    if (!hasKey) {
+      throw new Error("No key.");
     }
 
-    async getAll(): Promise<Cipher[]> {
-        const userId = await this.userService.getUserId();
-        const localData = await this.storageService.get<any>(Keys.localData);
-        const ciphers = await this.storageService.get<{ [id: string]: CipherData; }>(
-            Keys.ciphersPrefix + userId);
-        const response: Cipher[] = [];
-        for (const id in ciphers) {
-            if (ciphers.hasOwnProperty(id)) {
-                response.push(new Cipher(ciphers[id], false, localData ? localData[id] : null));
-            }
-        }
-        return response;
+    const promises: any[] = [];
+    const ciphers = await this.getAll();
+    ciphers.forEach(async (cipher) => {
+      promises.push(cipher.decrypt().then((c) => decCiphers.push(c)));
+    });
+
+    await Promise.all(promises);
+    decCiphers.sort(this.getLocaleSortingFunction());
+    await this.setDecryptedCipherCache(decCiphers);
+    return decCiphers;
+  }
+
+  async getAllDecryptedForGrouping(
+    groupingId: string,
+    folder: boolean = true
+  ): Promise<CipherView[]> {
+    const ciphers = await this.getAllDecrypted();
+
+    return ciphers.filter((cipher) => {
+      if (cipher.isDeleted) {
+        return false;
+      }
+      if (folder && cipher.folderId === groupingId) {
+        return true;
+      } else if (
+        !folder &&
+        cipher.collectionIds != null &&
+        cipher.collectionIds.indexOf(groupingId) > -1
+      ) {
+        return true;
+      }
+
+      return false;
+    });
+  }
+
+  async getAllDecryptedForUrl(
+    url: string,
+    includeOtherTypes?: CipherType[],
+    defaultMatch: UriMatchType = null
+  ): Promise<CipherView[]> {
+    if (url == null && includeOtherTypes == null) {
+      return Promise.resolve([]);
     }
 
-    @sequentialize(() => 'getAllDecrypted')
-    async getAllDecrypted(): Promise<CipherView[]> {
-        if (this.decryptedCipherCache != null) {
-            const userId = await this.userService.getUserId();
-            if (this.searchService != null && (this.searchService().indexedEntityId ?? userId) !== userId)
-            {
-                await this.searchService().indexCiphers(userId, this.decryptedCipherCache);
+    const domain = Utils.getDomain(url);
+    const eqDomainsPromise =
+      domain == null
+        ? Promise.resolve([])
+        : this.settingsService.getEquivalentDomains().then((eqDomains: any[][]) => {
+            let matches: any[] = [];
+            eqDomains.forEach((eqDomain) => {
+              if (eqDomain.length && eqDomain.indexOf(domain) >= 0) {
+                matches = matches.concat(eqDomain);
+              }
+            });
+
+            if (!matches.length) {
+              matches.push(domain);
             }
-            return this.decryptedCipherCache;
-        }
 
-        const decCiphers: CipherView[] = [];
-        const hasKey = await this.cryptoService.hasKey();
-        if (!hasKey) {
-            throw new Error('No key.');
-        }
+            return matches;
+          });
 
-        const promises: any[] = [];
-        const ciphers = await this.getAll();
-        ciphers.forEach(cipher => {
-            promises.push(cipher.decrypt().then(c => decCiphers.push(c)));
-        });
+    const result = await Promise.all([eqDomainsPromise, this.getAllDecrypted()]);
+    const matchingDomains = result[0];
+    const ciphers = result[1];
 
-        await Promise.all(promises);
-        decCiphers.sort(this.getLocaleSortingFunction());
-        this.decryptedCipherCache = decCiphers;
-        return this.decryptedCipherCache;
+    if (defaultMatch == null) {
+      defaultMatch = await this.stateService.getDefaultUriMatch();
+      if (defaultMatch == null) {
+        defaultMatch = UriMatchType.Domain;
+      }
     }
 
-    async getAllDecryptedForGrouping(groupingId: string, folder: boolean = true): Promise<CipherView[]> {
-        const ciphers = await this.getAllDecrypted();
-
-        return ciphers.filter(cipher => {
-            if (cipher.isDeleted) {
-                return false;
-            }
-            if (folder && cipher.folderId === groupingId) {
+    return ciphers.filter((cipher) => {
+      if (cipher.deletedDate != null) {
+        return false;
+      }
+      if (includeOtherTypes != null && includeOtherTypes.indexOf(cipher.type) > -1) {
+        return true;
+      }
+
+      if (url != null && cipher.type === CipherType.Login && cipher.login.uris != null) {
+        for (let i = 0; i < cipher.login.uris.length; i++) {
+          const u = cipher.login.uris[i];
+          if (u.uri == null) {
+            continue;
+          }
+
+          const match = u.match == null ? defaultMatch : u.match;
+          switch (match) {
+            case UriMatchType.Domain:
+              if (domain != null && u.domain != null && matchingDomains.indexOf(u.domain) > -1) {
+                if (DomainMatchBlacklist.has(u.domain)) {
+                  const domainUrlHost = Utils.getHost(url);
+                  if (!DomainMatchBlacklist.get(u.domain).has(domainUrlHost)) {
+                    return true;
+                  }
+                } else {
+                  return true;
+                }
+              }
+              break;
+            case UriMatchType.Host:
+              const urlHost = Utils.getHost(url);
+              if (urlHost != null && urlHost === Utils.getHost(u.uri)) {
                 return true;
-            } else if (!folder && cipher.collectionIds != null && cipher.collectionIds.indexOf(groupingId) > -1) {
+              }
+              break;
+            case UriMatchType.Exact:
+              if (url === u.uri) {
                 return true;
-            }
-
-            return false;
-        });
-    }
-
-    async getAllDecryptedForUrl(url: string, includeOtherTypes?: CipherType[],
-        defaultMatch: UriMatchType = null): Promise<CipherView[]> {
-        if (url == null && includeOtherTypes == null) {
-            return Promise.resolve([]);
-        }
-
-        const domain = Utils.getDomain(url);
-        const eqDomainsPromise = domain == null ? Promise.resolve([]) :
-            this.settingsService.getEquivalentDomains().then((eqDomains: any[][]) => {
-                let matches: any[] = [];
-                eqDomains.forEach(eqDomain => {
-                    if (eqDomain.length && eqDomain.indexOf(domain) >= 0) {
-                        matches = matches.concat(eqDomain);
-                    }
-                });
-
-                if (!matches.length) {
-                    matches.push(domain);
-                }
-
-                return matches;
-            });
-
-        const result = await Promise.all([eqDomainsPromise, this.getAllDecrypted()]);
-        const matchingDomains = result[0];
-        const ciphers = result[1];
-
-        if (defaultMatch == null) {
-            defaultMatch = await this.storageService.get<UriMatchType>(ConstantsService.defaultUriMatch);
-            if (defaultMatch == null) {
-                defaultMatch = UriMatchType.Domain;
-            }
-        }
-
-        return ciphers.filter(cipher => {
-            if (cipher.deletedDate != null) {
-                return false;
-            }
-            if (includeOtherTypes != null && includeOtherTypes.indexOf(cipher.type) > -1) {
+              }
+              break;
+            case UriMatchType.StartsWith:
+              if (url.startsWith(u.uri)) {
                 return true;
-            }
-
-            if (url != null && cipher.type === CipherType.Login && cipher.login.uris != null) {
-                for (let i = 0; i < cipher.login.uris.length; i++) {
-                    const u = cipher.login.uris[i];
-                    if (u.uri == null) {
-                        continue;
-                    }
-
-                    const match = u.match == null ? defaultMatch : u.match;
-                    switch (match) {
-                        case UriMatchType.Domain:
-                            if (domain != null && u.domain != null && matchingDomains.indexOf(u.domain) > -1) {
-                                if (DomainMatchBlacklist.has(u.domain)) {
-                                    const domainUrlHost = Utils.getHost(url);
-                                    if (!DomainMatchBlacklist.get(u.domain).has(domainUrlHost)) {
-                                        return true;
-                                    }
-                                } else {
-                                    return true;
-                                }
-                            }
-                            break;
-                        case UriMatchType.Host:
-                            const urlHost = Utils.getHost(url);
-                            if (urlHost != null && urlHost === Utils.getHost(u.uri)) {
-                                return true;
-                            }
-                            break;
-                        case UriMatchType.Exact:
-                            if (url === u.uri) {
-                                return true;
-                            }
-                            break;
-                        case UriMatchType.StartsWith:
-                            if (url.startsWith(u.uri)) {
-                                return true;
-                            }
-                            break;
-                        case UriMatchType.RegularExpression:
-                            try {
-                                const regex = new RegExp(u.uri, 'i');
-                                if (regex.test(url)) {
-                                    return true;
-                                }
-                            } catch (e) {
-                                this.logService.error(e);
-                            }
-                            break;
-                        case UriMatchType.Never:
-                        default:
-                            break;
-                    }
+              }
+              break;
+            case UriMatchType.RegularExpression:
+              try {
+                const regex = new RegExp(u.uri, "i");
+                if (regex.test(url)) {
+                  return true;
                 }
-            }
-
-            return false;
-        });
-    }
-
-    async getAllFromApiForOrganization(organizationId: string): Promise<CipherView[]> {
-        const ciphers = await this.apiService.getCiphersOrganization(organizationId);
-        if (ciphers != null && ciphers.data != null && ciphers.data.length) {
-            const decCiphers: CipherView[] = [];
-            const promises: any[] = [];
-            ciphers.data.forEach(r => {
-                const data = new CipherData(r);
-                const cipher = new Cipher(data);
-                promises.push(cipher.decrypt().then(c => decCiphers.push(c)));
-            });
-            await Promise.all(promises);
-            decCiphers.sort(this.getLocaleSortingFunction());
-            return decCiphers;
-        } else {
-            return [];
+              } catch (e) {
+                this.logService.error(e);
+              }
+              break;
+            case UriMatchType.Never:
+            default:
+              break;
+          }
         }
+      }
+
+      return false;
+    });
+  }
+
+  async getAllFromApiForOrganization(organizationId: string): Promise<CipherView[]> {
+    const ciphers = await this.apiService.getCiphersOrganization(organizationId);
+    if (ciphers != null && ciphers.data != null && ciphers.data.length) {
+      const decCiphers: CipherView[] = [];
+      const promises: any[] = [];
+      ciphers.data.forEach((r) => {
+        const data = new CipherData(r);
+        const cipher = new Cipher(data);
+        promises.push(cipher.decrypt().then((c) => decCiphers.push(c)));
+      });
+      await Promise.all(promises);
+      decCiphers.sort(this.getLocaleSortingFunction());
+      return decCiphers;
+    } else {
+      return [];
     }
-
-    async getLastUsedForUrl(url: string, autofillOnPageLoad: boolean = false): Promise<CipherView> {
-        return this.getCipherForUrl(url, true, false, autofillOnPageLoad);
+  }
+
+  async getLastUsedForUrl(url: string, autofillOnPageLoad: boolean = false): Promise<CipherView> {
+    return this.getCipherForUrl(url, true, false, autofillOnPageLoad);
+  }
+
+  async getLastLaunchedForUrl(
+    url: string,
+    autofillOnPageLoad: boolean = false
+  ): Promise<CipherView> {
+    return this.getCipherForUrl(url, false, true, autofillOnPageLoad);
+  }
+
+  async getNextCipherForUrl(url: string): Promise<CipherView> {
+    return this.getCipherForUrl(url, false, false, false);
+  }
+
+  updateLastUsedIndexForUrl(url: string) {
+    this.sortedCiphersCache.updateLastUsedIndex(url);
+  }
+
+  async updateLastUsedDate(id: string): Promise<void> {
+    let ciphersLocalData = await this.stateService.getLocalData();
+    if (!ciphersLocalData) {
+      ciphersLocalData = {};
     }
 
-    async getLastLaunchedForUrl(url: string, autofillOnPageLoad: boolean = false): Promise<CipherView> {
-        return this.getCipherForUrl(url, false, true, autofillOnPageLoad);
+    if (ciphersLocalData[id]) {
+      ciphersLocalData[id].lastUsedDate = new Date().getTime();
+    } else {
+      ciphersLocalData[id] = {
+        lastUsedDate: new Date().getTime(),
+      };
     }
 
-    async getNextCipherForUrl(url: string): Promise<CipherView> {
-        return this.getCipherForUrl(url, false, false, false);
-    }
+    await this.stateService.setLocalData(ciphersLocalData);
 
-    updateLastUsedIndexForUrl(url: string) {
-        this.sortedCiphersCache.updateLastUsedIndex(url);
+    const decryptedCipherCache = await this.stateService.getDecryptedCiphers();
+    if (!decryptedCipherCache) {
+      return;
     }
 
-    async updateLastUsedDate(id: string): Promise<void> {
-        let ciphersLocalData = await this.storageService.get<any>(Keys.localData);
-        if (!ciphersLocalData) {
-            ciphersLocalData = {};
-        }
-
-        if (ciphersLocalData[id]) {
-            ciphersLocalData[id].lastUsedDate = new Date().getTime();
-        } else {
-            ciphersLocalData[id] = {
-                lastUsedDate: new Date().getTime(),
-            };
-        }
-
-        await this.storageService.save(Keys.localData, ciphersLocalData);
-
-        if (this.decryptedCipherCache == null) {
-            return;
-        }
-
-        for (let i = 0; i < this.decryptedCipherCache.length; i++) {
-            const cached = this.decryptedCipherCache[i];
-            if (cached.id === id) {
-                cached.localData = ciphersLocalData[id];
-                break;
-            }
-        }
+    for (let i = 0; i < decryptedCipherCache.length; i++) {
+      const cached = decryptedCipherCache[i];
+      if (cached.id === id) {
+        cached.localData = ciphersLocalData[id];
+        break;
+      }
     }
+    await this.stateService.setDecryptedCiphers(decryptedCipherCache);
+  }
 
-    async updateLastLaunchedDate(id: string): Promise<void> {
-        let ciphersLocalData = await this.storageService.get<any>(Keys.localData);
-        if (!ciphersLocalData) {
-            ciphersLocalData = {};
-        }
-
-        if (ciphersLocalData[id]) {
-            ciphersLocalData[id].lastLaunched = new Date().getTime();
-        } else {
-            ciphersLocalData[id] = {
-                lastUsedDate: new Date().getTime(),
-            };
-        }
-
-        await this.storageService.save(Keys.localData, ciphersLocalData);
-
-        if (this.decryptedCipherCache == null) {
-            return;
-        }
-
-        for (let i = 0; i < this.decryptedCipherCache.length; i++) {
-            const cached = this.decryptedCipherCache[i];
-            if (cached.id === id) {
-                cached.localData = ciphersLocalData[id];
-                break;
-            }
-        }
+  async updateLastLaunchedDate(id: string): Promise<void> {
+    let ciphersLocalData = await this.stateService.getLocalData();
+    if (!ciphersLocalData) {
+      ciphersLocalData = {};
     }
 
-    async saveNeverDomain(domain: string): Promise<void> {
-        if (domain == null) {
-            return;
-        }
-
-        let domains = await this.storageService.get<{ [id: string]: any; }>(Keys.neverDomains);
-        if (!domains) {
-            domains = {};
-        }
-        domains[domain] = null;
-        await this.storageService.save(Keys.neverDomains, domains);
+    if (ciphersLocalData[id]) {
+      ciphersLocalData[id].lastLaunched = new Date().getTime();
+    } else {
+      ciphersLocalData[id] = {
+        lastUsedDate: new Date().getTime(),
+      };
     }
 
-    async saveWithServer(cipher: Cipher): Promise<any> {
-        let response: CipherResponse;
-        if (cipher.id == null) {
-            if (cipher.collectionIds != null) {
-                const request = new CipherCreateRequest(cipher);
-                response = await this.apiService.postCipherCreate(request);
-            } else {
-                const request = new CipherRequest(cipher);
-                response = await this.apiService.postCipher(request);
-            }
-            cipher.id = response.id;
-        } else {
-            const request = new CipherRequest(cipher);
-            response = await this.apiService.putCipher(cipher.id, request);
-        }
+    await this.stateService.setLocalData(ciphersLocalData);
 
-        const userId = await this.userService.getUserId();
-        const data = new CipherData(response, userId, cipher.collectionIds);
-        await this.upsert(data);
+    const decryptedCipherCache = await this.stateService.getDecryptedCiphers();
+    if (!decryptedCipherCache) {
+      return;
     }
 
-    async shareWithServer(cipher: CipherView, organizationId: string, collectionIds: string[]): Promise<any> {
-        const attachmentPromises: Promise<any>[] = [];
-        if (cipher.attachments != null) {
-            cipher.attachments.forEach(attachment => {
-                if (attachment.key == null) {
-                    attachmentPromises.push(this.shareAttachmentWithServer(attachment, cipher.id, organizationId));
-                }
-            });
-        }
-        await Promise.all(attachmentPromises);
-
-        cipher.organizationId = organizationId;
-        cipher.collectionIds = collectionIds;
-        const encCipher = await this.encrypt(cipher);
-        const request = new CipherShareRequest(encCipher);
-        const response = await this.apiService.putShareCipher(cipher.id, request);
-        const userId = await this.userService.getUserId();
-        const data = new CipherData(response, userId, collectionIds);
-        await this.upsert(data);
+    for (let i = 0; i < decryptedCipherCache.length; i++) {
+      const cached = decryptedCipherCache[i];
+      if (cached.id === id) {
+        cached.localData = ciphersLocalData[id];
+        break;
+      }
     }
+    await this.stateService.setDecryptedCiphers(decryptedCipherCache);
+  }
 
-    async shareManyWithServer(ciphers: CipherView[], organizationId: string, collectionIds: string[]): Promise<any> {
-        const promises: Promise<any>[] = [];
-        const encCiphers: Cipher[] = [];
-        for (const cipher of ciphers) {
-            cipher.organizationId = organizationId;
-            cipher.collectionIds = collectionIds;
-            promises.push(this.encrypt(cipher).then(c => {
-                encCiphers.push(c);
-            }));
-        }
-        await Promise.all(promises);
-        const request = new CipherBulkShareRequest(encCiphers, collectionIds);
-        await this.apiService.putShareCiphers(request);
-        const userId = await this.userService.getUserId();
-        await this.upsert(encCiphers.map(c => c.toCipherData(userId)));
+  async saveNeverDomain(domain: string): Promise<void> {
+    if (domain == null) {
+      return;
     }
 
-    saveAttachmentWithServer(cipher: Cipher, unencryptedFile: any, admin = false): Promise<Cipher> {
-        return new Promise((resolve, reject) => {
-            const reader = new FileReader();
-            reader.readAsArrayBuffer(unencryptedFile);
-            reader.onload = async (evt: any) => {
-                try {
-                    const cData = await this.saveAttachmentRawWithServer(cipher,
-                        unencryptedFile.name, evt.target.result, admin);
-                    resolve(cData);
-                } catch (e) {
-                    reject(e);
-                }
-            };
-            reader.onerror = evt => {
-                reject('Error reading file.');
-            };
-        });
+    let domains = await this.stateService.getNeverDomains();
+    if (!domains) {
+      domains = {};
     }
-
-    async saveAttachmentRawWithServer(cipher: Cipher, filename: string,
-        data: ArrayBuffer, admin = false): Promise<Cipher> {
-        const key = await this.cryptoService.getOrgKey(cipher.organizationId);
-        const encFileName = await this.cryptoService.encrypt(filename, key);
-
-        const dataEncKey = await this.cryptoService.makeEncKey(key);
-        const encData = await this.cryptoService.encryptToBytes(data, dataEncKey[0]);
-
-        const request: AttachmentRequest = {
-            key: dataEncKey[1].encryptedString,
-            fileName: encFileName.encryptedString,
-            fileSize: encData.buffer.byteLength,
-            adminRequest: admin,
-        };
-
-        let response: CipherResponse;
-        try {
-            const uploadDataResponse = await this.apiService.postCipherAttachment(cipher.id, request);
-            response = admin ? uploadDataResponse.cipherMiniResponse : uploadDataResponse.cipherResponse;
-            await this.fileUploadService.uploadCipherAttachment(admin, uploadDataResponse, encFileName, encData);
-        } catch (e) {
-            if (e instanceof ErrorResponse && (e as ErrorResponse).statusCode === 404 || (e as ErrorResponse).statusCode === 405) {
-                response = await this.legacyServerAttachmentFileUpload(admin, cipher.id, encFileName, encData, dataEncKey[1]);
-            } else if (e instanceof ErrorResponse) {
-                throw new Error((e as ErrorResponse).getSingleMessage());
-            } else {
-                throw e;
-            }
-        }
-
-        const userId = await this.userService.getUserId();
-        const cData = new CipherData(response, userId, cipher.collectionIds);
-        if (!admin) {
-            await this.upsert(cData);
-        }
-        return new Cipher(cData);
+    domains[domain] = null;
+    await this.stateService.setNeverDomains(domains);
+  }
+
+  async saveWithServer(cipher: Cipher): Promise<any> {
+    let response: CipherResponse;
+    if (cipher.id == null) {
+      if (cipher.collectionIds != null) {
+        const request = new CipherCreateRequest(cipher);
+        response = await this.apiService.postCipherCreate(request);
+      } else {
+        const request = new CipherRequest(cipher);
+        response = await this.apiService.postCipher(request);
+      }
+      cipher.id = response.id;
+    } else {
+      const request = new CipherRequest(cipher);
+      response = await this.apiService.putCipher(cipher.id, request);
     }
 
-    /**
-     * @deprecated Mar 25 2021: This method has been deprecated in favor of direct uploads.
-     * This method still exists for backward compatibility with old server versions.
-     */
-    async legacyServerAttachmentFileUpload(admin: boolean, cipherId: string, encFileName: EncString,
-        encData: EncArrayBuffer, key: EncString) {
-        const fd = new FormData();
-        try {
-            const blob = new Blob([encData.buffer], { type: 'application/octet-stream' });
-            fd.append('key', key.encryptedString);
-            fd.append('data', blob, encFileName.encryptedString);
-        } catch (e) {
-            if (Utils.isNode && !Utils.isBrowser) {
-                fd.append('key', key.encryptedString);
-                fd.append('data', Buffer.from(encData.buffer) as any, {
-                    filepath: encFileName.encryptedString,
-                    contentType: 'application/octet-stream',
-                } as any);
-            } else {
-                throw e;
-            }
+    const data = new CipherData(
+      response,
+      await this.stateService.getUserId(),
+      cipher.collectionIds
+    );
+    await this.upsert(data);
+  }
+
+  async shareWithServer(
+    cipher: CipherView,
+    organizationId: string,
+    collectionIds: string[]
+  ): Promise<any> {
+    const attachmentPromises: Promise<any>[] = [];
+    if (cipher.attachments != null) {
+      cipher.attachments.forEach((attachment) => {
+        if (attachment.key == null) {
+          attachmentPromises.push(
+            this.shareAttachmentWithServer(attachment, cipher.id, organizationId)
+          );
         }
-
-        let response: CipherResponse;
+      });
+    }
+    await Promise.all(attachmentPromises);
+
+    cipher.organizationId = organizationId;
+    cipher.collectionIds = collectionIds;
+    const encCipher = await this.encrypt(cipher);
+    const request = new CipherShareRequest(encCipher);
+    const response = await this.apiService.putShareCipher(cipher.id, request);
+    const data = new CipherData(response, await this.stateService.getUserId(), collectionIds);
+    await this.upsert(data);
+  }
+
+  async shareManyWithServer(
+    ciphers: CipherView[],
+    organizationId: string,
+    collectionIds: string[]
+  ): Promise<any> {
+    const promises: Promise<any>[] = [];
+    const encCiphers: Cipher[] = [];
+    for (const cipher of ciphers) {
+      cipher.organizationId = organizationId;
+      cipher.collectionIds = collectionIds;
+      promises.push(
+        this.encrypt(cipher).then((c) => {
+          encCiphers.push(c);
+        })
+      );
+    }
+    await Promise.all(promises);
+    const request = new CipherBulkShareRequest(encCiphers, collectionIds);
+    await this.apiService.putShareCiphers(request);
+    const userId = await this.stateService.getUserId();
+    await this.upsert(encCiphers.map((c) => c.toCipherData(userId)));
+  }
+
+  saveAttachmentWithServer(cipher: Cipher, unencryptedFile: any, admin = false): Promise<Cipher> {
+    return new Promise((resolve, reject) => {
+      const reader = new FileReader();
+      reader.readAsArrayBuffer(unencryptedFile);
+      reader.onload = async (evt: any) => {
         try {
-            if (admin) {
-                response = await this.apiService.postCipherAttachmentAdminLegacy(cipherId, fd);
-            } else {
-                response = await this.apiService.postCipherAttachmentLegacy(cipherId, fd);
-            }
+          const cData = await this.saveAttachmentRawWithServer(
+            cipher,
+            unencryptedFile.name,
+            evt.target.result,
+            admin
+          );
+          resolve(cData);
         } catch (e) {
-            throw new Error((e as ErrorResponse).getSingleMessage());
+          reject(e);
         }
+      };
+      reader.onerror = (_evt) => {
+        reject("Error reading file.");
+      };
+    });
+  }
+
+  async saveAttachmentRawWithServer(
+    cipher: Cipher,
+    filename: string,
+    data: ArrayBuffer,
+    admin = false
+  ): Promise<Cipher> {
+    const key = await this.cryptoService.getOrgKey(cipher.organizationId);
+    const encFileName = await this.cryptoService.encrypt(filename, key);
+
+    const dataEncKey = await this.cryptoService.makeEncKey(key);
+    const encData = await this.cryptoService.encryptToBytes(data, dataEncKey[0]);
+
+    const request: AttachmentRequest = {
+      key: dataEncKey[1].encryptedString,
+      fileName: encFileName.encryptedString,
+      fileSize: encData.buffer.byteLength,
+      adminRequest: admin,
+    };
+
+    let response: CipherResponse;
+    try {
+      const uploadDataResponse = await this.apiService.postCipherAttachment(cipher.id, request);
+      response = admin ? uploadDataResponse.cipherMiniResponse : uploadDataResponse.cipherResponse;
+      await this.fileUploadService.uploadCipherAttachment(
+        admin,
+        uploadDataResponse,
+        encFileName,
+        encData
+      );
+    } catch (e) {
+      if (
+        (e instanceof ErrorResponse && (e as ErrorResponse).statusCode === 404) ||
+        (e as ErrorResponse).statusCode === 405
+      ) {
+        response = await this.legacyServerAttachmentFileUpload(
+          admin,
+          cipher.id,
+          encFileName,
+          encData,
+          dataEncKey[1]
+        );
+      } else if (e instanceof ErrorResponse) {
+        throw new Error((e as ErrorResponse).getSingleMessage());
+      } else {
+        throw e;
+      }
+    }
 
-        return response;
+    const cData = new CipherData(
+      response,
+      await this.stateService.getUserId(),
+      cipher.collectionIds
+    );
+    if (!admin) {
+      await this.upsert(cData);
+    }
+    return new Cipher(cData);
+  }
+
+  /**
+   * @deprecated Mar 25 2021: This method has been deprecated in favor of direct uploads.
+   * This method still exists for backward compatibility with old server versions.
+   */
+  async legacyServerAttachmentFileUpload(
+    admin: boolean,
+    cipherId: string,
+    encFileName: EncString,
+    encData: EncArrayBuffer,
+    key: EncString
+  ) {
+    const fd = new FormData();
+    try {
+      const blob = new Blob([encData.buffer], { type: "application/octet-stream" });
+      fd.append("key", key.encryptedString);
+      fd.append("data", blob, encFileName.encryptedString);
+    } catch (e) {
+      if (Utils.isNode && !Utils.isBrowser) {
+        fd.append("key", key.encryptedString);
+        fd.append(
+          "data",
+          Buffer.from(encData.buffer) as any,
+          {
+            filepath: encFileName.encryptedString,
+            contentType: "application/octet-stream",
+          } as any
+        );
+      } else {
+        throw e;
+      }
     }
 
-    async saveCollectionsWithServer(cipher: Cipher): Promise<any> {
-        const request = new CipherCollectionsRequest(cipher.collectionIds);
-        await this.apiService.putCipherCollections(cipher.id, request);
-        const userId = await this.userService.getUserId();
-        const data = cipher.toCipherData(userId);
-        await this.upsert(data);
+    let response: CipherResponse;
+    try {
+      if (admin) {
+        response = await this.apiService.postCipherAttachmentAdminLegacy(cipherId, fd);
+      } else {
+        response = await this.apiService.postCipherAttachmentLegacy(cipherId, fd);
+      }
+    } catch (e) {
+      throw new Error((e as ErrorResponse).getSingleMessage());
     }
 
-    async upsert(cipher: CipherData | CipherData[]): Promise<any> {
-        const userId = await this.userService.getUserId();
-        let ciphers = await this.storageService.get<{ [id: string]: CipherData; }>(
-            Keys.ciphersPrefix + userId);
-        if (ciphers == null) {
-            ciphers = {};
-        }
+    return response;
+  }
 
-        if (cipher instanceof CipherData) {
-            const c = cipher as CipherData;
-            ciphers[c.id] = c;
-        } else {
-            (cipher as CipherData[]).forEach(c => {
-                ciphers[c.id] = c;
-            });
-        }
+  async saveCollectionsWithServer(cipher: Cipher): Promise<any> {
+    const request = new CipherCollectionsRequest(cipher.collectionIds);
+    await this.apiService.putCipherCollections(cipher.id, request);
+    const data = cipher.toCipherData(await this.stateService.getUserId());
+    await this.upsert(data);
+  }
 
-        await this.storageService.save(Keys.ciphersPrefix + userId, ciphers);
-        this.decryptedCipherCache = null;
+  async upsert(cipher: CipherData | CipherData[]): Promise<any> {
+    let ciphers = await this.stateService.getEncryptedCiphers();
+    if (ciphers == null) {
+      ciphers = {};
     }
 
-    async replace(ciphers: { [id: string]: CipherData; }): Promise<any> {
-        const userId = await this.userService.getUserId();
-        await this.storageService.save(Keys.ciphersPrefix + userId, ciphers);
-        this.decryptedCipherCache = null;
+    if (cipher instanceof CipherData) {
+      const c = cipher as CipherData;
+      ciphers[c.id] = c;
+    } else {
+      (cipher as CipherData[]).forEach((c) => {
+        ciphers[c.id] = c;
+      });
     }
 
-    async clear(userId: string): Promise<any> {
-        await this.storageService.remove(Keys.ciphersPrefix + userId);
-        this.clearCache();
-    }
+    await this.replace(ciphers);
+  }
 
-    async moveManyWithServer(ids: string[], folderId: string): Promise<any> {
-        await this.apiService.putMoveCiphers(new CipherBulkMoveRequest(ids, folderId));
+  async replace(ciphers: { [id: string]: CipherData }): Promise<any> {
+    await this.clearDecryptedCiphersState();
+    await this.stateService.setEncryptedCiphers(ciphers);
+  }
 
-        const userId = await this.userService.getUserId();
-        let ciphers = await this.storageService.get<{ [id: string]: CipherData; }>(
-            Keys.ciphersPrefix + userId);
-        if (ciphers == null) {
-            ciphers = {};
-        }
+  async clear(userId?: string): Promise<any> {
+    await this.clearEncryptedCiphersState(userId);
+    await this.clearCache(userId);
+  }
 
-        ids.forEach(id => {
-            if (ciphers.hasOwnProperty(id)) {
-                ciphers[id].folderId = folderId;
-            }
-        });
+  async moveManyWithServer(ids: string[], folderId: string): Promise<any> {
+    await this.apiService.putMoveCiphers(new CipherBulkMoveRequest(ids, folderId));
 
-        await this.storageService.save(Keys.ciphersPrefix + userId, ciphers);
-        this.decryptedCipherCache = null;
+    let ciphers = await this.stateService.getEncryptedCiphers();
+    if (ciphers == null) {
+      ciphers = {};
     }
 
-    async delete(id: string | string[]): Promise<any> {
-        const userId = await this.userService.getUserId();
-        const ciphers = await this.storageService.get<{ [id: string]: CipherData; }>(
-            Keys.ciphersPrefix + userId);
-        if (ciphers == null) {
-            return;
-        }
+    ids.forEach((id) => {
+      if (ciphers.hasOwnProperty(id)) {
+        ciphers[id].folderId = folderId;
+      }
+    });
 
-        if (typeof id === 'string') {
-            if (ciphers[id] == null) {
-                return;
-            }
-            delete ciphers[id];
-        } else {
-            (id as string[]).forEach(i => {
-                delete ciphers[i];
-            });
-        }
+    await this.clearCache();
+    await this.stateService.setEncryptedCiphers(ciphers);
+  }
 
-        await this.storageService.save(Keys.ciphersPrefix + userId, ciphers);
-        this.decryptedCipherCache = null;
+  async delete(id: string | string[]): Promise<any> {
+    const ciphers = await this.stateService.getEncryptedCiphers();
+    if (ciphers == null) {
+      return;
     }
 
-    async deleteWithServer(id: string): Promise<any> {
-        await this.apiService.deleteCipher(id);
-        await this.delete(id);
+    if (typeof id === "string") {
+      if (ciphers[id] == null) {
+        return;
+      }
+      delete ciphers[id];
+    } else {
+      (id as string[]).forEach((i) => {
+        delete ciphers[i];
+      });
     }
 
-    async deleteManyWithServer(ids: string[]): Promise<any> {
-        await this.apiService.deleteManyCiphers(new CipherBulkDeleteRequest(ids));
-        await this.delete(ids);
-    }
+    await this.clearCache();
+    await this.stateService.setEncryptedCiphers(ciphers);
+  }
 
-    async deleteAttachment(id: string, attachmentId: string): Promise<void> {
-        const userId = await this.userService.getUserId();
-        const ciphers = await this.storageService.get<{ [id: string]: CipherData; }>(
-            Keys.ciphersPrefix + userId);
+  async deleteWithServer(id: string): Promise<any> {
+    await this.apiService.deleteCipher(id);
+    await this.delete(id);
+  }
 
-        if (ciphers == null || !ciphers.hasOwnProperty(id) || ciphers[id].attachments == null) {
-            return;
-        }
+  async deleteManyWithServer(ids: string[]): Promise<any> {
+    await this.apiService.deleteManyCiphers(new CipherBulkDeleteRequest(ids));
+    await this.delete(ids);
+  }
 
-        for (let i = 0; i < ciphers[id].attachments.length; i++) {
-            if (ciphers[id].attachments[i].id === attachmentId) {
-                ciphers[id].attachments.splice(i, 1);
-            }
-        }
+  async deleteAttachment(id: string, attachmentId: string): Promise<void> {
+    const ciphers = await this.stateService.getEncryptedCiphers();
 
-        await this.storageService.save(Keys.ciphersPrefix + userId, ciphers);
-        this.decryptedCipherCache = null;
+    if (ciphers == null || !ciphers.hasOwnProperty(id) || ciphers[id].attachments == null) {
+      return;
     }
 
-    async deleteAttachmentWithServer(id: string, attachmentId: string): Promise<void> {
-        try {
-            await this.apiService.deleteCipherAttachment(id, attachmentId);
-        } catch (e) {
-            return Promise.reject((e as ErrorResponse).getSingleMessage());
-        }
-        await this.deleteAttachment(id, attachmentId);
+    for (let i = 0; i < ciphers[id].attachments.length; i++) {
+      if (ciphers[id].attachments[i].id === attachmentId) {
+        ciphers[id].attachments.splice(i, 1);
+      }
     }
 
-    sortCiphersByLastUsed(a: CipherView, b: CipherView): number {
-        const aLastUsed = a.localData && a.localData.lastUsedDate ? a.localData.lastUsedDate as number : null;
-        const bLastUsed = b.localData && b.localData.lastUsedDate ? b.localData.lastUsedDate as number : null;
-
-        const bothNotNull = aLastUsed != null && bLastUsed != null;
-        if (bothNotNull && aLastUsed < bLastUsed) {
-            return 1;
-        }
-        if (aLastUsed != null && bLastUsed == null) {
-            return -1;
-        }
+    await this.clearCache();
+    await this.stateService.setEncryptedCiphers(ciphers);
+  }
 
-        if (bothNotNull && aLastUsed > bLastUsed) {
-            return -1;
-        }
-        if (bLastUsed != null && aLastUsed == null) {
-            return 1;
-        }
-
-        return 0;
+  async deleteAttachmentWithServer(id: string, attachmentId: string): Promise<void> {
+    try {
+      await this.apiService.deleteCipherAttachment(id, attachmentId);
+    } catch (e) {
+      return Promise.reject((e as ErrorResponse).getSingleMessage());
     }
-
-    sortCiphersByLastUsedThenName(a: CipherView, b: CipherView): number {
-        const result = this.sortCiphersByLastUsed(a, b);
-        if (result !== 0) {
-            return result;
-        }
-
-        return this.getLocaleSortingFunction()(a, b);
+    await this.deleteAttachment(id, attachmentId);
+  }
+
+  sortCiphersByLastUsed(a: CipherView, b: CipherView): number {
+    const aLastUsed =
+      a.localData && a.localData.lastUsedDate ? (a.localData.lastUsedDate as number) : null;
+    const bLastUsed =
+      b.localData && b.localData.lastUsedDate ? (b.localData.lastUsedDate as number) : null;
+
+    const bothNotNull = aLastUsed != null && bLastUsed != null;
+    if (bothNotNull && aLastUsed < bLastUsed) {
+      return 1;
     }
-
-    getLocaleSortingFunction(): (a: CipherView, b: CipherView) => number {
-        return (a, b) => {
-            let aName = a.name;
-            let bName = b.name;
-
-            if (aName == null && bName != null) {
-                return -1;
-            }
-            if (aName != null && bName == null) {
-                return 1;
-            }
-            if (aName == null && bName == null) {
-                return 0;
-            }
-
-            const result = this.i18nService.collator ? this.i18nService.collator.compare(aName, bName) :
-                aName.localeCompare(bName);
-
-            if (result !== 0 || a.type !== CipherType.Login || b.type !== CipherType.Login) {
-                return result;
-            }
-
-            if (a.login.username != null) {
-                aName += a.login.username;
-            }
-
-            if (b.login.username != null) {
-                bName += b.login.username;
-            }
-
-            return this.i18nService.collator ? this.i18nService.collator.compare(aName, bName) :
-                aName.localeCompare(bName);
-        };
+    if (aLastUsed != null && bLastUsed == null) {
+      return -1;
     }
 
-    async softDelete(id: string | string[]): Promise<any> {
-        const userId = await this.userService.getUserId();
-        const ciphers = await this.storageService.get<{ [id: string]: CipherData; }>(
-            Keys.ciphersPrefix + userId);
-        if (ciphers == null) {
-            return;
-        }
-
-        const setDeletedDate = (cipherId: string) => {
-            if (ciphers[cipherId] == null) {
-                return;
-            }
-            ciphers[cipherId].deletedDate = new Date().toISOString();
-        };
+    if (bothNotNull && aLastUsed > bLastUsed) {
+      return -1;
+    }
+    if (bLastUsed != null && aLastUsed == null) {
+      return 1;
+    }
 
-        if (typeof id === 'string') {
-            setDeletedDate(id);
-        } else {
-            (id as string[]).forEach(setDeletedDate);
-        }
+    return 0;
+  }
 
-        await this.storageService.save(Keys.ciphersPrefix + userId, ciphers);
-        this.decryptedCipherCache = null;
+  sortCiphersByLastUsedThenName(a: CipherView, b: CipherView): number {
+    const result = this.sortCiphersByLastUsed(a, b);
+    if (result !== 0) {
+      return result;
     }
 
-    async softDeleteWithServer(id: string): Promise<any> {
-        await this.apiService.putDeleteCipher(id);
-        await this.softDelete(id);
+    return this.getLocaleSortingFunction()(a, b);
+  }
+
+  getLocaleSortingFunction(): (a: CipherView, b: CipherView) => number {
+    return (a, b) => {
+      let aName = a.name;
+      let bName = b.name;
+
+      if (aName == null && bName != null) {
+        return -1;
+      }
+      if (aName != null && bName == null) {
+        return 1;
+      }
+      if (aName == null && bName == null) {
+        return 0;
+      }
+
+      const result = this.i18nService.collator
+        ? this.i18nService.collator.compare(aName, bName)
+        : aName.localeCompare(bName);
+
+      if (result !== 0 || a.type !== CipherType.Login || b.type !== CipherType.Login) {
+        return result;
+      }
+
+      if (a.login.username != null) {
+        aName += a.login.username;
+      }
+
+      if (b.login.username != null) {
+        bName += b.login.username;
+      }
+
+      return this.i18nService.collator
+        ? this.i18nService.collator.compare(aName, bName)
+        : aName.localeCompare(bName);
+    };
+  }
+
+  async softDelete(id: string | string[]): Promise<any> {
+    const ciphers = await this.stateService.getEncryptedCiphers();
+    if (ciphers == null) {
+      return;
     }
 
-    async softDeleteManyWithServer(ids: string[]): Promise<any> {
-        await this.apiService.putDeleteManyCiphers(new CipherBulkDeleteRequest(ids));
-        await this.softDelete(ids);
+    const setDeletedDate = (cipherId: string) => {
+      if (ciphers[cipherId] == null) {
+        return;
+      }
+      ciphers[cipherId].deletedDate = new Date().toISOString();
+    };
+
+    if (typeof id === "string") {
+      setDeletedDate(id);
+    } else {
+      (id as string[]).forEach(setDeletedDate);
     }
 
-    async restore(cipher: { id: string, revisionDate: string; } | { id: string, revisionDate: string; }[]) {
-        const userId = await this.userService.getUserId();
-        const ciphers = await this.storageService.get<{ [id: string]: CipherData; }>(
-            Keys.ciphersPrefix + userId);
-        if (ciphers == null) {
-            return;
-        }
+    await this.clearCache();
+    await this.stateService.setEncryptedCiphers(ciphers);
+  }
+
+  async softDeleteWithServer(id: string): Promise<any> {
+    await this.apiService.putDeleteCipher(id);
+    await this.softDelete(id);
+  }
+
+  async softDeleteManyWithServer(ids: string[]): Promise<any> {
+    await this.apiService.putDeleteManyCiphers(new CipherBulkDeleteRequest(ids));
+    await this.softDelete(ids);
+  }
+
+  async restore(
+    cipher: { id: string; revisionDate: string } | { id: string; revisionDate: string }[]
+  ) {
+    const ciphers = await this.stateService.getEncryptedCiphers();
+    if (ciphers == null) {
+      return;
+    }
 
-        const clearDeletedDate = (c: { id: string, revisionDate: string; }) => {
-            if (ciphers[c.id] == null) {
-                return;
-            }
-            ciphers[c.id].deletedDate = null;
-            ciphers[c.id].revisionDate = c.revisionDate;
-        };
+    const clearDeletedDate = (c: { id: string; revisionDate: string }) => {
+      if (ciphers[c.id] == null) {
+        return;
+      }
+      ciphers[c.id].deletedDate = null;
+      ciphers[c.id].revisionDate = c.revisionDate;
+    };
+
+    if (cipher.constructor.name === "Array") {
+      (cipher as { id: string; revisionDate: string }[]).forEach(clearDeletedDate);
+    } else {
+      clearDeletedDate(cipher as { id: string; revisionDate: string });
+    }
 
+    await this.clearCache();
+    await this.stateService.setEncryptedCiphers(ciphers);
+  }
 
-        if (cipher.constructor.name === 'Array') {
-            (cipher as { id: string, revisionDate: string; }[]).forEach(clearDeletedDate);
-        } else {
-            clearDeletedDate(cipher as { id: string, revisionDate: string; });
-        }
+  async restoreWithServer(id: string): Promise<any> {
+    const response = await this.apiService.putRestoreCipher(id);
+    await this.restore({ id: id, revisionDate: response.revisionDate });
+  }
 
-        await this.storageService.save(Keys.ciphersPrefix + userId, ciphers);
-        this.decryptedCipherCache = null;
+  async restoreManyWithServer(ids: string[]): Promise<any> {
+    const response = await this.apiService.putRestoreManyCiphers(new CipherBulkRestoreRequest(ids));
+    const restores: { id: string; revisionDate: string }[] = [];
+    for (const cipher of response.data) {
+      restores.push({ id: cipher.id, revisionDate: cipher.revisionDate });
     }
-
-    async restoreWithServer(id: string): Promise<any> {
-        const response = await this.apiService.putRestoreCipher(id);
-        await this.restore({ id: id, revisionDate: response.revisionDate });
+    await this.restore(restores);
+  }
+
+  // Helpers
+
+  private async shareAttachmentWithServer(
+    attachmentView: AttachmentView,
+    cipherId: string,
+    organizationId: string
+  ): Promise<any> {
+    const attachmentResponse = await this.apiService.nativeFetch(
+      new Request(attachmentView.url, { cache: "no-store" })
+    );
+    if (attachmentResponse.status !== 200) {
+      throw Error("Failed to download attachment: " + attachmentResponse.status.toString());
     }
 
-    async restoreManyWithServer(ids: string[]): Promise<any> {
-        const response = await this.apiService.putRestoreManyCiphers(new CipherBulkRestoreRequest(ids));
-        const restores: { id: string, revisionDate: string; }[] = [];
-        for (const cipher of response.data) {
-            restores.push({ id: cipher.id, revisionDate: cipher.revisionDate });
-        }
-        await this.restore(restores);
+    const buf = await attachmentResponse.arrayBuffer();
+    const decBuf = await this.cryptoService.decryptFromBytes(buf, null);
+    const key = await this.cryptoService.getOrgKey(organizationId);
+    const encFileName = await this.cryptoService.encrypt(attachmentView.fileName, key);
+
+    const dataEncKey = await this.cryptoService.makeEncKey(key);
+    const encData = await this.cryptoService.encryptToBytes(decBuf, dataEncKey[0]);
+
+    const fd = new FormData();
+    try {
+      const blob = new Blob([encData.buffer], { type: "application/octet-stream" });
+      fd.append("key", dataEncKey[1].encryptedString);
+      fd.append("data", blob, encFileName.encryptedString);
+    } catch (e) {
+      if (Utils.isNode && !Utils.isBrowser) {
+        fd.append("key", dataEncKey[1].encryptedString);
+        fd.append(
+          "data",
+          Buffer.from(encData.buffer) as any,
+          {
+            filepath: encFileName.encryptedString,
+            contentType: "application/octet-stream",
+          } as any
+        );
+      } else {
+        throw e;
+      }
     }
 
-    // Helpers
-
-    private async shareAttachmentWithServer(attachmentView: AttachmentView, cipherId: string,
-        organizationId: string): Promise<any> {
-        const attachmentResponse = await this.apiService.nativeFetch(
-            new Request(attachmentView.url, { cache: 'no-store' }));
-        if (attachmentResponse.status !== 200) {
-            throw Error('Failed to download attachment: ' + attachmentResponse.status.toString());
-        }
-
-        const buf = await attachmentResponse.arrayBuffer();
-        const decBuf = await this.cryptoService.decryptFromBytes(buf, null);
-        const key = await this.cryptoService.getOrgKey(organizationId);
-        const encFileName = await this.cryptoService.encrypt(attachmentView.fileName, key);
-
-        const dataEncKey = await this.cryptoService.makeEncKey(key);
-        const encData = await this.cryptoService.encryptToBytes(decBuf, dataEncKey[0]);
-
-        const fd = new FormData();
-        try {
-            const blob = new Blob([encData.buffer], { type: 'application/octet-stream' });
-            fd.append('key', dataEncKey[1].encryptedString);
-            fd.append('data', blob, encFileName.encryptedString);
-        } catch (e) {
-            if (Utils.isNode && !Utils.isBrowser) {
-                fd.append('key', dataEncKey[1].encryptedString);
-                fd.append('data', Buffer.from(encData.buffer) as any, {
-                    filepath: encFileName.encryptedString,
-                    contentType: 'application/octet-stream',
-                } as any);
-            } else {
-                throw e;
+    try {
+      await this.apiService.postShareCipherAttachment(
+        cipherId,
+        attachmentView.id,
+        fd,
+        organizationId
+      );
+    } catch (e) {
+      throw new Error((e as ErrorResponse).getSingleMessage());
+    }
+  }
+
+  private async encryptObjProperty<V extends View, D extends Domain>(
+    model: V,
+    obj: D,
+    map: any,
+    key: SymmetricCryptoKey
+  ): Promise<void> {
+    const promises = [];
+    const self = this;
+
+    for (const prop in map) {
+      if (!map.hasOwnProperty(prop)) {
+        continue;
+      }
+
+      // tslint:disable-next-line
+      (function (theProp, theObj) {
+        const p = Promise.resolve()
+          .then(() => {
+            const modelProp = (model as any)[map[theProp] || theProp];
+            if (modelProp && modelProp !== "") {
+              return self.cryptoService.encrypt(modelProp, key);
             }
-        }
+            return null;
+          })
+          .then((val: EncString) => {
+            (theObj as any)[theProp] = val;
+          });
+        promises.push(p);
+      })(prop, obj);
+    }
 
-        try {
-            await this.apiService.postShareCipherAttachment(cipherId, attachmentView.id, fd, organizationId);
-        } catch (e) {
-            throw new Error((e as ErrorResponse).getSingleMessage());
+    await Promise.all(promises);
+  }
+
+  private async encryptCipherData(cipher: Cipher, model: CipherView, key: SymmetricCryptoKey) {
+    switch (cipher.type) {
+      case CipherType.Login:
+        cipher.login = new Login();
+        cipher.login.passwordRevisionDate = model.login.passwordRevisionDate;
+        cipher.login.autofillOnPageLoad = model.login.autofillOnPageLoad;
+        await this.encryptObjProperty(
+          model.login,
+          cipher.login,
+          {
+            username: null,
+            password: null,
+            totp: null,
+          },
+          key
+        );
+
+        if (model.login.uris != null) {
+          cipher.login.uris = [];
+          for (let i = 0; i < model.login.uris.length; i++) {
+            const loginUri = new LoginUri();
+            loginUri.match = model.login.uris[i].match;
+            await this.encryptObjProperty(
+              model.login.uris[i],
+              loginUri,
+              {
+                uri: null,
+              },
+              key
+            );
+            cipher.login.uris.push(loginUri);
+          }
         }
+        return;
+      case CipherType.SecureNote:
+        cipher.secureNote = new SecureNote();
+        cipher.secureNote.type = model.secureNote.type;
+        return;
+      case CipherType.Card:
+        cipher.card = new Card();
+        await this.encryptObjProperty(
+          model.card,
+          cipher.card,
+          {
+            cardholderName: null,
+            brand: null,
+            number: null,
+            expMonth: null,
+            expYear: null,
+            code: null,
+          },
+          key
+        );
+        return;
+      case CipherType.Identity:
+        cipher.identity = new Identity();
+        await this.encryptObjProperty(
+          model.identity,
+          cipher.identity,
+          {
+            title: null,
+            firstName: null,
+            middleName: null,
+            lastName: null,
+            address1: null,
+            address2: null,
+            address3: null,
+            city: null,
+            state: null,
+            postalCode: null,
+            country: null,
+            company: null,
+            email: null,
+            phone: null,
+            ssn: null,
+            username: null,
+            passportNumber: null,
+            licenseNumber: null,
+          },
+          key
+        );
+        return;
+      default:
+        throw new Error("Unknown cipher type.");
     }
-
-    private async encryptObjProperty<V extends View, D extends Domain>(model: V, obj: D,
-        map: any, key: SymmetricCryptoKey): Promise<void> {
-        const promises = [];
-        const self = this;
-
-        for (const prop in map) {
-            if (!map.hasOwnProperty(prop)) {
-                continue;
-            }
-
-            // tslint:disable-next-line
-            (function (theProp, theObj) {
-                const p = Promise.resolve().then(() => {
-                    const modelProp = (model as any)[(map[theProp] || theProp)];
-                    if (modelProp && modelProp !== '') {
-                        return self.cryptoService.encrypt(modelProp, key);
-                    }
-                    return null;
-                }).then((val: EncString) => {
-                    (theObj as any)[theProp] = val;
-                });
-                promises.push(p);
-            })(prop, obj);
+  }
+
+  private async getCipherForUrl(
+    url: string,
+    lastUsed: boolean,
+    lastLaunched: boolean,
+    autofillOnPageLoad: boolean
+  ): Promise<CipherView> {
+    const cacheKey = autofillOnPageLoad ? "autofillOnPageLoad-" + url : url;
+
+    if (!this.sortedCiphersCache.isCached(cacheKey)) {
+      let ciphers = await this.getAllDecryptedForUrl(url);
+      if (!ciphers) {
+        return null;
+      }
+
+      if (autofillOnPageLoad) {
+        const autofillOnPageLoadDefault = await this.stateService.getAutoFillOnPageLoadDefault();
+        ciphers = ciphers.filter(
+          (cipher) =>
+            cipher.login.autofillOnPageLoad ||
+            (cipher.login.autofillOnPageLoad == null && autofillOnPageLoadDefault !== false)
+        );
+        if (ciphers.length === 0) {
+          return null;
         }
+      }
 
-        await Promise.all(promises);
+      this.sortedCiphersCache.addCiphers(cacheKey, ciphers);
     }
 
-    private async encryptCipherData(cipher: Cipher, model: CipherView, key: SymmetricCryptoKey) {
-        switch (cipher.type) {
-            case CipherType.Login:
-                cipher.login = new Login();
-                cipher.login.passwordRevisionDate = model.login.passwordRevisionDate;
-                cipher.login.autofillOnPageLoad = model.login.autofillOnPageLoad;
-                await this.encryptObjProperty(model.login, cipher.login, {
-                    username: null,
-                    password: null,
-                    totp: null,
-                }, key);
-
-                if (model.login.uris != null) {
-                    cipher.login.uris = [];
-                    for (let i = 0; i < model.login.uris.length; i++) {
-                        const loginUri = new LoginUri();
-                        loginUri.match = model.login.uris[i].match;
-                        await this.encryptObjProperty(model.login.uris[i], loginUri, {
-                            uri: null,
-                        }, key);
-                        cipher.login.uris.push(loginUri);
-                    }
-                }
-                return;
-            case CipherType.SecureNote:
-                cipher.secureNote = new SecureNote();
-                cipher.secureNote.type = model.secureNote.type;
-                return;
-            case CipherType.Card:
-                cipher.card = new Card();
-                await this.encryptObjProperty(model.card, cipher.card, {
-                    cardholderName: null,
-                    brand: null,
-                    number: null,
-                    expMonth: null,
-                    expYear: null,
-                    code: null,
-                }, key);
-                return;
-            case CipherType.Identity:
-                cipher.identity = new Identity();
-                await this.encryptObjProperty(model.identity, cipher.identity, {
-                    title: null,
-                    firstName: null,
-                    middleName: null,
-                    lastName: null,
-                    address1: null,
-                    address2: null,
-                    address3: null,
-                    city: null,
-                    state: null,
-                    postalCode: null,
-                    country: null,
-                    company: null,
-                    email: null,
-                    phone: null,
-                    ssn: null,
-                    username: null,
-                    passportNumber: null,
-                    licenseNumber: null,
-                }, key);
-                return;
-            default:
-                throw new Error('Unknown cipher type.');
-        }
+    if (lastLaunched) {
+      return this.sortedCiphersCache.getLastLaunched(cacheKey);
+    } else if (lastUsed) {
+      return this.sortedCiphersCache.getLastUsed(cacheKey);
+    } else {
+      return this.sortedCiphersCache.getNext(cacheKey);
     }
+  }
 
-    private async getCipherForUrl(url: string, lastUsed: boolean, lastLaunched: boolean, autofillOnPageLoad: boolean): Promise<CipherView> {
-        const cacheKey = autofillOnPageLoad ? 'autofillOnPageLoad-' + url : url;
-
-        if (!this.sortedCiphersCache.isCached(cacheKey)) {
-            let ciphers = await this.getAllDecryptedForUrl(url);
-            if (!ciphers) {
-                return null;
-            }
-
-            if (autofillOnPageLoad) {
-                const autofillOnPageLoadDefault = await this.storageService.get(ConstantsService.autoFillOnPageLoadDefaultKey);
-                ciphers = ciphers.filter(cipher => cipher.login.autofillOnPageLoad ||
-                    (cipher.login.autofillOnPageLoad == null && autofillOnPageLoadDefault !== false));
-                if (ciphers.length === 0) {
-                    return null;
-                }
-            }
+  private async clearEncryptedCiphersState(userId?: string) {
+    await this.stateService.setEncryptedCiphers(null, { userId: userId });
+  }
 
-            this.sortedCiphersCache.addCiphers(cacheKey, ciphers);
-        }
+  private async clearDecryptedCiphersState(userId?: string) {
+    await this.stateService.setDecryptedCiphers(null, { userId: userId });
+    this.clearSortedCiphers();
+  }
 
-        if (lastLaunched) {
-            return this.sortedCiphersCache.getLastLaunched(cacheKey);
-        } else if (lastUsed) {
-            return this.sortedCiphersCache.getLastUsed(cacheKey);
-        } else {
-            return this.sortedCiphersCache.getNext(cacheKey);
-        }
-    }
+  private clearSortedCiphers() {
+    this.sortedCiphersCache.clear();
+  }
 }
diff --git a/jslib/common/src/services/collection.service.ts b/jslib/common/src/services/collection.service.ts
index 3c594080..7f555e63 100644
--- a/jslib/common/src/services/collection.service.ts
+++ b/jslib/common/src/services/collection.service.ts
@@ -1,173 +1,159 @@
-import { CollectionData } from '../models/data/collectionData';
+import { CollectionData } from "../models/data/collectionData";
 
-import { Collection } from '../models/domain/collection';
-import { TreeNode } from '../models/domain/treeNode';
+import { Collection } from "../models/domain/collection";
+import { TreeNode } from "../models/domain/treeNode";
 
-import { CollectionView } from '../models/view/collectionView';
+import { CollectionView } from "../models/view/collectionView";
 
-import { CollectionService as CollectionServiceAbstraction } from '../abstractions/collection.service';
-import { CryptoService } from '../abstractions/crypto.service';
-import { I18nService } from '../abstractions/i18n.service';
-import { StorageService } from '../abstractions/storage.service';
-import { UserService } from '../abstractions/user.service';
+import { CollectionService as CollectionServiceAbstraction } from "../abstractions/collection.service";
+import { CryptoService } from "../abstractions/crypto.service";
+import { I18nService } from "../abstractions/i18n.service";
+import { StateService } from "../abstractions/state.service";
 
-import { ServiceUtils } from '../misc/serviceUtils';
-import { Utils } from '../misc/utils';
+import { ServiceUtils } from "../misc/serviceUtils";
+import { Utils } from "../misc/utils";
 
-const Keys = {
-    collectionsPrefix: 'collections_',
-};
-const NestingDelimiter = '/';
+const NestingDelimiter = "/";
 
 export class CollectionService implements CollectionServiceAbstraction {
-    decryptedCollectionCache: CollectionView[];
-
-    constructor(private cryptoService: CryptoService, private userService: UserService,
-        private storageService: StorageService, private i18nService: I18nService) {
+  constructor(
+    private cryptoService: CryptoService,
+    private i18nService: I18nService,
+    private stateService: StateService
+  ) {}
+
+  async clearCache(userId?: string): Promise<void> {
+    await this.stateService.setDecryptedCollections(null, { userId: userId });
+  }
+
+  async encrypt(model: CollectionView): Promise<Collection> {
+    if (model.organizationId == null) {
+      throw new Error("Collection has no organization id.");
     }
-
-    clearCache(): void {
-        this.decryptedCollectionCache = null;
+    const key = await this.cryptoService.getOrgKey(model.organizationId);
+    if (key == null) {
+      throw new Error("No key for this collection's organization.");
     }
-
-    async encrypt(model: CollectionView): Promise<Collection> {
-        if (model.organizationId == null) {
-            throw new Error('Collection has no organization id.');
-        }
-        const key = await this.cryptoService.getOrgKey(model.organizationId);
-        if (key == null) {
-            throw new Error('No key for this collection\'s organization.');
-        }
-        const collection = new Collection();
-        collection.id = model.id;
-        collection.organizationId = model.organizationId;
-        collection.readOnly = model.readOnly;
-        collection.name = await this.cryptoService.encrypt(model.name, key);
-        return collection;
+    const collection = new Collection();
+    collection.id = model.id;
+    collection.organizationId = model.organizationId;
+    collection.readOnly = model.readOnly;
+    collection.name = await this.cryptoService.encrypt(model.name, key);
+    return collection;
+  }
+
+  async decryptMany(collections: Collection[]): Promise<CollectionView[]> {
+    if (collections == null) {
+      return [];
     }
-
-    async decryptMany(collections: Collection[]): Promise<CollectionView[]> {
-        if (collections == null) {
-            return [];
-        }
-        const decCollections: CollectionView[] = [];
-        const promises: Promise<any>[] = [];
-        collections.forEach(collection => {
-            promises.push(collection.decrypt().then(c => decCollections.push(c)));
-        });
-        await Promise.all(promises);
-        return decCollections.sort(Utils.getSortFunction(this.i18nService, 'name'));
+    const decCollections: CollectionView[] = [];
+    const promises: Promise<any>[] = [];
+    collections.forEach((collection) => {
+      promises.push(collection.decrypt().then((c) => decCollections.push(c)));
+    });
+    await Promise.all(promises);
+    return decCollections.sort(Utils.getSortFunction(this.i18nService, "name"));
+  }
+
+  async get(id: string): Promise<Collection> {
+    const collections = await this.stateService.getEncryptedCollections();
+    if (collections == null || !collections.hasOwnProperty(id)) {
+      return null;
     }
 
-    async get(id: string): Promise<Collection> {
-        const userId = await this.userService.getUserId();
-        const collections = await this.storageService.get<{ [id: string]: CollectionData; }>(
-            Keys.collectionsPrefix + userId);
-        if (collections == null || !collections.hasOwnProperty(id)) {
-            return null;
-        }
+    return new Collection(collections[id]);
+  }
 
-        return new Collection(collections[id]);
+  async getAll(): Promise<Collection[]> {
+    const collections = await this.stateService.getEncryptedCollections();
+    const response: Collection[] = [];
+    for (const id in collections) {
+      if (collections.hasOwnProperty(id)) {
+        response.push(new Collection(collections[id]));
+      }
     }
+    return response;
+  }
 
-    async getAll(): Promise<Collection[]> {
-        const userId = await this.userService.getUserId();
-        const collections = await this.storageService.get<{ [id: string]: CollectionData; }>(
-            Keys.collectionsPrefix + userId);
-        const response: Collection[] = [];
-        for (const id in collections) {
-            if (collections.hasOwnProperty(id)) {
-                response.push(new Collection(collections[id]));
-            }
-        }
-        return response;
+  async getAllDecrypted(): Promise<CollectionView[]> {
+    let decryptedCollections = await this.stateService.getDecryptedCollections();
+    if (decryptedCollections != null) {
+      return decryptedCollections;
     }
 
-    async getAllDecrypted(): Promise<CollectionView[]> {
-        if (this.decryptedCollectionCache != null) {
-            return this.decryptedCollectionCache;
-        }
+    const hasKey = await this.cryptoService.hasKey();
+    if (!hasKey) {
+      throw new Error("No key.");
+    }
 
-        const hasKey = await this.cryptoService.hasKey();
-        if (!hasKey) {
-            throw new Error('No key.');
-        }
+    const collections = await this.getAll();
+    decryptedCollections = await this.decryptMany(collections);
+    await this.stateService.setDecryptedCollections(decryptedCollections);
+    return decryptedCollections;
+  }
 
-        const collections = await this.getAll();
-        this.decryptedCollectionCache = await this.decryptMany(collections);
-        return this.decryptedCollectionCache;
+  async getAllNested(collections: CollectionView[] = null): Promise<TreeNode<CollectionView>[]> {
+    if (collections == null) {
+      collections = await this.getAllDecrypted();
     }
-
-    async getAllNested(collections: CollectionView[] = null): Promise<TreeNode<CollectionView>[]> {
-        if (collections == null) {
-            collections = await this.getAllDecrypted();
-        }
-        const nodes: TreeNode<CollectionView>[] = [];
-        collections.forEach(c => {
-            const collectionCopy = new CollectionView();
-            collectionCopy.id = c.id;
-            collectionCopy.organizationId = c.organizationId;
-            const parts = c.name != null ? c.name.replace(/^\/+|\/+$/g, '').split(NestingDelimiter) : [];
-            ServiceUtils.nestedTraverse(nodes, 0, parts, collectionCopy, null, NestingDelimiter);
-        });
-        return nodes;
+    const nodes: TreeNode<CollectionView>[] = [];
+    collections.forEach((c) => {
+      const collectionCopy = new CollectionView();
+      collectionCopy.id = c.id;
+      collectionCopy.organizationId = c.organizationId;
+      const parts = c.name != null ? c.name.replace(/^\/+|\/+$/g, "").split(NestingDelimiter) : [];
+      ServiceUtils.nestedTraverse(nodes, 0, parts, collectionCopy, null, NestingDelimiter);
+    });
+    return nodes;
+  }
+
+  async getNested(id: string): Promise<TreeNode<CollectionView>> {
+    const collections = await this.getAllNested();
+    return ServiceUtils.getTreeNodeObject(collections, id) as TreeNode<CollectionView>;
+  }
+
+  async upsert(collection: CollectionData | CollectionData[]): Promise<any> {
+    let collections = await this.stateService.getEncryptedCollections();
+    if (collections == null) {
+      collections = {};
     }
 
-    async getNested(id: string): Promise<TreeNode<CollectionView>> {
-        const collections = await this.getAllNested();
-        return ServiceUtils.getTreeNodeObject(collections, id) as TreeNode<CollectionView>;
+    if (collection instanceof CollectionData) {
+      const c = collection as CollectionData;
+      collections[c.id] = c;
+    } else {
+      (collection as CollectionData[]).forEach((c) => {
+        collections[c.id] = c;
+      });
     }
 
-    async upsert(collection: CollectionData | CollectionData[]): Promise<any> {
-        const userId = await this.userService.getUserId();
-        let collections = await this.storageService.get<{ [id: string]: CollectionData; }>(
-            Keys.collectionsPrefix + userId);
-        if (collections == null) {
-            collections = {};
-        }
-
-        if (collection instanceof CollectionData) {
-            const c = collection as CollectionData;
-            collections[c.id] = c;
-        } else {
-            (collection as CollectionData[]).forEach(c => {
-                collections[c.id] = c;
-            });
-        }
-
-        await this.storageService.save(Keys.collectionsPrefix + userId, collections);
-        this.decryptedCollectionCache = null;
-    }
+    await this.replace(collections);
+  }
 
-    async replace(collections: { [id: string]: CollectionData; }): Promise<any> {
-        const userId = await this.userService.getUserId();
-        await this.storageService.save(Keys.collectionsPrefix + userId, collections);
-        this.decryptedCollectionCache = null;
-    }
+  async replace(collections: { [id: string]: CollectionData }): Promise<any> {
+    await this.clearCache();
+    await this.stateService.setEncryptedCollections(collections);
+  }
 
-    async clear(userId: string): Promise<any> {
-        await this.storageService.remove(Keys.collectionsPrefix + userId);
-        this.decryptedCollectionCache = null;
+  async clear(userId?: string): Promise<any> {
+    await this.clearCache(userId);
+    await this.stateService.setEncryptedCollections(null, { userId: userId });
+  }
+
+  async delete(id: string | string[]): Promise<any> {
+    const collections = await this.stateService.getEncryptedCollections();
+    if (collections == null) {
+      return;
     }
 
-    async delete(id: string | string[]): Promise<any> {
-        const userId = await this.userService.getUserId();
-        const collections = await this.storageService.get<{ [id: string]: CollectionData; }>(
-            Keys.collectionsPrefix + userId);
-        if (collections == null) {
-            return;
-        }
-
-        if (typeof id === 'string') {
-            const i = id as string;
-            delete collections[id];
-        } else {
-            (id as string[]).forEach(i => {
-                delete collections[i];
-            });
-        }
-
-        await this.storageService.save(Keys.collectionsPrefix + userId, collections);
-        this.decryptedCollectionCache = null;
+    if (typeof id === "string") {
+      delete collections[id];
+    } else {
+      (id as string[]).forEach((i) => {
+        delete collections[i];
+      });
     }
+
+    await this.replace(collections);
+  }
 }
diff --git a/jslib/common/src/services/consoleLog.service.ts b/jslib/common/src/services/consoleLog.service.ts
index 64d81266..1ecd2499 100644
--- a/jslib/common/src/services/consoleLog.service.ts
+++ b/jslib/common/src/services/consoleLog.service.ts
@@ -1,70 +1,73 @@
-import { LogLevelType } from '../enums/logLevelType';
+import { LogLevelType } from "../enums/logLevelType";
 
-import { LogService as LogServiceAbstraction } from '../abstractions/log.service';
+import { LogService as LogServiceAbstraction } from "../abstractions/log.service";
 
-import * as hrtime from 'browser-hrtime';
+import * as hrtime from "browser-hrtime";
 
 export class ConsoleLogService implements LogServiceAbstraction {
-    protected timersMap: Map<string, [number, number]> = new Map();
+  protected timersMap: Map<string, [number, number]> = new Map();
 
-    constructor(protected isDev: boolean, protected filter: (level: LogLevelType) => boolean = null) { }
+  constructor(
+    protected isDev: boolean,
+    protected filter: (level: LogLevelType) => boolean = null
+  ) {}
 
-    debug(message: string) {
-        if (!this.isDev) {
-            return;
-        }
-        this.write(LogLevelType.Debug, message);
+  debug(message: string) {
+    if (!this.isDev) {
+      return;
     }
+    this.write(LogLevelType.Debug, message);
+  }
 
-    info(message: string) {
-        this.write(LogLevelType.Info, message);
-    }
+  info(message: string) {
+    this.write(LogLevelType.Info, message);
+  }
 
-    warning(message: string) {
-        this.write(LogLevelType.Warning, message);
-    }
+  warning(message: string) {
+    this.write(LogLevelType.Warning, message);
+  }
 
-    error(message: string) {
-        this.write(LogLevelType.Error, message);
-    }
+  error(message: string) {
+    this.write(LogLevelType.Error, message);
+  }
 
-    write(level: LogLevelType, message: string) {
-        if (this.filter != null && this.filter(level)) {
-            return;
-        }
-
-        switch (level) {
-            case LogLevelType.Debug:
-                // tslint:disable-next-line
-                console.log(message);
-                break;
-            case LogLevelType.Info:
-                // tslint:disable-next-line
-                console.log(message);
-                break;
-            case LogLevelType.Warning:
-                // tslint:disable-next-line
-                console.warn(message);
-                break;
-            case LogLevelType.Error:
-                // tslint:disable-next-line
-                console.error(message);
-                break;
-            default:
-                break;
-        }
+  write(level: LogLevelType, message: string) {
+    if (this.filter != null && this.filter(level)) {
+      return;
     }
 
-    time(label: string = 'default') {
-        if (!this.timersMap.has(label)) {
-            this.timersMap.set(label, hrtime());
-        }
+    switch (level) {
+      case LogLevelType.Debug:
+        // tslint:disable-next-line
+        console.log(message);
+        break;
+      case LogLevelType.Info:
+        // tslint:disable-next-line
+        console.log(message);
+        break;
+      case LogLevelType.Warning:
+        // tslint:disable-next-line
+        console.warn(message);
+        break;
+      case LogLevelType.Error:
+        // tslint:disable-next-line
+        console.error(message);
+        break;
+      default:
+        break;
     }
+  }
 
-    timeEnd(label: string = 'default'): [number, number] {
-        const elapsed = hrtime(this.timersMap.get(label));
-        this.timersMap.delete(label);
-        this.write(LogLevelType.Info, `${label}: ${elapsed[0] * 1000 + elapsed[1] / 10e6}ms`);
-        return elapsed;
+  time(label: string = "default") {
+    if (!this.timersMap.has(label)) {
+      this.timersMap.set(label, hrtime());
     }
+  }
+
+  timeEnd(label: string = "default"): [number, number] {
+    const elapsed = hrtime(this.timersMap.get(label));
+    this.timersMap.delete(label);
+    this.write(LogLevelType.Info, `${label}: ${elapsed[0] * 1000 + elapsed[1] / 10e6}ms`);
+    return elapsed;
+  }
 }
diff --git a/jslib/common/src/services/constants.service.ts b/jslib/common/src/services/constants.service.ts
deleted file mode 100644
index 9202f862..00000000
--- a/jslib/common/src/services/constants.service.ts
+++ /dev/null
@@ -1,68 +0,0 @@
-export class ConstantsService {
-    static readonly environmentUrlsKey: string = 'environmentUrls';
-    static readonly disableGaKey: string = 'disableGa';
-    static readonly disableAddLoginNotificationKey: string = 'disableAddLoginNotification';
-    static readonly disableChangedPasswordNotificationKey: string = 'disableChangedPasswordNotification';
-    static readonly disableContextMenuItemKey: string = 'disableContextMenuItem';
-    static readonly disableFaviconKey: string = 'disableFavicon';
-    static readonly disableBadgeCounterKey: string = 'disableBadgeCounter';
-    static readonly disableAutoTotpCopyKey: string = 'disableAutoTotpCopy';
-    static readonly disableAutoBiometricsPromptKey: string = 'noAutoPromptBiometrics';
-    static readonly enableAutoFillOnPageLoadKey: string = 'enableAutoFillOnPageLoad';
-    static readonly autoFillOnPageLoadDefaultKey: string = 'autoFillOnPageLoadDefault';
-    static readonly vaultTimeoutKey: string = 'lockOption';
-    static readonly vaultTimeoutActionKey: string = 'vaultTimeoutAction';
-    static readonly lastActiveKey: string = 'lastActive';
-    static readonly neverDomainsKey: string = 'neverDomains';
-    static readonly installedVersionKey: string = 'installedVersion';
-    static readonly localeKey: string = 'locale';
-    static readonly themeKey: string = 'theme';
-    static readonly collapsedGroupingsKey: string = 'collapsedGroupings';
-    static readonly autoConfirmFingerprints: string = 'autoConfirmFingerprints';
-    static readonly dontShowCardsCurrentTab: string = 'dontShowCardsCurrentTab';
-    static readonly dontShowIdentitiesCurrentTab: string = 'dontShowIdentitiesCurrentTab';
-    static readonly defaultUriMatch: string = 'defaultUriMatch';
-    static readonly pinProtectedKey: string = 'pinProtectedKey';
-    static readonly protectedPin: string = 'protectedPin';
-    static readonly clearClipboardKey: string = 'clearClipboardKey';
-    static readonly eventCollectionKey: string = 'eventCollection';
-    static readonly ssoCodeVerifierKey: string = 'ssoCodeVerifier';
-    static readonly ssoStateKey: string = 'ssoState';
-    static readonly biometricUnlockKey: string = 'biometric';
-    static readonly biometricText: string = 'biometricText';
-    static readonly biometricAwaitingAcceptance: string = 'biometricAwaitingAcceptance';
-    static readonly biometricFingerprintValidated: string = 'biometricFingerprintValidated';
-
-    readonly environmentUrlsKey: string = ConstantsService.environmentUrlsKey;
-    readonly disableGaKey: string = ConstantsService.disableGaKey;
-    readonly disableAddLoginNotificationKey: string = ConstantsService.disableAddLoginNotificationKey;
-    readonly disableContextMenuItemKey: string = ConstantsService.disableContextMenuItemKey;
-    readonly disableFaviconKey: string = ConstantsService.disableFaviconKey;
-    readonly disableBadgeCounterKey: string = ConstantsService.disableBadgeCounterKey;
-    readonly disableAutoTotpCopyKey: string = ConstantsService.disableAutoTotpCopyKey;
-    readonly disableAutoBiometricsPromptKey: string = ConstantsService.disableAutoBiometricsPromptKey;
-    readonly enableAutoFillOnPageLoadKey: string = ConstantsService.enableAutoFillOnPageLoadKey;
-    readonly autoFillOnPageLoadDefaultKey: string = ConstantsService.autoFillOnPageLoadDefaultKey;
-    readonly vaultTimeoutKey: string = ConstantsService.vaultTimeoutKey;
-    readonly vaultTimeoutActionKey: string = ConstantsService.vaultTimeoutActionKey;
-    readonly lastActiveKey: string = ConstantsService.lastActiveKey;
-    readonly neverDomainsKey: string = ConstantsService.neverDomainsKey;
-    readonly installedVersionKey: string = ConstantsService.installedVersionKey;
-    readonly localeKey: string = ConstantsService.localeKey;
-    readonly themeKey: string = ConstantsService.themeKey;
-    readonly collapsedGroupingsKey: string = ConstantsService.collapsedGroupingsKey;
-    readonly autoConfirmFingerprints: string = ConstantsService.autoConfirmFingerprints;
-    readonly dontShowCardsCurrentTab: string = ConstantsService.dontShowCardsCurrentTab;
-    readonly dontShowIdentitiesCurrentTab: string = ConstantsService.dontShowIdentitiesCurrentTab;
-    readonly defaultUriMatch: string = ConstantsService.defaultUriMatch;
-    readonly pinProtectedKey: string = ConstantsService.pinProtectedKey;
-    readonly protectedPin: string = ConstantsService.protectedPin;
-    readonly clearClipboardKey: string = ConstantsService.clearClipboardKey;
-    readonly eventCollectionKey: string = ConstantsService.eventCollectionKey;
-    readonly ssoCodeVerifierKey: string = ConstantsService.ssoCodeVerifierKey;
-    readonly ssoStateKey: string = ConstantsService.ssoStateKey;
-    readonly biometricUnlockKey: string = ConstantsService.biometricUnlockKey;
-    readonly biometricText: string = ConstantsService.biometricText;
-    readonly biometricAwaitingAcceptance: string = ConstantsService.biometricAwaitingAcceptance;
-    readonly biometricFingerprintValidated: string = ConstantsService.biometricFingerprintValidated;
-}
diff --git a/jslib/common/src/services/container.service.ts b/jslib/common/src/services/container.service.ts
index 08f428ad..2880e7c7 100644
--- a/jslib/common/src/services/container.service.ts
+++ b/jslib/common/src/services/container.service.ts
@@ -1,21 +1,20 @@
-import { CryptoService } from '../abstractions/crypto.service';
+import { CryptoService } from "../abstractions/crypto.service";
 
 export class ContainerService {
-    constructor(private cryptoService: CryptoService) {
-    }
+  constructor(private cryptoService: CryptoService) {}
 
-    // deprecated, use attachToGlobal instead
-    attachToWindow(win: any) {
-        this.attachToGlobal(win);
-    }
+  // deprecated, use attachToGlobal instead
+  attachToWindow(win: any) {
+    this.attachToGlobal(win);
+  }
 
-    attachToGlobal(global: any) {
-        if (!global.bitwardenContainerService) {
-            global.bitwardenContainerService = this;
-        }
+  attachToGlobal(global: any) {
+    if (!global.bitwardenContainerService) {
+      global.bitwardenContainerService = this;
     }
+  }
 
-    getCryptoService(): CryptoService {
-        return this.cryptoService;
-    }
+  getCryptoService(): CryptoService {
+    return this.cryptoService;
+  }
 }
diff --git a/jslib/common/src/services/crypto.service.ts b/jslib/common/src/services/crypto.service.ts
index 60ef0ea0..fd9d83c4 100644
--- a/jslib/common/src/services/crypto.service.ts
+++ b/jslib/common/src/services/crypto.service.ts
@@ -1,888 +1,968 @@
-import * as bigInt from 'big-integer';
-
-import { EncryptionType } from '../enums/encryptionType';
-import { HashPurpose } from '../enums/hashPurpose';
-import { KdfType } from '../enums/kdfType';
-
-import { EncArrayBuffer } from '../models/domain/encArrayBuffer';
-import { EncryptedObject } from '../models/domain/encryptedObject';
-import { EncString } from '../models/domain/encString';
-import { SymmetricCryptoKey } from '../models/domain/symmetricCryptoKey';
-import { ProfileOrganizationResponse } from '../models/response/profileOrganizationResponse';
-
-import { CryptoService as CryptoServiceAbstraction } from '../abstractions/crypto.service';
-import { CryptoFunctionService } from '../abstractions/cryptoFunction.service';
-import { LogService } from '../abstractions/log.service';
-import { PlatformUtilsService } from '../abstractions/platformUtils.service';
-import {
-    KeySuffixOptions,
-    StorageService,
-} from '../abstractions/storage.service';
-
-import { ConstantsService } from './constants.service';
-
-import { sequentialize } from '../misc/sequentialize';
-import { Utils } from '../misc/utils';
-import { EEFLongWordList } from '../misc/wordlist';
-import { ProfileProviderOrganizationResponse } from '../models/response/profileProviderOrganizationResponse';
-import { ProfileProviderResponse } from '../models/response/profileProviderResponse';
-
-export const Keys = {
-    key: 'key', // Master Key
-    encOrgKeys: 'encOrgKeys',
-    encProviderKeys: 'encProviderKeys',
-    encPrivateKey: 'encPrivateKey',
-    encKey: 'encKey', // Generated Symmetric Key
-    keyHash: 'keyHash',
-};
+import * as bigInt from "big-integer";
 
-export class CryptoService implements CryptoServiceAbstraction {
-    private key: SymmetricCryptoKey;
-    private encKey: SymmetricCryptoKey;
-    private legacyEtmKey: SymmetricCryptoKey;
-    private keyHash: string;
-    private publicKey: ArrayBuffer;
-    private privateKey: ArrayBuffer;
-    private orgKeys: Map<string, SymmetricCryptoKey>;
-    private providerKeys: Map<string, SymmetricCryptoKey>;
-
-    constructor(private storageService: StorageService, protected secureStorageService: StorageService,
-        private cryptoFunctionService: CryptoFunctionService, protected platformUtilService: PlatformUtilsService,
-        protected logService: LogService) {
-    }
+import { EncryptionType } from "../enums/encryptionType";
+import { HashPurpose } from "../enums/hashPurpose";
+import { KdfType } from "../enums/kdfType";
+import { KeySuffixOptions } from "../enums/keySuffixOptions";
 
-    async setKey(key: SymmetricCryptoKey): Promise<any> {
-        this.key = key;
+import { EncArrayBuffer } from "../models/domain/encArrayBuffer";
+import { EncryptedObject } from "../models/domain/encryptedObject";
+import { EncString } from "../models/domain/encString";
+import { SymmetricCryptoKey } from "../models/domain/symmetricCryptoKey";
 
-        await this.storeKey(key);
-    }
+import { CryptoService as CryptoServiceAbstraction } from "../abstractions/crypto.service";
+import { CryptoFunctionService } from "../abstractions/cryptoFunction.service";
+import { LogService } from "../abstractions/log.service";
+import { PlatformUtilsService } from "../abstractions/platformUtils.service";
+import { StateService } from "../abstractions/state.service";
 
-    setKeyHash(keyHash: string): Promise<{}> {
-        this.keyHash = keyHash;
-        return this.storageService.save(Keys.keyHash, keyHash);
-    }
+import { sequentialize } from "../misc/sequentialize";
+import { Utils } from "../misc/utils";
+import { EEFLongWordList } from "../misc/wordlist";
 
-    async setEncKey(encKey: string): Promise<{}> {
-        if (encKey == null) {
-            return;
-        }
+import { ProfileOrganizationResponse } from "../models/response/profileOrganizationResponse";
+import { ProfileProviderOrganizationResponse } from "../models/response/profileProviderOrganizationResponse";
+import { ProfileProviderResponse } from "../models/response/profileProviderResponse";
 
-        await this.storageService.save(Keys.encKey, encKey);
-        this.encKey = null;
-    }
-
-    async setEncPrivateKey(encPrivateKey: string): Promise<{}> {
-        if (encPrivateKey == null) {
-            return;
-        }
-
-        await this.storageService.save(Keys.encPrivateKey, encPrivateKey);
-        this.privateKey = null;
-    }
+export class CryptoService implements CryptoServiceAbstraction {
+  constructor(
+    private cryptoFunctionService: CryptoFunctionService,
+    protected platformUtilService: PlatformUtilsService,
+    protected logService: LogService,
+    protected stateService: StateService
+  ) {}
 
-    async setOrgKeys(orgs: ProfileOrganizationResponse[], providerOrgs: ProfileProviderOrganizationResponse[]): Promise<{}> {
-        const orgKeys: any = {};
-        orgs.forEach(org => {
-            orgKeys[org.id] = org.key;
-        });
+  async setKey(key: SymmetricCryptoKey, userId?: string): Promise<any> {
+    await this.stateService.setCryptoMasterKey(key, { userId: userId });
+    await this.storeKey(key, userId);
+  }
 
-        for (const providerOrg of providerOrgs) {
-            // Convert provider encrypted keys to user encrypted.
-            const providerKey = await this.getProviderKey(providerOrg.providerId);
-            const decValue = await this.decryptToBytes(new EncString(providerOrg.key), providerKey);
-            orgKeys[providerOrg.id] = await (await this.rsaEncrypt(decValue)).encryptedString;
-        }
+  async setKeyHash(keyHash: string): Promise<void> {
+    await this.stateService.setKeyHash(keyHash);
+  }
 
-        this.orgKeys = null;
-        return this.storageService.save(Keys.encOrgKeys, orgKeys);
+  async setEncKey(encKey: string): Promise<void> {
+    if (encKey == null) {
+      return;
     }
 
-    setProviderKeys(providers: ProfileProviderResponse[]): Promise<{}> {
-        const providerKeys: any = {};
-        providers.forEach(provider => {
-            providerKeys[provider.id] = provider.key;
-        });
+    await this.stateService.setDecryptedCryptoSymmetricKey(null);
+    await this.stateService.setEncryptedCryptoSymmetricKey(encKey);
+  }
 
-        this.providerKeys = null;
-        return this.storageService.save(Keys.encProviderKeys, providerKeys);
+  async setEncPrivateKey(encPrivateKey: string): Promise<void> {
+    if (encPrivateKey == null) {
+      return;
     }
 
-    async getKey(keySuffix?: KeySuffixOptions): Promise<SymmetricCryptoKey> {
-        if (this.key != null) {
-            return this.key;
-        }
-
-        keySuffix ||= 'auto';
-        const symmetricKey = await this.getKeyFromStorage(keySuffix);
+    await this.stateService.setDecryptedPrivateKey(null);
+    await this.stateService.setEncryptedPrivateKey(encPrivateKey);
+  }
 
-        if (symmetricKey != null) {
-            this.setKey(symmetricKey);
-        }
+  async setOrgKeys(
+    orgs: ProfileOrganizationResponse[],
+    providerOrgs: ProfileProviderOrganizationResponse[]
+  ): Promise<void> {
+    const orgKeys: any = {};
+    orgs.forEach((org) => {
+      orgKeys[org.id] = org.key;
+    });
 
-        return symmetricKey;
+    for (const providerOrg of providerOrgs) {
+      // Convert provider encrypted keys to user encrypted.
+      const providerKey = await this.getProviderKey(providerOrg.providerId);
+      const decValue = await this.decryptToBytes(new EncString(providerOrg.key), providerKey);
+      orgKeys[providerOrg.id] = (await this.rsaEncrypt(decValue)).encryptedString;
     }
 
-    async getKeyFromStorage(keySuffix: KeySuffixOptions): Promise<SymmetricCryptoKey> {
-        const key = await this.retrieveKeyFromStorage(keySuffix);
-        if (key != null) {
+    await this.stateService.setDecryptedOrganizationKeys(null);
+    return await this.stateService.setEncryptedOrganizationKeys(orgKeys);
+  }
 
-            const symmetricKey = new SymmetricCryptoKey(Utils.fromB64ToArray(key).buffer);
+  async setProviderKeys(providers: ProfileProviderResponse[]): Promise<void> {
+    const providerKeys: any = {};
+    providers.forEach((provider) => {
+      providerKeys[provider.id] = provider.key;
+    });
 
-            if (!await this.validateKey(symmetricKey)) {
-                this.logService.warning('Wrong key, throwing away stored key');
-                this.secureStorageService.remove(Keys.key, { keySuffix: keySuffix });
-                return null;
-            }
+    await this.stateService.setDecryptedProviderKeys(null);
+    return await this.stateService.setEncryptedProviderKeys(providerKeys);
+  }
 
-            return symmetricKey;
-        }
-        return null;
-    }
+  async getKey(keySuffix?: KeySuffixOptions, userId?: string): Promise<SymmetricCryptoKey> {
+    const inMemoryKey = await this.stateService.getCryptoMasterKey({ userId: userId });
 
-    async getKeyHash(): Promise<string> {
-        if (this.keyHash != null) {
-            return this.keyHash;
-        }
-
-        const keyHash = await this.storageService.get<string>(Keys.keyHash);
-        if (keyHash != null) {
-            this.keyHash = keyHash;
-        }
-
-        return keyHash == null ? null : this.keyHash;
+    if (inMemoryKey != null) {
+      return inMemoryKey;
     }
 
-    async compareAndUpdateKeyHash(masterPassword: string, key: SymmetricCryptoKey): Promise<boolean> {
-        const storedKeyHash = await this.getKeyHash();
-        if (masterPassword != null && storedKeyHash != null) {
-            const localKeyHash = await this.hashPassword(masterPassword, key, HashPurpose.LocalAuthorization);
-            if (localKeyHash != null && storedKeyHash === localKeyHash) {
-                return true;
-            }
-
-            // TODO: remove serverKeyHash check in 1-2 releases after everyone's keyHash has been updated
-            const serverKeyHash = await this.hashPassword(masterPassword, key, HashPurpose.ServerAuthorization);
-            if (serverKeyHash != null && storedKeyHash === serverKeyHash) {
-                await this.setKeyHash(localKeyHash);
-                return true;
-            }
-        }
+    keySuffix ||= KeySuffixOptions.Auto;
+    const symmetricKey = await this.getKeyFromStorage(keySuffix, userId);
 
-        return false;
+    if (symmetricKey != null) {
+      // TODO: Refactor here so get key doesn't also set key
+      this.setKey(symmetricKey, userId);
     }
 
-    @sequentialize(() => 'getEncKey')
-    async getEncKey(key: SymmetricCryptoKey = null): Promise<SymmetricCryptoKey> {
-        if (this.encKey != null) {
-            return this.encKey;
-        }
+    return symmetricKey;
+  }
 
-        const encKey = await this.storageService.get<string>(Keys.encKey);
-        if (encKey == null) {
-            return null;
-        }
-
-        if (key == null) {
-            key = await this.getKey();
-        }
-        if (key == null) {
-            return null;
-        }
-
-        let decEncKey: ArrayBuffer;
-        const encKeyCipher = new EncString(encKey);
-        if (encKeyCipher.encryptionType === EncryptionType.AesCbc256_B64) {
-            decEncKey = await this.decryptToBytes(encKeyCipher, key);
-        } else if (encKeyCipher.encryptionType === EncryptionType.AesCbc256_HmacSha256_B64) {
-            const newKey = await this.stretchKey(key);
-            decEncKey = await this.decryptToBytes(encKeyCipher, newKey);
-        } else {
-            throw new Error('Unsupported encKey type.');
-        }
+  async getKeyFromStorage(
+    keySuffix: KeySuffixOptions,
+    userId?: string
+  ): Promise<SymmetricCryptoKey> {
+    const key = await this.retrieveKeyFromStorage(keySuffix, userId);
+    if (key != null) {
+      const symmetricKey = new SymmetricCryptoKey(Utils.fromB64ToArray(key).buffer);
 
-        if (decEncKey == null) {
-            return null;
-        }
-        this.encKey = new SymmetricCryptoKey(decEncKey);
-        return this.encKey;
-    }
-
-    async getPublicKey(): Promise<ArrayBuffer> {
-        if (this.publicKey != null) {
-            return this.publicKey;
-        }
-
-        const privateKey = await this.getPrivateKey();
-        if (privateKey == null) {
-            return null;
-        }
-
-        this.publicKey = await this.cryptoFunctionService.rsaExtractPublicKey(privateKey);
-        return this.publicKey;
-    }
-
-    async getPrivateKey(): Promise<ArrayBuffer> {
-        if (this.privateKey != null) {
-            return this.privateKey;
-        }
-
-        const encPrivateKey = await this.storageService.get<string>(Keys.encPrivateKey);
-        if (encPrivateKey == null) {
-            return null;
-        }
-
-        this.privateKey = await this.decryptToBytes(new EncString(encPrivateKey), null);
-        return this.privateKey;
-    }
-
-    async getFingerprint(userId: string, publicKey?: ArrayBuffer): Promise<string[]> {
-        if (publicKey == null) {
-            publicKey = await this.getPublicKey();
-        }
-        if (publicKey === null) {
-            throw new Error('No public key available.');
-        }
-        const keyFingerprint = await this.cryptoFunctionService.hash(publicKey, 'sha256');
-        const userFingerprint = await this.cryptoFunctionService.hkdfExpand(keyFingerprint, userId, 32, 'sha256');
-        return this.hashPhrase(userFingerprint);
-    }
-
-    @sequentialize(() => 'getOrgKeys')
-    async getOrgKeys(): Promise<Map<string, SymmetricCryptoKey>> {
-        if (this.orgKeys != null && this.orgKeys.size > 0) {
-            return this.orgKeys;
-        }
-
-        const encOrgKeys = await this.storageService.get<any>(Keys.encOrgKeys);
-        if (encOrgKeys == null) {
-            return null;
-        }
-
-        const orgKeys: Map<string, SymmetricCryptoKey> = new Map<string, SymmetricCryptoKey>();
-        let setKey = false;
-
-        for (const orgId in encOrgKeys) {
-            if (!encOrgKeys.hasOwnProperty(orgId)) {
-                continue;
-            }
-
-            const decValue = await this.rsaDecrypt(encOrgKeys[orgId]);
-            orgKeys.set(orgId, new SymmetricCryptoKey(decValue));
-            setKey = true;
-        }
-
-        if (setKey) {
-            this.orgKeys = orgKeys;
-        }
-
-        return this.orgKeys;
+      if (!(await this.validateKey(symmetricKey))) {
+        this.logService.warning("Wrong key, throwing away stored key");
+        await this.clearSecretKeyStore(userId);
+        return null;
+      }
+
+      return symmetricKey;
+    }
+    return null;
+  }
+
+  async getKeyHash(): Promise<string> {
+    return await this.stateService.getKeyHash();
+  }
+
+  async compareAndUpdateKeyHash(masterPassword: string, key: SymmetricCryptoKey): Promise<boolean> {
+    const storedKeyHash = await this.getKeyHash();
+    if (masterPassword != null && storedKeyHash != null) {
+      const localKeyHash = await this.hashPassword(
+        masterPassword,
+        key,
+        HashPurpose.LocalAuthorization
+      );
+      if (localKeyHash != null && storedKeyHash === localKeyHash) {
+        return true;
+      }
+
+      // TODO: remove serverKeyHash check in 1-2 releases after everyone's keyHash has been updated
+      const serverKeyHash = await this.hashPassword(
+        masterPassword,
+        key,
+        HashPurpose.ServerAuthorization
+      );
+      if (serverKeyHash != null && storedKeyHash === serverKeyHash) {
+        await this.setKeyHash(localKeyHash);
+        return true;
+      }
     }
 
-    async getOrgKey(orgId: string): Promise<SymmetricCryptoKey> {
-        if (orgId == null) {
-            return null;
-        }
-
-        const orgKeys = await this.getOrgKeys();
-        if (orgKeys == null || !orgKeys.has(orgId)) {
-            return null;
-        }
+    return false;
+  }
 
-        return orgKeys.get(orgId);
+  @sequentialize(() => "getEncKey")
+  async getEncKey(key: SymmetricCryptoKey = null): Promise<SymmetricCryptoKey> {
+    const inMemoryKey = await this.stateService.getDecryptedCryptoSymmetricKey();
+    if (inMemoryKey != null) {
+      return inMemoryKey;
     }
 
-    @sequentialize(() => 'getProviderKeys')
-    async getProviderKeys(): Promise<Map<string, SymmetricCryptoKey>> {
-        if (this.providerKeys != null && this.providerKeys.size > 0) {
-            return this.providerKeys;
-        }
-
-        const encProviderKeys = await this.storageService.get<any>(Keys.encProviderKeys);
-        if (encProviderKeys == null) {
-            return null;
-        }
-
-        const providerKeys: Map<string, SymmetricCryptoKey> = new Map<string, SymmetricCryptoKey>();
-        let setKey = false;
-
-        for (const orgId in encProviderKeys) {
-            if (!encProviderKeys.hasOwnProperty(orgId)) {
-                continue;
-            }
-
-            const decValue = await this.rsaDecrypt(encProviderKeys[orgId]);
-            providerKeys.set(orgId, new SymmetricCryptoKey(decValue));
-            setKey = true;
-        }
-
-        if (setKey) {
-            this.providerKeys = providerKeys;
-        }
-
-        return this.providerKeys;
+    const encKey = await this.stateService.getEncryptedCryptoSymmetricKey();
+    if (encKey == null) {
+      return null;
     }
 
-    async getProviderKey(providerId: string): Promise<SymmetricCryptoKey> {
-        if (providerId == null) {
-            return null;
-        }
-
-        const providerKeys = await this.getProviderKeys();
-        if (providerKeys == null || !providerKeys.has(providerId)) {
-            return null;
-        }
-
-        return providerKeys.get(providerId);
+    if (key == null) {
+      key = await this.getKey();
     }
-
-    async hasKey(): Promise<boolean> {
-        return this.hasKeyInMemory() || await this.hasKeyStored('auto') || await this.hasKeyStored('biometric');
+    if (key == null) {
+      return null;
     }
 
-    hasKeyInMemory(): boolean {
-        return this.key != null;
+    let decEncKey: ArrayBuffer;
+    const encKeyCipher = new EncString(encKey);
+    if (encKeyCipher.encryptionType === EncryptionType.AesCbc256_B64) {
+      decEncKey = await this.decryptToBytes(encKeyCipher, key);
+    } else if (encKeyCipher.encryptionType === EncryptionType.AesCbc256_HmacSha256_B64) {
+      const newKey = await this.stretchKey(key);
+      decEncKey = await this.decryptToBytes(encKeyCipher, newKey);
+    } else {
+      throw new Error("Unsupported encKey type.");
     }
 
-    hasKeyStored(keySuffix: KeySuffixOptions): Promise<boolean> {
-        return this.secureStorageService.has(Keys.key, { keySuffix: keySuffix });
+    if (decEncKey == null) {
+      return null;
     }
+    const symmetricCryptoKey = new SymmetricCryptoKey(decEncKey);
+    await this.stateService.setDecryptedCryptoSymmetricKey(symmetricCryptoKey);
+    return symmetricCryptoKey;
+  }
 
-    async hasEncKey(): Promise<boolean> {
-        const encKey = await this.storageService.get<string>(Keys.encKey);
-        return encKey != null;
+  async getPublicKey(): Promise<ArrayBuffer> {
+    const inMemoryPublicKey = await this.stateService.getPublicKey();
+    if (inMemoryPublicKey != null) {
+      return inMemoryPublicKey;
     }
 
-    async clearKey(clearSecretStorage: boolean = true): Promise<any> {
-        this.key = this.legacyEtmKey = null;
-        if (clearSecretStorage) {
-            this.clearStoredKey('auto');
-            this.clearStoredKey('biometric');
-        }
+    const privateKey = await this.getPrivateKey();
+    if (privateKey == null) {
+      return null;
     }
 
-    async clearStoredKey(keySuffix: KeySuffixOptions) {
-        await this.secureStorageService.remove(Keys.key, { keySuffix: keySuffix });
-    }
+    const publicKey = await this.cryptoFunctionService.rsaExtractPublicKey(privateKey);
+    await this.stateService.setPublicKey(publicKey);
+    return publicKey;
+  }
 
-    clearKeyHash(): Promise<any> {
-        this.keyHash = null;
-        return this.storageService.remove(Keys.keyHash);
+  async getPrivateKey(): Promise<ArrayBuffer> {
+    const decryptedPrivateKey = await this.stateService.getDecryptedPrivateKey();
+    if (decryptedPrivateKey != null) {
+      return decryptedPrivateKey;
     }
 
-    clearEncKey(memoryOnly?: boolean): Promise<any> {
-        this.encKey = null;
-        if (memoryOnly) {
-            return Promise.resolve();
-        }
-        return this.storageService.remove(Keys.encKey);
+    const encPrivateKey = await this.stateService.getEncryptedPrivateKey();
+    if (encPrivateKey == null) {
+      return null;
     }
 
-    clearKeyPair(memoryOnly?: boolean): Promise<any> {
-        this.privateKey = null;
-        this.publicKey = null;
-        if (memoryOnly) {
-            return Promise.resolve();
-        }
-        return this.storageService.remove(Keys.encPrivateKey);
-    }
+    const privateKey = await this.decryptToBytes(new EncString(encPrivateKey), null);
+    await this.stateService.setDecryptedPrivateKey(privateKey);
+    return privateKey;
+  }
 
-    clearOrgKeys(memoryOnly?: boolean): Promise<any> {
-        this.orgKeys = null;
-        if (memoryOnly) {
-            return Promise.resolve();
-        }
-        return this.storageService.remove(Keys.encOrgKeys);
+  async getFingerprint(userId: string, publicKey?: ArrayBuffer): Promise<string[]> {
+    if (publicKey == null) {
+      publicKey = await this.getPublicKey();
     }
-
-    clearProviderKeys(memoryOnly?: boolean): Promise<any> {
-        this.providerKeys = null;
-        if (memoryOnly) {
-            return Promise.resolve();
-        }
-        return this.storageService.remove(Keys.encOrgKeys);
+    if (publicKey === null) {
+      throw new Error("No public key available.");
     }
+    const keyFingerprint = await this.cryptoFunctionService.hash(publicKey, "sha256");
+    const userFingerprint = await this.cryptoFunctionService.hkdfExpand(
+      keyFingerprint,
+      userId,
+      32,
+      "sha256"
+    );
+    return this.hashPhrase(userFingerprint);
+  }
 
-    clearPinProtectedKey(): Promise<any> {
-        return this.storageService.remove(ConstantsService.pinProtectedKey);
+  @sequentialize(() => "getOrgKeys")
+  async getOrgKeys(): Promise<Map<string, SymmetricCryptoKey>> {
+    const orgKeys: Map<string, SymmetricCryptoKey> = new Map<string, SymmetricCryptoKey>();
+    const decryptedOrganizationKeys = await this.stateService.getDecryptedOrganizationKeys();
+    if (decryptedOrganizationKeys != null && decryptedOrganizationKeys.size > 0) {
+      return decryptedOrganizationKeys;
     }
 
-    async clearKeys(): Promise<any> {
-        await this.clearKey();
-        await this.clearKeyHash();
-        await this.clearOrgKeys();
-        await this.clearProviderKeys();
-        await this.clearEncKey();
-        await this.clearKeyPair();
-        await this.clearPinProtectedKey();
+    const encOrgKeys = await this.stateService.getEncryptedOrganizationKeys();
+    if (encOrgKeys == null) {
+      return null;
     }
 
-    async toggleKey(): Promise<any> {
-        const key = await this.getKey();
+    let setKey = false;
 
-        await this.setKey(key);
-    }
+    for (const orgId in encOrgKeys) {
+      if (!encOrgKeys.hasOwnProperty(orgId)) {
+        continue;
+      }
 
-    async makeKey(password: string, salt: string, kdf: KdfType, kdfIterations: number):
-        Promise<SymmetricCryptoKey> {
-        let key: ArrayBuffer = null;
-        if (kdf == null || kdf === KdfType.PBKDF2_SHA256) {
-            if (kdfIterations == null) {
-                kdfIterations = 5000;
-            } else if (kdfIterations < 5000) {
-                throw new Error('PBKDF2 iteration minimum is 5000.');
-            }
-            key = await this.cryptoFunctionService.pbkdf2(password, salt, 'sha256', kdfIterations);
-        } else {
-            throw new Error('Unknown Kdf.');
-        }
-        return new SymmetricCryptoKey(key);
-    }
-
-    async makeKeyFromPin(pin: string, salt: string, kdf: KdfType, kdfIterations: number,
-        protectedKeyCs: EncString = null):
-        Promise<SymmetricCryptoKey> {
-        if (protectedKeyCs == null) {
-            const pinProtectedKey = await this.storageService.get<string>(ConstantsService.pinProtectedKey);
-            if (pinProtectedKey == null) {
-                throw new Error('No PIN protected key found.');
-            }
-            protectedKeyCs = new EncString(pinProtectedKey);
-        }
-        const pinKey = await this.makePinKey(pin, salt, kdf, kdfIterations);
-        const decKey = await this.decryptToBytes(protectedKeyCs, pinKey);
-        return new SymmetricCryptoKey(decKey);
+      const decValue = await this.rsaDecrypt(encOrgKeys[orgId]);
+      orgKeys.set(orgId, new SymmetricCryptoKey(decValue));
+      setKey = true;
     }
 
-    async makeShareKey(): Promise<[EncString, SymmetricCryptoKey]> {
-        const shareKey = await this.cryptoFunctionService.randomBytes(64);
-        const publicKey = await this.getPublicKey();
-        const encShareKey = await this.rsaEncrypt(shareKey, publicKey);
-        return [encShareKey, new SymmetricCryptoKey(shareKey)];
+    if (setKey) {
+      await this.stateService.setDecryptedOrganizationKeys(orgKeys);
     }
 
-    async makeKeyPair(key?: SymmetricCryptoKey): Promise<[string, EncString]> {
-        const keyPair = await this.cryptoFunctionService.rsaGenerateKeyPair(2048);
-        const publicB64 = Utils.fromBufferToB64(keyPair[0]);
-        const privateEnc = await this.encrypt(keyPair[1], key);
-        return [publicB64, privateEnc];
-    }
+    return orgKeys;
+  }
 
-    async makePinKey(pin: string, salt: string, kdf: KdfType, kdfIterations: number): Promise<SymmetricCryptoKey> {
-        const pinKey = await this.makeKey(pin, salt, kdf, kdfIterations);
-        return await this.stretchKey(pinKey);
+  async getOrgKey(orgId: string): Promise<SymmetricCryptoKey> {
+    if (orgId == null) {
+      return null;
     }
 
-    async makeSendKey(keyMaterial: ArrayBuffer): Promise<SymmetricCryptoKey> {
-        const sendKey = await this.cryptoFunctionService.hkdf(keyMaterial, 'bitwarden-send', 'send', 64, 'sha256');
-        return new SymmetricCryptoKey(sendKey);
+    const orgKeys = await this.getOrgKeys();
+    if (orgKeys == null || !orgKeys.has(orgId)) {
+      return null;
     }
 
-    async hashPassword(password: string, key: SymmetricCryptoKey, hashPurpose?: HashPurpose): Promise<string> {
-        if (key == null) {
-            key = await this.getKey();
-        }
-        if (password == null || key == null) {
-            throw new Error('Invalid parameters.');
-        }
-
-        const iterations = hashPurpose === HashPurpose.LocalAuthorization ? 2 : 1;
-        const hash = await this.cryptoFunctionService.pbkdf2(key.key, password, 'sha256', iterations);
-        return Utils.fromBufferToB64(hash);
-    }
+    return orgKeys.get(orgId);
+  }
 
-    async makeEncKey(key: SymmetricCryptoKey): Promise<[SymmetricCryptoKey, EncString]> {
-        const theKey = await this.getKeyForEncryption(key);
-        const encKey = await this.cryptoFunctionService.randomBytes(64);
-        return this.buildEncKey(theKey, encKey);
+  @sequentialize(() => "getProviderKeys")
+  async getProviderKeys(): Promise<Map<string, SymmetricCryptoKey>> {
+    const providerKeys: Map<string, SymmetricCryptoKey> = new Map<string, SymmetricCryptoKey>();
+    const decryptedProviderKeys = await this.stateService.getDecryptedProviderKeys();
+    if (decryptedProviderKeys != null && decryptedProviderKeys.size > 0) {
+      return decryptedProviderKeys;
     }
 
-    async remakeEncKey(key: SymmetricCryptoKey, encKey?: SymmetricCryptoKey): Promise<[SymmetricCryptoKey, EncString]> {
-        if (encKey == null) {
-            encKey = await this.getEncKey();
-        }
-        return this.buildEncKey(key, encKey.key);
+    const encProviderKeys = await this.stateService.getEncryptedProviderKeys();
+    if (encProviderKeys == null) {
+      return null;
     }
 
-    async encrypt(plainValue: string | ArrayBuffer, key?: SymmetricCryptoKey): Promise<EncString> {
-        if (plainValue == null) {
-            return Promise.resolve(null);
-        }
+    let setKey = false;
 
-        let plainBuf: ArrayBuffer;
-        if (typeof (plainValue) === 'string') {
-            plainBuf = Utils.fromUtf8ToArray(plainValue).buffer;
-        } else {
-            plainBuf = plainValue;
-        }
+    for (const orgId in encProviderKeys) {
+      if (!encProviderKeys.hasOwnProperty(orgId)) {
+        continue;
+      }
 
-        const encObj = await this.aesEncrypt(plainBuf, key);
-        const iv = Utils.fromBufferToB64(encObj.iv);
-        const data = Utils.fromBufferToB64(encObj.data);
-        const mac = encObj.mac != null ? Utils.fromBufferToB64(encObj.mac) : null;
-        return new EncString(encObj.key.encType, data, iv, mac);
+      const decValue = await this.rsaDecrypt(encProviderKeys[orgId]);
+      providerKeys.set(orgId, new SymmetricCryptoKey(decValue));
+      setKey = true;
     }
 
-    async encryptToBytes(plainValue: ArrayBuffer, key?: SymmetricCryptoKey): Promise<EncArrayBuffer> {
-        const encValue = await this.aesEncrypt(plainValue, key);
-        let macLen = 0;
-        if (encValue.mac != null) {
-            macLen = encValue.mac.byteLength;
-        }
-
-        const encBytes = new Uint8Array(1 + encValue.iv.byteLength + macLen + encValue.data.byteLength);
-        encBytes.set([encValue.key.encType]);
-        encBytes.set(new Uint8Array(encValue.iv), 1);
-        if (encValue.mac != null) {
-            encBytes.set(new Uint8Array(encValue.mac), 1 + encValue.iv.byteLength);
-        }
-
-        encBytes.set(new Uint8Array(encValue.data), 1 + encValue.iv.byteLength + macLen);
-        return new EncArrayBuffer(encBytes.buffer);
+    if (setKey) {
+      await this.stateService.setDecryptedProviderKeys(providerKeys);
     }
 
-    async rsaEncrypt(data: ArrayBuffer, publicKey?: ArrayBuffer): Promise<EncString> {
-        if (publicKey == null) {
-            publicKey = await this.getPublicKey();
-        }
-        if (publicKey == null) {
-            throw new Error('Public key unavailable.');
-        }
-
-        const encBytes = await this.cryptoFunctionService.rsaEncrypt(data, publicKey, 'sha1');
-        return new EncString(EncryptionType.Rsa2048_OaepSha1_B64, Utils.fromBufferToB64(encBytes));
-    }
-
-    async rsaDecrypt(encValue: string, privateKeyValue?: ArrayBuffer): Promise<ArrayBuffer> {
-        const headerPieces = encValue.split('.');
-        let encType: EncryptionType = null;
-        let encPieces: string[];
-
-        if (headerPieces.length === 1) {
-            encType = EncryptionType.Rsa2048_OaepSha256_B64;
-            encPieces = [headerPieces[0]];
-        } else if (headerPieces.length === 2) {
-            try {
-                encType = parseInt(headerPieces[0], null);
-                encPieces = headerPieces[1].split('|');
-            } catch (e) {
-                this.logService.error(e);
-            }
-        }
-
-        switch (encType) {
-            case EncryptionType.Rsa2048_OaepSha256_B64:
-            case EncryptionType.Rsa2048_OaepSha1_B64:
-            // HmacSha256 types are deprecated
-            case EncryptionType.Rsa2048_OaepSha256_HmacSha256_B64:
-            case EncryptionType.Rsa2048_OaepSha1_HmacSha256_B64:
-                break;
-            default:
-                throw new Error('encType unavailable.');
-        }
-
-        if (encPieces == null || encPieces.length <= 0) {
-            throw new Error('encPieces unavailable.');
-        }
-
-        const data = Utils.fromB64ToArray(encPieces[0]).buffer;
-        const privateKey = privateKeyValue ?? await this.getPrivateKey();
-        if (privateKey == null) {
-            throw new Error('No private key.');
-        }
-
-        let alg: 'sha1' | 'sha256' = 'sha1';
-        switch (encType) {
-            case EncryptionType.Rsa2048_OaepSha256_B64:
-            case EncryptionType.Rsa2048_OaepSha256_HmacSha256_B64:
-                alg = 'sha256';
-                break;
-            case EncryptionType.Rsa2048_OaepSha1_B64:
-            case EncryptionType.Rsa2048_OaepSha1_HmacSha256_B64:
-                break;
-            default:
-                throw new Error('encType unavailable.');
-        }
+    return providerKeys;
+  }
 
-        return this.cryptoFunctionService.rsaDecrypt(data, privateKey, alg);
+  async getProviderKey(providerId: string): Promise<SymmetricCryptoKey> {
+    if (providerId == null) {
+      return null;
     }
 
-    async decryptToBytes(encString: EncString, key?: SymmetricCryptoKey): Promise<ArrayBuffer> {
-        const iv = Utils.fromB64ToArray(encString.iv).buffer;
-        const data = Utils.fromB64ToArray(encString.data).buffer;
-        const mac = encString.mac ? Utils.fromB64ToArray(encString.mac).buffer : null;
-        const decipher = await this.aesDecryptToBytes(encString.encryptionType, data, iv, mac, key);
-        if (decipher == null) {
-            return null;
-        }
-
-        return decipher;
+    const providerKeys = await this.getProviderKeys();
+    if (providerKeys == null || !providerKeys.has(providerId)) {
+      return null;
     }
 
-    async decryptToUtf8(encString: EncString, key?: SymmetricCryptoKey): Promise<string> {
-        return await this.aesDecryptToUtf8(encString.encryptionType, encString.data,
-            encString.iv, encString.mac, key);
-    }
-
-    async decryptFromBytes(encBuf: ArrayBuffer, key: SymmetricCryptoKey): Promise<ArrayBuffer> {
-        if (encBuf == null) {
-            throw new Error('no encBuf.');
-        }
-
-        const encBytes = new Uint8Array(encBuf);
-        const encType = encBytes[0];
-        let ctBytes: Uint8Array = null;
-        let ivBytes: Uint8Array = null;
-        let macBytes: Uint8Array = null;
-
-        switch (encType) {
-            case EncryptionType.AesCbc128_HmacSha256_B64:
-            case EncryptionType.AesCbc256_HmacSha256_B64:
-                if (encBytes.length <= 49) { // 1 + 16 + 32 + ctLength
-                    return null;
-                }
-
-                ivBytes = encBytes.slice(1, 17);
-                macBytes = encBytes.slice(17, 49);
-                ctBytes = encBytes.slice(49);
-                break;
-            case EncryptionType.AesCbc256_B64:
-                if (encBytes.length <= 17) { // 1 + 16 + ctLength
-                    return null;
-                }
-
-                ivBytes = encBytes.slice(1, 17);
-                ctBytes = encBytes.slice(17);
-                break;
-            default:
-                return null;
-        }
+    return providerKeys.get(providerId);
+  }
 
-        return await this.aesDecryptToBytes(encType, ctBytes.buffer, ivBytes.buffer,
-            macBytes != null ? macBytes.buffer : null, key);
-    }
+  async hasKey(): Promise<boolean> {
+    return (
+      (await this.hasKeyInMemory()) ||
+      (await this.hasKeyStored(KeySuffixOptions.Auto)) ||
+      (await this.hasKeyStored(KeySuffixOptions.Biometric))
+    );
+  }
 
-    // EFForg/OpenWireless
-    // ref https://github.com/EFForg/OpenWireless/blob/master/app/js/diceware.js
-    async randomNumber(min: number, max: number): Promise<number> {
-        let rval = 0;
-        const range = max - min + 1;
-        const bitsNeeded = Math.ceil(Math.log2(range));
-        if (bitsNeeded > 53) {
-            throw new Error('We cannot generate numbers larger than 53 bits.');
-        }
+  async hasKeyInMemory(userId?: string): Promise<boolean> {
+    return (await this.stateService.getCryptoMasterKey({ userId: userId })) != null;
+  }
 
-        const bytesNeeded = Math.ceil(bitsNeeded / 8);
-        const mask = Math.pow(2, bitsNeeded) - 1;
-        // 7776 -> (2^13 = 8192) -1 == 8191 or 0x00001111 11111111
+  async hasKeyStored(keySuffix: KeySuffixOptions, userId?: string): Promise<boolean> {
+    const key =
+      keySuffix === KeySuffixOptions.Auto
+        ? await this.stateService.getCryptoMasterKeyAuto({ userId: userId })
+        : await this.stateService.hasCryptoMasterKeyBiometric({ userId: userId });
 
-        // Fill a byte array with N random numbers
-        const byteArray = new Uint8Array(await this.cryptoFunctionService.randomBytes(bytesNeeded));
+    return key != null;
+  }
 
-        let p = (bytesNeeded - 1) * 8;
-        for (let i = 0; i < bytesNeeded; i++) {
-            rval += byteArray[i] * Math.pow(2, p);
-            p -= 8;
-        }
+  async hasEncKey(): Promise<boolean> {
+    return (await this.stateService.getEncryptedCryptoSymmetricKey()) != null;
+  }
 
-        // Use & to apply the mask and reduce the number of recursive lookups
-        // tslint:disable-next-line
-        rval = rval & mask;
-
-        if (rval >= range) {
-            // Integer out of acceptable range
-            return this.randomNumber(min, max);
-        }
-
-        // Return an integer that falls within the range
-        return min + rval;
+  async clearKey(clearSecretStorage: boolean = true, userId?: string): Promise<any> {
+    await this.stateService.setCryptoMasterKey(null, { userId: userId });
+    await this.stateService.setLegacyEtmKey(null, { userId: userId });
+    if (clearSecretStorage) {
+      await this.clearSecretKeyStore(userId);
     }
+  }
 
-    async validateKey(key: SymmetricCryptoKey) {
-        try {
-            const encPrivateKey = await this.storageService.get<string>(Keys.encPrivateKey);
-            const encKey = await this.getEncKey(key);
-            if (encPrivateKey == null || encKey == null) {
-                return false;
-            }
-
-            const privateKey = await this.decryptToBytes(new EncString(encPrivateKey), encKey);
-            await this.cryptoFunctionService.rsaExtractPublicKey(privateKey);
-        } catch (e) {
-            return false;
-        }
-
-        return true;
-    }
-
-    // Helpers
-
-    protected async storeKey(key: SymmetricCryptoKey) {
-        if (await this.shouldStoreKey('auto') || await this.shouldStoreKey('biometric')) {
-            this.secureStorageService.save(Keys.key, key.keyB64);
-        } else {
-            this.secureStorageService.remove(Keys.key);
-        }
+  async clearStoredKey(keySuffix: KeySuffixOptions) {
+    keySuffix === KeySuffixOptions.Auto
+      ? await this.stateService.setCryptoMasterKeyAuto(null)
+      : await this.stateService.setCryptoMasterKeyBiometric(null);
+  }
+
+  async clearKeyHash(userId?: string): Promise<any> {
+    return await this.stateService.setKeyHash(null, { userId: userId });
+  }
+
+  async clearEncKey(memoryOnly?: boolean, userId?: string): Promise<void> {
+    await this.stateService.setDecryptedCryptoSymmetricKey(null, { userId: userId });
+    if (!memoryOnly) {
+      await this.stateService.setEncryptedCryptoSymmetricKey(null, { userId: userId });
+    }
+  }
+
+  async clearKeyPair(memoryOnly?: boolean, userId?: string): Promise<any> {
+    const keysToClear: Promise<void>[] = [
+      this.stateService.setDecryptedPrivateKey(null, { userId: userId }),
+      this.stateService.setPublicKey(null, { userId: userId }),
+    ];
+    if (!memoryOnly) {
+      keysToClear.push(this.stateService.setEncryptedPrivateKey(null, { userId: userId }));
+    }
+    return Promise.all(keysToClear);
+  }
+
+  async clearOrgKeys(memoryOnly?: boolean, userId?: string): Promise<void> {
+    await this.stateService.setDecryptedOrganizationKeys(null, { userId: userId });
+    if (!memoryOnly) {
+      await this.stateService.setEncryptedOrganizationKeys(null, { userId: userId });
+    }
+  }
+
+  async clearProviderKeys(memoryOnly?: boolean, userId?: string): Promise<void> {
+    await this.stateService.setDecryptedProviderKeys(null, { userId: userId });
+    if (!memoryOnly) {
+      await this.stateService.setEncryptedProviderKeys(null, { userId: userId });
+    }
+  }
+
+  async clearPinProtectedKey(userId?: string): Promise<any> {
+    return await this.stateService.setEncryptedPinProtected(null, { userId: userId });
+  }
+
+  async clearKeys(userId?: string): Promise<any> {
+    await this.clearKey(true, userId);
+    await this.clearKeyHash(userId);
+    await this.clearOrgKeys(false, userId);
+    await this.clearProviderKeys(false, userId);
+    await this.clearEncKey(false, userId);
+    await this.clearKeyPair(false, userId);
+    await this.clearPinProtectedKey(userId);
+  }
+
+  async toggleKey(): Promise<any> {
+    const key = await this.getKey();
+
+    await this.setKey(key);
+  }
+
+  async makeKey(
+    password: string,
+    salt: string,
+    kdf: KdfType,
+    kdfIterations: number
+  ): Promise<SymmetricCryptoKey> {
+    let key: ArrayBuffer = null;
+    if (kdf == null || kdf === KdfType.PBKDF2_SHA256) {
+      if (kdfIterations == null) {
+        kdfIterations = 5000;
+      } else if (kdfIterations < 5000) {
+        throw new Error("PBKDF2 iteration minimum is 5000.");
+      }
+      key = await this.cryptoFunctionService.pbkdf2(password, salt, "sha256", kdfIterations);
+    } else {
+      throw new Error("Unknown Kdf.");
+    }
+    return new SymmetricCryptoKey(key);
+  }
+
+  async makeKeyFromPin(
+    pin: string,
+    salt: string,
+    kdf: KdfType,
+    kdfIterations: number,
+    protectedKeyCs: EncString = null
+  ): Promise<SymmetricCryptoKey> {
+    if (protectedKeyCs == null) {
+      const pinProtectedKey = await this.stateService.getEncryptedPinProtected();
+      if (pinProtectedKey == null) {
+        throw new Error("No PIN protected key found.");
+      }
+      protectedKeyCs = new EncString(pinProtectedKey);
+    }
+    const pinKey = await this.makePinKey(pin, salt, kdf, kdfIterations);
+    const decKey = await this.decryptToBytes(protectedKeyCs, pinKey);
+    return new SymmetricCryptoKey(decKey);
+  }
+
+  async makeShareKey(): Promise<[EncString, SymmetricCryptoKey]> {
+    const shareKey = await this.cryptoFunctionService.randomBytes(64);
+    const publicKey = await this.getPublicKey();
+    const encShareKey = await this.rsaEncrypt(shareKey, publicKey);
+    return [encShareKey, new SymmetricCryptoKey(shareKey)];
+  }
+
+  async makeKeyPair(key?: SymmetricCryptoKey): Promise<[string, EncString]> {
+    const keyPair = await this.cryptoFunctionService.rsaGenerateKeyPair(2048);
+    const publicB64 = Utils.fromBufferToB64(keyPair[0]);
+    const privateEnc = await this.encrypt(keyPair[1], key);
+    return [publicB64, privateEnc];
+  }
+
+  async makePinKey(
+    pin: string,
+    salt: string,
+    kdf: KdfType,
+    kdfIterations: number
+  ): Promise<SymmetricCryptoKey> {
+    const pinKey = await this.makeKey(pin, salt, kdf, kdfIterations);
+    return await this.stretchKey(pinKey);
+  }
+
+  async makeSendKey(keyMaterial: ArrayBuffer): Promise<SymmetricCryptoKey> {
+    const sendKey = await this.cryptoFunctionService.hkdf(
+      keyMaterial,
+      "bitwarden-send",
+      "send",
+      64,
+      "sha256"
+    );
+    return new SymmetricCryptoKey(sendKey);
+  }
+
+  async hashPassword(
+    password: string,
+    key: SymmetricCryptoKey,
+    hashPurpose?: HashPurpose
+  ): Promise<string> {
+    if (key == null) {
+      key = await this.getKey();
+    }
+    if (password == null || key == null) {
+      throw new Error("Invalid parameters.");
+    }
+
+    const iterations = hashPurpose === HashPurpose.LocalAuthorization ? 2 : 1;
+    const hash = await this.cryptoFunctionService.pbkdf2(key.key, password, "sha256", iterations);
+    return Utils.fromBufferToB64(hash);
+  }
+
+  async makeEncKey(key: SymmetricCryptoKey): Promise<[SymmetricCryptoKey, EncString]> {
+    const theKey = await this.getKeyForEncryption(key);
+    const encKey = await this.cryptoFunctionService.randomBytes(64);
+    return this.buildEncKey(theKey, encKey);
+  }
+
+  async remakeEncKey(
+    key: SymmetricCryptoKey,
+    encKey?: SymmetricCryptoKey
+  ): Promise<[SymmetricCryptoKey, EncString]> {
+    if (encKey == null) {
+      encKey = await this.getEncKey();
+    }
+    return this.buildEncKey(key, encKey.key);
+  }
+
+  async encrypt(plainValue: string | ArrayBuffer, key?: SymmetricCryptoKey): Promise<EncString> {
+    if (plainValue == null) {
+      return Promise.resolve(null);
+    }
+
+    let plainBuf: ArrayBuffer;
+    if (typeof plainValue === "string") {
+      plainBuf = Utils.fromUtf8ToArray(plainValue).buffer;
+    } else {
+      plainBuf = plainValue;
+    }
+
+    const encObj = await this.aesEncrypt(plainBuf, key);
+    const iv = Utils.fromBufferToB64(encObj.iv);
+    const data = Utils.fromBufferToB64(encObj.data);
+    const mac = encObj.mac != null ? Utils.fromBufferToB64(encObj.mac) : null;
+    return new EncString(encObj.key.encType, data, iv, mac);
+  }
+
+  async encryptToBytes(plainValue: ArrayBuffer, key?: SymmetricCryptoKey): Promise<EncArrayBuffer> {
+    const encValue = await this.aesEncrypt(plainValue, key);
+    let macLen = 0;
+    if (encValue.mac != null) {
+      macLen = encValue.mac.byteLength;
+    }
+
+    const encBytes = new Uint8Array(1 + encValue.iv.byteLength + macLen + encValue.data.byteLength);
+    encBytes.set([encValue.key.encType]);
+    encBytes.set(new Uint8Array(encValue.iv), 1);
+    if (encValue.mac != null) {
+      encBytes.set(new Uint8Array(encValue.mac), 1 + encValue.iv.byteLength);
+    }
+
+    encBytes.set(new Uint8Array(encValue.data), 1 + encValue.iv.byteLength + macLen);
+    return new EncArrayBuffer(encBytes.buffer);
+  }
+
+  async rsaEncrypt(data: ArrayBuffer, publicKey?: ArrayBuffer): Promise<EncString> {
+    if (publicKey == null) {
+      publicKey = await this.getPublicKey();
+    }
+    if (publicKey == null) {
+      throw new Error("Public key unavailable.");
+    }
+
+    const encBytes = await this.cryptoFunctionService.rsaEncrypt(data, publicKey, "sha1");
+    return new EncString(EncryptionType.Rsa2048_OaepSha1_B64, Utils.fromBufferToB64(encBytes));
+  }
+
+  async rsaDecrypt(encValue: string, privateKeyValue?: ArrayBuffer): Promise<ArrayBuffer> {
+    const headerPieces = encValue.split(".");
+    let encType: EncryptionType = null;
+    let encPieces: string[];
+
+    if (headerPieces.length === 1) {
+      encType = EncryptionType.Rsa2048_OaepSha256_B64;
+      encPieces = [headerPieces[0]];
+    } else if (headerPieces.length === 2) {
+      try {
+        encType = parseInt(headerPieces[0], null);
+        encPieces = headerPieces[1].split("|");
+      } catch (e) {
+        this.logService.error(e);
+      }
+    }
+
+    switch (encType) {
+      case EncryptionType.Rsa2048_OaepSha256_B64:
+      case EncryptionType.Rsa2048_OaepSha1_B64:
+      // HmacSha256 types are deprecated
+      case EncryptionType.Rsa2048_OaepSha256_HmacSha256_B64:
+      case EncryptionType.Rsa2048_OaepSha1_HmacSha256_B64:
+        break;
+      default:
+        throw new Error("encType unavailable.");
+    }
+
+    if (encPieces == null || encPieces.length <= 0) {
+      throw new Error("encPieces unavailable.");
+    }
+
+    const data = Utils.fromB64ToArray(encPieces[0]).buffer;
+    const privateKey = privateKeyValue ?? (await this.getPrivateKey());
+    if (privateKey == null) {
+      throw new Error("No private key.");
+    }
+
+    let alg: "sha1" | "sha256" = "sha1";
+    switch (encType) {
+      case EncryptionType.Rsa2048_OaepSha256_B64:
+      case EncryptionType.Rsa2048_OaepSha256_HmacSha256_B64:
+        alg = "sha256";
+        break;
+      case EncryptionType.Rsa2048_OaepSha1_B64:
+      case EncryptionType.Rsa2048_OaepSha1_HmacSha256_B64:
+        break;
+      default:
+        throw new Error("encType unavailable.");
+    }
+
+    return this.cryptoFunctionService.rsaDecrypt(data, privateKey, alg);
+  }
+
+  async decryptToBytes(encString: EncString, key?: SymmetricCryptoKey): Promise<ArrayBuffer> {
+    const iv = Utils.fromB64ToArray(encString.iv).buffer;
+    const data = Utils.fromB64ToArray(encString.data).buffer;
+    const mac = encString.mac ? Utils.fromB64ToArray(encString.mac).buffer : null;
+    const decipher = await this.aesDecryptToBytes(encString.encryptionType, data, iv, mac, key);
+    if (decipher == null) {
+      return null;
+    }
+
+    return decipher;
+  }
+
+  async decryptToUtf8(encString: EncString, key?: SymmetricCryptoKey): Promise<string> {
+    return await this.aesDecryptToUtf8(
+      encString.encryptionType,
+      encString.data,
+      encString.iv,
+      encString.mac,
+      key
+    );
+  }
+
+  async decryptFromBytes(encBuf: ArrayBuffer, key: SymmetricCryptoKey): Promise<ArrayBuffer> {
+    if (encBuf == null) {
+      throw new Error("no encBuf.");
+    }
+
+    const encBytes = new Uint8Array(encBuf);
+    const encType = encBytes[0];
+    let ctBytes: Uint8Array = null;
+    let ivBytes: Uint8Array = null;
+    let macBytes: Uint8Array = null;
+
+    switch (encType) {
+      case EncryptionType.AesCbc128_HmacSha256_B64:
+      case EncryptionType.AesCbc256_HmacSha256_B64:
+        if (encBytes.length <= 49) {
+          // 1 + 16 + 32 + ctLength
+          return null;
+        }
+
+        ivBytes = encBytes.slice(1, 17);
+        macBytes = encBytes.slice(17, 49);
+        ctBytes = encBytes.slice(49);
+        break;
+      case EncryptionType.AesCbc256_B64:
+        if (encBytes.length <= 17) {
+          // 1 + 16 + ctLength
+          return null;
+        }
+
+        ivBytes = encBytes.slice(1, 17);
+        ctBytes = encBytes.slice(17);
+        break;
+      default:
+        return null;
     }
 
-    protected async shouldStoreKey(keySuffix: KeySuffixOptions) {
-        let shouldStoreKey = false;
-        if (keySuffix === 'auto') {
-            const vaultTimeout = await this.storageService.get<number>(ConstantsService.vaultTimeoutKey);
-            shouldStoreKey = vaultTimeout == null;
-        } else if (keySuffix === 'biometric') {
-            const biometricUnlock = await this.storageService.get<boolean>(ConstantsService.biometricUnlockKey);
-            shouldStoreKey = biometricUnlock && this.platformUtilService.supportsSecureStorage();
-        }
-        return shouldStoreKey;
-    }
+    return await this.aesDecryptToBytes(
+      encType,
+      ctBytes.buffer,
+      ivBytes.buffer,
+      macBytes != null ? macBytes.buffer : null,
+      key
+    );
+  }
 
-    protected retrieveKeyFromStorage(keySuffix: KeySuffixOptions) {
-        return this.secureStorageService.get<string>(Keys.key, { keySuffix: keySuffix });
+  // EFForg/OpenWireless
+  // ref https://github.com/EFForg/OpenWireless/blob/master/app/js/diceware.js
+  async randomNumber(min: number, max: number): Promise<number> {
+    let rval = 0;
+    const range = max - min + 1;
+    const bitsNeeded = Math.ceil(Math.log2(range));
+    if (bitsNeeded > 53) {
+      throw new Error("We cannot generate numbers larger than 53 bits.");
     }
 
-    private async aesEncrypt(data: ArrayBuffer, key: SymmetricCryptoKey): Promise<EncryptedObject> {
-        const obj = new EncryptedObject();
-        obj.key = await this.getKeyForEncryption(key);
-        obj.iv = await this.cryptoFunctionService.randomBytes(16);
-        obj.data = await this.cryptoFunctionService.aesEncrypt(data, obj.iv, obj.key.encKey);
+    const bytesNeeded = Math.ceil(bitsNeeded / 8);
+    const mask = Math.pow(2, bitsNeeded) - 1;
+    // 7776 -> (2^13 = 8192) -1 == 8191 or 0x00001111 11111111
 
-        if (obj.key.macKey != null) {
-            const macData = new Uint8Array(obj.iv.byteLength + obj.data.byteLength);
-            macData.set(new Uint8Array(obj.iv), 0);
-            macData.set(new Uint8Array(obj.data), obj.iv.byteLength);
-            obj.mac = await this.cryptoFunctionService.hmac(macData.buffer, obj.key.macKey, 'sha256');
-        }
+    // Fill a byte array with N random numbers
+    const byteArray = new Uint8Array(await this.cryptoFunctionService.randomBytes(bytesNeeded));
 
-        return obj;
+    let p = (bytesNeeded - 1) * 8;
+    for (let i = 0; i < bytesNeeded; i++) {
+      rval += byteArray[i] * Math.pow(2, p);
+      p -= 8;
     }
 
-    private async aesDecryptToUtf8(encType: EncryptionType, data: string, iv: string, mac: string,
-        key: SymmetricCryptoKey): Promise<string> {
-        const keyForEnc = await this.getKeyForEncryption(key);
-        const theKey = this.resolveLegacyKey(encType, keyForEnc);
-
-        if (theKey.macKey != null && mac == null) {
-            this.logService.error('mac required.');
-            return null;
-        }
-
-        if (theKey.encType !== encType) {
-            this.logService.error('encType unavailable.');
-            return null;
-        }
-
-        const fastParams = this.cryptoFunctionService.aesDecryptFastParameters(data, iv, mac, theKey);
-        if (fastParams.macKey != null && fastParams.mac != null) {
-            const computedMac = await this.cryptoFunctionService.hmacFast(fastParams.macData,
-                fastParams.macKey, 'sha256');
-            const macsEqual = await this.cryptoFunctionService.compareFast(fastParams.mac, computedMac);
-            if (!macsEqual) {
-                this.logService.error('mac failed.');
-                return null;
-            }
-        }
+    // Use & to apply the mask and reduce the number of recursive lookups
+    // tslint:disable-next-line
+    rval = rval & mask;
 
-        return this.cryptoFunctionService.aesDecryptFast(fastParams);
+    if (rval >= range) {
+      // Integer out of acceptable range
+      return this.randomNumber(min, max);
     }
 
-    private async aesDecryptToBytes(encType: EncryptionType, data: ArrayBuffer, iv: ArrayBuffer,
-        mac: ArrayBuffer, key: SymmetricCryptoKey): Promise<ArrayBuffer> {
-        const keyForEnc = await this.getKeyForEncryption(key);
-        const theKey = this.resolveLegacyKey(encType, keyForEnc);
+    // Return an integer that falls within the range
+    return min + rval;
+  }
 
-        if (theKey.macKey != null && mac == null) {
-            return null;
-        }
-
-        if (theKey.encType !== encType) {
-            return null;
-        }
-
-        if (theKey.macKey != null && mac != null) {
-            const macData = new Uint8Array(iv.byteLength + data.byteLength);
-            macData.set(new Uint8Array(iv), 0);
-            macData.set(new Uint8Array(data), iv.byteLength);
-            const computedMac = await this.cryptoFunctionService.hmac(macData.buffer, theKey.macKey, 'sha256');
-            if (computedMac === null) {
-                return null;
-            }
-
-            const macsMatch = await this.cryptoFunctionService.compare(mac, computedMac);
-            if (!macsMatch) {
-                this.logService.error('mac failed.');
-                return null;
-            }
-        }
-
-        return await this.cryptoFunctionService.aesDecrypt(data, iv, theKey.encKey);
+  async validateKey(key: SymmetricCryptoKey) {
+    try {
+      const encPrivateKey = await this.stateService.getEncryptedPrivateKey();
+      const encKey = await this.getEncKey(key);
+      if (encPrivateKey == null || encKey == null) {
+        return false;
+      }
+
+      const privateKey = await this.decryptToBytes(new EncString(encPrivateKey), encKey);
+      await this.cryptoFunctionService.rsaExtractPublicKey(privateKey);
+    } catch (e) {
+      return false;
+    }
+
+    return true;
+  }
+
+  // Helpers
+  protected async storeKey(key: SymmetricCryptoKey, userId?: string) {
+    if (await this.shouldStoreKey(KeySuffixOptions.Auto, userId)) {
+      await this.stateService.setCryptoMasterKeyAuto(key.keyB64, { userId: userId });
+    } else if (await this.shouldStoreKey(KeySuffixOptions.Biometric, userId)) {
+      await this.stateService.setCryptoMasterKeyBiometric(key.keyB64, { userId: userId });
+    } else {
+      await this.stateService.setCryptoMasterKeyAuto(null, { userId: userId });
+      await this.stateService.setCryptoMasterKeyBiometric(null, { userId: userId });
+    }
+  }
+
+  protected async shouldStoreKey(keySuffix: KeySuffixOptions, userId?: string) {
+    let shouldStoreKey = false;
+    if (keySuffix === KeySuffixOptions.Auto) {
+      const vaultTimeout = await this.stateService.getVaultTimeout({ userId: userId });
+      shouldStoreKey = vaultTimeout == null;
+    } else if (keySuffix === KeySuffixOptions.Biometric) {
+      const biometricUnlock = await this.stateService.getBiometricUnlock({ userId: userId });
+      shouldStoreKey = biometricUnlock && this.platformUtilService.supportsSecureStorage();
+    }
+    return shouldStoreKey;
+  }
+
+  protected async retrieveKeyFromStorage(keySuffix: KeySuffixOptions, userId?: string) {
+    return keySuffix === KeySuffixOptions.Auto
+      ? await this.stateService.getCryptoMasterKeyAuto({ userId: userId })
+      : await this.stateService.getCryptoMasterKeyBiometric({ userId: userId });
+  }
+
+  private async aesEncrypt(data: ArrayBuffer, key: SymmetricCryptoKey): Promise<EncryptedObject> {
+    const obj = new EncryptedObject();
+    obj.key = await this.getKeyForEncryption(key);
+    obj.iv = await this.cryptoFunctionService.randomBytes(16);
+    obj.data = await this.cryptoFunctionService.aesEncrypt(data, obj.iv, obj.key.encKey);
+
+    if (obj.key.macKey != null) {
+      const macData = new Uint8Array(obj.iv.byteLength + obj.data.byteLength);
+      macData.set(new Uint8Array(obj.iv), 0);
+      macData.set(new Uint8Array(obj.data), obj.iv.byteLength);
+      obj.mac = await this.cryptoFunctionService.hmac(macData.buffer, obj.key.macKey, "sha256");
+    }
+
+    return obj;
+  }
+
+  private async aesDecryptToUtf8(
+    encType: EncryptionType,
+    data: string,
+    iv: string,
+    mac: string,
+    key: SymmetricCryptoKey
+  ): Promise<string> {
+    const keyForEnc = await this.getKeyForEncryption(key);
+    const theKey = await this.resolveLegacyKey(encType, keyForEnc);
+
+    if (theKey.macKey != null && mac == null) {
+      this.logService.error("mac required.");
+      return null;
+    }
+
+    if (theKey.encType !== encType) {
+      this.logService.error("encType unavailable.");
+      return null;
+    }
+
+    const fastParams = this.cryptoFunctionService.aesDecryptFastParameters(data, iv, mac, theKey);
+    if (fastParams.macKey != null && fastParams.mac != null) {
+      const computedMac = await this.cryptoFunctionService.hmacFast(
+        fastParams.macData,
+        fastParams.macKey,
+        "sha256"
+      );
+      const macsEqual = await this.cryptoFunctionService.compareFast(fastParams.mac, computedMac);
+      if (!macsEqual) {
+        this.logService.error("mac failed.");
+        return null;
+      }
     }
 
-    private async getKeyForEncryption(key?: SymmetricCryptoKey): Promise<SymmetricCryptoKey> {
-        if (key != null) {
-            return key;
-        }
+    return this.cryptoFunctionService.aesDecryptFast(fastParams);
+  }
 
-        const encKey = await this.getEncKey();
-        if (encKey != null) {
-            return encKey;
-        }
+  private async aesDecryptToBytes(
+    encType: EncryptionType,
+    data: ArrayBuffer,
+    iv: ArrayBuffer,
+    mac: ArrayBuffer,
+    key: SymmetricCryptoKey
+  ): Promise<ArrayBuffer> {
+    const keyForEnc = await this.getKeyForEncryption(key);
+    const theKey = await this.resolveLegacyKey(encType, keyForEnc);
 
-        return await this.getKey();
+    if (theKey.macKey != null && mac == null) {
+      return null;
     }
 
-    private resolveLegacyKey(encType: EncryptionType, key: SymmetricCryptoKey): SymmetricCryptoKey {
-        if (encType === EncryptionType.AesCbc128_HmacSha256_B64 &&
-            key.encType === EncryptionType.AesCbc256_B64) {
-            // Old encrypt-then-mac scheme, make a new key
-            if (this.legacyEtmKey == null) {
-                this.legacyEtmKey = new SymmetricCryptoKey(key.key, EncryptionType.AesCbc128_HmacSha256_B64);
-            }
-            return this.legacyEtmKey;
-        }
-
-        return key;
-    }
-
-    private async stretchKey(key: SymmetricCryptoKey): Promise<SymmetricCryptoKey> {
-        const newKey = new Uint8Array(64);
-        const encKey = await this.cryptoFunctionService.hkdfExpand(key.key, 'enc', 32, 'sha256');
-        const macKey = await this.cryptoFunctionService.hkdfExpand(key.key, 'mac', 32, 'sha256');
-        newKey.set(new Uint8Array(encKey));
-        newKey.set(new Uint8Array(macKey), 32);
-        return new SymmetricCryptoKey(newKey.buffer);
+    if (theKey.encType !== encType) {
+      return null;
     }
 
-    private async hashPhrase(hash: ArrayBuffer, minimumEntropy: number = 64) {
-        const entropyPerWord = Math.log(EEFLongWordList.length) / Math.log(2);
-        let numWords = Math.ceil(minimumEntropy / entropyPerWord);
-
-        const hashArr = Array.from(new Uint8Array(hash));
-        const entropyAvailable = hashArr.length * 4;
-        if (numWords * entropyPerWord > entropyAvailable) {
-            throw new Error('Output entropy of hash function is too small');
-        }
+    if (theKey.macKey != null && mac != null) {
+      const macData = new Uint8Array(iv.byteLength + data.byteLength);
+      macData.set(new Uint8Array(iv), 0);
+      macData.set(new Uint8Array(data), iv.byteLength);
+      const computedMac = await this.cryptoFunctionService.hmac(
+        macData.buffer,
+        theKey.macKey,
+        "sha256"
+      );
+      if (computedMac === null) {
+        return null;
+      }
 
-        const phrase: string[] = [];
-        let hashNumber = bigInt.fromArray(hashArr, 256);
-        while (numWords--) {
-            const remainder = hashNumber.mod(EEFLongWordList.length);
-            hashNumber = hashNumber.divide(EEFLongWordList.length);
-            phrase.push(EEFLongWordList[remainder as any]);
-        }
-        return phrase;
-    }
-
-    private async buildEncKey(key: SymmetricCryptoKey, encKey: ArrayBuffer)
-        : Promise<[SymmetricCryptoKey, EncString]> {
-        let encKeyEnc: EncString = null;
-        if (key.key.byteLength === 32) {
-            const newKey = await this.stretchKey(key);
-            encKeyEnc = await this.encrypt(encKey, newKey);
-        } else if (key.key.byteLength === 64) {
-            encKeyEnc = await this.encrypt(encKey, key);
-        } else {
-            throw new Error('Invalid key size.');
-        }
-        return [new SymmetricCryptoKey(encKey), encKeyEnc];
-    }
+      const macsMatch = await this.cryptoFunctionService.compare(mac, computedMac);
+      if (!macsMatch) {
+        this.logService.error("mac failed.");
+        return null;
+      }
+    }
+
+    return await this.cryptoFunctionService.aesDecrypt(data, iv, theKey.encKey);
+  }
+
+  private async getKeyForEncryption(key?: SymmetricCryptoKey): Promise<SymmetricCryptoKey> {
+    if (key != null) {
+      return key;
+    }
+
+    const encKey = await this.getEncKey();
+    if (encKey != null) {
+      return encKey;
+    }
+
+    return await this.getKey();
+  }
+
+  private async resolveLegacyKey(
+    encType: EncryptionType,
+    key: SymmetricCryptoKey
+  ): Promise<SymmetricCryptoKey> {
+    if (
+      encType === EncryptionType.AesCbc128_HmacSha256_B64 &&
+      key.encType === EncryptionType.AesCbc256_B64
+    ) {
+      // Old encrypt-then-mac scheme, make a new key
+      let legacyKey = await this.stateService.getLegacyEtmKey();
+      if (legacyKey == null) {
+        legacyKey = new SymmetricCryptoKey(key.key, EncryptionType.AesCbc128_HmacSha256_B64);
+        await this.stateService.setLegacyEtmKey(legacyKey);
+      }
+      return legacyKey;
+    }
+
+    return key;
+  }
+
+  private async stretchKey(key: SymmetricCryptoKey): Promise<SymmetricCryptoKey> {
+    const newKey = new Uint8Array(64);
+    const encKey = await this.cryptoFunctionService.hkdfExpand(key.key, "enc", 32, "sha256");
+    const macKey = await this.cryptoFunctionService.hkdfExpand(key.key, "mac", 32, "sha256");
+    newKey.set(new Uint8Array(encKey));
+    newKey.set(new Uint8Array(macKey), 32);
+    return new SymmetricCryptoKey(newKey.buffer);
+  }
+
+  private async hashPhrase(hash: ArrayBuffer, minimumEntropy: number = 64) {
+    const entropyPerWord = Math.log(EEFLongWordList.length) / Math.log(2);
+    let numWords = Math.ceil(minimumEntropy / entropyPerWord);
+
+    const hashArr = Array.from(new Uint8Array(hash));
+    const entropyAvailable = hashArr.length * 4;
+    if (numWords * entropyPerWord > entropyAvailable) {
+      throw new Error("Output entropy of hash function is too small");
+    }
+
+    const phrase: string[] = [];
+    let hashNumber = bigInt.fromArray(hashArr, 256);
+    while (numWords--) {
+      const remainder = hashNumber.mod(EEFLongWordList.length);
+      hashNumber = hashNumber.divide(EEFLongWordList.length);
+      phrase.push(EEFLongWordList[remainder as any]);
+    }
+    return phrase;
+  }
+
+  private async buildEncKey(
+    key: SymmetricCryptoKey,
+    encKey: ArrayBuffer
+  ): Promise<[SymmetricCryptoKey, EncString]> {
+    let encKeyEnc: EncString = null;
+    if (key.key.byteLength === 32) {
+      const newKey = await this.stretchKey(key);
+      encKeyEnc = await this.encrypt(encKey, newKey);
+    } else if (key.key.byteLength === 64) {
+      encKeyEnc = await this.encrypt(encKey, key);
+    } else {
+      throw new Error("Invalid key size.");
+    }
+    return [new SymmetricCryptoKey(encKey), encKeyEnc];
+  }
+
+  private async clearSecretKeyStore(userId?: string): Promise<void> {
+    await this.stateService.setCryptoMasterKeyAuto(null, { userId: userId });
+    await this.stateService.setCryptoMasterKeyBiometric(null, { userId: userId });
+  }
 }
diff --git a/jslib/common/src/services/environment.service.ts b/jslib/common/src/services/environment.service.ts
index 8d10995a..28caaf47 100644
--- a/jslib/common/src/services/environment.service.ts
+++ b/jslib/common/src/services/environment.service.ts
@@ -1,202 +1,189 @@
-import { Observable, Subject } from 'rxjs';
+import { Observable, Subject } from "rxjs";
 
-import { EnvironmentUrls } from '../models/domain/environmentUrls';
+import { EnvironmentUrls } from "../models/domain/environmentUrls";
 
-import { ConstantsService } from './constants.service';
-
-import { EnvironmentService as EnvironmentServiceAbstraction, Urls } from '../abstractions/environment.service';
-import { StorageService } from '../abstractions/storage.service';
+import {
+  EnvironmentService as EnvironmentServiceAbstraction,
+  Urls,
+} from "../abstractions/environment.service";
+import { StateService } from "../abstractions/state.service";
 
 export class EnvironmentService implements EnvironmentServiceAbstraction {
-
-    private readonly urlsSubject = new Subject<Urls>();
-    urls: Observable<Urls> = this.urlsSubject; // tslint:disable-line
-
-    private baseUrl: string;
-    private webVaultUrl: string;
-    private apiUrl: string;
-    private identityUrl: string;
-    private iconsUrl: string;
-    private notificationsUrl: string;
-    private eventsUrl: string;
-    private keyConnectorUrl: string;
-
-    constructor(private storageService: StorageService) {}
-
-    hasBaseUrl() {
-        return this.baseUrl != null;
+  private readonly urlsSubject = new Subject<Urls>();
+  urls: Observable<Urls> = this.urlsSubject; // tslint:disable-line
+
+  private baseUrl: string;
+  private webVaultUrl: string;
+  private apiUrl: string;
+  private identityUrl: string;
+  private iconsUrl: string;
+  private notificationsUrl: string;
+  private eventsUrl: string;
+  private keyConnectorUrl: string;
+
+  constructor(private stateService: StateService) {
+    this.stateService.activeAccount.subscribe(async (_userId) => {
+      await this.setUrlsFromStorage();
+    });
+  }
+
+  hasBaseUrl() {
+    return this.baseUrl != null;
+  }
+
+  getNotificationsUrl() {
+    if (this.notificationsUrl != null) {
+      return this.notificationsUrl;
     }
 
-    getNotificationsUrl() {
-        if (this.notificationsUrl != null) {
-            return this.notificationsUrl;
-        }
-
-        if (this.baseUrl != null) {
-            return this.baseUrl + '/notifications';
-        }
-
-        return 'https://notifications.bitwarden.com';
+    if (this.baseUrl != null) {
+      return this.baseUrl + "/notifications";
     }
 
-    getWebVaultUrl() {
-        if (this.webVaultUrl != null) {
-            return this.webVaultUrl;
-        }
+    return "https://notifications.bitwarden.com";
+  }
 
-        if (this.baseUrl) {
-            return this.baseUrl;
-        }
-        return 'https://vault.bitwarden.com';
+  getWebVaultUrl() {
+    if (this.webVaultUrl != null) {
+      return this.webVaultUrl;
     }
 
-    getSendUrl() {
-        return this.getWebVaultUrl() === 'https://vault.bitwarden.com'
-            ? 'https://send.bitwarden.com/#'
-            : this.getWebVaultUrl() + '/#/send/';
+    if (this.baseUrl) {
+      return this.baseUrl;
     }
-
-    getIconsUrl() {
-        if (this.iconsUrl != null) {
-            return this.iconsUrl;
-        }
-
-        if (this.baseUrl) {
-            return this.baseUrl + '/icons';
-        }
-
-        return 'https://icons.bitwarden.net';
+    return "https://vault.bitwarden.com";
+  }
+
+  getSendUrl() {
+    return this.getWebVaultUrl() === "https://vault.bitwarden.com"
+      ? "https://send.bitwarden.com/#"
+      : this.getWebVaultUrl() + "/#/send/";
+  }
+
+  getIconsUrl() {
+    if (this.iconsUrl != null) {
+      return this.iconsUrl;
     }
 
-    getApiUrl() {
-        if (this.apiUrl != null) {
-            return this.apiUrl;
-        }
-
-        if (this.baseUrl) {
-            return this.baseUrl + '/api';
-        }
-
-        return 'https://api.bitwarden.com';
+    if (this.baseUrl) {
+      return this.baseUrl + "/icons";
     }
 
-    getIdentityUrl() {
-        if (this.identityUrl != null) {
-            return this.identityUrl;
-        }
+    return "https://icons.bitwarden.net";
+  }
 
-        if (this.baseUrl) {
-            return this.baseUrl + '/identity';
-        }
-
-        return 'https://identity.bitwarden.com';
+  getApiUrl() {
+    if (this.apiUrl != null) {
+      return this.apiUrl;
     }
 
-    getEventsUrl() {
-        if (this.eventsUrl != null) {
-            return this.eventsUrl;
-        }
+    if (this.baseUrl) {
+      return this.baseUrl + "/api";
+    }
 
-        if (this.baseUrl) {
-            return this.baseUrl + '/events';
-        }
+    return "https://api.bitwarden.com";
+  }
 
-        return 'https://events.bitwarden.com';
+  getIdentityUrl() {
+    if (this.identityUrl != null) {
+      return this.identityUrl;
     }
 
-    getKeyConnectorUrl() {
-        return this.keyConnectorUrl;
+    if (this.baseUrl) {
+      return this.baseUrl + "/identity";
     }
 
-    async setUrlsFromStorage(): Promise<void> {
-        const urlsObj: any = await this.storageService.get(ConstantsService.environmentUrlsKey);
-        const urls = urlsObj || {
-            base: null,
-            api: null,
-            identity: null,
-            icons: null,
-            notifications: null,
-            events: null,
-            webVault: null,
-            keyConnector: null,
-        };
-
-        const envUrls = new EnvironmentUrls();
-
-        if (urls.base) {
-            this.baseUrl = envUrls.base = urls.base;
-            return;
-        }
-
-        this.webVaultUrl = urls.webVault;
-        this.apiUrl = envUrls.api = urls.api;
-        this.identityUrl = envUrls.identity = urls.identity;
-        this.iconsUrl = urls.icons;
-        this.notificationsUrl = urls.notifications;
-        this.eventsUrl = envUrls.events = urls.events;
-        this.keyConnectorUrl = urls.keyConnector;
-    }
+    return "https://identity.bitwarden.com";
+  }
 
-    async setUrls(urls: Urls, saveSettings: boolean = true): Promise<any> {
-        urls.base = this.formatUrl(urls.base);
-        urls.webVault = this.formatUrl(urls.webVault);
-        urls.api = this.formatUrl(urls.api);
-        urls.identity = this.formatUrl(urls.identity);
-        urls.icons = this.formatUrl(urls.icons);
-        urls.notifications = this.formatUrl(urls.notifications);
-        urls.events = this.formatUrl(urls.events);
-        urls.keyConnector = this.formatUrl(urls.keyConnector);
-
-        if (saveSettings) {
-            await this.storageService.save(ConstantsService.environmentUrlsKey, {
-                base: urls.base,
-                api: urls.api,
-                identity: urls.identity,
-                webVault: urls.webVault,
-                icons: urls.icons,
-                notifications: urls.notifications,
-                events: urls.events,
-                keyConnector: urls.keyConnector,
-            });
-        }
-
-        this.baseUrl = urls.base;
-        this.webVaultUrl = urls.webVault;
-        this.apiUrl = urls.api;
-        this.identityUrl = urls.identity;
-        this.iconsUrl = urls.icons;
-        this.notificationsUrl = urls.notifications;
-        this.eventsUrl = urls.events;
-        this.keyConnectorUrl = urls.keyConnector;
-
-        this.urlsSubject.next(urls);
-
-        return urls;
+  getEventsUrl() {
+    if (this.eventsUrl != null) {
+      return this.eventsUrl;
     }
 
-    getUrls() {
-        return {
-            base: this.baseUrl,
-            webVault: this.webVaultUrl,
-            api: this.apiUrl,
-            identity: this.identityUrl,
-            icons: this.iconsUrl,
-            notifications: this.notificationsUrl,
-            events: this.eventsUrl,
-            keyConnector: this.keyConnectorUrl,
-        };
+    if (this.baseUrl) {
+      return this.baseUrl + "/events";
     }
 
-    private formatUrl(url: string): string {
-        if (url == null || url === '') {
-            return null;
-        }
-
-        url = url.replace(/\/+$/g, '');
-        if (!url.startsWith('http://') && !url.startsWith('https://')) {
-            url = 'https://' + url;
-        }
+    return "https://events.bitwarden.com";
+  }
+
+  getKeyConnectorUrl() {
+    return this.keyConnectorUrl;
+  }
+
+  async setUrlsFromStorage(): Promise<void> {
+    const urls: any = await this.stateService.getEnvironmentUrls();
+    const envUrls = new EnvironmentUrls();
+
+    this.baseUrl = envUrls.base = urls.base;
+    this.webVaultUrl = urls.webVault;
+    this.apiUrl = envUrls.api = urls.api;
+    this.identityUrl = envUrls.identity = urls.identity;
+    this.iconsUrl = urls.icons;
+    this.notificationsUrl = urls.notifications;
+    this.eventsUrl = envUrls.events = urls.events;
+    this.keyConnectorUrl = urls.keyConnector;
+  }
+
+  async setUrls(urls: Urls): Promise<Urls> {
+    urls.base = this.formatUrl(urls.base);
+    urls.webVault = this.formatUrl(urls.webVault);
+    urls.api = this.formatUrl(urls.api);
+    urls.identity = this.formatUrl(urls.identity);
+    urls.icons = this.formatUrl(urls.icons);
+    urls.notifications = this.formatUrl(urls.notifications);
+    urls.events = this.formatUrl(urls.events);
+    urls.keyConnector = this.formatUrl(urls.keyConnector);
+
+    await this.stateService.setEnvironmentUrls({
+      base: urls.base,
+      api: urls.api,
+      identity: urls.identity,
+      webVault: urls.webVault,
+      icons: urls.icons,
+      notifications: urls.notifications,
+      events: urls.events,
+      keyConnector: urls.keyConnector,
+    });
+
+    this.baseUrl = urls.base;
+    this.webVaultUrl = urls.webVault;
+    this.apiUrl = urls.api;
+    this.identityUrl = urls.identity;
+    this.iconsUrl = urls.icons;
+    this.notificationsUrl = urls.notifications;
+    this.eventsUrl = urls.events;
+    this.keyConnectorUrl = urls.keyConnector;
+
+    this.urlsSubject.next(urls);
+
+    return urls;
+  }
+
+  getUrls() {
+    return {
+      base: this.baseUrl,
+      webVault: this.webVaultUrl,
+      api: this.apiUrl,
+      identity: this.identityUrl,
+      icons: this.iconsUrl,
+      notifications: this.notificationsUrl,
+      events: this.eventsUrl,
+      keyConnector: this.keyConnectorUrl,
+    };
+  }
+
+  private formatUrl(url: string): string {
+    if (url == null || url === "") {
+      return null;
+    }
 
-        return url.trim();
+    url = url.replace(/\/+$/g, "");
+    if (!url.startsWith("http://") && !url.startsWith("https://")) {
+      url = "https://" + url;
     }
+
+    return url.trim();
+  }
 }
diff --git a/jslib/common/src/services/event.service.ts b/jslib/common/src/services/event.service.ts
index 452133fa..ca5bb59f 100644
--- a/jslib/common/src/services/event.service.ts
+++ b/jslib/common/src/services/event.service.ts
@@ -1,96 +1,102 @@
-import { EventType } from '../enums/eventType';
+import { EventType } from "../enums/eventType";
 
-import { EventData } from '../models/data/eventData';
+import { EventData } from "../models/data/eventData";
 
-import { EventRequest } from '../models/request/eventRequest';
+import { EventRequest } from "../models/request/eventRequest";
 
-import { ApiService } from '../abstractions/api.service';
-import { CipherService } from '../abstractions/cipher.service';
-import { EventService as EventServiceAbstraction } from '../abstractions/event.service';
-import { StorageService } from '../abstractions/storage.service';
-import { UserService } from '../abstractions/user.service';
-
-import { LogService } from '../abstractions/log.service';
-import { ConstantsService } from './constants.service';
+import { ApiService } from "../abstractions/api.service";
+import { CipherService } from "../abstractions/cipher.service";
+import { EventService as EventServiceAbstraction } from "../abstractions/event.service";
+import { LogService } from "../abstractions/log.service";
+import { OrganizationService } from "../abstractions/organization.service";
+import { StateService } from "../abstractions/state.service";
 
 export class EventService implements EventServiceAbstraction {
-    private inited = false;
-
-    constructor(private storageService: StorageService, private apiService: ApiService,
-        private userService: UserService, private cipherService: CipherService,
-        private logService: LogService) { }
+  private inited = false;
 
-    init(checkOnInterval: boolean) {
-        if (this.inited) {
-            return;
-        }
+  constructor(
+    private apiService: ApiService,
+    private cipherService: CipherService,
+    private stateService: StateService,
+    private logService: LogService,
+    private organizationService: OrganizationService
+  ) {}
 
-        this.inited = true;
-        if (checkOnInterval) {
-            this.uploadEvents();
-            setInterval(() => this.uploadEvents(), 60 * 1000); // check every 60 seconds
-        }
+  init(checkOnInterval: boolean) {
+    if (this.inited) {
+      return;
     }
 
-    async collect(eventType: EventType, cipherId: string = null, uploadImmediately = false): Promise<any> {
-        const authed = await this.userService.isAuthenticated();
-        if (!authed) {
-            return;
-        }
-        const organizations = await this.userService.getAllOrganizations();
-        if (organizations == null) {
-            return;
-        }
-        const orgIds = new Set<string>(organizations.filter(o => o.useEvents).map(o => o.id));
-        if (orgIds.size === 0) {
-            return;
-        }
-        if (cipherId != null) {
-            const cipher = await this.cipherService.get(cipherId);
-            if (cipher == null || cipher.organizationId == null || !orgIds.has(cipher.organizationId)) {
-                return;
-            }
-        }
-        let eventCollection = await this.storageService.get<EventData[]>(ConstantsService.eventCollectionKey);
-        if (eventCollection == null) {
-            eventCollection = [];
-        }
-        const event = new EventData();
-        event.type = eventType;
-        event.cipherId = cipherId;
-        event.date = new Date().toISOString();
-        eventCollection.push(event);
-        await this.storageService.save(ConstantsService.eventCollectionKey, eventCollection);
-        if (uploadImmediately) {
-            await this.uploadEvents();
-        }
+    this.inited = true;
+    if (checkOnInterval) {
+      this.uploadEvents();
+      setInterval(() => this.uploadEvents(), 60 * 1000); // check every 60 seconds
     }
+  }
 
-    async uploadEvents(): Promise<any> {
-        const authed = await this.userService.isAuthenticated();
-        if (!authed) {
-            return;
-        }
-        const eventCollection = await this.storageService.get<EventData[]>(ConstantsService.eventCollectionKey);
-        if (eventCollection == null || eventCollection.length === 0) {
-            return;
-        }
-        const request = eventCollection.map(e => {
-            const req = new EventRequest();
-            req.type = e.type;
-            req.cipherId = e.cipherId;
-            req.date = e.date;
-            return req;
-        });
-        try {
-            await this.apiService.postEventsCollect(request);
-            this.clearEvents();
-        } catch (e) {
-            this.logService.error(e);
-        }
+  async collect(
+    eventType: EventType,
+    cipherId: string = null,
+    uploadImmediately = false
+  ): Promise<any> {
+    const authed = await this.stateService.getIsAuthenticated();
+    if (!authed) {
+      return;
+    }
+    const organizations = await this.organizationService.getAll();
+    if (organizations == null) {
+      return;
+    }
+    const orgIds = new Set<string>(organizations.filter((o) => o.useEvents).map((o) => o.id));
+    if (orgIds.size === 0) {
+      return;
+    }
+    if (cipherId != null) {
+      const cipher = await this.cipherService.get(cipherId);
+      if (cipher == null || cipher.organizationId == null || !orgIds.has(cipher.organizationId)) {
+        return;
+      }
     }
+    let eventCollection = await this.stateService.getEventCollection();
+    if (eventCollection == null) {
+      eventCollection = [];
+    }
+    const event = new EventData();
+    event.type = eventType;
+    event.cipherId = cipherId;
+    event.date = new Date().toISOString();
+    eventCollection.push(event);
+    await this.stateService.setEventCollection(eventCollection);
+    if (uploadImmediately) {
+      await this.uploadEvents();
+    }
+  }
 
-    async clearEvents(): Promise<any> {
-        await this.storageService.remove(ConstantsService.eventCollectionKey);
+  async uploadEvents(userId?: string): Promise<any> {
+    const authed = await this.stateService.getIsAuthenticated({ userId: userId });
+    if (!authed) {
+      return;
+    }
+    const eventCollection = await this.stateService.getEventCollection({ userId: userId });
+    if (eventCollection == null || eventCollection.length === 0) {
+      return;
     }
+    const request = eventCollection.map((e) => {
+      const req = new EventRequest();
+      req.type = e.type;
+      req.cipherId = e.cipherId;
+      req.date = e.date;
+      return req;
+    });
+    try {
+      await this.apiService.postEventsCollect(request);
+      this.clearEvents(userId);
+    } catch (e) {
+      this.logService.error(e);
+    }
+  }
+
+  async clearEvents(userId?: string): Promise<any> {
+    await this.stateService.setEventCollection(null, { userId: userId });
+  }
 }
diff --git a/jslib/common/src/services/export.service.ts b/jslib/common/src/services/export.service.ts
index 7afb6988..31b1b0b6 100644
--- a/jslib/common/src/services/export.service.ts
+++ b/jslib/common/src/services/export.service.ts
@@ -1,369 +1,410 @@
-import * as papa from 'papaparse';
+import * as papa from "papaparse";
 
-import { CipherType } from '../enums/cipherType';
+import { CipherType } from "../enums/cipherType";
 
-import { ApiService } from '../abstractions/api.service';
-import { CipherService } from '../abstractions/cipher.service';
-import { CryptoService } from '../abstractions/crypto.service';
-import { ExportService as ExportServiceAbstraction } from '../abstractions/export.service';
-import { FolderService } from '../abstractions/folder.service';
+import { ApiService } from "../abstractions/api.service";
+import { CipherService } from "../abstractions/cipher.service";
+import { CryptoService } from "../abstractions/crypto.service";
+import { ExportService as ExportServiceAbstraction } from "../abstractions/export.service";
+import { FolderService } from "../abstractions/folder.service";
 
-import { CipherView } from '../models/view/cipherView';
-import { CollectionView } from '../models/view/collectionView';
-import { FolderView } from '../models/view/folderView';
+import { CipherView } from "../models/view/cipherView";
+import { CollectionView } from "../models/view/collectionView";
+import { FolderView } from "../models/view/folderView";
 
-import { Cipher } from '../models/domain/cipher';
-import { Collection } from '../models/domain/collection';
-import { Folder } from '../models/domain/folder';
+import { Cipher } from "../models/domain/cipher";
+import { Collection } from "../models/domain/collection";
+import { Folder } from "../models/domain/folder";
 
-import { CipherData } from '../models/data/cipherData';
-import { CollectionData } from '../models/data/collectionData';
-import { CollectionDetailsResponse } from '../models/response/collectionResponse';
+import { CipherData } from "../models/data/cipherData";
+import { CollectionData } from "../models/data/collectionData";
+import { CollectionDetailsResponse } from "../models/response/collectionResponse";
 
-import { CipherWithIds as CipherExport } from '../models/export/cipherWithIds';
-import { CollectionWithId as CollectionExport } from '../models/export/collectionWithId';
-import { Event } from '../models/export/event';
-import { FolderWithId as FolderExport } from '../models/export/folderWithId';
-import { EventView } from '../models/view/eventView';
+import { CipherWithIds as CipherExport } from "../models/export/cipherWithIds";
+import { CollectionWithId as CollectionExport } from "../models/export/collectionWithId";
+import { Event } from "../models/export/event";
+import { FolderWithId as FolderExport } from "../models/export/folderWithId";
+import { EventView } from "../models/view/eventView";
 
-import { Utils } from '../misc/utils';
+import { Utils } from "../misc/utils";
 
 export class ExportService implements ExportServiceAbstraction {
-    constructor(private folderService: FolderService, private cipherService: CipherService,
-        private apiService: ApiService, private cryptoService: CryptoService) { }
-
-    async getExport(format: 'csv' | 'json' | 'encrypted_json' = 'csv'): Promise<string> {
-        if (format === 'encrypted_json') {
-            return this.getEncryptedExport();
-        } else {
-            return this.getDecryptedExport(format);
-        }
+  constructor(
+    private folderService: FolderService,
+    private cipherService: CipherService,
+    private apiService: ApiService,
+    private cryptoService: CryptoService
+  ) {}
+
+  async getExport(format: "csv" | "json" | "encrypted_json" = "csv"): Promise<string> {
+    if (format === "encrypted_json") {
+      return this.getEncryptedExport();
+    } else {
+      return this.getDecryptedExport(format);
     }
-
-    async getOrganizationExport(organizationId: string,
-        format: 'csv' | 'json' | 'encrypted_json' = 'csv'): Promise<string> {
-        if (format === 'encrypted_json') {
-            return this.getOrganizationEncryptedExport(organizationId);
-        } else {
-            return this.getOrganizationDecryptedExport(organizationId, format);
-        }
+  }
+
+  async getOrganizationExport(
+    organizationId: string,
+    format: "csv" | "json" | "encrypted_json" = "csv"
+  ): Promise<string> {
+    if (format === "encrypted_json") {
+      return this.getOrganizationEncryptedExport(organizationId);
+    } else {
+      return this.getOrganizationDecryptedExport(organizationId, format);
     }
+  }
+
+  async getEventExport(events: EventView[]): Promise<string> {
+    return papa.unparse(events.map((e) => new Event(e)));
+  }
+
+  getFileName(prefix: string = null, extension: string = "csv"): string {
+    const now = new Date();
+    const dateString =
+      now.getFullYear() +
+      "" +
+      this.padNumber(now.getMonth() + 1, 2) +
+      "" +
+      this.padNumber(now.getDate(), 2) +
+      this.padNumber(now.getHours(), 2) +
+      "" +
+      this.padNumber(now.getMinutes(), 2) +
+      this.padNumber(now.getSeconds(), 2);
+
+    return "bitwarden" + (prefix ? "_" + prefix : "") + "_export_" + dateString + "." + extension;
+  }
+
+  private async getDecryptedExport(format: "json" | "csv"): Promise<string> {
+    let decFolders: FolderView[] = [];
+    let decCiphers: CipherView[] = [];
+    const promises = [];
+
+    promises.push(
+      this.folderService.getAllDecrypted().then((folders) => {
+        decFolders = folders;
+      })
+    );
+
+    promises.push(
+      this.cipherService.getAllDecrypted().then((ciphers) => {
+        decCiphers = ciphers.filter((f) => f.deletedDate == null);
+      })
+    );
+
+    await Promise.all(promises);
+
+    if (format === "csv") {
+      const foldersMap = new Map<string, FolderView>();
+      decFolders.forEach((f) => {
+        if (f.id != null) {
+          foldersMap.set(f.id, f);
+        }
+      });
 
-    async getEventExport(events: EventView[]): Promise<string> {
-        return papa.unparse(events.map(e => new Event(e)));
-    }
+      const exportCiphers: any[] = [];
+      decCiphers.forEach((c) => {
+        // only export logins and secure notes
+        if (c.type !== CipherType.Login && c.type !== CipherType.SecureNote) {
+          return;
+        }
+        if (c.organizationId != null) {
+          return;
+        }
 
-    getFileName(prefix: string = null, extension: string = 'csv'): string {
-        const now = new Date();
-        const dateString =
-            now.getFullYear() + '' + this.padNumber(now.getMonth() + 1, 2) + '' + this.padNumber(now.getDate(), 2) +
-            this.padNumber(now.getHours(), 2) + '' + this.padNumber(now.getMinutes(), 2) +
-            this.padNumber(now.getSeconds(), 2);
+        const cipher: any = {};
+        cipher.folder =
+          c.folderId != null && foldersMap.has(c.folderId) ? foldersMap.get(c.folderId).name : null;
+        cipher.favorite = c.favorite ? 1 : null;
+        this.buildCommonCipher(cipher, c);
+        exportCiphers.push(cipher);
+      });
+
+      return papa.unparse(exportCiphers);
+    } else {
+      const jsonDoc: any = {
+        encrypted: false,
+        folders: [],
+        items: [],
+      };
+
+      decFolders.forEach((f) => {
+        if (f.id == null) {
+          return;
+        }
+        const folder = new FolderExport();
+        folder.build(f);
+        jsonDoc.folders.push(folder);
+      });
+
+      decCiphers.forEach((c) => {
+        if (c.organizationId != null) {
+          return;
+        }
+        const cipher = new CipherExport();
+        cipher.build(c);
+        cipher.collectionIds = null;
+        jsonDoc.items.push(cipher);
+      });
 
-        return 'bitwarden' + (prefix ? ('_' + prefix) : '') + '_export_' + dateString + '.' + extension;
+      return JSON.stringify(jsonDoc, null, "  ");
     }
-
-    private async getDecryptedExport(format: 'json' | 'csv'): Promise<string> {
-        let decFolders: FolderView[] = [];
-        let decCiphers: CipherView[] = [];
-        const promises = [];
-
-        promises.push(this.folderService.getAllDecrypted().then(folders => {
-            decFolders = folders;
-        }));
-
-        promises.push(this.cipherService.getAllDecrypted().then(ciphers => {
-            decCiphers = ciphers.filter(f => f.deletedDate == null);
-        }));
-
-        await Promise.all(promises);
-
-        if (format === 'csv') {
-            const foldersMap = new Map<string, FolderView>();
-            decFolders.forEach(f => {
-                if (f.id != null) {
-                    foldersMap.set(f.id, f);
-                }
-            });
-
-            const exportCiphers: any[] = [];
-            decCiphers.forEach(c => {
-                // only export logins and secure notes
-                if (c.type !== CipherType.Login && c.type !== CipherType.SecureNote) {
-                    return;
-                }
-                if (c.organizationId != null) {
-                    return;
-                }
-
-                const cipher: any = {};
-                cipher.folder = c.folderId != null && foldersMap.has(c.folderId) ?
-                    foldersMap.get(c.folderId).name : null;
-                cipher.favorite = c.favorite ? 1 : null;
-                this.buildCommonCipher(cipher, c);
-                exportCiphers.push(cipher);
-            });
-
-            return papa.unparse(exportCiphers);
-        } else {
-            const jsonDoc: any = {
-                encrypted: false,
-                folders: [],
-                items: [],
-            };
-
-            decFolders.forEach(f => {
-                if (f.id == null) {
-                    return;
-                }
-                const folder = new FolderExport();
-                folder.build(f);
-                jsonDoc.folders.push(folder);
-            });
-
-            decCiphers.forEach(c => {
-                if (c.organizationId != null) {
-                    return;
-                }
-                const cipher = new CipherExport();
-                cipher.build(c);
-                cipher.collectionIds = null;
-                jsonDoc.items.push(cipher);
+  }
+
+  private async getEncryptedExport(): Promise<string> {
+    let folders: Folder[] = [];
+    let ciphers: Cipher[] = [];
+    const promises = [];
+
+    promises.push(
+      this.folderService.getAll().then((f) => {
+        folders = f;
+      })
+    );
+
+    promises.push(
+      this.cipherService.getAll().then((c) => {
+        ciphers = c.filter((f) => f.deletedDate == null);
+      })
+    );
+
+    await Promise.all(promises);
+
+    const encKeyValidation = await this.cryptoService.encrypt(Utils.newGuid());
+
+    const jsonDoc: any = {
+      encrypted: true,
+      encKeyValidation_DO_NOT_EDIT: encKeyValidation.encryptedString,
+      folders: [],
+      items: [],
+    };
+
+    folders.forEach((f) => {
+      if (f.id == null) {
+        return;
+      }
+      const folder = new FolderExport();
+      folder.build(f);
+      jsonDoc.folders.push(folder);
+    });
+
+    ciphers.forEach((c) => {
+      if (c.organizationId != null) {
+        return;
+      }
+      const cipher = new CipherExport();
+      cipher.build(c);
+      cipher.collectionIds = null;
+      jsonDoc.items.push(cipher);
+    });
+
+    return JSON.stringify(jsonDoc, null, "  ");
+  }
+
+  private async getOrganizationDecryptedExport(
+    organizationId: string,
+    format: "json" | "csv"
+  ): Promise<string> {
+    const decCollections: CollectionView[] = [];
+    const decCiphers: CipherView[] = [];
+    const promises = [];
+
+    promises.push(
+      this.apiService.getCollections(organizationId).then((collections) => {
+        const collectionPromises: any = [];
+        if (collections != null && collections.data != null && collections.data.length > 0) {
+          collections.data.forEach((c) => {
+            const collection = new Collection(new CollectionData(c as CollectionDetailsResponse));
+            collectionPromises.push(
+              collection.decrypt().then((decCol) => {
+                decCollections.push(decCol);
+              })
+            );
+          });
+        }
+        return Promise.all(collectionPromises);
+      })
+    );
+
+    promises.push(
+      this.apiService.getCiphersOrganization(organizationId).then((ciphers) => {
+        const cipherPromises: any = [];
+        if (ciphers != null && ciphers.data != null && ciphers.data.length > 0) {
+          ciphers.data
+            .filter((c) => c.deletedDate === null)
+            .forEach((c) => {
+              const cipher = new Cipher(new CipherData(c));
+              cipherPromises.push(
+                cipher.decrypt().then((decCipher) => {
+                  decCiphers.push(decCipher);
+                })
+              );
             });
-
-            return JSON.stringify(jsonDoc, null, '  ');
         }
-    }
+        return Promise.all(cipherPromises);
+      })
+    );
+
+    await Promise.all(promises);
+
+    if (format === "csv") {
+      const collectionsMap = new Map<string, CollectionView>();
+      decCollections.forEach((c) => {
+        collectionsMap.set(c.id, c);
+      });
+
+      const exportCiphers: any[] = [];
+      decCiphers.forEach((c) => {
+        // only export logins and secure notes
+        if (c.type !== CipherType.Login && c.type !== CipherType.SecureNote) {
+          return;
+        }
 
-    private async getEncryptedExport(): Promise<string> {
-        let folders: Folder[] = [];
-        let ciphers: Cipher[] = [];
-        const promises = [];
-
-        promises.push(this.folderService.getAll().then(f => {
-            folders = f;
-        }));
-
-        promises.push(this.cipherService.getAll().then(c => {
-            ciphers = c.filter(f => f.deletedDate == null);
-        }));
-
-        await Promise.all(promises);
-
-        const encKeyValidation = await this.cryptoService.encrypt(Utils.newGuid());
-
-        const jsonDoc: any = {
-            encrypted: true,
-            encKeyValidation_DO_NOT_EDIT: encKeyValidation.encryptedString,
-            folders: [],
-            items: [],
-        };
-
-        folders.forEach(f => {
-            if (f.id == null) {
-                return;
-            }
-            const folder = new FolderExport();
-            folder.build(f);
-            jsonDoc.folders.push(folder);
-        });
-
-        ciphers.forEach(c => {
-            if (c.organizationId != null) {
-                return;
-            }
-            const cipher = new CipherExport();
-            cipher.build(c);
-            cipher.collectionIds = null;
-            jsonDoc.items.push(cipher);
-        });
-
-        return JSON.stringify(jsonDoc, null, '  ');
+        const cipher: any = {};
+        cipher.collections = [];
+        if (c.collectionIds != null) {
+          cipher.collections = c.collectionIds
+            .filter((id) => collectionsMap.has(id))
+            .map((id) => collectionsMap.get(id).name);
+        }
+        this.buildCommonCipher(cipher, c);
+        exportCiphers.push(cipher);
+      });
+
+      return papa.unparse(exportCiphers);
+    } else {
+      const jsonDoc: any = {
+        encrypted: false,
+        collections: [],
+        items: [],
+      };
+
+      decCollections.forEach((c) => {
+        const collection = new CollectionExport();
+        collection.build(c);
+        jsonDoc.collections.push(collection);
+      });
+
+      decCiphers.forEach((c) => {
+        const cipher = new CipherExport();
+        cipher.build(c);
+        jsonDoc.items.push(cipher);
+      });
+      return JSON.stringify(jsonDoc, null, "  ");
     }
-
-    private async getOrganizationDecryptedExport(organizationId: string, format: 'json' | 'csv'): Promise<string> {
-        const decCollections: CollectionView[] = [];
-        const decCiphers: CipherView[] = [];
-        const promises = [];
-
-        promises.push(this.apiService.getCollections(organizationId).then(collections => {
-            const collectionPromises: any = [];
-            if (collections != null && collections.data != null && collections.data.length > 0) {
-                collections.data.forEach(c => {
-                    const collection = new Collection(new CollectionData(c as CollectionDetailsResponse));
-                    collectionPromises.push(collection.decrypt().then(decCol => {
-                        decCollections.push(decCol);
-                    }));
-                });
-            }
-            return Promise.all(collectionPromises);
-        }));
-
-        promises.push(this.apiService.getCiphersOrganization(organizationId).then(ciphers => {
-            const cipherPromises: any = [];
-            if (ciphers != null && ciphers.data != null && ciphers.data.length > 0) {
-                ciphers.data.filter(c => c.deletedDate === null).forEach(c => {
-                    const cipher = new Cipher(new CipherData(c));
-                    cipherPromises.push(cipher.decrypt().then(decCipher => {
-                        decCiphers.push(decCipher);
-                    }));
-                });
-            }
-            return Promise.all(cipherPromises);
-        }));
-
-        await Promise.all(promises);
-
-        if (format === 'csv') {
-            const collectionsMap = new Map<string, CollectionView>();
-            decCollections.forEach(c => {
-                collectionsMap.set(c.id, c);
-            });
-
-            const exportCiphers: any[] = [];
-            decCiphers.forEach(c => {
-                // only export logins and secure notes
-                if (c.type !== CipherType.Login && c.type !== CipherType.SecureNote) {
-                    return;
-                }
-
-                const cipher: any = {};
-                cipher.collections = [];
-                if (c.collectionIds != null) {
-                    cipher.collections = c.collectionIds.filter(id => collectionsMap.has(id))
-                        .map(id => collectionsMap.get(id).name);
-                }
-                this.buildCommonCipher(cipher, c);
-                exportCiphers.push(cipher);
+  }
+
+  private async getOrganizationEncryptedExport(organizationId: string): Promise<string> {
+    const collections: Collection[] = [];
+    const ciphers: Cipher[] = [];
+    const promises = [];
+
+    promises.push(
+      this.apiService.getCollections(organizationId).then((c) => {
+        const collectionPromises: any = [];
+        if (c != null && c.data != null && c.data.length > 0) {
+          c.data.forEach((r) => {
+            const collection = new Collection(new CollectionData(r as CollectionDetailsResponse));
+            collections.push(collection);
+          });
+        }
+        return Promise.all(collectionPromises);
+      })
+    );
+
+    promises.push(
+      this.apiService.getCiphersOrganization(organizationId).then((c) => {
+        const cipherPromises: any = [];
+        if (c != null && c.data != null && c.data.length > 0) {
+          c.data
+            .filter((item) => item.deletedDate === null)
+            .forEach((item) => {
+              const cipher = new Cipher(new CipherData(item));
+              ciphers.push(cipher);
             });
-
-            return papa.unparse(exportCiphers);
+        }
+        return Promise.all(cipherPromises);
+      })
+    );
+
+    await Promise.all(promises);
+
+    const orgKey = await this.cryptoService.getOrgKey(organizationId);
+    const encKeyValidation = await this.cryptoService.encrypt(Utils.newGuid(), orgKey);
+
+    const jsonDoc: any = {
+      encrypted: true,
+      encKeyValidation_DO_NOT_EDIT: encKeyValidation.encryptedString,
+      collections: [],
+      items: [],
+    };
+
+    collections.forEach((c) => {
+      const collection = new CollectionExport();
+      collection.build(c);
+      jsonDoc.collections.push(collection);
+    });
+
+    ciphers.forEach((c) => {
+      const cipher = new CipherExport();
+      cipher.build(c);
+      jsonDoc.items.push(cipher);
+    });
+    return JSON.stringify(jsonDoc, null, "  ");
+  }
+
+  private padNumber(num: number, width: number, padCharacter: string = "0"): string {
+    const numString = num.toString();
+    return numString.length >= width
+      ? numString
+      : new Array(width - numString.length + 1).join(padCharacter) + numString;
+  }
+
+  private buildCommonCipher(cipher: any, c: CipherView) {
+    cipher.type = null;
+    cipher.name = c.name;
+    cipher.notes = c.notes;
+    cipher.fields = null;
+    cipher.reprompt = c.reprompt;
+    // Login props
+    cipher.login_uri = null;
+    cipher.login_username = null;
+    cipher.login_password = null;
+    cipher.login_totp = null;
+
+    if (c.fields) {
+      c.fields.forEach((f: any) => {
+        if (!cipher.fields) {
+          cipher.fields = "";
         } else {
-            const jsonDoc: any = {
-                encrypted: false,
-                collections: [],
-                items: [],
-            };
-
-            decCollections.forEach(c => {
-                const collection = new CollectionExport();
-                collection.build(c);
-                jsonDoc.collections.push(collection);
-            });
-
-            decCiphers.forEach(c => {
-                const cipher = new CipherExport();
-                cipher.build(c);
-                jsonDoc.items.push(cipher);
-            });
-            return JSON.stringify(jsonDoc, null, '  ');
+          cipher.fields += "\n";
         }
-    }
-
-    private async getOrganizationEncryptedExport(organizationId: string): Promise<string> {
-        const collections: Collection[] = [];
-        const ciphers: Cipher[] = [];
-        const promises = [];
-
-        promises.push(this.apiService.getCollections(organizationId).then(c => {
-            const collectionPromises: any = [];
-            if (c != null && c.data != null && c.data.length > 0) {
-                c.data.forEach(r => {
-                    const collection = new Collection(new CollectionData(r as CollectionDetailsResponse));
-                    collections.push(collection);
-                });
-            }
-            return Promise.all(collectionPromises);
-        }));
-
-        promises.push(this.apiService.getCiphersOrganization(organizationId).then(c => {
-            const cipherPromises: any = [];
-            if (c != null && c.data != null && c.data.length > 0) {
-                c.data.filter(item => item.deletedDate === null).forEach(item => {
-                    const cipher = new Cipher(new CipherData(item));
-                    ciphers.push(cipher);
-                });
-            }
-            return Promise.all(cipherPromises);
-        }));
-
-        await Promise.all(promises);
-
-        const orgKey = await this.cryptoService.getOrgKey(organizationId);
-        const encKeyValidation = await this.cryptoService.encrypt(Utils.newGuid(), orgKey);
-
-        const jsonDoc: any = {
-            encrypted: true,
-            encKeyValidation_DO_NOT_EDIT: encKeyValidation.encryptedString,
-            collections: [],
-            items: [],
-        };
-
-        collections.forEach(c => {
-            const collection = new CollectionExport();
-            collection.build(c);
-            jsonDoc.collections.push(collection);
-        });
-
-        ciphers.forEach(c => {
-            const cipher = new CipherExport();
-            cipher.build(c);
-            jsonDoc.items.push(cipher);
-        });
-        return JSON.stringify(jsonDoc, null, '  ');
-    }
 
-    private padNumber(num: number, width: number, padCharacter: string = '0'): string {
-        const numString = num.toString();
-        return numString.length >= width ? numString :
-            new Array(width - numString.length + 1).join(padCharacter) + numString;
+        cipher.fields += (f.name || "") + ": " + f.value;
+      });
     }
 
-    private buildCommonCipher(cipher: any, c: CipherView) {
-        cipher.type = null;
-        cipher.name = c.name;
-        cipher.notes = c.notes;
-        cipher.fields = null;
-        cipher.reprompt = c.reprompt;
-        // Login props
-        cipher.login_uri = null;
-        cipher.login_username = null;
-        cipher.login_password = null;
-        cipher.login_totp = null;
-
-        if (c.fields) {
-            c.fields.forEach((f: any) => {
-                if (!cipher.fields) {
-                    cipher.fields = '';
-                } else {
-                    cipher.fields += '\n';
-                }
-
-                cipher.fields += ((f.name || '') + ': ' + f.value);
-            });
-        }
-
-        switch (c.type) {
-            case CipherType.Login:
-                cipher.type = 'login';
-                cipher.login_username = c.login.username;
-                cipher.login_password = c.login.password;
-                cipher.login_totp = c.login.totp;
-
-                if (c.login.uris) {
-                    cipher.login_uri = [];
-                    c.login.uris.forEach(u => {
-                        cipher.login_uri.push(u.uri);
-                    });
-                }
-                break;
-            case CipherType.SecureNote:
-                cipher.type = 'note';
-                break;
-            default:
-                return;
+    switch (c.type) {
+      case CipherType.Login:
+        cipher.type = "login";
+        cipher.login_username = c.login.username;
+        cipher.login_password = c.login.password;
+        cipher.login_totp = c.login.totp;
+
+        if (c.login.uris) {
+          cipher.login_uri = [];
+          c.login.uris.forEach((u) => {
+            cipher.login_uri.push(u.uri);
+          });
         }
-
-        return cipher;
+        break;
+      case CipherType.SecureNote:
+        cipher.type = "note";
+        break;
+      default:
+        return;
     }
+
+    return cipher;
+  }
 }
diff --git a/jslib/common/src/services/fileUpload.service.ts b/jslib/common/src/services/fileUpload.service.ts
index 1dedc289..516011dd 100644
--- a/jslib/common/src/services/fileUpload.service.ts
+++ b/jslib/common/src/services/fileUpload.service.ts
@@ -1,79 +1,109 @@
-import { ApiService } from '../abstractions/api.service';
-import { FileUploadService as FileUploadServiceAbstraction } from '../abstractions/fileUpload.service';
-import { LogService } from '../abstractions/log.service';
+import { ApiService } from "../abstractions/api.service";
+import { FileUploadService as FileUploadServiceAbstraction } from "../abstractions/fileUpload.service";
+import { LogService } from "../abstractions/log.service";
 
-import { FileUploadType } from '../enums/fileUploadType';
+import { FileUploadType } from "../enums/fileUploadType";
 
-import { EncArrayBuffer } from '../models/domain/encArrayBuffer';
-import { EncString } from '../models/domain/encString';
+import { EncArrayBuffer } from "../models/domain/encArrayBuffer";
+import { EncString } from "../models/domain/encString";
 
-import { AttachmentUploadDataResponse } from '../models/response/attachmentUploadDataResponse';
-import { SendFileUploadDataResponse } from '../models/response/sendFileUploadDataResponse';
+import { AttachmentUploadDataResponse } from "../models/response/attachmentUploadDataResponse";
+import { SendFileUploadDataResponse } from "../models/response/sendFileUploadDataResponse";
 
-import { AzureFileUploadService } from './azureFileUpload.service';
-import { BitwardenFileUploadService } from './bitwardenFileUpload.service';
+import { AzureFileUploadService } from "./azureFileUpload.service";
+import { BitwardenFileUploadService } from "./bitwardenFileUpload.service";
 
 export class FileUploadService implements FileUploadServiceAbstraction {
-    private azureFileUploadService: AzureFileUploadService;
-    private bitwardenFileUploadService: BitwardenFileUploadService;
+  private azureFileUploadService: AzureFileUploadService;
+  private bitwardenFileUploadService: BitwardenFileUploadService;
 
-    constructor(private logService: LogService, private apiService: ApiService) {
-        this.azureFileUploadService = new AzureFileUploadService(logService);
-        this.bitwardenFileUploadService = new BitwardenFileUploadService(apiService);
-    }
+  constructor(private logService: LogService, private apiService: ApiService) {
+    this.azureFileUploadService = new AzureFileUploadService(logService);
+    this.bitwardenFileUploadService = new BitwardenFileUploadService(apiService);
+  }
 
-    async uploadSendFile(uploadData: SendFileUploadDataResponse, fileName: EncString, encryptedFileData: EncArrayBuffer) {
-        try {
-            switch (uploadData.fileUploadType) {
-                case FileUploadType.Direct:
-                    await this.bitwardenFileUploadService.upload(fileName.encryptedString, encryptedFileData,
-                        fd => this.apiService.postSendFile(uploadData.sendResponse.id, uploadData.sendResponse.file.id, fd));
-                    break;
-                case FileUploadType.Azure:
-                    const renewalCallback = async () => {
-                        const renewalResponse = await this.apiService.renewSendFileUploadUrl(uploadData.sendResponse.id,
-                            uploadData.sendResponse.file.id);
-                        return renewalResponse.url;
-                    };
-                    await this.azureFileUploadService.upload(uploadData.url, encryptedFileData,
-                        renewalCallback);
-                    break;
-                default:
-                    throw new Error('Unknown file upload type');
-            }
-        } catch (e) {
-            await this.apiService.deleteSend(uploadData.sendResponse.id);
-            throw e;
-        }
+  async uploadSendFile(
+    uploadData: SendFileUploadDataResponse,
+    fileName: EncString,
+    encryptedFileData: EncArrayBuffer
+  ) {
+    try {
+      switch (uploadData.fileUploadType) {
+        case FileUploadType.Direct:
+          await this.bitwardenFileUploadService.upload(
+            fileName.encryptedString,
+            encryptedFileData,
+            (fd) =>
+              this.apiService.postSendFile(
+                uploadData.sendResponse.id,
+                uploadData.sendResponse.file.id,
+                fd
+              )
+          );
+          break;
+        case FileUploadType.Azure:
+          const renewalCallback = async () => {
+            const renewalResponse = await this.apiService.renewSendFileUploadUrl(
+              uploadData.sendResponse.id,
+              uploadData.sendResponse.file.id
+            );
+            return renewalResponse.url;
+          };
+          await this.azureFileUploadService.upload(
+            uploadData.url,
+            encryptedFileData,
+            renewalCallback
+          );
+          break;
+        default:
+          throw new Error("Unknown file upload type");
+      }
+    } catch (e) {
+      await this.apiService.deleteSend(uploadData.sendResponse.id);
+      throw e;
     }
+  }
 
-    async uploadCipherAttachment(admin: boolean, uploadData: AttachmentUploadDataResponse, encryptedFileName: EncString,
-        encryptedFileData: EncArrayBuffer) {
-        const response = admin ? uploadData.cipherMiniResponse : uploadData.cipherResponse;
-        try {
-            switch (uploadData.fileUploadType) {
-                case FileUploadType.Direct:
-                    await this.bitwardenFileUploadService.upload(encryptedFileName.encryptedString, encryptedFileData,
-                        fd => this.apiService.postAttachmentFile(response.id, uploadData.attachmentId, fd));
-                    break;
-                case FileUploadType.Azure:
-                    const renewalCallback = async () => {
-                        const renewalResponse = await this.apiService.renewAttachmentUploadUrl(response.id,
-                            uploadData.attachmentId);
-                        return renewalResponse.url;
-                    };
-                    await this.azureFileUploadService.upload(uploadData.url, encryptedFileData, renewalCallback);
-                    break;
-                default:
-                    throw new Error('Unknown file upload type.');
-            }
-        } catch (e) {
-            if (admin) {
-                await this.apiService.deleteCipherAttachmentAdmin(response.id, uploadData.attachmentId);
-            } else {
-                await this.apiService.deleteCipherAttachment(response.id, uploadData.attachmentId);
-            }
-            throw e;
-        }
+  async uploadCipherAttachment(
+    admin: boolean,
+    uploadData: AttachmentUploadDataResponse,
+    encryptedFileName: EncString,
+    encryptedFileData: EncArrayBuffer
+  ) {
+    const response = admin ? uploadData.cipherMiniResponse : uploadData.cipherResponse;
+    try {
+      switch (uploadData.fileUploadType) {
+        case FileUploadType.Direct:
+          await this.bitwardenFileUploadService.upload(
+            encryptedFileName.encryptedString,
+            encryptedFileData,
+            (fd) => this.apiService.postAttachmentFile(response.id, uploadData.attachmentId, fd)
+          );
+          break;
+        case FileUploadType.Azure:
+          const renewalCallback = async () => {
+            const renewalResponse = await this.apiService.renewAttachmentUploadUrl(
+              response.id,
+              uploadData.attachmentId
+            );
+            return renewalResponse.url;
+          };
+          await this.azureFileUploadService.upload(
+            uploadData.url,
+            encryptedFileData,
+            renewalCallback
+          );
+          break;
+        default:
+          throw new Error("Unknown file upload type.");
+      }
+    } catch (e) {
+      if (admin) {
+        await this.apiService.deleteCipherAttachmentAdmin(response.id, uploadData.attachmentId);
+      } else {
+        await this.apiService.deleteCipherAttachment(response.id, uploadData.attachmentId);
+      }
+      throw e;
     }
+  }
 }
diff --git a/jslib/common/src/services/folder.service.ts b/jslib/common/src/services/folder.service.ts
index 0f3ae50e..225c03aa 100644
--- a/jslib/common/src/services/folder.service.ts
+++ b/jslib/common/src/services/folder.service.ts
@@ -1,209 +1,199 @@
-import { FolderData } from '../models/data/folderData';
+import { FolderData } from "../models/data/folderData";
 
-import { Folder } from '../models/domain/folder';
-import { SymmetricCryptoKey } from '../models/domain/symmetricCryptoKey';
-import { TreeNode } from '../models/domain/treeNode';
+import { Folder } from "../models/domain/folder";
+import { SymmetricCryptoKey } from "../models/domain/symmetricCryptoKey";
+import { TreeNode } from "../models/domain/treeNode";
 
-import { FolderRequest } from '../models/request/folderRequest';
+import { FolderRequest } from "../models/request/folderRequest";
 
-import { FolderResponse } from '../models/response/folderResponse';
+import { FolderResponse } from "../models/response/folderResponse";
 
-import { FolderView } from '../models/view/folderView';
+import { FolderView } from "../models/view/folderView";
 
-import { ApiService } from '../abstractions/api.service';
-import { CipherService } from '../abstractions/cipher.service';
-import { CryptoService } from '../abstractions/crypto.service';
-import { FolderService as FolderServiceAbstraction } from '../abstractions/folder.service';
-import { I18nService } from '../abstractions/i18n.service';
-import { StorageService } from '../abstractions/storage.service';
-import { UserService } from '../abstractions/user.service';
-import { CipherData } from '../models/data/cipherData';
+import { ApiService } from "../abstractions/api.service";
+import { CipherService } from "../abstractions/cipher.service";
+import { CryptoService } from "../abstractions/crypto.service";
+import { FolderService as FolderServiceAbstraction } from "../abstractions/folder.service";
+import { I18nService } from "../abstractions/i18n.service";
+import { StateService } from "../abstractions/state.service";
 
-import { ServiceUtils } from '../misc/serviceUtils';
-import { Utils } from '../misc/utils';
+import { CipherData } from "../models/data/cipherData";
 
-const Keys = {
-    foldersPrefix: 'folders_',
-    ciphersPrefix: 'ciphers_',
-};
-const NestingDelimiter = '/';
+import { ServiceUtils } from "../misc/serviceUtils";
+import { Utils } from "../misc/utils";
 
-export class FolderService implements FolderServiceAbstraction {
-    decryptedFolderCache: FolderView[];
-
-    constructor(private cryptoService: CryptoService, private userService: UserService,
-        private apiService: ApiService, private storageService: StorageService,
-        private i18nService: I18nService, private cipherService: CipherService) { }
-
-    clearCache(): void {
-        this.decryptedFolderCache = null;
-    }
+const NestingDelimiter = "/";
 
-    async encrypt(model: FolderView, key?: SymmetricCryptoKey): Promise<Folder> {
-        const folder = new Folder();
-        folder.id = model.id;
-        folder.name = await this.cryptoService.encrypt(model.name, key);
-        return folder;
+export class FolderService implements FolderServiceAbstraction {
+  constructor(
+    private cryptoService: CryptoService,
+    private apiService: ApiService,
+    private i18nService: I18nService,
+    private cipherService: CipherService,
+    private stateService: StateService
+  ) {}
+
+  async clearCache(userId?: string): Promise<void> {
+    await this.stateService.setDecryptedFolders(null, { userId: userId });
+  }
+
+  async encrypt(model: FolderView, key?: SymmetricCryptoKey): Promise<Folder> {
+    const folder = new Folder();
+    folder.id = model.id;
+    folder.name = await this.cryptoService.encrypt(model.name, key);
+    return folder;
+  }
+
+  async get(id: string): Promise<Folder> {
+    const folders = await this.stateService.getEncryptedFolders();
+    if (folders == null || !folders.hasOwnProperty(id)) {
+      return null;
     }
 
-    async get(id: string): Promise<Folder> {
-        const userId = await this.userService.getUserId();
-        const folders = await this.storageService.get<{ [id: string]: FolderData; }>(
-            Keys.foldersPrefix + userId);
-        if (folders == null || !folders.hasOwnProperty(id)) {
-            return null;
-        }
+    return new Folder(folders[id]);
+  }
 
-        return new Folder(folders[id]);
+  async getAll(): Promise<Folder[]> {
+    const folders = await this.stateService.getEncryptedFolders();
+    const response: Folder[] = [];
+    for (const id in folders) {
+      if (folders.hasOwnProperty(id)) {
+        response.push(new Folder(folders[id]));
+      }
     }
+    return response;
+  }
 
-    async getAll(): Promise<Folder[]> {
-        const userId = await this.userService.getUserId();
-        const folders = await this.storageService.get<{ [id: string]: FolderData; }>(
-            Keys.foldersPrefix + userId);
-        const response: Folder[] = [];
-        for (const id in folders) {
-            if (folders.hasOwnProperty(id)) {
-                response.push(new Folder(folders[id]));
-            }
-        }
-        return response;
-    }
-
-    async getAllDecrypted(): Promise<FolderView[]> {
-        if (this.decryptedFolderCache != null) {
-            return this.decryptedFolderCache;
-        }
-
-        const hasKey = await this.cryptoService.hasKey();
-        if (!hasKey) {
-            throw new Error('No key.');
-        }
-
-        const decFolders: FolderView[] = [];
-        const promises: Promise<any>[] = [];
-        const folders = await this.getAll();
-        folders.forEach(folder => {
-            promises.push(folder.decrypt().then(f => decFolders.push(f)));
-        });
-
-        await Promise.all(promises);
-        decFolders.sort(Utils.getSortFunction(this.i18nService, 'name'));
-
-        const noneFolder = new FolderView();
-        noneFolder.name = this.i18nService.t('noneFolder');
-        decFolders.push(noneFolder);
-
-        this.decryptedFolderCache = decFolders;
-        return this.decryptedFolderCache;
+  async getAllDecrypted(): Promise<FolderView[]> {
+    const decryptedFolders = await this.stateService.getDecryptedFolders();
+    if (decryptedFolders != null) {
+      return decryptedFolders;
     }
 
-    async getAllNested(): Promise<TreeNode<FolderView>[]> {
-        const folders = await this.getAllDecrypted();
-        const nodes: TreeNode<FolderView>[] = [];
-        folders.forEach(f => {
-            const folderCopy = new FolderView();
-            folderCopy.id = f.id;
-            folderCopy.revisionDate = f.revisionDate;
-            const parts = f.name != null ? f.name.replace(/^\/+|\/+$/g, '').split(NestingDelimiter) : [];
-            ServiceUtils.nestedTraverse(nodes, 0, parts, folderCopy, null, NestingDelimiter);
-        });
-        return nodes;
+    const hasKey = await this.cryptoService.hasKey();
+    if (!hasKey) {
+      throw new Error("No key.");
     }
 
-    async getNested(id: string): Promise<TreeNode<FolderView>> {
-        const folders = await this.getAllNested();
-        return ServiceUtils.getTreeNodeObject(folders, id) as TreeNode<FolderView>;
+    const decFolders: FolderView[] = [];
+    const promises: Promise<any>[] = [];
+    const folders = await this.getAll();
+    folders.forEach((folder) => {
+      promises.push(folder.decrypt().then((f) => decFolders.push(f)));
+    });
+
+    await Promise.all(promises);
+    decFolders.sort(Utils.getSortFunction(this.i18nService, "name"));
+
+    const noneFolder = new FolderView();
+    noneFolder.name = this.i18nService.t("noneFolder");
+    decFolders.push(noneFolder);
+
+    await this.stateService.setDecryptedFolders(decFolders);
+    return decFolders;
+  }
+
+  async getAllNested(): Promise<TreeNode<FolderView>[]> {
+    const folders = await this.getAllDecrypted();
+    const nodes: TreeNode<FolderView>[] = [];
+    folders.forEach((f) => {
+      const folderCopy = new FolderView();
+      folderCopy.id = f.id;
+      folderCopy.revisionDate = f.revisionDate;
+      const parts = f.name != null ? f.name.replace(/^\/+|\/+$/g, "").split(NestingDelimiter) : [];
+      ServiceUtils.nestedTraverse(nodes, 0, parts, folderCopy, null, NestingDelimiter);
+    });
+    return nodes;
+  }
+
+  async getNested(id: string): Promise<TreeNode<FolderView>> {
+    const folders = await this.getAllNested();
+    return ServiceUtils.getTreeNodeObject(folders, id) as TreeNode<FolderView>;
+  }
+
+  async saveWithServer(folder: Folder): Promise<any> {
+    const request = new FolderRequest(folder);
+
+    let response: FolderResponse;
+    if (folder.id == null) {
+      response = await this.apiService.postFolder(request);
+      folder.id = response.id;
+    } else {
+      response = await this.apiService.putFolder(folder.id, request);
     }
 
-    async saveWithServer(folder: Folder): Promise<any> {
-        const request = new FolderRequest(folder);
+    const userId = await this.stateService.getUserId();
+    const data = new FolderData(response, userId);
+    await this.upsert(data);
+  }
 
-        let response: FolderResponse;
-        if (folder.id == null) {
-            response = await this.apiService.postFolder(request);
-            folder.id = response.id;
-        } else {
-            response = await this.apiService.putFolder(folder.id, request);
-        }
+  async upsert(folder: FolderData | FolderData[]): Promise<any> {
+    let folders = await this.stateService.getEncryptedFolders();
+    if (folders == null) {
+      folders = {};
+    }
 
-        const userId = await this.userService.getUserId();
-        const data = new FolderData(response, userId);
-        await this.upsert(data);
+    if (folder instanceof FolderData) {
+      const f = folder as FolderData;
+      folders[f.id] = f;
+    } else {
+      (folder as FolderData[]).forEach((f) => {
+        folders[f.id] = f;
+      });
     }
 
-    async upsert(folder: FolderData | FolderData[]): Promise<any> {
-        const userId = await this.userService.getUserId();
-        let folders = await this.storageService.get<{ [id: string]: FolderData; }>(
-            Keys.foldersPrefix + userId);
-        if (folders == null) {
-            folders = {};
-        }
+    await this.stateService.setDecryptedFolders(null);
+    await this.stateService.setEncryptedFolders(folders);
+  }
 
-        if (folder instanceof FolderData) {
-            const f = folder as FolderData;
-            folders[f.id] = f;
-        } else {
-            (folder as FolderData[]).forEach(f => {
-                folders[f.id] = f;
-            });
-        }
+  async replace(folders: { [id: string]: FolderData }): Promise<any> {
+    await this.stateService.setDecryptedFolders(null);
+    await this.stateService.setEncryptedFolders(folders);
+  }
 
-        await this.storageService.save(Keys.foldersPrefix + userId, folders);
-        this.decryptedFolderCache = null;
-    }
+  async clear(userId?: string): Promise<any> {
+    await this.stateService.setDecryptedFolders(null, { userId: userId });
+    await this.stateService.setEncryptedFolders(null, { userId: userId });
+  }
 
-    async replace(folders: { [id: string]: FolderData; }): Promise<any> {
-        const userId = await this.userService.getUserId();
-        await this.storageService.save(Keys.foldersPrefix + userId, folders);
-        this.decryptedFolderCache = null;
+  async delete(id: string | string[]): Promise<any> {
+    const folders = await this.stateService.getEncryptedFolders();
+    if (folders == null) {
+      return;
     }
 
-    async clear(userId: string): Promise<any> {
-        await this.storageService.remove(Keys.foldersPrefix + userId);
-        this.decryptedFolderCache = null;
+    if (typeof id === "string") {
+      if (folders[id] == null) {
+        return;
+      }
+      delete folders[id];
+    } else {
+      (id as string[]).forEach((i) => {
+        delete folders[i];
+      });
     }
 
-    async delete(id: string | string[]): Promise<any> {
-        const userId = await this.userService.getUserId();
-        const folders = await this.storageService.get<{ [id: string]: FolderData; }>(
-            Keys.foldersPrefix + userId);
-        if (folders == null) {
-            return;
-        }
-
-        if (typeof id === 'string') {
-            if (folders[id] == null) {
-                return;
-            }
-            delete folders[id];
-        } else {
-            (id as string[]).forEach(i => {
-                delete folders[i];
-            });
-        }
-
-        await this.storageService.save(Keys.foldersPrefix + userId, folders);
-        this.decryptedFolderCache = null;
-
-        // Items in a deleted folder are re-assigned to "No Folder"
-        const ciphers = await this.storageService.get<{ [id: string]: CipherData; }>(Keys.ciphersPrefix + userId);
-        if (ciphers != null) {
-            const updates: CipherData[] = [];
-            for (const cId in ciphers) {
-                if (ciphers[cId].folderId === id) {
-                    ciphers[cId].folderId = null;
-                    updates.push(ciphers[cId]);
-                }
-            }
-            if (updates.length > 0) {
-                this.cipherService.upsert(updates);
-            }
+    await this.stateService.setDecryptedFolders(null);
+    await this.stateService.setEncryptedFolders(folders);
+
+    // Items in a deleted folder are re-assigned to "No Folder"
+    const ciphers = await this.stateService.getEncryptedCiphers();
+    if (ciphers != null) {
+      const updates: CipherData[] = [];
+      for (const cId in ciphers) {
+        if (ciphers[cId].folderId === id) {
+          ciphers[cId].folderId = null;
+          updates.push(ciphers[cId]);
         }
+      }
+      if (updates.length > 0) {
+        this.cipherService.upsert(updates);
+      }
     }
+  }
 
-    async deleteWithServer(id: string): Promise<any> {
-        await this.apiService.deleteFolder(id);
-        await this.delete(id);
-    }
+  async deleteWithServer(id: string): Promise<any> {
+    await this.apiService.deleteFolder(id);
+    await this.delete(id);
+  }
 }
diff --git a/jslib/common/src/services/i18n.service.ts b/jslib/common/src/services/i18n.service.ts
index b67ee001..698bc297 100644
--- a/jslib/common/src/services/i18n.service.ts
+++ b/jslib/common/src/services/i18n.service.ts
@@ -1,153 +1,160 @@
-import { I18nService as I18nServiceAbstraction } from '../abstractions/i18n.service';
+import { I18nService as I18nServiceAbstraction } from "../abstractions/i18n.service";
 
 export class I18nService implements I18nServiceAbstraction {
-    locale: string;
-    // First locale is the default (English)
-    supportedTranslationLocales: string[] = ['en'];
-    translationLocale: string;
-    collator: Intl.Collator;
-    localeNames = new Map<string, string>([
-        ['af', 'Afrikaans'],
-        ['az', 'Azərbaycanca'],
-        ['be', 'Беларуская'],
-        ['bg', 'български'],
-        ['ca', 'català'],
-        ['cs', 'čeština'],
-        ['da', 'dansk'],
-        ['de', 'Deutsch'],
-        ['el', 'Ελληνικά'],
-        ['en', 'English'],
-        ['en-GB', 'English (British)'],
-        ['eo', 'Esperanto'],
-        ['es', 'español'],
-        ['et', 'eesti'],
-        ['fa', 'فارسی'],
-        ['fi', 'suomi'],
-        ['fr', 'français'],
-        ['he', 'עברית'],
-        ['hi', 'हिन्दी'],
-        ['hr', 'hrvatski'],
-        ['hu', 'magyar'],
-        ['id', 'Bahasa Indonesia'],
-        ['it', 'italiano'],
-        ['ja', '日本語'],
-        ['ko', '한국어'],
-        ['lv', 'Latvietis'],
-        ['ml', 'മലയാളം'],
-        ['nb', 'norsk (bokmål)'],
-        ['nl', 'Nederlands'],
-        ['pl', 'polski'],
-        ['pt-BR', 'português do Brasil'],
-        ['pt-PT', 'português'],
-        ['ro', 'română'],
-        ['ru', 'русский'],
-        ['sk', 'slovenčina'],
-        ['sr', 'Српски'],
-        ['sv', 'svenska'],
-        ['th', 'ไทย'],
-        ['tr', 'Türkçe'],
-        ['uk', 'українська'],
-        ['vi', 'Tiếng Việt'],
-        ['zh-CN', '中文（中国大陆）'],
-        ['zh-TW', '中文（台灣）'],
-    ]);
-
-    protected inited: boolean;
-    protected defaultMessages: any = {};
-    protected localeMessages: any = {};
-
-    constructor(protected systemLanguage: string, protected localesDirectory: string,
-        protected getLocalesJson: (formattedLocale: string) => Promise<any>) {
-        this.systemLanguage = systemLanguage.replace('_', '-');
+  locale: string;
+  // First locale is the default (English)
+  supportedTranslationLocales: string[] = ["en"];
+  translationLocale: string;
+  collator: Intl.Collator;
+  localeNames = new Map<string, string>([
+    ["af", "Afrikaans"],
+    ["az", "Azərbaycanca"],
+    ["be", "Беларуская"],
+    ["bg", "български"],
+    ["ca", "català"],
+    ["cs", "čeština"],
+    ["da", "dansk"],
+    ["de", "Deutsch"],
+    ["el", "Ελληνικά"],
+    ["en", "English"],
+    ["en-GB", "English (British)"],
+    ["eo", "Esperanto"],
+    ["es", "español"],
+    ["et", "eesti"],
+    ["fa", "فارسی"],
+    ["fi", "suomi"],
+    ["fr", "français"],
+    ["he", "עברית"],
+    ["hi", "हिन्दी"],
+    ["hr", "hrvatski"],
+    ["hu", "magyar"],
+    ["id", "Bahasa Indonesia"],
+    ["it", "italiano"],
+    ["ja", "日本語"],
+    ["ko", "한국어"],
+    ["lv", "Latvietis"],
+    ["ml", "മലയാളം"],
+    ["nb", "norsk (bokmål)"],
+    ["nl", "Nederlands"],
+    ["pl", "polski"],
+    ["pt-BR", "português do Brasil"],
+    ["pt-PT", "português"],
+    ["ro", "română"],
+    ["ru", "русский"],
+    ["sk", "slovenčina"],
+    ["sr", "Српски"],
+    ["sv", "svenska"],
+    ["th", "ไทย"],
+    ["tr", "Türkçe"],
+    ["uk", "українська"],
+    ["vi", "Tiếng Việt"],
+    ["zh-CN", "中文（中国大陆）"],
+    ["zh-TW", "中文（台灣）"],
+  ]);
+
+  protected inited: boolean;
+  protected defaultMessages: any = {};
+  protected localeMessages: any = {};
+
+  constructor(
+    protected systemLanguage: string,
+    protected localesDirectory: string,
+    protected getLocalesJson: (formattedLocale: string) => Promise<any>
+  ) {
+    this.systemLanguage = systemLanguage.replace("_", "-");
+  }
+
+  async init(locale?: string) {
+    if (this.inited) {
+      throw new Error("i18n already initialized.");
+    }
+    if (this.supportedTranslationLocales == null || this.supportedTranslationLocales.length === 0) {
+      throw new Error("supportedTranslationLocales not set.");
     }
 
-    async init(locale?: string) {
-        if (this.inited) {
-            throw new Error('i18n already initialized.');
-        }
-        if (this.supportedTranslationLocales == null || this.supportedTranslationLocales.length === 0) {
-            throw new Error('supportedTranslationLocales not set.');
-        }
-
-        this.inited = true;
-        this.locale = this.translationLocale = locale != null ? locale : this.systemLanguage;
-
-        try {
-            this.collator = new Intl.Collator(this.locale, { numeric: true, sensitivity: 'base' });
-        } catch {
-            this.collator = null;
-        }
+    this.inited = true;
+    this.locale = this.translationLocale = locale != null ? locale : this.systemLanguage;
 
-        if (this.supportedTranslationLocales.indexOf(this.translationLocale) === -1) {
-            this.translationLocale = this.translationLocale.slice(0, 2);
+    try {
+      this.collator = new Intl.Collator(this.locale, { numeric: true, sensitivity: "base" });
+    } catch {
+      this.collator = null;
+    }
 
-            if (this.supportedTranslationLocales.indexOf(this.translationLocale) === -1) {
-                this.translationLocale = this.supportedTranslationLocales[0];
-            }
-        }
+    if (this.supportedTranslationLocales.indexOf(this.translationLocale) === -1) {
+      this.translationLocale = this.translationLocale.slice(0, 2);
 
-        if (this.localesDirectory != null) {
-            await this.loadMessages(this.translationLocale, this.localeMessages);
-            if (this.translationLocale !== this.supportedTranslationLocales[0]) {
-                await this.loadMessages(this.supportedTranslationLocales[0], this.defaultMessages);
-            }
-        }
+      if (this.supportedTranslationLocales.indexOf(this.translationLocale) === -1) {
+        this.translationLocale = this.supportedTranslationLocales[0];
+      }
     }
 
-    t(id: string, p1?: string, p2?: string, p3?: string): string {
-        return this.translate(id, p1, p2, p3);
+    if (this.localesDirectory != null) {
+      await this.loadMessages(this.translationLocale, this.localeMessages);
+      if (this.translationLocale !== this.supportedTranslationLocales[0]) {
+        await this.loadMessages(this.supportedTranslationLocales[0], this.defaultMessages);
+      }
+    }
+  }
+
+  t(id: string, p1?: string, p2?: string, p3?: string): string {
+    return this.translate(id, p1, p2, p3);
+  }
+
+  translate(id: string, p1?: string, p2?: string, p3?: string): string {
+    let result: string;
+    if (this.localeMessages.hasOwnProperty(id) && this.localeMessages[id]) {
+      result = this.localeMessages[id];
+    } else if (this.defaultMessages.hasOwnProperty(id) && this.defaultMessages[id]) {
+      result = this.defaultMessages[id];
+    } else {
+      result = "";
     }
 
-    translate(id: string, p1?: string, p2?: string, p3?: string): string {
-        let result: string;
-        if (this.localeMessages.hasOwnProperty(id) && this.localeMessages[id]) {
-            result = this.localeMessages[id];
-        } else if (this.defaultMessages.hasOwnProperty(id) && this.defaultMessages[id]) {
-            result = this.defaultMessages[id];
-        } else {
-            result = '';
-        }
-
-        if (result !== '') {
-            if (p1 != null) {
-                result = result.split('__$1__').join(p1);
-            }
-            if (p2 != null) {
-                result = result.split('__$2__').join(p2);
-            }
-            if (p3 != null) {
-                result = result.split('__$3__').join(p3);
-            }
-        }
-
-        return result;
+    if (result !== "") {
+      if (p1 != null) {
+        result = result.split("__$1__").join(p1);
+      }
+      if (p2 != null) {
+        result = result.split("__$2__").join(p2);
+      }
+      if (p3 != null) {
+        result = result.split("__$3__").join(p3);
+      }
     }
 
-    private async loadMessages(locale: string, messagesObj: any): Promise<any> {
-        const formattedLocale = locale.replace('-', '_');
-        const locales = await this.getLocalesJson(formattedLocale);
-        for (const prop in locales) {
-            if (!locales.hasOwnProperty(prop)) {
-                continue;
-            }
-            messagesObj[prop] = locales[prop].message;
-
-            if (locales[prop].placeholders) {
-                for (const placeProp in locales[prop].placeholders) {
-                    if (!locales[prop].placeholders.hasOwnProperty(placeProp) ||
-                        !locales[prop].placeholders[placeProp].content) {
-                        continue;
-                    }
-
-                    const replaceToken = '\\$' + placeProp.toUpperCase() + '\\$';
-                    let replaceContent = locales[prop].placeholders[placeProp].content;
-                    if (replaceContent === '$1' || replaceContent === '$2' || replaceContent === '$3') {
-                        replaceContent = '__$' + replaceContent + '__';
-                    }
-                    messagesObj[prop] = messagesObj[prop].replace(new RegExp(replaceToken, 'g'), replaceContent);
-                }
-            }
+    return result;
+  }
+
+  private async loadMessages(locale: string, messagesObj: any): Promise<any> {
+    const formattedLocale = locale.replace("-", "_");
+    const locales = await this.getLocalesJson(formattedLocale);
+    for (const prop in locales) {
+      if (!locales.hasOwnProperty(prop)) {
+        continue;
+      }
+      messagesObj[prop] = locales[prop].message;
+
+      if (locales[prop].placeholders) {
+        for (const placeProp in locales[prop].placeholders) {
+          if (
+            !locales[prop].placeholders.hasOwnProperty(placeProp) ||
+            !locales[prop].placeholders[placeProp].content
+          ) {
+            continue;
+          }
+
+          const replaceToken = "\\$" + placeProp.toUpperCase() + "\\$";
+          let replaceContent = locales[prop].placeholders[placeProp].content;
+          if (replaceContent === "$1" || replaceContent === "$2" || replaceContent === "$3") {
+            replaceContent = "__$" + replaceContent + "__";
+          }
+          messagesObj[prop] = messagesObj[prop].replace(
+            new RegExp(replaceToken, "g"),
+            replaceContent
+          );
         }
+      }
     }
-
+  }
 }
diff --git a/jslib/common/src/services/import.service.ts b/jslib/common/src/services/import.service.ts
index d04ede50..adf014bf 100644
--- a/jslib/common/src/services/import.service.ts
+++ b/jslib/common/src/services/import.service.ts
@@ -1,403 +1,424 @@
-import { ApiService } from '../abstractions/api.service';
-import { CipherService } from '../abstractions/cipher.service';
-import { CollectionService } from '../abstractions/collection.service';
-import { CryptoService } from '../abstractions/crypto.service';
-import { FolderService } from '../abstractions/folder.service';
-import { I18nService } from '../abstractions/i18n.service';
+import { ApiService } from "../abstractions/api.service";
+import { CipherService } from "../abstractions/cipher.service";
+import { CollectionService } from "../abstractions/collection.service";
+import { CryptoService } from "../abstractions/crypto.service";
+import { FolderService } from "../abstractions/folder.service";
+import { I18nService } from "../abstractions/i18n.service";
 import {
-    ImportOption,
-    ImportService as ImportServiceAbstraction,
-} from '../abstractions/import.service';
-import { PlatformUtilsService } from '../abstractions/platformUtils.service';
+  ImportOption,
+  ImportService as ImportServiceAbstraction,
+} from "../abstractions/import.service";
+import { PlatformUtilsService } from "../abstractions/platformUtils.service";
 
-import { ImportResult } from '../models/domain/importResult';
+import { ImportResult } from "../models/domain/importResult";
 
-import { CipherType } from '../enums/cipherType';
+import { CipherType } from "../enums/cipherType";
 
-import { Utils } from '../misc/utils';
+import { Utils } from "../misc/utils";
 
-import { CipherRequest } from '../models/request/cipherRequest';
-import { CollectionRequest } from '../models/request/collectionRequest';
-import { FolderRequest } from '../models/request/folderRequest';
-import { ImportCiphersRequest } from '../models/request/importCiphersRequest';
-import { ImportOrganizationCiphersRequest } from '../models/request/importOrganizationCiphersRequest';
-import { KvpRequest } from '../models/request/kvpRequest';
+import { CipherRequest } from "../models/request/cipherRequest";
+import { CollectionRequest } from "../models/request/collectionRequest";
+import { FolderRequest } from "../models/request/folderRequest";
+import { ImportCiphersRequest } from "../models/request/importCiphersRequest";
+import { ImportOrganizationCiphersRequest } from "../models/request/importOrganizationCiphersRequest";
+import { KvpRequest } from "../models/request/kvpRequest";
 
-import { ErrorResponse } from '../models/response/errorResponse';
-import { CipherView } from '../models/view/cipherView';
+import { ErrorResponse } from "../models/response/errorResponse";
+import { CipherView } from "../models/view/cipherView";
 
-import { AscendoCsvImporter } from '../importers/ascendoCsvImporter';
-import { AvastCsvImporter } from '../importers/avastCsvImporter';
-import { AvastJsonImporter } from '../importers/avastJsonImporter';
-import { AviraCsvImporter } from '../importers/aviraCsvImporter';
-import { BitwardenCsvImporter } from '../importers/bitwardenCsvImporter';
-import { BitwardenJsonImporter } from '../importers/bitwardenJsonImporter';
-import { BlackBerryCsvImporter } from '../importers/blackBerryCsvImporter';
-import { BlurCsvImporter } from '../importers/blurCsvImporter';
-import { ButtercupCsvImporter } from '../importers/buttercupCsvImporter';
-import { ChromeCsvImporter } from '../importers/chromeCsvImporter';
-import { ClipperzHtmlImporter } from '../importers/clipperzHtmlImporter';
-import { CodebookCsvImporter } from '../importers/codebookCsvImporter';
-import { DashlaneJsonImporter } from '../importers/dashlaneJsonImporter';
-import { EncryptrCsvImporter } from '../importers/encryptrCsvImporter';
-import { EnpassCsvImporter } from '../importers/enpassCsvImporter';
-import { EnpassJsonImporter } from '../importers/enpassJsonImporter';
-import { FirefoxCsvImporter } from '../importers/firefoxCsvImporter';
-import { FSecureFskImporter } from '../importers/fsecureFskImporter';
-import { GnomeJsonImporter } from '../importers/gnomeJsonImporter';
-import { Importer } from '../importers/importer';
-import { KasperskyTxtImporter } from '../importers/kasperskyTxtImporter';
-import { KeePass2XmlImporter } from '../importers/keepass2XmlImporter';
-import { KeePassXCsvImporter } from '../importers/keepassxCsvImporter';
-import { KeeperCsvImporter } from '../importers/keeperCsvImporter';
-import { LastPassCsvImporter } from '../importers/lastpassCsvImporter';
-import { LogMeOnceCsvImporter } from '../importers/logMeOnceCsvImporter';
-import { MeldiumCsvImporter } from '../importers/meldiumCsvImporter';
-import { MSecureCsvImporter } from '../importers/msecureCsvImporter';
-import { MykiCsvImporter } from '../importers/mykiCsvImporter';
-import { NordPassCsvImporter } from '../importers/nordpassCsvImporter';
-import { OnePassword1PifImporter } from '../importers/onepasswordImporters/onepassword1PifImporter';
-import { OnePasswordMacCsvImporter } from '../importers/onepasswordImporters/onepasswordMacCsvImporter';
-import { OnePasswordWinCsvImporter } from '../importers/onepasswordImporters/onepasswordWinCsvImporter';
-import { PadlockCsvImporter } from '../importers/padlockCsvImporter';
-import { PassKeepCsvImporter } from '../importers/passkeepCsvImporter';
-import { PassmanJsonImporter } from '../importers/passmanJsonImporter';
-import { PasspackCsvImporter } from '../importers/passpackCsvImporter';
-import { PasswordAgentCsvImporter } from '../importers/passwordAgentCsvImporter';
-import { PasswordBossJsonImporter } from '../importers/passwordBossJsonImporter';
-import { PasswordDragonXmlImporter } from '../importers/passwordDragonXmlImporter';
-import { PasswordSafeXmlImporter } from '../importers/passwordSafeXmlImporter';
-import { PasswordWalletTxtImporter } from '../importers/passwordWalletTxtImporter';
-import { RememBearCsvImporter } from '../importers/rememBearCsvImporter';
-import { RoboFormCsvImporter } from '../importers/roboformCsvImporter';
-import { SafariCsvImporter } from '../importers/safariCsvImporter';
-import { SafeInCloudXmlImporter } from '../importers/safeInCloudXmlImporter';
-import { SaferPassCsvImporter } from '../importers/saferpassCsvImport';
-import { SecureSafeCsvImporter } from '../importers/secureSafeCsvImporter';
-import { SplashIdCsvImporter } from '../importers/splashIdCsvImporter';
-import { StickyPasswordXmlImporter } from '../importers/stickyPasswordXmlImporter';
-import { TrueKeyCsvImporter } from '../importers/truekeyCsvImporter';
-import { UpmCsvImporter } from '../importers/upmCsvImporter';
-import { YotiCsvImporter } from '../importers/yotiCsvImporter';
-import { ZohoVaultCsvImporter } from '../importers/zohoVaultCsvImporter';
+import { AscendoCsvImporter } from "../importers/ascendoCsvImporter";
+import { AvastCsvImporter } from "../importers/avastCsvImporter";
+import { AvastJsonImporter } from "../importers/avastJsonImporter";
+import { AviraCsvImporter } from "../importers/aviraCsvImporter";
+import { BitwardenCsvImporter } from "../importers/bitwardenCsvImporter";
+import { BitwardenJsonImporter } from "../importers/bitwardenJsonImporter";
+import { BlackBerryCsvImporter } from "../importers/blackBerryCsvImporter";
+import { BlurCsvImporter } from "../importers/blurCsvImporter";
+import { ButtercupCsvImporter } from "../importers/buttercupCsvImporter";
+import { ChromeCsvImporter } from "../importers/chromeCsvImporter";
+import { ClipperzHtmlImporter } from "../importers/clipperzHtmlImporter";
+import { CodebookCsvImporter } from "../importers/codebookCsvImporter";
+import { DashlaneJsonImporter } from "../importers/dashlaneJsonImporter";
+import { EncryptrCsvImporter } from "../importers/encryptrCsvImporter";
+import { EnpassCsvImporter } from "../importers/enpassCsvImporter";
+import { EnpassJsonImporter } from "../importers/enpassJsonImporter";
+import { FirefoxCsvImporter } from "../importers/firefoxCsvImporter";
+import { FSecureFskImporter } from "../importers/fsecureFskImporter";
+import { GnomeJsonImporter } from "../importers/gnomeJsonImporter";
+import { Importer } from "../importers/importer";
+import { KasperskyTxtImporter } from "../importers/kasperskyTxtImporter";
+import { KeePass2XmlImporter } from "../importers/keepass2XmlImporter";
+import { KeePassXCsvImporter } from "../importers/keepassxCsvImporter";
+import { KeeperCsvImporter } from "../importers/keeperImporters/keeperCsvImporter";
+import { KeeperJsonImporter } from "../importers/keeperImporters/keeperJsonImporter";
+import { LastPassCsvImporter } from "../importers/lastpassCsvImporter";
+import { LogMeOnceCsvImporter } from "../importers/logMeOnceCsvImporter";
+import { MeldiumCsvImporter } from "../importers/meldiumCsvImporter";
+import { MSecureCsvImporter } from "../importers/msecureCsvImporter";
+import { MykiCsvImporter } from "../importers/mykiCsvImporter";
+import { NordPassCsvImporter } from "../importers/nordpassCsvImporter";
+import { OnePassword1PifImporter } from "../importers/onepasswordImporters/onepassword1PifImporter";
+import { OnePasswordMacCsvImporter } from "../importers/onepasswordImporters/onepasswordMacCsvImporter";
+import { OnePasswordWinCsvImporter } from "../importers/onepasswordImporters/onepasswordWinCsvImporter";
+import { PadlockCsvImporter } from "../importers/padlockCsvImporter";
+import { PassKeepCsvImporter } from "../importers/passkeepCsvImporter";
+import { PassmanJsonImporter } from "../importers/passmanJsonImporter";
+import { PasspackCsvImporter } from "../importers/passpackCsvImporter";
+import { PasswordAgentCsvImporter } from "../importers/passwordAgentCsvImporter";
+import { PasswordBossJsonImporter } from "../importers/passwordBossJsonImporter";
+import { PasswordDragonXmlImporter } from "../importers/passwordDragonXmlImporter";
+import { PasswordSafeXmlImporter } from "../importers/passwordSafeXmlImporter";
+import { PasswordWalletTxtImporter } from "../importers/passwordWalletTxtImporter";
+import { RememBearCsvImporter } from "../importers/rememBearCsvImporter";
+import { RoboFormCsvImporter } from "../importers/roboformCsvImporter";
+import { SafariCsvImporter } from "../importers/safariCsvImporter";
+import { SafeInCloudXmlImporter } from "../importers/safeInCloudXmlImporter";
+import { SaferPassCsvImporter } from "../importers/saferpassCsvImport";
+import { SecureSafeCsvImporter } from "../importers/secureSafeCsvImporter";
+import { SplashIdCsvImporter } from "../importers/splashIdCsvImporter";
+import { StickyPasswordXmlImporter } from "../importers/stickyPasswordXmlImporter";
+import { TrueKeyCsvImporter } from "../importers/truekeyCsvImporter";
+import { UpmCsvImporter } from "../importers/upmCsvImporter";
+import { YotiCsvImporter } from "../importers/yotiCsvImporter";
+import { ZohoVaultCsvImporter } from "../importers/zohoVaultCsvImporter";
 
 export class ImportService implements ImportServiceAbstraction {
-    featuredImportOptions = [
-        { id: 'bitwardenjson', name: 'Bitwarden (json)' },
-        { id: 'bitwardencsv', name: 'Bitwarden (csv)' },
-        { id: 'chromecsv', name: 'Chrome (csv)' },
-        { id: 'dashlanejson', name: 'Dashlane (json)' },
-        { id: 'firefoxcsv', name: 'Firefox (csv)' },
-        { id: 'keepass2xml', name: 'KeePass 2 (xml)' },
-        { id: 'lastpasscsv', name: 'LastPass (csv)' },
-        { id: 'safaricsv', name: 'Safari and macOS (csv)' },
-        { id: '1password1pif', name: '1Password (1pif)' },
-    ];
+  featuredImportOptions = [
+    { id: "bitwardenjson", name: "Bitwarden (json)" },
+    { id: "bitwardencsv", name: "Bitwarden (csv)" },
+    { id: "chromecsv", name: "Chrome (csv)" },
+    { id: "dashlanejson", name: "Dashlane (json)" },
+    { id: "firefoxcsv", name: "Firefox (csv)" },
+    { id: "keepass2xml", name: "KeePass 2 (xml)" },
+    { id: "lastpasscsv", name: "LastPass (csv)" },
+    { id: "safaricsv", name: "Safari and macOS (csv)" },
+    { id: "1password1pif", name: "1Password (1pif)" },
+  ];
 
-    regularImportOptions: ImportOption[] = [
-        { id: 'keepassxcsv', name: 'KeePassX (csv)' },
-        { id: '1passwordwincsv', name: '1Password 6 and 7 Windows (csv)' },
-        { id: '1passwordmaccsv', name: '1Password 6 and 7 Mac (csv)' },
-        { id: 'roboformcsv', name: 'RoboForm (csv)' },
-        { id: 'keepercsv', name: 'Keeper (csv)' },
-        { id: 'enpasscsv', name: 'Enpass (csv)' },
-        { id: 'enpassjson', name: 'Enpass (json)' },
-        { id: 'safeincloudxml', name: 'SafeInCloud (xml)' },
-        { id: 'pwsafexml', name: 'Password Safe (xml)' },
-        { id: 'stickypasswordxml', name: 'Sticky Password (xml)' },
-        { id: 'msecurecsv', name: 'mSecure (csv)' },
-        { id: 'truekeycsv', name: 'True Key (csv)' },
-        { id: 'passwordbossjson', name: 'Password Boss (json)' },
-        { id: 'zohovaultcsv', name: 'Zoho Vault (csv)' },
-        { id: 'splashidcsv', name: 'SplashID (csv)' },
-        { id: 'passworddragonxml', name: 'Password Dragon (xml)' },
-        { id: 'padlockcsv', name: 'Padlock (csv)' },
-        { id: 'passboltcsv', name: 'Passbolt (csv)' },
-        { id: 'clipperzhtml', name: 'Clipperz (html)' },
-        { id: 'aviracsv', name: 'Avira (csv)' },
-        { id: 'saferpasscsv', name: 'SaferPass (csv)' },
-        { id: 'upmcsv', name: 'Universal Password Manager (csv)' },
-        { id: 'ascendocsv', name: 'Ascendo DataVault (csv)' },
-        { id: 'meldiumcsv', name: 'Meldium (csv)' },
-        { id: 'passkeepcsv', name: 'PassKeep (csv)' },
-        { id: 'operacsv', name: 'Opera (csv)' },
-        { id: 'vivaldicsv', name: 'Vivaldi (csv)' },
-        { id: 'gnomejson', name: 'GNOME Passwords and Keys/Seahorse (json)' },
-        { id: 'blurcsv', name: 'Blur (csv)' },
-        { id: 'passwordagentcsv', name: 'Password Agent (csv)' },
-        { id: 'passpackcsv', name: 'Passpack (csv)' },
-        { id: 'passmanjson', name: 'Passman (json)' },
-        { id: 'avastcsv', name: 'Avast Passwords (csv)' },
-        { id: 'avastjson', name: 'Avast Passwords (json)' },
-        { id: 'fsecurefsk', name: 'F-Secure KEY (fsk)' },
-        { id: 'kasperskytxt', name: 'Kaspersky Password Manager (txt)' },
-        { id: 'remembearcsv', name: 'RememBear (csv)' },
-        { id: 'passwordwallettxt', name: 'PasswordWallet (txt)' },
-        { id: 'mykicsv', name: 'Myki (csv)' },
-        { id: 'securesafecsv', name: 'SecureSafe (csv)' },
-        { id: 'logmeoncecsv', name: 'LogMeOnce (csv)' },
-        { id: 'blackberrycsv', name: 'BlackBerry Password Keeper (csv)' },
-        { id: 'buttercupcsv', name: 'Buttercup (csv)' },
-        { id: 'codebookcsv', name: 'Codebook (csv)' },
-        { id: 'encryptrcsv', name: 'Encryptr (csv)' },
-        { id: 'yoticsv', name: 'Yoti (csv)' },
-        { id: 'nordpasscsv', name: 'Nordpass (csv)' },
-    ];
+  regularImportOptions: ImportOption[] = [
+    { id: "keepassxcsv", name: "KeePassX (csv)" },
+    { id: "1passwordwincsv", name: "1Password 6 and 7 Windows (csv)" },
+    { id: "1passwordmaccsv", name: "1Password 6 and 7 Mac (csv)" },
+    { id: "roboformcsv", name: "RoboForm (csv)" },
+    { id: "keepercsv", name: "Keeper (csv)" },
+    { id: "keeperjson", name: "Keeper (json)" },
+    { id: "enpasscsv", name: "Enpass (csv)" },
+    { id: "enpassjson", name: "Enpass (json)" },
+    { id: "safeincloudxml", name: "SafeInCloud (xml)" },
+    { id: "pwsafexml", name: "Password Safe (xml)" },
+    { id: "stickypasswordxml", name: "Sticky Password (xml)" },
+    { id: "msecurecsv", name: "mSecure (csv)" },
+    { id: "truekeycsv", name: "True Key (csv)" },
+    { id: "passwordbossjson", name: "Password Boss (json)" },
+    { id: "zohovaultcsv", name: "Zoho Vault (csv)" },
+    { id: "splashidcsv", name: "SplashID (csv)" },
+    { id: "passworddragonxml", name: "Password Dragon (xml)" },
+    { id: "padlockcsv", name: "Padlock (csv)" },
+    { id: "passboltcsv", name: "Passbolt (csv)" },
+    { id: "clipperzhtml", name: "Clipperz (html)" },
+    { id: "aviracsv", name: "Avira (csv)" },
+    { id: "saferpasscsv", name: "SaferPass (csv)" },
+    { id: "upmcsv", name: "Universal Password Manager (csv)" },
+    { id: "ascendocsv", name: "Ascendo DataVault (csv)" },
+    { id: "meldiumcsv", name: "Meldium (csv)" },
+    { id: "passkeepcsv", name: "PassKeep (csv)" },
+    { id: "operacsv", name: "Opera (csv)" },
+    { id: "vivaldicsv", name: "Vivaldi (csv)" },
+    { id: "gnomejson", name: "GNOME Passwords and Keys/Seahorse (json)" },
+    { id: "blurcsv", name: "Blur (csv)" },
+    { id: "passwordagentcsv", name: "Password Agent (csv)" },
+    { id: "passpackcsv", name: "Passpack (csv)" },
+    { id: "passmanjson", name: "Passman (json)" },
+    { id: "avastcsv", name: "Avast Passwords (csv)" },
+    { id: "avastjson", name: "Avast Passwords (json)" },
+    { id: "fsecurefsk", name: "F-Secure KEY (fsk)" },
+    { id: "kasperskytxt", name: "Kaspersky Password Manager (txt)" },
+    { id: "remembearcsv", name: "RememBear (csv)" },
+    { id: "passwordwallettxt", name: "PasswordWallet (txt)" },
+    { id: "mykicsv", name: "Myki (csv)" },
+    { id: "securesafecsv", name: "SecureSafe (csv)" },
+    { id: "logmeoncecsv", name: "LogMeOnce (csv)" },
+    { id: "blackberrycsv", name: "BlackBerry Password Keeper (csv)" },
+    { id: "buttercupcsv", name: "Buttercup (csv)" },
+    { id: "codebookcsv", name: "Codebook (csv)" },
+    { id: "encryptrcsv", name: "Encryptr (csv)" },
+    { id: "yoticsv", name: "Yoti (csv)" },
+    { id: "nordpasscsv", name: "Nordpass (csv)" },
+  ];
 
-    constructor(private cipherService: CipherService, private folderService: FolderService,
-        private apiService: ApiService, private i18nService: I18nService,
-        private collectionService: CollectionService, private platformUtilsService: PlatformUtilsService,
-        private cryptoService: CryptoService) { }
+  constructor(
+    private cipherService: CipherService,
+    private folderService: FolderService,
+    private apiService: ApiService,
+    private i18nService: I18nService,
+    private collectionService: CollectionService,
+    private platformUtilsService: PlatformUtilsService,
+    private cryptoService: CryptoService
+  ) {}
 
-    getImportOptions(): ImportOption[] {
-        return this.featuredImportOptions.concat(this.regularImportOptions);
-    }
+  getImportOptions(): ImportOption[] {
+    return this.featuredImportOptions.concat(this.regularImportOptions);
+  }
 
-    async import(importer: Importer, fileContents: string, organizationId: string = null): Promise<Error> {
-        const importResult = await importer.parse(fileContents);
-        if (importResult.success) {
-            if (importResult.folders.length === 0 && importResult.ciphers.length === 0) {
-                return new Error(this.i18nService.t('importNothingError'));
-            } else if (importResult.ciphers.length > 0) {
-                const halfway = Math.floor(importResult.ciphers.length / 2);
-                const last = importResult.ciphers.length - 1;
+  async import(
+    importer: Importer,
+    fileContents: string,
+    organizationId: string = null
+  ): Promise<Error> {
+    const importResult = await importer.parse(fileContents);
+    if (importResult.success) {
+      if (importResult.folders.length === 0 && importResult.ciphers.length === 0) {
+        return new Error(this.i18nService.t("importNothingError"));
+      } else if (importResult.ciphers.length > 0) {
+        const halfway = Math.floor(importResult.ciphers.length / 2);
+        const last = importResult.ciphers.length - 1;
 
-                if (this.badData(importResult.ciphers[0]) &&
-                    this.badData(importResult.ciphers[halfway]) &&
-                    this.badData(importResult.ciphers[last])) {
-                    return new Error(this.i18nService.t('importFormatError'));
-                }
-            }
-            try {
-                await this.postImport(importResult, organizationId);
-            } catch (error) {
-                const errorResponse = new ErrorResponse(error, 400);
-                return this.handleServerError(errorResponse, importResult);
-            }
-            return null;
-        } else {
-            if (!Utils.isNullOrWhitespace(importResult.errorMessage)) {
-                return new Error(importResult.errorMessage);
-            } else {
-                return new Error(this.i18nService.t('importFormatError'));
-            }
+        if (
+          this.badData(importResult.ciphers[0]) &&
+          this.badData(importResult.ciphers[halfway]) &&
+          this.badData(importResult.ciphers[last])
+        ) {
+          return new Error(this.i18nService.t("importFormatError"));
         }
+      }
+      try {
+        await this.postImport(importResult, organizationId);
+      } catch (error) {
+        const errorResponse = new ErrorResponse(error, 400);
+        return this.handleServerError(errorResponse, importResult);
+      }
+      return null;
+    } else {
+      if (!Utils.isNullOrWhitespace(importResult.errorMessage)) {
+        return new Error(importResult.errorMessage);
+      } else {
+        return new Error(this.i18nService.t("importFormatError"));
+      }
     }
+  }
 
-    getImporter(format: string, organizationId: string = null): Importer {
-        const importer = this.getImporterInstance(format);
-        if (importer == null) {
-            return null;
-        }
-        importer.organizationId = organizationId;
-        return importer;
+  getImporter(format: string, organizationId: string = null): Importer {
+    const importer = this.getImporterInstance(format);
+    if (importer == null) {
+      return null;
     }
+    importer.organizationId = organizationId;
+    return importer;
+  }
 
-    private getImporterInstance(format: string) {
-        if (format == null || format === '') {
-            return null;
-        }
+  private getImporterInstance(format: string) {
+    if (format == null || format === "") {
+      return null;
+    }
 
-        switch (format) {
-            case 'bitwardencsv':
-                return new BitwardenCsvImporter();
-            case 'bitwardenjson':
-                return new BitwardenJsonImporter(this.cryptoService, this.i18nService);
-            case 'lastpasscsv':
-            case 'passboltcsv':
-                return new LastPassCsvImporter();
-            case 'keepassxcsv':
-                return new KeePassXCsvImporter();
-            case 'aviracsv':
-                return new AviraCsvImporter();
-            case 'blurcsv':
-                return new BlurCsvImporter();
-            case 'safeincloudxml':
-                return new SafeInCloudXmlImporter();
-            case 'padlockcsv':
-                return new PadlockCsvImporter();
-            case 'keepass2xml':
-                return new KeePass2XmlImporter();
-            case 'chromecsv':
-            case 'operacsv':
-            case 'vivaldicsv':
-                return new ChromeCsvImporter();
-            case 'firefoxcsv':
-                return new FirefoxCsvImporter();
-            case 'upmcsv':
-                return new UpmCsvImporter();
-            case 'saferpasscsv':
-                return new SaferPassCsvImporter();
-            case 'safaricsv':
-                return new SafariCsvImporter();
-            case 'meldiumcsv':
-                return new MeldiumCsvImporter();
-            case '1password1pif':
-                return new OnePassword1PifImporter();
-            case '1passwordwincsv':
-                return new OnePasswordWinCsvImporter();
-            case '1passwordmaccsv':
-                return new OnePasswordMacCsvImporter();
-            case 'keepercsv':
-                return new KeeperCsvImporter();
-            case 'passworddragonxml':
-                return new PasswordDragonXmlImporter();
-            case 'enpasscsv':
-                return new EnpassCsvImporter();
-            case 'enpassjson':
-                return new EnpassJsonImporter();
-            case 'pwsafexml':
-                return new PasswordSafeXmlImporter();
-            case 'dashlanejson':
-                return new DashlaneJsonImporter();
-            case 'msecurecsv':
-                return new MSecureCsvImporter();
-            case 'stickypasswordxml':
-                return new StickyPasswordXmlImporter();
-            case 'truekeycsv':
-                return new TrueKeyCsvImporter();
-            case 'clipperzhtml':
-                return new ClipperzHtmlImporter();
-            case 'roboformcsv':
-                return new RoboFormCsvImporter();
-            case 'ascendocsv':
-                return new AscendoCsvImporter();
-            case 'passwordbossjson':
-                return new PasswordBossJsonImporter();
-            case 'zohovaultcsv':
-                return new ZohoVaultCsvImporter();
-            case 'splashidcsv':
-                return new SplashIdCsvImporter();
-            case 'passkeepcsv':
-                return new PassKeepCsvImporter();
-            case 'gnomejson':
-                return new GnomeJsonImporter();
-            case 'passwordagentcsv':
-                return new PasswordAgentCsvImporter();
-            case 'passpackcsv':
-                return new PasspackCsvImporter();
-            case 'passmanjson':
-                return new PassmanJsonImporter();
-            case 'avastcsv':
-                return new AvastCsvImporter();
-            case 'avastjson':
-                return new AvastJsonImporter();
-            case 'fsecurefsk':
-                return new FSecureFskImporter();
-            case 'kasperskytxt':
-                return new KasperskyTxtImporter();
-            case 'remembearcsv':
-                return new RememBearCsvImporter();
-            case 'passwordwallettxt':
-                return new PasswordWalletTxtImporter();
-            case 'mykicsv':
-                return new MykiCsvImporter();
-            case 'securesafecsv':
-                return new SecureSafeCsvImporter();
-            case 'logmeoncecsv':
-                return new LogMeOnceCsvImporter();
-            case 'blackberrycsv':
-                return new BlackBerryCsvImporter();
-            case 'buttercupcsv':
-                return new ButtercupCsvImporter();
-            case 'codebookcsv':
-                return new CodebookCsvImporter();
-            case 'encryptrcsv':
-                return new EncryptrCsvImporter();
-            case 'yoticsv':
-                return new YotiCsvImporter();
-            case 'nordpasscsv':
-                return new NordPassCsvImporter();
-            default:
-                return null;
-        }
+    switch (format) {
+      case "bitwardencsv":
+        return new BitwardenCsvImporter();
+      case "bitwardenjson":
+        return new BitwardenJsonImporter(this.cryptoService, this.i18nService);
+      case "lastpasscsv":
+      case "passboltcsv":
+        return new LastPassCsvImporter();
+      case "keepassxcsv":
+        return new KeePassXCsvImporter();
+      case "aviracsv":
+        return new AviraCsvImporter();
+      case "blurcsv":
+        return new BlurCsvImporter();
+      case "safeincloudxml":
+        return new SafeInCloudXmlImporter();
+      case "padlockcsv":
+        return new PadlockCsvImporter();
+      case "keepass2xml":
+        return new KeePass2XmlImporter();
+      case "chromecsv":
+      case "operacsv":
+      case "vivaldicsv":
+        return new ChromeCsvImporter();
+      case "firefoxcsv":
+        return new FirefoxCsvImporter();
+      case "upmcsv":
+        return new UpmCsvImporter();
+      case "saferpasscsv":
+        return new SaferPassCsvImporter();
+      case "safaricsv":
+        return new SafariCsvImporter();
+      case "meldiumcsv":
+        return new MeldiumCsvImporter();
+      case "1password1pif":
+        return new OnePassword1PifImporter();
+      case "1passwordwincsv":
+        return new OnePasswordWinCsvImporter();
+      case "1passwordmaccsv":
+        return new OnePasswordMacCsvImporter();
+      case "keepercsv":
+        return new KeeperCsvImporter();
+      case "keeperjson":
+        return new KeeperJsonImporter();
+      case "passworddragonxml":
+        return new PasswordDragonXmlImporter();
+      case "enpasscsv":
+        return new EnpassCsvImporter();
+      case "enpassjson":
+        return new EnpassJsonImporter();
+      case "pwsafexml":
+        return new PasswordSafeXmlImporter();
+      case "dashlanejson":
+        return new DashlaneJsonImporter();
+      case "msecurecsv":
+        return new MSecureCsvImporter();
+      case "stickypasswordxml":
+        return new StickyPasswordXmlImporter();
+      case "truekeycsv":
+        return new TrueKeyCsvImporter();
+      case "clipperzhtml":
+        return new ClipperzHtmlImporter();
+      case "roboformcsv":
+        return new RoboFormCsvImporter();
+      case "ascendocsv":
+        return new AscendoCsvImporter();
+      case "passwordbossjson":
+        return new PasswordBossJsonImporter();
+      case "zohovaultcsv":
+        return new ZohoVaultCsvImporter();
+      case "splashidcsv":
+        return new SplashIdCsvImporter();
+      case "passkeepcsv":
+        return new PassKeepCsvImporter();
+      case "gnomejson":
+        return new GnomeJsonImporter();
+      case "passwordagentcsv":
+        return new PasswordAgentCsvImporter();
+      case "passpackcsv":
+        return new PasspackCsvImporter();
+      case "passmanjson":
+        return new PassmanJsonImporter();
+      case "avastcsv":
+        return new AvastCsvImporter();
+      case "avastjson":
+        return new AvastJsonImporter();
+      case "fsecurefsk":
+        return new FSecureFskImporter();
+      case "kasperskytxt":
+        return new KasperskyTxtImporter();
+      case "remembearcsv":
+        return new RememBearCsvImporter();
+      case "passwordwallettxt":
+        return new PasswordWalletTxtImporter();
+      case "mykicsv":
+        return new MykiCsvImporter();
+      case "securesafecsv":
+        return new SecureSafeCsvImporter();
+      case "logmeoncecsv":
+        return new LogMeOnceCsvImporter();
+      case "blackberrycsv":
+        return new BlackBerryCsvImporter();
+      case "buttercupcsv":
+        return new ButtercupCsvImporter();
+      case "codebookcsv":
+        return new CodebookCsvImporter();
+      case "encryptrcsv":
+        return new EncryptrCsvImporter();
+      case "yoticsv":
+        return new YotiCsvImporter();
+      case "nordpasscsv":
+        return new NordPassCsvImporter();
+      default:
+        return null;
     }
+  }
 
-    private async postImport(importResult: ImportResult, organizationId: string = null) {
-        if (organizationId == null) {
-            const request = new ImportCiphersRequest();
-            for (let i = 0; i < importResult.ciphers.length; i++) {
-                const c = await this.cipherService.encrypt(importResult.ciphers[i]);
-                request.ciphers.push(new CipherRequest(c));
-            }
-            if (importResult.folders != null) {
-                for (let i = 0; i < importResult.folders.length; i++) {
-                    const f = await this.folderService.encrypt(importResult.folders[i]);
-                    request.folders.push(new FolderRequest(f));
-                }
-            }
-            if (importResult.folderRelationships != null) {
-                importResult.folderRelationships.forEach(r =>
-                    request.folderRelationships.push(new KvpRequest(r[0], r[1])));
-            }
-            return await this.apiService.postImportCiphers(request);
-        } else {
-            const request = new ImportOrganizationCiphersRequest();
-            for (let i = 0; i < importResult.ciphers.length; i++) {
-                importResult.ciphers[i].organizationId = organizationId;
-                const c = await this.cipherService.encrypt(importResult.ciphers[i]);
-                request.ciphers.push(new CipherRequest(c));
-            }
-            if (importResult.collections != null) {
-                for (let i = 0; i < importResult.collections.length; i++) {
-                    importResult.collections[i].organizationId = organizationId;
-                    const c = await this.collectionService.encrypt(importResult.collections[i]);
-                    request.collections.push(new CollectionRequest(c));
-                }
-            }
-            if (importResult.collectionRelationships != null) {
-                importResult.collectionRelationships.forEach(r =>
-                    request.collectionRelationships.push(new KvpRequest(r[0], r[1])));
-            }
-            return await this.apiService.postImportOrganizationCiphers(organizationId, request);
+  private async postImport(importResult: ImportResult, organizationId: string = null) {
+    if (organizationId == null) {
+      const request = new ImportCiphersRequest();
+      for (let i = 0; i < importResult.ciphers.length; i++) {
+        const c = await this.cipherService.encrypt(importResult.ciphers[i]);
+        request.ciphers.push(new CipherRequest(c));
+      }
+      if (importResult.folders != null) {
+        for (let i = 0; i < importResult.folders.length; i++) {
+          const f = await this.folderService.encrypt(importResult.folders[i]);
+          request.folders.push(new FolderRequest(f));
         }
+      }
+      if (importResult.folderRelationships != null) {
+        importResult.folderRelationships.forEach((r) =>
+          request.folderRelationships.push(new KvpRequest(r[0], r[1]))
+        );
+      }
+      return await this.apiService.postImportCiphers(request);
+    } else {
+      const request = new ImportOrganizationCiphersRequest();
+      for (let i = 0; i < importResult.ciphers.length; i++) {
+        importResult.ciphers[i].organizationId = organizationId;
+        const c = await this.cipherService.encrypt(importResult.ciphers[i]);
+        request.ciphers.push(new CipherRequest(c));
+      }
+      if (importResult.collections != null) {
+        for (let i = 0; i < importResult.collections.length; i++) {
+          importResult.collections[i].organizationId = organizationId;
+          const c = await this.collectionService.encrypt(importResult.collections[i]);
+          request.collections.push(new CollectionRequest(c));
+        }
+      }
+      if (importResult.collectionRelationships != null) {
+        importResult.collectionRelationships.forEach((r) =>
+          request.collectionRelationships.push(new KvpRequest(r[0], r[1]))
+        );
+      }
+      return await this.apiService.postImportOrganizationCiphers(organizationId, request);
     }
+  }
 
-    private badData(c: CipherView) {
-        return (c.name == null || c.name === '--') &&
-            (c.type === CipherType.Login && c.login != null && Utils.isNullOrWhitespace(c.login.password));
-    }
+  private badData(c: CipherView) {
+    return (
+      (c.name == null || c.name === "--") &&
+      c.type === CipherType.Login &&
+      c.login != null &&
+      Utils.isNullOrWhitespace(c.login.password)
+    );
+  }
 
-    private handleServerError(errorResponse: ErrorResponse, importResult: ImportResult): Error {
-        if (errorResponse.validationErrors == null) {
-            return new Error(errorResponse.message);
-        }
+  private handleServerError(errorResponse: ErrorResponse, importResult: ImportResult): Error {
+    if (errorResponse.validationErrors == null) {
+      return new Error(errorResponse.message);
+    }
 
-        let errorMessage = '';
+    let errorMessage = "";
 
-        Object.entries(errorResponse.validationErrors).forEach(([key, value], index) => {
-            let item;
-            let itemType;
-            const i = Number(key.match(/[0-9]+/)[0]);
+    Object.entries(errorResponse.validationErrors).forEach(([key, value], index) => {
+      let item;
+      let itemType;
+      const i = Number(key.match(/[0-9]+/)[0]);
 
-            switch (key.match(/^\w+/)[0]) {
-                case 'Ciphers':
-                    item = importResult.ciphers[i];
-                    itemType = CipherType[item.type];
-                    break;
-                case 'Folders':
-                    item = importResult.folders[i];
-                    itemType = 'Folder';
-                    break;
-                case 'Collections':
-                    item = importResult.collections[i];
-                    itemType = 'Collection';
-                    break;
-                default:
-                    return;
-            }
+      switch (key.match(/^\w+/)[0]) {
+        case "Ciphers":
+          item = importResult.ciphers[i];
+          itemType = CipherType[item.type];
+          break;
+        case "Folders":
+          item = importResult.folders[i];
+          itemType = "Folder";
+          break;
+        case "Collections":
+          item = importResult.collections[i];
+          itemType = "Collection";
+          break;
+        default:
+          return;
+      }
 
-            if (index > 0) {
-                errorMessage += '\n\n';
-            }
+      if (index > 0) {
+        errorMessage += "\n\n";
+      }
 
-            if (itemType !== 'Folder' && itemType !== 'Collection') {
-                errorMessage += '[' + (i + 1) + '] ';
-            }
+      if (itemType !== "Folder" && itemType !== "Collection") {
+        errorMessage += "[" + (i + 1) + "] ";
+      }
 
-            errorMessage += '[' + itemType + '] "' + item.name + '": ' + value;
-        });
+      errorMessage += "[" + itemType + '] "' + item.name + '": ' + value;
+    });
 
-        return new Error(errorMessage);
-    }
+    return new Error(errorMessage);
+  }
 }
diff --git a/jslib/common/src/services/keyConnector.service.ts b/jslib/common/src/services/keyConnector.service.ts
index d597469f..7296d9b1 100644
--- a/jslib/common/src/services/keyConnector.service.ts
+++ b/jslib/common/src/services/keyConnector.service.ts
@@ -1,96 +1,98 @@
-import { ApiService } from '../abstractions/api.service';
-import { CryptoService } from '../abstractions/crypto.service';
-import { KeyConnectorService as KeyConnectorServiceAbstraction } from '../abstractions/keyConnector.service';
-import { LogService } from '../abstractions/log.service';
-import { StorageService } from '../abstractions/storage.service';
-import { TokenService } from '../abstractions/token.service';
-import { UserService } from '../abstractions/user.service';
+import { ApiService } from "../abstractions/api.service";
+import { CryptoService } from "../abstractions/crypto.service";
+import { KeyConnectorService as KeyConnectorServiceAbstraction } from "../abstractions/keyConnector.service";
+import { LogService } from "../abstractions/log.service";
+import { OrganizationService } from "../abstractions/organization.service";
+import { StateService } from "../abstractions/state.service";
+import { TokenService } from "../abstractions/token.service";
 
-import { OrganizationUserType } from '../enums/organizationUserType';
+import { OrganizationUserType } from "../enums/organizationUserType";
 
-import { Utils } from '../misc/utils';
+import { Utils } from "../misc/utils";
 
-import { SymmetricCryptoKey } from '../models/domain/symmetricCryptoKey';
+import { SymmetricCryptoKey } from "../models/domain/symmetricCryptoKey";
 
-import { KeyConnectorUserKeyRequest } from '../models/request/keyConnectorUserKeyRequest';
-
-const Keys = {
-    usesKeyConnector: 'usesKeyConnector',
-    convertAccountToKeyConnector: 'convertAccountToKeyConnector',
-};
+import { KeyConnectorUserKeyRequest } from "../models/request/keyConnectorUserKeyRequest";
 
 export class KeyConnectorService implements KeyConnectorServiceAbstraction {
-    private usesKeyConnector?: boolean = null;
-
-    constructor(private storageService: StorageService, private userService: UserService,
-        private cryptoService: CryptoService, private apiService: ApiService,
-        private tokenService: TokenService, private logService: LogService) { }
-
-    setUsesKeyConnector(usesKeyConnector: boolean) {
-        this.usesKeyConnector = usesKeyConnector;
-        return this.storageService.save(Keys.usesKeyConnector, usesKeyConnector);
-    }
-
-    async getUsesKeyConnector(): Promise<boolean> {
-        return this.usesKeyConnector ??= await this.storageService.get<boolean>(Keys.usesKeyConnector);
-    }
-
-    async userNeedsMigration() {
-        const loggedInUsingSso = this.tokenService.getIsExternal();
-        const requiredByOrganization = await this.getManagingOrganization() != null;
-        const userIsNotUsingKeyConnector = !await this.getUsesKeyConnector();
-
-        return loggedInUsingSso && requiredByOrganization && userIsNotUsingKeyConnector;
-    }
-
-    async migrateUser() {
-        const organization = await this.getManagingOrganization();
-        const key = await this.cryptoService.getKey();
-
-        try {
-            const keyConnectorRequest = new KeyConnectorUserKeyRequest(key.encKeyB64);
-            await this.apiService.postUserKeyToKeyConnector(organization.keyConnectorUrl, keyConnectorRequest);
-        } catch (e) {
-            throw new Error('Unable to reach key connector');
-        }
-
-        await this.apiService.postConvertToKeyConnector();
-    }
-
-    async getAndSetKey(url: string) {
-        try {
-            const userKeyResponse = await this.apiService.getUserKeyFromKeyConnector(url);
-            const keyArr = Utils.fromB64ToArray(userKeyResponse.key);
-            const k = new SymmetricCryptoKey(keyArr);
-            await this.cryptoService.setKey(k);
-        } catch (e) {
-            this.logService.error(e);
-            throw new Error('Unable to reach key connector');
-        }
-    }
-
-    async getManagingOrganization() {
-        const orgs = await this.userService.getAllOrganizations();
-        return orgs.find(o =>
-            o.keyConnectorEnabled &&
-            o.type !== OrganizationUserType.Admin &&
-            o.type !== OrganizationUserType.Owner &&
-            !o.isProviderUser);
-    }
-
-    async setConvertAccountRequired(status: boolean) {
-        await this.storageService.save(Keys.convertAccountToKeyConnector, status);
-    }
-
-    async getConvertAccountRequired(): Promise<boolean> {
-        return await this.storageService.get(Keys.convertAccountToKeyConnector);
-    }
-
-    async removeConvertAccountRequired() {
-        await this.storageService.remove(Keys.convertAccountToKeyConnector);
+  constructor(
+    private stateService: StateService,
+    private cryptoService: CryptoService,
+    private apiService: ApiService,
+    private tokenService: TokenService,
+    private logService: LogService,
+    private organizationService: OrganizationService
+  ) {}
+
+  setUsesKeyConnector(usesKeyConnector: boolean) {
+    return this.stateService.setUsesKeyConnector(usesKeyConnector);
+  }
+
+  async getUsesKeyConnector(): Promise<boolean> {
+    return await this.stateService.getUsesKeyConnector();
+  }
+
+  async userNeedsMigration() {
+    const loggedInUsingSso = await this.tokenService.getIsExternal();
+    const requiredByOrganization = (await this.getManagingOrganization()) != null;
+    const userIsNotUsingKeyConnector = !(await this.getUsesKeyConnector());
+
+    return loggedInUsingSso && requiredByOrganization && userIsNotUsingKeyConnector;
+  }
+
+  async migrateUser() {
+    const organization = await this.getManagingOrganization();
+    const key = await this.cryptoService.getKey();
+    const keyConnectorRequest = new KeyConnectorUserKeyRequest(key.encKeyB64);
+
+    try {
+      await this.apiService.postUserKeyToKeyConnector(
+        organization.keyConnectorUrl,
+        keyConnectorRequest
+      );
+    } catch (e) {
+      throw new Error("Unable to reach key connector");
     }
 
-    async clear() {
-        await this.removeConvertAccountRequired();
+    await this.apiService.postConvertToKeyConnector();
+  }
+
+  async getAndSetKey(url: string) {
+    try {
+      const userKeyResponse = await this.apiService.getUserKeyFromKeyConnector(url);
+      const keyArr = Utils.fromB64ToArray(userKeyResponse.key);
+      const k = new SymmetricCryptoKey(keyArr);
+      await this.cryptoService.setKey(k);
+    } catch (e) {
+      this.logService.error(e);
+      throw new Error("Unable to reach key connector");
     }
+  }
+
+  async getManagingOrganization() {
+    const orgs = await this.organizationService.getAll();
+    return orgs.find(
+      (o) =>
+        o.keyConnectorEnabled &&
+        o.type !== OrganizationUserType.Admin &&
+        o.type !== OrganizationUserType.Owner &&
+        !o.isProviderUser
+    );
+  }
+
+  async setConvertAccountRequired(status: boolean) {
+    await this.stateService.setConvertAccountToKeyConnector(status);
+  }
+
+  async getConvertAccountRequired(): Promise<boolean> {
+    return await this.stateService.getConvertAccountToKeyConnector();
+  }
+
+  async removeConvertAccountRequired() {
+    await this.stateService.setConvertAccountToKeyConnector(null);
+  }
+
+  async clear() {
+    await this.removeConvertAccountRequired();
+  }
 }
diff --git a/jslib/common/src/services/noopMessaging.service.ts b/jslib/common/src/services/noopMessaging.service.ts
index c1a1443c..d1a60bc5 100644
--- a/jslib/common/src/services/noopMessaging.service.ts
+++ b/jslib/common/src/services/noopMessaging.service.ts
@@ -1,7 +1,7 @@
-import { MessagingService } from '../abstractions/messaging.service';
+import { MessagingService } from "../abstractions/messaging.service";
 
 export class NoopMessagingService implements MessagingService {
-    send(subscriber: string, arg: any = {}) {
-        // Do nothing...
-    }
+  send(subscriber: string, arg: any = {}) {
+    // Do nothing...
+  }
 }
diff --git a/jslib/common/src/services/notifications.service.ts b/jslib/common/src/services/notifications.service.ts
index b1d5723b..4974b282 100644
--- a/jslib/common/src/services/notifications.service.ts
+++ b/jslib/common/src/services/notifications.service.ts
@@ -1,217 +1,231 @@
-import * as signalR from '@microsoft/signalr';
-import * as signalRMsgPack from '@microsoft/signalr-protocol-msgpack';
+import * as signalR from "@microsoft/signalr";
+import * as signalRMsgPack from "@microsoft/signalr-protocol-msgpack";
 
-import { NotificationType } from '../enums/notificationType';
+import { NotificationType } from "../enums/notificationType";
 
-import { ApiService } from '../abstractions/api.service';
-import { AppIdService } from '../abstractions/appId.service';
-import { EnvironmentService } from '../abstractions/environment.service';
-import { LogService } from '../abstractions/log.service';
-import { NotificationsService as NotificationsServiceAbstraction } from '../abstractions/notifications.service';
-import { SyncService } from '../abstractions/sync.service';
-import { UserService } from '../abstractions/user.service';
-import { VaultTimeoutService } from '../abstractions/vaultTimeout.service';
+import { ApiService } from "../abstractions/api.service";
+import { AppIdService } from "../abstractions/appId.service";
+import { EnvironmentService } from "../abstractions/environment.service";
+import { LogService } from "../abstractions/log.service";
+import { NotificationsService as NotificationsServiceAbstraction } from "../abstractions/notifications.service";
+import { StateService } from "../abstractions/state.service";
+import { SyncService } from "../abstractions/sync.service";
+import { VaultTimeoutService } from "../abstractions/vaultTimeout.service";
 
 import {
-    NotificationResponse,
-    SyncCipherNotification,
-    SyncFolderNotification,
-    SyncSendNotification,
-} from '../models/response/notificationResponse';
+  NotificationResponse,
+  SyncCipherNotification,
+  SyncFolderNotification,
+  SyncSendNotification,
+} from "../models/response/notificationResponse";
 
 export class NotificationsService implements NotificationsServiceAbstraction {
-    private signalrConnection: signalR.HubConnection;
-    private url: string;
-    private connected = false;
-    private inited = false;
-    private inactive = false;
-    private reconnectTimer: any = null;
-
-    constructor(private userService: UserService, private syncService: SyncService,
-        private appIdService: AppIdService, private apiService: ApiService,
-        private vaultTimeoutService: VaultTimeoutService, private environmentService: EnvironmentService,
-        private logoutCallback: () => Promise<void>, private logService: LogService) {
-        this.environmentService.urls.subscribe(() => {
-            if (!this.inited) {
-                return;
-            }
-
-            this.init();
-        });
-    }
-
-    async init(): Promise<void> {
-        this.inited = false;
-        this.url = this.environmentService.getNotificationsUrl();
-
-        // Set notifications server URL to `https://-` to effectively disable communication
-        // with the notifications server from the client app
-        if (this.url === 'https://-') {
-            return;
-        }
-
-        if (this.signalrConnection != null) {
-            this.signalrConnection.off('ReceiveMessage');
-            this.signalrConnection.off('Heartbeat');
-            await this.signalrConnection.stop();
-            this.connected = false;
-            this.signalrConnection = null;
-        }
+  private signalrConnection: signalR.HubConnection;
+  private url: string;
+  private connected = false;
+  private inited = false;
+  private inactive = false;
+  private reconnectTimer: any = null;
+
+  constructor(
+    private syncService: SyncService,
+    private appIdService: AppIdService,
+    private apiService: ApiService,
+    private vaultTimeoutService: VaultTimeoutService,
+    private environmentService: EnvironmentService,
+    private logoutCallback: () => Promise<void>,
+    private logService: LogService,
+    private stateService: StateService
+  ) {
+    this.environmentService.urls.subscribe(() => {
+      if (!this.inited) {
+        return;
+      }
+
+      this.init();
+    });
+  }
+
+  async init(): Promise<void> {
+    this.inited = false;
+    this.url = this.environmentService.getNotificationsUrl();
+
+    // Set notifications server URL to `https://-` to effectively disable communication
+    // with the notifications server from the client app
+    if (this.url === "https://-") {
+      return;
+    }
 
-        this.signalrConnection = new signalR.HubConnectionBuilder()
-            .withUrl(this.url + '/hub', {
-                accessTokenFactory: () => this.apiService.getActiveBearerToken(),
-                skipNegotiation: true,
-                transport: signalR.HttpTransportType.WebSockets,
-            })
-            .withHubProtocol(new signalRMsgPack.MessagePackHubProtocol() as signalR.IHubProtocol)
-            // .configureLogging(signalR.LogLevel.Trace)
-            .build();
-
-        this.signalrConnection.on('ReceiveMessage',
-            (data: any) => this.processNotification(new NotificationResponse(data)));
-        this.signalrConnection.on('Heartbeat',
-            (data: any) => { /*console.log('Heartbeat!');*/ });
-        this.signalrConnection.onclose(() => {
-            this.connected = false;
-            this.reconnect(true);
-        });
-        this.inited = true;
-        if (await this.isAuthedAndUnlocked()) {
-            await this.reconnect(false);
-        }
+    if (this.signalrConnection != null) {
+      this.signalrConnection.off("ReceiveMessage");
+      this.signalrConnection.off("Heartbeat");
+      await this.signalrConnection.stop();
+      this.connected = false;
+      this.signalrConnection = null;
     }
 
-    async updateConnection(sync = false): Promise<void> {
-        if (!this.inited) {
-            return;
-        }
-        try {
-            if (await this.isAuthedAndUnlocked()) {
-                await this.reconnect(sync);
-            } else {
-                await this.signalrConnection.stop();
-            }
-        } catch (e) {
-            this.logService.error(e.toString());
-        }
+    this.signalrConnection = new signalR.HubConnectionBuilder()
+      .withUrl(this.url + "/hub", {
+        accessTokenFactory: () => this.apiService.getActiveBearerToken(),
+        skipNegotiation: true,
+        transport: signalR.HttpTransportType.WebSockets,
+      })
+      .withHubProtocol(new signalRMsgPack.MessagePackHubProtocol() as signalR.IHubProtocol)
+      // .configureLogging(signalR.LogLevel.Trace)
+      .build();
+
+    this.signalrConnection.on("ReceiveMessage", (data: any) =>
+      this.processNotification(new NotificationResponse(data))
+    );
+    this.signalrConnection.on("Heartbeat", (data: any) => {
+      /*console.log('Heartbeat!');*/
+    });
+    this.signalrConnection.onclose(() => {
+      this.connected = false;
+      this.reconnect(true);
+    });
+    this.inited = true;
+    if (await this.isAuthedAndUnlocked()) {
+      await this.reconnect(false);
     }
+  }
 
-    async reconnectFromActivity(): Promise<void> {
-        this.inactive = false;
-        if (this.inited && !this.connected) {
-            await this.reconnect(true);
-        }
+  async updateConnection(sync = false): Promise<void> {
+    if (!this.inited) {
+      return;
+    }
+    try {
+      if (await this.isAuthedAndUnlocked()) {
+        await this.reconnect(sync);
+      } else {
+        await this.signalrConnection.stop();
+      }
+    } catch (e) {
+      this.logService.error(e.toString());
     }
+  }
 
-    async disconnectFromInactivity(): Promise<void> {
-        this.inactive = true;
-        if (this.inited && this.connected) {
-            await this.signalrConnection.stop();
-        }
+  async reconnectFromActivity(): Promise<void> {
+    this.inactive = false;
+    if (this.inited && !this.connected) {
+      await this.reconnect(true);
     }
+  }
 
-    private async processNotification(notification: NotificationResponse) {
-        const appId = await this.appIdService.getAppId();
-        if (notification == null || notification.contextId === appId) {
-            return;
-        }
+  async disconnectFromInactivity(): Promise<void> {
+    this.inactive = true;
+    if (this.inited && this.connected) {
+      await this.signalrConnection.stop();
+    }
+  }
 
-        const isAuthenticated = await this.userService.isAuthenticated();
-        const payloadUserId = notification.payload.userId || notification.payload.UserId;
-        const myUserId = await this.userService.getUserId();
-        if (isAuthenticated && payloadUserId != null && payloadUserId !== myUserId) {
-            return;
-        }
+  private async processNotification(notification: NotificationResponse) {
+    const appId = await this.appIdService.getAppId();
+    if (notification == null || notification.contextId === appId) {
+      return;
+    }
 
-        switch (notification.type) {
-            case NotificationType.SyncCipherCreate:
-            case NotificationType.SyncCipherUpdate:
-                await this.syncService.syncUpsertCipher(notification.payload as SyncCipherNotification,
-                    notification.type === NotificationType.SyncCipherUpdate);
-                break;
-            case NotificationType.SyncCipherDelete:
-            case NotificationType.SyncLoginDelete:
-                await this.syncService.syncDeleteCipher(notification.payload as SyncCipherNotification);
-                break;
-            case NotificationType.SyncFolderCreate:
-            case NotificationType.SyncFolderUpdate:
-                await this.syncService.syncUpsertFolder(notification.payload as SyncFolderNotification,
-                    notification.type === NotificationType.SyncFolderUpdate);
-                break;
-            case NotificationType.SyncFolderDelete:
-                await this.syncService.syncDeleteFolder(notification.payload as SyncFolderNotification);
-                break;
-            case NotificationType.SyncVault:
-            case NotificationType.SyncCiphers:
-            case NotificationType.SyncSettings:
-                if (isAuthenticated) {
-                    await this.syncService.fullSync(false);
-                }
-                break;
-            case NotificationType.SyncOrgKeys:
-                if (isAuthenticated) {
-                    await this.syncService.fullSync(true);
-                    // Stop so a reconnect can be made
-                    await this.signalrConnection.stop();
-                }
-                break;
-            case NotificationType.LogOut:
-                if (isAuthenticated) {
-                    this.logoutCallback();
-                }
-                break;
-            case NotificationType.SyncSendCreate:
-            case NotificationType.SyncSendUpdate:
-                await this.syncService.syncUpsertSend(notification.payload as SyncSendNotification,
-                    notification.type === NotificationType.SyncSendUpdate);
-                break;
-            case NotificationType.SyncSendDelete:
-                await this.syncService.syncDeleteSend(notification.payload as SyncSendNotification);
-            default:
-                break;
-        }
+    const isAuthenticated = await this.stateService.getIsAuthenticated();
+    const payloadUserId = notification.payload.userId || notification.payload.UserId;
+    const myUserId = await this.stateService.getUserId();
+    if (isAuthenticated && payloadUserId != null && payloadUserId !== myUserId) {
+      return;
     }
 
-    private async reconnect(sync: boolean) {
-        if (this.reconnectTimer != null) {
-            clearTimeout(this.reconnectTimer);
-            this.reconnectTimer = null;
-        }
-        if (this.connected || !this.inited || this.inactive) {
-            return;
-        }
-        const authedAndUnlocked = await this.isAuthedAndUnlocked();
-        if (!authedAndUnlocked) {
-            return;
-        }
+    switch (notification.type) {
+      case NotificationType.SyncCipherCreate:
+      case NotificationType.SyncCipherUpdate:
+        await this.syncService.syncUpsertCipher(
+          notification.payload as SyncCipherNotification,
+          notification.type === NotificationType.SyncCipherUpdate
+        );
+        break;
+      case NotificationType.SyncCipherDelete:
+      case NotificationType.SyncLoginDelete:
+        await this.syncService.syncDeleteCipher(notification.payload as SyncCipherNotification);
+        break;
+      case NotificationType.SyncFolderCreate:
+      case NotificationType.SyncFolderUpdate:
+        await this.syncService.syncUpsertFolder(
+          notification.payload as SyncFolderNotification,
+          notification.type === NotificationType.SyncFolderUpdate
+        );
+        break;
+      case NotificationType.SyncFolderDelete:
+        await this.syncService.syncDeleteFolder(notification.payload as SyncFolderNotification);
+        break;
+      case NotificationType.SyncVault:
+      case NotificationType.SyncCiphers:
+      case NotificationType.SyncSettings:
+        if (isAuthenticated) {
+          await this.syncService.fullSync(false);
+        }
+        break;
+      case NotificationType.SyncOrgKeys:
+        if (isAuthenticated) {
+          await this.syncService.fullSync(true);
+          // Stop so a reconnect can be made
+          await this.signalrConnection.stop();
+        }
+        break;
+      case NotificationType.LogOut:
+        if (isAuthenticated) {
+          this.logoutCallback();
+        }
+        break;
+      case NotificationType.SyncSendCreate:
+      case NotificationType.SyncSendUpdate:
+        await this.syncService.syncUpsertSend(
+          notification.payload as SyncSendNotification,
+          notification.type === NotificationType.SyncSendUpdate
+        );
+        break;
+      case NotificationType.SyncSendDelete:
+        await this.syncService.syncDeleteSend(notification.payload as SyncSendNotification);
+      default:
+        break;
+    }
+  }
 
-        try {
-            await this.signalrConnection.start();
-            this.connected = true;
-            if (sync) {
-                await this.syncService.fullSync(false);
-            }
-        } catch (e) {
-            this.logService.error(e);
-        }
+  private async reconnect(sync: boolean) {
+    if (this.reconnectTimer != null) {
+      clearTimeout(this.reconnectTimer);
+      this.reconnectTimer = null;
+    }
+    if (this.connected || !this.inited || this.inactive) {
+      return;
+    }
+    const authedAndUnlocked = await this.isAuthedAndUnlocked();
+    if (!authedAndUnlocked) {
+      return;
+    }
 
-        if (!this.connected) {
-            this.reconnectTimer = setTimeout(() => this.reconnect(sync), this.random(120000, 300000));
-        }
+    try {
+      await this.signalrConnection.start();
+      this.connected = true;
+      if (sync) {
+        await this.syncService.fullSync(false);
+      }
+    } catch (e) {
+      this.logService.error(e);
     }
 
-    private async isAuthedAndUnlocked() {
-        if (await this.userService.isAuthenticated()) {
-            const locked = await this.vaultTimeoutService.isLocked();
-            return !locked;
-        }
-        return false;
+    if (!this.connected) {
+      this.reconnectTimer = setTimeout(() => this.reconnect(sync), this.random(120000, 300000));
     }
+  }
 
-    private random(min: number, max: number) {
-        min = Math.ceil(min);
-        max = Math.floor(max);
-        return Math.floor(Math.random() * (max - min + 1)) + min;
+  private async isAuthedAndUnlocked() {
+    if (await this.stateService.getIsAuthenticated()) {
+      const locked = await this.vaultTimeoutService.isLocked();
+      return !locked;
     }
+    return false;
+  }
+
+  private random(min: number, max: number) {
+    min = Math.ceil(min);
+    max = Math.floor(max);
+    return Math.floor(Math.random() * (max - min + 1)) + min;
+  }
 }
diff --git a/jslib/common/src/services/organization.service.ts b/jslib/common/src/services/organization.service.ts
new file mode 100644
index 00000000..10a86632
--- /dev/null
+++ b/jslib/common/src/services/organization.service.ts
@@ -0,0 +1,50 @@
+import { OrganizationService as OrganizationServiceAbstraction } from "../abstractions/organization.service";
+import { StateService } from "../abstractions/state.service";
+
+import { OrganizationData } from "../models/data/organizationData";
+
+import { Organization } from "../models/domain/organization";
+
+export class OrganizationService implements OrganizationServiceAbstraction {
+  constructor(private stateService: StateService) {}
+
+  async get(id: string): Promise<Organization> {
+    const organizations = await this.stateService.getOrganizations();
+    if (organizations == null || !organizations.hasOwnProperty(id)) {
+      return null;
+    }
+
+    return new Organization(organizations[id]);
+  }
+
+  async getByIdentifier(identifier: string): Promise<Organization> {
+    const organizations = await this.getAll();
+    if (organizations == null || organizations.length === 0) {
+      return null;
+    }
+
+    return organizations.find((o) => o.identifier === identifier);
+  }
+
+  async getAll(userId?: string): Promise<Organization[]> {
+    const organizations = await this.stateService.getOrganizations({ userId: userId });
+    const response: Organization[] = [];
+    for (const id in organizations) {
+      if (organizations.hasOwnProperty(id) && !organizations[id].isProviderUser) {
+        response.push(new Organization(organizations[id]));
+      }
+    }
+    return response;
+  }
+
+  async save(organizations: { [id: string]: OrganizationData }) {
+    return await this.stateService.setOrganizations(organizations);
+  }
+
+  async canManageSponsorships(): Promise<boolean> {
+    const orgs = await this.getAll();
+    return orgs.some(
+      (o) => o.familySponsorshipAvailable || o.familySponsorshipFriendlyName !== null
+    );
+  }
+}
diff --git a/jslib/common/src/services/passwordGeneration.service.ts b/jslib/common/src/services/passwordGeneration.service.ts
index ab4af5b9..4e5d5872 100644
--- a/jslib/common/src/services/passwordGeneration.service.ts
+++ b/jslib/common/src/services/passwordGeneration.service.ts
@@ -1,560 +1,575 @@
-import * as zxcvbn from 'zxcvbn';
+import * as zxcvbn from "zxcvbn";
 
-import { EncString } from '../models/domain/encString';
-import { GeneratedPasswordHistory } from '../models/domain/generatedPasswordHistory';
-import { PasswordGeneratorPolicyOptions } from '../models/domain/passwordGeneratorPolicyOptions';
-import { Policy } from '../models/domain/policy';
+import { EncString } from "../models/domain/encString";
+import { GeneratedPasswordHistory } from "../models/domain/generatedPasswordHistory";
+import { PasswordGeneratorPolicyOptions } from "../models/domain/passwordGeneratorPolicyOptions";
+import { Policy } from "../models/domain/policy";
 
-import { CryptoService } from '../abstractions/crypto.service';
-import {
-    PasswordGenerationService as PasswordGenerationServiceAbstraction,
-} from '../abstractions/passwordGeneration.service';
-import { PolicyService } from '../abstractions/policy.service';
-import { StorageService } from '../abstractions/storage.service';
+import { CryptoService } from "../abstractions/crypto.service";
+import { PasswordGenerationService as PasswordGenerationServiceAbstraction } from "../abstractions/passwordGeneration.service";
+import { PolicyService } from "../abstractions/policy.service";
+import { StateService } from "../abstractions/state.service";
 
-import { EEFLongWordList } from '../misc/wordlist';
+import { EEFLongWordList } from "../misc/wordlist";
 
-import { PolicyType } from '../enums/policyType';
+import { PolicyType } from "../enums/policyType";
 
 const DefaultOptions = {
-    length: 14,
-    ambiguous: false,
-    number: true,
-    minNumber: 1,
-    uppercase: true,
-    minUppercase: 0,
-    lowercase: true,
-    minLowercase: 0,
-    special: false,
-    minSpecial: 1,
-    type: 'password',
-    numWords: 3,
-    wordSeparator: '-',
-    capitalize: false,
-    includeNumber: false,
-};
-
-const Keys = {
-    options: 'passwordGenerationOptions',
-    history: 'generatedPasswordHistory',
+  length: 14,
+  ambiguous: false,
+  number: true,
+  minNumber: 1,
+  uppercase: true,
+  minUppercase: 0,
+  lowercase: true,
+  minLowercase: 0,
+  special: false,
+  minSpecial: 1,
+  type: "password",
+  numWords: 3,
+  wordSeparator: "-",
+  capitalize: false,
+  includeNumber: false,
 };
 
 const MaxPasswordsInHistory = 100;
 
 export class PasswordGenerationService implements PasswordGenerationServiceAbstraction {
-    private optionsCache: any;
-    private history: GeneratedPasswordHistory[];
-
-    constructor(private cryptoService: CryptoService, private storageService: StorageService,
-        private policyService: PolicyService) { }
-
-    async generatePassword(options: any): Promise<string> {
-        // overload defaults with given options
-        const o = Object.assign({}, DefaultOptions, options);
-
-        if (o.type === 'passphrase') {
-            return this.generatePassphrase(options);
-        }
-
-        // sanitize
-        this.sanitizePasswordLength(o, true);
-
-        const minLength: number = o.minUppercase + o.minLowercase + o.minNumber + o.minSpecial;
-        if (o.length < minLength) {
-            o.length = minLength;
-        }
-
-        const positions: string[] = [];
-        if (o.lowercase && o.minLowercase > 0) {
-            for (let i = 0; i < o.minLowercase; i++) {
-                positions.push('l');
-            }
-        }
-        if (o.uppercase && o.minUppercase > 0) {
-            for (let i = 0; i < o.minUppercase; i++) {
-                positions.push('u');
-            }
-        }
-        if (o.number && o.minNumber > 0) {
-            for (let i = 0; i < o.minNumber; i++) {
-                positions.push('n');
-            }
-        }
-        if (o.special && o.minSpecial > 0) {
-            for (let i = 0; i < o.minSpecial; i++) {
-                positions.push('s');
-            }
-        }
-        while (positions.length < o.length) {
-            positions.push('a');
-        }
-
-        // shuffle
-        await this.shuffleArray(positions);
-
-        // build out the char sets
-        let allCharSet = '';
-
-        let lowercaseCharSet = 'abcdefghijkmnopqrstuvwxyz';
-        if (o.ambiguous) {
-            lowercaseCharSet += 'l';
-        }
-        if (o.lowercase) {
-            allCharSet += lowercaseCharSet;
-        }
-
-        let uppercaseCharSet = 'ABCDEFGHJKLMNPQRSTUVWXYZ';
-        if (o.ambiguous) {
-            uppercaseCharSet += 'IO';
-        }
-        if (o.uppercase) {
-            allCharSet += uppercaseCharSet;
-        }
-
-        let numberCharSet = '23456789';
-        if (o.ambiguous) {
-            numberCharSet += '01';
-        }
-        if (o.number) {
-            allCharSet += numberCharSet;
-        }
-
-        const specialCharSet = '!@#$%^&*';
-        if (o.special) {
-            allCharSet += specialCharSet;
-        }
-
-        let password = '';
-        for (let i = 0; i < o.length; i++) {
-            let positionChars: string;
-            switch (positions[i]) {
-                case 'l':
-                    positionChars = lowercaseCharSet;
-                    break;
-                case 'u':
-                    positionChars = uppercaseCharSet;
-                    break;
-                case 'n':
-                    positionChars = numberCharSet;
-                    break;
-                case 's':
-                    positionChars = specialCharSet;
-                    break;
-                case 'a':
-                    positionChars = allCharSet;
-                    break;
-                default:
-                    break;
-            }
-
-            const randomCharIndex = await this.cryptoService.randomNumber(0, positionChars.length - 1);
-            password += positionChars.charAt(randomCharIndex);
-        }
-
-        return password;
-    }
-
-    async generatePassphrase(options: any): Promise<string> {
-        const o = Object.assign({}, DefaultOptions, options);
-
-        if (o.numWords == null || o.numWords <= 2) {
-            o.numWords = DefaultOptions.numWords;
-        }
-        if (o.wordSeparator == null || o.wordSeparator.length === 0 || o.wordSeparator.length > 1) {
-            o.wordSeparator = ' ';
-        }
-        if (o.capitalize == null) {
-            o.capitalize = false;
-        }
-        if (o.includeNumber == null) {
-            o.includeNumber = false;
-        }
-
-        const listLength = EEFLongWordList.length - 1;
-        const wordList = new Array(o.numWords);
-        for (let i = 0; i < o.numWords; i++) {
-            const wordIndex = await this.cryptoService.randomNumber(0, listLength);
-            if (o.capitalize) {
-                wordList[i] = this.capitalize(EEFLongWordList[wordIndex]);
-            } else {
-                wordList[i] = EEFLongWordList[wordIndex];
-            }
-        }
-
-        if (o.includeNumber) {
-            await this.appendRandomNumberToRandomWord(wordList);
-        }
-        return wordList.join(o.wordSeparator);
-    }
-
-    async getOptions(): Promise<[any, PasswordGeneratorPolicyOptions]> {
-        if (this.optionsCache == null) {
-            const options = await this.storageService.get(Keys.options);
-            if (options == null) {
-                this.optionsCache = DefaultOptions;
-            } else {
-                this.optionsCache = Object.assign({}, DefaultOptions, options);
-            }
-        }
-        const enforcedOptions = await this.enforcePasswordGeneratorPoliciesOnOptions(this.optionsCache);
-        this.optionsCache = enforcedOptions[0];
-        return [this.optionsCache, enforcedOptions[1]];
-    }
-
-    async enforcePasswordGeneratorPoliciesOnOptions(options: any): Promise<[any, PasswordGeneratorPolicyOptions]> {
-        let enforcedPolicyOptions = await this.getPasswordGeneratorPolicyOptions();
-        if (enforcedPolicyOptions != null) {
-            if (options.length < enforcedPolicyOptions.minLength) {
-                options.length = enforcedPolicyOptions.minLength;
-            }
-
-            if (enforcedPolicyOptions.useUppercase) {
-                options.uppercase = true;
-            }
-
-            if (enforcedPolicyOptions.useLowercase) {
-                options.lowercase = true;
-            }
-
-            if (enforcedPolicyOptions.useNumbers) {
-                options.number = true;
-            }
-
-            if (options.minNumber < enforcedPolicyOptions.numberCount) {
-                options.minNumber = enforcedPolicyOptions.numberCount;
-            }
-
-            if (enforcedPolicyOptions.useSpecial) {
-                options.special = true;
-            }
-
-            if (options.minSpecial < enforcedPolicyOptions.specialCount) {
-                options.minSpecial = enforcedPolicyOptions.specialCount;
-            }
-
-            // Must normalize these fields because the receiving call expects all options to pass the current rules
-            if (options.minSpecial + options.minNumber > options.length) {
-                options.minSpecial = options.length - options.minNumber;
-            }
-
-            if (options.numWords < enforcedPolicyOptions.minNumberWords) {
-                options.numWords = enforcedPolicyOptions.minNumberWords;
-            }
-
-            if (enforcedPolicyOptions.capitalize) {
-                options.capitalize = true;
-            }
-
-            if (enforcedPolicyOptions.includeNumber) {
-                options.includeNumber = true;
-            }
-
-            // Force default type if password/passphrase selected via policy
-            if (enforcedPolicyOptions.defaultType === 'password' ||
-                enforcedPolicyOptions.defaultType === 'passphrase') {
-                options.type = enforcedPolicyOptions.defaultType;
-            }
-        } else { // UI layer expects an instantiated object to prevent more explicit null checks
-            enforcedPolicyOptions = new PasswordGeneratorPolicyOptions();
-        }
-        return [options, enforcedPolicyOptions];
-    }
-
-    async getPasswordGeneratorPolicyOptions(): Promise<PasswordGeneratorPolicyOptions> {
-        const policies: Policy[] = this.policyService == null ? null :
-            await this.policyService.getAll(PolicyType.PasswordGenerator);
-        let enforcedOptions: PasswordGeneratorPolicyOptions = null;
-
-        if (policies == null || policies.length === 0) {
-            return enforcedOptions;
-        }
-
-        policies.forEach(currentPolicy => {
-            if (!currentPolicy.enabled || currentPolicy.data == null) {
-                return;
-            }
-
-            if (enforcedOptions == null) {
-                enforcedOptions = new PasswordGeneratorPolicyOptions();
-            }
-
-            // Password wins in multi-org collisions
-            if (currentPolicy.data.defaultType != null && enforcedOptions.defaultType !== 'password') {
-                enforcedOptions.defaultType = currentPolicy.data.defaultType;
-            }
-
-            if (currentPolicy.data.minLength != null
-                && currentPolicy.data.minLength > enforcedOptions.minLength) {
-                enforcedOptions.minLength = currentPolicy.data.minLength;
-            }
-
-            if (currentPolicy.data.useUpper) {
-                enforcedOptions.useUppercase = true;
-            }
-
-            if (currentPolicy.data.useLower) {
-                enforcedOptions.useLowercase = true;
-            }
-
-            if (currentPolicy.data.useNumbers) {
-                enforcedOptions.useNumbers = true;
-            }
+  constructor(
+    private cryptoService: CryptoService,
+    private policyService: PolicyService,
+    private stateService: StateService
+  ) {}
+
+  async generatePassword(options: any): Promise<string> {
+    // overload defaults with given options
+    const o = Object.assign({}, DefaultOptions, options);
+
+    if (o.type === "passphrase") {
+      return this.generatePassphrase(options);
+    }
+
+    // sanitize
+    this.sanitizePasswordLength(o, true);
+
+    const minLength: number = o.minUppercase + o.minLowercase + o.minNumber + o.minSpecial;
+    if (o.length < minLength) {
+      o.length = minLength;
+    }
+
+    const positions: string[] = [];
+    if (o.lowercase && o.minLowercase > 0) {
+      for (let i = 0; i < o.minLowercase; i++) {
+        positions.push("l");
+      }
+    }
+    if (o.uppercase && o.minUppercase > 0) {
+      for (let i = 0; i < o.minUppercase; i++) {
+        positions.push("u");
+      }
+    }
+    if (o.number && o.minNumber > 0) {
+      for (let i = 0; i < o.minNumber; i++) {
+        positions.push("n");
+      }
+    }
+    if (o.special && o.minSpecial > 0) {
+      for (let i = 0; i < o.minSpecial; i++) {
+        positions.push("s");
+      }
+    }
+    while (positions.length < o.length) {
+      positions.push("a");
+    }
 
-            if (currentPolicy.data.minNumbers != null
-                && currentPolicy.data.minNumbers > enforcedOptions.numberCount) {
-                enforcedOptions.numberCount = currentPolicy.data.minNumbers;
-            }
-
-            if (currentPolicy.data.useSpecial) {
-                enforcedOptions.useSpecial = true;
-            }
-
-            if (currentPolicy.data.minSpecial != null
-                && currentPolicy.data.minSpecial > enforcedOptions.specialCount) {
-                enforcedOptions.specialCount = currentPolicy.data.minSpecial;
-            }
-
-            if (currentPolicy.data.minNumberWords != null
-                && currentPolicy.data.minNumberWords > enforcedOptions.minNumberWords) {
-                enforcedOptions.minNumberWords = currentPolicy.data.minNumberWords;
-            }
-
-            if (currentPolicy.data.capitalize) {
-                enforcedOptions.capitalize = true;
-            }
-
-            if (currentPolicy.data.includeNumber) {
-                enforcedOptions.includeNumber = true;
-            }
-        });
-
-        return enforcedOptions;
-    }
-
-    async saveOptions(options: any) {
-        await this.storageService.save(Keys.options, options);
-        this.optionsCache = options;
-    }
-
-    async getHistory(): Promise<GeneratedPasswordHistory[]> {
-        const hasKey = await this.cryptoService.hasKey();
-        if (!hasKey) {
-            return new Array<GeneratedPasswordHistory>();
-        }
-
-        if (!this.history) {
-            const encrypted = await this.storageService.get<GeneratedPasswordHistory[]>(Keys.history);
-            this.history = await this.decryptHistory(encrypted);
-        }
-
-        return this.history || new Array<GeneratedPasswordHistory>();
-    }
-
-    async addHistory(password: string): Promise<any> {
-        // Cannot add new history if no key is available
-        const hasKey = await this.cryptoService.hasKey();
-        if (!hasKey) {
-            return;
-        }
+    // shuffle
+    await this.shuffleArray(positions);
 
-        const currentHistory = await this.getHistory();
+    // build out the char sets
+    let allCharSet = "";
 
-        // Prevent duplicates
-        if (this.matchesPrevious(password, currentHistory)) {
-            return;
-        }
-
-        currentHistory.unshift(new GeneratedPasswordHistory(password, Date.now()));
+    let lowercaseCharSet = "abcdefghijkmnopqrstuvwxyz";
+    if (o.ambiguous) {
+      lowercaseCharSet += "l";
+    }
+    if (o.lowercase) {
+      allCharSet += lowercaseCharSet;
+    }
 
-        // Remove old items.
-        if (currentHistory.length > MaxPasswordsInHistory) {
-            currentHistory.pop();
-        }
+    let uppercaseCharSet = "ABCDEFGHJKLMNPQRSTUVWXYZ";
+    if (o.ambiguous) {
+      uppercaseCharSet += "IO";
+    }
+    if (o.uppercase) {
+      allCharSet += uppercaseCharSet;
+    }
 
-        const newHistory = await this.encryptHistory(currentHistory);
-        return await this.storageService.save(Keys.history, newHistory);
+    let numberCharSet = "23456789";
+    if (o.ambiguous) {
+      numberCharSet += "01";
+    }
+    if (o.number) {
+      allCharSet += numberCharSet;
     }
-
-    async clear(): Promise<any> {
-        this.history = [];
-        return await this.storageService.remove(Keys.history);
+
+    const specialCharSet = "!@#$%^&*";
+    if (o.special) {
+      allCharSet += specialCharSet;
     }
 
-    passwordStrength(password: string, userInputs: string[] = null): zxcvbn.ZXCVBNResult {
-        if (password == null || password.length === 0) {
-            return null;
-        }
-        let globalUserInputs = ['bitwarden', 'bit', 'warden'];
-        if (userInputs != null && userInputs.length > 0) {
-            globalUserInputs = globalUserInputs.concat(userInputs);
-        }
-        // Use a hash set to get rid of any duplicate user inputs
-        const finalUserInputs = Array.from(new Set(globalUserInputs));
-        const result = zxcvbn(password, finalUserInputs);
-        return result;
+    let password = "";
+    for (let i = 0; i < o.length; i++) {
+      let positionChars: string;
+      switch (positions[i]) {
+        case "l":
+          positionChars = lowercaseCharSet;
+          break;
+        case "u":
+          positionChars = uppercaseCharSet;
+          break;
+        case "n":
+          positionChars = numberCharSet;
+          break;
+        case "s":
+          positionChars = specialCharSet;
+          break;
+        case "a":
+          positionChars = allCharSet;
+          break;
+        default:
+          break;
+      }
+
+      const randomCharIndex = await this.cryptoService.randomNumber(0, positionChars.length - 1);
+      password += positionChars.charAt(randomCharIndex);
     }
 
-    normalizeOptions(options: any, enforcedPolicyOptions: PasswordGeneratorPolicyOptions) {
-        options.minLowercase = 0;
-        options.minUppercase = 0;
+    return password;
+  }
+
+  async generatePassphrase(options: any): Promise<string> {
+    const o = Object.assign({}, DefaultOptions, options);
+
+    if (o.numWords == null || o.numWords <= 2) {
+      o.numWords = DefaultOptions.numWords;
+    }
+    if (o.wordSeparator == null || o.wordSeparator.length === 0 || o.wordSeparator.length > 1) {
+      o.wordSeparator = " ";
+    }
+    if (o.capitalize == null) {
+      o.capitalize = false;
+    }
+    if (o.includeNumber == null) {
+      o.includeNumber = false;
+    }
 
-        if (!options.length || options.length < 5) {
-            options.length = 5;
-        } else if (options.length > 128) {
-            options.length = 128;
-        }
+    const listLength = EEFLongWordList.length - 1;
+    const wordList = new Array(o.numWords);
+    for (let i = 0; i < o.numWords; i++) {
+      const wordIndex = await this.cryptoService.randomNumber(0, listLength);
+      if (o.capitalize) {
+        wordList[i] = this.capitalize(EEFLongWordList[wordIndex]);
+      } else {
+        wordList[i] = EEFLongWordList[wordIndex];
+      }
+    }
 
-        if (options.length < enforcedPolicyOptions.minLength) {
-            options.length = enforcedPolicyOptions.minLength;
-        }
+    if (o.includeNumber) {
+      await this.appendRandomNumberToRandomWord(wordList);
+    }
+    return wordList.join(o.wordSeparator);
+  }
+
+  async getOptions(): Promise<[any, PasswordGeneratorPolicyOptions]> {
+    let options = await this.stateService.getPasswordGenerationOptions();
+    if (options == null) {
+      options = DefaultOptions;
+    } else {
+      options = Object.assign({}, DefaultOptions, options);
+    }
+    await this.stateService.setPasswordGenerationOptions(options);
+    const enforcedOptions = await this.enforcePasswordGeneratorPoliciesOnOptions(options);
+    options = enforcedOptions[0];
+    return [options, enforcedOptions[1]];
+  }
+
+  async enforcePasswordGeneratorPoliciesOnOptions(
+    options: any
+  ): Promise<[any, PasswordGeneratorPolicyOptions]> {
+    let enforcedPolicyOptions = await this.getPasswordGeneratorPolicyOptions();
+    if (enforcedPolicyOptions != null) {
+      if (options.length < enforcedPolicyOptions.minLength) {
+        options.length = enforcedPolicyOptions.minLength;
+      }
+
+      if (enforcedPolicyOptions.useUppercase) {
+        options.uppercase = true;
+      }
+
+      if (enforcedPolicyOptions.useLowercase) {
+        options.lowercase = true;
+      }
+
+      if (enforcedPolicyOptions.useNumbers) {
+        options.number = true;
+      }
+
+      if (options.minNumber < enforcedPolicyOptions.numberCount) {
+        options.minNumber = enforcedPolicyOptions.numberCount;
+      }
+
+      if (enforcedPolicyOptions.useSpecial) {
+        options.special = true;
+      }
+
+      if (options.minSpecial < enforcedPolicyOptions.specialCount) {
+        options.minSpecial = enforcedPolicyOptions.specialCount;
+      }
+
+      // Must normalize these fields because the receiving call expects all options to pass the current rules
+      if (options.minSpecial + options.minNumber > options.length) {
+        options.minSpecial = options.length - options.minNumber;
+      }
+
+      if (options.numWords < enforcedPolicyOptions.minNumberWords) {
+        options.numWords = enforcedPolicyOptions.minNumberWords;
+      }
+
+      if (enforcedPolicyOptions.capitalize) {
+        options.capitalize = true;
+      }
+
+      if (enforcedPolicyOptions.includeNumber) {
+        options.includeNumber = true;
+      }
+
+      // Force default type if password/passphrase selected via policy
+      if (
+        enforcedPolicyOptions.defaultType === "password" ||
+        enforcedPolicyOptions.defaultType === "passphrase"
+      ) {
+        options.type = enforcedPolicyOptions.defaultType;
+      }
+    } else {
+      // UI layer expects an instantiated object to prevent more explicit null checks
+      enforcedPolicyOptions = new PasswordGeneratorPolicyOptions();
+    }
+    return [options, enforcedPolicyOptions];
+  }
+
+  async getPasswordGeneratorPolicyOptions(): Promise<PasswordGeneratorPolicyOptions> {
+    const policies: Policy[] =
+      this.policyService == null
+        ? null
+        : await this.policyService.getAll(PolicyType.PasswordGenerator);
+    let enforcedOptions: PasswordGeneratorPolicyOptions = null;
+
+    if (policies == null || policies.length === 0) {
+      return enforcedOptions;
+    }
 
-        if (!options.minNumber) {
-            options.minNumber = 0;
-        } else if (options.minNumber > options.length) {
-            options.minNumber = options.length;
-        } else if (options.minNumber > 9) {
-            options.minNumber = 9;
-        }
+    policies.forEach((currentPolicy) => {
+      if (!currentPolicy.enabled || currentPolicy.data == null) {
+        return;
+      }
+
+      if (enforcedOptions == null) {
+        enforcedOptions = new PasswordGeneratorPolicyOptions();
+      }
+
+      // Password wins in multi-org collisions
+      if (currentPolicy.data.defaultType != null && enforcedOptions.defaultType !== "password") {
+        enforcedOptions.defaultType = currentPolicy.data.defaultType;
+      }
+
+      if (
+        currentPolicy.data.minLength != null &&
+        currentPolicy.data.minLength > enforcedOptions.minLength
+      ) {
+        enforcedOptions.minLength = currentPolicy.data.minLength;
+      }
+
+      if (currentPolicy.data.useUpper) {
+        enforcedOptions.useUppercase = true;
+      }
+
+      if (currentPolicy.data.useLower) {
+        enforcedOptions.useLowercase = true;
+      }
+
+      if (currentPolicy.data.useNumbers) {
+        enforcedOptions.useNumbers = true;
+      }
+
+      if (
+        currentPolicy.data.minNumbers != null &&
+        currentPolicy.data.minNumbers > enforcedOptions.numberCount
+      ) {
+        enforcedOptions.numberCount = currentPolicy.data.minNumbers;
+      }
+
+      if (currentPolicy.data.useSpecial) {
+        enforcedOptions.useSpecial = true;
+      }
+
+      if (
+        currentPolicy.data.minSpecial != null &&
+        currentPolicy.data.minSpecial > enforcedOptions.specialCount
+      ) {
+        enforcedOptions.specialCount = currentPolicy.data.minSpecial;
+      }
+
+      if (
+        currentPolicy.data.minNumberWords != null &&
+        currentPolicy.data.minNumberWords > enforcedOptions.minNumberWords
+      ) {
+        enforcedOptions.minNumberWords = currentPolicy.data.minNumberWords;
+      }
+
+      if (currentPolicy.data.capitalize) {
+        enforcedOptions.capitalize = true;
+      }
+
+      if (currentPolicy.data.includeNumber) {
+        enforcedOptions.includeNumber = true;
+      }
+    });
+
+    return enforcedOptions;
+  }
+
+  async saveOptions(options: any) {
+    await this.stateService.setPasswordGenerationOptions(options);
+  }
+
+  async getHistory(): Promise<GeneratedPasswordHistory[]> {
+    const hasKey = await this.cryptoService.hasKey();
+    if (!hasKey) {
+      return new Array<GeneratedPasswordHistory>();
+    }
 
-        if (options.minNumber < enforcedPolicyOptions.numberCount) {
-            options.minNumber = enforcedPolicyOptions.numberCount;
-        }
+    if ((await this.stateService.getDecryptedPasswordGenerationHistory()) != null) {
+      const encrypted = await this.stateService.getEncryptedPasswordGenerationHistory();
+      const decrypted = await this.decryptHistory(encrypted);
+      await this.stateService.setDecryptedPasswordGenerationHistory(decrypted);
+    }
 
-        if (!options.minSpecial) {
-            options.minSpecial = 0;
-        } else if (options.minSpecial > options.length) {
-            options.minSpecial = options.length;
-        } else if (options.minSpecial > 9) {
-            options.minSpecial = 9;
-        }
+    const passwordGenerationHistory =
+      await this.stateService.getDecryptedPasswordGenerationHistory();
+    return passwordGenerationHistory != null
+      ? passwordGenerationHistory
+      : new Array<GeneratedPasswordHistory>();
+  }
+
+  async addHistory(password: string): Promise<any> {
+    // Cannot add new history if no key is available
+    const hasKey = await this.cryptoService.hasKey();
+    if (!hasKey) {
+      return;
+    }
 
-        if (options.minSpecial < enforcedPolicyOptions.specialCount) {
-            options.minSpecial = enforcedPolicyOptions.specialCount;
-        }
+    const currentHistory = await this.getHistory();
 
-        if (options.minSpecial + options.minNumber > options.length) {
-            options.minSpecial = options.length - options.minNumber;
-        }
+    // Prevent duplicates
+    if (this.matchesPrevious(password, currentHistory)) {
+      return;
+    }
 
-        if (options.numWords == null || options.length < 3) {
-            options.numWords = 3;
-        } else if (options.numWords > 20) {
-            options.numWords = 20;
-        }
+    currentHistory.unshift(new GeneratedPasswordHistory(password, Date.now()));
 
-        if (options.numWords < enforcedPolicyOptions.minNumberWords) {
-            options.numWords = enforcedPolicyOptions.minNumberWords;
-        }
+    // Remove old items.
+    if (currentHistory.length > MaxPasswordsInHistory) {
+      currentHistory.pop();
+    }
 
-        if (options.wordSeparator != null && options.wordSeparator.length > 1) {
-            options.wordSeparator = options.wordSeparator[0];
-        }
-
-        this.sanitizePasswordLength(options, false);
-    }
-
-    private capitalize(str: string) {
-        return str.charAt(0).toUpperCase() + str.slice(1);
-    }
-
-    private async appendRandomNumberToRandomWord(wordList: string[]) {
-        if (wordList == null || wordList.length <= 0) {
-            return;
-        }
-        const index = await this.cryptoService.randomNumber(0, wordList.length - 1);
-        const num = await this.cryptoService.randomNumber(0, 9);
-        wordList[index] = wordList[index] + num;
-    }
-
-    private async encryptHistory(history: GeneratedPasswordHistory[]): Promise<GeneratedPasswordHistory[]> {
-        if (history == null || history.length === 0) {
-            return Promise.resolve([]);
-        }
-
-        const promises = history.map(async item => {
-            const encrypted = await this.cryptoService.encrypt(item.password);
-            return new GeneratedPasswordHistory(encrypted.encryptedString, item.date);
-        });
-
-        return await Promise.all(promises);
-    }
-
-    private async decryptHistory(history: GeneratedPasswordHistory[]): Promise<GeneratedPasswordHistory[]> {
-        if (history == null || history.length === 0) {
-            return Promise.resolve([]);
-        }
-
-        const promises = history.map(async item => {
-            const decrypted = await this.cryptoService.decryptToUtf8(new EncString(item.password));
-            return new GeneratedPasswordHistory(decrypted, item.date);
-        });
-
-        return await Promise.all(promises);
-    }
-
-    private matchesPrevious(password: string, history: GeneratedPasswordHistory[]): boolean {
-        if (history == null || history.length === 0) {
-            return false;
-        }
-
-        return history[history.length - 1].password === password;
-    }
-
-    // ref: https://stackoverflow.com/a/12646864/1090359
-    private async shuffleArray(array: string[]) {
-        for (let i = array.length - 1; i > 0; i--) {
-            const j = await this.cryptoService.randomNumber(0, i);
-            [array[i], array[j]] = [array[j], array[i]];
-        }
-    }
-
-    private sanitizePasswordLength(options: any, forGeneration: boolean) {
-        let minUppercaseCalc = 0;
-        let minLowercaseCalc = 0;
-        let minNumberCalc: number = options.minNumber;
-        let minSpecialCalc: number = options.minSpecial;
-
-        if (options.uppercase && options.minUppercase <= 0) {
-            minUppercaseCalc = 1;
-        } else if (!options.uppercase) {
-            minUppercaseCalc = 0;
-        }
+    const newHistory = await this.encryptHistory(currentHistory);
+    return await this.stateService.setEncryptedPasswordGenerationHistory(newHistory);
+  }
 
-        if (options.lowercase && options.minLowercase <= 0) {
-            minLowercaseCalc = 1;
-        } else if (!options.lowercase) {
-            minLowercaseCalc = 0;
-        }
+  async clear(userId?: string): Promise<any> {
+    await this.stateService.setEncryptedPasswordGenerationHistory(null, { userId: userId });
+    await this.stateService.setDecryptedPasswordGenerationHistory(null, { userId: userId });
+  }
 
-        if (options.number && options.minNumber <= 0) {
-            minNumberCalc = 1;
-        } else if (!options.number) {
-            minNumberCalc = 0;
-        }
+  passwordStrength(password: string, userInputs: string[] = null): zxcvbn.ZXCVBNResult {
+    if (password == null || password.length === 0) {
+      return null;
+    }
+    let globalUserInputs = ["bitwarden", "bit", "warden"];
+    if (userInputs != null && userInputs.length > 0) {
+      globalUserInputs = globalUserInputs.concat(userInputs);
+    }
+    // Use a hash set to get rid of any duplicate user inputs
+    const finalUserInputs = Array.from(new Set(globalUserInputs));
+    const result = zxcvbn(password, finalUserInputs);
+    return result;
+  }
+
+  normalizeOptions(options: any, enforcedPolicyOptions: PasswordGeneratorPolicyOptions) {
+    options.minLowercase = 0;
+    options.minUppercase = 0;
+
+    if (!options.length || options.length < 5) {
+      options.length = 5;
+    } else if (options.length > 128) {
+      options.length = 128;
+    }
 
-        if (options.special && options.minSpecial <= 0) {
-            minSpecialCalc = 1;
-        } else if (!options.special) {
-            minSpecialCalc = 0;
-        }
+    if (options.length < enforcedPolicyOptions.minLength) {
+      options.length = enforcedPolicyOptions.minLength;
+    }
 
-        // This should never happen but is a final safety net
-        if (!options.length || options.length < 1) {
-            options.length = 10;
-        }
+    if (!options.minNumber) {
+      options.minNumber = 0;
+    } else if (options.minNumber > options.length) {
+      options.minNumber = options.length;
+    } else if (options.minNumber > 9) {
+      options.minNumber = 9;
+    }
 
-        const minLength: number = minUppercaseCalc + minLowercaseCalc + minNumberCalc + minSpecialCalc;
-        // Normalize and Generation both require this modification
-        if (options.length < minLength) {
-            options.length = minLength;
-        }
+    if (options.minNumber < enforcedPolicyOptions.numberCount) {
+      options.minNumber = enforcedPolicyOptions.numberCount;
+    }
+
+    if (!options.minSpecial) {
+      options.minSpecial = 0;
+    } else if (options.minSpecial > options.length) {
+      options.minSpecial = options.length;
+    } else if (options.minSpecial > 9) {
+      options.minSpecial = 9;
+    }
+
+    if (options.minSpecial < enforcedPolicyOptions.specialCount) {
+      options.minSpecial = enforcedPolicyOptions.specialCount;
+    }
+
+    if (options.minSpecial + options.minNumber > options.length) {
+      options.minSpecial = options.length - options.minNumber;
+    }
+
+    if (options.numWords == null || options.length < 3) {
+      options.numWords = 3;
+    } else if (options.numWords > 20) {
+      options.numWords = 20;
+    }
+
+    if (options.numWords < enforcedPolicyOptions.minNumberWords) {
+      options.numWords = enforcedPolicyOptions.minNumberWords;
+    }
+
+    if (options.wordSeparator != null && options.wordSeparator.length > 1) {
+      options.wordSeparator = options.wordSeparator[0];
+    }
+
+    this.sanitizePasswordLength(options, false);
+  }
+
+  private capitalize(str: string) {
+    return str.charAt(0).toUpperCase() + str.slice(1);
+  }
+
+  private async appendRandomNumberToRandomWord(wordList: string[]) {
+    if (wordList == null || wordList.length <= 0) {
+      return;
+    }
+    const index = await this.cryptoService.randomNumber(0, wordList.length - 1);
+    const num = await this.cryptoService.randomNumber(0, 9);
+    wordList[index] = wordList[index] + num;
+  }
+
+  private async encryptHistory(
+    history: GeneratedPasswordHistory[]
+  ): Promise<GeneratedPasswordHistory[]> {
+    if (history == null || history.length === 0) {
+      return Promise.resolve([]);
+    }
+
+    const promises = history.map(async (item) => {
+      const encrypted = await this.cryptoService.encrypt(item.password);
+      return new GeneratedPasswordHistory(encrypted.encryptedString, item.date);
+    });
+
+    return await Promise.all(promises);
+  }
+
+  private async decryptHistory(
+    history: GeneratedPasswordHistory[]
+  ): Promise<GeneratedPasswordHistory[]> {
+    if (history == null || history.length === 0) {
+      return Promise.resolve([]);
+    }
+
+    const promises = history.map(async (item) => {
+      const decrypted = await this.cryptoService.decryptToUtf8(new EncString(item.password));
+      return new GeneratedPasswordHistory(decrypted, item.date);
+    });
+
+    return await Promise.all(promises);
+  }
+
+  private matchesPrevious(password: string, history: GeneratedPasswordHistory[]): boolean {
+    if (history == null || history.length === 0) {
+      return false;
+    }
+
+    return history[history.length - 1].password === password;
+  }
+
+  // ref: https://stackoverflow.com/a/12646864/1090359
+  private async shuffleArray(array: string[]) {
+    for (let i = array.length - 1; i > 0; i--) {
+      const j = await this.cryptoService.randomNumber(0, i);
+      [array[i], array[j]] = [array[j], array[i]];
+    }
+  }
+
+  private sanitizePasswordLength(options: any, forGeneration: boolean) {
+    let minUppercaseCalc = 0;
+    let minLowercaseCalc = 0;
+    let minNumberCalc: number = options.minNumber;
+    let minSpecialCalc: number = options.minSpecial;
+
+    if (options.uppercase && options.minUppercase <= 0) {
+      minUppercaseCalc = 1;
+    } else if (!options.uppercase) {
+      minUppercaseCalc = 0;
+    }
+
+    if (options.lowercase && options.minLowercase <= 0) {
+      minLowercaseCalc = 1;
+    } else if (!options.lowercase) {
+      minLowercaseCalc = 0;
+    }
+
+    if (options.number && options.minNumber <= 0) {
+      minNumberCalc = 1;
+    } else if (!options.number) {
+      minNumberCalc = 0;
+    }
+
+    if (options.special && options.minSpecial <= 0) {
+      minSpecialCalc = 1;
+    } else if (!options.special) {
+      minSpecialCalc = 0;
+    }
+
+    // This should never happen but is a final safety net
+    if (!options.length || options.length < 1) {
+      options.length = 10;
+    }
+
+    const minLength: number = minUppercaseCalc + minLowercaseCalc + minNumberCalc + minSpecialCalc;
+    // Normalize and Generation both require this modification
+    if (options.length < minLength) {
+      options.length = minLength;
+    }
 
-        // Apply other changes if the options object passed in is for generation
-        if (forGeneration) {
-            options.minUppercase = minUppercaseCalc;
-            options.minLowercase = minLowercaseCalc;
-            options.minNumber = minNumberCalc;
-            options.minSpecial = minSpecialCalc;
-        }
+    // Apply other changes if the options object passed in is for generation
+    if (forGeneration) {
+      options.minUppercase = minUppercaseCalc;
+      options.minLowercase = minLowercaseCalc;
+      options.minNumber = minNumberCalc;
+      options.minSpecial = minSpecialCalc;
     }
+  }
 }
diff --git a/jslib/common/src/services/policy.service.ts b/jslib/common/src/services/policy.service.ts
index 4d23448a..dce9af6f 100644
--- a/jslib/common/src/services/policy.service.ts
+++ b/jslib/common/src/services/policy.service.ts
@@ -1,219 +1,249 @@
-import { PolicyService as PolicyServiceAbstraction } from '../abstractions/policy.service';
-import { StorageService } from '../abstractions/storage.service';
-import { UserService } from '../abstractions/user.service';
+import { OrganizationService } from "../abstractions/organization.service";
+import { PolicyService as PolicyServiceAbstraction } from "../abstractions/policy.service";
+import { StateService } from "../abstractions/state.service";
 
-import { PolicyData } from '../models/data/policyData';
+import { PolicyData } from "../models/data/policyData";
 
-import { MasterPasswordPolicyOptions } from '../models/domain/masterPasswordPolicyOptions';
-import { Organization } from '../models/domain/organization';
-import { Policy } from '../models/domain/policy';
-import { ResetPasswordPolicyOptions } from '../models/domain/resetPasswordPolicyOptions';
+import { MasterPasswordPolicyOptions } from "../models/domain/masterPasswordPolicyOptions";
+import { Organization } from "../models/domain/organization";
+import { Policy } from "../models/domain/policy";
+import { ResetPasswordPolicyOptions } from "../models/domain/resetPasswordPolicyOptions";
 
-import { OrganizationUserStatusType } from '../enums/organizationUserStatusType';
-import { OrganizationUserType } from '../enums/organizationUserType';
-import { PolicyType } from '../enums/policyType';
+import { OrganizationUserStatusType } from "../enums/organizationUserStatusType";
+import { OrganizationUserType } from "../enums/organizationUserType";
+import { PolicyType } from "../enums/policyType";
 
-import { ApiService } from '../abstractions/api.service';
-import { ListResponse } from '../models/response/listResponse';
-import { PolicyResponse } from '../models/response/policyResponse';
-
-const Keys = {
-    policiesPrefix: 'policies_',
-};
+import { ApiService } from "../abstractions/api.service";
+import { ListResponse } from "../models/response/listResponse";
+import { PolicyResponse } from "../models/response/policyResponse";
 
 export class PolicyService implements PolicyServiceAbstraction {
-    policyCache: Policy[];
-
-    constructor(private userService: UserService, private storageService: StorageService,
-        private apiService: ApiService) {
-    }
-
-    clearCache(): void {
-        this.policyCache = null;
+  policyCache: Policy[];
+
+  constructor(
+    private stateService: StateService,
+    private organizationService: OrganizationService,
+    private apiService: ApiService
+  ) {}
+
+  async clearCache(): Promise<void> {
+    await this.stateService.setDecryptedPolicies(null);
+  }
+
+  async getAll(type?: PolicyType, userId?: string): Promise<Policy[]> {
+    let response: Policy[] = [];
+    const decryptedPolicies = await this.stateService.getDecryptedPolicies({ userId: userId });
+    if (decryptedPolicies != null) {
+      response = decryptedPolicies;
+    } else {
+      const diskPolicies = await this.stateService.getEncryptedPolicies({ userId: userId });
+      for (const id in diskPolicies) {
+        if (diskPolicies.hasOwnProperty(id)) {
+          response.push(new Policy(diskPolicies[id]));
+        }
+      }
+      await this.stateService.setDecryptedPolicies(response, { userId: userId });
     }
-
-    async getAll(type?: PolicyType): Promise<Policy[]> {
-        if (this.policyCache == null) {
-            const userId = await this.userService.getUserId();
-            const policies = await this.storageService.get<{ [id: string]: PolicyData; }>(
-                Keys.policiesPrefix + userId);
-            const response: Policy[] = [];
-            for (const id in policies) {
-                if (policies.hasOwnProperty(id)) {
-                    response.push(new Policy(policies[id]));
-                }
-            }
-            this.policyCache = response;
-        }
-        if (type != null) {
-            return this.policyCache.filter(p => p.type === type);
-        } else {
-            return this.policyCache;
-        }
+    if (type != null) {
+      return response.filter((policy) => policy.type === type);
+    } else {
+      return response;
     }
+  }
 
-    async getPolicyForOrganization(policyType: PolicyType, organizationId: string): Promise<Policy> {
-        const org = await this.userService.getOrganization(organizationId);
-        if (org?.isProviderUser) {
-            const orgPolicies = await this.apiService.getPolicies(organizationId);
-            const policy = orgPolicies.data.find(p => p.organizationId === organizationId);
-
-            if (policy == null) {
-                return null;
-            }
+  async getPolicyForOrganization(policyType: PolicyType, organizationId: string): Promise<Policy> {
+    const org = await this.organizationService.get(organizationId);
+    if (org?.isProviderUser) {
+      const orgPolicies = await this.apiService.getPolicies(organizationId);
+      const policy = orgPolicies.data.find((p) => p.organizationId === organizationId);
 
-            return new Policy(new PolicyData(policy));
-        }
+      if (policy == null) {
+        return null;
+      }
 
-        const policies = await this.getAll(policyType);
-        return policies.find(p => p.organizationId === organizationId);
+      return new Policy(new PolicyData(policy));
     }
 
-    async replace(policies: { [id: string]: PolicyData; }): Promise<any> {
-        const userId = await this.userService.getUserId();
-        await this.storageService.save(Keys.policiesPrefix + userId, policies);
-        this.policyCache = null;
+    const policies = await this.getAll(policyType);
+    return policies.find((p) => p.organizationId === organizationId);
+  }
+
+  async replace(policies: { [id: string]: PolicyData }): Promise<any> {
+    await this.stateService.setDecryptedPolicies(null);
+    await this.stateService.setEncryptedPolicies(policies);
+  }
+
+  async clear(userId?: string): Promise<any> {
+    await this.stateService.setDecryptedPolicies(null, { userId: userId });
+    await this.stateService.setEncryptedPolicies(null, { userId: userId });
+  }
+
+  async getMasterPasswordPoliciesForInvitedUsers(
+    orgId: string
+  ): Promise<MasterPasswordPolicyOptions> {
+    const userId = await this.stateService.getUserId();
+    const response = await this.apiService.getPoliciesByInvitedUser(orgId, userId);
+    const policies = await this.mapPoliciesFromToken(response);
+    return this.getMasterPasswordPolicyOptions(policies);
+  }
+
+  async getMasterPasswordPolicyOptions(policies?: Policy[]): Promise<MasterPasswordPolicyOptions> {
+    let enforcedOptions: MasterPasswordPolicyOptions = null;
+
+    if (policies == null) {
+      policies = await this.getAll(PolicyType.MasterPassword);
+    } else {
+      policies = policies.filter((p) => p.type === PolicyType.MasterPassword);
     }
 
-    async clear(userId: string): Promise<any> {
-        await this.storageService.remove(Keys.policiesPrefix + userId);
-        this.policyCache = null;
+    if (policies == null || policies.length === 0) {
+      return enforcedOptions;
     }
 
-    async getMasterPasswordPolicyOptions(policies?: Policy[]): Promise<MasterPasswordPolicyOptions> {
-        let enforcedOptions: MasterPasswordPolicyOptions = null;
-
-        if (policies == null) {
-            policies = await this.getAll(PolicyType.MasterPassword);
-        } else {
-            policies = policies.filter(p => p.type === PolicyType.MasterPassword);
-        }
-
-        if (policies == null || policies.length === 0) {
-            return enforcedOptions;
-        }
-
-        policies.forEach(currentPolicy => {
-            if (!currentPolicy.enabled || currentPolicy.data == null) {
-                return;
-            }
-
-            if (enforcedOptions == null) {
-                enforcedOptions = new MasterPasswordPolicyOptions();
-            }
-
-            if (currentPolicy.data.minComplexity != null
-                && currentPolicy.data.minComplexity > enforcedOptions.minComplexity) {
-                enforcedOptions.minComplexity = currentPolicy.data.minComplexity;
-            }
-
-            if (currentPolicy.data.minLength != null
-                && currentPolicy.data.minLength > enforcedOptions.minLength) {
-                enforcedOptions.minLength = currentPolicy.data.minLength;
-            }
-
-            if (currentPolicy.data.requireUpper) {
-                enforcedOptions.requireUpper = true;
-            }
-
-            if (currentPolicy.data.requireLower) {
-                enforcedOptions.requireLower = true;
-            }
-
-            if (currentPolicy.data.requireNumbers) {
-                enforcedOptions.requireNumbers = true;
-            }
-
-            if (currentPolicy.data.requireSpecial) {
-                enforcedOptions.requireSpecial = true;
-            }
-        });
+    policies.forEach((currentPolicy) => {
+      if (!currentPolicy.enabled || currentPolicy.data == null) {
+        return;
+      }
+
+      if (enforcedOptions == null) {
+        enforcedOptions = new MasterPasswordPolicyOptions();
+      }
+
+      if (
+        currentPolicy.data.minComplexity != null &&
+        currentPolicy.data.minComplexity > enforcedOptions.minComplexity
+      ) {
+        enforcedOptions.minComplexity = currentPolicy.data.minComplexity;
+      }
+
+      if (
+        currentPolicy.data.minLength != null &&
+        currentPolicy.data.minLength > enforcedOptions.minLength
+      ) {
+        enforcedOptions.minLength = currentPolicy.data.minLength;
+      }
+
+      if (currentPolicy.data.requireUpper) {
+        enforcedOptions.requireUpper = true;
+      }
+
+      if (currentPolicy.data.requireLower) {
+        enforcedOptions.requireLower = true;
+      }
+
+      if (currentPolicy.data.requireNumbers) {
+        enforcedOptions.requireNumbers = true;
+      }
+
+      if (currentPolicy.data.requireSpecial) {
+        enforcedOptions.requireSpecial = true;
+      }
+    });
+
+    return enforcedOptions;
+  }
+
+  evaluateMasterPassword(
+    passwordStrength: number,
+    newPassword: string,
+    enforcedPolicyOptions: MasterPasswordPolicyOptions
+  ): boolean {
+    if (enforcedPolicyOptions == null) {
+      return true;
+    }
 
-        return enforcedOptions;
+    if (
+      enforcedPolicyOptions.minComplexity > 0 &&
+      enforcedPolicyOptions.minComplexity > passwordStrength
+    ) {
+      return false;
     }
 
-    evaluateMasterPassword(passwordStrength: number, newPassword: string,
-        enforcedPolicyOptions: MasterPasswordPolicyOptions): boolean {
-        if (enforcedPolicyOptions == null) {
-            return true;
-        }
+    if (
+      enforcedPolicyOptions.minLength > 0 &&
+      enforcedPolicyOptions.minLength > newPassword.length
+    ) {
+      return false;
+    }
 
-        if (enforcedPolicyOptions.minComplexity > 0 && enforcedPolicyOptions.minComplexity > passwordStrength) {
-            return false;
-        }
+    if (enforcedPolicyOptions.requireUpper && newPassword.toLocaleLowerCase() === newPassword) {
+      return false;
+    }
 
-        if (enforcedPolicyOptions.minLength > 0 && enforcedPolicyOptions.minLength > newPassword.length) {
-            return false;
-        }
+    if (enforcedPolicyOptions.requireLower && newPassword.toLocaleUpperCase() === newPassword) {
+      return false;
+    }
 
-        if (enforcedPolicyOptions.requireUpper && newPassword.toLocaleLowerCase() === newPassword) {
-            return false;
-        }
+    if (enforcedPolicyOptions.requireNumbers && !/[0-9]/.test(newPassword)) {
+      return false;
+    }
 
-        if (enforcedPolicyOptions.requireLower && newPassword.toLocaleUpperCase() === newPassword) {
-            return false;
-        }
+    if (enforcedPolicyOptions.requireSpecial && !/[!@#$%\^&*]/g.test(newPassword)) {
+      return false;
+    }
 
-        if (enforcedPolicyOptions.requireNumbers && !(/[0-9]/.test(newPassword))) {
-            return false;
-        }
+    return true;
+  }
 
-        if (enforcedPolicyOptions.requireSpecial && !(/[!@#$%\^&*]/g.test(newPassword))) {
-            return false;
-        }
+  getResetPasswordPolicyOptions(
+    policies: Policy[],
+    orgId: string
+  ): [ResetPasswordPolicyOptions, boolean] {
+    const resetPasswordPolicyOptions = new ResetPasswordPolicyOptions();
 
-        return true;
+    if (policies == null || orgId == null) {
+      return [resetPasswordPolicyOptions, false];
     }
 
-    getResetPasswordPolicyOptions(policies: Policy[], orgId: string): [ResetPasswordPolicyOptions, boolean] {
-        const resetPasswordPolicyOptions = new ResetPasswordPolicyOptions();
+    const policy = policies.find(
+      (p) => p.organizationId === orgId && p.type === PolicyType.ResetPassword && p.enabled
+    );
+    resetPasswordPolicyOptions.autoEnrollEnabled = policy?.data?.autoEnrollEnabled ?? false;
 
-        if (policies == null || orgId == null) {
-            return [resetPasswordPolicyOptions, false];
-        }
+    return [resetPasswordPolicyOptions, policy?.enabled ?? false];
+  }
 
-        const policy = policies.find(p => p.organizationId === orgId && p.type === PolicyType.ResetPassword && p.enabled);
-        resetPasswordPolicyOptions.autoEnrollEnabled = policy?.data?.autoEnrollEnabled ?? false;
-
-        return [resetPasswordPolicyOptions, policy?.enabled ?? false];
+  mapPoliciesFromToken(policiesResponse: ListResponse<PolicyResponse>): Policy[] {
+    if (policiesResponse == null || policiesResponse.data == null) {
+      return null;
     }
 
-    mapPoliciesFromToken(policiesResponse: ListResponse<PolicyResponse>): Policy[] {
-        if (policiesResponse == null || policiesResponse.data == null) {
-            return null;
-        }
-
-        const policiesData = policiesResponse.data.map(p => new PolicyData(p));
-        return policiesData.map(p => new Policy(p));
+    const policiesData = policiesResponse.data.map((p) => new PolicyData(p));
+    return policiesData.map((p) => new Policy(p));
+  }
+
+  async policyAppliesToUser(
+    policyType: PolicyType,
+    policyFilter?: (policy: Policy) => boolean,
+    userId?: string
+  ) {
+    const policies = await this.getAll(policyType, userId);
+    const organizations = await this.organizationService.getAll(userId);
+    let filteredPolicies;
+
+    if (policyFilter != null) {
+      filteredPolicies = policies.filter((p) => p.enabled && policyFilter(p));
+    } else {
+      filteredPolicies = policies.filter((p) => p.enabled);
     }
 
-    async policyAppliesToUser(policyType: PolicyType, policyFilter?: (policy: Policy) => boolean) {
-        const policies = await this.getAll(policyType);
-        const organizations = await this.userService.getAllOrganizations();
-        let filteredPolicies;
-
-        if (policyFilter != null) {
-            filteredPolicies = policies.filter(p => p.enabled && policyFilter(p));
-        }
-        else {
-            filteredPolicies = policies.filter(p => p.enabled);
-        }
-
-        const policySet = new Set(filteredPolicies.map(p => p.organizationId));
-
-        return organizations.some(o =>
-            o.enabled &&
-            o.status >= OrganizationUserStatusType.Accepted &&
-            o.usePolicies &&
-            !this.isExcemptFromPolicies(o, policyType) &&
-            policySet.has(o.id));
+    const policySet = new Set(filteredPolicies.map((p) => p.organizationId));
+
+    return organizations.some(
+      (o) =>
+        o.enabled &&
+        o.status >= OrganizationUserStatusType.Accepted &&
+        o.usePolicies &&
+        !this.isExcemptFromPolicies(o, policyType) &&
+        policySet.has(o.id)
+    );
+  }
+
+  private isExcemptFromPolicies(organization: Organization, policyType: PolicyType) {
+    if (policyType === PolicyType.MaximumVaultTimeout) {
+      return organization.type === OrganizationUserType.Owner;
     }
 
-    private isExcemptFromPolicies(organization: Organization, policyType: PolicyType) {
-        if (policyType === PolicyType.MaximumVaultTimeout) {
-            return organization.type === OrganizationUserType.Owner;
-        }
-
-        return organization.isExemptFromPolicies;
-    }
+    return organization.isExemptFromPolicies;
+  }
 }
diff --git a/jslib/common/src/services/provider.service.ts b/jslib/common/src/services/provider.service.ts
new file mode 100644
index 00000000..349e2082
--- /dev/null
+++ b/jslib/common/src/services/provider.service.ts
@@ -0,0 +1,34 @@
+import { ProviderService as ProviderServiceAbstraction } from "../abstractions/provider.service";
+import { StateService } from "../abstractions/state.service";
+
+import { ProviderData } from "../models/data/providerData";
+
+import { Provider } from "../models/domain/provider";
+
+export class ProviderService implements ProviderServiceAbstraction {
+  constructor(private stateService: StateService) {}
+
+  async get(id: string): Promise<Provider> {
+    const providers = await this.stateService.getProviders();
+    if (providers == null || !providers.hasOwnProperty(id)) {
+      return null;
+    }
+
+    return new Provider(providers[id]);
+  }
+
+  async getAll(): Promise<Provider[]> {
+    const providers = await this.stateService.getProviders();
+    const response: Provider[] = [];
+    for (const id in providers) {
+      if (providers.hasOwnProperty(id)) {
+        response.push(new Provider(providers[id]));
+      }
+    }
+    return response;
+  }
+
+  async save(providers: { [id: string]: ProviderData }) {
+    await this.stateService.setProviders(providers);
+  }
+}
diff --git a/jslib/common/src/services/search.service.ts b/jslib/common/src/services/search.service.ts
index 91eb2b6b..97b0d247 100644
--- a/jslib/common/src/services/search.service.ts
+++ b/jslib/common/src/services/search.service.ts
@@ -1,272 +1,287 @@
-import * as lunr from 'lunr';
+import * as lunr from "lunr";
 
-import { CipherView } from '../models/view/cipherView';
+import { CipherView } from "../models/view/cipherView";
 
-import { CipherService } from '../abstractions/cipher.service';
-import { I18nService } from '../abstractions/i18n.service';
-import { LogService } from '../abstractions/log.service';
-import { SearchService as SearchServiceAbstraction } from '../abstractions/search.service';
+import { CipherService } from "../abstractions/cipher.service";
+import { I18nService } from "../abstractions/i18n.service";
+import { LogService } from "../abstractions/log.service";
+import { SearchService as SearchServiceAbstraction } from "../abstractions/search.service";
 
-import { CipherType } from '../enums/cipherType';
-import { FieldType } from '../enums/fieldType';
-import { UriMatchType } from '../enums/uriMatchType';
-import { SendView } from '../models/view/sendView';
+import { CipherType } from "../enums/cipherType";
+import { FieldType } from "../enums/fieldType";
+import { UriMatchType } from "../enums/uriMatchType";
+import { SendView } from "../models/view/sendView";
 
 export class SearchService implements SearchServiceAbstraction {
-    indexedEntityId?: string = null;
-    private indexing = false;
-    private index: lunr.Index = null;
-    private searchableMinLength = 2;
+  indexedEntityId?: string = null;
+  private indexing = false;
+  private index: lunr.Index = null;
+  private searchableMinLength = 2;
 
-    constructor(private cipherService: CipherService, private logService: LogService,
-        private i18nService: I18nService) {
-        if (['zh-CN', 'zh-TW'].indexOf(i18nService.locale) !== -1) {
-            this.searchableMinLength = 1;
-        }
+  constructor(
+    private cipherService: CipherService,
+    private logService: LogService,
+    private i18nService: I18nService
+  ) {
+    if (["zh-CN", "zh-TW"].indexOf(i18nService.locale) !== -1) {
+      this.searchableMinLength = 1;
     }
+  }
 
-    clearIndex(): void {
-        this.indexedEntityId = null;
-        this.index = null;
-    }
+  clearIndex(): void {
+    this.indexedEntityId = null;
+    this.index = null;
+  }
+
+  isSearchable(query: string): boolean {
+    const notSearchable =
+      query == null ||
+      (this.index == null && query.length < this.searchableMinLength) ||
+      (this.index != null && query.length < this.searchableMinLength && query.indexOf(">") !== 0);
+    return !notSearchable;
+  }
 
-    isSearchable(query: string): boolean {
-        const notSearchable = query == null || (this.index == null && query.length < this.searchableMinLength) ||
-            (this.index != null && query.length < this.searchableMinLength && query.indexOf('>') !== 0);
-        return !notSearchable;
+  async indexCiphers(indexedEntityId?: string, ciphers?: CipherView[]): Promise<void> {
+    if (this.indexing) {
+      return;
     }
 
-    async indexCiphers(indexedEntityId?: string, ciphers?: CipherView[]): Promise<void> {
-        if (this.indexing) {
-            return;
+    this.logService.time("search indexing");
+    this.indexing = true;
+    this.indexedEntityId = indexedEntityId;
+    this.index = null;
+    const builder = new lunr.Builder();
+    builder.ref("id");
+    builder.field("shortid", { boost: 100, extractor: (c: CipherView) => c.id.substr(0, 8) });
+    builder.field("name", { boost: 10 });
+    builder.field("subtitle", {
+      boost: 5,
+      extractor: (c: CipherView) => {
+        if (c.subTitle != null && c.type === CipherType.Card) {
+          return c.subTitle.replace(/\*/g, "");
         }
+        return c.subTitle;
+      },
+    });
+    builder.field("notes");
+    builder.field("login.username", {
+      extractor: (c: CipherView) =>
+        c.type === CipherType.Login && c.login != null ? c.login.username : null,
+    });
+    builder.field("login.uris", { boost: 2, extractor: (c: CipherView) => this.uriExtractor(c) });
+    builder.field("fields", { extractor: (c: CipherView) => this.fieldExtractor(c, false) });
+    builder.field("fields_joined", { extractor: (c: CipherView) => this.fieldExtractor(c, true) });
+    builder.field("attachments", {
+      extractor: (c: CipherView) => this.attachmentExtractor(c, false),
+    });
+    builder.field("attachments_joined", {
+      extractor: (c: CipherView) => this.attachmentExtractor(c, true),
+    });
+    builder.field("organizationid", { extractor: (c: CipherView) => c.organizationId });
+    ciphers = ciphers || (await this.cipherService.getAllDecrypted());
+    ciphers.forEach((c) => builder.add(c));
+    this.index = builder.build();
 
-        this.logService.time('search indexing');
-        this.indexing = true;
-        this.indexedEntityId = indexedEntityId;
-        this.index = null;
-        const builder = new lunr.Builder();
-        builder.ref('id');
-        builder.field('shortid', { boost: 100, extractor: (c: CipherView) => c.id.substr(0, 8) });
-        builder.field('name', { boost: 10 });
-        builder.field('subtitle', {
-            boost: 5,
-            extractor: (c: CipherView) => {
-                if (c.subTitle != null && c.type === CipherType.Card) {
-                    return c.subTitle.replace(/\*/g, '');
-                }
-                return c.subTitle;
-            },
-        });
-        builder.field('notes');
-        builder.field('login.username', {
-            extractor: (c: CipherView) => c.type === CipherType.Login && c.login != null ? c.login.username : null,
-        });
-        builder.field('login.uris', { boost: 2, extractor: (c: CipherView) => this.uriExtractor(c) });
-        builder.field('fields', { extractor: (c: CipherView) => this.fieldExtractor(c, false) });
-        builder.field('fields_joined', { extractor: (c: CipherView) => this.fieldExtractor(c, true) });
-        builder.field('attachments', { extractor: (c: CipherView) => this.attachmentExtractor(c, false) });
-        builder.field('attachments_joined',
-            { extractor: (c: CipherView) => this.attachmentExtractor(c, true) });
-        builder.field('organizationid', { extractor: (c: CipherView) => c.organizationId });
-        ciphers = ciphers || await this.cipherService.getAllDecrypted();
-        ciphers.forEach(c => builder.add(c));
-        this.index = builder.build();
+    this.indexing = false;
 
-        this.indexing = false;
+    this.logService.timeEnd("search indexing");
+  }
 
-        this.logService.timeEnd('search indexing');
+  async searchCiphers(
+    query: string,
+    filter: ((cipher: CipherView) => boolean) | ((cipher: CipherView) => boolean)[] = null,
+    ciphers: CipherView[] = null
+  ): Promise<CipherView[]> {
+    const results: CipherView[] = [];
+    if (query != null) {
+      query = query.trim().toLowerCase();
+    }
+    if (query === "") {
+      query = null;
     }
 
-    async searchCiphers(query: string,
-        filter: (((cipher: CipherView) => boolean) | (((cipher: CipherView) => boolean)[])) = null,
-        ciphers: CipherView[] = null):
-        Promise<CipherView[]> {
-        const results: CipherView[] = [];
-        if (query != null) {
-            query = query.trim().toLowerCase();
-        }
-        if (query === '') {
-            query = null;
-        }
-
-        if (ciphers == null) {
-            ciphers = await this.cipherService.getAllDecrypted();
-        }
+    if (ciphers == null) {
+      ciphers = await this.cipherService.getAllDecrypted();
+    }
 
-        if (filter != null && Array.isArray(filter) && filter.length > 0) {
-            ciphers = ciphers.filter(c => filter.every(f => f == null || f(c)));
-        } else if (filter != null) {
-            ciphers = ciphers.filter(filter as (cipher: CipherView) => boolean);
-        }
+    if (filter != null && Array.isArray(filter) && filter.length > 0) {
+      ciphers = ciphers.filter((c) => filter.every((f) => f == null || f(c)));
+    } else if (filter != null) {
+      ciphers = ciphers.filter(filter as (cipher: CipherView) => boolean);
+    }
 
-        if (!this.isSearchable(query)) {
-            return ciphers;
-        }
+    if (!this.isSearchable(query)) {
+      return ciphers;
+    }
 
-        if (this.indexing) {
-            await new Promise(r => setTimeout(r, 250));
-            if (this.indexing) {
-                await new Promise(r => setTimeout(r, 500));
-            }
-        }
+    if (this.indexing) {
+      await new Promise((r) => setTimeout(r, 250));
+      if (this.indexing) {
+        await new Promise((r) => setTimeout(r, 500));
+      }
+    }
 
-        const index = this.getIndexForSearch();
-        if (index == null) {
-            // Fall back to basic search if index is not available
-            return this.searchCiphersBasic(ciphers, query);
-        }
+    const index = this.getIndexForSearch();
+    if (index == null) {
+      // Fall back to basic search if index is not available
+      return this.searchCiphersBasic(ciphers, query);
+    }
 
-        const ciphersMap = new Map<string, CipherView>();
-        ciphers.forEach(c => ciphersMap.set(c.id, c));
+    const ciphersMap = new Map<string, CipherView>();
+    ciphers.forEach((c) => ciphersMap.set(c.id, c));
 
-        let searchResults: lunr.Index.Result[] = null;
-        const isQueryString = query != null && query.length > 1 && query.indexOf('>') === 0;
-        if (isQueryString) {
-            try {
-                searchResults = index.search(query.substr(1).trim());
-            } catch (e) {
-                this.logService.error(e);
-            }
-        } else {
-            // tslint:disable-next-line
-            const soWild = lunr.Query.wildcard.LEADING | lunr.Query.wildcard.TRAILING;
-            searchResults = index.query(q => {
-                lunr.tokenizer(query).forEach(token => {
-                    const t = token.toString();
-                    q.term(t, { fields: ['name'], wildcard: soWild });
-                    q.term(t, { fields: ['subtitle'], wildcard: soWild });
-                    q.term(t, { fields: ['login.uris'], wildcard: soWild });
-                    q.term(t, {});
-                });
-            });
-        }
+    let searchResults: lunr.Index.Result[] = null;
+    const isQueryString = query != null && query.length > 1 && query.indexOf(">") === 0;
+    if (isQueryString) {
+      try {
+        searchResults = index.search(query.substr(1).trim());
+      } catch (e) {
+        this.logService.error(e);
+      }
+    } else {
+      // tslint:disable-next-line
+      const soWild = lunr.Query.wildcard.LEADING | lunr.Query.wildcard.TRAILING;
+      searchResults = index.query((q) => {
+        lunr.tokenizer(query).forEach((token) => {
+          const t = token.toString();
+          q.term(t, { fields: ["name"], wildcard: soWild });
+          q.term(t, { fields: ["subtitle"], wildcard: soWild });
+          q.term(t, { fields: ["login.uris"], wildcard: soWild });
+          q.term(t, {});
+        });
+      });
+    }
 
-        if (searchResults != null) {
-            searchResults.forEach(r => {
-                if (ciphersMap.has(r.ref)) {
-                    results.push(ciphersMap.get(r.ref));
-                }
-            });
+    if (searchResults != null) {
+      searchResults.forEach((r) => {
+        if (ciphersMap.has(r.ref)) {
+          results.push(ciphersMap.get(r.ref));
         }
-        return results;
+      });
     }
+    return results;
+  }
 
-    searchCiphersBasic(ciphers: CipherView[], query: string, deleted: boolean = false) {
-        query = query.trim().toLowerCase();
-        return ciphers.filter(c => {
-            if (deleted !== c.isDeleted) {
-                return false;
-            }
-            if (c.name != null && c.name.toLowerCase().indexOf(query) > -1) {
-                return true;
-            }
-            if (query.length >= 8 && c.id.startsWith(query)) {
-                return true;
-            }
-            if (c.subTitle != null && c.subTitle.toLowerCase().indexOf(query) > -1) {
-                return true;
-            }
-            if (c.login && c.login.uri != null && c.login.uri.toLowerCase().indexOf(query) > -1) {
-                return true;
-            }
-            return false;
-        });
-    }
+  searchCiphersBasic(ciphers: CipherView[], query: string, deleted: boolean = false) {
+    query = query.trim().toLowerCase();
+    return ciphers.filter((c) => {
+      if (deleted !== c.isDeleted) {
+        return false;
+      }
+      if (c.name != null && c.name.toLowerCase().indexOf(query) > -1) {
+        return true;
+      }
+      if (query.length >= 8 && c.id.startsWith(query)) {
+        return true;
+      }
+      if (c.subTitle != null && c.subTitle.toLowerCase().indexOf(query) > -1) {
+        return true;
+      }
+      if (c.login && c.login.uri != null && c.login.uri.toLowerCase().indexOf(query) > -1) {
+        return true;
+      }
+      return false;
+    });
+  }
 
-    searchSends(sends: SendView[], query: string) {
-        query = query.trim().toLocaleLowerCase();
+  searchSends(sends: SendView[], query: string) {
+    query = query.trim().toLocaleLowerCase();
 
-        return sends.filter(s => {
-            if (s.name != null && s.name.toLowerCase().indexOf(query) > -1) {
-                return true;
-            }
-            if (query.length >= 8 && (s.id.startsWith(query) || s.accessId.toLocaleLowerCase().startsWith(query) || (s.file?.id != null && s.file.id.startsWith(query)))) {
-                return true;
-            }
-            if (s.notes != null && s.notes.toLowerCase().indexOf(query) > -1) {
-                return true;
-            }
-            if (s.text?.text != null && s.text.text.toLowerCase().indexOf(query) > -1) {
-                return true;
-            }
-            if (s.file?.fileName != null && s.file.fileName.toLowerCase().indexOf(query) > -1) {
-                return true;
-            }
-        });
-    }
+    return sends.filter((s) => {
+      if (s.name != null && s.name.toLowerCase().indexOf(query) > -1) {
+        return true;
+      }
+      if (
+        query.length >= 8 &&
+        (s.id.startsWith(query) ||
+          s.accessId.toLocaleLowerCase().startsWith(query) ||
+          (s.file?.id != null && s.file.id.startsWith(query)))
+      ) {
+        return true;
+      }
+      if (s.notes != null && s.notes.toLowerCase().indexOf(query) > -1) {
+        return true;
+      }
+      if (s.text?.text != null && s.text.text.toLowerCase().indexOf(query) > -1) {
+        return true;
+      }
+      if (s.file?.fileName != null && s.file.fileName.toLowerCase().indexOf(query) > -1) {
+        return true;
+      }
+    });
+  }
 
-    getIndexForSearch(): lunr.Index {
-        return this.index;
-    }
+  getIndexForSearch(): lunr.Index {
+    return this.index;
+  }
 
-    private fieldExtractor(c: CipherView, joined: boolean) {
-        if (!c.hasFields) {
-            return null;
-        }
-        let fields: string[] = [];
-        c.fields.forEach(f => {
-            if (f.name != null) {
-                fields.push(f.name);
-            }
-            if (f.type === FieldType.Text && f.value != null) {
-                fields.push(f.value);
-            }
-        });
-        fields = fields.filter(f => f.trim() !== '');
-        if (fields.length === 0) {
-            return null;
-        }
-        return joined ? fields.join(' ') : fields;
+  private fieldExtractor(c: CipherView, joined: boolean) {
+    if (!c.hasFields) {
+      return null;
+    }
+    let fields: string[] = [];
+    c.fields.forEach((f) => {
+      if (f.name != null) {
+        fields.push(f.name);
+      }
+      if (f.type === FieldType.Text && f.value != null) {
+        fields.push(f.value);
+      }
+    });
+    fields = fields.filter((f) => f.trim() !== "");
+    if (fields.length === 0) {
+      return null;
     }
+    return joined ? fields.join(" ") : fields;
+  }
 
-    private attachmentExtractor(c: CipherView, joined: boolean) {
-        if (!c.hasAttachments) {
-            return null;
-        }
-        let attachments: string[] = [];
-        c.attachments.forEach(a => {
-            if (a != null && a.fileName != null) {
-                if (joined && a.fileName.indexOf('.') > -1) {
-                    attachments.push(a.fileName.substr(0, a.fileName.lastIndexOf('.')));
-                } else {
-                    attachments.push(a.fileName);
-                }
-            }
-        });
-        attachments = attachments.filter(f => f.trim() !== '');
-        if (attachments.length === 0) {
-            return null;
+  private attachmentExtractor(c: CipherView, joined: boolean) {
+    if (!c.hasAttachments) {
+      return null;
+    }
+    let attachments: string[] = [];
+    c.attachments.forEach((a) => {
+      if (a != null && a.fileName != null) {
+        if (joined && a.fileName.indexOf(".") > -1) {
+          attachments.push(a.fileName.substr(0, a.fileName.lastIndexOf(".")));
+        } else {
+          attachments.push(a.fileName);
         }
-        return joined ? attachments.join(' ') : attachments;
+      }
+    });
+    attachments = attachments.filter((f) => f.trim() !== "");
+    if (attachments.length === 0) {
+      return null;
     }
+    return joined ? attachments.join(" ") : attachments;
+  }
 
-    private uriExtractor(c: CipherView) {
-        if (c.type !== CipherType.Login || c.login == null || !c.login.hasUris) {
-            return null;
-        }
-        const uris: string[] = [];
-        c.login.uris.forEach(u => {
-            if (u.uri == null || u.uri === '') {
-                return;
-            }
-            if (u.hostname != null) {
-                uris.push(u.hostname);
-                return;
-            }
-            let uri = u.uri;
-            if (u.match !== UriMatchType.RegularExpression) {
-                const protocolIndex = uri.indexOf('://');
-                if (protocolIndex > -1) {
-                    uri = uri.substr(protocolIndex + 3);
-                }
-                const queryIndex = uri.search(/\?|&|#/);
-                if (queryIndex > -1) {
-                    uri = uri.substring(0, queryIndex);
-                }
-            }
-            uris.push(uri);
-        });
-        return uris.length > 0 ? uris : null;
+  private uriExtractor(c: CipherView) {
+    if (c.type !== CipherType.Login || c.login == null || !c.login.hasUris) {
+      return null;
     }
+    const uris: string[] = [];
+    c.login.uris.forEach((u) => {
+      if (u.uri == null || u.uri === "") {
+        return;
+      }
+      if (u.hostname != null) {
+        uris.push(u.hostname);
+        return;
+      }
+      let uri = u.uri;
+      if (u.match !== UriMatchType.RegularExpression) {
+        const protocolIndex = uri.indexOf("://");
+        if (protocolIndex > -1) {
+          uri = uri.substr(protocolIndex + 3);
+        }
+        const queryIndex = uri.search(/\?|&|#/);
+        if (queryIndex > -1) {
+          uri = uri.substring(0, queryIndex);
+        }
+      }
+      uris.push(uri);
+    });
+    return uris.length > 0 ? uris : null;
+  }
 }
diff --git a/jslib/common/src/services/send.service.ts b/jslib/common/src/services/send.service.ts
index a5a9a699..630511d4 100644
--- a/jslib/common/src/services/send.service.ts
+++ b/jslib/common/src/services/send.service.ts
@@ -1,285 +1,301 @@
-import { SendData } from '../models/data/sendData';
+import { SendData } from "../models/data/sendData";
 
-import { SendRequest } from '../models/request/sendRequest';
+import { SendRequest } from "../models/request/sendRequest";
 
-import { ErrorResponse } from '../models/response/errorResponse';
-import { SendResponse } from '../models/response/sendResponse';
+import { ErrorResponse } from "../models/response/errorResponse";
+import { SendResponse } from "../models/response/sendResponse";
 
-import { EncArrayBuffer } from '../models/domain/encArrayBuffer';
-import { EncString } from '../models/domain/encString';
-import { Send } from '../models/domain/send';
-import { SendFile } from '../models/domain/sendFile';
-import { SendText } from '../models/domain/sendText';
-import { SymmetricCryptoKey } from '../models/domain/symmetricCryptoKey';
+import { EncArrayBuffer } from "../models/domain/encArrayBuffer";
+import { EncString } from "../models/domain/encString";
+import { Send } from "../models/domain/send";
+import { SendFile } from "../models/domain/sendFile";
+import { SendText } from "../models/domain/sendText";
+import { SymmetricCryptoKey } from "../models/domain/symmetricCryptoKey";
 
-import { FileUploadType } from '../enums/fileUploadType';
-import { SendType } from '../enums/sendType';
+import { SendType } from "../enums/sendType";
 
-import { SendView } from '../models/view/sendView';
+import { SendView } from "../models/view/sendView";
 
-import { ApiService } from '../abstractions/api.service';
-import { CryptoService } from '../abstractions/crypto.service';
-import { CryptoFunctionService } from '../abstractions/cryptoFunction.service';
-import { FileUploadService } from '../abstractions/fileUpload.service';
-import { I18nService } from '../abstractions/i18n.service';
-import { SendService as SendServiceAbstraction } from '../abstractions/send.service';
-import { StorageService } from '../abstractions/storage.service';
-import { UserService } from '../abstractions/user.service';
+import { ApiService } from "../abstractions/api.service";
+import { CryptoService } from "../abstractions/crypto.service";
+import { CryptoFunctionService } from "../abstractions/cryptoFunction.service";
+import { FileUploadService } from "../abstractions/fileUpload.service";
+import { I18nService } from "../abstractions/i18n.service";
+import { SendService as SendServiceAbstraction } from "../abstractions/send.service";
+import { StateService } from "../abstractions/state.service";
 
-import { Utils } from '../misc/utils';
-
-const Keys = {
-    sendsPrefix: 'sends_',
-};
+import { Utils } from "../misc/utils";
 
 export class SendService implements SendServiceAbstraction {
-    decryptedSendCache: SendView[];
-
-    constructor(private cryptoService: CryptoService, private userService: UserService,
-        private apiService: ApiService, private fileUploadService: FileUploadService,
-        private storageService: StorageService, private i18nService: I18nService,
-        private cryptoFunctionService: CryptoFunctionService) { }
-
-    clearCache(): void {
-        this.decryptedSendCache = null;
-    }
-
-    async encrypt(model: SendView, file: File | ArrayBuffer, password: string,
-        key?: SymmetricCryptoKey): Promise<[Send, EncArrayBuffer]> {
-        let fileData: EncArrayBuffer = null;
-        const send = new Send();
-        send.id = model.id;
-        send.type = model.type;
-        send.disabled = model.disabled;
-        send.hideEmail = model.hideEmail;
-        send.maxAccessCount = model.maxAccessCount;
-        if (model.key == null) {
-            model.key = await this.cryptoFunctionService.randomBytes(16);
-            model.cryptoKey = await this.cryptoService.makeSendKey(model.key);
-        }
-        if (password != null) {
-            const passwordHash = await this.cryptoFunctionService.pbkdf2(password, model.key, 'sha256', 100000);
-            send.password = Utils.fromBufferToB64(passwordHash);
-        }
-        send.key = await this.cryptoService.encrypt(model.key, key);
-        send.name = await this.cryptoService.encrypt(model.name, model.cryptoKey);
-        send.notes = await this.cryptoService.encrypt(model.notes, model.cryptoKey);
-        if (send.type === SendType.Text) {
-            send.text = new SendText();
-            send.text.text = await this.cryptoService.encrypt(model.text.text, model.cryptoKey);
-            send.text.hidden = model.text.hidden;
-        } else if (send.type === SendType.File) {
-            send.file = new SendFile();
-            if (file != null) {
-                if (file instanceof ArrayBuffer) {
-                    const [name, data] = await this.encryptFileData(model.file.fileName, file, model.cryptoKey);
-                    send.file.fileName = name;
-                    fileData = data;
-                } else {
-                    fileData = await this.parseFile(send, file, model.cryptoKey);
-                }
-            }
-        }
-
-        return [send, fileData];
+  constructor(
+    private cryptoService: CryptoService,
+    private apiService: ApiService,
+    private fileUploadService: FileUploadService,
+    private i18nService: I18nService,
+    private cryptoFunctionService: CryptoFunctionService,
+    private stateService: StateService
+  ) {}
+
+  async clearCache(): Promise<void> {
+    await this.stateService.setDecryptedSends(null);
+  }
+
+  async encrypt(
+    model: SendView,
+    file: File | ArrayBuffer,
+    password: string,
+    key?: SymmetricCryptoKey
+  ): Promise<[Send, EncArrayBuffer]> {
+    let fileData: EncArrayBuffer = null;
+    const send = new Send();
+    send.id = model.id;
+    send.type = model.type;
+    send.disabled = model.disabled;
+    send.hideEmail = model.hideEmail;
+    send.maxAccessCount = model.maxAccessCount;
+    if (model.key == null) {
+      model.key = await this.cryptoFunctionService.randomBytes(16);
+      model.cryptoKey = await this.cryptoService.makeSendKey(model.key);
     }
-
-    async get(id: string): Promise<Send> {
-        const userId = await this.userService.getUserId();
-        const sends = await this.storageService.get<{ [id: string]: SendData; }>(
-            Keys.sendsPrefix + userId);
-        if (sends == null || !sends.hasOwnProperty(id)) {
-            return null;
-        }
-
-        return new Send(sends[id]);
+    if (password != null) {
+      const passwordHash = await this.cryptoFunctionService.pbkdf2(
+        password,
+        model.key,
+        "sha256",
+        100000
+      );
+      send.password = Utils.fromBufferToB64(passwordHash);
     }
-
-    async getAll(): Promise<Send[]> {
-        const userId = await this.userService.getUserId();
-        const sends = await this.storageService.get<{ [id: string]: SendData; }>(
-            Keys.sendsPrefix + userId);
-        const response: Send[] = [];
-        for (const id in sends) {
-            if (sends.hasOwnProperty(id)) {
-                response.push(new Send(sends[id]));
-            }
+    send.key = await this.cryptoService.encrypt(model.key, key);
+    send.name = await this.cryptoService.encrypt(model.name, model.cryptoKey);
+    send.notes = await this.cryptoService.encrypt(model.notes, model.cryptoKey);
+    if (send.type === SendType.Text) {
+      send.text = new SendText();
+      send.text.text = await this.cryptoService.encrypt(model.text.text, model.cryptoKey);
+      send.text.hidden = model.text.hidden;
+    } else if (send.type === SendType.File) {
+      send.file = new SendFile();
+      if (file != null) {
+        if (file instanceof ArrayBuffer) {
+          const [name, data] = await this.encryptFileData(
+            model.file.fileName,
+            file,
+            model.cryptoKey
+          );
+          send.file.fileName = name;
+          fileData = data;
+        } else {
+          fileData = await this.parseFile(send, file, model.cryptoKey);
         }
-        return response;
+      }
     }
 
-    async getAllDecrypted(): Promise<SendView[]> {
-        if (this.decryptedSendCache != null) {
-            return this.decryptedSendCache;
-        }
-
-        const hasKey = await this.cryptoService.hasKey();
-        if (!hasKey) {
-            throw new Error('No key.');
-        }
+    return [send, fileData];
+  }
 
-        const decSends: SendView[] = [];
-        const promises: Promise<any>[] = [];
-        const sends = await this.getAll();
-        sends.forEach(send => {
-            promises.push(send.decrypt().then(f => decSends.push(f)));
-        });
+  async get(id: string): Promise<Send> {
+    const sends = await this.stateService.getEncryptedSends();
+    if (sends == null || !sends.hasOwnProperty(id)) {
+      return null;
+    }
 
-        await Promise.all(promises);
-        decSends.sort(Utils.getSortFunction(this.i18nService, 'name'));
+    return new Send(sends[id]);
+  }
 
-        this.decryptedSendCache = decSends;
-        return this.decryptedSendCache;
+  async getAll(): Promise<Send[]> {
+    const sends = await this.stateService.getEncryptedSends();
+    const response: Send[] = [];
+    for (const id in sends) {
+      if (sends.hasOwnProperty(id)) {
+        response.push(new Send(sends[id]));
+      }
     }
+    return response;
+  }
 
-    async saveWithServer(sendData: [Send, EncArrayBuffer]): Promise<any> {
-        const request = new SendRequest(sendData[0], sendData[1]?.buffer.byteLength);
-        let response: SendResponse;
-        if (sendData[0].id == null) {
-            if (sendData[0].type === SendType.Text) {
-                response = await this.apiService.postSend(request);
-            } else {
-                try {
-                    const uploadDataResponse = await this.apiService.postFileTypeSend(request);
-                    response = uploadDataResponse.sendResponse;
-
-                    await this.fileUploadService.uploadSendFile(uploadDataResponse, sendData[0].file.fileName, sendData[1]);
-                } catch (e) {
-                    if (e instanceof ErrorResponse && (e as ErrorResponse).statusCode === 404) {
-                        response = await this.legacyServerSendFileUpload(sendData, request);
-                    } else if (e instanceof ErrorResponse) {
-                        throw new Error((e as ErrorResponse).getSingleMessage());
-                    } else {
-                        throw e;
-                    }
-                }
-            }
-            sendData[0].id = response.id;
-            sendData[0].accessId = response.accessId;
-        } else {
-            response = await this.apiService.putSend(sendData[0].id, request);
-        }
+  async getAllDecrypted(): Promise<SendView[]> {
+    let decSends = await this.stateService.getDecryptedSends();
+    if (decSends != null) {
+      return decSends;
+    }
 
-        const userId = await this.userService.getUserId();
-        const data = new SendData(response, userId);
-        await this.upsert(data);
+    decSends = [];
+    const hasKey = await this.cryptoService.hasKey();
+    if (!hasKey) {
+      throw new Error("No key.");
     }
 
-    /**
-     * @deprecated Mar 25 2021: This method has been deprecated in favor of direct uploads.
-     * This method still exists for backward compatibility with old server versions.
-     */
-    async legacyServerSendFileUpload(sendData: [Send, EncArrayBuffer], request: SendRequest): Promise<SendResponse>
-    {
-        const fd = new FormData();
+    const promises: Promise<any>[] = [];
+    const sends = await this.getAll();
+    sends.forEach((send) => {
+      promises.push(send.decrypt().then((f) => decSends.push(f)));
+    });
+
+    await Promise.all(promises);
+    decSends.sort(Utils.getSortFunction(this.i18nService, "name"));
+
+    await this.stateService.setDecryptedSends(decSends);
+    return decSends;
+  }
+
+  async saveWithServer(sendData: [Send, EncArrayBuffer]): Promise<any> {
+    const request = new SendRequest(sendData[0], sendData[1]?.buffer.byteLength);
+    let response: SendResponse;
+    if (sendData[0].id == null) {
+      if (sendData[0].type === SendType.Text) {
+        response = await this.apiService.postSend(request);
+      } else {
         try {
-            const blob = new Blob([sendData[1].buffer], { type: 'application/octet-stream' });
-            fd.append('model', JSON.stringify(request));
-            fd.append('data', blob, sendData[0].file.fileName.encryptedString);
+          const uploadDataResponse = await this.apiService.postFileTypeSend(request);
+          response = uploadDataResponse.sendResponse;
+
+          await this.fileUploadService.uploadSendFile(
+            uploadDataResponse,
+            sendData[0].file.fileName,
+            sendData[1]
+          );
         } catch (e) {
-            if (Utils.isNode && !Utils.isBrowser) {
-                fd.append('model', JSON.stringify(request));
-                fd.append('data', Buffer.from(sendData[1].buffer) as any, {
-                    filepath: sendData[0].file.fileName.encryptedString,
-                    contentType: 'application/octet-stream',
-                } as any);
-            } else {
-                throw e;
-            }
+          if (e instanceof ErrorResponse && (e as ErrorResponse).statusCode === 404) {
+            response = await this.legacyServerSendFileUpload(sendData, request);
+          } else if (e instanceof ErrorResponse) {
+            throw new Error((e as ErrorResponse).getSingleMessage());
+          } else {
+            throw e;
+          }
         }
-        return await this.apiService.postSendFileLegacy(fd);
+      }
+      sendData[0].id = response.id;
+      sendData[0].accessId = response.accessId;
+    } else {
+      response = await this.apiService.putSend(sendData[0].id, request);
     }
 
-    async upsert(send: SendData | SendData[]): Promise<any> {
-        const userId = await this.userService.getUserId();
-        let sends = await this.storageService.get<{ [id: string]: SendData; }>(
-            Keys.sendsPrefix + userId);
-        if (sends == null) {
-            sends = {};
-        }
-
-        if (send instanceof SendData) {
-            const s = send as SendData;
-            sends[s.id] = s;
-        } else {
-            (send as SendData[]).forEach(s => {
-                sends[s.id] = s;
-            });
-        }
-
-        await this.storageService.save(Keys.sendsPrefix + userId, sends);
-        this.decryptedSendCache = null;
+    const userId = await this.stateService.getUserId();
+    const data = new SendData(response, userId);
+    await this.upsert(data);
+  }
+
+  /**
+   * @deprecated Mar 25 2021: This method has been deprecated in favor of direct uploads.
+   * This method still exists for backward compatibility with old server versions.
+   */
+  async legacyServerSendFileUpload(
+    sendData: [Send, EncArrayBuffer],
+    request: SendRequest
+  ): Promise<SendResponse> {
+    const fd = new FormData();
+    try {
+      const blob = new Blob([sendData[1].buffer], { type: "application/octet-stream" });
+      fd.append("model", JSON.stringify(request));
+      fd.append("data", blob, sendData[0].file.fileName.encryptedString);
+    } catch (e) {
+      if (Utils.isNode && !Utils.isBrowser) {
+        fd.append("model", JSON.stringify(request));
+        fd.append(
+          "data",
+          Buffer.from(sendData[1].buffer) as any,
+          {
+            filepath: sendData[0].file.fileName.encryptedString,
+            contentType: "application/octet-stream",
+          } as any
+        );
+      } else {
+        throw e;
+      }
     }
+    return await this.apiService.postSendFileLegacy(fd);
+  }
 
-    async replace(sends: { [id: string]: SendData; }): Promise<any> {
-        const userId = await this.userService.getUserId();
-        await this.storageService.save(Keys.sendsPrefix + userId, sends);
-        this.decryptedSendCache = null;
+  async upsert(send: SendData | SendData[]): Promise<any> {
+    let sends = await this.stateService.getEncryptedSends();
+    if (sends == null) {
+      sends = {};
     }
 
-    async clear(userId: string): Promise<any> {
-        await this.storageService.remove(Keys.sendsPrefix + userId);
-        this.decryptedSendCache = null;
+    if (send instanceof SendData) {
+      const s = send as SendData;
+      sends[s.id] = s;
+    } else {
+      (send as SendData[]).forEach((s) => {
+        sends[s.id] = s;
+      });
     }
 
-    async delete(id: string | string[]): Promise<any> {
-        const userId = await this.userService.getUserId();
-        const sends = await this.storageService.get<{ [id: string]: SendData; }>(
-            Keys.sendsPrefix + userId);
-        if (sends == null) {
-            return;
-        }
-
-        if (typeof id === 'string') {
-            if (sends[id] == null) {
-                return;
-            }
-            delete sends[id];
-        } else {
-            (id as string[]).forEach(i => {
-                delete sends[i];
-            });
-        }
+    await this.replace(sends);
+  }
 
-        await this.storageService.save(Keys.sendsPrefix + userId, sends);
-        this.decryptedSendCache = null;
-    }
+  async replace(sends: { [id: string]: SendData }): Promise<any> {
+    await this.stateService.setDecryptedSends(null);
+    await this.stateService.setEncryptedSends(sends);
+  }
 
-    async deleteWithServer(id: string): Promise<any> {
-        await this.apiService.deleteSend(id);
-        await this.delete(id);
-    }
+  async clear(): Promise<any> {
+    await this.stateService.setDecryptedSends(null);
+    await this.stateService.setEncryptedSends(null);
+  }
 
-    async removePasswordWithServer(id: string): Promise<any> {
-        const response = await this.apiService.putSendRemovePassword(id);
-        const userId = await this.userService.getUserId();
-        const data = new SendData(response, userId);
-        await this.upsert(data);
+  async delete(id: string | string[]): Promise<any> {
+    const sends = await this.stateService.getEncryptedSends();
+    if (sends == null) {
+      return;
     }
 
-    private parseFile(send: Send, file: File, key: SymmetricCryptoKey): Promise<EncArrayBuffer> {
-        return new Promise((resolve, reject) => {
-            const reader = new FileReader();
-            reader.readAsArrayBuffer(file);
-            reader.onload = async evt => {
-                try {
-                    const [name, data] = await this.encryptFileData(file.name, evt.target.result as ArrayBuffer, key);
-                    send.file.fileName = name;
-                    resolve(data);
-                } catch (e) {
-                    reject(e);
-                }
-            };
-            reader.onerror = evt => {
-                reject('Error reading file.');
-            };
-        });
+    if (typeof id === "string") {
+      if (sends[id] == null) {
+        return;
+      }
+      delete sends[id];
+    } else {
+      (id as string[]).forEach((i) => {
+        delete sends[i];
+      });
     }
 
-    private async encryptFileData(fileName: string, data: ArrayBuffer,
-        key: SymmetricCryptoKey): Promise<[EncString, EncArrayBuffer]> {
-        const encFileName = await this.cryptoService.encrypt(fileName, key);
-        const encFileData = await this.cryptoService.encryptToBytes(data, key);
-        return [encFileName, encFileData];
-    }
+    await this.replace(sends);
+  }
+
+  async deleteWithServer(id: string): Promise<any> {
+    await this.apiService.deleteSend(id);
+    await this.delete(id);
+  }
+
+  async removePasswordWithServer(id: string): Promise<any> {
+    const response = await this.apiService.putSendRemovePassword(id);
+    const userId = await this.stateService.getUserId();
+    const data = new SendData(response, userId);
+    await this.upsert(data);
+  }
+
+  private parseFile(send: Send, file: File, key: SymmetricCryptoKey): Promise<EncArrayBuffer> {
+    return new Promise((resolve, reject) => {
+      const reader = new FileReader();
+      reader.readAsArrayBuffer(file);
+      reader.onload = async (evt) => {
+        try {
+          const [name, data] = await this.encryptFileData(
+            file.name,
+            evt.target.result as ArrayBuffer,
+            key
+          );
+          send.file.fileName = name;
+          resolve(data);
+        } catch (e) {
+          reject(e);
+        }
+      };
+      reader.onerror = () => {
+        reject("Error reading file.");
+      };
+    });
+  }
+
+  private async encryptFileData(
+    fileName: string,
+    data: ArrayBuffer,
+    key: SymmetricCryptoKey
+  ): Promise<[EncString, EncArrayBuffer]> {
+    const encFileName = await this.cryptoService.encrypt(fileName, key);
+    const encFileData = await this.cryptoService.encryptToBytes(data, key);
+    return [encFileName, encFileData];
+  }
 }
diff --git a/jslib/common/src/services/settings.service.ts b/jslib/common/src/services/settings.service.ts
index 51d970f3..a8fdf333 100644
--- a/jslib/common/src/services/settings.service.ts
+++ b/jslib/common/src/services/settings.service.ts
@@ -1,62 +1,55 @@
-import { SettingsService as SettingsServiceAbstraction } from '../abstractions/settings.service';
-import { StorageService } from '../abstractions/storage.service';
-import { UserService } from '../abstractions/user.service';
+import { SettingsService as SettingsServiceAbstraction } from "../abstractions/settings.service";
+import { StateService } from "../abstractions/state.service";
 
 const Keys = {
-    settingsPrefix: 'settings_',
-    equivalentDomains: 'equivalentDomains',
+  settingsPrefix: "settings_",
+  equivalentDomains: "equivalentDomains",
 };
 
 export class SettingsService implements SettingsServiceAbstraction {
-    private settingsCache: any;
+  constructor(private stateService: StateService) {}
 
-    constructor(private userService: UserService, private storageService: StorageService) {
-    }
-
-    clearCache(): void {
-        this.settingsCache = null;
-    }
+  async clearCache(): Promise<void> {
+    await this.stateService.setSettings(null);
+  }
 
-    getEquivalentDomains(): Promise<any> {
-        return this.getSettingsKey(Keys.equivalentDomains);
-    }
+  getEquivalentDomains(): Promise<any> {
+    return this.getSettingsKey(Keys.equivalentDomains);
+  }
 
-    async setEquivalentDomains(equivalentDomains: string[][]): Promise<void> {
-        await this.setSettingsKey(Keys.equivalentDomains, equivalentDomains);
-    }
+  async setEquivalentDomains(equivalentDomains: string[][]): Promise<void> {
+    await this.setSettingsKey(Keys.equivalentDomains, equivalentDomains);
+  }
 
-    async clear(userId: string): Promise<void> {
-        await this.storageService.remove(Keys.settingsPrefix + userId);
-        this.clearCache();
-    }
+  async clear(userId?: string): Promise<void> {
+    await this.stateService.setSettings(null, { userId: userId });
+  }
 
-    // Helpers
+  // Helpers
 
-    private async getSettings(): Promise<any> {
-        if (this.settingsCache == null) {
-            const userId = await this.userService.getUserId();
-            this.settingsCache = this.storageService.get(Keys.settingsPrefix + userId);
-        }
-        return this.settingsCache;
+  private async getSettings(): Promise<any> {
+    const settings = await this.stateService.getSettings();
+    if (settings == null) {
+      const userId = await this.stateService.getUserId();
     }
+    return settings;
+  }
 
-    private async getSettingsKey(key: string): Promise<any> {
-        const settings = await this.getSettings();
-        if (settings != null && settings[key]) {
-            return settings[key];
-        }
-        return null;
+  private async getSettingsKey(key: string): Promise<any> {
+    const settings = await this.getSettings();
+    if (settings != null && settings[key]) {
+      return settings[key];
     }
+    return null;
+  }
 
-    private async setSettingsKey(key: string, value: any): Promise<void> {
-        const userId = await this.userService.getUserId();
-        let settings = await this.getSettings();
-        if (!settings) {
-            settings = {};
-        }
-
-        settings[key] = value;
-        await this.storageService.save(Keys.settingsPrefix + userId, settings);
-        this.settingsCache = settings;
+  private async setSettingsKey(key: string, value: any): Promise<void> {
+    let settings = await this.getSettings();
+    if (!settings) {
+      settings = {};
     }
+
+    settings[key] = value;
+    await this.stateService.setSettings(settings);
+  }
 }
diff --git a/jslib/common/src/services/state.service.ts b/jslib/common/src/services/state.service.ts
index 03a09e30..8ce399e9 100644
--- a/jslib/common/src/services/state.service.ts
+++ b/jslib/common/src/services/state.service.ts
@@ -1,27 +1,2455 @@
-import { StateService as StateServiceAbstraction } from '../abstractions/state.service';
+import { StateService as StateServiceAbstraction } from "../abstractions/state.service";
 
-export class StateService implements StateServiceAbstraction {
-    private state: any = {};
+import { Account, AccountData } from "../models/domain/account";
 
-    get<T>(key: string): Promise<T> {
-        if (this.state.hasOwnProperty(key)) {
-            return Promise.resolve(this.state[key]);
-        }
-        return Promise.resolve(null);
+import { LogService } from "../abstractions/log.service";
+import { StorageService } from "../abstractions/storage.service";
+
+import { HtmlStorageLocation } from "../enums/htmlStorageLocation";
+import { KdfType } from "../enums/kdfType";
+import { StorageLocation } from "../enums/storageLocation";
+import { ThemeType } from "../enums/themeType";
+import { UriMatchType } from "../enums/uriMatchType";
+
+import { CipherView } from "../models/view/cipherView";
+import { CollectionView } from "../models/view/collectionView";
+import { FolderView } from "../models/view/folderView";
+import { SendView } from "../models/view/sendView";
+
+import { EncString } from "../models/domain/encString";
+import { GeneratedPasswordHistory } from "../models/domain/generatedPasswordHistory";
+import { GlobalState } from "../models/domain/globalState";
+import { Policy } from "../models/domain/policy";
+import { State } from "../models/domain/state";
+import { StorageOptions } from "../models/domain/storageOptions";
+import { SymmetricCryptoKey } from "../models/domain/symmetricCryptoKey";
+
+import { CipherData } from "../models/data/cipherData";
+import { CollectionData } from "../models/data/collectionData";
+import { EventData } from "../models/data/eventData";
+import { FolderData } from "../models/data/folderData";
+import { OrganizationData } from "../models/data/organizationData";
+import { PolicyData } from "../models/data/policyData";
+import { ProviderData } from "../models/data/providerData";
+import { SendData } from "../models/data/sendData";
+
+import { BehaviorSubject } from "rxjs";
+
+import { StateMigrationService } from "../abstractions/stateMigration.service";
+import { EnvironmentUrls } from "../models/domain/environmentUrls";
+import { WindowState } from "../models/domain/windowState";
+
+import { StateFactory } from "../factories/stateFactory";
+
+const keys = {
+  global: "global",
+  authenticatedAccounts: "authenticatedAccounts",
+  activeUserId: "activeUserId",
+  tempAccountSettings: "tempAccountSettings", // used to hold account specific settings (i.e clear clipboard) between initial migration and first account authentication
+};
+
+const partialKeys = {
+  autoKey: "_masterkey_auto",
+  biometricKey: "_masterkey_biometric",
+  masterKey: "_masterkey",
+};
+
+export class StateService<
+  TAccount extends Account = Account,
+  TGlobalState extends GlobalState = GlobalState
+> implements StateServiceAbstraction<TAccount>
+{
+  accounts = new BehaviorSubject<{ [userId: string]: TAccount }>({});
+  activeAccount = new BehaviorSubject<string>(null);
+
+  protected state: State<TAccount, TGlobalState> = new State<TAccount, TGlobalState>(
+    this.createGlobals()
+  );
+
+  private hasBeenInited: boolean = false;
+
+  constructor(
+    protected storageService: StorageService,
+    protected secureStorageService: StorageService,
+    protected logService: LogService,
+    protected stateMigrationService: StateMigrationService,
+    protected stateFactory: StateFactory<TAccount, TGlobalState>
+  ) {}
+
+  async init(): Promise<void> {
+    if (this.hasBeenInited) {
+      return;
+    }
+
+    if (await this.stateMigrationService.needsMigration()) {
+      await this.stateMigrationService.migrate();
+    }
+
+    await this.initAccountState();
+    this.hasBeenInited = true;
+  }
+
+  async initAccountState() {
+    this.state.authenticatedAccounts =
+      (await this.storageService.get<string[]>(keys.authenticatedAccounts)) ?? [];
+    for (const i in this.state.authenticatedAccounts) {
+      if (i != null) {
+        await this.syncAccountFromDisk(this.state.authenticatedAccounts[i]);
+      }
+    }
+    const storedActiveUser = await this.storageService.get<string>(keys.activeUserId);
+    if (storedActiveUser != null) {
+      this.state.activeUserId = storedActiveUser;
+    }
+    await this.pushAccounts();
+    this.activeAccount.next(this.state.activeUserId);
+  }
+
+  async syncAccountFromDisk(userId: string) {
+    if (userId == null) {
+      return;
+    }
+    this.state.accounts[userId] = this.createAccount();
+    const diskAccount = await this.getAccountFromDisk({ userId: userId });
+    this.state.accounts[userId].profile = diskAccount.profile;
+  }
+
+  async addAccount(account: TAccount) {
+    account = await this.setAccountEnvironmentUrls(account);
+    this.state.authenticatedAccounts.push(account.profile.userId);
+    this.storageService.save(keys.authenticatedAccounts, this.state.authenticatedAccounts);
+    this.state.accounts[account.profile.userId] = account;
+    await this.scaffoldNewAccountStorage(account);
+    await this.setActiveUser(account.profile.userId);
+    this.activeAccount.next(account.profile.userId);
+  }
+
+  async setActiveUser(userId: string): Promise<void> {
+    this.clearDecryptedDataForActiveUser();
+    this.state.activeUserId = userId;
+    await this.storageService.save(keys.activeUserId, userId);
+    this.activeAccount.next(this.state.activeUserId);
+    await this.pushAccounts();
+  }
+
+  async clean(options?: StorageOptions): Promise<void> {
+    options = this.reconcileOptions(options, this.defaultInMemoryOptions);
+    await this.deAuthenticateAccount(options.userId);
+    if (options.userId === this.state.activeUserId) {
+      await this.dynamicallySetActiveUser();
+    }
+
+    await this.removeAccountFromDisk(options?.userId);
+    this.removeAccountFromMemory(options?.userId);
+    await this.pushAccounts();
+  }
+
+  async getAccessToken(options?: StorageOptions): Promise<string> {
+    return (
+      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))
+    )?.tokens?.accessToken;
+  }
+
+  async setAccessToken(value: string, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    account.tokens.accessToken = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getAddEditCipherInfo(options?: StorageOptions): Promise<any> {
+    return (await this.getAccount(this.reconcileOptions(options, this.defaultInMemoryOptions)))
+      ?.data?.addEditCipherInfo;
+  }
+
+  async setAddEditCipherInfo(value: any, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, this.defaultInMemoryOptions)
+    );
+    account.data.addEditCipherInfo = value;
+    await this.saveAccount(account, this.reconcileOptions(options, this.defaultInMemoryOptions));
+  }
+
+  async getAlwaysShowDock(options?: StorageOptions): Promise<boolean> {
+    return (
+      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))
+        ?.alwaysShowDock ?? false
+    );
+  }
+
+  async setAlwaysShowDock(value: boolean, options?: StorageOptions): Promise<void> {
+    const globals = await this.getGlobals(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    globals.alwaysShowDock = value;
+    await this.saveGlobals(
+      globals,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getApiKeyClientId(options?: StorageOptions): Promise<string> {
+    return (
+      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))
+    )?.profile?.apiKeyClientId;
+  }
+
+  async setApiKeyClientId(value: string, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    account.profile.apiKeyClientId = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getApiKeyClientSecret(options?: StorageOptions): Promise<string> {
+    return (
+      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))
+    )?.keys?.apiKeyClientSecret;
+  }
+
+  async setApiKeyClientSecret(value: string, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    account.keys.apiKeyClientSecret = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getAutoConfirmFingerPrints(options?: StorageOptions): Promise<boolean> {
+    return (
+      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))
+        ?.settings?.autoConfirmFingerPrints ?? true
+    );
+  }
+
+  async setAutoConfirmFingerprints(value: boolean, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    account.settings.autoConfirmFingerPrints = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getAutoFillOnPageLoadDefault(options?: StorageOptions): Promise<boolean> {
+    return (
+      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))
+        ?.settings?.autoFillOnPageLoadDefault ?? false
+    );
+  }
+
+  async setAutoFillOnPageLoadDefault(value: boolean, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    account.settings.autoFillOnPageLoadDefault = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getBiometricAwaitingAcceptance(options?: StorageOptions): Promise<boolean> {
+    return (
+      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))
+        ?.biometricAwaitingAcceptance ?? false
+    );
+  }
+
+  async setBiometricAwaitingAcceptance(value: boolean, options?: StorageOptions): Promise<void> {
+    const globals = await this.getGlobals(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    globals.biometricAwaitingAcceptance = value;
+    await this.saveGlobals(
+      globals,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getBiometricFingerprintValidated(options?: StorageOptions): Promise<boolean> {
+    return (
+      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))
+        ?.biometricFingerprintValidated ?? false
+    );
+  }
+
+  async setBiometricFingerprintValidated(value: boolean, options?: StorageOptions): Promise<void> {
+    const globals = await this.getGlobals(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    globals.biometricFingerprintValidated = value;
+    await this.saveGlobals(
+      globals,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getBiometricLocked(options?: StorageOptions): Promise<boolean> {
+    return (
+      (await this.getAccount(this.reconcileOptions(options, this.defaultInMemoryOptions)))?.settings
+        ?.biometricLocked ?? false
+    );
+  }
+
+  async setBiometricLocked(value: boolean, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, this.defaultInMemoryOptions)
+    );
+    account.settings.biometricLocked = value;
+    await this.saveAccount(account, this.reconcileOptions(options, this.defaultInMemoryOptions));
+  }
+
+  async getBiometricText(options?: StorageOptions): Promise<string> {
+    return (
+      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions()))
+    )?.biometricText;
+  }
+
+  async setBiometricText(value: string, options?: StorageOptions): Promise<void> {
+    const globals = await this.getGlobals(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    globals.biometricText = value;
+    await this.saveGlobals(
+      globals,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getBiometricUnlock(options?: StorageOptions): Promise<boolean> {
+    return (
+      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))
+        ?.settings?.biometricUnlock ?? false
+    );
+  }
+
+  async setBiometricUnlock(value: boolean, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    account.settings.biometricUnlock = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getCanAccessPremium(options?: StorageOptions): Promise<boolean> {
+    if (!(await this.getIsAuthenticated(options))) {
+      return false;
+    }
+
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    if (account.profile.hasPremiumPersonally) {
+      return true;
     }
 
-    save(key: string, obj: any): Promise<any> {
-        this.state[key] = obj;
-        return Promise.resolve();
+    const organizations = await this.getOrganizations(options);
+    if (organizations == null) {
+      return false;
     }
 
-    remove(key: string): Promise<any> {
-        delete this.state[key];
-        return Promise.resolve();
+    for (const id of Object.keys(organizations)) {
+      const o = organizations[id];
+      if (o.enabled && o.usersGetPremium && !o.isProviderUser) {
+        return true;
+      }
     }
 
-    purge(): Promise<any> {
-        this.state = {};
-        return Promise.resolve();
+    return false;
+  }
+
+  async getClearClipboard(options?: StorageOptions): Promise<number> {
+    return (
+      (
+        await this.getAccount(
+          this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())
+        )
+      )?.settings?.clearClipboard ?? null
+    );
+  }
+
+  async setClearClipboard(value: number, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())
+    );
+    account.settings.clearClipboard = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())
+    );
+  }
+
+  async getCollapsedGroupings(options?: StorageOptions): Promise<Set<string>> {
+    return (await this.getAccount(this.reconcileOptions(options, this.defaultInMemoryOptions)))
+      ?.data?.collapsedGroupings;
+  }
+
+  async setCollapsedGroupings(value: Set<string>, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, this.defaultInMemoryOptions)
+    );
+    account.data.collapsedGroupings = value;
+    await this.saveAccount(account, this.reconcileOptions(options, this.defaultInMemoryOptions));
+  }
+
+  async getConvertAccountToKeyConnector(options?: StorageOptions): Promise<boolean> {
+    return (
+      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))
+    )?.profile?.convertAccountToKeyConnector;
+  }
+
+  async setConvertAccountToKeyConnector(value: boolean, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    account.profile.convertAccountToKeyConnector = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getCryptoMasterKey(options?: StorageOptions): Promise<SymmetricCryptoKey> {
+    return (await this.getAccount(this.reconcileOptions(options, this.defaultInMemoryOptions)))
+      ?.keys?.cryptoMasterKey;
+  }
+
+  async setCryptoMasterKey(value: SymmetricCryptoKey, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, this.defaultInMemoryOptions)
+    );
+    account.keys.cryptoMasterKey = value;
+    await this.saveAccount(account, this.reconcileOptions(options, this.defaultInMemoryOptions));
+  }
+
+  async getCryptoMasterKeyAuto(options?: StorageOptions): Promise<string> {
+    options = this.reconcileOptions(
+      this.reconcileOptions(options, { keySuffix: "auto" }),
+      await this.defaultSecureStorageOptions()
+    );
+    if (options?.userId == null) {
+      return null;
+    }
+    return await this.secureStorageService.get(`${options.userId}${partialKeys.autoKey}`, options);
+  }
+
+  async setCryptoMasterKeyAuto(value: string, options?: StorageOptions): Promise<void> {
+    options = this.reconcileOptions(
+      this.reconcileOptions(options, { keySuffix: "auto" }),
+      await this.defaultSecureStorageOptions()
+    );
+    if (options?.userId == null) {
+      return;
+    }
+    await this.secureStorageService.save(`${options.userId}${partialKeys.autoKey}`, value, options);
+  }
+
+  async getCryptoMasterKeyB64(options?: StorageOptions): Promise<string> {
+    options = this.reconcileOptions(options, await this.defaultSecureStorageOptions());
+    if (options?.userId == null) {
+      return null;
+    }
+    return await this.secureStorageService.get(
+      `${options?.userId}${partialKeys.masterKey}`,
+      options
+    );
+  }
+
+  async setCryptoMasterKeyB64(value: string, options?: StorageOptions): Promise<void> {
+    options = this.reconcileOptions(options, await this.defaultSecureStorageOptions());
+    if (options?.userId == null) {
+      return;
+    }
+    await this.secureStorageService.save(
+      `${options.userId}${partialKeys.masterKey}`,
+      value,
+      options
+    );
+  }
+
+  async getCryptoMasterKeyBiometric(options?: StorageOptions): Promise<string> {
+    options = this.reconcileOptions(
+      this.reconcileOptions(options, { keySuffix: "biometric" }),
+      await this.defaultSecureStorageOptions()
+    );
+    if (options?.userId == null) {
+      return null;
+    }
+    return await this.secureStorageService.get(
+      `${options.userId}${partialKeys.biometricKey}`,
+      options
+    );
+  }
+
+  async hasCryptoMasterKeyBiometric(options?: StorageOptions): Promise<boolean> {
+    options = this.reconcileOptions(
+      this.reconcileOptions(options, { keySuffix: "biometric" }),
+      await this.defaultSecureStorageOptions()
+    );
+    if (options?.userId == null) {
+      return false;
+    }
+    return await this.secureStorageService.has(
+      `${options.userId}${partialKeys.biometricKey}`,
+      options
+    );
+  }
+
+  async setCryptoMasterKeyBiometric(value: string, options?: StorageOptions): Promise<void> {
+    options = this.reconcileOptions(
+      this.reconcileOptions(options, { keySuffix: "biometric" }),
+      await this.defaultSecureStorageOptions()
+    );
+    if (options?.userId == null) {
+      return;
+    }
+    await this.secureStorageService.save(
+      `${options.userId}${partialKeys.biometricKey}`,
+      value,
+      options
+    );
+  }
+
+  async getDecodedToken(options?: StorageOptions): Promise<any> {
+    return (await this.getAccount(this.reconcileOptions(options, this.defaultInMemoryOptions)))
+      ?.tokens?.decodedToken;
+  }
+
+  async setDecodedToken(value: any, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, this.defaultInMemoryOptions)
+    );
+    account.tokens.decodedToken = value;
+    await this.saveAccount(account, this.reconcileOptions(options, this.defaultInMemoryOptions));
+  }
+
+  async getDecryptedCiphers(options?: StorageOptions): Promise<CipherView[]> {
+    return (await this.getAccount(this.reconcileOptions(options, this.defaultInMemoryOptions)))
+      ?.data?.ciphers?.decrypted;
+  }
+
+  async setDecryptedCiphers(value: CipherView[], options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, this.defaultInMemoryOptions)
+    );
+    account.data.ciphers.decrypted = value;
+    await this.saveAccount(account, this.reconcileOptions(options, this.defaultInMemoryOptions));
+  }
+
+  async getDecryptedCollections(options?: StorageOptions): Promise<CollectionView[]> {
+    return (await this.getAccount(this.reconcileOptions(options, this.defaultInMemoryOptions)))
+      ?.data?.collections?.decrypted;
+  }
+
+  async setDecryptedCollections(value: CollectionView[], options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, this.defaultInMemoryOptions)
+    );
+    account.data.collections.decrypted = value;
+    await this.saveAccount(account, this.reconcileOptions(options, this.defaultInMemoryOptions));
+  }
+
+  async getDecryptedCryptoSymmetricKey(options?: StorageOptions): Promise<SymmetricCryptoKey> {
+    return (await this.getAccount(this.reconcileOptions(options, this.defaultInMemoryOptions)))
+      ?.keys?.cryptoSymmetricKey?.decrypted;
+  }
+
+  async setDecryptedCryptoSymmetricKey(
+    value: SymmetricCryptoKey,
+    options?: StorageOptions
+  ): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, this.defaultInMemoryOptions)
+    );
+    account.keys.cryptoSymmetricKey.decrypted = value;
+    await this.saveAccount(account, this.reconcileOptions(options, this.defaultInMemoryOptions));
+  }
+
+  async getDecryptedFolders(options?: StorageOptions): Promise<FolderView[]> {
+    return (await this.getAccount(this.reconcileOptions(options, this.defaultInMemoryOptions)))
+      ?.data?.folders?.decrypted;
+  }
+
+  async setDecryptedFolders(value: FolderView[], options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, this.defaultInMemoryOptions)
+    );
+    account.data.folders.decrypted = value;
+    await this.saveAccount(account, this.reconcileOptions(options, this.defaultInMemoryOptions));
+  }
+
+  async getDecryptedOrganizationKeys(
+    options?: StorageOptions
+  ): Promise<Map<string, SymmetricCryptoKey>> {
+    return (await this.getAccount(this.reconcileOptions(options, this.defaultInMemoryOptions)))
+      ?.keys?.organizationKeys?.decrypted;
+  }
+
+  async setDecryptedOrganizationKeys(
+    value: Map<string, SymmetricCryptoKey>,
+    options?: StorageOptions
+  ): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, this.defaultInMemoryOptions)
+    );
+    account.keys.organizationKeys.decrypted = value;
+    await this.saveAccount(account, this.reconcileOptions(options, this.defaultInMemoryOptions));
+  }
+
+  async getDecryptedPasswordGenerationHistory(
+    options?: StorageOptions
+  ): Promise<GeneratedPasswordHistory[]> {
+    return (await this.getAccount(this.reconcileOptions(options, this.defaultInMemoryOptions)))
+      ?.data?.passwordGenerationHistory?.decrypted;
+  }
+
+  async setDecryptedPasswordGenerationHistory(
+    value: GeneratedPasswordHistory[],
+    options?: StorageOptions
+  ): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, this.defaultInMemoryOptions)
+    );
+    account.data.passwordGenerationHistory.decrypted = value;
+    await this.saveAccount(account, this.reconcileOptions(options, this.defaultInMemoryOptions));
+  }
+
+  async getDecryptedPinProtected(options?: StorageOptions): Promise<EncString> {
+    return (await this.getAccount(this.reconcileOptions(options, this.defaultInMemoryOptions)))
+      ?.settings?.pinProtected?.decrypted;
+  }
+
+  async setDecryptedPinProtected(value: EncString, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, this.defaultInMemoryOptions)
+    );
+    account.settings.pinProtected.decrypted = value;
+    await this.saveAccount(account, this.reconcileOptions(options, this.defaultInMemoryOptions));
+  }
+
+  async getDecryptedPolicies(options?: StorageOptions): Promise<Policy[]> {
+    return (await this.getAccount(this.reconcileOptions(options, this.defaultInMemoryOptions)))
+      ?.data?.policies?.decrypted;
+  }
+
+  async setDecryptedPolicies(value: Policy[], options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, this.defaultInMemoryOptions)
+    );
+    account.data.policies.decrypted = value;
+    await this.saveAccount(account, this.reconcileOptions(options, this.defaultInMemoryOptions));
+  }
+
+  async getDecryptedPrivateKey(options?: StorageOptions): Promise<ArrayBuffer> {
+    return (await this.getAccount(this.reconcileOptions(options, this.defaultInMemoryOptions)))
+      ?.keys?.privateKey?.decrypted;
+  }
+
+  async setDecryptedPrivateKey(value: ArrayBuffer, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, this.defaultInMemoryOptions)
+    );
+    account.keys.privateKey.decrypted = value;
+    await this.saveAccount(account, this.reconcileOptions(options, this.defaultInMemoryOptions));
+  }
+
+  async getDecryptedProviderKeys(
+    options?: StorageOptions
+  ): Promise<Map<string, SymmetricCryptoKey>> {
+    return (await this.getAccount(this.reconcileOptions(options, this.defaultInMemoryOptions)))
+      ?.keys?.providerKeys?.decrypted;
+  }
+
+  async setDecryptedProviderKeys(
+    value: Map<string, SymmetricCryptoKey>,
+    options?: StorageOptions
+  ): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, this.defaultInMemoryOptions)
+    );
+    account.keys.providerKeys.decrypted = value;
+    await this.saveAccount(account, this.reconcileOptions(options, this.defaultInMemoryOptions));
+  }
+
+  async getDecryptedSends(options?: StorageOptions): Promise<SendView[]> {
+    return (await this.getAccount(this.reconcileOptions(options, this.defaultInMemoryOptions)))
+      ?.data?.sends?.decrypted;
+  }
+
+  async setDecryptedSends(value: SendView[], options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, this.defaultInMemoryOptions)
+    );
+    account.data.sends.decrypted = value;
+    await this.saveAccount(account, this.reconcileOptions(options, this.defaultInMemoryOptions));
+  }
+
+  async getDefaultUriMatch(options?: StorageOptions): Promise<UriMatchType> {
+    return (
+      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))
+    )?.settings?.defaultUriMatch;
+  }
+
+  async setDefaultUriMatch(value: UriMatchType, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    account.settings.defaultUriMatch = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getDisableAddLoginNotification(options?: StorageOptions): Promise<boolean> {
+    return (
+      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))
+        ?.settings?.disableAddLoginNotification ?? false
+    );
+  }
+
+  async setDisableAddLoginNotification(value: boolean, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    account.settings.disableAddLoginNotification = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getDisableAutoBiometricsPrompt(options?: StorageOptions): Promise<boolean> {
+    return (
+      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))
+        ?.settings?.disableAutoBiometricsPrompt ?? false
+    );
+  }
+
+  async setDisableAutoBiometricsPrompt(value: boolean, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    account.settings.disableAutoBiometricsPrompt = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getDisableAutoTotpCopy(options?: StorageOptions): Promise<boolean> {
+    return (
+      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))
+        ?.settings?.disableAutoTotpCopy ?? false
+    );
+  }
+
+  async setDisableAutoTotpCopy(value: boolean, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    account.settings.disableAutoTotpCopy = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getDisableBadgeCounter(options?: StorageOptions): Promise<boolean> {
+    return (
+      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))
+        ?.settings?.disableBadgeCounter ?? false
+    );
+  }
+
+  async setDisableBadgeCounter(value: boolean, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    account.settings.disableBadgeCounter = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getDisableChangedPasswordNotification(options?: StorageOptions): Promise<boolean> {
+    return (
+      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))
+        ?.settings?.disableChangedPasswordNotification ?? false
+    );
+  }
+
+  async setDisableChangedPasswordNotification(
+    value: boolean,
+    options?: StorageOptions
+  ): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    account.settings.disableChangedPasswordNotification = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getDisableContextMenuItem(options?: StorageOptions): Promise<boolean> {
+    return (
+      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))
+        ?.settings?.disableContextMenuItem ?? false
+    );
+  }
+
+  async setDisableContextMenuItem(value: boolean, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    account.settings.disableContextMenuItem = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getDisableFavicon(options?: StorageOptions): Promise<boolean> {
+    return (
+      (
+        await this.getGlobals(
+          this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())
+        )
+      )?.disableFavicon ?? false
+    );
+  }
+
+  async setDisableFavicon(value: boolean, options?: StorageOptions): Promise<void> {
+    const globals = await this.getGlobals(
+      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())
+    );
+    globals.disableFavicon = value;
+    await this.saveGlobals(
+      globals,
+      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())
+    );
+  }
+
+  async getDisableGa(options?: StorageOptions): Promise<boolean> {
+    return (
+      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))
+        ?.settings?.disableGa ?? false
+    );
+  }
+
+  async setDisableGa(value: boolean, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    account.settings.disableGa = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getDontShowCardsCurrentTab(options?: StorageOptions): Promise<boolean> {
+    return (
+      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))
+        ?.settings?.dontShowCardsCurrentTab ?? false
+    );
+  }
+
+  async setDontShowCardsCurrentTab(value: boolean, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    account.settings.dontShowCardsCurrentTab = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getDontShowIdentitiesCurrentTab(options?: StorageOptions): Promise<boolean> {
+    return (
+      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))
+        ?.settings?.dontShowIdentitiesCurrentTab ?? false
+    );
+  }
+
+  async setDontShowIdentitiesCurrentTab(value: boolean, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    account.settings.dontShowIdentitiesCurrentTab = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getEmail(options?: StorageOptions): Promise<string> {
+    return (await this.getAccount(this.reconcileOptions(options, this.defaultInMemoryOptions)))
+      ?.profile?.email;
+  }
+
+  async setEmail(value: string, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, this.defaultInMemoryOptions)
+    );
+    account.profile.email = value;
+    await this.saveAccount(account, this.reconcileOptions(options, this.defaultInMemoryOptions));
+  }
+
+  async getEmailVerified(options?: StorageOptions): Promise<boolean> {
+    return (
+      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))
+        ?.profile.emailVerified ?? false
+    );
+  }
+
+  async setEmailVerified(value: boolean, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    account.profile.emailVerified = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getEnableAlwaysOnTop(options?: StorageOptions): Promise<boolean> {
+    const accountPreference = (
+      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))
+    )?.settings?.enableAlwaysOnTop;
+    const globalPreference = (
+      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions()))
+    )?.enableAlwaysOnTop;
+    return accountPreference ?? globalPreference ?? false;
+  }
+
+  async setEnableAlwaysOnTop(value: boolean, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    account.settings.enableAlwaysOnTop = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+
+    const globals = await this.getGlobals(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    globals.enableAlwaysOnTop = value;
+    await this.saveGlobals(
+      globals,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getEnableAutoFillOnPageLoad(options?: StorageOptions): Promise<boolean> {
+    return (
+      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))
+        ?.settings?.enableAutoFillOnPageLoad ?? false
+    );
+  }
+
+  async setEnableAutoFillOnPageLoad(value: boolean, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    account.settings.enableAutoFillOnPageLoad = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getEnableBiometric(options?: StorageOptions): Promise<boolean> {
+    return (
+      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))
+        ?.enableBiometrics ?? false
+    );
+  }
+
+  async setEnableBiometric(value: boolean, options?: StorageOptions): Promise<void> {
+    const globals = await this.getGlobals(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    globals.enableBiometrics = value;
+    await this.saveGlobals(
+      globals,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getEnableBrowserIntegration(options?: StorageOptions): Promise<boolean> {
+    return (
+      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))
+        ?.enableBrowserIntegration ?? false
+    );
+  }
+
+  async setEnableBrowserIntegration(value: boolean, options?: StorageOptions): Promise<void> {
+    const globals = await this.getGlobals(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    globals.enableBrowserIntegration = value;
+    await this.saveGlobals(
+      globals,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getEnableBrowserIntegrationFingerprint(options?: StorageOptions): Promise<boolean> {
+    return (
+      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))
+        ?.enableBrowserIntegrationFingerprint ?? false
+    );
+  }
+
+  async setEnableBrowserIntegrationFingerprint(
+    value: boolean,
+    options?: StorageOptions
+  ): Promise<void> {
+    const globals = await this.getGlobals(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    globals.enableBrowserIntegrationFingerprint = value;
+    await this.saveGlobals(
+      globals,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getEnableCloseToTray(options?: StorageOptions): Promise<boolean> {
+    return (
+      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))
+        ?.enableCloseToTray ?? false
+    );
+  }
+
+  async setEnableCloseToTray(value: boolean, options?: StorageOptions): Promise<void> {
+    const globals = await this.getGlobals(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    globals.enableCloseToTray = value;
+    await this.saveGlobals(
+      globals,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getEnableFullWidth(options?: StorageOptions): Promise<boolean> {
+    return (
+      (
+        await this.getAccount(
+          this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())
+        )
+      )?.settings?.enableFullWidth ?? false
+    );
+  }
+
+  async setEnableFullWidth(value: boolean, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())
+    );
+    account.settings.enableFullWidth = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())
+    );
+  }
+
+  async getEnableGravitars(options?: StorageOptions): Promise<boolean> {
+    return (
+      (
+        await this.getAccount(
+          this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())
+        )
+      )?.settings?.enableGravitars ?? false
+    );
+  }
+
+  async setEnableGravitars(value: boolean, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())
+    );
+    account.settings.enableGravitars = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())
+    );
+  }
+
+  async getEnableMinimizeToTray(options?: StorageOptions): Promise<boolean> {
+    return (
+      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))
+        ?.enableMinimizeToTray ?? false
+    );
+  }
+
+  async setEnableMinimizeToTray(value: boolean, options?: StorageOptions): Promise<void> {
+    const globals = await this.getGlobals(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    globals.enableMinimizeToTray = value;
+    await this.saveGlobals(
+      globals,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getEnableStartToTray(options?: StorageOptions): Promise<boolean> {
+    return (
+      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))
+        ?.enableStartToTray ?? false
+    );
+  }
+
+  async setEnableStartToTray(value: boolean, options?: StorageOptions): Promise<void> {
+    const globals = await this.getGlobals(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    globals.enableStartToTray = value;
+    await this.saveGlobals(
+      globals,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getEnableTray(options?: StorageOptions): Promise<boolean> {
+    return (
+      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))
+        ?.enableTray ?? false
+    );
+  }
+
+  async setEnableTray(value: boolean, options?: StorageOptions): Promise<void> {
+    const globals = await this.getGlobals(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    globals.enableTray = value;
+    await this.saveGlobals(
+      globals,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getEncryptedCiphers(options?: StorageOptions): Promise<{ [id: string]: CipherData }> {
+    return (
+      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions()))
+    )?.data?.ciphers?.encrypted;
+  }
+
+  async setEncryptedCiphers(
+    value: { [id: string]: CipherData },
+    options?: StorageOptions
+  ): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())
+    );
+    account.data.ciphers.encrypted = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())
+    );
+  }
+
+  async getEncryptedCollections(
+    options?: StorageOptions
+  ): Promise<{ [id: string]: CollectionData }> {
+    return (
+      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions()))
+    )?.data?.collections?.encrypted;
+  }
+
+  async setEncryptedCollections(
+    value: { [id: string]: CollectionData },
+    options?: StorageOptions
+  ): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())
+    );
+    account.data.collections.encrypted = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())
+    );
+  }
+
+  async getEncryptedCryptoSymmetricKey(options?: StorageOptions): Promise<string> {
+    return (
+      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))
+    )?.keys.cryptoSymmetricKey.encrypted;
+  }
+
+  async setEncryptedCryptoSymmetricKey(value: string, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    account.keys.cryptoSymmetricKey.encrypted = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getEncryptedFolders(options?: StorageOptions): Promise<{ [id: string]: FolderData }> {
+    return (
+      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions()))
+    )?.data?.folders?.encrypted;
+  }
+
+  async setEncryptedFolders(
+    value: { [id: string]: FolderData },
+    options?: StorageOptions
+  ): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())
+    );
+    account.data.folders.encrypted = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())
+    );
+  }
+
+  async getEncryptedOrganizationKeys(options?: StorageOptions): Promise<any> {
+    return (
+      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))
+    )?.keys?.organizationKeys.encrypted;
+  }
+
+  async setEncryptedOrganizationKeys(
+    value: Map<string, SymmetricCryptoKey>,
+    options?: StorageOptions
+  ): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    account.keys.organizationKeys.encrypted = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getEncryptedPasswordGenerationHistory(
+    options?: StorageOptions
+  ): Promise<GeneratedPasswordHistory[]> {
+    return (
+      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))
+    )?.data?.passwordGenerationHistory?.encrypted;
+  }
+
+  async setEncryptedPasswordGenerationHistory(
+    value: GeneratedPasswordHistory[],
+    options?: StorageOptions
+  ): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    account.data.passwordGenerationHistory.encrypted = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getEncryptedPinProtected(options?: StorageOptions): Promise<string> {
+    return (
+      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))
+    )?.settings?.pinProtected?.encrypted;
+  }
+
+  async setEncryptedPinProtected(value: string, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    account.settings.pinProtected.encrypted = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getEncryptedPolicies(options?: StorageOptions): Promise<{ [id: string]: PolicyData }> {
+    return (
+      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))
+    )?.data?.policies?.encrypted;
+  }
+
+  async setEncryptedPolicies(
+    value: { [id: string]: PolicyData },
+    options?: StorageOptions
+  ): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    account.data.policies.encrypted = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getEncryptedPrivateKey(options?: StorageOptions): Promise<string> {
+    return (
+      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))
+    )?.keys?.privateKey?.encrypted;
+  }
+
+  async setEncryptedPrivateKey(value: string, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    account.keys.privateKey.encrypted = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getEncryptedProviderKeys(options?: StorageOptions): Promise<any> {
+    return (
+      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))
+    )?.keys?.providerKeys?.encrypted;
+  }
+
+  async setEncryptedProviderKeys(value: any, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    account.keys.providerKeys.encrypted = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getEncryptedSends(options?: StorageOptions): Promise<{ [id: string]: SendData }> {
+    return (
+      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions()))
+    )?.data?.sends.encrypted;
+  }
+
+  async setEncryptedSends(
+    value: { [id: string]: SendData },
+    options?: StorageOptions
+  ): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())
+    );
+    account.data.sends.encrypted = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())
+    );
+  }
+
+  async getEntityId(options?: StorageOptions): Promise<string> {
+    return (
+      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))
+    )?.profile?.entityId;
+  }
+
+  async setEntityId(value: string, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())
+    );
+    account.profile.entityId = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())
+    );
+  }
+
+  async getEntityType(options?: StorageOptions): Promise<any> {
+    return (
+      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))
+    )?.profile?.entityType;
+  }
+
+  async setEntityType(value: string, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())
+    );
+    account.profile.entityType = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())
+    );
+  }
+
+  async getEnvironmentUrls(options?: StorageOptions): Promise<EnvironmentUrls> {
+    if (this.state.activeUserId == null) {
+      return await this.getGlobalEnvironmentUrls(options);
+    }
+    options = this.reconcileOptions(options, await this.defaultOnDiskOptions());
+    return (await this.getAccount(options))?.settings?.environmentUrls ?? new EnvironmentUrls();
+  }
+
+  async setEnvironmentUrls(value: EnvironmentUrls, options?: StorageOptions): Promise<void> {
+    // Global values are set on each change and the current global settings are passed to any newly authed accounts.
+    // This is to allow setting environement values before an account is active, while still allowing individual accounts to have their own environments.
+    const globals = await this.getGlobals(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    globals.environmentUrls = value;
+    await this.saveGlobals(
+      globals,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getEquivalentDomains(options?: StorageOptions): Promise<any> {
+    return (
+      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))
+    )?.settings?.equivalentDomains;
+  }
+
+  async setEquivalentDomains(value: string, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    account.settings.equivalentDomains = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getEventCollection(options?: StorageOptions): Promise<EventData[]> {
+    return (
+      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))
+    )?.data?.eventCollection;
+  }
+
+  async setEventCollection(value: EventData[], options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    account.data.eventCollection = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getEverBeenUnlocked(options?: StorageOptions): Promise<boolean> {
+    return (
+      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))
+        ?.profile?.everBeenUnlocked ?? false
+    );
+  }
+
+  async setEverBeenUnlocked(value: boolean, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    account.profile.everBeenUnlocked = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getForcePasswordReset(options?: StorageOptions): Promise<boolean> {
+    return (
+      (await this.getAccount(this.reconcileOptions(options, this.defaultInMemoryOptions)))?.profile
+        ?.forcePasswordReset ?? false
+    );
+  }
+
+  async setForcePasswordReset(value: boolean, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, this.defaultInMemoryOptions)
+    );
+    account.profile.forcePasswordReset = value;
+    await this.saveAccount(account, this.reconcileOptions(options, this.defaultInMemoryOptions));
+  }
+
+  async getInstalledVersion(options?: StorageOptions): Promise<string> {
+    return (
+      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions()))
+    )?.installedVersion;
+  }
+
+  async setInstalledVersion(value: string, options?: StorageOptions): Promise<void> {
+    const globals = await this.getGlobals(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    globals.installedVersion = value;
+    await this.saveGlobals(
+      globals,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getIsAuthenticated(options?: StorageOptions): Promise<boolean> {
+    return (await this.getAccessToken(options)) != null && (await this.getUserId(options)) != null;
+  }
+
+  async getKdfIterations(options?: StorageOptions): Promise<number> {
+    return (
+      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))
+    )?.profile?.kdfIterations;
+  }
+
+  async setKdfIterations(value: number, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    account.profile.kdfIterations = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getKdfType(options?: StorageOptions): Promise<KdfType> {
+    return (
+      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))
+    )?.profile?.kdfType;
+  }
+
+  async setKdfType(value: KdfType, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    account.profile.kdfType = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getKeyHash(options?: StorageOptions): Promise<string> {
+    return (
+      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))
+    )?.profile?.keyHash;
+  }
+
+  async setKeyHash(value: string, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    account.profile.keyHash = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getLastActive(options?: StorageOptions): Promise<number> {
+    return (
+      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))
+    )?.profile?.lastActive;
+  }
+
+  async setLastActive(value: number, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    if (account != null) {
+      account.profile.lastActive = value;
+      await this.saveAccount(
+        account,
+        this.reconcileOptions(options, await this.defaultOnDiskOptions())
+      );
+    }
+  }
+
+  async getLastSync(options?: StorageOptions): Promise<string> {
+    return (
+      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions()))
+    )?.profile?.lastSync;
+  }
+
+  async setLastSync(value: string, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())
+    );
+    account.profile.lastSync = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())
+    );
+  }
+
+  async getLegacyEtmKey(options?: StorageOptions): Promise<SymmetricCryptoKey> {
+    return (
+      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))
+    )?.keys?.legacyEtmKey;
+  }
+
+  async setLegacyEtmKey(value: SymmetricCryptoKey, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    account.keys.legacyEtmKey = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getLocalData(options?: StorageOptions): Promise<any> {
+    return (await this.getAccount(this.reconcileOptions(options, this.defaultInMemoryOptions)))
+      ?.data?.localData;
+  }
+
+  async setLocalData(value: string, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, this.defaultInMemoryOptions)
+    );
+    account.data.localData = value;
+    await this.saveAccount(account, this.reconcileOptions(options, this.defaultInMemoryOptions));
+  }
+
+  async getLocale(options?: StorageOptions): Promise<string> {
+    return (
+      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))
+    )?.locale;
+  }
+
+  async setLocale(value: string, options?: StorageOptions): Promise<void> {
+    const globals = await this.getGlobals(
+      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())
+    );
+    globals.locale = value;
+    await this.saveGlobals(
+      globals,
+      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())
+    );
+  }
+
+  async getLoginRedirect(options?: StorageOptions): Promise<any> {
+    return (await this.getGlobals(this.reconcileOptions(options, this.defaultInMemoryOptions)))
+      ?.loginRedirect;
+  }
+
+  async setLoginRedirect(value: any, options?: StorageOptions): Promise<void> {
+    const globals = await this.getGlobals(
+      this.reconcileOptions(options, this.defaultInMemoryOptions)
+    );
+    globals.loginRedirect = value;
+    await this.saveGlobals(globals, this.reconcileOptions(options, this.defaultInMemoryOptions));
+  }
+
+  async getMainWindowSize(options?: StorageOptions): Promise<number> {
+    return (await this.getGlobals(this.reconcileOptions(options, this.defaultInMemoryOptions)))
+      ?.mainWindowSize;
+  }
+
+  async setMainWindowSize(value: number, options?: StorageOptions): Promise<void> {
+    const globals = await this.getGlobals(
+      this.reconcileOptions(options, this.defaultInMemoryOptions)
+    );
+    globals.mainWindowSize = value;
+    await this.saveGlobals(globals, this.reconcileOptions(options, this.defaultInMemoryOptions));
+  }
+
+  async getMinimizeOnCopyToClipboard(options?: StorageOptions): Promise<boolean> {
+    return (
+      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))
+        ?.settings?.minimizeOnCopyToClipboard ?? false
+    );
+  }
+
+  async setMinimizeOnCopyToClipboard(value: boolean, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    account.settings.minimizeOnCopyToClipboard = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getNeverDomains(options?: StorageOptions): Promise<{ [id: string]: any }> {
+    return (
+      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))
+    )?.settings?.neverDomains;
+  }
+
+  async setNeverDomains(value: { [id: string]: any }, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    account.settings.neverDomains = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getNoAutoPromptBiometrics(options?: StorageOptions): Promise<boolean> {
+    return (
+      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))
+        ?.noAutoPromptBiometrics ?? false
+    );
+  }
+
+  async setNoAutoPromptBiometrics(value: boolean, options?: StorageOptions): Promise<void> {
+    const globals = await this.getGlobals(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    globals.noAutoPromptBiometrics = value;
+    await this.saveGlobals(
+      globals,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getNoAutoPromptBiometricsText(options?: StorageOptions): Promise<string> {
+    return (
+      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions()))
+    )?.noAutoPromptBiometricsText;
+  }
+
+  async setNoAutoPromptBiometricsText(value: string, options?: StorageOptions): Promise<void> {
+    const globals = await this.getGlobals(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    globals.noAutoPromptBiometricsText = value;
+    await this.saveGlobals(
+      globals,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getOpenAtLogin(options?: StorageOptions): Promise<boolean> {
+    return (
+      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))
+        ?.openAtLogin ?? false
+    );
+  }
+
+  async setOpenAtLogin(value: boolean, options?: StorageOptions): Promise<void> {
+    const globals = await this.getGlobals(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    globals.openAtLogin = value;
+    await this.saveGlobals(
+      globals,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getOrganizationInvitation(options?: StorageOptions): Promise<any> {
+    return (await this.getGlobals(this.reconcileOptions(options, this.defaultInMemoryOptions)))
+      ?.organizationInvitation;
+  }
+
+  async setOrganizationInvitation(value: any, options?: StorageOptions): Promise<void> {
+    const globals = await this.getGlobals(
+      this.reconcileOptions(options, this.defaultInMemoryOptions)
+    );
+    globals.organizationInvitation = value;
+    await this.saveGlobals(globals, this.reconcileOptions(options, this.defaultInMemoryOptions));
+  }
+
+  async getOrganizations(options?: StorageOptions): Promise<{ [id: string]: OrganizationData }> {
+    return (
+      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))
+    )?.data?.organizations;
+  }
+
+  async setOrganizations(
+    value: { [id: string]: OrganizationData },
+    options?: StorageOptions
+  ): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    account.data.organizations = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getPasswordGenerationOptions(options?: StorageOptions): Promise<any> {
+    return (
+      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))
+    )?.settings?.passwordGenerationOptions;
+  }
+
+  async setPasswordGenerationOptions(value: any, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    account.settings.passwordGenerationOptions = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getProtectedPin(options?: StorageOptions): Promise<string> {
+    return (
+      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))
+    )?.settings?.protectedPin;
+  }
+
+  async setProtectedPin(value: string, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    account.settings.protectedPin = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getProviders(options?: StorageOptions): Promise<{ [id: string]: ProviderData }> {
+    return (await this.getAccount(this.reconcileOptions(options, this.defaultInMemoryOptions)))
+      ?.data?.providers;
+  }
+
+  async setProviders(
+    value: { [id: string]: ProviderData },
+    options?: StorageOptions
+  ): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, this.defaultInMemoryOptions)
+    );
+    account.data.providers = value;
+    await this.saveAccount(account, this.reconcileOptions(options, this.defaultInMemoryOptions));
+  }
+
+  async getPublicKey(options?: StorageOptions): Promise<ArrayBuffer> {
+    return (await this.getAccount(this.reconcileOptions(options, this.defaultInMemoryOptions)))
+      ?.keys?.publicKey;
+  }
+
+  async setPublicKey(value: ArrayBuffer, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, this.defaultInMemoryOptions)
+    );
+    account.keys.publicKey = value;
+    await this.saveAccount(account, this.reconcileOptions(options, this.defaultInMemoryOptions));
+  }
+
+  async getRefreshToken(options?: StorageOptions): Promise<string> {
+    return (
+      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))
+    )?.tokens?.refreshToken;
+  }
+
+  async setRefreshToken(value: string, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    account.tokens.refreshToken = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getRememberedEmail(options?: StorageOptions): Promise<string> {
+    return (
+      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))
+    )?.rememberedEmail;
+  }
+
+  async setRememberedEmail(value: string, options?: StorageOptions): Promise<void> {
+    const globals = await this.getGlobals(
+      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())
+    );
+    globals.rememberedEmail = value;
+    await this.saveGlobals(
+      globals,
+      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())
+    );
+  }
+
+  async getSecurityStamp(options?: StorageOptions): Promise<string> {
+    return (await this.getAccount(this.reconcileOptions(options, this.defaultInMemoryOptions)))
+      ?.tokens?.securityStamp;
+  }
+
+  async setSecurityStamp(value: string, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, this.defaultInMemoryOptions)
+    );
+    account.tokens.securityStamp = value;
+    await this.saveAccount(account, this.reconcileOptions(options, this.defaultInMemoryOptions));
+  }
+
+  async getSettings(options?: StorageOptions): Promise<any> {
+    return (
+      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions()))
+    )?.settings?.settings;
+  }
+
+  async setSettings(value: string, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())
+    );
+    account.settings.settings = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())
+    );
+  }
+
+  async getSsoCodeVerifier(options?: StorageOptions): Promise<string> {
+    return (
+      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions()))
+    )?.ssoCodeVerifier;
+  }
+
+  async setSsoCodeVerifier(value: string, options?: StorageOptions): Promise<void> {
+    const globals = await this.getGlobals(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    globals.ssoCodeVerifier = value;
+    await this.saveGlobals(
+      globals,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getSsoOrgIdentifier(options?: StorageOptions): Promise<string> {
+    return (
+      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))
+    )?.ssoOrganizationIdentifier;
+  }
+
+  async setSsoOrganizationIdentifier(value: string, options?: StorageOptions): Promise<void> {
+    const globals = await this.getGlobals(
+      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())
+    );
+    globals.ssoOrganizationIdentifier = value;
+    await this.saveGlobals(
+      globals,
+      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())
+    );
+  }
+
+  async getSsoState(options?: StorageOptions): Promise<string> {
+    return (
+      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions()))
+    )?.ssoState;
+  }
+
+  async setSsoState(value: string, options?: StorageOptions): Promise<void> {
+    const globals = await this.getGlobals(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    globals.ssoState = value;
+    await this.saveGlobals(
+      globals,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getTheme(options?: StorageOptions): Promise<ThemeType> {
+    return (
+      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))
+    )?.theme;
+  }
+
+  async setTheme(value: ThemeType, options?: StorageOptions): Promise<void> {
+    const globals = await this.getGlobals(
+      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())
+    );
+    globals.theme = value;
+    await this.saveGlobals(
+      globals,
+      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())
+    );
+  }
+
+  async getTwoFactorToken(options?: StorageOptions): Promise<string> {
+    return (
+      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))
+    )?.twoFactorToken;
+  }
+
+  async setTwoFactorToken(value: string, options?: StorageOptions): Promise<void> {
+    const globals = await this.getGlobals(
+      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())
+    );
+    globals.twoFactorToken = value;
+    await this.saveGlobals(
+      globals,
+      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())
+    );
+  }
+
+  async getUserId(options?: StorageOptions): Promise<string> {
+    return (
+      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))
+    )?.profile?.userId;
+  }
+
+  async getUsesKeyConnector(options?: StorageOptions): Promise<boolean> {
+    return (
+      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))
+    )?.profile?.usesKeyConnector;
+  }
+
+  async setUsesKeyConnector(value: boolean, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    account.profile.usesKeyConnector = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  async getVaultTimeout(options?: StorageOptions): Promise<number> {
+    const accountVaultTimeout = (
+      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))
+    )?.settings?.vaultTimeout;
+    return accountVaultTimeout;
+  }
+
+  async setVaultTimeout(value: number, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())
+    );
+    account.settings.vaultTimeout = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())
+    );
+  }
+
+  async getVaultTimeoutAction(options?: StorageOptions): Promise<string> {
+    const accountVaultTimeoutAction = (
+      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))
+    )?.settings?.vaultTimeoutAction;
+    const globalVaultTimeoutAction = (
+      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))
+    )?.vaultTimeoutAction;
+    return accountVaultTimeoutAction ?? globalVaultTimeoutAction;
+  }
+
+  async setVaultTimeoutAction(value: string, options?: StorageOptions): Promise<void> {
+    const account = await this.getAccount(
+      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())
+    );
+    account.settings.vaultTimeoutAction = value;
+    await this.saveAccount(
+      account,
+      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())
+    );
+  }
+
+  async getStateVersion(): Promise<number> {
+    return (await this.getGlobals(await this.defaultOnDiskLocalOptions())).stateVersion ?? 1;
+  }
+
+  async setStateVersion(value: number): Promise<void> {
+    const globals = await this.getGlobals(await this.defaultOnDiskOptions());
+    globals.stateVersion = value;
+    await this.saveGlobals(globals, await this.defaultOnDiskOptions());
+  }
+
+  async getWindow(): Promise<WindowState> {
+    const globals = await this.getGlobals(await this.defaultOnDiskOptions());
+    return globals?.window != null && Object.keys(globals.window).length > 0
+      ? globals.window
+      : new WindowState();
+  }
+
+  async setWindow(value: WindowState, options?: StorageOptions): Promise<void> {
+    const globals = await this.getGlobals(
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+    globals.window = value;
+    return await this.saveGlobals(
+      globals,
+      this.reconcileOptions(options, await this.defaultOnDiskOptions())
+    );
+  }
+
+  protected async getGlobals(options: StorageOptions): Promise<TGlobalState> {
+    let globals: TGlobalState;
+    if (this.useMemory(options.storageLocation)) {
+      globals = this.getGlobalsFromMemory();
+    }
+
+    if (this.useDisk && globals == null) {
+      globals = await this.getGlobalsFromDisk(options);
+    }
+
+    return globals ?? this.createGlobals();
+  }
+
+  protected async saveGlobals(globals: TGlobalState, options: StorageOptions) {
+    return this.useMemory(options.storageLocation)
+      ? this.saveGlobalsToMemory(globals)
+      : await this.saveGlobalsToDisk(globals, options);
+  }
+
+  protected getGlobalsFromMemory(): TGlobalState {
+    return this.state.globals;
+  }
+
+  protected async getGlobalsFromDisk(options: StorageOptions): Promise<TGlobalState> {
+    return await this.storageService.get<TGlobalState>(keys.global, options);
+  }
+
+  protected saveGlobalsToMemory(globals: TGlobalState): void {
+    this.state.globals = globals;
+  }
+
+  protected async saveGlobalsToDisk(globals: TGlobalState, options: StorageOptions): Promise<void> {
+    if (options.useSecureStorage) {
+      await this.secureStorageService.save(keys.global, globals, options);
+    } else {
+      await this.storageService.save(keys.global, globals, options);
+    }
+  }
+
+  protected async getAccount(options: StorageOptions): Promise<TAccount> {
+    try {
+      let account: TAccount;
+      if (this.useMemory(options.storageLocation)) {
+        account = this.getAccountFromMemory(options);
+      }
+
+      if (this.useDisk(options.storageLocation) && account == null) {
+        account = await this.getAccountFromDisk(options);
+      }
+
+      return account;
+    } catch (e) {
+      this.logService.error(e);
+    }
+  }
+
+  protected getAccountFromMemory(options: StorageOptions): TAccount {
+    if (this.state.accounts == null) {
+      return null;
+    }
+    return this.state.accounts[this.getUserIdFromMemory(options)];
+  }
+
+  protected getUserIdFromMemory(options: StorageOptions): string {
+    return options?.userId != null
+      ? this.state.accounts[options.userId]?.profile?.userId
+      : this.state.activeUserId;
+  }
+
+  protected async getAccountFromDisk(options: StorageOptions): Promise<TAccount> {
+    if (options?.userId == null && this.state.activeUserId == null) {
+      return null;
+    }
+
+    const account = options?.useSecureStorage
+      ? (await this.secureStorageService.get<TAccount>(options.userId, options)) ??
+        (await this.storageService.get<TAccount>(
+          options.userId,
+          this.reconcileOptions(options, { htmlStorageLocation: HtmlStorageLocation.Local })
+        ))
+      : await this.storageService.get<TAccount>(options.userId, options);
+
+    return account;
+  }
+
+  protected useMemory(storageLocation: StorageLocation) {
+    return storageLocation === StorageLocation.Memory || storageLocation === StorageLocation.Both;
+  }
+
+  protected useDisk(storageLocation: StorageLocation) {
+    return storageLocation === StorageLocation.Disk || storageLocation === StorageLocation.Both;
+  }
+
+  protected async saveAccount(
+    account: TAccount,
+    options: StorageOptions = {
+      storageLocation: StorageLocation.Both,
+      useSecureStorage: false,
+    }
+  ) {
+    return this.useMemory(options.storageLocation)
+      ? await this.saveAccountToMemory(account)
+      : await this.saveAccountToDisk(account, options);
+  }
+
+  protected async saveAccountToDisk(account: TAccount, options: StorageOptions): Promise<void> {
+    const storageLocation = options.useSecureStorage
+      ? this.secureStorageService
+      : this.storageService;
+
+    await storageLocation.save(`${options.userId}`, account, options);
+  }
+
+  protected async saveAccountToMemory(account: TAccount): Promise<void> {
+    if (this.getAccountFromMemory({ userId: account.profile.userId }) !== null) {
+      this.state.accounts[account.profile.userId] = account;
+    }
+    await this.pushAccounts();
+  }
+
+  protected async scaffoldNewAccountStorage(account: TAccount): Promise<void> {
+    await this.scaffoldNewAccountLocalStorage(account);
+    await this.scaffoldNewAccountSessionStorage(account);
+    await this.scaffoldNewAccountMemoryStorage(account);
+  }
+
+  // TODO: There is a tech debt item for splitting up these methods - only Web uses multiple storage locations in its storageService.
+  // For now these methods exist with some redundancy to facilitate this special web requirement.
+  protected async scaffoldNewAccountLocalStorage(account: TAccount): Promise<void> {
+    const storedAccount = await this.storageService.get<TAccount>(
+      account.profile.userId,
+      await this.defaultOnDiskLocalOptions()
+    );
+    // EnvironmentUrls are set before authenticating and should override whatever is stored from any previous session
+    const environmentUrls = account.settings.environmentUrls;
+    if (storedAccount?.settings != null) {
+      account.settings = storedAccount.settings;
+    } else if (await this.storageService.has(keys.tempAccountSettings)) {
+      account.settings = await this.storageService.get<any>(keys.tempAccountSettings);
+      await this.storageService.remove(keys.tempAccountSettings);
+    }
+    Object.assign(account.settings, this.createAccount().settings);
+    account.settings.environmentUrls = environmentUrls;
+    await this.storageService.save(
+      account.profile.userId,
+      account,
+      await this.defaultOnDiskLocalOptions()
+    );
+  }
+
+  protected async scaffoldNewAccountMemoryStorage(account: TAccount): Promise<void> {
+    const storedAccount = await this.storageService.get<TAccount>(
+      account.profile.userId,
+      await this.defaultOnDiskMemoryOptions()
+    );
+    if (storedAccount?.settings != null) {
+      storedAccount.settings.environmentUrls = account.settings.environmentUrls;
+      account.settings = storedAccount.settings;
+    }
+    await this.storageService.save(
+      account.profile.userId,
+      account,
+      await this.defaultOnDiskMemoryOptions()
+    );
+  }
+
+  protected async scaffoldNewAccountSessionStorage(account: TAccount): Promise<void> {
+    const storedAccount = await this.storageService.get<TAccount>(
+      account.profile.userId,
+      await this.defaultOnDiskOptions()
+    );
+    if (storedAccount?.settings != null) {
+      storedAccount.settings.environmentUrls = account.settings.environmentUrls;
+      account.settings = storedAccount.settings;
+    }
+    await this.storageService.save(
+      account.profile.userId,
+      account,
+      await this.defaultOnDiskOptions()
+    );
+  }
+  //
+
+  protected async pushAccounts(): Promise<void> {
+    await this.pruneInMemoryAccounts();
+    if (this.state?.accounts == null || Object.keys(this.state.accounts).length < 1) {
+      this.accounts.next(null);
+      return;
+    }
+
+    this.accounts.next(this.state.accounts);
+  }
+
+  protected reconcileOptions(
+    requestedOptions: StorageOptions,
+    defaultOptions: StorageOptions
+  ): StorageOptions {
+    if (requestedOptions == null) {
+      return defaultOptions;
+    }
+    requestedOptions.userId = requestedOptions?.userId ?? defaultOptions.userId;
+    requestedOptions.storageLocation =
+      requestedOptions?.storageLocation ?? defaultOptions.storageLocation;
+    requestedOptions.useSecureStorage =
+      requestedOptions?.useSecureStorage ?? defaultOptions.useSecureStorage;
+    requestedOptions.htmlStorageLocation =
+      requestedOptions?.htmlStorageLocation ?? defaultOptions.htmlStorageLocation;
+    requestedOptions.keySuffix = requestedOptions?.keySuffix ?? defaultOptions.keySuffix;
+    return requestedOptions;
+  }
+
+  protected get defaultInMemoryOptions(): StorageOptions {
+    return { storageLocation: StorageLocation.Memory, userId: this.state.activeUserId };
+  }
+
+  protected async defaultOnDiskOptions(): Promise<StorageOptions> {
+    return {
+      storageLocation: StorageLocation.Disk,
+      htmlStorageLocation: HtmlStorageLocation.Session,
+      userId: this.state.activeUserId ?? (await this.getActiveUserIdFromStorage()),
+      useSecureStorage: false,
+    };
+  }
+
+  protected async defaultOnDiskLocalOptions(): Promise<StorageOptions> {
+    return {
+      storageLocation: StorageLocation.Disk,
+      htmlStorageLocation: HtmlStorageLocation.Local,
+      userId: this.state.activeUserId ?? (await this.getActiveUserIdFromStorage()),
+      useSecureStorage: false,
+    };
+  }
+
+  protected async defaultOnDiskMemoryOptions(): Promise<StorageOptions> {
+    return {
+      storageLocation: StorageLocation.Disk,
+      htmlStorageLocation: HtmlStorageLocation.Memory,
+      userId: this.state.activeUserId ?? (await this.getUserId()),
+      useSecureStorage: false,
+    };
+  }
+
+  protected async defaultSecureStorageOptions(): Promise<StorageOptions> {
+    return {
+      storageLocation: StorageLocation.Disk,
+      useSecureStorage: true,
+      userId: this.state.activeUserId ?? (await this.getActiveUserIdFromStorage()),
+    };
+  }
+
+  protected async getActiveUserIdFromStorage(): Promise<string> {
+    return await this.storageService.get<string>(keys.activeUserId);
+  }
+
+  protected async removeAccountFromLocalStorage(
+    userId: string = this.state.activeUserId
+  ): Promise<void> {
+    const storedAccount = await this.storageService.get<TAccount>(userId, {
+      htmlStorageLocation: HtmlStorageLocation.Local,
+    });
+    await this.storageService.save(
+      userId,
+      this.resetAccount(storedAccount),
+      await this.defaultOnDiskLocalOptions()
+    );
+  }
+
+  protected async removeAccountFromSessionStorage(
+    userId: string = this.state.activeUserId
+  ): Promise<void> {
+    const storedAccount = await this.storageService.get<TAccount>(userId, {
+      htmlStorageLocation: HtmlStorageLocation.Session,
+    });
+    await this.storageService.save(
+      userId,
+      this.resetAccount(storedAccount),
+      await this.defaultOnDiskOptions()
+    );
+  }
+
+  protected async removeAccountFromSecureStorage(
+    userId: string = this.state.activeUserId
+  ): Promise<void> {
+    await this.setCryptoMasterKeyAuto(null, { userId: userId });
+    await this.setCryptoMasterKeyBiometric(null, { userId: userId });
+    await this.setCryptoMasterKeyB64(null, { userId: userId });
+  }
+
+  protected removeAccountFromMemory(userId: string = this.state.activeUserId): void {
+    delete this.state.accounts[userId];
+  }
+
+  protected async pruneInMemoryAccounts() {
+    // We preserve settings for logged out accounts, but we don't want to consider them when thinking about active account state
+    for (const userId in this.state.accounts) {
+      if (!(await this.getIsAuthenticated({ userId: userId }))) {
+        delete this.state.accounts[userId];
+      }
+    }
+  }
+
+  // settings persist even on reset, and are not effected by this method
+  protected resetAccount(account: TAccount) {
+    const persistentAccountInformation = { settings: account.settings };
+    return Object.assign(this.createAccount(), persistentAccountInformation);
+  }
+
+  protected async setAccountEnvironmentUrls(account: TAccount): Promise<TAccount> {
+    account.settings.environmentUrls = await this.getGlobalEnvironmentUrls();
+    return account;
+  }
+
+  protected async getGlobalEnvironmentUrls(options?: StorageOptions): Promise<EnvironmentUrls> {
+    options = this.reconcileOptions(options, await this.defaultOnDiskOptions());
+    return (await this.getGlobals(options)).environmentUrls ?? new EnvironmentUrls();
+  }
+
+  protected clearDecryptedDataForActiveUser() {
+    const userId = this.state.activeUserId;
+    if (userId == null) {
+      return;
+    }
+    this.state.accounts[userId].data = new AccountData();
+  }
+
+  protected createAccount(init: Partial<TAccount> = null): TAccount {
+    return this.stateFactory.createAccount(init);
+  }
+
+  protected createGlobals(init: Partial<TGlobalState> = null): TGlobalState {
+    return this.stateFactory.createGlobal(init);
+  }
+
+  protected async deAuthenticateAccount(userId: string) {
+    await this.setAccessToken(null, { userId: userId });
+    const index = this.state.authenticatedAccounts.indexOf(userId);
+    if (index > -1) {
+      this.state.authenticatedAccounts.splice(index, 1);
+      await this.storageService.save(keys.authenticatedAccounts, this.state.authenticatedAccounts);
+    }
+  }
+
+  protected async removeAccountFromDisk(userId: string) {
+    await this.removeAccountFromSessionStorage(userId);
+    await this.removeAccountFromLocalStorage(userId);
+    await this.removeAccountFromSecureStorage(userId);
+  }
+
+  protected async dynamicallySetActiveUser() {
+    for (const userId in this.state.accounts) {
+      if (userId == null) {
+        continue;
+      }
+      if (await this.getIsAuthenticated({ userId: userId })) {
+        await this.setActiveUser(userId);
+        break;
+      }
+      await this.setActiveUser(null);
     }
+  }
 }
diff --git a/jslib/common/src/services/stateMigration.service.ts b/jslib/common/src/services/stateMigration.service.ts
new file mode 100644
index 00000000..c1bf03a7
--- /dev/null
+++ b/jslib/common/src/services/stateMigration.service.ts
@@ -0,0 +1,451 @@
+import { StorageService } from "../abstractions/storage.service";
+
+import { GeneratedPasswordHistory } from "../models/domain/generatedPasswordHistory";
+import { GlobalState } from "../models/domain/globalState";
+import { StorageOptions } from "../models/domain/storageOptions";
+
+import { CipherData } from "../models/data/cipherData";
+import { CollectionData } from "../models/data/collectionData";
+import { EventData } from "../models/data/eventData";
+import { FolderData } from "../models/data/folderData";
+import { OrganizationData } from "../models/data/organizationData";
+import { PolicyData } from "../models/data/policyData";
+import { ProviderData } from "../models/data/providerData";
+import { SendData } from "../models/data/sendData";
+
+import { HtmlStorageLocation } from "../enums/htmlStorageLocation";
+import { KdfType } from "../enums/kdfType";
+import { StateVersion } from "../enums/stateVersion";
+import { ThemeType } from "../enums/themeType";
+
+import { EnvironmentUrls } from "../models/domain/environmentUrls";
+
+import { GlobalStateFactory } from "../factories/globalStateFactory";
+
+// Originally (before January 2022) storage was handled as a flat key/value pair store.
+// With the move to a typed object for state storage these keys should no longer be in use anywhere outside of this migration.
+const v1Keys: { [key: string]: string } = {
+  accessToken: "accessToken",
+  alwaysShowDock: "alwaysShowDock",
+  autoConfirmFingerprints: "autoConfirmFingerprints",
+  autoFillOnPageLoadDefault: "autoFillOnPageLoadDefault",
+  biometricAwaitingAcceptance: "biometricAwaitingAcceptance",
+  biometricFingerprintValidated: "biometricFingerprintValidated",
+  biometricText: "biometricText",
+  biometricUnlock: "biometric",
+  clearClipboard: "clearClipboardKey",
+  clientId: "apikey_clientId",
+  clientSecret: "apikey_clientSecret",
+  collapsedGroupings: "collapsedGroupings",
+  convertAccountToKeyConnector: "convertAccountToKeyConnector",
+  defaultUriMatch: "defaultUriMatch",
+  disableAddLoginNotification: "disableAddLoginNotification",
+  disableAutoBiometricsPrompt: "noAutoPromptBiometrics",
+  disableAutoTotpCopy: "disableAutoTotpCopy",
+  disableBadgeCounter: "disableBadgeCounter",
+  disableChangedPasswordNotification: "disableChangedPasswordNotification",
+  disableContextMenuItem: "disableContextMenuItem",
+  disableFavicon: "disableFavicon",
+  disableGa: "disableGa",
+  dontShowCardsCurrentTab: "dontShowCardsCurrentTab",
+  dontShowIdentitiesCurrentTab: "dontShowIdentitiesCurrentTab",
+  emailVerified: "emailVerified",
+  enableAlwaysOnTop: "enableAlwaysOnTopKey",
+  enableAutoFillOnPageLoad: "enableAutoFillOnPageLoad",
+  enableBiometric: "enabledBiometric",
+  enableBrowserIntegration: "enableBrowserIntegration",
+  enableBrowserIntegrationFingerprint: "enableBrowserIntegrationFingerprint",
+  enableCloseToTray: "enableCloseToTray",
+  enableFullWidth: "enableFullWidth",
+  enableGravatars: "enableGravatars",
+  enableMinimizeToTray: "enableMinimizeToTray",
+  enableStartToTray: "enableStartToTrayKey",
+  enableTray: "enableTray",
+  encKey: "encKey", // Generated Symmetric Key
+  encOrgKeys: "encOrgKeys",
+  encPrivate: "encPrivateKey",
+  encProviderKeys: "encProviderKeys",
+  entityId: "entityId",
+  entityType: "entityType",
+  environmentUrls: "environmentUrls",
+  equivalentDomains: "equivalentDomains",
+  eventCollection: "eventCollection",
+  forcePasswordReset: "forcePasswordReset",
+  history: "generatedPasswordHistory",
+  installedVersion: "installedVersion",
+  kdf: "kdf",
+  kdfIterations: "kdfIterations",
+  key: "key", // Master Key
+  keyHash: "keyHash",
+  lastActive: "lastActive",
+  localData: "sitesLocalData",
+  locale: "locale",
+  mainWindowSize: "mainWindowSize",
+  minimizeOnCopyToClipboard: "minimizeOnCopyToClipboardKey",
+  neverDomains: "neverDomains",
+  noAutoPromptBiometricsText: "noAutoPromptBiometricsText",
+  openAtLogin: "openAtLogin",
+  passwordGenerationOptions: "passwordGenerationOptions",
+  pinProtected: "pinProtectedKey",
+  protectedPin: "protectedPin",
+  refreshToken: "refreshToken",
+  ssoCodeVerifier: "ssoCodeVerifier",
+  ssoIdentifier: "ssoOrgIdentifier",
+  ssoState: "ssoState",
+  stamp: "securityStamp",
+  theme: "theme",
+  userEmail: "userEmail",
+  userId: "userId",
+  usesConnector: "usesKeyConnector",
+  vaultTimeoutAction: "vaultTimeoutAction",
+  vaultTimeout: "lockOption",
+  rememberedEmail: "rememberedEmail",
+};
+
+const v1KeyPrefixes: { [key: string]: string } = {
+  ciphers: "ciphers_",
+  collections: "collections_",
+  folders: "folders_",
+  lastSync: "lastSync_",
+  policies: "policies_",
+  twoFactorToken: "twoFactorToken_",
+  organizations: "organizations_",
+  providers: "providers_",
+  sends: "sends_",
+  settings: "settings_",
+};
+
+const keys = {
+  global: "global",
+  authenticatedAccounts: "authenticatedAccounts",
+  activeUserId: "activeUserId",
+  tempAccountSettings: "tempAccountSettings", // used to hold account specific settings (i.e clear clipboard) between initial migration and first account authentication
+};
+
+const partialKeys = {
+  autoKey: "_masterkey_auto",
+  biometricKey: "_masterkey_biometric",
+  masterKey: "_masterkey",
+};
+
+export class StateMigrationService<TGlobalState extends GlobalState = GlobalState> {
+  constructor(
+    protected storageService: StorageService,
+    protected secureStorageService: StorageService,
+    protected globalStateFactory: GlobalStateFactory<TGlobalState>
+  ) {}
+
+  async needsMigration(): Promise<boolean> {
+    const currentStateVersion = await this.getCurrentStateVersion();
+    return currentStateVersion == null || currentStateVersion < StateVersion.Latest;
+  }
+
+  async migrate(): Promise<void> {
+    let currentStateVersion = await this.getCurrentStateVersion();
+    while (currentStateVersion < StateVersion.Latest) {
+      switch (currentStateVersion) {
+        case StateVersion.One:
+          await this.migrateStateFrom1To2();
+          break;
+      }
+
+      currentStateVersion += 1;
+    }
+  }
+
+  protected async migrateStateFrom1To2(): Promise<void> {
+    const clearV1Keys = async (clearingUserId?: string) => {
+      for (const key in v1Keys) {
+        if (key == null) {
+          continue;
+        }
+        await this.set(v1Keys[key], null);
+      }
+      if (clearingUserId != null) {
+        for (const keyPrefix in v1KeyPrefixes) {
+          if (keyPrefix == null) {
+            continue;
+          }
+          await this.set(v1KeyPrefixes[keyPrefix] + userId, null);
+        }
+      }
+    };
+
+    // Some processes, like biometrics, may have already defined a value before migrations are run.
+    // We don't want to null out those values if they don't exist in the old storage scheme (like for new installs)
+    // So, the OOO for migration is that we:
+    // 1. Check for an existing storage value from the old storage structure OR
+    // 2. Check for a value already set by processes that run before migration OR
+    // 3. Assign the default value
+    const globals = (await this.get<GlobalState>(keys.global)) ?? this.globalStateFactory.create();
+    globals.stateVersion = StateVersion.Two;
+    globals.environmentUrls =
+      (await this.get<EnvironmentUrls>(v1Keys.environmentUrls)) ?? globals.environmentUrls;
+    globals.locale = (await this.get<string>(v1Keys.locale)) ?? globals.locale;
+    globals.noAutoPromptBiometrics =
+      (await this.get<boolean>(v1Keys.disableAutoBiometricsPrompt)) ??
+      globals.noAutoPromptBiometrics;
+    globals.noAutoPromptBiometricsText =
+      (await this.get<string>(v1Keys.noAutoPromptBiometricsText)) ??
+      globals.noAutoPromptBiometricsText;
+    globals.ssoCodeVerifier =
+      (await this.get<string>(v1Keys.ssoCodeVerifier)) ?? globals.ssoCodeVerifier;
+    globals.ssoOrganizationIdentifier =
+      (await this.get<string>(v1Keys.ssoIdentifier)) ?? globals.ssoOrganizationIdentifier;
+    globals.ssoState = (await this.get<any>(v1Keys.ssoState)) ?? globals.ssoState;
+    globals.rememberedEmail =
+      (await this.get<string>(v1Keys.rememberedEmail)) ?? globals.rememberedEmail;
+    globals.theme = (await this.get<ThemeType>(v1Keys.theme)) ?? globals.theme;
+    globals.vaultTimeout = (await this.get<number>(v1Keys.vaultTimeout)) ?? globals.vaultTimeout;
+    globals.vaultTimeoutAction =
+      (await this.get<string>(v1Keys.vaultTimeoutAction)) ?? globals.vaultTimeoutAction;
+    globals.window = (await this.get<any>(v1Keys.mainWindowSize)) ?? globals.window;
+    globals.enableTray = (await this.get<boolean>(v1Keys.enableTray)) ?? globals.enableTray;
+    globals.enableMinimizeToTray =
+      (await this.get<boolean>(v1Keys.enableMinimizeToTray)) ?? globals.enableMinimizeToTray;
+    globals.enableCloseToTray =
+      (await this.get<boolean>(v1Keys.enableCloseToTray)) ?? globals.enableCloseToTray;
+    globals.enableStartToTray =
+      (await this.get<boolean>(v1Keys.enableStartToTray)) ?? globals.enableStartToTray;
+    globals.openAtLogin = (await this.get<boolean>(v1Keys.openAtLogin)) ?? globals.openAtLogin;
+    globals.alwaysShowDock =
+      (await this.get<boolean>(v1Keys.alwaysShowDock)) ?? globals.alwaysShowDock;
+    globals.enableBrowserIntegration =
+      (await this.get<boolean>(v1Keys.enableBrowserIntegration)) ??
+      globals.enableBrowserIntegration;
+    globals.enableBrowserIntegrationFingerprint =
+      (await this.get<boolean>(v1Keys.enableBrowserIntegrationFingerprint)) ??
+      globals.enableBrowserIntegrationFingerprint;
+
+    const userId =
+      (await this.get<string>(v1Keys.userId)) ?? (await this.get<string>(v1Keys.entityId));
+
+    // (userId == null) = no logged in user (so no known userId) and we need to temporarily store account specific settings in state to migrate on first auth
+    // (userId != null) = we have a currently authed user (so known userId) with encrypted data and other key settings we can move, no need to temporarily store account settings
+    if (userId == null) {
+      await this.set(keys.tempAccountSettings, {
+        autoConfirmFingerPrints: await this.get<boolean>(v1Keys.autoConfirmFingerprints),
+        autoFillOnPageLoadDefault: await this.get<boolean>(v1Keys.autoFillOnPageLoadDefault),
+        biometricLocked: null,
+        biometricUnlock: await this.get<boolean>(v1Keys.biometricUnlock),
+        clearClipboard: await this.get<number>(v1Keys.clearClipboard),
+        defaultUriMatch: await this.get<any>(v1Keys.defaultUriMatch),
+        disableAddLoginNotification: await this.get<boolean>(v1Keys.disableAddLoginNotification),
+        disableAutoBiometricsPrompt: await this.get<boolean>(v1Keys.disableAutoBiometricsPrompt),
+        disableAutoTotpCopy: await this.get<boolean>(v1Keys.disableAutoTotpCopy),
+        disableBadgeCounter: await this.get<boolean>(v1Keys.disableBadgeCounter),
+        disableChangedPasswordNotification: await this.get<boolean>(
+          v1Keys.disableChangedPasswordNotification
+        ),
+        disableContextMenuItem: await this.get<boolean>(v1Keys.disableContextMenuItem),
+        disableGa: await this.get<boolean>(v1Keys.disableGa),
+        dontShowCardsCurrentTab: await this.get<boolean>(v1Keys.dontShowCardsCurrentTab),
+        dontShowIdentitiesCurrentTab: await this.get<boolean>(v1Keys.dontShowIdentitiesCurrentTab),
+        enableAlwaysOnTop: await this.get<boolean>(v1Keys.enableAlwaysOnTop),
+        enableAutoFillOnPageLoad: await this.get<boolean>(v1Keys.enableAutoFillOnPageLoad),
+        enableBiometric: await this.get<boolean>(v1Keys.enableBiometric),
+        enableFullWidth: await this.get<boolean>(v1Keys.enableFullWidth),
+        enableGravitars: await this.get<boolean>(v1Keys.enableGravatars),
+        environmentUrls: globals.environmentUrls,
+        equivalentDomains: await this.get<any>(v1Keys.equivalentDomains),
+        minimizeOnCopyToClipboard: await this.get<boolean>(v1Keys.minimizeOnCopyToClipboard),
+        neverDomains: await this.get<any>(v1Keys.neverDomains),
+        passwordGenerationOptions: await this.get<any>(v1Keys.passwordGenerationOptions),
+        pinProtected: {
+          decrypted: null,
+          encrypted: await this.get<string>(v1Keys.pinProtected),
+        },
+        protectedPin: await this.get<string>(v1Keys.protectedPin),
+        settings: null,
+        vaultTimeout: await this.get<number>(v1Keys.vaultTimeout),
+        vaultTimeoutAction: await this.get<string>(v1Keys.vaultTimeoutAction),
+      });
+      await this.set(keys.global, globals);
+      await this.set(keys.authenticatedAccounts, []);
+      await this.set(keys.activeUserId, null);
+      await clearV1Keys();
+      return;
+    }
+
+    globals.twoFactorToken = await this.get<string>(v1KeyPrefixes.twoFactorToken + userId);
+    await this.set(keys.global, globals);
+    await this.set(userId, {
+      data: {
+        addEditCipherInfo: null,
+        ciphers: {
+          decrypted: null,
+          encrypted: await this.get<{ [id: string]: CipherData }>(v1KeyPrefixes.ciphers + userId),
+        },
+        collapsedGroupings: null,
+        collections: {
+          decrypted: null,
+          encrypted: await this.get<{ [id: string]: CollectionData }>(
+            v1KeyPrefixes.collections + userId
+          ),
+        },
+        eventCollection: await this.get<EventData[]>(v1Keys.eventCollection),
+        folders: {
+          decrypted: null,
+          encrypted: await this.get<{ [id: string]: FolderData }>(v1KeyPrefixes.folders + userId),
+        },
+        localData: null,
+        organizations: await this.get<{ [id: string]: OrganizationData }>(
+          v1KeyPrefixes.organizations + userId
+        ),
+        passwordGenerationHistory: {
+          decrypted: null,
+          encrypted: await this.get<GeneratedPasswordHistory[]>(v1Keys.history),
+        },
+        policies: {
+          decrypted: null,
+          encrypted: await this.get<{ [id: string]: PolicyData }>(v1KeyPrefixes.policies + userId),
+        },
+        providers: await this.get<{ [id: string]: ProviderData }>(v1KeyPrefixes.providers + userId),
+        sends: {
+          decrypted: null,
+          encrypted: await this.get<{ [id: string]: SendData }>(v1KeyPrefixes.sends + userId),
+        },
+      },
+      keys: {
+        apiKeyClientSecret: await this.get<string>(v1Keys.clientSecret),
+        cryptoMasterKey: null,
+        cryptoMasterKeyAuto: null,
+        cryptoMasterKeyB64: null,
+        cryptoMasterKeyBiometric: null,
+        cryptoSymmetricKey: {
+          encrypted: await this.get<string>(v1Keys.encKey),
+          decrypted: null,
+        },
+        legacyEtmKey: null,
+        organizationKeys: {
+          decrypted: null,
+          encrypted: await this.get<any>(v1Keys.encOrgKeys + userId),
+        },
+        privateKey: {
+          decrypted: null,
+          encrypted: await this.get<string>(v1Keys.encPrivate),
+        },
+        providerKeys: {
+          decrypted: null,
+          encrypted: await this.get<any>(v1Keys.encProviderKeys + userId),
+        },
+        publicKey: null,
+      },
+      profile: {
+        apiKeyClientId: await this.get<string>(v1Keys.clientId),
+        authenticationStatus: null,
+        convertAccountToKeyConnector: await this.get<boolean>(v1Keys.convertAccountToKeyConnector),
+        email: await this.get<string>(v1Keys.userEmail),
+        emailVerified: await this.get<boolean>(v1Keys.emailVerified),
+        entityId: null,
+        entityType: null,
+        everBeenUnlocked: null,
+        forcePasswordReset: null,
+        hasPremiumPersonally: null,
+        kdfIterations: await this.get<number>(v1Keys.kdfIterations),
+        kdfType: await this.get<KdfType>(v1Keys.kdf),
+        keyHash: await this.get<string>(v1Keys.keyHash),
+        lastActive: await this.get<number>(v1Keys.lastActive),
+        lastSync: null,
+        userId: userId,
+        usesKeyConnector: null,
+      },
+      settings: {
+        autoConfirmFingerPrints: await this.get<boolean>(v1Keys.autoConfirmFingerprints),
+        autoFillOnPageLoadDefault: await this.get<boolean>(v1Keys.autoFillOnPageLoadDefault),
+        biometricLocked: null,
+        biometricUnlock: await this.get<boolean>(v1Keys.biometricUnlock),
+        clearClipboard: await this.get<number>(v1Keys.clearClipboard),
+        defaultUriMatch: await this.get<any>(v1Keys.defaultUriMatch),
+        disableAddLoginNotification: await this.get<boolean>(v1Keys.disableAddLoginNotification),
+        disableAutoBiometricsPrompt: await this.get<boolean>(v1Keys.disableAutoBiometricsPrompt),
+        disableAutoTotpCopy: await this.get<boolean>(v1Keys.disableAutoTotpCopy),
+        disableBadgeCounter: await this.get<boolean>(v1Keys.disableBadgeCounter),
+        disableChangedPasswordNotification: await this.get<boolean>(
+          v1Keys.disableChangedPasswordNotification
+        ),
+        disableContextMenuItem: await this.get<boolean>(v1Keys.disableContextMenuItem),
+        disableGa: await this.get<boolean>(v1Keys.disableGa),
+        dontShowCardsCurrentTab: await this.get<boolean>(v1Keys.dontShowCardsCurrentTab),
+        dontShowIdentitiesCurrentTab: await this.get<boolean>(v1Keys.dontShowIdentitiesCurrentTab),
+        enableAlwaysOnTop: await this.get<boolean>(v1Keys.enableAlwaysOnTop),
+        enableAutoFillOnPageLoad: await this.get<boolean>(v1Keys.enableAutoFillOnPageLoad),
+        enableBiometric: await this.get<boolean>(v1Keys.enableBiometric),
+        enableFullWidth: await this.get<boolean>(v1Keys.enableFullWidth),
+        enableGravitars: await this.get<boolean>(v1Keys.enableGravatars),
+        environmentUrls: globals.environmentUrls,
+        equivalentDomains: await this.get<any>(v1Keys.equivalentDomains),
+        minimizeOnCopyToClipboard: await this.get<boolean>(v1Keys.minimizeOnCopyToClipboard),
+        neverDomains: await this.get<any>(v1Keys.neverDomains),
+        passwordGenerationOptions: await this.get<any>(v1Keys.passwordGenerationOptions),
+        pinProtected: {
+          decrypted: null,
+          encrypted: await this.get<string>(v1Keys.pinProtected),
+        },
+        protectedPin: await this.get<string>(v1Keys.protectedPin),
+        settings: await this.get<any>(v1KeyPrefixes.settings + userId),
+        vaultTimeout: await this.get<number>(v1Keys.vaultTimeout),
+        vaultTimeoutAction: await this.get<string>(v1Keys.vaultTimeoutAction),
+      },
+      tokens: {
+        accessToken: await this.get<string>(v1Keys.accessToken),
+        decodedToken: null,
+        refreshToken: await this.get<string>(v1Keys.refreshToken),
+        securityStamp: null,
+      },
+    });
+
+    await this.set(keys.authenticatedAccounts, [userId]);
+    await this.set(keys.activeUserId, userId);
+    await clearV1Keys(userId);
+
+    if (await this.secureStorageService.has(v1Keys.key, { keySuffix: "biometric" })) {
+      await this.secureStorageService.save(
+        `${userId}${partialKeys.biometricKey}`,
+        await this.secureStorageService.get(v1Keys.key, { keySuffix: "biometric" }),
+        { keySuffix: "biometric" }
+      );
+      await this.secureStorageService.remove(v1Keys.key, { keySuffix: "biometric" });
+    }
+
+    if (await this.secureStorageService.has(v1Keys.key, { keySuffix: "auto" })) {
+      await this.secureStorageService.save(
+        `${userId}${partialKeys.autoKey}`,
+        await this.secureStorageService.get(v1Keys.key, { keySuffix: "auto" }),
+        { keySuffix: "auto" }
+      );
+      await this.secureStorageService.remove(v1Keys.key, { keySuffix: "auto" });
+    }
+
+    if (await this.secureStorageService.has(v1Keys.key)) {
+      await this.secureStorageService.save(
+        `${userId}${partialKeys.masterKey}`,
+        await this.secureStorageService.get(v1Keys.key)
+      );
+      await this.secureStorageService.remove(v1Keys.key);
+    }
+  }
+
+  protected get options(): StorageOptions {
+    return { htmlStorageLocation: HtmlStorageLocation.Local };
+  }
+
+  protected get<T>(key: string): Promise<T> {
+    return this.storageService.get<T>(key, this.options);
+  }
+
+  protected set(key: string, value: any): Promise<any> {
+    if (value == null) {
+      return this.storageService.remove(key, this.options);
+    }
+    return this.storageService.save(key, value, this.options);
+  }
+
+  protected async getGlobals(): Promise<TGlobalState> {
+    return await this.get<TGlobalState>(keys.global);
+  }
+
+  protected async getCurrentStateVersion(): Promise<StateVersion> {
+    return (await this.getGlobals())?.stateVersion;
+  }
+}
diff --git a/jslib/common/src/services/sync.service.ts b/jslib/common/src/services/sync.service.ts
index 8395ddcc..d32db18e 100644
--- a/jslib/common/src/services/sync.service.ts
+++ b/jslib/common/src/services/sync.service.ts
@@ -1,394 +1,402 @@
-import { ApiService } from '../abstractions/api.service';
-import { CipherService } from '../abstractions/cipher.service';
-import { CollectionService } from '../abstractions/collection.service';
-import { CryptoService } from '../abstractions/crypto.service';
-import { FolderService } from '../abstractions/folder.service';
-import { KeyConnectorService } from '../abstractions/keyConnector.service';
-import { LogService } from '../abstractions/log.service';
-import { MessagingService } from '../abstractions/messaging.service';
-import { PolicyService } from '../abstractions/policy.service';
-import { SendService } from '../abstractions/send.service';
-import { SettingsService } from '../abstractions/settings.service';
-import { StorageService } from '../abstractions/storage.service';
-import { SyncService as SyncServiceAbstraction } from '../abstractions/sync.service';
-import { TokenService } from '../abstractions/token.service';
-import { UserService } from '../abstractions/user.service';
-
-import { CipherData } from '../models/data/cipherData';
-import { CollectionData } from '../models/data/collectionData';
-import { FolderData } from '../models/data/folderData';
-import { OrganizationData } from '../models/data/organizationData';
-import { PolicyData } from '../models/data/policyData';
-import { ProviderData } from '../models/data/providerData';
-import { SendData } from '../models/data/sendData';
-
-import { CipherResponse } from '../models/response/cipherResponse';
-import { CollectionDetailsResponse } from '../models/response/collectionResponse';
-import { DomainsResponse } from '../models/response/domainsResponse';
-import { FolderResponse } from '../models/response/folderResponse';
+import { ApiService } from "../abstractions/api.service";
+import { CipherService } from "../abstractions/cipher.service";
+import { CollectionService } from "../abstractions/collection.service";
+import { CryptoService } from "../abstractions/crypto.service";
+import { FolderService } from "../abstractions/folder.service";
+import { KeyConnectorService } from "../abstractions/keyConnector.service";
+import { LogService } from "../abstractions/log.service";
+import { MessagingService } from "../abstractions/messaging.service";
+import { OrganizationService } from "../abstractions/organization.service";
+import { PolicyService } from "../abstractions/policy.service";
+import { ProviderService } from "../abstractions/provider.service";
+import { SendService } from "../abstractions/send.service";
+import { SettingsService } from "../abstractions/settings.service";
+import { StateService } from "../abstractions/state.service";
+import { SyncService as SyncServiceAbstraction } from "../abstractions/sync.service";
+
+import { CipherData } from "../models/data/cipherData";
+import { CollectionData } from "../models/data/collectionData";
+import { FolderData } from "../models/data/folderData";
+import { OrganizationData } from "../models/data/organizationData";
+import { PolicyData } from "../models/data/policyData";
+import { ProviderData } from "../models/data/providerData";
+import { SendData } from "../models/data/sendData";
+
+import { CipherResponse } from "../models/response/cipherResponse";
+import { CollectionDetailsResponse } from "../models/response/collectionResponse";
+import { DomainsResponse } from "../models/response/domainsResponse";
+import { FolderResponse } from "../models/response/folderResponse";
 import {
-    SyncCipherNotification,
-    SyncFolderNotification,
-    SyncSendNotification,
-} from '../models/response/notificationResponse';
-import { PolicyResponse } from '../models/response/policyResponse';
-import { ProfileResponse } from '../models/response/profileResponse';
-import { SendResponse } from '../models/response/sendResponse';
-
-const Keys = {
-    lastSyncPrefix: 'lastSync_',
-};
+  SyncCipherNotification,
+  SyncFolderNotification,
+  SyncSendNotification,
+} from "../models/response/notificationResponse";
+import { PolicyResponse } from "../models/response/policyResponse";
+import { ProfileResponse } from "../models/response/profileResponse";
+import { SendResponse } from "../models/response/sendResponse";
 
 export class SyncService implements SyncServiceAbstraction {
-    syncInProgress: boolean = false;
-
-    constructor(private userService: UserService, private apiService: ApiService,
-        private settingsService: SettingsService, private folderService: FolderService,
-        private cipherService: CipherService, private cryptoService: CryptoService,
-        private collectionService: CollectionService, private storageService: StorageService,
-        private messagingService: MessagingService, private policyService: PolicyService,
-        private sendService: SendService, private logService: LogService,
-        private tokenService: TokenService, private keyConnectorService: KeyConnectorService,
-        private logoutCallback: (expired: boolean) => Promise<void>) {
+  syncInProgress: boolean = false;
+
+  constructor(
+    private apiService: ApiService,
+    private settingsService: SettingsService,
+    private folderService: FolderService,
+    private cipherService: CipherService,
+    private cryptoService: CryptoService,
+    private collectionService: CollectionService,
+    private messagingService: MessagingService,
+    private policyService: PolicyService,
+    private sendService: SendService,
+    private logService: LogService,
+    private keyConnectorService: KeyConnectorService,
+    private stateService: StateService,
+    private organizationService: OrganizationService,
+    private providerService: ProviderService,
+    private logoutCallback: (expired: boolean) => Promise<void>
+  ) {}
+
+  async getLastSync(): Promise<Date> {
+    if ((await this.stateService.getUserId()) == null) {
+      return null;
     }
 
-    async getLastSync(): Promise<Date> {
-        const userId = await this.userService.getUserId();
-        if (userId == null) {
-            return null;
-        }
+    const lastSync = await this.stateService.getLastSync();
+    if (lastSync) {
+      return new Date(lastSync);
+    }
 
-        const lastSync = await this.storageService.get<any>(Keys.lastSyncPrefix + userId);
-        if (lastSync) {
-            return new Date(lastSync);
-        }
+    return null;
+  }
 
-        return null;
-    }
+  async setLastSync(date: Date, userId?: string): Promise<any> {
+    await this.stateService.setLastSync(date.toJSON(), { userId: userId });
+  }
 
-    async setLastSync(date: Date): Promise<any> {
-        const userId = await this.userService.getUserId();
-        if (userId == null) {
-            return;
-        }
+  async fullSync(forceSync: boolean, allowThrowOnError = false): Promise<boolean> {
+    this.syncStarted();
+    const isAuthenticated = await this.stateService.getIsAuthenticated();
+    if (!isAuthenticated) {
+      return this.syncCompleted(false);
+    }
 
-        await this.storageService.save(Keys.lastSyncPrefix + userId, date.toJSON());
+    const now = new Date();
+    let needsSync = false;
+    try {
+      needsSync = await this.needsSyncing(forceSync);
+    } catch (e) {
+      if (allowThrowOnError) {
+        throw e;
+      }
     }
 
-    async fullSync(forceSync: boolean, allowThrowOnError = false): Promise<boolean> {
-        this.syncStarted();
-        const isAuthenticated = await this.userService.isAuthenticated();
-        if (!isAuthenticated) {
-            return this.syncCompleted(false);
-        }
+    if (!needsSync) {
+      await this.setLastSync(now);
+      return this.syncCompleted(false);
+    }
 
-        const now = new Date();
-        let needsSync = false;
-        try {
-            needsSync = await this.needsSyncing(forceSync);
-        } catch (e) {
-            if (allowThrowOnError) {
-                throw e;
-            }
+    const userId = await this.stateService.getUserId();
+    try {
+      await this.apiService.refreshIdentityToken();
+      const response = await this.apiService.getSync();
+
+      await this.syncProfile(response.profile);
+      await this.syncFolders(userId, response.folders);
+      await this.syncCollections(response.collections);
+      await this.syncCiphers(userId, response.ciphers);
+      await this.syncSends(userId, response.sends);
+      await this.syncSettings(response.domains);
+      await this.syncPolicies(response.policies);
+
+      await this.setLastSync(now);
+      return this.syncCompleted(true);
+    } catch (e) {
+      if (allowThrowOnError) {
+        throw e;
+      } else {
+        return this.syncCompleted(false);
+      }
+    }
+  }
+
+  async syncUpsertFolder(notification: SyncFolderNotification, isEdit: boolean): Promise<boolean> {
+    this.syncStarted();
+    if (await this.stateService.getIsAuthenticated()) {
+      try {
+        const localFolder = await this.folderService.get(notification.id);
+        if (
+          (!isEdit && localFolder == null) ||
+          (isEdit && localFolder != null && localFolder.revisionDate < notification.revisionDate)
+        ) {
+          const remoteFolder = await this.apiService.getFolder(notification.id);
+          if (remoteFolder != null) {
+            const userId = await this.stateService.getUserId();
+            await this.folderService.upsert(new FolderData(remoteFolder, userId));
+            this.messagingService.send("syncedUpsertedFolder", { folderId: notification.id });
+            return this.syncCompleted(true);
+          }
         }
-
-        if (!needsSync) {
-            await this.setLastSync(now);
-            return this.syncCompleted(false);
+      } catch (e) {
+        this.logService.error(e);
+      }
+    }
+    return this.syncCompleted(false);
+  }
+
+  async syncDeleteFolder(notification: SyncFolderNotification): Promise<boolean> {
+    this.syncStarted();
+    if (await this.stateService.getIsAuthenticated()) {
+      await this.folderService.delete(notification.id);
+      this.messagingService.send("syncedDeletedFolder", { folderId: notification.id });
+      this.syncCompleted(true);
+      return true;
+    }
+    return this.syncCompleted(false);
+  }
+
+  async syncUpsertCipher(notification: SyncCipherNotification, isEdit: boolean): Promise<boolean> {
+    this.syncStarted();
+    if (await this.stateService.getIsAuthenticated()) {
+      try {
+        let shouldUpdate = true;
+        const localCipher = await this.cipherService.get(notification.id);
+        if (localCipher != null && localCipher.revisionDate >= notification.revisionDate) {
+          shouldUpdate = false;
         }
 
-        const userId = await this.userService.getUserId();
-        try {
-            await this.apiService.refreshIdentityToken();
-            const response = await this.apiService.getSync();
-
-            await this.syncProfile(response.profile);
-            await this.syncFolders(userId, response.folders);
-            await this.syncCollections(response.collections);
-            await this.syncCiphers(userId, response.ciphers);
-            await this.syncSends(userId, response.sends);
-            await this.syncSettings(userId, response.domains);
-            await this.syncPolicies(response.policies);
-
-            await this.setLastSync(now);
-            return this.syncCompleted(true);
-        } catch (e) {
-            if (allowThrowOnError) {
-                throw e;
+        let checkCollections = false;
+        if (shouldUpdate) {
+          if (isEdit) {
+            shouldUpdate = localCipher != null;
+            checkCollections = true;
+          } else {
+            if (notification.collectionIds == null || notification.organizationId == null) {
+              shouldUpdate = localCipher == null;
             } else {
-                return this.syncCompleted(false);
+              shouldUpdate = false;
+              checkCollections = true;
             }
+          }
         }
-    }
 
-    async syncUpsertFolder(notification: SyncFolderNotification, isEdit: boolean): Promise<boolean> {
-        this.syncStarted();
-        if (await this.userService.isAuthenticated()) {
-            try {
-                const localFolder = await this.folderService.get(notification.id);
-                if ((!isEdit && localFolder == null) ||
-                    (isEdit && localFolder != null && localFolder.revisionDate < notification.revisionDate)) {
-                    const remoteFolder = await this.apiService.getFolder(notification.id);
-                    if (remoteFolder != null) {
-                        const userId = await this.userService.getUserId();
-                        await this.folderService.upsert(new FolderData(remoteFolder, userId));
-                        this.messagingService.send('syncedUpsertedFolder', { folderId: notification.id });
-                        return this.syncCompleted(true);
-                    }
-                }
-            } catch (e) {
-                this.logService.error(e);
+        if (
+          !shouldUpdate &&
+          checkCollections &&
+          notification.organizationId != null &&
+          notification.collectionIds != null &&
+          notification.collectionIds.length > 0
+        ) {
+          const collections = await this.collectionService.getAll();
+          if (collections != null) {
+            for (let i = 0; i < collections.length; i++) {
+              if (notification.collectionIds.indexOf(collections[i].id) > -1) {
+                shouldUpdate = true;
+                break;
+              }
             }
+          }
         }
-        return this.syncCompleted(false);
-    }
 
-    async syncDeleteFolder(notification: SyncFolderNotification): Promise<boolean> {
-        this.syncStarted();
-        if (await this.userService.isAuthenticated()) {
-            await this.folderService.delete(notification.id);
-            this.messagingService.send('syncedDeletedFolder', { folderId: notification.id });
-            this.syncCompleted(true);
-            return true;
+        if (shouldUpdate) {
+          const remoteCipher = await this.apiService.getCipher(notification.id);
+          if (remoteCipher != null) {
+            const userId = await this.stateService.getUserId();
+            await this.cipherService.upsert(new CipherData(remoteCipher, userId));
+            this.messagingService.send("syncedUpsertedCipher", { cipherId: notification.id });
+            return this.syncCompleted(true);
+          }
         }
-        return this.syncCompleted(false);
-    }
-
-    async syncUpsertCipher(notification: SyncCipherNotification, isEdit: boolean): Promise<boolean> {
-        this.syncStarted();
-        if (await this.userService.isAuthenticated()) {
-            try {
-                let shouldUpdate = true;
-                const localCipher = await this.cipherService.get(notification.id);
-                if (localCipher != null && localCipher.revisionDate >= notification.revisionDate) {
-                    shouldUpdate = false;
-                }
-
-                let checkCollections = false;
-                if (shouldUpdate) {
-                    if (isEdit) {
-                        shouldUpdate = localCipher != null;
-                        checkCollections = true;
-                    } else {
-                        if (notification.collectionIds == null || notification.organizationId == null) {
-                            shouldUpdate = localCipher == null;
-                        } else {
-                            shouldUpdate = false;
-                            checkCollections = true;
-                        }
-                    }
-                }
-
-                if (!shouldUpdate && checkCollections && notification.organizationId != null &&
-                    notification.collectionIds != null && notification.collectionIds.length > 0) {
-                    const collections = await this.collectionService.getAll();
-                    if (collections != null) {
-                        for (let i = 0; i < collections.length; i++) {
-                            if (notification.collectionIds.indexOf(collections[i].id) > -1) {
-                                shouldUpdate = true;
-                                break;
-                            }
-                        }
-                    }
-                }
-
-                if (shouldUpdate) {
-                    const remoteCipher = await this.apiService.getCipher(notification.id);
-                    if (remoteCipher != null) {
-                        const userId = await this.userService.getUserId();
-                        await this.cipherService.upsert(new CipherData(remoteCipher, userId));
-                        this.messagingService.send('syncedUpsertedCipher', { cipherId: notification.id });
-                        return this.syncCompleted(true);
-                    }
-                }
-            } catch (e) {
-                if (e != null && e.statusCode === 404 && isEdit) {
-                    await this.cipherService.delete(notification.id);
-                    this.messagingService.send('syncedDeletedCipher', { cipherId: notification.id });
-                    return this.syncCompleted(true);
-                }
-            }
+      } catch (e) {
+        if (e != null && e.statusCode === 404 && isEdit) {
+          await this.cipherService.delete(notification.id);
+          this.messagingService.send("syncedDeletedCipher", { cipherId: notification.id });
+          return this.syncCompleted(true);
         }
-        return this.syncCompleted(false);
+      }
     }
-
-    async syncDeleteCipher(notification: SyncCipherNotification): Promise<boolean> {
-        this.syncStarted();
-        if (await this.userService.isAuthenticated()) {
-            await this.cipherService.delete(notification.id);
-            this.messagingService.send('syncedDeletedCipher', { cipherId: notification.id });
+    return this.syncCompleted(false);
+  }
+
+  async syncDeleteCipher(notification: SyncCipherNotification): Promise<boolean> {
+    this.syncStarted();
+    if (await this.stateService.getIsAuthenticated()) {
+      await this.cipherService.delete(notification.id);
+      this.messagingService.send("syncedDeletedCipher", { cipherId: notification.id });
+      return this.syncCompleted(true);
+    }
+    return this.syncCompleted(false);
+  }
+
+  async syncUpsertSend(notification: SyncSendNotification, isEdit: boolean): Promise<boolean> {
+    this.syncStarted();
+    if (await this.stateService.getIsAuthenticated()) {
+      try {
+        const localSend = await this.sendService.get(notification.id);
+        if (
+          (!isEdit && localSend == null) ||
+          (isEdit && localSend != null && localSend.revisionDate < notification.revisionDate)
+        ) {
+          const remoteSend = await this.apiService.getSend(notification.id);
+          if (remoteSend != null) {
+            const userId = await this.stateService.getUserId();
+            await this.sendService.upsert(new SendData(remoteSend, userId));
+            this.messagingService.send("syncedUpsertedSend", { sendId: notification.id });
             return this.syncCompleted(true);
+          }
         }
-        return this.syncCompleted(false);
+      } catch (e) {
+        this.logService.error(e);
+      }
     }
-
-    async syncUpsertSend(notification: SyncSendNotification, isEdit: boolean): Promise<boolean> {
-        this.syncStarted();
-        if (await this.userService.isAuthenticated()) {
-            try {
-                const localSend = await this.sendService.get(notification.id);
-                if ((!isEdit && localSend == null) ||
-                    (isEdit && localSend != null && localSend.revisionDate < notification.revisionDate)) {
-                    const remoteSend = await this.apiService.getSend(notification.id);
-                    if (remoteSend != null) {
-                        const userId = await this.userService.getUserId();
-                        await this.sendService.upsert(new SendData(remoteSend, userId));
-                        this.messagingService.send('syncedUpsertedSend', { sendId: notification.id });
-                        return this.syncCompleted(true);
-                    }
-                }
-            } catch (e) {
-                this.logService.error(e);
-            }
-        }
-        return this.syncCompleted(false);
+    return this.syncCompleted(false);
+  }
+
+  async syncDeleteSend(notification: SyncSendNotification): Promise<boolean> {
+    this.syncStarted();
+    if (await this.stateService.getIsAuthenticated()) {
+      await this.sendService.delete(notification.id);
+      this.messagingService.send("syncedDeletedSend", { sendId: notification.id });
+      this.syncCompleted(true);
+      return true;
     }
+    return this.syncCompleted(false);
+  }
 
-    async syncDeleteSend(notification: SyncSendNotification): Promise<boolean> {
-        this.syncStarted();
-        if (await this.userService.isAuthenticated()) {
-            await this.sendService.delete(notification.id);
-            this.messagingService.send('syncedDeletedSend', { sendId: notification.id });
-            this.syncCompleted(true);
-            return true;
-        }
-        return this.syncCompleted(false);
-    }
+  // Helpers
 
-    // Helpers
+  private syncStarted() {
+    this.syncInProgress = true;
+    this.messagingService.send("syncStarted");
+  }
 
-    private syncStarted() {
-        this.syncInProgress = true;
-        this.messagingService.send('syncStarted');
-    }
+  private syncCompleted(successfully: boolean): boolean {
+    this.syncInProgress = false;
+    this.messagingService.send("syncCompleted", { successfully: successfully });
+    return successfully;
+  }
 
-    private syncCompleted(successfully: boolean): boolean {
-        this.syncInProgress = false;
-        this.messagingService.send('syncCompleted', { successfully: successfully });
-        return successfully;
+  private async needsSyncing(forceSync: boolean) {
+    if (forceSync) {
+      return true;
     }
 
-    private async needsSyncing(forceSync: boolean) {
-        if (forceSync) {
-            return true;
-        }
-
-        const lastSync = await this.getLastSync();
-        if (lastSync == null || lastSync.getTime() === 0) {
-            return true;
-        }
-
-        const response = await this.apiService.getAccountRevisionDate();
-        if (new Date(response) <= lastSync) {
-            return false;
-        }
-        return true;
+    const lastSync = await this.getLastSync();
+    if (lastSync == null || lastSync.getTime() === 0) {
+      return true;
     }
 
-    private async syncProfile(response: ProfileResponse) {
-        const stamp = await this.userService.getSecurityStamp();
-        if (stamp != null && stamp !== response.securityStamp) {
-            if (this.logoutCallback != null) {
-                await this.logoutCallback(true);
-            }
-
-            throw new Error('Stamp has changed');
-        }
-
-        await this.cryptoService.setEncKey(response.key);
-        await this.cryptoService.setEncPrivateKey(response.privateKey);
-        await this.cryptoService.setProviderKeys(response.providers);
-        await this.cryptoService.setOrgKeys(response.organizations, response.providerOrganizations);
-        await this.userService.setSecurityStamp(response.securityStamp);
-        await this.userService.setEmailVerified(response.emailVerified);
-        await this.userService.setForcePasswordReset(response.forcePasswordReset);
-        await this.keyConnectorService.setUsesKeyConnector(response.usesKeyConnector);
-
-        const organizations: { [id: string]: OrganizationData; } = {};
-        response.organizations.forEach(o => {
-            organizations[o.id] = new OrganizationData(o);
-        });
-
-        const providers: { [id: string]: ProviderData; } = {};
-        response.providers.forEach(p => {
-            providers[p.id] = new ProviderData(p);
-        });
-
-        response.providerOrganizations.forEach(o => {
-            if (organizations[o.id] == null) {
-                organizations[o.id] = new OrganizationData(o);
-                organizations[o.id].isProviderUser = true;
-            }
-        });
-
-        await Promise.all([
-            this.userService.replaceOrganizations(organizations),
-            this.userService.replaceProviders(providers),
-        ]);
-
-        if (await this.keyConnectorService.userNeedsMigration()) {
-            this.messagingService.send('convertAccountToKeyConnector');
-        } else {
-            this.keyConnectorService.removeConvertAccountRequired();
-        }
+    const response = await this.apiService.getAccountRevisionDate();
+    if (new Date(response) <= lastSync) {
+      return false;
     }
+    return true;
+  }
 
-    private async syncFolders(userId: string, response: FolderResponse[]) {
-        const folders: { [id: string]: FolderData; } = {};
-        response.forEach(f => {
-            folders[f.id] = new FolderData(f, userId);
-        });
-        return await this.folderService.replace(folders);
-    }
+  private async syncProfile(response: ProfileResponse) {
+    const stamp = await this.stateService.getSecurityStamp();
+    if (stamp != null && stamp !== response.securityStamp) {
+      if (this.logoutCallback != null) {
+        await this.logoutCallback(true);
+      }
 
-    private async syncCollections(response: CollectionDetailsResponse[]) {
-        const collections: { [id: string]: CollectionData; } = {};
-        response.forEach(c => {
-            collections[c.id] = new CollectionData(c);
-        });
-        return await this.collectionService.replace(collections);
+      throw new Error("Stamp has changed");
     }
 
-    private async syncCiphers(userId: string, response: CipherResponse[]) {
-        const ciphers: { [id: string]: CipherData; } = {};
-        response.forEach(c => {
-            ciphers[c.id] = new CipherData(c, userId);
-        });
-        return await this.cipherService.replace(ciphers);
+    await this.cryptoService.setEncKey(response.key);
+    await this.cryptoService.setEncPrivateKey(response.privateKey);
+    await this.cryptoService.setProviderKeys(response.providers);
+    await this.cryptoService.setOrgKeys(response.organizations, response.providerOrganizations);
+    await this.stateService.setSecurityStamp(response.securityStamp);
+    await this.stateService.setEmailVerified(response.emailVerified);
+    await this.stateService.setForcePasswordReset(response.forcePasswordReset);
+    await this.keyConnectorService.setUsesKeyConnector(response.usesKeyConnector);
+
+    const organizations: { [id: string]: OrganizationData } = {};
+    response.organizations.forEach((o) => {
+      organizations[o.id] = new OrganizationData(o);
+    });
+
+    const providers: { [id: string]: ProviderData } = {};
+    response.providers.forEach((p) => {
+      providers[p.id] = new ProviderData(p);
+    });
+
+    response.providerOrganizations.forEach((o) => {
+      if (organizations[o.id] == null) {
+        organizations[o.id] = new OrganizationData(o);
+        organizations[o.id].isProviderUser = true;
+      }
+    });
+
+    await Promise.all([
+      this.organizationService.save(organizations),
+      this.providerService.save(providers),
+    ]);
+
+    if (await this.keyConnectorService.userNeedsMigration()) {
+      await this.keyConnectorService.setConvertAccountRequired(true);
+      this.messagingService.send("convertAccountToKeyConnector");
+    } else {
+      this.keyConnectorService.removeConvertAccountRequired();
     }
-
-    private async syncSends(userId: string, response: SendResponse[]) {
-        const sends: { [id: string]: SendData; } = {};
-        response.forEach(s => {
-            sends[s.id] = new SendData(s, userId);
-        });
-        return await this.sendService.replace(sends);
+  }
+
+  private async syncFolders(userId: string, response: FolderResponse[]) {
+    const folders: { [id: string]: FolderData } = {};
+    response.forEach((f) => {
+      folders[f.id] = new FolderData(f, userId);
+    });
+    return await this.folderService.replace(folders);
+  }
+
+  private async syncCollections(response: CollectionDetailsResponse[]) {
+    const collections: { [id: string]: CollectionData } = {};
+    response.forEach((c) => {
+      collections[c.id] = new CollectionData(c);
+    });
+    return await this.collectionService.replace(collections);
+  }
+
+  private async syncCiphers(userId: string, response: CipherResponse[]) {
+    const ciphers: { [id: string]: CipherData } = {};
+    response.forEach((c) => {
+      ciphers[c.id] = new CipherData(c, userId);
+    });
+    return await this.cipherService.replace(ciphers);
+  }
+
+  private async syncSends(userId: string, response: SendResponse[]) {
+    const sends: { [id: string]: SendData } = {};
+    response.forEach((s) => {
+      sends[s.id] = new SendData(s, userId);
+    });
+    return await this.sendService.replace(sends);
+  }
+
+  private async syncSettings(response: DomainsResponse) {
+    let eqDomains: string[][] = [];
+    if (response != null && response.equivalentDomains != null) {
+      eqDomains = eqDomains.concat(response.equivalentDomains);
     }
 
-    private async syncSettings(userId: string, response: DomainsResponse) {
-        let eqDomains: string[][] = [];
-        if (response != null && response.equivalentDomains != null) {
-            eqDomains = eqDomains.concat(response.equivalentDomains);
-        }
-
-        if (response != null && response.globalEquivalentDomains != null) {
-            response.globalEquivalentDomains.forEach(global => {
-                if (global.domains.length > 0) {
-                    eqDomains.push(global.domains);
-                }
-            });
+    if (response != null && response.globalEquivalentDomains != null) {
+      response.globalEquivalentDomains.forEach((global) => {
+        if (global.domains.length > 0) {
+          eqDomains.push(global.domains);
         }
-
-        return this.settingsService.setEquivalentDomains(eqDomains);
+      });
     }
 
-    private async syncPolicies(response: PolicyResponse[]) {
-        const policies: { [id: string]: PolicyData; } = {};
-        if (response != null) {
-            response.forEach(p => {
-                policies[p.id] = new PolicyData(p);
-            });
-        }
-        return await this.policyService.replace(policies);
+    return this.settingsService.setEquivalentDomains(eqDomains);
+  }
+
+  private async syncPolicies(response: PolicyResponse[]) {
+    const policies: { [id: string]: PolicyData } = {};
+    if (response != null) {
+      response.forEach((p) => {
+        policies[p.id] = new PolicyData(p);
+      });
     }
+    return await this.policyService.replace(policies);
+  }
 }
diff --git a/jslib/common/src/services/system.service.ts b/jslib/common/src/services/system.service.ts
index ada91813..4c84b792 100644
--- a/jslib/common/src/services/system.service.ts
+++ b/jslib/common/src/services/system.service.ts
@@ -1,89 +1,91 @@
-import { MessagingService } from '../abstractions/messaging.service';
-import { PlatformUtilsService } from '../abstractions/platformUtils.service';
-import { StorageService } from '../abstractions/storage.service';
-import { SystemService as SystemServiceAbstraction } from '../abstractions/system.service';
-import { VaultTimeoutService } from '../abstractions/vaultTimeout.service';
+import { MessagingService } from "../abstractions/messaging.service";
+import { PlatformUtilsService } from "../abstractions/platformUtils.service";
+import { StateService } from "../abstractions/state.service";
+import { SystemService as SystemServiceAbstraction } from "../abstractions/system.service";
 
-import { ConstantsService } from './constants.service';
-
-import { Utils } from '../misc/utils';
+import { Utils } from "../misc/utils";
 
 export class SystemService implements SystemServiceAbstraction {
-    private reloadInterval: any = null;
-    private clearClipboardTimeout: any = null;
-    private clearClipboardTimeoutFunction: () => Promise<any> = null;
+  private reloadInterval: any = null;
+  private clearClipboardTimeout: any = null;
+  private clearClipboardTimeoutFunction: () => Promise<any> = null;
 
-    constructor(private storageService: StorageService, private vaultTimeoutService: VaultTimeoutService,
-        private messagingService: MessagingService, private platformUtilsService: PlatformUtilsService,
-        private reloadCallback: () => Promise<void> = null) {
-    }
+  constructor(
+    private messagingService: MessagingService,
+    private platformUtilsService: PlatformUtilsService,
+    private reloadCallback: () => Promise<void> = null,
+    private stateService: StateService
+  ) {}
 
-    startProcessReload(): void {
-        if (this.vaultTimeoutService.pinProtectedKey != null ||
-            this.vaultTimeoutService.biometricLocked ||
-            this.reloadInterval != null) {
-            return;
-        }
-        this.cancelProcessReload();
-        this.reloadInterval = setInterval(async () => {
-            let doRefresh = false;
-            const lastActive = await this.storageService.get<number>(ConstantsService.lastActiveKey);
-            if (lastActive != null) {
-                const diffSeconds = (new Date()).getTime() - lastActive;
-                // Don't refresh if they are still active in the window
-                doRefresh = diffSeconds >= 5000;
-            }
-            const biometricLockedFingerprintValidated =
-                await this.storageService.get<boolean>(ConstantsService.biometricFingerprintValidated) && this.vaultTimeoutService.biometricLocked;
-            if (doRefresh && !biometricLockedFingerprintValidated) {
-                clearInterval(this.reloadInterval);
-                this.reloadInterval = null;
-                this.messagingService.send('reloadProcess');
-                if (this.reloadCallback != null) {
-                    await this.reloadCallback();
-                }
-            }
-        }, 10000);
+  async startProcessReload(): Promise<void> {
+    if (
+      (await this.stateService.getDecryptedPinProtected()) != null ||
+      (await this.stateService.getBiometricLocked()) ||
+      this.reloadInterval != null
+    ) {
+      return;
     }
-
-    cancelProcessReload(): void {
-        if (this.reloadInterval != null) {
-            clearInterval(this.reloadInterval);
-            this.reloadInterval = null;
+    this.cancelProcessReload();
+    this.reloadInterval = setInterval(async () => {
+      let doRefresh = false;
+      const lastActive = await this.stateService.getLastActive();
+      if (lastActive != null) {
+        const diffSeconds = new Date().getTime() - lastActive;
+        // Don't refresh if they are still active in the window
+        doRefresh = diffSeconds >= 5000;
+      }
+      const biometricLockedFingerprintValidated =
+        (await this.stateService.getBiometricFingerprintValidated()) &&
+        (await this.stateService.getBiometricLocked());
+      if (doRefresh && !biometricLockedFingerprintValidated) {
+        clearInterval(this.reloadInterval);
+        this.reloadInterval = null;
+        this.messagingService.send("reloadProcess");
+        if (this.reloadCallback != null) {
+          await this.reloadCallback();
         }
-    }
+      }
+    }, 10000);
+  }
 
-    clearClipboard(clipboardValue: string, timeoutMs: number = null): void {
-        if (this.clearClipboardTimeout != null) {
-            clearTimeout(this.clearClipboardTimeout);
-            this.clearClipboardTimeout = null;
-        }
-        if (Utils.isNullOrWhitespace(clipboardValue)) {
-            return;
-        }
-        this.storageService.get<number>(ConstantsService.clearClipboardKey).then(clearSeconds => {
-            if (clearSeconds == null) {
-                return;
-            }
-            if (timeoutMs == null) {
-                timeoutMs = clearSeconds * 1000;
-            }
-            this.clearClipboardTimeoutFunction = async () => {
-                const clipboardValueNow = await this.platformUtilsService.readFromClipboard();
-                if (clipboardValue === clipboardValueNow) {
-                    this.platformUtilsService.copyToClipboard('', { clearing: true });
-                }
-            };
-            this.clearClipboardTimeout = setTimeout(async () => {
-                await this.clearPendingClipboard();
-            }, timeoutMs);
-        });
+  cancelProcessReload(): void {
+    if (this.reloadInterval != null) {
+      clearInterval(this.reloadInterval);
+      this.reloadInterval = null;
     }
+  }
 
-    async clearPendingClipboard() {
-        if (this.clearClipboardTimeoutFunction != null) {
-            await this.clearClipboardTimeoutFunction();
-            this.clearClipboardTimeoutFunction = null;
+  async clearClipboard(clipboardValue: string, timeoutMs: number = null): Promise<void> {
+    if (this.clearClipboardTimeout != null) {
+      clearTimeout(this.clearClipboardTimeout);
+      this.clearClipboardTimeout = null;
+    }
+    if (Utils.isNullOrWhitespace(clipboardValue)) {
+      return;
+    }
+    await this.stateService.getClearClipboard().then((clearSeconds) => {
+      if (clearSeconds == null) {
+        return;
+      }
+      if (timeoutMs == null) {
+        timeoutMs = clearSeconds * 1000;
+      }
+      this.clearClipboardTimeoutFunction = async () => {
+        const clipboardValueNow = await this.platformUtilsService.readFromClipboard();
+        if (clipboardValue === clipboardValueNow) {
+          this.platformUtilsService.copyToClipboard("", { clearing: true });
         }
+      };
+      this.clearClipboardTimeout = setTimeout(async () => {
+        await this.clearPendingClipboard();
+      }, timeoutMs);
+    });
+  }
+
+  async clearPendingClipboard() {
+    if (this.clearClipboardTimeoutFunction != null) {
+      await this.clearClipboardTimeoutFunction();
+      this.clearClipboardTimeoutFunction = null;
     }
+  }
 }
diff --git a/jslib/common/src/services/token.service.ts b/jslib/common/src/services/token.service.ts
index 58f42e7d..bad5ce62 100644
--- a/jslib/common/src/services/token.service.ts
+++ b/jslib/common/src/services/token.service.ts
@@ -1,269 +1,221 @@
-import { ConstantsService } from './constants.service';
+import { StateService } from "../abstractions/state.service";
+import { TokenService as TokenServiceAbstraction } from "../abstractions/token.service";
 
-import { StorageService } from '../abstractions/storage.service';
-import { TokenService as TokenServiceAbstraction } from '../abstractions/token.service';
-
-import { Utils } from '../misc/utils';
-
-const Keys = {
-    accessToken: 'accessToken',
-    refreshToken: 'refreshToken',
-    twoFactorTokenPrefix: 'twoFactorToken_',
-    clientId: 'apikey_clientId',
-    clientSecret: 'apikey_clientSecret',
-};
+import { Utils } from "../misc/utils";
 
 export class TokenService implements TokenServiceAbstraction {
-    token: string;
-    decodedToken: any;
-    refreshToken: string;
-    clientId: string;
-    clientSecret: string;
-
-    constructor(private storageService: StorageService) {
+  constructor(private stateService: StateService) {}
+
+  async setTokens(
+    accessToken: string,
+    refreshToken: string,
+    clientIdClientSecret: [string, string]
+  ): Promise<any> {
+    await this.setToken(accessToken);
+    await this.setRefreshToken(refreshToken);
+    if (clientIdClientSecret != null) {
+      await this.setClientId(clientIdClientSecret[0]);
+      await this.setClientSecret(clientIdClientSecret[1]);
     }
+  }
 
-    async setTokens(accessToken: string, refreshToken: string, clientIdClientSecret: [string, string]): Promise<any> {
-        await this.setToken(accessToken);
-        await this.setRefreshToken(refreshToken);
-        if (clientIdClientSecret != null) {
-            await this.setClientId(clientIdClientSecret[0]);
-            await this.setClientSecret(clientIdClientSecret[1]);
-        }
+  async setClientId(clientId: string): Promise<any> {
+    if ((await this.skipTokenStorage()) || clientId == null) {
+      return;
     }
+    return await this.stateService.setApiKeyClientId(clientId);
+  }
 
-    async setClientId(clientId: string): Promise<any> {
-        this.clientId = clientId;
-        return this.storeTokenValue(Keys.clientId, clientId);
-    }
-
-    async getClientId(): Promise<string> {
-        if (this.clientId != null) {
-            return this.clientId;
-        }
+  async getClientId(): Promise<string> {
+    return await this.stateService.getApiKeyClientId();
+  }
 
-        this.clientId = await this.storageService.get<string>(Keys.clientId);
-        return this.clientId;
+  async setClientSecret(clientSecret: string): Promise<any> {
+    if ((await this.skipTokenStorage()) || clientSecret == null) {
+      return;
     }
+    return await this.stateService.setApiKeyClientSecret(clientSecret);
+  }
 
-    async setClientSecret(clientSecret: string): Promise<any> {
-        this.clientSecret = clientSecret;
-        return this.storeTokenValue(Keys.clientSecret, clientSecret);
-    }
+  async getClientSecret(): Promise<string> {
+    return await this.stateService.getApiKeyClientSecret();
+  }
 
-    async getClientSecret(): Promise<string> {
-        if (this.clientSecret != null) {
-            return this.clientSecret;
-        }
+  async setToken(token: string): Promise<void> {
+    await this.stateService.setAccessToken(token);
+  }
 
-        this.clientSecret = await this.storageService.get<string>(Keys.clientSecret);
-        return this.clientSecret;
-    }
+  async getToken(): Promise<string> {
+    return await this.stateService.getAccessToken();
+  }
 
-    async setToken(token: string): Promise<any> {
-        this.token = token;
-        this.decodedToken = null;
-        return this.storeTokenValue(Keys.accessToken, token);
+  async setRefreshToken(refreshToken: string): Promise<any> {
+    if (await this.skipTokenStorage()) {
+      return;
     }
+    return await this.stateService.setRefreshToken(refreshToken);
+  }
 
-    async getToken(): Promise<string> {
-        if (this.token != null) {
-            return this.token;
-        }
+  async getRefreshToken(): Promise<string> {
+    return await this.stateService.getRefreshToken();
+  }
 
-        this.token = await this.storageService.get<string>(Keys.accessToken);
-        return this.token;
-    }
+  async toggleTokens(): Promise<any> {
+    const token = await this.getToken();
+    const refreshToken = await this.getRefreshToken();
+    const clientId = await this.getClientId();
+    const clientSecret = await this.getClientSecret();
+    const timeout = await this.stateService.getVaultTimeout();
+    const action = await this.stateService.getVaultTimeoutAction();
 
-    async setRefreshToken(refreshToken: string): Promise<any> {
-        this.refreshToken = refreshToken;
-        return this.storeTokenValue(Keys.refreshToken, refreshToken);
+    if ((timeout != null || timeout === 0) && action === "logOut") {
+      // if we have a vault timeout and the action is log out, reset tokens
+      await this.clearToken();
     }
 
-    async getRefreshToken(): Promise<string> {
-        if (this.refreshToken != null) {
-            return this.refreshToken;
-        }
+    await this.setToken(token);
+    await this.setRefreshToken(refreshToken);
+    await this.setClientId(clientId);
+    await this.setClientSecret(clientSecret);
+  }
 
-        this.refreshToken = await this.storageService.get<string>(Keys.refreshToken);
-        return this.refreshToken;
-    }
+  async setTwoFactorToken(token: string): Promise<any> {
+    return await this.stateService.setTwoFactorToken(token);
+  }
 
-    async toggleTokens(): Promise<any> {
-        const token = await this.getToken();
-        const refreshToken = await this.getRefreshToken();
-        const clientId = await this.getClientId();
-        const clientSecret = await this.getClientSecret();
-        const timeout = await this.storageService.get(ConstantsService.vaultTimeoutKey);
-        const action = await this.storageService.get(ConstantsService.vaultTimeoutActionKey);
-        if ((timeout != null || timeout === 0) && action === 'logOut') {
-            // if we have a vault timeout and the action is log out, reset tokens
-            await this.clearToken();
-            this.token = token;
-            this.refreshToken = refreshToken;
-            this.clientId = clientId;
-            this.clientSecret = clientSecret;
-            return;
-        }
-
-        await this.setToken(token);
-        await this.setRefreshToken(refreshToken);
-        await this.setClientId(clientId);
-        await this.setClientSecret(clientSecret);
-    }
+  async getTwoFactorToken(): Promise<string> {
+    return await this.stateService.getTwoFactorToken();
+  }
 
-    setTwoFactorToken(token: string, email: string): Promise<any> {
-        return this.storageService.save(Keys.twoFactorTokenPrefix + email, token);
-    }
+  async clearTwoFactorToken(): Promise<any> {
+    return await this.stateService.setTwoFactorToken(null);
+  }
 
-    getTwoFactorToken(email: string): Promise<string> {
-        return this.storageService.get<string>(Keys.twoFactorTokenPrefix + email);
-    }
+  async clearToken(userId?: string): Promise<any> {
+    await this.stateService.setAccessToken(null, { userId: userId });
+    await this.stateService.setRefreshToken(null, { userId: userId });
+    await this.stateService.setApiKeyClientId(null, { userId: userId });
+    await this.stateService.setApiKeyClientSecret(null, { userId: userId });
+  }
 
-    clearTwoFactorToken(email: string): Promise<any> {
-        return this.storageService.remove(Keys.twoFactorTokenPrefix + email);
-    }
+  // jwthelper methods
+  // ref https://github.com/auth0/angular-jwt/blob/master/src/angularJwt/services/jwt.js
 
-    async clearToken(): Promise<any> {
-        this.token = null;
-        this.decodedToken = null;
-        this.refreshToken = null;
-        this.clientId = null;
-        this.clientSecret = null;
-
-        await this.storageService.remove(Keys.accessToken);
-        await this.storageService.remove(Keys.refreshToken);
-        await this.storageService.remove(Keys.clientId);
-        await this.storageService.remove(Keys.clientSecret);
+  async decodeToken(token?: string): Promise<any> {
+    const storedToken = await this.stateService.getDecodedToken();
+    if (token === null && storedToken != null) {
+      return storedToken;
     }
 
-    // jwthelper methods
-    // ref https://github.com/auth0/angular-jwt/blob/master/src/angularJwt/services/jwt.js
-
-    decodeToken(): any {
-        if (this.decodedToken) {
-            return this.decodedToken;
-        }
+    token = token ?? (await this.stateService.getAccessToken());
 
-        if (this.token == null) {
-            throw new Error('Token not found.');
-        }
-
-        const parts = this.token.split('.');
-        if (parts.length !== 3) {
-            throw new Error('JWT must have 3 parts');
-        }
+    if (token == null) {
+      throw new Error("Token not found.");
+    }
 
-        const decoded = Utils.fromUrlB64ToUtf8(parts[1]);
-        if (decoded == null) {
-            throw new Error('Cannot decode the token');
-        }
+    const parts = token.split(".");
+    if (parts.length !== 3) {
+      throw new Error("JWT must have 3 parts");
+    }
 
-        this.decodedToken = JSON.parse(decoded);
-        return this.decodedToken;
+    const decoded = Utils.fromUrlB64ToUtf8(parts[1]);
+    if (decoded == null) {
+      throw new Error("Cannot decode the token");
     }
 
-    getTokenExpirationDate(): Date {
-        const decoded = this.decodeToken();
-        if (typeof decoded.exp === 'undefined') {
-            return null;
-        }
+    const decodedToken = JSON.parse(decoded);
+    return decodedToken;
+  }
 
-        const d = new Date(0); // The 0 here is the key, which sets the date to the epoch
-        d.setUTCSeconds(decoded.exp);
-        return d;
+  async getTokenExpirationDate(): Promise<Date> {
+    const decoded = await this.decodeToken();
+    if (typeof decoded.exp === "undefined") {
+      return null;
     }
 
-    tokenSecondsRemaining(offsetSeconds: number = 0): number {
-        const d = this.getTokenExpirationDate();
-        if (d == null) {
-            return 0;
-        }
+    const d = new Date(0); // The 0 here is the key, which sets the date to the epoch
+    d.setUTCSeconds(decoded.exp);
+    return d;
+  }
 
-        const msRemaining = d.valueOf() - (new Date().valueOf() + (offsetSeconds * 1000));
-        return Math.round(msRemaining / 1000);
+  async tokenSecondsRemaining(offsetSeconds: number = 0): Promise<number> {
+    const d = await this.getTokenExpirationDate();
+    if (d == null) {
+      return 0;
     }
 
-    tokenNeedsRefresh(minutes: number = 5): boolean {
-        const sRemaining = this.tokenSecondsRemaining();
-        return sRemaining < (60 * minutes);
-    }
+    const msRemaining = d.valueOf() - (new Date().valueOf() + offsetSeconds * 1000);
+    return Math.round(msRemaining / 1000);
+  }
 
-    getUserId(): string {
-        const decoded = this.decodeToken();
-        if (typeof decoded.sub === 'undefined') {
-            throw new Error('No user id found');
-        }
+  async tokenNeedsRefresh(minutes: number = 5): Promise<boolean> {
+    const sRemaining = await this.tokenSecondsRemaining();
+    return sRemaining < 60 * minutes;
+  }
 
-        return decoded.sub as string;
+  async getUserId(): Promise<string> {
+    const decoded = await this.decodeToken();
+    if (typeof decoded.sub === "undefined") {
+      throw new Error("No user id found");
     }
 
-    getEmail(): string {
-        const decoded = this.decodeToken();
-        if (typeof decoded.email === 'undefined') {
-            throw new Error('No email found');
-        }
+    return decoded.sub as string;
+  }
 
-        return decoded.email as string;
+  async getEmail(): Promise<string> {
+    const decoded = await this.decodeToken();
+    if (typeof decoded.email === "undefined") {
+      throw new Error("No email found");
     }
 
-    getEmailVerified(): boolean {
-        const decoded = this.decodeToken();
-        if (typeof decoded.email_verified === 'undefined') {
-            throw new Error('No email verification found');
-        }
+    return decoded.email as string;
+  }
 
-        return decoded.email_verified as boolean;
+  async getEmailVerified(): Promise<boolean> {
+    const decoded = await this.decodeToken();
+    if (typeof decoded.email_verified === "undefined") {
+      throw new Error("No email verification found");
     }
 
-    getName(): string {
-        const decoded = this.decodeToken();
-        if (typeof decoded.name === 'undefined') {
-            return null;
-        }
+    return decoded.email_verified as boolean;
+  }
 
-        return decoded.name as string;
+  async getName(): Promise<string> {
+    const decoded = await this.decodeToken();
+    if (typeof decoded.name === "undefined") {
+      return null;
     }
 
-    getPremium(): boolean {
-        const decoded = this.decodeToken();
-        if (typeof decoded.premium === 'undefined') {
-            return false;
-        }
+    return decoded.name as string;
+  }
 
-        return decoded.premium as boolean;
+  async getPremium(): Promise<boolean> {
+    const decoded = await this.decodeToken();
+    if (typeof decoded.premium === "undefined") {
+      return false;
     }
 
-    getIssuer(): string {
-        const decoded = this.decodeToken();
-        if (typeof decoded.iss === 'undefined') {
-            throw new Error('No issuer found');
-        }
+    return decoded.premium as boolean;
+  }
 
-        return decoded.iss as string;
+  async getIssuer(): Promise<string> {
+    const decoded = await this.decodeToken();
+    if (typeof decoded.iss === "undefined") {
+      throw new Error("No issuer found");
     }
 
-    getIsExternal(): boolean {
-        const decoded = this.decodeToken();
-        if (!Array.isArray(decoded.amr)) {
-            throw new Error('No amr found');
-        }
+    return decoded.iss as string;
+  }
 
-        return decoded.amr.includes('external');
-    }
+  async getIsExternal(): Promise<boolean> {
+    const decoded = await this.decodeToken();
 
-    private async storeTokenValue(key: string, value: string) {
-        if (await this.skipTokenStorage()) {
-            // if we have a vault timeout and the action is log out, don't store token
-            return;
-        }
+    return Array.isArray(decoded.amr) && decoded.amr.includes("external");
+  }
 
-        return this.storageService.save(key, value);
-    }
-
-    private async skipTokenStorage(): Promise<boolean> {
-        const timeout = await this.storageService.get<number>(ConstantsService.vaultTimeoutKey);
-        const action = await this.storageService.get<string>(ConstantsService.vaultTimeoutActionKey);
-        return timeout != null && action === 'logOut';
-    }
+  private async skipTokenStorage(): Promise<boolean> {
+    const timeout = await this.stateService.getVaultTimeout();
+    const action = await this.stateService.getVaultTimeoutAction();
+    return timeout != null && action === "logOut";
+  }
 }
diff --git a/jslib/common/src/services/totp.service.ts b/jslib/common/src/services/totp.service.ts
index 50c8c4eb..e3d653c0 100644
--- a/jslib/common/src/services/totp.service.ts
+++ b/jslib/common/src/services/totp.service.ts
@@ -1,170 +1,178 @@
-import { ConstantsService } from './constants.service';
+import { CryptoFunctionService } from "../abstractions/cryptoFunction.service";
+import { LogService } from "../abstractions/log.service";
+import { StateService } from "../abstractions/state.service";
+import { TotpService as TotpServiceAbstraction } from "../abstractions/totp.service";
 
-import { CryptoFunctionService } from '../abstractions/cryptoFunction.service';
-import { LogService } from '../abstractions/log.service';
-import { StorageService } from '../abstractions/storage.service';
-import { TotpService as TotpServiceAbstraction } from '../abstractions/totp.service';
+import { Utils } from "../misc/utils";
 
-import { Utils } from '../misc/utils';
-
-const B32Chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ234567';
-const SteamChars = '23456789BCDFGHJKMNPQRTVWXY';
+const B32Chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ234567";
+const SteamChars = "23456789BCDFGHJKMNPQRTVWXY";
 
 export class TotpService implements TotpServiceAbstraction {
-    constructor(private storageService: StorageService, private cryptoFunctionService: CryptoFunctionService,
-    private logService: LogService) { }
-
-    async getCode(key: string): Promise<string> {
-        if (key == null) {
-            return null;
-        }
-        let period = 30;
-        let alg: 'sha1' | 'sha256' | 'sha512' = 'sha1';
-        let digits = 6;
-        let keyB32 = key;
-        const isOtpAuth = key.toLowerCase().indexOf('otpauth://') === 0;
-        const isSteamAuth = !isOtpAuth && key.toLowerCase().indexOf('steam://') === 0;
-        if (isOtpAuth) {
-            const params = Utils.getQueryParams(key);
-            if (params.has('digits') && params.get('digits') != null) {
-                try {
-                    const digitParams = parseInt(params.get('digits').trim(), null);
-                    if (digitParams > 10) {
-                        digits = 10;
-                    } else if (digitParams > 0) {
-                        digits = digitParams;
-                    }
-                } catch {
-                    this.logService.error('Invalid digits param.');
-                }
-            }
-            if (params.has('period') && params.get('period') != null) {
-                try {
-                    const periodParam = parseInt(params.get('period').trim(), null);
-                    if (periodParam > 0) {
-                        period = periodParam;
-                    }
-                } catch {
-                    this.logService.error('Invalid period param.');
-                }
-            }
-            if (params.has('secret') && params.get('secret') != null) {
-                keyB32 = params.get('secret');
-            }
-            if (params.has('algorithm') && params.get('algorithm') != null) {
-                const algParam = params.get('algorithm').toLowerCase();
-                if (algParam === 'sha1' || algParam === 'sha256' || algParam === 'sha512') {
-                    alg = algParam;
-                }
-            }
-        } else if (isSteamAuth) {
-            keyB32 = key.substr('steam://'.length);
-            digits = 5;
+  constructor(
+    private cryptoFunctionService: CryptoFunctionService,
+    private logService: LogService,
+    private stateService: StateService
+  ) {}
+
+  async getCode(key: string): Promise<string> {
+    if (key == null) {
+      return null;
+    }
+    let period = 30;
+    let alg: "sha1" | "sha256" | "sha512" = "sha1";
+    let digits = 6;
+    let keyB32 = key;
+    const isOtpAuth = key.toLowerCase().indexOf("otpauth://") === 0;
+    const isSteamAuth = !isOtpAuth && key.toLowerCase().indexOf("steam://") === 0;
+    if (isOtpAuth) {
+      const params = Utils.getQueryParams(key);
+      if (params.has("digits") && params.get("digits") != null) {
+        try {
+          const digitParams = parseInt(params.get("digits").trim(), null);
+          if (digitParams > 10) {
+            digits = 10;
+          } else if (digitParams > 0) {
+            digits = digitParams;
+          }
+        } catch {
+          this.logService.error("Invalid digits param.");
         }
-
-        const epoch = Math.round(new Date().getTime() / 1000.0);
-        const timeHex = this.leftPad(this.decToHex(Math.floor(epoch / period)), 16, '0');
-        const timeBytes = Utils.fromHexToArray(timeHex);
-        const keyBytes = this.b32ToBytes(keyB32);
-
-        if (!keyBytes.length || !timeBytes.length) {
-            return null;
+      }
+      if (params.has("period") && params.get("period") != null) {
+        try {
+          const periodParam = parseInt(params.get("period").trim(), null);
+          if (periodParam > 0) {
+            period = periodParam;
+          }
+        } catch {
+          this.logService.error("Invalid period param.");
         }
-
-        const hash = await this.sign(keyBytes, timeBytes, alg);
-        if (hash.length === 0) {
-            return null;
+      }
+      if (params.has("secret") && params.get("secret") != null) {
+        keyB32 = params.get("secret");
+      }
+      if (params.has("algorithm") && params.get("algorithm") != null) {
+        const algParam = params.get("algorithm").toLowerCase();
+        if (algParam === "sha1" || algParam === "sha256" || algParam === "sha512") {
+          alg = algParam;
         }
+      }
+    } else if (isSteamAuth) {
+      keyB32 = key.substr("steam://".length);
+      digits = 5;
+    }
 
-        /* tslint:disable */
-        const offset = (hash[hash.length - 1] & 0xf);
-        const binary = ((hash[offset] & 0x7f) << 24) | ((hash[offset + 1] & 0xff) << 16) |
-            ((hash[offset + 2] & 0xff) << 8) | (hash[offset + 3] & 0xff);
-        /* tslint:enable */
-
-        let otp = '';
-        if (isSteamAuth) {
-            // tslint:disable-next-line
-            let fullCode = binary & 0x7fffffff;
-            for (let i = 0; i < digits; i++) {
-                otp += SteamChars[fullCode % SteamChars.length];
-                fullCode = Math.trunc(fullCode / SteamChars.length);
-            }
-        } else {
-            otp = (binary % Math.pow(10, digits)).toString();
-            otp = this.leftPad(otp, digits, '0');
-        }
+    const epoch = Math.round(new Date().getTime() / 1000.0);
+    const timeHex = this.leftPad(this.decToHex(Math.floor(epoch / period)), 16, "0");
+    const timeBytes = Utils.fromHexToArray(timeHex);
+    const keyBytes = this.b32ToBytes(keyB32);
 
-        return otp;
+    if (!keyBytes.length || !timeBytes.length) {
+      return null;
     }
 
-    getTimeInterval(key: string): number {
-        let period = 30;
-        if (key != null && key.toLowerCase().indexOf('otpauth://') === 0) {
-            const params = Utils.getQueryParams(key);
-            if (params.has('period') && params.get('period') != null) {
-                try {
-                    period = parseInt(params.get('period').trim(), null);
-                } catch {
-                    this.logService.error('Invalid period param.');
-                }
-            }
-        }
-        return period;
+    const hash = await this.sign(keyBytes, timeBytes, alg);
+    if (hash.length === 0) {
+      return null;
     }
 
-    async isAutoCopyEnabled(): Promise<boolean> {
-        return !(await this.storageService.get<boolean>(ConstantsService.disableAutoTotpCopyKey));
+    /* tslint:disable */
+    const offset = hash[hash.length - 1] & 0xf;
+    const binary =
+      ((hash[offset] & 0x7f) << 24) |
+      ((hash[offset + 1] & 0xff) << 16) |
+      ((hash[offset + 2] & 0xff) << 8) |
+      (hash[offset + 3] & 0xff);
+    /* tslint:enable */
+
+    let otp = "";
+    if (isSteamAuth) {
+      // tslint:disable-next-line
+      let fullCode = binary & 0x7fffffff;
+      for (let i = 0; i < digits; i++) {
+        otp += SteamChars[fullCode % SteamChars.length];
+        fullCode = Math.trunc(fullCode / SteamChars.length);
+      }
+    } else {
+      otp = (binary % Math.pow(10, digits)).toString();
+      otp = this.leftPad(otp, digits, "0");
     }
 
-    // Helpers
-
-    private leftPad(s: string, l: number, p: string): string {
-        if (l + 1 >= s.length) {
-            s = Array(l + 1 - s.length).join(p) + s;
+    return otp;
+  }
+
+  getTimeInterval(key: string): number {
+    let period = 30;
+    if (key != null && key.toLowerCase().indexOf("otpauth://") === 0) {
+      const params = Utils.getQueryParams(key);
+      if (params.has("period") && params.get("period") != null) {
+        try {
+          period = parseInt(params.get("period").trim(), null);
+        } catch {
+          this.logService.error("Invalid period param.");
         }
-        return s;
+      }
     }
+    return period;
+  }
+
+  async isAutoCopyEnabled(): Promise<boolean> {
+    return !(await this.stateService.getDisableAutoTotpCopy());
+  }
+
+  // Helpers
 
-    private decToHex(d: number): string {
-        return (d < 15.5 ? '0' : '') + Math.round(d).toString(16);
+  private leftPad(s: string, l: number, p: string): string {
+    if (l + 1 >= s.length) {
+      s = Array(l + 1 - s.length).join(p) + s;
     }
+    return s;
+  }
 
-    private b32ToHex(s: string): string {
-        s = s.toUpperCase();
-        let cleanedInput = '';
+  private decToHex(d: number): string {
+    return (d < 15.5 ? "0" : "") + Math.round(d).toString(16);
+  }
 
-        for (let i = 0; i < s.length; i++) {
-            if (B32Chars.indexOf(s[i]) < 0) {
-                continue;
-            }
+  private b32ToHex(s: string): string {
+    s = s.toUpperCase();
+    let cleanedInput = "";
 
-            cleanedInput += s[i];
-        }
-        s = cleanedInput;
-
-        let bits = '';
-        let hex = '';
-        for (let i = 0; i < s.length; i++) {
-            const byteIndex = B32Chars.indexOf(s.charAt(i));
-            if (byteIndex < 0) {
-                continue;
-            }
-            bits += this.leftPad(byteIndex.toString(2), 5, '0');
-        }
-        for (let i = 0; i + 4 <= bits.length; i += 4) {
-            const chunk = bits.substr(i, 4);
-            hex = hex + parseInt(chunk, 2).toString(16);
-        }
-        return hex;
-    }
+    for (let i = 0; i < s.length; i++) {
+      if (B32Chars.indexOf(s[i]) < 0) {
+        continue;
+      }
 
-    private b32ToBytes(s: string): Uint8Array {
-        return Utils.fromHexToArray(this.b32ToHex(s));
+      cleanedInput += s[i];
     }
-
-    private async sign(keyBytes: Uint8Array, timeBytes: Uint8Array, alg: 'sha1' | 'sha256' | 'sha512') {
-        const signature = await this.cryptoFunctionService.hmac(timeBytes.buffer, keyBytes.buffer, alg);
-        return new Uint8Array(signature);
+    s = cleanedInput;
+
+    let bits = "";
+    let hex = "";
+    for (let i = 0; i < s.length; i++) {
+      const byteIndex = B32Chars.indexOf(s.charAt(i));
+      if (byteIndex < 0) {
+        continue;
+      }
+      bits += this.leftPad(byteIndex.toString(2), 5, "0");
+    }
+    for (let i = 0; i + 4 <= bits.length; i += 4) {
+      const chunk = bits.substr(i, 4);
+      hex = hex + parseInt(chunk, 2).toString(16);
     }
+    return hex;
+  }
+
+  private b32ToBytes(s: string): Uint8Array {
+    return Utils.fromHexToArray(this.b32ToHex(s));
+  }
+
+  private async sign(
+    keyBytes: Uint8Array,
+    timeBytes: Uint8Array,
+    alg: "sha1" | "sha256" | "sha512"
+  ) {
+    const signature = await this.cryptoFunctionService.hmac(timeBytes.buffer, keyBytes.buffer, alg);
+    return new Uint8Array(signature);
+  }
 }
diff --git a/jslib/common/src/services/user.service.ts b/jslib/common/src/services/user.service.ts
deleted file mode 100644
index a572691a..00000000
--- a/jslib/common/src/services/user.service.ts
+++ /dev/null
@@ -1,238 +0,0 @@
-import { StorageService } from '../abstractions/storage.service';
-import { TokenService } from '../abstractions/token.service';
-import { UserService as UserServiceAbstraction } from '../abstractions/user.service';
-
-import { OrganizationData } from '../models/data/organizationData';
-import { Organization } from '../models/domain/organization';
-
-import { KdfType } from '../enums/kdfType';
-
-import { ProviderData } from '../models/data/providerData';
-import { Provider } from '../models/domain/provider';
-
-const Keys = {
-    userId: 'userId',
-    userEmail: 'userEmail',
-    stamp: 'securityStamp',
-    kdf: 'kdf',
-    kdfIterations: 'kdfIterations',
-    organizationsPrefix: 'organizations_',
-    providersPrefix: 'providers_',
-    emailVerified: 'emailVerified',
-    forcePasswordReset: 'forcePasswordReset',
-};
-
-export class UserService implements UserServiceAbstraction {
-    private userId: string;
-    private email: string;
-    private stamp: string;
-    private kdf: KdfType;
-    private kdfIterations: number;
-    private emailVerified: boolean;
-    private forcePasswordReset: boolean;
-
-    constructor(private tokenService: TokenService, private storageService: StorageService) { }
-
-    async setInformation(userId: string, email: string, kdf: KdfType, kdfIterations: number): Promise<any> {
-        this.email = email;
-        this.userId = userId;
-        this.kdf = kdf;
-        this.kdfIterations = kdfIterations;
-
-        await this.storageService.save(Keys.userEmail, email);
-        await this.storageService.save(Keys.userId, userId);
-        await this.storageService.save(Keys.kdf, kdf);
-        await this.storageService.save(Keys.kdfIterations, kdfIterations);
-    }
-
-    setSecurityStamp(stamp: string): Promise<any> {
-        this.stamp = stamp;
-        return this.storageService.save(Keys.stamp, stamp);
-    }
-
-    setEmailVerified(emailVerified: boolean) {
-        this.emailVerified = emailVerified;
-        return this.storageService.save(Keys.emailVerified, emailVerified);
-    }
-
-    setForcePasswordReset(forcePasswordReset: boolean) {
-        this.forcePasswordReset = forcePasswordReset;
-        return this.storageService.save(Keys.forcePasswordReset, forcePasswordReset);
-    }
-
-    async getUserId(): Promise<string> {
-        if (this.userId == null) {
-            this.userId = await this.storageService.get<string>(Keys.userId);
-        }
-        return this.userId;
-    }
-
-    async getEmail(): Promise<string> {
-        if (this.email == null) {
-            this.email = await this.storageService.get<string>(Keys.userEmail);
-        }
-        return this.email;
-    }
-
-    async getSecurityStamp(): Promise<string> {
-        if (this.stamp == null) {
-            this.stamp = await this.storageService.get<string>(Keys.stamp);
-        }
-        return this.stamp;
-    }
-
-    async getKdf(): Promise<KdfType> {
-        if (this.kdf == null) {
-            this.kdf = await this.storageService.get<KdfType>(Keys.kdf);
-        }
-        return this.kdf;
-    }
-
-    async getKdfIterations(): Promise<number> {
-        if (this.kdfIterations == null) {
-            this.kdfIterations = await this.storageService.get<number>(Keys.kdfIterations);
-        }
-        return this.kdfIterations;
-    }
-
-    async getEmailVerified(): Promise<boolean> {
-        if (this.emailVerified == null) {
-            this.emailVerified = await this.storageService.get<boolean>(Keys.emailVerified);
-        }
-        return this.emailVerified;
-    }
-
-    async getForcePasswordReset(): Promise<boolean> {
-        if (this.forcePasswordReset == null) {
-            this.forcePasswordReset = await this.storageService.get<boolean>(Keys.forcePasswordReset);
-        }
-        return this.forcePasswordReset;
-    }
-
-    async clear(): Promise<any> {
-        const userId = await this.getUserId();
-
-        await this.storageService.remove(Keys.userId);
-        await this.storageService.remove(Keys.userEmail);
-        await this.storageService.remove(Keys.stamp);
-        await this.storageService.remove(Keys.kdf);
-        await this.storageService.remove(Keys.kdfIterations);
-        await this.storageService.remove(Keys.forcePasswordReset);
-        await this.clearOrganizations(userId);
-        await this.clearProviders(userId);
-
-        this.userId = this.email = this.stamp = null;
-        this.kdf = null;
-        this.kdfIterations = null;
-    }
-
-    async isAuthenticated(): Promise<boolean> {
-        const token = await this.tokenService.getToken();
-        if (token == null) {
-            return false;
-        }
-
-        const userId = await this.getUserId();
-        return userId != null;
-    }
-
-    async canAccessPremium(): Promise<boolean> {
-        const authed = await this.isAuthenticated();
-        if (!authed) {
-            return false;
-        }
-
-        const tokenPremium = this.tokenService.getPremium();
-        if (tokenPremium) {
-            return true;
-        }
-
-        const orgs = await this.getAllOrganizations();
-        for (let i = 0; i < orgs.length; i++) {
-            if (orgs[i].usersGetPremium && orgs[i].enabled) {
-                return true;
-            }
-        }
-        return false;
-    }
-
-    async canManageSponsorships(): Promise<boolean> {
-        const orgs = await this.getAllOrganizations();
-        return orgs.some(o => o.familySponsorshipAvailable || o.familySponsorshipFriendlyName !== null);
-    }
-
-    async getOrganization(id: string): Promise<Organization> {
-        const userId = await this.getUserId();
-        const organizations = await this.storageService.get<{ [id: string]: OrganizationData; }>(
-            Keys.organizationsPrefix + userId);
-        if (organizations == null || !organizations.hasOwnProperty(id)) {
-            return null;
-        }
-
-        return new Organization(organizations[id]);
-    }
-
-    async getOrganizationByIdentifier(identifier: string): Promise<Organization> {
-        const organizations = await this.getAllOrganizations();
-        if (organizations == null || organizations.length === 0) {
-            return null;
-        }
-
-        return organizations.find(o => o.identifier === identifier);
-    }
-
-    async getAllOrganizations(): Promise<Organization[]> {
-        const userId = await this.getUserId();
-        const organizations = await this.storageService.get<{ [id: string]: OrganizationData; }>(
-            Keys.organizationsPrefix + userId);
-        const response: Organization[] = [];
-        for (const id in organizations) {
-            if (organizations.hasOwnProperty(id) && !organizations[id].isProviderUser) {
-                response.push(new Organization(organizations[id]));
-            }
-        }
-        return response;
-    }
-
-    async replaceOrganizations(organizations: { [id: string]: OrganizationData; }): Promise<any> {
-        const userId = await this.getUserId();
-        await this.storageService.save(Keys.organizationsPrefix + userId, organizations);
-    }
-
-    async clearOrganizations(userId: string): Promise<any> {
-        await this.storageService.remove(Keys.organizationsPrefix + userId);
-    }
-
-    async getProvider(id: string): Promise<Provider> {
-        const userId = await this.getUserId();
-        const providers = await this.storageService.get<{ [id: string]: ProviderData; }>(
-            Keys.providersPrefix + userId);
-        if (providers == null || !providers.hasOwnProperty(id)) {
-            return null;
-        }
-
-        return new Provider(providers[id]);
-    }
-
-    async getAllProviders(): Promise<Provider[]> {
-        const userId = await this.getUserId();
-        const providers = await this.storageService.get<{ [id: string]: ProviderData; }>(
-            Keys.providersPrefix + userId);
-        const response: Provider[] = [];
-        for (const id in providers) {
-            if (providers.hasOwnProperty(id)) {
-                response.push(new Provider(providers[id]));
-            }
-        }
-        return response;
-    }
-
-    async replaceProviders(providers: { [id: string]: ProviderData; }): Promise<any> {
-        const userId = await this.getUserId();
-        await this.storageService.save(Keys.providersPrefix + userId, providers);
-    }
-
-    async clearProviders(userId: string): Promise<any> {
-        await this.storageService.remove(Keys.providersPrefix + userId);
-    }
-}
diff --git a/jslib/common/src/services/userVerification.service.ts b/jslib/common/src/services/userVerification.service.ts
index 2b94ffae..f5189a4d 100644
--- a/jslib/common/src/services/userVerification.service.ts
+++ b/jslib/common/src/services/userVerification.service.ts
@@ -1,69 +1,77 @@
-import { UserVerificationService as UserVerificationServiceAbstraction } from '../abstractions/userVerification.service';
+import { UserVerificationService as UserVerificationServiceAbstraction } from "../abstractions/userVerification.service";
 
-import { ApiService } from '../abstractions/api.service';
-import { CryptoService } from '../abstractions/crypto.service';
-import { I18nService } from '../abstractions/i18n.service';
+import { ApiService } from "../abstractions/api.service";
+import { CryptoService } from "../abstractions/crypto.service";
+import { I18nService } from "../abstractions/i18n.service";
 
-import { VerificationType } from '../enums/verificationType';
+import { VerificationType } from "../enums/verificationType";
 
-import { VerifyOTPRequest } from '../models/request/account/verifyOTPRequest';
-import { SecretVerificationRequest } from '../models/request/secretVerificationRequest';
+import { VerifyOTPRequest } from "../models/request/account/verifyOTPRequest";
+import { SecretVerificationRequest } from "../models/request/secretVerificationRequest";
 
-import { Verification } from '../types/verification';
+import { Verification } from "../types/verification";
 
 export class UserVerificationService implements UserVerificationServiceAbstraction {
-    constructor(private cryptoService: CryptoService, private i18nService: I18nService,
-        private apiService: ApiService) { }
+  constructor(
+    private cryptoService: CryptoService,
+    private i18nService: I18nService,
+    private apiService: ApiService
+  ) {}
 
-    async buildRequest<T extends SecretVerificationRequest>(verification: Verification,
-        requestClass?: new () => T, alreadyHashed?: boolean) {
-        this.validateInput(verification);
+  async buildRequest<T extends SecretVerificationRequest>(
+    verification: Verification,
+    requestClass?: new () => T,
+    alreadyHashed?: boolean
+  ) {
+    this.validateInput(verification);
 
-        const request = requestClass != null
-            ? new requestClass()
-            : new SecretVerificationRequest() as T;
+    const request =
+      requestClass != null ? new requestClass() : (new SecretVerificationRequest() as T);
 
-        if (verification.type === VerificationType.OTP) {
-            request.otp = verification.secret;
-        } else {
-            request.masterPasswordHash = alreadyHashed
-                ? verification.secret
-                : await this.cryptoService.hashPassword(verification.secret, null);
-        }
-
-        return request;
+    if (verification.type === VerificationType.OTP) {
+      request.otp = verification.secret;
+    } else {
+      request.masterPasswordHash = alreadyHashed
+        ? verification.secret
+        : await this.cryptoService.hashPassword(verification.secret, null);
     }
 
-    async verifyUser(verification: Verification): Promise<boolean> {
-        this.validateInput(verification);
+    return request;
+  }
 
-        if (verification.type === VerificationType.OTP) {
-            const request = new VerifyOTPRequest(verification.secret);
-            try {
-                await this.apiService.postAccountVerifyOTP(request);
-            } catch (e) {
-                throw new Error(this.i18nService.t('invalidVerificationCode'));
-            }
-        } else {
-            const passwordValid = await this.cryptoService.compareAndUpdateKeyHash(verification.secret, null);
-            if (!passwordValid) {
-                throw new Error(this.i18nService.t('invalidMasterPassword'));
-            }
-        }
-        return true;
-    }
+  async verifyUser(verification: Verification): Promise<boolean> {
+    this.validateInput(verification);
 
-    async requestOTP() {
-        await this.apiService.postAccountRequestOTP();
+    if (verification.type === VerificationType.OTP) {
+      const request = new VerifyOTPRequest(verification.secret);
+      try {
+        await this.apiService.postAccountVerifyOTP(request);
+      } catch (e) {
+        throw new Error(this.i18nService.t("invalidVerificationCode"));
+      }
+    } else {
+      const passwordValid = await this.cryptoService.compareAndUpdateKeyHash(
+        verification.secret,
+        null
+      );
+      if (!passwordValid) {
+        throw new Error(this.i18nService.t("invalidMasterPassword"));
+      }
     }
+    return true;
+  }
+
+  async requestOTP() {
+    await this.apiService.postAccountRequestOTP();
+  }
 
-    private validateInput(verification: Verification) {
-        if (verification?.secret == null || verification.secret === '') {
-            if (verification.type === VerificationType.OTP) {
-                throw new Error(this.i18nService.t('verificationCodeRequired'));
-            } else {
-                throw new Error(this.i18nService.t('masterPassRequired'));
-            }
-        }
+  private validateInput(verification: Verification) {
+    if (verification?.secret == null || verification.secret === "") {
+      if (verification.type === VerificationType.OTP) {
+        throw new Error(this.i18nService.t("verificationCodeRequired"));
+      } else {
+        throw new Error(this.i18nService.t("masterPassRequired"));
+      }
     }
+  }
 }
diff --git a/jslib/common/src/services/vaultTimeout.service.ts b/jslib/common/src/services/vaultTimeout.service.ts
index 54d288b1..544e6bc2 100644
--- a/jslib/common/src/services/vaultTimeout.service.ts
+++ b/jslib/common/src/services/vaultTimeout.service.ts
@@ -1,180 +1,203 @@
-import { ConstantsService } from './constants.service';
-
-import { CipherService } from '../abstractions/cipher.service';
-import { CollectionService } from '../abstractions/collection.service';
-import { CryptoService } from '../abstractions/crypto.service';
-import { FolderService } from '../abstractions/folder.service';
-import { KeyConnectorService } from '../abstractions/keyConnector.service';
-import { MessagingService } from '../abstractions/messaging.service';
-import { PlatformUtilsService } from '../abstractions/platformUtils.service';
-import { PolicyService } from '../abstractions/policy.service';
-import { SearchService } from '../abstractions/search.service';
-import { StorageService } from '../abstractions/storage.service';
-import { TokenService } from '../abstractions/token.service';
-import { UserService } from '../abstractions/user.service';
-import { VaultTimeoutService as VaultTimeoutServiceAbstraction } from '../abstractions/vaultTimeout.service';
-
-import { PolicyType } from '../enums/policyType';
-import { EncString } from '../models/domain/encString';
+import { CipherService } from "../abstractions/cipher.service";
+import { CollectionService } from "../abstractions/collection.service";
+import { CryptoService } from "../abstractions/crypto.service";
+import { FolderService } from "../abstractions/folder.service";
+import { KeyConnectorService } from "../abstractions/keyConnector.service";
+import { MessagingService } from "../abstractions/messaging.service";
+import { PlatformUtilsService } from "../abstractions/platformUtils.service";
+import { PolicyService } from "../abstractions/policy.service";
+import { SearchService } from "../abstractions/search.service";
+import { StateService } from "../abstractions/state.service";
+import { TokenService } from "../abstractions/token.service";
+import { VaultTimeoutService as VaultTimeoutServiceAbstraction } from "../abstractions/vaultTimeout.service";
+import { KeySuffixOptions } from "../enums/keySuffixOptions";
+
+import { PolicyType } from "../enums/policyType";
 
 export class VaultTimeoutService implements VaultTimeoutServiceAbstraction {
-    pinProtectedKey: EncString = null;
-    biometricLocked: boolean = true;
-    everBeenUnlocked: boolean = false;
-
-    private inited = false;
-
-    constructor(private cipherService: CipherService, private folderService: FolderService,
-        private collectionService: CollectionService, private cryptoService: CryptoService,
-        protected platformUtilsService: PlatformUtilsService, private storageService: StorageService,
-        private messagingService: MessagingService, private searchService: SearchService,
-        private userService: UserService, private tokenService: TokenService, private policyService: PolicyService,
-        private keyConnectorService: KeyConnectorService,
-        private lockedCallback: () => Promise<void> = null, private loggedOutCallback: () => Promise<void> = null) {
+  private inited = false;
+
+  constructor(
+    private cipherService: CipherService,
+    private folderService: FolderService,
+    private collectionService: CollectionService,
+    private cryptoService: CryptoService,
+    protected platformUtilsService: PlatformUtilsService,
+    private messagingService: MessagingService,
+    private searchService: SearchService,
+    private tokenService: TokenService,
+    private policyService: PolicyService,
+    private keyConnectorService: KeyConnectorService,
+    private stateService: StateService,
+    private lockedCallback: () => Promise<void> = null,
+    private loggedOutCallback: (userId?: string) => Promise<void> = null
+  ) {}
+
+  init(checkOnInterval: boolean) {
+    if (this.inited) {
+      return;
     }
 
-    init(checkOnInterval: boolean) {
-        if (this.inited) {
-            return;
-        }
-
-        this.inited = true;
-        if (checkOnInterval) {
-            this.startCheck();
-        }
+    this.inited = true;
+    if (checkOnInterval) {
+      this.startCheck();
     }
-
-    startCheck() {
-        this.checkVaultTimeout();
-        setInterval(() => this.checkVaultTimeout(), 10 * 1000); // check every 10 seconds
+  }
+
+  startCheck() {
+    this.checkVaultTimeout();
+    setInterval(() => this.checkVaultTimeout(), 10 * 1000); // check every 10 seconds
+  }
+
+  // Keys aren't stored for a device that is locked or logged out.
+  async isLocked(userId?: string): Promise<boolean> {
+    const neverLock =
+      (await this.cryptoService.hasKeyStored(KeySuffixOptions.Auto, userId)) &&
+      !(await this.stateService.getEverBeenUnlocked({ userId: userId }));
+    if (neverLock) {
+      // TODO: This also _sets_ the key so when we check memory in the next line it finds a key.
+      // We should refactor here.
+      await this.cryptoService.getKey(KeySuffixOptions.Auto, userId);
     }
 
-    // Keys aren't stored for a device that is locked or logged out.
-    async isLocked(): Promise<boolean> {
-        // Handle never lock startup situation
-        if (await this.cryptoService.hasKeyStored('auto') && !this.everBeenUnlocked) {
-            await this.cryptoService.getKey('auto');
-        }
+    return !(await this.cryptoService.hasKeyInMemory(userId));
+  }
 
-        return !this.cryptoService.hasKeyInMemory();
+  async checkVaultTimeout(): Promise<void> {
+    if (await this.platformUtilsService.isViewOpen()) {
+      return;
     }
 
-    async checkVaultTimeout(): Promise<void> {
-        if (await this.platformUtilsService.isViewOpen()) {
-            // Do not lock
-            return;
-        }
-
-        // "is logged out check" - similar to isLocked, below
-        const authed = await this.userService.isAuthenticated();
-        if (!authed) {
-            return;
-        }
-
-        if (await this.isLocked()) {
-            return;
-        }
-
-        const vaultTimeout = await this.getVaultTimeout();
-        if (vaultTimeout == null || vaultTimeout < 0) {
-            return;
-        }
-
-        const lastActive = await this.storageService.get<number>(ConstantsService.lastActiveKey);
-        if (lastActive == null) {
-            return;
-        }
-
-        const vaultTimeoutSeconds = vaultTimeout * 60;
-        const diffSeconds = ((new Date()).getTime() - lastActive) / 1000;
-        if (diffSeconds >= vaultTimeoutSeconds) {
-            // Pivot based on the saved vault timeout action
-            const timeoutAction = await this.storageService.get<string>(ConstantsService.vaultTimeoutActionKey);
-            timeoutAction === 'logOut' ? await this.logOut() : await this.lock(true);
-        }
+    for (const userId in this.stateService.accounts.getValue()) {
+      if (userId != null && (await this.shouldLock(userId))) {
+        await this.executeTimeoutAction(userId);
+      }
     }
+  }
 
-    async lock(allowSoftLock = false): Promise<void> {
-        const authed = await this.userService.isAuthenticated();
-        if (!authed) {
-            return;
-        }
-
-        if (await this.keyConnectorService.getUsesKeyConnector()) {
-            const pinSet = await this.isPinLockSet();
-            const pinLock = (pinSet[0] && this.pinProtectedKey != null) || pinSet[1];
-
-            if (!pinLock && !await this.isBiometricLockSet()) {
-                await this.logOut();
-            }
-        }
-
-        this.biometricLocked = true;
-        this.everBeenUnlocked = true;
-        await this.cryptoService.clearKey(false);
-        await this.cryptoService.clearOrgKeys(true);
-        await this.cryptoService.clearKeyPair(true);
-        await this.cryptoService.clearEncKey(true);
-
-        this.folderService.clearCache();
-        this.cipherService.clearCache();
-        this.collectionService.clearCache();
-        this.searchService.clearIndex();
-        this.messagingService.send('locked');
-        if (this.lockedCallback != null) {
-            await this.lockedCallback();
-        }
+  async lock(allowSoftLock = false, userId?: string): Promise<void> {
+    const authed = await this.stateService.getIsAuthenticated({ userId: userId });
+    if (!authed) {
+      return;
     }
 
-    async logOut(): Promise<void> {
-        if (this.loggedOutCallback != null) {
-            await this.loggedOutCallback();
-        }
+    if (await this.keyConnectorService.getUsesKeyConnector()) {
+      const pinSet = await this.isPinLockSet();
+      const pinLock =
+        (pinSet[0] && (await this.stateService.getDecryptedPinProtected()) != null) || pinSet[1];
+
+      if (!pinLock && !(await this.isBiometricLockSet())) {
+        await this.logOut();
+      }
     }
 
-    async setVaultTimeoutOptions(timeout: number, action: string): Promise<void> {
-        await this.storageService.save(ConstantsService.vaultTimeoutKey, timeout);
-        await this.storageService.save(ConstantsService.vaultTimeoutActionKey, action);
-        await this.cryptoService.toggleKey();
-        await this.tokenService.toggleTokens();
+    if (userId == null || userId === (await this.stateService.getUserId())) {
+      this.searchService.clearIndex();
     }
 
-    async isPinLockSet(): Promise<[boolean, boolean]> {
-        const protectedPin = await this.storageService.get<string>(ConstantsService.protectedPin);
-        const pinProtectedKey = await this.storageService.get<string>(ConstantsService.pinProtectedKey);
-        return [protectedPin != null, pinProtectedKey != null];
+    await this.stateService.setEverBeenUnlocked(true, { userId: userId });
+    await this.stateService.setBiometricLocked(true, { userId: userId });
+
+    await this.cryptoService.clearKey(false, userId);
+    await this.cryptoService.clearOrgKeys(true, userId);
+    await this.cryptoService.clearKeyPair(true, userId);
+    await this.cryptoService.clearEncKey(true, userId);
+
+    await this.folderService.clearCache(userId);
+    await this.cipherService.clearCache(userId);
+    await this.collectionService.clearCache(userId);
+
+    this.messagingService.send("locked", { userId: userId });
+
+    if (this.lockedCallback != null) {
+      await this.lockedCallback();
     }
+  }
 
-    async isBiometricLockSet(): Promise<boolean> {
-        return await this.storageService.get<boolean>(ConstantsService.biometricUnlockKey);
+  async logOut(userId?: string): Promise<void> {
+    if (this.loggedOutCallback != null) {
+      await this.loggedOutCallback(userId);
+    }
+  }
+
+  async setVaultTimeoutOptions(timeout: number, action: string): Promise<void> {
+    await this.stateService.setVaultTimeout(timeout);
+    await this.stateService.setVaultTimeoutAction(action);
+    await this.cryptoService.toggleKey();
+    await this.tokenService.toggleTokens();
+  }
+
+  async isPinLockSet(): Promise<[boolean, boolean]> {
+    const protectedPin = await this.stateService.getProtectedPin();
+    const pinProtectedKey = await this.stateService.getEncryptedPinProtected();
+    return [protectedPin != null, pinProtectedKey != null];
+  }
+
+  async isBiometricLockSet(): Promise<boolean> {
+    return await this.stateService.getBiometricUnlock();
+  }
+
+  async getVaultTimeout(userId?: string): Promise<number> {
+    const vaultTimeout = await this.stateService.getVaultTimeout({ userId: userId });
+
+    if (
+      await this.policyService.policyAppliesToUser(PolicyType.MaximumVaultTimeout, null, userId)
+    ) {
+      const policy = await this.policyService.getAll(PolicyType.MaximumVaultTimeout, userId);
+      // Remove negative values, and ensure it's smaller than maximum allowed value according to policy
+      let timeout = Math.min(vaultTimeout, policy[0].data.minutes);
+
+      if (vaultTimeout == null || timeout < 0) {
+        timeout = policy[0].data.minutes;
+      }
+
+      // We really shouldn't need to set the value here, but multiple services relies on this value being correct.
+      if (vaultTimeout !== timeout) {
+        await this.stateService.setVaultTimeout(timeout, { userId: userId });
+      }
+
+      return timeout;
     }
 
-    async getVaultTimeout(): Promise<number> {
-        const vaultTimeout = await this.storageService.get<number>(ConstantsService.vaultTimeoutKey);
+    return vaultTimeout;
+  }
 
-        if (await this.policyService.policyAppliesToUser(PolicyType.MaximumVaultTimeout)) {
-            const policy = await this.policyService.getAll(PolicyType.MaximumVaultTimeout);
-            // Remove negative values, and ensure it's smaller than maximum allowed value according to policy
-            let timeout = Math.min(vaultTimeout, policy[0].data.minutes);
+  async clear(userId?: string): Promise<void> {
+    await this.stateService.setEverBeenUnlocked(false, { userId: userId });
+    await this.stateService.setDecryptedPinProtected(null, { userId: userId });
+    await this.stateService.setProtectedPin(null, { userId: userId });
+  }
 
-            if (vaultTimeout == null || timeout < 0) {
-                timeout = policy[0].data.minutes;
-            }
+  private async isLoggedOut(userId?: string): Promise<boolean> {
+    return !(await this.stateService.getIsAuthenticated({ userId: userId }));
+  }
 
-            // We really shouldn't need to set the value here, but multiple services relies on this value being correct.
-            if (vaultTimeout !== timeout) {
-                await this.storageService.save(ConstantsService.vaultTimeoutKey, timeout);
-            }
+  private async shouldLock(userId: string): Promise<boolean> {
+    if (await this.isLoggedOut(userId)) {
+      return false;
+    }
 
-            return timeout;
-        }
+    if (await this.isLocked(userId)) {
+      return false;
+    }
 
-        return vaultTimeout;
+    const vaultTimeout = await this.getVaultTimeout(userId);
+    if (vaultTimeout == null || vaultTimeout < 0) {
+      return false;
     }
 
-    clear(): Promise<any> {
-        this.everBeenUnlocked = false;
-        this.pinProtectedKey = null;
-        return this.storageService.remove(ConstantsService.protectedPin);
+    const lastActive = await this.stateService.getLastActive({ userId: userId });
+    if (lastActive == null) {
+      return false;
     }
+
+    const vaultTimeoutSeconds = vaultTimeout * 60;
+    const diffSeconds = (new Date().getTime() - lastActive) / 1000;
+    return diffSeconds >= vaultTimeoutSeconds;
+  }
+
+  private async executeTimeoutAction(userId: string): Promise<void> {
+    const timeoutAction = await this.stateService.getVaultTimeoutAction({ userId: userId });
+    timeoutAction === "logOut" ? await this.logOut() : await this.lock(true, userId);
+  }
 }
diff --git a/jslib/common/src/services/webCryptoFunction.service.ts b/jslib/common/src/services/webCryptoFunction.service.ts
index 2cabb96d..8f7a8019 100644
--- a/jslib/common/src/services/webCryptoFunction.service.ts
+++ b/jslib/common/src/services/webCryptoFunction.service.ts
@@ -1,332 +1,389 @@
-import * as forge from 'node-forge';
+import * as forge from "node-forge";
 
-import { CryptoFunctionService } from '../abstractions/cryptoFunction.service';
-import { PlatformUtilsService } from '../abstractions/platformUtils.service';
+import { CryptoFunctionService } from "../abstractions/cryptoFunction.service";
+import { PlatformUtilsService } from "../abstractions/platformUtils.service";
 
-import { Utils } from '../misc/utils';
+import { Utils } from "../misc/utils";
 
-import { DecryptParameters } from '../models/domain/decryptParameters';
-import { SymmetricCryptoKey } from '../models/domain/symmetricCryptoKey';
+import { DecryptParameters } from "../models/domain/decryptParameters";
+import { SymmetricCryptoKey } from "../models/domain/symmetricCryptoKey";
 
 export class WebCryptoFunctionService implements CryptoFunctionService {
-    private crypto: Crypto;
-    private subtle: SubtleCrypto;
-    private isIE: boolean;
-    private isOldSafari: boolean;
-
-    constructor(private win: Window, private platformUtilsService: PlatformUtilsService) {
-        this.crypto = typeof win.crypto !== 'undefined' ? win.crypto : null;
-        this.subtle = (!!this.crypto && typeof win.crypto.subtle !== 'undefined') ? win.crypto.subtle : null;
-        this.isIE = platformUtilsService.isIE();
-        const ua = win.navigator.userAgent;
-        this.isOldSafari = platformUtilsService.isSafari() &&
-            (ua.indexOf(' Version/10.') > -1 || ua.indexOf(' Version/9.') > -1);
+  private crypto: Crypto;
+  private subtle: SubtleCrypto;
+  private isIE: boolean;
+  private isOldSafari: boolean;
+
+  constructor(private win: Window, private platformUtilsService: PlatformUtilsService) {
+    this.crypto = typeof win.crypto !== "undefined" ? win.crypto : null;
+    this.subtle =
+      !!this.crypto && typeof win.crypto.subtle !== "undefined" ? win.crypto.subtle : null;
+    this.isIE = platformUtilsService.isIE();
+    const ua = win.navigator.userAgent;
+    this.isOldSafari =
+      platformUtilsService.isSafari() &&
+      (ua.indexOf(" Version/10.") > -1 || ua.indexOf(" Version/9.") > -1);
+  }
+
+  async pbkdf2(
+    password: string | ArrayBuffer,
+    salt: string | ArrayBuffer,
+    algorithm: "sha256" | "sha512",
+    iterations: number
+  ): Promise<ArrayBuffer> {
+    if (this.isIE || this.isOldSafari) {
+      const forgeLen = algorithm === "sha256" ? 32 : 64;
+      const passwordBytes = this.toByteString(password);
+      const saltBytes = this.toByteString(salt);
+      const derivedKeyBytes = (forge as any).pbkdf2(
+        passwordBytes,
+        saltBytes,
+        iterations,
+        forgeLen,
+        algorithm
+      );
+      return Utils.fromByteStringToArray(derivedKeyBytes).buffer;
     }
 
-    async pbkdf2(password: string | ArrayBuffer, salt: string | ArrayBuffer, algorithm: 'sha256' | 'sha512',
-        iterations: number): Promise<ArrayBuffer> {
-        if (this.isIE || this.isOldSafari) {
-            const forgeLen = algorithm === 'sha256' ? 32 : 64;
-            const passwordBytes = this.toByteString(password);
-            const saltBytes = this.toByteString(salt);
-            const derivedKeyBytes = (forge as any).pbkdf2(passwordBytes, saltBytes, iterations, forgeLen, algorithm);
-            return Utils.fromByteStringToArray(derivedKeyBytes).buffer;
-        }
-
-        const wcLen = algorithm === 'sha256' ? 256 : 512;
-        const passwordBuf = this.toBuf(password);
-        const saltBuf = this.toBuf(salt);
-
-        const pbkdf2Params: Pbkdf2Params = {
-            name: 'PBKDF2',
-            salt: saltBuf,
-            iterations: iterations,
-            hash: { name: this.toWebCryptoAlgorithm(algorithm) },
-        };
-
-        const impKey = await this.subtle.importKey('raw', passwordBuf, { name: 'PBKDF2' } as any,
-            false, ['deriveBits']);
-        return await this.subtle.deriveBits(pbkdf2Params, impKey, wcLen);
+    const wcLen = algorithm === "sha256" ? 256 : 512;
+    const passwordBuf = this.toBuf(password);
+    const saltBuf = this.toBuf(salt);
+
+    const pbkdf2Params: Pbkdf2Params = {
+      name: "PBKDF2",
+      salt: saltBuf,
+      iterations: iterations,
+      hash: { name: this.toWebCryptoAlgorithm(algorithm) },
+    };
+
+    const impKey = await this.subtle.importKey(
+      "raw",
+      passwordBuf,
+      { name: "PBKDF2" } as any,
+      false,
+      ["deriveBits"]
+    );
+    return await this.subtle.deriveBits(pbkdf2Params, impKey, wcLen);
+  }
+
+  async hkdf(
+    ikm: ArrayBuffer,
+    salt: string | ArrayBuffer,
+    info: string | ArrayBuffer,
+    outputByteSize: number,
+    algorithm: "sha256" | "sha512"
+  ): Promise<ArrayBuffer> {
+    const saltBuf = this.toBuf(salt);
+    const infoBuf = this.toBuf(info);
+
+    const hkdfParams: HkdfParams = {
+      name: "HKDF",
+      salt: saltBuf,
+      info: infoBuf,
+      hash: { name: this.toWebCryptoAlgorithm(algorithm) },
+    };
+
+    const impKey = await this.subtle.importKey("raw", ikm, { name: "HKDF" } as any, false, [
+      "deriveBits",
+    ]);
+    return await this.subtle.deriveBits(hkdfParams as any, impKey, outputByteSize * 8);
+  }
+
+  // ref: https://tools.ietf.org/html/rfc5869
+  async hkdfExpand(
+    prk: ArrayBuffer,
+    info: string | ArrayBuffer,
+    outputByteSize: number,
+    algorithm: "sha256" | "sha512"
+  ): Promise<ArrayBuffer> {
+    const hashLen = algorithm === "sha256" ? 32 : 64;
+    if (outputByteSize > 255 * hashLen) {
+      throw new Error("outputByteSize is too large.");
     }
-
-    async hkdf(ikm: ArrayBuffer, salt: string | ArrayBuffer, info: string | ArrayBuffer,
-        outputByteSize: number, algorithm: 'sha256' | 'sha512'): Promise<ArrayBuffer> {
-        const saltBuf = this.toBuf(salt);
-        const infoBuf = this.toBuf(info);
-
-        const hkdfParams: HkdfParams = {
-            name: 'HKDF',
-            salt: saltBuf,
-            info: infoBuf,
-            hash: { name: this.toWebCryptoAlgorithm(algorithm) },
-        };
-
-        const impKey = await this.subtle.importKey('raw', ikm, { name: 'HKDF' } as any,
-            false, ['deriveBits']);
-        return await this.subtle.deriveBits(hkdfParams as any, impKey, outputByteSize * 8);
-    }
-
-    // ref: https://tools.ietf.org/html/rfc5869
-    async hkdfExpand(prk: ArrayBuffer, info: string | ArrayBuffer, outputByteSize: number,
-        algorithm: 'sha256' | 'sha512'): Promise<ArrayBuffer> {
-        const hashLen = algorithm === 'sha256' ? 32 : 64;
-        if (outputByteSize > 255 * hashLen) {
-            throw new Error('outputByteSize is too large.');
-        }
-        const prkArr = new Uint8Array(prk);
-        if (prkArr.length < hashLen) {
-            throw new Error('prk is too small.');
-        }
-        const infoBuf = this.toBuf(info);
-        const infoArr = new Uint8Array(infoBuf);
-        let runningOkmLength = 0;
-        let previousT = new Uint8Array(0);
-        const n = Math.ceil(outputByteSize / hashLen);
-        const okm = new Uint8Array(n * hashLen);
-        for (let i = 0; i < n; i++) {
-            const t = new Uint8Array(previousT.length + infoArr.length + 1);
-            t.set(previousT);
-            t.set(infoArr, previousT.length);
-            t.set([i + 1], t.length - 1);
-            previousT = new Uint8Array(await this.hmac(t.buffer, prk, algorithm));
-            okm.set(previousT, runningOkmLength);
-            runningOkmLength += previousT.length;
-            if (runningOkmLength >= outputByteSize) {
-                break;
-            }
-        }
-        return okm.slice(0, outputByteSize).buffer;
+    const prkArr = new Uint8Array(prk);
+    if (prkArr.length < hashLen) {
+      throw new Error("prk is too small.");
     }
-
-    async hash(value: string | ArrayBuffer, algorithm: 'sha1' | 'sha256' | 'sha512' | 'md5'): Promise<ArrayBuffer> {
-        if ((this.isIE && algorithm === 'sha1') || algorithm === 'md5') {
-            const md = algorithm === 'md5' ? forge.md.md5.create() : forge.md.sha1.create();
-            const valueBytes = this.toByteString(value);
-            md.update(valueBytes, 'raw');
-            return Utils.fromByteStringToArray(md.digest().data).buffer;
-        }
-
-        const valueBuf = this.toBuf(value);
-        return await this.subtle.digest({ name: this.toWebCryptoAlgorithm(algorithm) }, valueBuf);
-    }
-
-    async hmac(value: ArrayBuffer, key: ArrayBuffer, algorithm: 'sha1' | 'sha256' | 'sha512'): Promise<ArrayBuffer> {
-        if (this.isIE && algorithm === 'sha512') {
-            const hmac = (forge as any).hmac.create();
-            const keyBytes = this.toByteString(key);
-            const valueBytes = this.toByteString(value);
-            hmac.start(algorithm, keyBytes);
-            hmac.update(valueBytes, 'raw');
-            return Utils.fromByteStringToArray(hmac.digest().data).buffer;
-        }
-
-        const signingAlgorithm = {
-            name: 'HMAC',
-            hash: { name: this.toWebCryptoAlgorithm(algorithm) },
-        };
-
-        const impKey = await this.subtle.importKey('raw', key, signingAlgorithm, false, ['sign']);
-        return await this.subtle.sign(signingAlgorithm, impKey, value);
+    const infoBuf = this.toBuf(info);
+    const infoArr = new Uint8Array(infoBuf);
+    let runningOkmLength = 0;
+    let previousT = new Uint8Array(0);
+    const n = Math.ceil(outputByteSize / hashLen);
+    const okm = new Uint8Array(n * hashLen);
+    for (let i = 0; i < n; i++) {
+      const t = new Uint8Array(previousT.length + infoArr.length + 1);
+      t.set(previousT);
+      t.set(infoArr, previousT.length);
+      t.set([i + 1], t.length - 1);
+      previousT = new Uint8Array(await this.hmac(t.buffer, prk, algorithm));
+      okm.set(previousT, runningOkmLength);
+      runningOkmLength += previousT.length;
+      if (runningOkmLength >= outputByteSize) {
+        break;
+      }
     }
-
-    // Safely compare two values in a way that protects against timing attacks (Double HMAC Verification).
-    // ref: https://www.nccgroup.trust/us/about-us/newsroom-and-events/blog/2011/february/double-hmac-verification/
-    // ref: https://paragonie.com/blog/2015/11/preventing-timing-attacks-on-string-comparison-with-double-hmac-strategy
-    async compare(a: ArrayBuffer, b: ArrayBuffer): Promise<boolean> {
-        const macKey = await this.randomBytes(32);
-        const signingAlgorithm = {
-            name: 'HMAC',
-            hash: { name: 'SHA-256' },
-        };
-        const impKey = await this.subtle.importKey('raw', macKey, signingAlgorithm, false, ['sign']);
-        const mac1 = await this.subtle.sign(signingAlgorithm, impKey, a);
-        const mac2 = await this.subtle.sign(signingAlgorithm, impKey, b);
-
-        if (mac1.byteLength !== mac2.byteLength) {
-            return false;
-        }
-
-        const arr1 = new Uint8Array(mac1);
-        const arr2 = new Uint8Array(mac2);
-        for (let i = 0; i < arr2.length; i++) {
-            if (arr1[i] !== arr2[i]) {
-                return false;
-            }
-        }
-
-        return true;
+    return okm.slice(0, outputByteSize).buffer;
+  }
+
+  async hash(
+    value: string | ArrayBuffer,
+    algorithm: "sha1" | "sha256" | "sha512" | "md5"
+  ): Promise<ArrayBuffer> {
+    if ((this.isIE && algorithm === "sha1") || algorithm === "md5") {
+      const md = algorithm === "md5" ? forge.md.md5.create() : forge.md.sha1.create();
+      const valueBytes = this.toByteString(value);
+      md.update(valueBytes, "raw");
+      return Utils.fromByteStringToArray(md.digest().data).buffer;
     }
 
-    hmacFast(value: string, key: string, algorithm: 'sha1' | 'sha256' | 'sha512'): Promise<string> {
-        const hmac = (forge as any).hmac.create();
-        hmac.start(algorithm, key);
-        hmac.update(value);
-        const bytes = hmac.digest().getBytes();
-        return Promise.resolve(bytes);
+    const valueBuf = this.toBuf(value);
+    return await this.subtle.digest({ name: this.toWebCryptoAlgorithm(algorithm) }, valueBuf);
+  }
+
+  async hmac(
+    value: ArrayBuffer,
+    key: ArrayBuffer,
+    algorithm: "sha1" | "sha256" | "sha512"
+  ): Promise<ArrayBuffer> {
+    if (this.isIE && algorithm === "sha512") {
+      const hmac = (forge as any).hmac.create();
+      const keyBytes = this.toByteString(key);
+      const valueBytes = this.toByteString(value);
+      hmac.start(algorithm, keyBytes);
+      hmac.update(valueBytes, "raw");
+      return Utils.fromByteStringToArray(hmac.digest().data).buffer;
     }
 
-    async compareFast(a: string, b: string): Promise<boolean> {
-        const rand = await this.randomBytes(32);
-        const bytes = new Uint32Array(rand);
-        const buffer = forge.util.createBuffer();
-        for (let i = 0; i < bytes.length; i++) {
-            buffer.putInt32(bytes[i]);
-        }
-        const macKey = buffer.getBytes();
-
-        const hmac = (forge as any).hmac.create();
-        hmac.start('sha256', macKey);
-        hmac.update(a);
-        const mac1 = hmac.digest().getBytes();
-
-        hmac.start(null, null);
-        hmac.update(b);
-        const mac2 = hmac.digest().getBytes();
-
-        const equals = mac1 === mac2;
-        return equals;
+    const signingAlgorithm = {
+      name: "HMAC",
+      hash: { name: this.toWebCryptoAlgorithm(algorithm) },
+    };
+
+    const impKey = await this.subtle.importKey("raw", key, signingAlgorithm, false, ["sign"]);
+    return await this.subtle.sign(signingAlgorithm, impKey, value);
+  }
+
+  // Safely compare two values in a way that protects against timing attacks (Double HMAC Verification).
+  // ref: https://www.nccgroup.trust/us/about-us/newsroom-and-events/blog/2011/february/double-hmac-verification/
+  // ref: https://paragonie.com/blog/2015/11/preventing-timing-attacks-on-string-comparison-with-double-hmac-strategy
+  async compare(a: ArrayBuffer, b: ArrayBuffer): Promise<boolean> {
+    const macKey = await this.randomBytes(32);
+    const signingAlgorithm = {
+      name: "HMAC",
+      hash: { name: "SHA-256" },
+    };
+    const impKey = await this.subtle.importKey("raw", macKey, signingAlgorithm, false, ["sign"]);
+    const mac1 = await this.subtle.sign(signingAlgorithm, impKey, a);
+    const mac2 = await this.subtle.sign(signingAlgorithm, impKey, b);
+
+    if (mac1.byteLength !== mac2.byteLength) {
+      return false;
     }
 
-    async aesEncrypt(data: ArrayBuffer, iv: ArrayBuffer, key: ArrayBuffer): Promise<ArrayBuffer> {
-        const impKey = await this.subtle.importKey('raw', key, { name: 'AES-CBC' } as any, false, ['encrypt']);
-        return await this.subtle.encrypt({ name: 'AES-CBC', iv: iv }, impKey, data);
+    const arr1 = new Uint8Array(mac1);
+    const arr2 = new Uint8Array(mac2);
+    for (let i = 0; i < arr2.length; i++) {
+      if (arr1[i] !== arr2[i]) {
+        return false;
+      }
     }
 
-    aesDecryptFastParameters(data: string, iv: string, mac: string, key: SymmetricCryptoKey):
-        DecryptParameters<string> {
-        const p = new DecryptParameters<string>();
-        if (key.meta != null) {
-            p.encKey = key.meta.encKeyByteString;
-            p.macKey = key.meta.macKeyByteString;
-        }
-
-        if (p.encKey == null) {
-            p.encKey = forge.util.decode64(key.encKeyB64);
-        }
-        p.data = forge.util.decode64(data);
-        p.iv = forge.util.decode64(iv);
-        p.macData = p.iv + p.data;
-        if (p.macKey == null && key.macKeyB64 != null) {
-            p.macKey = forge.util.decode64(key.macKeyB64);
-        }
-        if (mac != null) {
-            p.mac = forge.util.decode64(mac);
-        }
-
-        // cache byte string keys for later
-        if (key.meta == null) {
-            key.meta = {};
-        }
-        if (key.meta.encKeyByteString == null) {
-            key.meta.encKeyByteString = p.encKey;
-        }
-        if (p.macKey != null && key.meta.macKeyByteString == null) {
-            key.meta.macKeyByteString = p.macKey;
-        }
-
-        return p;
+    return true;
+  }
+
+  hmacFast(value: string, key: string, algorithm: "sha1" | "sha256" | "sha512"): Promise<string> {
+    const hmac = (forge as any).hmac.create();
+    hmac.start(algorithm, key);
+    hmac.update(value);
+    const bytes = hmac.digest().getBytes();
+    return Promise.resolve(bytes);
+  }
+
+  async compareFast(a: string, b: string): Promise<boolean> {
+    const rand = await this.randomBytes(32);
+    const bytes = new Uint32Array(rand);
+    const buffer = forge.util.createBuffer();
+    for (let i = 0; i < bytes.length; i++) {
+      buffer.putInt32(bytes[i]);
     }
-
-    aesDecryptFast(parameters: DecryptParameters<string>): Promise<string> {
-        const dataBuffer = (forge as any).util.createBuffer(parameters.data);
-        const decipher = (forge as any).cipher.createDecipher('AES-CBC', parameters.encKey);
-        decipher.start({ iv: parameters.iv });
-        decipher.update(dataBuffer);
-        decipher.finish();
-        const val = decipher.output.toString('utf8');
-        return Promise.resolve(val);
+    const macKey = buffer.getBytes();
+
+    const hmac = (forge as any).hmac.create();
+    hmac.start("sha256", macKey);
+    hmac.update(a);
+    const mac1 = hmac.digest().getBytes();
+
+    hmac.start(null, null);
+    hmac.update(b);
+    const mac2 = hmac.digest().getBytes();
+
+    const equals = mac1 === mac2;
+    return equals;
+  }
+
+  async aesEncrypt(data: ArrayBuffer, iv: ArrayBuffer, key: ArrayBuffer): Promise<ArrayBuffer> {
+    const impKey = await this.subtle.importKey("raw", key, { name: "AES-CBC" } as any, false, [
+      "encrypt",
+    ]);
+    return await this.subtle.encrypt({ name: "AES-CBC", iv: iv }, impKey, data);
+  }
+
+  aesDecryptFastParameters(
+    data: string,
+    iv: string,
+    mac: string,
+    key: SymmetricCryptoKey
+  ): DecryptParameters<string> {
+    const p = new DecryptParameters<string>();
+    if (key.meta != null) {
+      p.encKey = key.meta.encKeyByteString;
+      p.macKey = key.meta.macKeyByteString;
     }
 
-    async aesDecrypt(data: ArrayBuffer, iv: ArrayBuffer, key: ArrayBuffer): Promise<ArrayBuffer> {
-        const impKey = await this.subtle.importKey('raw', key, { name: 'AES-CBC' } as any, false, ['decrypt']);
-        return await this.subtle.decrypt({ name: 'AES-CBC', iv: iv }, impKey, data);
+    if (p.encKey == null) {
+      p.encKey = forge.util.decode64(key.encKeyB64);
     }
-
-    async rsaEncrypt(data: ArrayBuffer, publicKey: ArrayBuffer, algorithm: 'sha1' | 'sha256'): Promise<ArrayBuffer> {
-        // Note: Edge browser requires that we specify name and hash for both key import and decrypt.
-        // We cannot use the proper types here.
-        const rsaParams = {
-            name: 'RSA-OAEP',
-            hash: { name: this.toWebCryptoAlgorithm(algorithm) },
-        };
-        const impKey = await this.subtle.importKey('spki', publicKey, rsaParams, false, ['encrypt']);
-        return await this.subtle.encrypt(rsaParams, impKey, data);
+    p.data = forge.util.decode64(data);
+    p.iv = forge.util.decode64(iv);
+    p.macData = p.iv + p.data;
+    if (p.macKey == null && key.macKeyB64 != null) {
+      p.macKey = forge.util.decode64(key.macKeyB64);
     }
-
-    async rsaDecrypt(data: ArrayBuffer, privateKey: ArrayBuffer, algorithm: 'sha1' | 'sha256'): Promise<ArrayBuffer> {
-        // Note: Edge browser requires that we specify name and hash for both key import and decrypt.
-        // We cannot use the proper types here.
-        const rsaParams = {
-            name: 'RSA-OAEP',
-            hash: { name: this.toWebCryptoAlgorithm(algorithm) },
-        };
-        const impKey = await this.subtle.importKey('pkcs8', privateKey, rsaParams, false, ['decrypt']);
-        return await this.subtle.decrypt(rsaParams, impKey, data);
+    if (mac != null) {
+      p.mac = forge.util.decode64(mac);
     }
 
-    async rsaExtractPublicKey(privateKey: ArrayBuffer): Promise<ArrayBuffer> {
-        const rsaParams = {
-            name: 'RSA-OAEP',
-            // Have to specify some algorithm
-            hash: { name: this.toWebCryptoAlgorithm('sha1') },
-        };
-        const impPrivateKey = await this.subtle.importKey('pkcs8', privateKey, rsaParams, true, ['decrypt']);
-        const jwkPrivateKey = await this.subtle.exportKey('jwk', impPrivateKey);
-        const jwkPublicKeyParams = {
-            kty: 'RSA',
-            e: jwkPrivateKey.e,
-            n: jwkPrivateKey.n,
-            alg: 'RSA-OAEP',
-            ext: true,
-        };
-        const impPublicKey = await this.subtle.importKey('jwk', jwkPublicKeyParams, rsaParams, true, ['encrypt']);
-        return await this.subtle.exportKey('spki', impPublicKey);
+    // cache byte string keys for later
+    if (key.meta == null) {
+      key.meta = {};
     }
-
-    async rsaGenerateKeyPair(length: 1024 | 2048 | 4096): Promise<[ArrayBuffer, ArrayBuffer]> {
-        const rsaParams = {
-            name: 'RSA-OAEP',
-            modulusLength: length,
-            publicExponent: new Uint8Array([0x01, 0x00, 0x01]), // 65537
-            // Have to specify some algorithm
-            hash: { name: this.toWebCryptoAlgorithm('sha1') },
-        };
-        const keyPair = (await this.subtle.generateKey(rsaParams, true, ['encrypt', 'decrypt'])) as CryptoKeyPair;
-        const publicKey = await this.subtle.exportKey('spki', keyPair.publicKey);
-        const privateKey = await this.subtle.exportKey('pkcs8', keyPair.privateKey);
-        return [publicKey, privateKey];
+    if (key.meta.encKeyByteString == null) {
+      key.meta.encKeyByteString = p.encKey;
     }
-
-    randomBytes(length: number): Promise<ArrayBuffer> {
-        const arr = new Uint8Array(length);
-        this.crypto.getRandomValues(arr);
-        return Promise.resolve(arr.buffer);
+    if (p.macKey != null && key.meta.macKeyByteString == null) {
+      key.meta.macKeyByteString = p.macKey;
     }
 
-    private toBuf(value: string | ArrayBuffer): ArrayBuffer {
-        let buf: ArrayBuffer;
-        if (typeof (value) === 'string') {
-            buf = Utils.fromUtf8ToArray(value).buffer;
-        } else {
-            buf = value;
-        }
-        return buf;
+    return p;
+  }
+
+  aesDecryptFast(parameters: DecryptParameters<string>): Promise<string> {
+    const dataBuffer = (forge as any).util.createBuffer(parameters.data);
+    const decipher = (forge as any).cipher.createDecipher("AES-CBC", parameters.encKey);
+    decipher.start({ iv: parameters.iv });
+    decipher.update(dataBuffer);
+    decipher.finish();
+    const val = decipher.output.toString("utf8");
+    return Promise.resolve(val);
+  }
+
+  async aesDecrypt(data: ArrayBuffer, iv: ArrayBuffer, key: ArrayBuffer): Promise<ArrayBuffer> {
+    const impKey = await this.subtle.importKey("raw", key, { name: "AES-CBC" } as any, false, [
+      "decrypt",
+    ]);
+    return await this.subtle.decrypt({ name: "AES-CBC", iv: iv }, impKey, data);
+  }
+
+  async rsaEncrypt(
+    data: ArrayBuffer,
+    publicKey: ArrayBuffer,
+    algorithm: "sha1" | "sha256"
+  ): Promise<ArrayBuffer> {
+    // Note: Edge browser requires that we specify name and hash for both key import and decrypt.
+    // We cannot use the proper types here.
+    const rsaParams = {
+      name: "RSA-OAEP",
+      hash: { name: this.toWebCryptoAlgorithm(algorithm) },
+    };
+    const impKey = await this.subtle.importKey("spki", publicKey, rsaParams, false, ["encrypt"]);
+    return await this.subtle.encrypt(rsaParams, impKey, data);
+  }
+
+  async rsaDecrypt(
+    data: ArrayBuffer,
+    privateKey: ArrayBuffer,
+    algorithm: "sha1" | "sha256"
+  ): Promise<ArrayBuffer> {
+    // Note: Edge browser requires that we specify name and hash for both key import and decrypt.
+    // We cannot use the proper types here.
+    const rsaParams = {
+      name: "RSA-OAEP",
+      hash: { name: this.toWebCryptoAlgorithm(algorithm) },
+    };
+    const impKey = await this.subtle.importKey("pkcs8", privateKey, rsaParams, false, ["decrypt"]);
+    return await this.subtle.decrypt(rsaParams, impKey, data);
+  }
+
+  async rsaExtractPublicKey(privateKey: ArrayBuffer): Promise<ArrayBuffer> {
+    const rsaParams = {
+      name: "RSA-OAEP",
+      // Have to specify some algorithm
+      hash: { name: this.toWebCryptoAlgorithm("sha1") },
+    };
+    const impPrivateKey = await this.subtle.importKey("pkcs8", privateKey, rsaParams, true, [
+      "decrypt",
+    ]);
+    const jwkPrivateKey = await this.subtle.exportKey("jwk", impPrivateKey);
+    const jwkPublicKeyParams = {
+      kty: "RSA",
+      e: jwkPrivateKey.e,
+      n: jwkPrivateKey.n,
+      alg: "RSA-OAEP",
+      ext: true,
+    };
+    const impPublicKey = await this.subtle.importKey("jwk", jwkPublicKeyParams, rsaParams, true, [
+      "encrypt",
+    ]);
+    return await this.subtle.exportKey("spki", impPublicKey);
+  }
+
+  async rsaGenerateKeyPair(length: 1024 | 2048 | 4096): Promise<[ArrayBuffer, ArrayBuffer]> {
+    const rsaParams = {
+      name: "RSA-OAEP",
+      modulusLength: length,
+      publicExponent: new Uint8Array([0x01, 0x00, 0x01]), // 65537
+      // Have to specify some algorithm
+      hash: { name: this.toWebCryptoAlgorithm("sha1") },
+    };
+    const keyPair = (await this.subtle.generateKey(rsaParams, true, [
+      "encrypt",
+      "decrypt",
+    ])) as CryptoKeyPair;
+    const publicKey = await this.subtle.exportKey("spki", keyPair.publicKey);
+    const privateKey = await this.subtle.exportKey("pkcs8", keyPair.privateKey);
+    return [publicKey, privateKey];
+  }
+
+  randomBytes(length: number): Promise<ArrayBuffer> {
+    const arr = new Uint8Array(length);
+    this.crypto.getRandomValues(arr);
+    return Promise.resolve(arr.buffer);
+  }
+
+  private toBuf(value: string | ArrayBuffer): ArrayBuffer {
+    let buf: ArrayBuffer;
+    if (typeof value === "string") {
+      buf = Utils.fromUtf8ToArray(value).buffer;
+    } else {
+      buf = value;
     }
-
-    private toByteString(value: string | ArrayBuffer): string {
-        let bytes: string;
-        if (typeof (value) === 'string') {
-            bytes = forge.util.encodeUtf8(value);
-        } else {
-            bytes = Utils.fromBufferToByteString(value);
-        }
-        return bytes;
+    return buf;
+  }
+
+  private toByteString(value: string | ArrayBuffer): string {
+    let bytes: string;
+    if (typeof value === "string") {
+      bytes = forge.util.encodeUtf8(value);
+    } else {
+      bytes = Utils.fromBufferToByteString(value);
     }
+    return bytes;
+  }
 
-    private toWebCryptoAlgorithm(algorithm: 'sha1' | 'sha256' | 'sha512' | 'md5'): string {
-        if (algorithm === 'md5') {
-            throw new Error('MD5 is not supported in WebCrypto.');
-        }
-        return algorithm === 'sha1' ? 'SHA-1' : algorithm === 'sha256' ? 'SHA-256' : 'SHA-512';
+  private toWebCryptoAlgorithm(algorithm: "sha1" | "sha256" | "sha512" | "md5"): string {
+    if (algorithm === "md5") {
+      throw new Error("MD5 is not supported in WebCrypto.");
     }
+    return algorithm === "sha1" ? "SHA-1" : algorithm === "sha256" ? "SHA-256" : "SHA-512";
+  }
 }
diff --git a/jslib/common/src/types/verification.ts b/jslib/common/src/types/verification.ts
index 72ee8b0a..07ca4bbf 100644
--- a/jslib/common/src/types/verification.ts
+++ b/jslib/common/src/types/verification.ts
@@ -1,6 +1,6 @@
-import { VerificationType } from '../enums/verificationType';
+import { VerificationType } from "../enums/verificationType";
 
 export type Verification = {
-    type: VerificationType,
-    secret: string,
+  type: VerificationType;
+  secret: string;
 };
diff --git a/jslib/common/tsconfig.json b/jslib/common/tsconfig.json
index 96033322..2fbb1d8d 100644
--- a/jslib/common/tsconfig.json
+++ b/jslib/common/tsconfig.json
@@ -1,28 +1,5 @@
 {
-  "compilerOptions": {
-    "pretty": true,
-    "moduleResolution": "node",
-    "noImplicitAny": true,
-    "target": "ES6",
-    "module": "commonjs",
-    "lib": ["es5", "es6", "es7", "dom"],
-    "sourceMap": true,
-    "declaration": true,
-    "allowSyntheticDefaultImports": true,
-    "experimentalDecorators": true,
-    "emitDecoratorMetadata": true,
-    "declarationDir": "dist/types",
-    "outDir": "dist",
-    "typeRoots": [
-      "node_modules/@types"
-    ]
-  },
-  "include": [
-    "src",
-    "spec"
-  ],
-  "exclude": [
-    "node_modules",
-    "dist"
-  ]
+  "extends": "../shared/tsconfig",
+  "include": ["src", "spec"],
+  "exclude": ["node_modules", "dist"]
 }
diff --git a/jslib/electron/package-lock.json b/jslib/electron/package-lock.json
index 1201fd87..9ba8c4e1 100644
--- a/jslib/electron/package-lock.json
+++ b/jslib/electron/package-lock.json
@@ -11,17 +11,17 @@
       "dependencies": {
         "@bitwarden/jslib-common": "file:../common",
         "@nodert-win10-rs4/windows.security.credentials.ui": "^0.4.4",
-        "electron": "14.2.0",
+        "electron": "16.0.7",
         "electron-log": "4.4.1",
         "electron-store": "8.0.1",
-        "electron-updater": "4.3.9",
+        "electron-updater": "4.6.1",
         "forcefocus": "^1.1.0",
         "keytar": "7.7.0"
       },
       "devDependencies": {
-        "@types/node": "^14.17.1",
+        "@types/node": "^16.11.12",
         "rimraf": "^3.0.2",
-        "typescript": "4.1.5"
+        "typescript": "4.3.5"
       }
     },
     "../common": {
@@ -36,19 +36,19 @@
         "lunr": "^2.3.9",
         "node-forge": "^0.10.0",
         "papaparse": "^5.3.0",
-        "rxjs": "6.6.7",
+        "rxjs": "^7.4.0",
         "tldjs": "^2.3.1",
         "zxcvbn": "^4.4.2"
       },
       "devDependencies": {
         "@types/lunr": "^2.3.3",
-        "@types/node": "^14.17.1",
+        "@types/node": "^16.11.12",
         "@types/node-forge": "^0.9.7",
         "@types/papaparse": "^5.2.5",
         "@types/tldjs": "^2.3.0",
         "@types/zxcvbn": "^4.4.1",
         "rimraf": "^3.0.2",
-        "typescript": "4.1.5"
+        "typescript": "4.3.5"
       }
     },
     "node_modules/@bitwarden/jslib-common": {
@@ -56,9 +56,9 @@
       "link": true
     },
     "node_modules/@electron/get": {
-      "version": "1.13.0",
-      "resolved": "https://registry.npmjs.org/@electron/get/-/get-1.13.0.tgz",
-      "integrity": "sha512-+SjZhRuRo+STTO1Fdhzqnv9D2ZhjxXP6egsJ9kiO8dtP68cDx7dFCwWi64dlMQV7sWcfW1OYCW4wviEBzmRsfQ==",
+      "version": "1.13.1",
+      "resolved": "https://registry.npmjs.org/@electron/get/-/get-1.13.1.tgz",
+      "integrity": "sha512-U5vkXDZ9DwXtkPqlB45tfYnnYBN8PePp1z/XDCupnSpdrxT8/ThCv9WCwPLf9oqiSGZTkH6dx2jDUPuoXpjkcA==",
       "dependencies": {
         "debug": "^4.1.1",
         "env-paths": "^2.2.0",
@@ -72,7 +72,7 @@
         "node": ">=8.6"
       },
       "optionalDependencies": {
-        "global-agent": "^2.0.2",
+        "global-agent": "^3.0.0",
         "global-tunnel-ng": "^2.7.1"
       }
     },
@@ -105,19 +105,20 @@
       }
     },
     "node_modules/@types/node": {
-      "version": "14.17.19",
-      "resolved": "https://registry.npmjs.org/@types/node/-/node-14.17.19.tgz",
-      "integrity": "sha512-jjYI6NkyfXykucU6ELEoT64QyKOdvaA6enOqKtP4xUsGY0X0ZUZz29fUmrTRo+7v7c6TgDu82q3GHHaCEkqZwA=="
+      "version": "16.11.12",
+      "resolved": "https://registry.npmjs.org/@types/node/-/node-16.11.12.tgz",
+      "integrity": "sha512-+2Iggwg7PxoO5Kyhvsq9VarmPbIelXP070HMImEpbtGCoyWNINQj4wzjbQCXzdHTRXnqufutJb5KAURZANNBAw==",
+      "dev": true
     },
     "node_modules/@types/semver": {
-      "version": "7.3.8",
-      "resolved": "https://registry.npmjs.org/@types/semver/-/semver-7.3.8.tgz",
-      "integrity": "sha512-D/2EJvAlCEtYFEYmmlGwbGXuK886HzyCc3nZX/tkFTQdEU8jZDAgiv08P162yB17y4ZXZoq7yFAnW4GDBb9Now=="
+      "version": "7.3.9",
+      "resolved": "https://registry.npmjs.org/@types/semver/-/semver-7.3.9.tgz",
+      "integrity": "sha512-L/TMpyURfBkf+o/526Zb6kd/tchUP3iBDEPjqjb+U2MAJhVRxxrmr2fwpe08E7QsV7YLcpq0tUaQ9O9x97ZIxQ=="
     },
     "node_modules/ajv": {
-      "version": "8.6.3",
-      "resolved": "https://registry.npmjs.org/ajv/-/ajv-8.6.3.tgz",
-      "integrity": "sha512-SMJOdDP6LqTkD0Uq8qLi+gMwSt0imXLSV080qFVwJCpH9U6Mb+SUGHAXM0KNbcBPguytWyvFxcHgMLe2D2XSpw==",
+      "version": "8.8.2",
+      "resolved": "https://registry.npmjs.org/ajv/-/ajv-8.8.2.tgz",
+      "integrity": "sha512-x9VuX+R/jcFj1DHo/fCp99esgGDWiHENrKxaCENuCxpoMCmAt/COCGVDwA7kleEpEzJjDnvh3yGoOuLu0Dtllw==",
       "dependencies": {
         "fast-deep-equal": "^3.1.1",
         "json-schema-traverse": "^1.0.0",
@@ -289,9 +290,9 @@
       "integrity": "sha512-E+XQCRwSbaaiChtv6k6Dwgc+bx+Bs6vuKJHHl5kox/BaKbhiXzqQOwK4cO22yElGp2OCmjwVhT3HmxgyPGnJfQ=="
     },
     "node_modules/builder-util-runtime": {
-      "version": "8.7.5",
-      "resolved": "https://registry.npmjs.org/builder-util-runtime/-/builder-util-runtime-8.7.5.tgz",
-      "integrity": "sha512-fgUFHKtMNjdvH6PDRFntdIGUPgwZ69sXsAqEulCtoiqgWes5agrMq/Ud274zjJRTbckYh2PHh8/1CpFc6dpsbQ==",
+      "version": "8.9.1",
+      "resolved": "https://registry.npmjs.org/builder-util-runtime/-/builder-util-runtime-8.9.1.tgz",
+      "integrity": "sha512-c8a8J3wK6BIVLW7ls+7TRK9igspTbzWmUqxFbgK0m40Ggm6efUbxtWVCGIjc+dtchyr5qAMAUL6iEGRdS/6vwg==",
       "dependencies": {
         "debug": "^4.3.2",
         "sax": "^1.2.4"
@@ -381,9 +382,9 @@
       }
     },
     "node_modules/conf": {
-      "version": "10.0.3",
-      "resolved": "https://registry.npmjs.org/conf/-/conf-10.0.3.tgz",
-      "integrity": "sha512-4gtQ/Q36qVxBzMe6B7gWOAfni1VdhuHkIzxydHkclnwGmgN+eW4bb6jj73vigCfr7d3WlmqawvhZrpCUCTPYxQ==",
+      "version": "10.1.1",
+      "resolved": "https://registry.npmjs.org/conf/-/conf-10.1.1.tgz",
+      "integrity": "sha512-z2civwq/k8TMYtcn3SVP0Peso4otIWnHtcTuHhQ0zDZDdP4NTxqEc8owfkz4zBsdMYdn/LFcE+ZhbCeqkhtq3Q==",
       "dependencies": {
         "ajv": "^8.6.3",
         "ajv-formats": "^2.1.1",
@@ -432,17 +433,6 @@
       "resolved": "https://registry.npmjs.org/console-control-strings/-/console-control-strings-1.1.0.tgz",
       "integrity": "sha1-PXz0Rk22RG6mRL9LOVB/mFEAjo4="
     },
-    "node_modules/core-js": {
-      "version": "3.18.1",
-      "resolved": "https://registry.npmjs.org/core-js/-/core-js-3.18.1.tgz",
-      "integrity": "sha512-vJlUi/7YdlCZeL6fXvWNaLUPh/id12WXj3MbkMw5uOyF0PfWPBNOCNbs53YqgrvtujLNlt9JQpruyIKkUZ+PKA==",
-      "hasInstallScript": true,
-      "optional": true,
-      "funding": {
-        "type": "opencollective",
-        "url": "https://opencollective.com/core-js"
-      }
-    },
     "node_modules/core-util-is": {
       "version": "1.0.3",
       "resolved": "https://registry.npmjs.org/core-util-is/-/core-util-is-1.0.3.tgz",
@@ -463,9 +453,9 @@
       }
     },
     "node_modules/debug": {
-      "version": "4.3.2",
-      "resolved": "https://registry.npmjs.org/debug/-/debug-4.3.2.tgz",
-      "integrity": "sha512-mOp8wKcvj7XxC78zLgw/ZA+6TSgkoE2C/ienthhRD298T7UNwAg9diBpLRxC0mOezLl4B0xV7M0cCO6P/O0Xhw==",
+      "version": "4.3.3",
+      "resolved": "https://registry.npmjs.org/debug/-/debug-4.3.3.tgz",
+      "integrity": "sha512-/zxw5+vh1Tfv+4Qn7a5nsbcJKPaSvCDhojn6FEl9vupwK2VCSDtEiEtqr8DFtzYFOdz63LBkxec7DYuc2jon6Q==",
       "dependencies": {
         "ms": "2.1.2"
       },
@@ -556,13 +546,12 @@
       "integrity": "sha1-7gHdHKwO08vH/b6jfcCo8c4ALOI="
     },
     "node_modules/electron": {
-      "version": "14.2.0",
-      "resolved": "https://registry.npmjs.org/electron/-/electron-14.2.0.tgz",
-      "integrity": "sha512-6CmAv1P0xcwK3FQOSA27fHI36/wctSFVgj46VODn56srXXQWeolkK1VzeAFNE613iAuuH9jJdHvE3gz+c7XkNA==",
+      "version": "16.0.7",
+      "resolved": "https://registry.npmjs.org/electron/-/electron-16.0.7.tgz",
+      "integrity": "sha512-/IMwpBf2svhA1X/7Q58RV+Nn0fvUJsHniG4TizaO7q4iKFYSQ6hBvsLz+cylcZ8hRMKmVy5G1XaMNJID2ah23w==",
       "hasInstallScript": true,
-      "license": "MIT",
       "dependencies": {
-        "@electron/get": "^1.0.1",
+        "@electron/get": "^1.13.0",
         "@types/node": "^14.6.2",
         "extract-zip": "^1.0.3"
       },
@@ -591,15 +580,15 @@
       }
     },
     "node_modules/electron-updater": {
-      "version": "4.3.9",
-      "resolved": "https://registry.npmjs.org/electron-updater/-/electron-updater-4.3.9.tgz",
-      "integrity": "sha512-LCNfedSwZfS4Hza+pDyPR05LqHtGorCStaBgVpRnfKxOlZcvpYEX0AbMeH5XUtbtGRoH2V8osbbf2qKPNb7AsA==",
+      "version": "4.6.1",
+      "resolved": "https://registry.npmjs.org/electron-updater/-/electron-updater-4.6.1.tgz",
+      "integrity": "sha512-YsU1mHqXLrXXmBMsxhxy24PrbaB8rnpZDPmFa2gOkTYk/Ch13+R0fjsRSpPYvqtskVVY0ux8fu+HnUkVkqc7og==",
       "dependencies": {
-        "@types/semver": "^7.3.5",
-        "builder-util-runtime": "8.7.5",
+        "@types/semver": "^7.3.6",
+        "builder-util-runtime": "8.9.1",
         "fs-extra": "^10.0.0",
         "js-yaml": "^4.1.0",
-        "lazy-val": "^1.0.4",
+        "lazy-val": "^1.0.5",
         "lodash.escaperegexp": "^4.1.2",
         "lodash.isequal": "^4.5.0",
         "semver": "^7.3.5"
@@ -651,6 +640,11 @@
         "node": ">= 10.0.0"
       }
     },
+    "node_modules/electron/node_modules/@types/node": {
+      "version": "14.18.0",
+      "resolved": "https://registry.npmjs.org/@types/node/-/node-14.18.0.tgz",
+      "integrity": "sha512-0GeIl2kmVMXEnx8tg1SlG6Gg8vkqirrW752KqolYo1PHevhhZN3bhJ67qHj+bQaINhX0Ra3TlWwRvMCd9iEfNQ=="
+    },
     "node_modules/encodeurl": {
       "version": "1.0.2",
       "resolved": "https://registry.npmjs.org/encodeurl/-/encodeurl-1.0.2.tgz",
@@ -847,13 +841,12 @@
       }
     },
     "node_modules/global-agent": {
-      "version": "2.2.0",
-      "resolved": "https://registry.npmjs.org/global-agent/-/global-agent-2.2.0.tgz",
-      "integrity": "sha512-+20KpaW6DDLqhG7JDiJpD1JvNvb8ts+TNl7BPOYcURqCrXqnN1Vf+XVOrkKJAFPqfX+oEhsdzOj1hLWkBTdNJg==",
+      "version": "3.0.0",
+      "resolved": "https://registry.npmjs.org/global-agent/-/global-agent-3.0.0.tgz",
+      "integrity": "sha512-PT6XReJ+D07JvGoxQMkT6qji/jVNfX/h364XHZOWeRzy64sSFr+xJ5OX7LI3b4MPQzdL4H8Y8M0xzPpsVMwA8Q==",
       "optional": true,
       "dependencies": {
         "boolean": "^3.0.1",
-        "core-js": "^3.6.5",
         "es6-error": "^4.1.1",
         "matcher": "^3.0.0",
         "roarr": "^2.15.3",
@@ -1621,9 +1614,9 @@
       "integrity": "sha1-BF+XgtARrppoA93TgrJDkrPYkPc="
     },
     "node_modules/signal-exit": {
-      "version": "3.0.4",
-      "resolved": "https://registry.npmjs.org/signal-exit/-/signal-exit-3.0.4.tgz",
-      "integrity": "sha512-rqYhcAnZ6d/vTPGghdrw7iumdcbXpsk1b8IG/rz+VWV51DM0p7XCtMoJ3qhPLIbp3tvyt3pKRbaaEMZYpHto8Q=="
+      "version": "3.0.6",
+      "resolved": "https://registry.npmjs.org/signal-exit/-/signal-exit-3.0.6.tgz",
+      "integrity": "sha512-sDl4qMFpijcGw22U5w63KmD3cZJfBuFlVNbVMKje2keoKML7X2UzWbc4XrmEbDwg0NXJc3yv4/ox7b+JWb57kQ=="
     },
     "node_modules/simple-concat": {
       "version": "1.0.1",
@@ -1817,9 +1810,9 @@
       "integrity": "sha1-hnrHTjhkGHsdPUfZlqeOxciDB3c="
     },
     "node_modules/typescript": {
-      "version": "4.1.5",
-      "resolved": "https://registry.npmjs.org/typescript/-/typescript-4.1.5.tgz",
-      "integrity": "sha512-6OSu9PTIzmn9TCDiovULTnET6BgXtDYL4Gg4szY+cGsc3JP1dQL8qvE8kShTRx1NIw4Q9IBHlwODjkjWEtMUyA==",
+      "version": "4.3.5",
+      "resolved": "https://registry.npmjs.org/typescript/-/typescript-4.3.5.tgz",
+      "integrity": "sha512-DqQgihaQ9cUrskJo9kIyW/+g0Vxsk8cDtZ52a3NGh0YNTfpUSArXSohyUGnvbPazEPLu398C0UxmKSOrPumUzA==",
       "dev": true,
       "bin": {
         "tsc": "bin/tsc",
@@ -1867,11 +1860,11 @@
       "integrity": "sha1-Zws6+8VS4LVd9rd4DKdGFfI60cs="
     },
     "node_modules/wide-align": {
-      "version": "1.1.3",
-      "resolved": "https://registry.npmjs.org/wide-align/-/wide-align-1.1.3.tgz",
-      "integrity": "sha512-QGkOQc8XL6Bt5PwnsExKBPuMKBxnGxWWW3fU55Xt4feHozMUhdUMaBCk290qpm/wG5u/RSKzwdAC4i51YigihA==",
+      "version": "1.1.5",
+      "resolved": "https://registry.npmjs.org/wide-align/-/wide-align-1.1.5.tgz",
+      "integrity": "sha512-eDMORYaPNZ4sQIuuYPDHdQvf4gyCF9rEEV/yPxGfwPkRodwEgiMUUXTx/dex+Me0wxx53S+NgUHaP7y3MGlDmg==",
       "dependencies": {
-        "string-width": "^1.0.2 || 2"
+        "string-width": "^1.0.2 || 2 || 3 || 4"
       }
     },
     "node_modules/wrappy": {
@@ -1901,7 +1894,7 @@
         "@microsoft/signalr": "5.0.10",
         "@microsoft/signalr-protocol-msgpack": "5.0.10",
         "@types/lunr": "^2.3.3",
-        "@types/node": "^14.17.1",
+        "@types/node": "^16.11.12",
         "@types/node-forge": "^0.9.7",
         "@types/papaparse": "^5.2.5",
         "@types/tldjs": "^2.3.0",
@@ -1912,21 +1905,21 @@
         "node-forge": "^0.10.0",
         "papaparse": "^5.3.0",
         "rimraf": "^3.0.2",
-        "rxjs": "6.6.7",
+        "rxjs": "^7.4.0",
         "tldjs": "^2.3.1",
-        "typescript": "4.1.5",
+        "typescript": "4.3.5",
         "zxcvbn": "^4.4.2"
       }
     },
     "@electron/get": {
-      "version": "1.13.0",
-      "resolved": "https://registry.npmjs.org/@electron/get/-/get-1.13.0.tgz",
-      "integrity": "sha512-+SjZhRuRo+STTO1Fdhzqnv9D2ZhjxXP6egsJ9kiO8dtP68cDx7dFCwWi64dlMQV7sWcfW1OYCW4wviEBzmRsfQ==",
+      "version": "1.13.1",
+      "resolved": "https://registry.npmjs.org/@electron/get/-/get-1.13.1.tgz",
+      "integrity": "sha512-U5vkXDZ9DwXtkPqlB45tfYnnYBN8PePp1z/XDCupnSpdrxT8/ThCv9WCwPLf9oqiSGZTkH6dx2jDUPuoXpjkcA==",
       "requires": {
         "debug": "^4.1.1",
         "env-paths": "^2.2.0",
         "fs-extra": "^8.1.0",
-        "global-agent": "^2.0.2",
+        "global-agent": "^3.0.0",
         "global-tunnel-ng": "^2.7.1",
         "got": "^9.6.0",
         "progress": "^2.0.3",
@@ -1956,19 +1949,20 @@
       }
     },
     "@types/node": {
-      "version": "14.17.19",
-      "resolved": "https://registry.npmjs.org/@types/node/-/node-14.17.19.tgz",
-      "integrity": "sha512-jjYI6NkyfXykucU6ELEoT64QyKOdvaA6enOqKtP4xUsGY0X0ZUZz29fUmrTRo+7v7c6TgDu82q3GHHaCEkqZwA=="
+      "version": "16.11.12",
+      "resolved": "https://registry.npmjs.org/@types/node/-/node-16.11.12.tgz",
+      "integrity": "sha512-+2Iggwg7PxoO5Kyhvsq9VarmPbIelXP070HMImEpbtGCoyWNINQj4wzjbQCXzdHTRXnqufutJb5KAURZANNBAw==",
+      "dev": true
     },
     "@types/semver": {
-      "version": "7.3.8",
-      "resolved": "https://registry.npmjs.org/@types/semver/-/semver-7.3.8.tgz",
-      "integrity": "sha512-D/2EJvAlCEtYFEYmmlGwbGXuK886HzyCc3nZX/tkFTQdEU8jZDAgiv08P162yB17y4ZXZoq7yFAnW4GDBb9Now=="
+      "version": "7.3.9",
+      "resolved": "https://registry.npmjs.org/@types/semver/-/semver-7.3.9.tgz",
+      "integrity": "sha512-L/TMpyURfBkf+o/526Zb6kd/tchUP3iBDEPjqjb+U2MAJhVRxxrmr2fwpe08E7QsV7YLcpq0tUaQ9O9x97ZIxQ=="
     },
     "ajv": {
-      "version": "8.6.3",
-      "resolved": "https://registry.npmjs.org/ajv/-/ajv-8.6.3.tgz",
-      "integrity": "sha512-SMJOdDP6LqTkD0Uq8qLi+gMwSt0imXLSV080qFVwJCpH9U6Mb+SUGHAXM0KNbcBPguytWyvFxcHgMLe2D2XSpw==",
+      "version": "8.8.2",
+      "resolved": "https://registry.npmjs.org/ajv/-/ajv-8.8.2.tgz",
+      "integrity": "sha512-x9VuX+R/jcFj1DHo/fCp99esgGDWiHENrKxaCENuCxpoMCmAt/COCGVDwA7kleEpEzJjDnvh3yGoOuLu0Dtllw==",
       "requires": {
         "fast-deep-equal": "^3.1.1",
         "json-schema-traverse": "^1.0.0",
@@ -2090,9 +2084,9 @@
       "integrity": "sha512-E+XQCRwSbaaiChtv6k6Dwgc+bx+Bs6vuKJHHl5kox/BaKbhiXzqQOwK4cO22yElGp2OCmjwVhT3HmxgyPGnJfQ=="
     },
     "builder-util-runtime": {
-      "version": "8.7.5",
-      "resolved": "https://registry.npmjs.org/builder-util-runtime/-/builder-util-runtime-8.7.5.tgz",
-      "integrity": "sha512-fgUFHKtMNjdvH6PDRFntdIGUPgwZ69sXsAqEulCtoiqgWes5agrMq/Ud274zjJRTbckYh2PHh8/1CpFc6dpsbQ==",
+      "version": "8.9.1",
+      "resolved": "https://registry.npmjs.org/builder-util-runtime/-/builder-util-runtime-8.9.1.tgz",
+      "integrity": "sha512-c8a8J3wK6BIVLW7ls+7TRK9igspTbzWmUqxFbgK0m40Ggm6efUbxtWVCGIjc+dtchyr5qAMAUL6iEGRdS/6vwg==",
       "requires": {
         "debug": "^4.3.2",
         "sax": "^1.2.4"
@@ -2163,9 +2157,9 @@
       }
     },
     "conf": {
-      "version": "10.0.3",
-      "resolved": "https://registry.npmjs.org/conf/-/conf-10.0.3.tgz",
-      "integrity": "sha512-4gtQ/Q36qVxBzMe6B7gWOAfni1VdhuHkIzxydHkclnwGmgN+eW4bb6jj73vigCfr7d3WlmqawvhZrpCUCTPYxQ==",
+      "version": "10.1.1",
+      "resolved": "https://registry.npmjs.org/conf/-/conf-10.1.1.tgz",
+      "integrity": "sha512-z2civwq/k8TMYtcn3SVP0Peso4otIWnHtcTuHhQ0zDZDdP4NTxqEc8owfkz4zBsdMYdn/LFcE+ZhbCeqkhtq3Q==",
       "requires": {
         "ajv": "^8.6.3",
         "ajv-formats": "^2.1.1",
@@ -2204,12 +2198,6 @@
       "resolved": "https://registry.npmjs.org/console-control-strings/-/console-control-strings-1.1.0.tgz",
       "integrity": "sha1-PXz0Rk22RG6mRL9LOVB/mFEAjo4="
     },
-    "core-js": {
-      "version": "3.18.1",
-      "resolved": "https://registry.npmjs.org/core-js/-/core-js-3.18.1.tgz",
-      "integrity": "sha512-vJlUi/7YdlCZeL6fXvWNaLUPh/id12WXj3MbkMw5uOyF0PfWPBNOCNbs53YqgrvtujLNlt9JQpruyIKkUZ+PKA==",
-      "optional": true
-    },
     "core-util-is": {
       "version": "1.0.3",
       "resolved": "https://registry.npmjs.org/core-util-is/-/core-util-is-1.0.3.tgz",
@@ -2224,9 +2212,9 @@
       }
     },
     "debug": {
-      "version": "4.3.2",
-      "resolved": "https://registry.npmjs.org/debug/-/debug-4.3.2.tgz",
-      "integrity": "sha512-mOp8wKcvj7XxC78zLgw/ZA+6TSgkoE2C/ienthhRD298T7UNwAg9diBpLRxC0mOezLl4B0xV7M0cCO6P/O0Xhw==",
+      "version": "4.3.3",
+      "resolved": "https://registry.npmjs.org/debug/-/debug-4.3.3.tgz",
+      "integrity": "sha512-/zxw5+vh1Tfv+4Qn7a5nsbcJKPaSvCDhojn6FEl9vupwK2VCSDtEiEtqr8DFtzYFOdz63LBkxec7DYuc2jon6Q==",
       "requires": {
         "ms": "2.1.2"
       }
@@ -2288,13 +2276,20 @@
       "integrity": "sha1-7gHdHKwO08vH/b6jfcCo8c4ALOI="
     },
     "electron": {
-      "version": "14.2.0",
-      "resolved": "https://registry.npmjs.org/electron/-/electron-14.2.0.tgz",
-      "integrity": "sha512-6CmAv1P0xcwK3FQOSA27fHI36/wctSFVgj46VODn56srXXQWeolkK1VzeAFNE613iAuuH9jJdHvE3gz+c7XkNA==",
+      "version": "16.0.7",
+      "resolved": "https://registry.npmjs.org/electron/-/electron-16.0.7.tgz",
+      "integrity": "sha512-/IMwpBf2svhA1X/7Q58RV+Nn0fvUJsHniG4TizaO7q4iKFYSQ6hBvsLz+cylcZ8hRMKmVy5G1XaMNJID2ah23w==",
       "requires": {
-        "@electron/get": "^1.0.1",
+        "@electron/get": "^1.13.0",
         "@types/node": "^14.6.2",
         "extract-zip": "^1.0.3"
+      },
+      "dependencies": {
+        "@types/node": {
+          "version": "14.18.0",
+          "resolved": "https://registry.npmjs.org/@types/node/-/node-14.18.0.tgz",
+          "integrity": "sha512-0GeIl2kmVMXEnx8tg1SlG6Gg8vkqirrW752KqolYo1PHevhhZN3bhJ67qHj+bQaINhX0Ra3TlWwRvMCd9iEfNQ=="
+        }
       }
     },
     "electron-log": {
@@ -2312,15 +2307,15 @@
       }
     },
     "electron-updater": {
-      "version": "4.3.9",
-      "resolved": "https://registry.npmjs.org/electron-updater/-/electron-updater-4.3.9.tgz",
-      "integrity": "sha512-LCNfedSwZfS4Hza+pDyPR05LqHtGorCStaBgVpRnfKxOlZcvpYEX0AbMeH5XUtbtGRoH2V8osbbf2qKPNb7AsA==",
+      "version": "4.6.1",
+      "resolved": "https://registry.npmjs.org/electron-updater/-/electron-updater-4.6.1.tgz",
+      "integrity": "sha512-YsU1mHqXLrXXmBMsxhxy24PrbaB8rnpZDPmFa2gOkTYk/Ch13+R0fjsRSpPYvqtskVVY0ux8fu+HnUkVkqc7og==",
       "requires": {
-        "@types/semver": "^7.3.5",
-        "builder-util-runtime": "8.7.5",
+        "@types/semver": "^7.3.6",
+        "builder-util-runtime": "8.9.1",
         "fs-extra": "^10.0.0",
         "js-yaml": "^4.1.0",
-        "lazy-val": "^1.0.4",
+        "lazy-val": "^1.0.5",
         "lodash.escaperegexp": "^4.1.2",
         "lodash.isequal": "^4.5.0",
         "semver": "^7.3.5"
@@ -2521,13 +2516,12 @@
       }
     },
     "global-agent": {
-      "version": "2.2.0",
-      "resolved": "https://registry.npmjs.org/global-agent/-/global-agent-2.2.0.tgz",
-      "integrity": "sha512-+20KpaW6DDLqhG7JDiJpD1JvNvb8ts+TNl7BPOYcURqCrXqnN1Vf+XVOrkKJAFPqfX+oEhsdzOj1hLWkBTdNJg==",
+      "version": "3.0.0",
+      "resolved": "https://registry.npmjs.org/global-agent/-/global-agent-3.0.0.tgz",
+      "integrity": "sha512-PT6XReJ+D07JvGoxQMkT6qji/jVNfX/h364XHZOWeRzy64sSFr+xJ5OX7LI3b4MPQzdL4H8Y8M0xzPpsVMwA8Q==",
       "optional": true,
       "requires": {
         "boolean": "^3.0.1",
-        "core-js": "^3.6.5",
         "es6-error": "^4.1.1",
         "matcher": "^3.0.0",
         "roarr": "^2.15.3",
@@ -3131,9 +3125,9 @@
       "integrity": "sha1-BF+XgtARrppoA93TgrJDkrPYkPc="
     },
     "signal-exit": {
-      "version": "3.0.4",
-      "resolved": "https://registry.npmjs.org/signal-exit/-/signal-exit-3.0.4.tgz",
-      "integrity": "sha512-rqYhcAnZ6d/vTPGghdrw7iumdcbXpsk1b8IG/rz+VWV51DM0p7XCtMoJ3qhPLIbp3tvyt3pKRbaaEMZYpHto8Q=="
+      "version": "3.0.6",
+      "resolved": "https://registry.npmjs.org/signal-exit/-/signal-exit-3.0.6.tgz",
+      "integrity": "sha512-sDl4qMFpijcGw22U5w63KmD3cZJfBuFlVNbVMKje2keoKML7X2UzWbc4XrmEbDwg0NXJc3yv4/ox7b+JWb57kQ=="
     },
     "simple-concat": {
       "version": "1.0.1",
@@ -3275,9 +3269,9 @@
       "integrity": "sha1-hnrHTjhkGHsdPUfZlqeOxciDB3c="
     },
     "typescript": {
-      "version": "4.1.5",
-      "resolved": "https://registry.npmjs.org/typescript/-/typescript-4.1.5.tgz",
-      "integrity": "sha512-6OSu9PTIzmn9TCDiovULTnET6BgXtDYL4Gg4szY+cGsc3JP1dQL8qvE8kShTRx1NIw4Q9IBHlwODjkjWEtMUyA==",
+      "version": "4.3.5",
+      "resolved": "https://registry.npmjs.org/typescript/-/typescript-4.3.5.tgz",
+      "integrity": "sha512-DqQgihaQ9cUrskJo9kIyW/+g0Vxsk8cDtZ52a3NGh0YNTfpUSArXSohyUGnvbPazEPLu398C0UxmKSOrPumUzA==",
       "dev": true
     },
     "universalify": {
@@ -3312,11 +3306,11 @@
       "integrity": "sha1-Zws6+8VS4LVd9rd4DKdGFfI60cs="
     },
     "wide-align": {
-      "version": "1.1.3",
-      "resolved": "https://registry.npmjs.org/wide-align/-/wide-align-1.1.3.tgz",
-      "integrity": "sha512-QGkOQc8XL6Bt5PwnsExKBPuMKBxnGxWWW3fU55Xt4feHozMUhdUMaBCk290qpm/wG5u/RSKzwdAC4i51YigihA==",
+      "version": "1.1.5",
+      "resolved": "https://registry.npmjs.org/wide-align/-/wide-align-1.1.5.tgz",
+      "integrity": "sha512-eDMORYaPNZ4sQIuuYPDHdQvf4gyCF9rEEV/yPxGfwPkRodwEgiMUUXTx/dex+Me0wxx53S+NgUHaP7y3MGlDmg==",
       "requires": {
-        "string-width": "^1.0.2 || 2"
+        "string-width": "^1.0.2 || 2 || 3 || 4"
       }
     },
     "wrappy": {
diff --git a/jslib/electron/package.json b/jslib/electron/package.json
index ffd2c2f7..88bedfb9 100644
--- a/jslib/electron/package.json
+++ b/jslib/electron/package.json
@@ -20,17 +20,17 @@
     "lint:fix": "tslint 'src/**/*.ts' 'spec/**/*.ts' --fix"
   },
   "devDependencies": {
-    "@types/node": "^14.17.1",
+    "@types/node": "^16.11.12",
     "rimraf": "^3.0.2",
-    "typescript": "4.1.5"
+    "typescript": "4.3.5"
   },
   "dependencies": {
     "@bitwarden/jslib-common": "file:../common",
     "@nodert-win10-rs4/windows.security.credentials.ui": "^0.4.4",
-    "electron": "14.2.0",
+    "electron": "16.0.7",
     "electron-log": "4.4.1",
     "electron-store": "8.0.1",
-    "electron-updater": "4.3.9",
+    "electron-updater": "4.6.1",
     "forcefocus": "^1.1.0",
     "keytar": "7.7.0"
   }
diff --git a/jslib/electron/src/baseMenu.ts b/jslib/electron/src/baseMenu.ts
index 7a2c66bf..f52db2a5 100644
--- a/jslib/electron/src/baseMenu.ts
+++ b/jslib/electron/src/baseMenu.ts
@@ -1,229 +1,224 @@
-import {
-    app,
-    clipboard,
-    dialog,
-    Menu,
-    MenuItemConstructorOptions,
-} from 'electron';
+import { app, clipboard, dialog, Menu, MenuItemConstructorOptions } from "electron";
 
-import { I18nService } from 'jslib-common/abstractions/i18n.service';
-import { WindowMain } from './window.main';
+import { I18nService } from "jslib-common/abstractions/i18n.service";
+import { WindowMain } from "./window.main";
 
 export class BaseMenu {
-    protected editMenuItemOptions: MenuItemConstructorOptions;
-    protected viewSubMenuItemOptions: MenuItemConstructorOptions[];
-    protected windowMenuItemOptions: MenuItemConstructorOptions;
-    protected macAppMenuItemOptions: MenuItemConstructorOptions[];
-    protected macWindowSubmenuOptions: MenuItemConstructorOptions[];
+  protected editMenuItemOptions: MenuItemConstructorOptions;
+  protected viewSubMenuItemOptions: MenuItemConstructorOptions[];
+  protected windowMenuItemOptions: MenuItemConstructorOptions;
+  protected macAppMenuItemOptions: MenuItemConstructorOptions[];
+  protected macWindowSubmenuOptions: MenuItemConstructorOptions[];
 
-    constructor(protected i18nService: I18nService, protected windowMain: WindowMain) { }
+  constructor(protected i18nService: I18nService, protected windowMain: WindowMain) {}
 
-    protected initProperties() {
-        this.editMenuItemOptions = {
-            label: this.i18nService.t('edit'),
-            submenu: [
-                {
-                    label: this.i18nService.t('undo'),
-                    role: 'undo',
-                },
-                {
-                    label: this.i18nService.t('redo'),
-                    role: 'redo',
-                },
-                { type: 'separator' },
-                {
-                    label: this.i18nService.t('cut'),
-                    role: 'cut',
-                },
-                {
-                    label: this.i18nService.t('copy'),
-                    role: 'copy',
-                },
-                {
-                    label: this.i18nService.t('paste'),
-                    role: 'paste',
-                },
-                { type: 'separator' },
-                {
-                    label: this.i18nService.t('selectAll'),
-                    role: 'selectAll',
-                },
-            ],
-        };
+  protected initProperties() {
+    this.editMenuItemOptions = {
+      label: this.i18nService.t("edit"),
+      submenu: [
+        {
+          label: this.i18nService.t("undo"),
+          role: "undo",
+        },
+        {
+          label: this.i18nService.t("redo"),
+          role: "redo",
+        },
+        { type: "separator" },
+        {
+          label: this.i18nService.t("cut"),
+          role: "cut",
+        },
+        {
+          label: this.i18nService.t("copy"),
+          role: "copy",
+        },
+        {
+          label: this.i18nService.t("paste"),
+          role: "paste",
+        },
+        { type: "separator" },
+        {
+          label: this.i18nService.t("selectAll"),
+          role: "selectAll",
+        },
+      ],
+    };
 
-        this.viewSubMenuItemOptions = [
-            {
-                label: this.i18nService.t('zoomIn'),
-                role: 'zoomIn',
-                accelerator: 'CmdOrCtrl+=',
-            },
-            {
-                label: this.i18nService.t('zoomOut'),
-                role: 'zoomOut',
-                accelerator: 'CmdOrCtrl+-',
-            },
-            {
-                label: this.i18nService.t('resetZoom'),
-                role: 'resetZoom',
-                accelerator: 'CmdOrCtrl+0',
-            },
-            { type: 'separator' },
-            {
-                label: this.i18nService.t('toggleFullScreen'),
-                role: 'togglefullscreen',
-            },
-            { type: 'separator' },
-            {
-                label: this.i18nService.t('reload'),
-                role: 'forceReload',
-            },
-            {
-                label: this.i18nService.t('toggleDevTools'),
-                role: 'toggleDevTools',
-                accelerator: 'F12',
-            },
-        ];
+    this.viewSubMenuItemOptions = [
+      {
+        label: this.i18nService.t("zoomIn"),
+        role: "zoomIn",
+        accelerator: "CmdOrCtrl+=",
+      },
+      {
+        label: this.i18nService.t("zoomOut"),
+        role: "zoomOut",
+        accelerator: "CmdOrCtrl+-",
+      },
+      {
+        label: this.i18nService.t("resetZoom"),
+        role: "resetZoom",
+        accelerator: "CmdOrCtrl+0",
+      },
+      { type: "separator" },
+      {
+        label: this.i18nService.t("toggleFullScreen"),
+        role: "togglefullscreen",
+      },
+      { type: "separator" },
+      {
+        label: this.i18nService.t("reload"),
+        role: "forceReload",
+      },
+      {
+        label: this.i18nService.t("toggleDevTools"),
+        role: "toggleDevTools",
+        accelerator: "F12",
+      },
+    ];
 
-        this.windowMenuItemOptions = {
-            label: this.i18nService.t('window'),
-            role: 'window',
-            submenu: [
-                {
-                    label: this.i18nService.t('minimize'),
-                    role: 'minimize',
-                },
-                {
-                    label: this.i18nService.t('close'),
-                    role: 'close',
-                },
-            ],
-        };
+    this.windowMenuItemOptions = {
+      label: this.i18nService.t("window"),
+      role: "window",
+      submenu: [
+        {
+          label: this.i18nService.t("minimize"),
+          role: "minimize",
+        },
+        {
+          label: this.i18nService.t("close"),
+          role: "close",
+        },
+      ],
+    };
 
-        if (process.platform === 'darwin') {
-            this.macAppMenuItemOptions = [
-                {
-                    label: this.i18nService.t('services'),
-                    role: 'services', submenu: [],
-                },
-                { type: 'separator' },
-                {
-                    label: this.i18nService.t('hideBitwarden'),
-                    role: 'hide',
-                },
-                {
-                    label: this.i18nService.t('hideOthers'),
-                    role: 'hideOthers',
-                },
-                {
-                    label: this.i18nService.t('showAll'),
-                    role: 'unhide',
-                },
-                { type: 'separator' },
-                {
-                    label: this.i18nService.t('quitBitwarden'),
-                    role: 'quit',
-                },
-            ];
+    if (process.platform === "darwin") {
+      this.macAppMenuItemOptions = [
+        {
+          label: this.i18nService.t("services"),
+          role: "services",
+          submenu: [],
+        },
+        { type: "separator" },
+        {
+          label: this.i18nService.t("hideBitwarden"),
+          role: "hide",
+        },
+        {
+          label: this.i18nService.t("hideOthers"),
+          role: "hideOthers",
+        },
+        {
+          label: this.i18nService.t("showAll"),
+          role: "unhide",
+        },
+        { type: "separator" },
+        {
+          label: this.i18nService.t("quitBitwarden"),
+          role: "quit",
+        },
+      ];
 
-            this.macWindowSubmenuOptions = [
-                {
-                    label: this.i18nService.t('minimize'),
-                    role: 'minimize',
-                },
-                {
-                    label: this.i18nService.t('zoom'),
-                    role: 'zoom',
-                },
-                { type: 'separator' },
-                {
-                    label: this.i18nService.t('bringAllToFront'),
-                    role: 'front',
-                },
-                {
-                    label: this.i18nService.t('close'),
-                    role: 'close',
-                },
-            ];
-        }
+      this.macWindowSubmenuOptions = [
+        {
+          label: this.i18nService.t("minimize"),
+          role: "minimize",
+        },
+        {
+          label: this.i18nService.t("zoom"),
+          role: "zoom",
+        },
+        { type: "separator" },
+        {
+          label: this.i18nService.t("bringAllToFront"),
+          role: "front",
+        },
+        {
+          label: this.i18nService.t("close"),
+          role: "close",
+        },
+      ];
     }
+  }
 
-    protected initContextMenu() {
-        if (this.windowMain.win == null) {
-            return;
-        }
+  protected initContextMenu() {
+    if (this.windowMain.win == null) {
+      return;
+    }
 
-        const selectionMenu = Menu.buildFromTemplate([
-            {
-                label: this.i18nService.t('copy'),
-                role: 'copy',
-            },
-            { type: 'separator' },
-            {
-                label: this.i18nService.t('selectAll'),
-                role: 'selectAll',
-            },
-        ]);
+    const selectionMenu = Menu.buildFromTemplate([
+      {
+        label: this.i18nService.t("copy"),
+        role: "copy",
+      },
+      { type: "separator" },
+      {
+        label: this.i18nService.t("selectAll"),
+        role: "selectAll",
+      },
+    ]);
 
-        const inputMenu = Menu.buildFromTemplate([
-            {
-                label: this.i18nService.t('undo'),
-                role: 'undo',
-            },
-            {
-                label: this.i18nService.t('redo'),
-                role: 'redo',
-            },
-            { type: 'separator' },
-            {
-                label: this.i18nService.t('cut'),
-                role: 'cut',
-                enabled: false,
-            },
-            {
-                label: this.i18nService.t('copy'),
-                role: 'copy',
-                enabled: false,
-            },
-            {
-                label: this.i18nService.t('paste'),
-                role: 'paste',
-            },
-            { type: 'separator' },
-            {
-                label: this.i18nService.t('selectAll'),
-                role: 'selectAll',
-            },
-        ]);
+    const inputMenu = Menu.buildFromTemplate([
+      {
+        label: this.i18nService.t("undo"),
+        role: "undo",
+      },
+      {
+        label: this.i18nService.t("redo"),
+        role: "redo",
+      },
+      { type: "separator" },
+      {
+        label: this.i18nService.t("cut"),
+        role: "cut",
+        enabled: false,
+      },
+      {
+        label: this.i18nService.t("copy"),
+        role: "copy",
+        enabled: false,
+      },
+      {
+        label: this.i18nService.t("paste"),
+        role: "paste",
+      },
+      { type: "separator" },
+      {
+        label: this.i18nService.t("selectAll"),
+        role: "selectAll",
+      },
+    ]);
 
-        const inputSelectionMenu = Menu.buildFromTemplate([
-            {
-                label: this.i18nService.t('cut'),
-                role: 'cut',
-            },
-            {
-                label: this.i18nService.t('copy'),
-                role: 'copy',
-            },
-            {
-                label: this.i18nService.t('paste'),
-                role: 'paste',
-            },
-            { type: 'separator' },
-            {
-                label: this.i18nService.t('selectAll'),
-                role: 'selectAll',
-            },
-        ]);
+    const inputSelectionMenu = Menu.buildFromTemplate([
+      {
+        label: this.i18nService.t("cut"),
+        role: "cut",
+      },
+      {
+        label: this.i18nService.t("copy"),
+        role: "copy",
+      },
+      {
+        label: this.i18nService.t("paste"),
+        role: "paste",
+      },
+      { type: "separator" },
+      {
+        label: this.i18nService.t("selectAll"),
+        role: "selectAll",
+      },
+    ]);
 
-        this.windowMain.win.webContents.on('context-menu', (e, props) => {
-            const selected = props.selectionText && props.selectionText.trim() !== '';
-            if (props.isEditable && selected) {
-                inputSelectionMenu.popup({ window: this.windowMain.win });
-            } else if (props.isEditable) {
-                inputMenu.popup({ window: this.windowMain.win });
-            } else if (selected) {
-                selectionMenu.popup({ window: this.windowMain.win });
-            }
-        });
-    }
+    this.windowMain.win.webContents.on("context-menu", (e, props) => {
+      const selected = props.selectionText && props.selectionText.trim() !== "";
+      if (props.isEditable && selected) {
+        inputSelectionMenu.popup({ window: this.windowMain.win });
+      } else if (props.isEditable) {
+        inputMenu.popup({ window: this.windowMain.win });
+      } else if (selected) {
+        selectionMenu.popup({ window: this.windowMain.win });
+      }
+    });
+  }
 }
diff --git a/jslib/electron/src/biometric.darwin.main.ts b/jslib/electron/src/biometric.darwin.main.ts
index 26d3bd74..15588ac0 100644
--- a/jslib/electron/src/biometric.darwin.main.ts
+++ b/jslib/electron/src/biometric.darwin.main.ts
@@ -1,37 +1,34 @@
-import { ipcMain, systemPreferences } from 'electron';
+import { ipcMain, systemPreferences } from "electron";
 
-import { I18nService } from 'jslib-common/abstractions/i18n.service';
-import { StorageService } from 'jslib-common/abstractions/storage.service';
-import { ConstantsService } from 'jslib-common/services/constants.service';
-
-import { BiometricMain } from 'jslib-common/abstractions/biometric.main';
-import { ElectronConstants } from './electronConstants';
+import { BiometricMain } from "jslib-common/abstractions/biometric.main";
+import { I18nService } from "jslib-common/abstractions/i18n.service";
+import { StateService } from "jslib-common/abstractions/state.service";
 
 export default class BiometricDarwinMain implements BiometricMain {
-    isError: boolean = false;
-
-    constructor(private storageService: StorageService, private i18nservice: I18nService) {}
-
-    async init() {
-        this.storageService.save(ElectronConstants.enableBiometric, await this.supportsBiometric());
-        this.storageService.save(ConstantsService.biometricText, 'unlockWithTouchId');
-        this.storageService.save(ElectronConstants.noAutoPromptBiometricsText, 'noAutoPromptTouchId');
-
-        ipcMain.on('biometric', async (event: any, message: any) => {
-            event.returnValue = await this.authenticateBiometric();
-        });
-    }
-
-    supportsBiometric(): Promise<boolean> {
-        return Promise.resolve(systemPreferences.canPromptTouchID());
-    }
-
-    async authenticateBiometric(): Promise<boolean> {
-        try {
-            await systemPreferences.promptTouchID(this.i18nservice.t('touchIdConsentMessage'));
-            return true;
-        } catch {
-            return false;
-        }
+  isError: boolean = false;
+
+  constructor(private i18nservice: I18nService, private stateService: StateService) {}
+
+  async init() {
+    await this.stateService.setEnableBiometric(await this.supportsBiometric());
+    await this.stateService.setBiometricText("unlockWithTouchId");
+    await this.stateService.setNoAutoPromptBiometricsText("noAutoPromptTouchId");
+
+    ipcMain.on("biometric", async (event: any, message: any) => {
+      event.returnValue = await this.authenticateBiometric();
+    });
+  }
+
+  supportsBiometric(): Promise<boolean> {
+    return Promise.resolve(systemPreferences.canPromptTouchID());
+  }
+
+  async authenticateBiometric(): Promise<boolean> {
+    try {
+      await systemPreferences.promptTouchID(this.i18nservice.t("touchIdConsentMessage"));
+      return true;
+    } catch {
+      return false;
     }
+  }
 }
diff --git a/jslib/electron/src/biometric.windows.main.ts b/jslib/electron/src/biometric.windows.main.ts
index d33875b7..bb6288b8 100644
--- a/jslib/electron/src/biometric.windows.main.ts
+++ b/jslib/electron/src/biometric.windows.main.ts
@@ -1,135 +1,144 @@
-import { ipcMain } from 'electron';
-import forceFocus from 'forcefocus';
+import { ipcMain } from "electron";
+import forceFocus from "forcefocus";
 
-import { ElectronConstants } from './electronConstants';
-import { WindowMain } from './window.main';
+import { WindowMain } from "./window.main";
 
-import { BiometricMain } from 'jslib-common/abstractions/biometric.main';
-import { I18nService } from 'jslib-common/abstractions/i18n.service';
-import { LogService } from 'jslib-common/abstractions/log.service';
-import { StorageService } from 'jslib-common/abstractions/storage.service';
-import { ConstantsService } from 'jslib-common/services/constants.service';
+import { BiometricMain } from "jslib-common/abstractions/biometric.main";
+import { I18nService } from "jslib-common/abstractions/i18n.service";
+import { LogService } from "jslib-common/abstractions/log.service";
+import { StateService } from "jslib-common/abstractions/state.service";
 
 export default class BiometricWindowsMain implements BiometricMain {
-    isError: boolean = false;
-
-    private windowsSecurityCredentialsUiModule: any;
-
-    constructor(private storageService: StorageService, private i18nservice: I18nService, private windowMain: WindowMain,
-        private logService: LogService) { }
-
-    async init() {
-        this.windowsSecurityCredentialsUiModule = this.getWindowsSecurityCredentialsUiModule();
-        let supportsBiometric = false;
-        try {
-            supportsBiometric = await this.supportsBiometric();
-        } catch {
-            // store error state so we can let the user know on the settings page
-            this.isError = true;
-        }
-        this.storageService.save(ElectronConstants.enableBiometric, supportsBiometric);
-        this.storageService.save(ConstantsService.biometricText, 'unlockWithWindowsHello');
-        this.storageService.save(ElectronConstants.noAutoPromptBiometricsText, 'noAutoPromptWindowsHello');
-
-        ipcMain.on('biometric', async (event: any, message: any) => {
-            event.returnValue = await this.authenticateBiometric();
-        });
+  isError: boolean = false;
+
+  private windowsSecurityCredentialsUiModule: any;
+
+  constructor(
+    private i18nservice: I18nService,
+    private windowMain: WindowMain,
+    private stateService: StateService,
+    private logService: LogService
+  ) {}
+
+  async init() {
+    this.windowsSecurityCredentialsUiModule = this.getWindowsSecurityCredentialsUiModule();
+    let supportsBiometric = false;
+    try {
+      supportsBiometric = await this.supportsBiometric();
+    } catch {
+      // store error state so we can let the user know on the settings page
+      this.isError = true;
     }
+    await this.stateService.setEnableBiometric(supportsBiometric);
+    await this.stateService.setBiometricText("unlockWithWindowsHello");
+    await this.stateService.setNoAutoPromptBiometricsText("noAutoPromptWindowsHello");
 
-    async supportsBiometric(): Promise<boolean> {
-        const availability = await this.checkAvailabilityAsync();
+    ipcMain.on("biometric", async (event: any, message: any) => {
+      event.returnValue = await this.authenticateBiometric();
+    });
+  }
 
-        return this.getAllowedAvailabilities().includes(availability);
-    }
+  async supportsBiometric(): Promise<boolean> {
+    const availability = await this.checkAvailabilityAsync();
 
-    async authenticateBiometric(): Promise<boolean> {
-        const module = this.getWindowsSecurityCredentialsUiModule();
-        if (module == null) {
-            return false;
-        }
+    return this.getAllowedAvailabilities().includes(availability);
+  }
 
-        const verification = await this.requestVerificationAsync(this.i18nservice.t('windowsHelloConsentMessage'));
+  async authenticateBiometric(): Promise<boolean> {
+    const module = this.getWindowsSecurityCredentialsUiModule();
+    if (module == null) {
+      return false;
+    }
 
-        return verification === module.UserConsentVerificationResult.verified;
+    const verification = await this.requestVerificationAsync(
+      this.i18nservice.t("windowsHelloConsentMessage")
+    );
+
+    return verification === module.UserConsentVerificationResult.verified;
+  }
+
+  getWindowsSecurityCredentialsUiModule(): any {
+    try {
+      if (this.windowsSecurityCredentialsUiModule == null && this.getWindowsMajorVersion() >= 10) {
+        this.windowsSecurityCredentialsUiModule = require("@nodert-win10-rs4/windows.security.credentials.ui");
+      }
+      return this.windowsSecurityCredentialsUiModule;
+    } catch {
+      this.isError = true;
     }
+    return null;
+  }
 
-    getWindowsSecurityCredentialsUiModule(): any {
+  async checkAvailabilityAsync(): Promise<any> {
+    const module = this.getWindowsSecurityCredentialsUiModule();
+    if (module != null) {
+      return new Promise((resolve, reject) => {
         try {
-            if (this.windowsSecurityCredentialsUiModule == null && this.getWindowsMajorVersion() >= 10) {
-                this.windowsSecurityCredentialsUiModule = require('@nodert-win10-rs4/windows.security.credentials.ui');
+          module.UserConsentVerifier.checkAvailabilityAsync((error: Error, result: any) => {
+            if (error) {
+              return resolve(null);
             }
-            return this.windowsSecurityCredentialsUiModule;
+            return resolve(result);
+          });
         } catch {
-            this.isError = true;
+          this.isError = true;
+          return resolve(null);
         }
-        return null;
+      });
     }
+    return Promise.resolve(null);
+  }
 
-    async checkAvailabilityAsync(): Promise<any> {
-        const module = this.getWindowsSecurityCredentialsUiModule();
-        if (module != null) {
-            return new Promise((resolve, reject) => {
-                try {
-                    module.UserConsentVerifier.checkAvailabilityAsync((error: Error, result: any) => {
-                        if (error) {
-                            return resolve(null);
-                        }
-                        return resolve(result);
-                    });
-                } catch {
-                    this.isError = true;
-                    return resolve(null);
-                }
-            });
-        }
-        return Promise.resolve(null);
-    }
+  async requestVerificationAsync(message: string): Promise<any> {
+    const module = this.getWindowsSecurityCredentialsUiModule();
+    if (module != null) {
+      return new Promise((resolve, reject) => {
+        try {
+          module.UserConsentVerifier.requestVerificationAsync(
+            message,
+            (error: Error, result: any) => {
+              if (error) {
+                return resolve(null);
+              }
+              return resolve(result);
+            }
+          );
 
-    async requestVerificationAsync(message: string): Promise<any> {
-        const module = this.getWindowsSecurityCredentialsUiModule();
-        if (module != null) {
-            return new Promise((resolve, reject) => {
-                try {
-                    module.UserConsentVerifier.requestVerificationAsync(message, (error: Error, result: any) => {
-                        if (error) {
-                            return resolve(null);
-                        }
-                        return resolve(result);
-                    });
-
-                    forceFocus.focusWindow(this.windowMain.win);
-                } catch (error) {
-                    this.isError = true;
-                    return reject(error);
-                }
-            });
+          forceFocus.focusWindow(this.windowMain.win);
+        } catch (error) {
+          this.isError = true;
+          return reject(error);
         }
-        return Promise.resolve(null);
+      });
     }
-
-    getAllowedAvailabilities(): any[] {
-        try {
-            const module = this.getWindowsSecurityCredentialsUiModule();
-            if (module != null) {
-                return [
-                    module.UserConsentVerifierAvailability.available,
-                    module.UserConsentVerifierAvailability.deviceBusy,
-                ];
-            }
-        } catch { /*Ignore error*/ }
-        return [];
+    return Promise.resolve(null);
+  }
+
+  getAllowedAvailabilities(): any[] {
+    try {
+      const module = this.getWindowsSecurityCredentialsUiModule();
+      if (module != null) {
+        return [
+          module.UserConsentVerifierAvailability.available,
+          module.UserConsentVerifierAvailability.deviceBusy,
+        ];
+      }
+    } catch {
+      /*Ignore error*/
     }
+    return [];
+  }
 
-    getWindowsMajorVersion(): number {
-        if (process.platform !== 'win32') {
-            return -1;
-        }
-        try {
-            const version = require('os').release();
-            return Number.parseInt(version.split('.')[0], 10);
-        } catch {
-            this.logService.error('Unable to resolve windows major version number');
-        }
-        return -1;
+  getWindowsMajorVersion(): number {
+    if (process.platform !== "win32") {
+      return -1;
+    }
+    try {
+      const version = require("os").release();
+      return Number.parseInt(version.split(".")[0], 10);
+    } catch {
+      this.logService.error("Unable to resolve windows major version number");
     }
+    return -1;
+  }
 }
diff --git a/jslib/electron/src/electronConstants.ts b/jslib/electron/src/electronConstants.ts
deleted file mode 100644
index 68be1956..00000000
--- a/jslib/electron/src/electronConstants.ts
+++ /dev/null
@@ -1,14 +0,0 @@
-export class ElectronConstants {
-    static readonly enableMinimizeToTrayKey: string = 'enableMinimizeToTray';
-    static readonly enableCloseToTrayKey: string = 'enableCloseToTray';
-    static readonly enableTrayKey: string = 'enableTray';
-    static readonly enableStartToTrayKey: string = 'enableStartToTrayKey';
-    static readonly enableAlwaysOnTopKey: string = 'enableAlwaysOnTopKey';
-    static readonly minimizeOnCopyToClipboardKey: string = 'minimizeOnCopyToClipboardKey';
-    static readonly enableBiometric: string = 'enabledBiometric';
-    static readonly enableBrowserIntegration: string = 'enableBrowserIntegration';
-    static readonly enableBrowserIntegrationFingerprint: string = 'enableBrowserIntegrationFingerprint';
-    static readonly alwaysShowDock: string = 'alwaysShowDock';
-    static readonly openAtLogin: string = 'openAtLogin';
-    static readonly noAutoPromptBiometricsText: string = 'noAutoPromptBiometricsText';
-}
diff --git a/jslib/electron/src/globals.d.ts b/jslib/electron/src/globals.d.ts
index d94bfae2..1b85bb1b 100644
--- a/jslib/electron/src/globals.d.ts
+++ b/jslib/electron/src/globals.d.ts
@@ -1 +1 @@
-declare module 'forcefocus';
+declare module "forcefocus";
diff --git a/jslib/electron/src/keytarStorageListener.ts b/jslib/electron/src/keytarStorageListener.ts
index fb263cb3..a8e8ec4a 100644
--- a/jslib/electron/src/keytarStorageListener.ts
+++ b/jslib/electron/src/keytarStorageListener.ts
@@ -1,56 +1,52 @@
-import { ipcMain } from 'electron';
+import { ipcMain } from "electron";
 
-import {
-    deletePassword,
-    getPassword,
-    setPassword,
-} from 'keytar';
+import { deletePassword, getPassword, setPassword } from "keytar";
 
-import { BiometricMain } from 'jslib-common/abstractions/biometric.main';
+import { BiometricMain } from "jslib-common/abstractions/biometric.main";
 
-const AuthRequiredSuffix = '_biometric';
-const AuthenticatedActions = ['getPassword'];
+const AuthRequiredSuffix = "_biometric";
+const AuthenticatedActions = ["getPassword"];
 
 export class KeytarStorageListener {
-    constructor(private serviceName: string, private biometricService: BiometricMain) { }
-
-    init() {
-        ipcMain.on('keytar', async (event: any, message: any) => {
-            try {
-                let serviceName = this.serviceName;
-                message.keySuffix = '_' + (message.keySuffix ?? '');
-                if (message.keySuffix !== '_') {
-                    serviceName += message.keySuffix;
-                }
-
-                const authenticationRequired = AuthenticatedActions.includes(message.action) &&
-                    AuthRequiredSuffix === message.keySuffix;
-                const authenticated = !authenticationRequired || await this.authenticateBiometric();
-
-                let val: string | boolean = null;
-                if (authenticated && message.action && message.key) {
-                    if (message.action === 'getPassword') {
-                        val = await getPassword(serviceName, message.key);
-                    } else if (message.action === 'hasPassword') {
-                        const result = await getPassword(serviceName, message.key);
-                        val = result != null;
-                    } else if (message.action === 'setPassword' && message.value) {
-                        await setPassword(serviceName, message.key, message.value);
-                    } else if (message.action === 'deletePassword') {
-                        await deletePassword(serviceName, message.key);
-                    }
-                }
-                event.returnValue = val;
-            } catch {
-                event.returnValue = null;
-            }
-        });
-    }
+  constructor(private serviceName: string, private biometricService: BiometricMain) {}
+
+  init() {
+    ipcMain.on("keytar", async (event: any, message: any) => {
+      try {
+        let serviceName = this.serviceName;
+        message.keySuffix = "_" + (message.keySuffix ?? "");
+        if (message.keySuffix !== "_") {
+          serviceName += message.keySuffix;
+        }
 
-    private async authenticateBiometric(): Promise<boolean> {
-        if (this.biometricService) {
-            return await this.biometricService.authenticateBiometric();
+        const authenticationRequired =
+          AuthenticatedActions.includes(message.action) && AuthRequiredSuffix === message.keySuffix;
+        const authenticated = !authenticationRequired || (await this.authenticateBiometric());
+
+        let val: string | boolean = null;
+        if (authenticated && message.action && message.key) {
+          if (message.action === "getPassword") {
+            val = await getPassword(serviceName, message.key);
+          } else if (message.action === "hasPassword") {
+            const result = await getPassword(serviceName, message.key);
+            val = result != null;
+          } else if (message.action === "setPassword" && message.value) {
+            await setPassword(serviceName, message.key, message.value);
+          } else if (message.action === "deletePassword") {
+            await deletePassword(serviceName, message.key);
+          }
         }
-        return false;
+        event.returnValue = val;
+      } catch {
+        event.returnValue = null;
+      }
+    });
+  }
+
+  private async authenticateBiometric(): Promise<boolean> {
+    if (this.biometricService) {
+      return await this.biometricService.authenticateBiometric();
     }
+    return false;
+  }
 }
diff --git a/jslib/electron/src/services/electronCrypto.service.ts b/jslib/electron/src/services/electronCrypto.service.ts
index dc602e0f..7eb01e49 100644
--- a/jslib/electron/src/services/electronCrypto.service.ts
+++ b/jslib/electron/src/services/electronCrypto.service.ts
@@ -1,66 +1,74 @@
-import { CryptoFunctionService } from 'jslib-common/abstractions/cryptoFunction.service';
-import { LogService } from 'jslib-common/abstractions/log.service';
-import { PlatformUtilsService } from 'jslib-common/abstractions/platformUtils.service';
-import { KeySuffixOptions, StorageService } from 'jslib-common/abstractions/storage.service';
-import { SymmetricCryptoKey } from 'jslib-common/models/domain/symmetricCryptoKey';
-import { CryptoService, Keys } from 'jslib-common/services/crypto.service';
+import { CryptoFunctionService } from "jslib-common/abstractions/cryptoFunction.service";
+import { LogService } from "jslib-common/abstractions/log.service";
+import { PlatformUtilsService } from "jslib-common/abstractions/platformUtils.service";
+import { StateService } from "jslib-common/abstractions/state.service";
 
-export class ElectronCryptoService extends CryptoService {
+import { CryptoService } from "jslib-common/services/crypto.service";
 
-    constructor(storageService: StorageService, secureStorageService: StorageService,
-        cryptoFunctionService: CryptoFunctionService, platformUtilService: PlatformUtilsService,
-        logService: LogService) {
-        super(storageService, secureStorageService, cryptoFunctionService, platformUtilService, logService);
-    }
+import { KeySuffixOptions } from "jslib-common/enums/keySuffixOptions";
+import { StorageLocation } from "jslib-common/enums/storageLocation";
+import { SymmetricCryptoKey } from "jslib-common/models/domain/symmetricCryptoKey";
 
-    async hasKeyStored(keySuffix: KeySuffixOptions): Promise<boolean> {
-        await this.upgradeSecurelyStoredKey();
-        return super.hasKeyStored(keySuffix);
-    }
+export class ElectronCryptoService extends CryptoService {
+  constructor(
+    cryptoFunctionService: CryptoFunctionService,
+    platformUtilService: PlatformUtilsService,
+    logService: LogService,
+    stateService: StateService
+  ) {
+    super(cryptoFunctionService, platformUtilService, logService, stateService);
+  }
 
-    protected async storeKey(key: SymmetricCryptoKey) {
-        if (await this.shouldStoreKey('auto')) {
-            await this.secureStorageService.save(Keys.key, key.keyB64, { keySuffix: 'auto' });
-        } else {
-            this.clearStoredKey('auto');
-        }
+  async hasKeyStored(keySuffix: KeySuffixOptions): Promise<boolean> {
+    await this.upgradeSecurelyStoredKey();
+    return super.hasKeyStored(keySuffix);
+  }
 
-        if (await this.shouldStoreKey('biometric')) {
-            await this.secureStorageService.save(Keys.key, key.keyB64, { keySuffix: 'biometric' });
-        } else {
-            this.clearStoredKey('biometric');
-        }
+  protected async storeKey(key: SymmetricCryptoKey, userId?: string) {
+    if (await this.shouldStoreKey(KeySuffixOptions.Auto, userId)) {
+      await this.stateService.setCryptoMasterKeyAuto(key.keyB64, { userId: userId });
+    } else {
+      this.clearStoredKey(KeySuffixOptions.Auto);
     }
 
-    protected async retrieveKeyFromStorage(keySuffix: KeySuffixOptions) {
-        await this.upgradeSecurelyStoredKey();
-        return super.retrieveKeyFromStorage(keySuffix);
+    if (await this.shouldStoreKey(KeySuffixOptions.Biometric, userId)) {
+      await this.stateService.setCryptoMasterKeyBiometric(key.keyB64, { userId: userId });
+    } else {
+      this.clearStoredKey(KeySuffixOptions.Biometric);
     }
+  }
 
-    /**
-     * @deprecated 4 Jun 2021 This is temporary upgrade method to move from a single shared stored key to
-     * multiple, unique stored keys for each use, e.g. never logout vs. biometric authentication.
-     */
-    private async upgradeSecurelyStoredKey() {
-        // attempt key upgrade, but if we fail just delete it. Keys will be stored property upon unlock anyway.
-        const key = await this.secureStorageService.get<string>(Keys.key);
+  protected async retrieveKeyFromStorage(keySuffix: KeySuffixOptions, userId?: string) {
+    await this.upgradeSecurelyStoredKey();
+    return super.retrieveKeyFromStorage(keySuffix, userId);
+  }
 
-        if (key == null) {
-            return;
-        }
+  /**
+   * @deprecated 4 Jun 2021 This is temporary upgrade method to move from a single shared stored key to
+   * multiple, unique stored keys for each use, e.g. never logout vs. biometric authentication.
+   */
+  private async upgradeSecurelyStoredKey() {
+    // attempt key upgrade, but if we fail just delete it. Keys will be stored property upon unlock anyway.
+    const key = await this.stateService.getCryptoMasterKeyB64();
 
-        try {
-            if (await this.shouldStoreKey('auto')) {
-                await this.secureStorageService.save(Keys.key, key, { keySuffix: 'auto' });
-            }
-            if (await this.shouldStoreKey('biometric')) {
-                await this.secureStorageService.save(Keys.key, key, { keySuffix: 'biometric' });
-            }
-        } catch (e) {
-            this.logService.error(`Encountered error while upgrading obsolete Bitwarden secure storage item:`);
-            this.logService.error(e);
-        }
+    if (key == null) {
+      return;
+    }
 
-        await this.secureStorageService.remove(Keys.key);
+    try {
+      if (await this.shouldStoreKey(KeySuffixOptions.Auto)) {
+        await this.stateService.setCryptoMasterKeyAuto(key);
+      }
+      if (await this.shouldStoreKey(KeySuffixOptions.Biometric)) {
+        await this.stateService.setCryptoMasterKeyBiometric(key);
+      }
+    } catch (e) {
+      this.logService.error(
+        `Encountered error while upgrading obsolete Bitwarden secure storage item:`
+      );
+      this.logService.error(e);
     }
+
+    await this.stateService.setCryptoMasterKeyB64(null);
+  }
 }
diff --git a/jslib/electron/src/services/electronLog.service.ts b/jslib/electron/src/services/electronLog.service.ts
index 57eeb0d4..008678ae 100644
--- a/jslib/electron/src/services/electronLog.service.ts
+++ b/jslib/electron/src/services/electronLog.service.ts
@@ -1,46 +1,45 @@
-import log from 'electron-log';
-import * as path from 'path';
+import log from "electron-log";
+import * as path from "path";
 
-import { isDev } from '../utils';
+import { isDev } from "../utils";
 
-import { LogLevelType } from 'jslib-common/enums/logLevelType';
+import { LogLevelType } from "jslib-common/enums/logLevelType";
 
-import { ConsoleLogService as BaseLogService } from 'jslib-common/services/consoleLog.service';
+import { ConsoleLogService as BaseLogService } from "jslib-common/services/consoleLog.service";
 
 export class ElectronLogService extends BaseLogService {
+  constructor(protected filter: (level: LogLevelType) => boolean = null, logDir: string = null) {
+    super(isDev(), filter);
+    if (log.transports == null) {
+      return;
+    }
 
-    constructor(protected filter: (level: LogLevelType) => boolean = null, logDir: string = null) {
-        super(isDev(), filter);
-        if (log.transports == null) {
-            return;
-        }
-
-        log.transports.file.level = 'info';
-        if (logDir != null) {
-            log.transports.file.file = path.join(logDir, 'app.log');
-        }
+    log.transports.file.level = "info";
+    if (logDir != null) {
+      log.transports.file.file = path.join(logDir, "app.log");
     }
+  }
 
-    write(level: LogLevelType, message: string) {
-        if (this.filter != null && this.filter(level)) {
-            return;
-        }
+  write(level: LogLevelType, message: string) {
+    if (this.filter != null && this.filter(level)) {
+      return;
+    }
 
-        switch (level) {
-            case LogLevelType.Debug:
-                log.debug(message);
-                break;
-            case LogLevelType.Info:
-                log.info(message);
-                break;
-            case LogLevelType.Warning:
-                log.warn(message);
-                break;
-            case LogLevelType.Error:
-                log.error(message);
-                break;
-            default:
-                break;
-        }
+    switch (level) {
+      case LogLevelType.Debug:
+        log.debug(message);
+        break;
+      case LogLevelType.Info:
+        log.info(message);
+        break;
+      case LogLevelType.Warning:
+        log.warn(message);
+        break;
+      case LogLevelType.Error:
+        log.error(message);
+        break;
+      default:
+        break;
     }
+  }
 }
diff --git a/jslib/electron/src/services/electronMainMessaging.service.ts b/jslib/electron/src/services/electronMainMessaging.service.ts
index d58d3b09..99dd5b32 100644
--- a/jslib/electron/src/services/electronMainMessaging.service.ts
+++ b/jslib/electron/src/services/electronMainMessaging.service.ts
@@ -1,58 +1,66 @@
-import { app, dialog, ipcMain, Menu, MenuItem, nativeTheme } from 'electron';
-import { promises as fs } from 'fs';
-import { MessagingService } from 'jslib-common/abstractions/messaging.service';
-import { RendererMenuItem } from '../utils';
+import { app, dialog, ipcMain, Menu, MenuItem, nativeTheme } from "electron";
+import { promises as fs } from "fs";
+import { MessagingService } from "jslib-common/abstractions/messaging.service";
+import { RendererMenuItem } from "../utils";
 
-import { ThemeType } from 'jslib-common/enums/themeType';
+import { ThemeType } from "jslib-common/enums/themeType";
 
-import { WindowMain } from '../window.main';
+import { WindowMain } from "../window.main";
 
 export class ElectronMainMessagingService implements MessagingService {
-    constructor(private windowMain: WindowMain, private onMessage: (message: any) => void) {
-        ipcMain.handle('appVersion', () => {
-            return app.getVersion();
-        });
+  constructor(private windowMain: WindowMain, private onMessage: (message: any) => void) {
+    ipcMain.handle("appVersion", () => {
+      return app.getVersion();
+    });
 
-        ipcMain.handle('systemTheme', () => {
-            return nativeTheme.shouldUseDarkColors ? ThemeType.Dark : ThemeType.Light;
-        });
+    ipcMain.handle("systemTheme", () => {
+      return nativeTheme.shouldUseDarkColors ? ThemeType.Dark : ThemeType.Light;
+    });
 
-        ipcMain.handle('showMessageBox', (event, options) => {
-            return dialog.showMessageBox(options);
-        });
+    ipcMain.handle("showMessageBox", (event, options) => {
+      return dialog.showMessageBox(options);
+    });
 
-        ipcMain.handle('openContextMenu', (event, options: {menu: RendererMenuItem[]}) => {
-            return new Promise(resolve => {
-                const menu = new Menu();
-                options.menu.forEach((m, index) => {
-                    menu.append(new MenuItem({
-                        label: m.label,
-                        type: m.type,
-                        click: () => {
-                            resolve(index);
-                        },
-                    }));
-                });
-                menu.popup({ window: windowMain.win, callback: () => {
-                    resolve(-1);
-                }});
-            });
+    ipcMain.handle("openContextMenu", (event, options: { menu: RendererMenuItem[] }) => {
+      return new Promise((resolve) => {
+        const menu = new Menu();
+        options.menu.forEach((m, index) => {
+          menu.append(
+            new MenuItem({
+              label: m.label,
+              type: m.type,
+              click: () => {
+                resolve(index);
+              },
+            })
+          );
         });
-
-        ipcMain.handle('windowVisible', () => {
-            return windowMain.win?.isVisible();
+        menu.popup({
+          window: windowMain.win,
+          callback: () => {
+            resolve(-1);
+          },
         });
+      });
+    });
 
-        nativeTheme.on('updated', () => {
-            windowMain.win?.webContents.send('systemThemeUpdated', nativeTheme.shouldUseDarkColors ? ThemeType.Dark : ThemeType.Light);
-        });
-    }
+    ipcMain.handle("windowVisible", () => {
+      return windowMain.win?.isVisible();
+    });
+
+    nativeTheme.on("updated", () => {
+      windowMain.win?.webContents.send(
+        "systemThemeUpdated",
+        nativeTheme.shouldUseDarkColors ? ThemeType.Dark : ThemeType.Light
+      );
+    });
+  }
 
-    send(subscriber: string, arg: any = {}) {
-        const message = Object.assign({}, { command: subscriber }, arg);
-        this.onMessage(message);
-        if (this.windowMain.win != null) {
-            this.windowMain.win.webContents.send('messagingService', message);
-        }
+  send(subscriber: string, arg: any = {}) {
+    const message = Object.assign({}, { command: subscriber }, arg);
+    this.onMessage(message);
+    if (this.windowMain.win != null) {
+      this.windowMain.win.webContents.send("messagingService", message);
     }
+  }
 }
diff --git a/jslib/electron/src/services/electronPlatformUtils.service.ts b/jslib/electron/src/services/electronPlatformUtils.service.ts
index 7ffe3e3f..7ec81327 100644
--- a/jslib/electron/src/services/electronPlatformUtils.service.ts
+++ b/jslib/electron/src/services/electronPlatformUtils.service.ts
@@ -1,214 +1,218 @@
-import {
-    clipboard,
-    ipcRenderer,
-    shell,
-} from 'electron';
+import { clipboard, ipcRenderer, shell } from "electron";
 
-import {
-    isDev,
-    isMacAppStore,
-} from '../utils';
+import { isDev, isMacAppStore } from "../utils";
 
-import { DeviceType } from 'jslib-common/enums/deviceType';
-import { ThemeType } from 'jslib-common/enums/themeType';
+import { DeviceType } from "jslib-common/enums/deviceType";
+import { ThemeType } from "jslib-common/enums/themeType";
 
-import { I18nService } from 'jslib-common/abstractions/i18n.service';
-import { MessagingService } from 'jslib-common/abstractions/messaging.service';
-import { PlatformUtilsService } from 'jslib-common/abstractions/platformUtils.service';
-import { StorageService } from 'jslib-common/abstractions/storage.service';
-
-import { ConstantsService } from 'jslib-common/services/constants.service';
-
-import { ElectronConstants } from '../electronConstants';
+import { I18nService } from "jslib-common/abstractions/i18n.service";
+import { MessagingService } from "jslib-common/abstractions/messaging.service";
+import { PlatformUtilsService } from "jslib-common/abstractions/platformUtils.service";
+import { StateService } from "jslib-common/abstractions/state.service";
 
 export class ElectronPlatformUtilsService implements PlatformUtilsService {
-    identityClientId: string;
-
-    private deviceCache: DeviceType = null;
-
-    constructor(protected i18nService: I18nService, private messagingService: MessagingService,
-        private isDesktopApp: boolean, private storageService: StorageService) {
-        this.identityClientId = isDesktopApp ? 'desktop' : 'connector';
-    }
-
-    getDevice(): DeviceType {
-        if (!this.deviceCache) {
-            switch (process.platform) {
-                case 'win32':
-                    this.deviceCache = DeviceType.WindowsDesktop;
-                    break;
-                case 'darwin':
-                    this.deviceCache = DeviceType.MacOsDesktop;
-                    break;
-                case 'linux':
-                default:
-                    this.deviceCache = DeviceType.LinuxDesktop;
-                    break;
-            }
-        }
-
-        return this.deviceCache;
-    }
-
-    getDeviceString(): string {
-        const device = DeviceType[this.getDevice()].toLowerCase();
-        return device.replace('desktop', '');
-    }
-
-    isFirefox(): boolean {
-        return false;
-    }
-
-    isChrome(): boolean {
-        return true;
-    }
-
-    isEdge(): boolean {
-        return false;
-    }
-
-    isOpera(): boolean {
-        return false;
-    }
-
-    isVivaldi(): boolean {
-        return false;
-    }
-
-    isSafari(): boolean {
-        return false;
-    }
-
-    isIE(): boolean {
-        return false;
-    }
-
-    isMacAppStore(): boolean {
-        return isMacAppStore();
-    }
-
-    isViewOpen(): Promise<boolean> {
-        return Promise.resolve(false);
-    }
-
-    launchUri(uri: string, options?: any): void {
-        shell.openExternal(uri);
-    }
-
-    saveFile(win: Window, blobData: any, blobOptions: any, fileName: string): void {
-        const blob = new Blob([blobData], blobOptions);
-        const a = win.document.createElement('a');
-        a.href = URL.createObjectURL(blob);
-        a.download = fileName;
-        win.document.body.appendChild(a);
-        a.click();
-        win.document.body.removeChild(a);
-    }
-
-    getApplicationVersion(): Promise<string> {
-        return ipcRenderer.invoke('appVersion');
-    }
-
-    // Temporarily restricted to only Windows until https://github.com/electron/electron/pull/28349
-    // has been merged and an updated electron build is available.
-    supportsWebAuthn(win: Window): boolean {
-        return process.platform === 'win32';
-    }
-
-    supportsDuo(): boolean {
-        return true;
-    }
-
-    showToast(type: 'error' | 'success' | 'warning' | 'info', title: string, text: string | string[],
-        options?: any): void {
-        this.messagingService.send('showToast', {
-            text: text,
-            title: title,
-            type: type,
-            options: options,
-        });
-    }
-
-    async showDialog(text: string, title?: string, confirmText?: string, cancelText?: string, type?: string):
-        Promise<boolean> {
-        const buttons = [confirmText == null ? this.i18nService.t('ok') : confirmText];
-        if (cancelText != null) {
-            buttons.push(cancelText);
-        }
-
-        const result = await ipcRenderer.invoke('showMessageBox', {
-            type: type,
-            title: title,
-            message: title,
-            detail: text,
-            buttons: buttons,
-            cancelId: buttons.length === 2 ? 1 : null,
-            defaultId: 0,
-            noLink: true,
-        });
-
-        return Promise.resolve(result.response === 0);
-    }
-
-    isDev(): boolean {
-        return isDev();
-    }
-
-    isSelfHost(): boolean {
-        return false;
-    }
-
-    copyToClipboard(text: string, options?: any): void {
-        const type = options ? options.type : null;
-        const clearing = options ? !!options.clearing : false;
-        const clearMs: number = options && options.clearMs ? options.clearMs : null;
-        clipboard.writeText(text, type);
-        if (!clearing) {
-            this.messagingService.send('copiedToClipboard', {
-                clipboardValue: text,
-                clearMs: clearMs,
-                type: type,
-                clearing: clearing,
-            });
-        }
-    }
-
-    readFromClipboard(options?: any): Promise<string> {
-        const type = options ? options.type : null;
-        return Promise.resolve(clipboard.readText(type));
-    }
-
-    supportsBiometric(): Promise<boolean> {
-        return this.storageService.get(ElectronConstants.enableBiometric);
-    }
-
-    authenticateBiometric(): Promise<boolean> {
-        return new Promise(resolve => {
-            const val = ipcRenderer.sendSync('biometric', {
-                action: 'authenticate',
-            });
-            resolve(val);
-        });
-    }
-
-    getDefaultSystemTheme() {
-        return ipcRenderer.invoke('systemTheme');
-    }
-
-    onDefaultSystemThemeChange(callback: ((theme: ThemeType.Light | ThemeType.Dark) => unknown)) {
-        ipcRenderer.on('systemThemeUpdated', (event, theme: ThemeType.Light | ThemeType.Dark) => callback(theme));
-    }
-
-    async getEffectiveTheme() {
-        const theme = await this.storageService.get<ThemeType>(ConstantsService.themeKey);
-        if (theme == null || theme === ThemeType.System) {
-            return this.getDefaultSystemTheme();
-        } else {
-            return theme;
-        }
-    }
-
-    supportsSecureStorage(): boolean {
-        return true;
-    }
+  identityClientId: string;
+
+  private deviceCache: DeviceType = null;
+
+  constructor(
+    protected i18nService: I18nService,
+    private messagingService: MessagingService,
+    private isDesktopApp: boolean,
+    private stateService: StateService
+  ) {
+    this.identityClientId = isDesktopApp ? "desktop" : "connector";
+  }
+
+  getDevice(): DeviceType {
+    if (!this.deviceCache) {
+      switch (process.platform) {
+        case "win32":
+          this.deviceCache = DeviceType.WindowsDesktop;
+          break;
+        case "darwin":
+          this.deviceCache = DeviceType.MacOsDesktop;
+          break;
+        case "linux":
+        default:
+          this.deviceCache = DeviceType.LinuxDesktop;
+          break;
+      }
+    }
+
+    return this.deviceCache;
+  }
+
+  getDeviceString(): string {
+    const device = DeviceType[this.getDevice()].toLowerCase();
+    return device.replace("desktop", "");
+  }
+
+  isFirefox(): boolean {
+    return false;
+  }
+
+  isChrome(): boolean {
+    return true;
+  }
+
+  isEdge(): boolean {
+    return false;
+  }
+
+  isOpera(): boolean {
+    return false;
+  }
+
+  isVivaldi(): boolean {
+    return false;
+  }
+
+  isSafari(): boolean {
+    return false;
+  }
+
+  isIE(): boolean {
+    return false;
+  }
+
+  isMacAppStore(): boolean {
+    return isMacAppStore();
+  }
+
+  isViewOpen(): Promise<boolean> {
+    return Promise.resolve(false);
+  }
+
+  launchUri(uri: string, options?: any): void {
+    shell.openExternal(uri);
+  }
+
+  saveFile(win: Window, blobData: any, blobOptions: any, fileName: string): void {
+    const blob = new Blob([blobData], blobOptions);
+    const a = win.document.createElement("a");
+    a.href = URL.createObjectURL(blob);
+    a.download = fileName;
+    win.document.body.appendChild(a);
+    a.click();
+    win.document.body.removeChild(a);
+  }
+
+  getApplicationVersion(): Promise<string> {
+    return ipcRenderer.invoke("appVersion");
+  }
+
+  // Temporarily restricted to only Windows until https://github.com/electron/electron/pull/28349
+  // has been merged and an updated electron build is available.
+  supportsWebAuthn(win: Window): boolean {
+    return process.platform === "win32";
+  }
+
+  supportsDuo(): boolean {
+    return true;
+  }
+
+  showToast(
+    type: "error" | "success" | "warning" | "info",
+    title: string,
+    text: string | string[],
+    options?: any
+  ): void {
+    this.messagingService.send("showToast", {
+      text: text,
+      title: title,
+      type: type,
+      options: options,
+    });
+  }
+
+  async showDialog(
+    text: string,
+    title?: string,
+    confirmText?: string,
+    cancelText?: string,
+    type?: string
+  ): Promise<boolean> {
+    const buttons = [confirmText == null ? this.i18nService.t("ok") : confirmText];
+    if (cancelText != null) {
+      buttons.push(cancelText);
+    }
+
+    const result = await ipcRenderer.invoke("showMessageBox", {
+      type: type,
+      title: title,
+      message: title,
+      detail: text,
+      buttons: buttons,
+      cancelId: buttons.length === 2 ? 1 : null,
+      defaultId: 0,
+      noLink: true,
+    });
+
+    return Promise.resolve(result.response === 0);
+  }
+
+  isDev(): boolean {
+    return isDev();
+  }
+
+  isSelfHost(): boolean {
+    return false;
+  }
+
+  copyToClipboard(text: string, options?: any): void {
+    const type = options ? options.type : null;
+    const clearing = options ? !!options.clearing : false;
+    const clearMs: number = options && options.clearMs ? options.clearMs : null;
+    clipboard.writeText(text, type);
+    if (!clearing) {
+      this.messagingService.send("copiedToClipboard", {
+        clipboardValue: text,
+        clearMs: clearMs,
+        type: type,
+        clearing: clearing,
+      });
+    }
+  }
+
+  readFromClipboard(options?: any): Promise<string> {
+    const type = options ? options.type : null;
+    return Promise.resolve(clipboard.readText(type));
+  }
+
+  async supportsBiometric(): Promise<boolean> {
+    return await this.stateService.getEnableBiometric();
+  }
+
+  authenticateBiometric(): Promise<boolean> {
+    return new Promise((resolve) => {
+      const val = ipcRenderer.sendSync("biometric", {
+        action: "authenticate",
+      });
+      resolve(val);
+    });
+  }
+
+  getDefaultSystemTheme() {
+    return ipcRenderer.invoke("systemTheme");
+  }
+
+  onDefaultSystemThemeChange(callback: (theme: ThemeType.Light | ThemeType.Dark) => unknown) {
+    ipcRenderer.on("systemThemeUpdated", (event, theme: ThemeType.Light | ThemeType.Dark) =>
+      callback(theme)
+    );
+  }
+
+  async getEffectiveTheme() {
+    const theme = await this.stateService.getTheme();
+    if (theme == null || theme === ThemeType.System) {
+      return this.getDefaultSystemTheme();
+    } else {
+      return theme;
+    }
+  }
+
+  supportsSecureStorage(): boolean {
+    return true;
+  }
 }
diff --git a/jslib/electron/src/services/electronRendererMessaging.service.ts b/jslib/electron/src/services/electronRendererMessaging.service.ts
index c9509074..89350a65 100644
--- a/jslib/electron/src/services/electronRendererMessaging.service.ts
+++ b/jslib/electron/src/services/electronRendererMessaging.service.ts
@@ -1,26 +1,26 @@
-import { ipcRenderer } from 'electron';
+import { ipcRenderer } from "electron";
 
-import { BroadcasterService } from 'jslib-common/abstractions/broadcaster.service';
-import { MessagingService } from 'jslib-common/abstractions/messaging.service';
+import { BroadcasterService } from "jslib-common/abstractions/broadcaster.service";
+import { MessagingService } from "jslib-common/abstractions/messaging.service";
 
 export class ElectronRendererMessagingService implements MessagingService {
-    constructor(private broadcasterService: BroadcasterService) {
-        ipcRenderer.on('messagingService', async (event: any, message: any) => {
-            if (message.command) {
-                this.sendMessage(message.command, message, false);
-            }
-        });
-    }
+  constructor(private broadcasterService: BroadcasterService) {
+    ipcRenderer.on("messagingService", async (event: any, message: any) => {
+      if (message.command) {
+        this.sendMessage(message.command, message, false);
+      }
+    });
+  }
 
-    send(subscriber: string, arg: any = {}) {
-        this.sendMessage(subscriber, arg, true);
-    }
+  send(subscriber: string, arg: any = {}) {
+    this.sendMessage(subscriber, arg, true);
+  }
 
-    private sendMessage(subscriber: string, arg: any = {}, toMain: boolean) {
-        const message = Object.assign({}, { command: subscriber }, arg);
-        this.broadcasterService.send(message);
-        if (toMain) {
-            ipcRenderer.send('messagingService', message);
-        }
+  private sendMessage(subscriber: string, arg: any = {}, toMain: boolean) {
+    const message = Object.assign({}, { command: subscriber }, arg);
+    this.broadcasterService.send(message);
+    if (toMain) {
+      ipcRenderer.send("messagingService", message);
     }
+  }
 }
diff --git a/jslib/electron/src/services/electronRendererSecureStorage.service.ts b/jslib/electron/src/services/electronRendererSecureStorage.service.ts
index fb718058..5d293350 100644
--- a/jslib/electron/src/services/electronRendererSecureStorage.service.ts
+++ b/jslib/electron/src/services/electronRendererSecureStorage.service.ts
@@ -1,42 +1,44 @@
-import { ipcRenderer } from 'electron';
+import { ipcRenderer } from "electron";
 
-import { StorageService, StorageServiceOptions } from 'jslib-common/abstractions/storage.service';
+import { StorageService } from "jslib-common/abstractions/storage.service";
+
+import { StorageOptions } from "jslib-common/models/domain/storageOptions";
 
 export class ElectronRendererSecureStorageService implements StorageService {
-    async get<T>(key: string, options?: StorageServiceOptions): Promise<T> {
-        const val = ipcRenderer.sendSync('keytar', {
-            action: 'getPassword',
-            key: key,
-            keySuffix: options?.keySuffix ?? '',
-        });
-        return Promise.resolve(val != null ? JSON.parse(val) as T : null);
-    }
+  async get<T>(key: string, options?: StorageOptions): Promise<T> {
+    const val = ipcRenderer.sendSync("keytar", {
+      action: "getPassword",
+      key: key,
+      keySuffix: options?.keySuffix ?? "",
+    });
+    return Promise.resolve(val != null ? (JSON.parse(val) as T) : null);
+  }
 
-    async has(key: string, options?: StorageServiceOptions): Promise<boolean> {
-        const val = ipcRenderer.sendSync('keytar', {
-            action: 'hasPassword',
-            key: key,
-            keySuffix: options?.keySuffix ?? '',
-        });
-        return Promise.resolve(!!val);
-    }
+  async has(key: string, options?: StorageOptions): Promise<boolean> {
+    const val = ipcRenderer.sendSync("keytar", {
+      action: "hasPassword",
+      key: key,
+      keySuffix: options?.keySuffix ?? "",
+    });
+    return Promise.resolve(!!val);
+  }
 
-    async save(key: string, obj: any, options?: StorageServiceOptions): Promise<any> {
-        ipcRenderer.sendSync('keytar', {
-            action: 'setPassword',
-            key: key,
-            keySuffix: options?.keySuffix ?? '',
-            value: JSON.stringify(obj),
-        });
-        return Promise.resolve();
-    }
+  async save(key: string, obj: any, options?: StorageOptions): Promise<any> {
+    ipcRenderer.sendSync("keytar", {
+      action: "setPassword",
+      key: key,
+      keySuffix: options?.keySuffix ?? "",
+      value: JSON.stringify(obj),
+    });
+    return Promise.resolve();
+  }
 
-    async remove(key: string, options?: StorageServiceOptions): Promise<any> {
-        ipcRenderer.sendSync('keytar', {
-            action: 'deletePassword',
-            key: key,
-            keySuffix: options?.keySuffix ?? '',
-        });
-        return Promise.resolve();
-    }
+  async remove(key: string, options?: StorageOptions): Promise<any> {
+    ipcRenderer.sendSync("keytar", {
+      action: "deletePassword",
+      key: key,
+      keySuffix: options?.keySuffix ?? "",
+    });
+    return Promise.resolve();
+  }
 }
diff --git a/jslib/electron/src/services/electronRendererStorage.service.ts b/jslib/electron/src/services/electronRendererStorage.service.ts
index e1554a7e..69436bfe 100644
--- a/jslib/electron/src/services/electronRendererStorage.service.ts
+++ b/jslib/electron/src/services/electronRendererStorage.service.ts
@@ -1,34 +1,34 @@
-import { ipcRenderer } from 'electron';
+import { ipcRenderer } from "electron";
 
-import { StorageService } from 'jslib-common/abstractions/storage.service';
+import { StorageService } from "jslib-common/abstractions/storage.service";
 
 export class ElectronRendererStorageService implements StorageService {
-    get<T>(key: string): Promise<T> {
-        return ipcRenderer.invoke('storageService', {
-            action: 'get',
-            key: key,
-        });
-    }
+  get<T>(key: string): Promise<T> {
+    return ipcRenderer.invoke("storageService", {
+      action: "get",
+      key: key,
+    });
+  }
 
-    has(key: string): Promise<boolean> {
-        return ipcRenderer.invoke('storageService', {
-            action: 'has',
-            key: key,
-        });
-    }
+  has(key: string): Promise<boolean> {
+    return ipcRenderer.invoke("storageService", {
+      action: "has",
+      key: key,
+    });
+  }
 
-    save(key: string, obj: any): Promise<any> {
-        return ipcRenderer.invoke('storageService', {
-            action: 'save',
-            key: key,
-            obj: obj,
-        });
-    }
+  save(key: string, obj: any): Promise<any> {
+    return ipcRenderer.invoke("storageService", {
+      action: "save",
+      key: key,
+      obj: obj,
+    });
+  }
 
-    remove(key: string): Promise<any> {
-        return ipcRenderer.invoke('storageService', {
-            action: 'remove',
-            key: key,
-        });
-    }
+  remove(key: string): Promise<any> {
+    return ipcRenderer.invoke("storageService", {
+      action: "remove",
+      key: key,
+    });
+  }
 }
diff --git a/jslib/electron/src/services/electronStorage.service.ts b/jslib/electron/src/services/electronStorage.service.ts
index 5bf8d26c..08d49ed0 100644
--- a/jslib/electron/src/services/electronStorage.service.ts
+++ b/jslib/electron/src/services/electronStorage.service.ts
@@ -1,60 +1,60 @@
-import { ipcMain, ipcRenderer } from 'electron';
-import * as fs from 'fs';
+import { ipcMain, ipcRenderer } from "electron";
+import * as fs from "fs";
 
-import { StorageService } from 'jslib-common/abstractions/storage.service';
+import { StorageService } from "jslib-common/abstractions/storage.service";
 
-import { NodeUtils } from 'jslib-common/misc/nodeUtils';
+import { NodeUtils } from "jslib-common/misc/nodeUtils";
 
 // tslint:disable-next-line
-const Store = require('electron-store');
+const Store = require("electron-store");
 
 export class ElectronStorageService implements StorageService {
-    private store: any;
-
-    constructor(dir: string, defaults = {}) {
-        if (!fs.existsSync(dir)) {
-            NodeUtils.mkdirpSync(dir, '700');
-        }
-        const storeConfig: any = {
-            defaults: defaults,
-            name: 'data',
-        };
-        this.store = new Store(storeConfig);
-
-        ipcMain.handle('storageService', (event, options) => {
-            switch (options.action) {
-                case 'get':
-                    return this.get(options.key);
-                case 'has':
-                    return this.has(options.key);
-                case 'save':
-                    return this.save(options.key, options.obj);
-                case 'remove':
-                    return this.remove(options.key);
-            }
-        });
-    }
-
-    get<T>(key: string): Promise<T> {
-        const val = this.store.get(key) as T;
-        return Promise.resolve(val != null ? val : null);
-    }
+  private store: any;
 
-    has(key: string): Promise<boolean> {
-        const val = this.store.get(key);
-        return Promise.resolve(val != null);
+  constructor(dir: string, defaults = {}) {
+    if (!fs.existsSync(dir)) {
+      NodeUtils.mkdirpSync(dir, "700");
     }
-
-    save(key: string, obj: any): Promise<any> {
-        if (obj instanceof Set) {
-            obj = Array.from(obj);
-        }
-        this.store.set(key, obj);
-        return Promise.resolve();
-    }
-
-    remove(key: string): Promise<any> {
-        this.store.delete(key);
-        return Promise.resolve();
+    const storeConfig: any = {
+      defaults: defaults,
+      name: "data",
+    };
+    this.store = new Store(storeConfig);
+
+    ipcMain.handle("storageService", (event, options) => {
+      switch (options.action) {
+        case "get":
+          return this.get(options.key);
+        case "has":
+          return this.has(options.key);
+        case "save":
+          return this.save(options.key, options.obj);
+        case "remove":
+          return this.remove(options.key);
+      }
+    });
+  }
+
+  get<T>(key: string): Promise<T> {
+    const val = this.store.get(key) as T;
+    return Promise.resolve(val != null ? val : null);
+  }
+
+  has(key: string): Promise<boolean> {
+    const val = this.store.get(key);
+    return Promise.resolve(val != null);
+  }
+
+  save(key: string, obj: any): Promise<any> {
+    if (obj instanceof Set) {
+      obj = Array.from(obj);
     }
+    this.store.set(key, obj);
+    return Promise.resolve();
+  }
+
+  remove(key: string): Promise<any> {
+    this.store.delete(key);
+    return Promise.resolve();
+  }
 }
diff --git a/jslib/electron/src/tray.main.ts b/jslib/electron/src/tray.main.ts
index 30df8410..c5c3f661 100644
--- a/jslib/electron/src/tray.main.ts
+++ b/jslib/electron/src/tray.main.ts
@@ -1,187 +1,185 @@
-import {
-    app,
-    BrowserWindow,
-    Menu,
-    MenuItem,
-    MenuItemConstructorOptions,
-    nativeImage,
-    Tray,
-} from 'electron';
-import * as path from 'path';
-
-import { I18nService } from 'jslib-common/abstractions/i18n.service';
-import { StorageService } from 'jslib-common/abstractions/storage.service';
-
-import { ElectronConstants } from './electronConstants';
-import { WindowMain } from './window.main';
+import { app, BrowserWindow, Menu, MenuItemConstructorOptions, nativeImage, Tray } from "electron";
+import * as path from "path";
 
-export class TrayMain {
-    contextMenu: Menu;
-
-    private appName: string;
-    private tray: Tray;
-    private icon: string | Electron.NativeImage;
-    private pressedIcon: Electron.NativeImage;
-
-    constructor(private windowMain: WindowMain, private i18nService: I18nService,
-        private storageService: StorageService) {
-        if (process.platform === 'win32') {
-            this.icon = path.join(__dirname, '/images/icon.ico');
-        } else if (process.platform === 'darwin') {
-            const nImage = nativeImage.createFromPath(path.join(__dirname, '/images/icon-template.png'));
-            nImage.setTemplateImage(true);
-            this.icon = nImage;
-            this.pressedIcon = nativeImage.createFromPath(path.join(__dirname, '/images/icon-highlight.png'));
-        } else {
-            this.icon = path.join(__dirname, '/images/icon.png');
-        }
-    }
+import { I18nService } from "jslib-common/abstractions/i18n.service";
+import { StateService } from "jslib-common/abstractions/state.service";
 
-    async init(appName: string, additionalMenuItems: MenuItemConstructorOptions[] = null) {
-        this.appName = appName;
-
-        const menuItemOptions: MenuItemConstructorOptions[] = [{
-            label: this.i18nService.t('showHide'),
-            click: () => this.toggleWindow(),
-        },
-        { type: 'separator' },
-        {
-            label: this.i18nService.t('exit'),
-            click: () => this.closeWindow(),
-        }];
-
-        if (additionalMenuItems != null) {
-            menuItemOptions.splice(1, 0, ...additionalMenuItems);
-        }
+import { WindowMain } from "./window.main";
 
-        this.contextMenu = Menu.buildFromTemplate(menuItemOptions);
-        if (await this.storageService.get<boolean>(ElectronConstants.enableTrayKey)) {
-            this.showTray();
-        }
+export class TrayMain {
+  contextMenu: Menu;
+
+  private appName: string;
+  private tray: Tray;
+  private icon: string | Electron.NativeImage;
+  private pressedIcon: Electron.NativeImage;
+
+  constructor(
+    private windowMain: WindowMain,
+    private i18nService: I18nService,
+    private stateService: StateService
+  ) {
+    if (process.platform === "win32") {
+      this.icon = path.join(__dirname, "/images/icon.ico");
+    } else if (process.platform === "darwin") {
+      const nImage = nativeImage.createFromPath(path.join(__dirname, "/images/icon-template.png"));
+      nImage.setTemplateImage(true);
+      this.icon = nImage;
+      this.pressedIcon = nativeImage.createFromPath(
+        path.join(__dirname, "/images/icon-highlight.png")
+      );
+    } else {
+      this.icon = path.join(__dirname, "/images/icon.png");
     }
-
-    setupWindowListeners(win: BrowserWindow) {
-        win.on('minimize', async (e: Event) => {
-            if (await this.storageService.get<boolean>(ElectronConstants.enableMinimizeToTrayKey)) {
-                e.preventDefault();
-                this.hideToTray();
-            }
-        });
-
-        win.on('close', async (e: Event) => {
-            if (await this.storageService.get<boolean>(ElectronConstants.enableCloseToTrayKey)) {
-                if (!this.windowMain.isQuitting) {
-                    e.preventDefault();
-                    this.hideToTray();
-                }
-            }
-        });
-
-        win.on('show', async (e: Event) => {
-            const enableTray = await this.storageService.get<boolean>(ElectronConstants.enableTrayKey);
-            if (!enableTray) {
-                setTimeout(() =>  this.removeTray(false), 100);
-            }
-        });
+  }
+
+  async init(appName: string, additionalMenuItems: MenuItemConstructorOptions[] = null) {
+    this.appName = appName;
+
+    const menuItemOptions: MenuItemConstructorOptions[] = [
+      {
+        label: this.i18nService.t("showHide"),
+        click: () => this.toggleWindow(),
+      },
+      { type: "separator" },
+      {
+        label: this.i18nService.t("exit"),
+        click: () => this.closeWindow(),
+      },
+    ];
+
+    if (additionalMenuItems != null) {
+      menuItemOptions.splice(1, 0, ...additionalMenuItems);
     }
 
-    removeTray(showWindow = true) {
-        // Due to https://github.com/electron/electron/issues/17622
-        // we cannot destroy the tray icon on linux.
-        if (this.tray != null && process.platform !== 'linux') {
-            this.tray.destroy();
-            this.tray = null;
-        }
-
-        if (showWindow && this.windowMain.win != null && !this.windowMain.win.isVisible()) {
-            this.windowMain.win.show();
-        }
+    this.contextMenu = Menu.buildFromTemplate(menuItemOptions);
+    if (await this.stateService.getEnableTray()) {
+      this.showTray();
     }
-
-    async hideToTray() {
-        this.showTray();
-        if (this.windowMain.win != null) {
-            this.windowMain.win.hide();
-        }
-        if (this.isDarwin() && !await this.storageService.get<boolean>(ElectronConstants.alwaysShowDock)) {
-            this.hideDock();
+  }
+
+  setupWindowListeners(win: BrowserWindow) {
+    win.on("minimize", async (e: Event) => {
+      if (await this.stateService.getEnableMinimizeToTray()) {
+        e.preventDefault();
+        this.hideToTray();
+      }
+    });
+
+    win.on("close", async (e: Event) => {
+      if (await this.stateService.getEnableCloseToTray()) {
+        if (!this.windowMain.isQuitting) {
+          e.preventDefault();
+          this.hideToTray();
         }
+      }
+    });
+
+    win.on("show", async (e: Event) => {
+      const enableTray = await this.stateService.getEnableTray();
+      if (!enableTray) {
+        setTimeout(() => this.removeTray(false), 100);
+      }
+    });
+  }
+
+  removeTray(showWindow = true) {
+    // Due to https://github.com/electron/electron/issues/17622
+    // we cannot destroy the tray icon on linux.
+    if (this.tray != null && process.platform !== "linux") {
+      this.tray.destroy();
+      this.tray = null;
     }
 
-    restoreFromTray() {
-        if (this.windowMain.win == null || !this.windowMain.win.isVisible()) {
-            this.toggleWindow();
-        }
+    if (showWindow && this.windowMain.win != null && !this.windowMain.win.isVisible()) {
+      this.windowMain.win.show();
     }
+  }
 
-    showTray() {
-        if (this.tray != null) {
-            return;
-        }
-
-        this.tray = new Tray(this.icon);
-        this.tray.setToolTip(this.appName);
-        this.tray.on('click', () => this.toggleWindow());
-        this.tray.on('right-click', () => this.tray.popUpContextMenu(this.contextMenu));
-
-        if (this.pressedIcon != null) {
-            this.tray.setPressedImage(this.pressedIcon);
-        }
-        if (this.contextMenu != null && !this.isDarwin()) {
-            this.tray.setContextMenu(this.contextMenu);
-        }
+  async hideToTray() {
+    this.showTray();
+    if (this.windowMain.win != null) {
+      this.windowMain.win.hide();
     }
-
-    updateContextMenu() {
-        if (this.contextMenu != null && this.isLinux()) {
-            this.tray.setContextMenu(this.contextMenu);
-        }
+    if (this.isDarwin() && !(await this.stateService.getAlwaysShowDock())) {
+      this.hideDock();
     }
+  }
 
-    private hideDock() {
-        app.dock.hide();
+  restoreFromTray() {
+    if (this.windowMain.win == null || !this.windowMain.win.isVisible()) {
+      this.toggleWindow();
     }
+  }
 
-    private showDock() {
-        app.dock.show();
+  showTray() {
+    if (this.tray != null) {
+      return;
     }
 
-    private isDarwin() {
-        return process.platform === 'darwin';
-    }
+    this.tray = new Tray(this.icon);
+    this.tray.setToolTip(this.appName);
+    this.tray.on("click", () => this.toggleWindow());
+    this.tray.on("right-click", () => this.tray.popUpContextMenu(this.contextMenu));
 
-    private isLinux() {
-        return process.platform === 'linux';
+    if (this.pressedIcon != null) {
+      this.tray.setPressedImage(this.pressedIcon);
+    }
+    if (this.contextMenu != null && !this.isDarwin()) {
+      this.tray.setContextMenu(this.contextMenu);
     }
+  }
 
-    private async toggleWindow() {
-        if (this.windowMain.win == null) {
-            if (this.isDarwin()) {
-                // On MacOS, closing the window via the red button destroys the BrowserWindow instance.
-                this.windowMain.createWindow().then(() => {
-                    this.windowMain.win.show();
-                    this.showDock();
-                });
-            }
-            return;
-        }
-        if (this.windowMain.win.isVisible()) {
-            this.windowMain.win.hide();
-            if (this.isDarwin() && !await this.storageService.get<boolean>(ElectronConstants.alwaysShowDock)) {
-                this.hideDock();
-            }
-        } else {
-            this.windowMain.win.show();
-            if (this.isDarwin()) {
-                this.showDock();
-            }
-        }
+  updateContextMenu() {
+    if (this.contextMenu != null && this.isLinux()) {
+      this.tray.setContextMenu(this.contextMenu);
     }
+  }
+
+  private hideDock() {
+    app.dock.hide();
+  }
+
+  private showDock() {
+    app.dock.show();
+  }
+
+  private isDarwin() {
+    return process.platform === "darwin";
+  }
+
+  private isLinux() {
+    return process.platform === "linux";
+  }
+
+  private async toggleWindow() {
+    if (this.windowMain.win == null) {
+      if (this.isDarwin()) {
+        // On MacOS, closing the window via the red button destroys the BrowserWindow instance.
+        this.windowMain.createWindow().then(() => {
+          this.windowMain.win.show();
+          this.showDock();
+        });
+      }
+      return;
+    }
+    if (this.windowMain.win.isVisible()) {
+      this.windowMain.win.hide();
+      if (this.isDarwin() && !(await this.stateService.getAlwaysShowDock())) {
+        this.hideDock();
+      }
+    } else {
+      this.windowMain.win.show();
+      if (this.isDarwin()) {
+        this.showDock();
+      }
+    }
+  }
 
-    private closeWindow() {
-        this.windowMain.isQuitting = true;
-        if (this.windowMain.win != null) {
-            this.windowMain.win.close();
-        }
+  private closeWindow() {
+    this.windowMain.isQuitting = true;
+    if (this.windowMain.win != null) {
+      this.windowMain.win.close();
     }
+  }
 }
diff --git a/jslib/electron/src/updater.main.ts b/jslib/electron/src/updater.main.ts
index 712a79a4..bc0fb4b4 100644
--- a/jslib/electron/src/updater.main.ts
+++ b/jslib/electron/src/updater.main.ts
@@ -1,155 +1,154 @@
-import {
-    dialog,
-    Menu,
-    MenuItem,
-    shell,
-} from 'electron';
-import log from 'electron-log';
-import { autoUpdater } from 'electron-updater';
-
-import {
-    isAppImage,
-    isDev,
-    isMacAppStore,
-    isWindowsPortable,
-    isWindowsStore,
-} from './utils';
-
-import { I18nService } from 'jslib-common/abstractions/i18n.service';
-import { WindowMain } from './window.main';
+import { dialog, Menu, MenuItem, shell } from "electron";
+import log from "electron-log";
+import { autoUpdater } from "electron-updater";
+
+import { isAppImage, isDev, isMacAppStore, isWindowsPortable, isWindowsStore } from "./utils";
+
+import { I18nService } from "jslib-common/abstractions/i18n.service";
+import { WindowMain } from "./window.main";
 
 const UpdaterCheckInitalDelay = 5 * 1000; // 5 seconds
 const UpdaterCheckInterval = 12 * 60 * 60 * 1000; // 12 hours
 
 export class UpdaterMain {
-    private doingUpdateCheck = false;
-    private doingUpdateCheckWithFeedback = false;
-    private canUpdate = false;
-
-    constructor(private i18nService: I18nService, private windowMain: WindowMain,
-        private gitHubProject: string, private onCheckingForUpdate: () => void = null,
-        private onReset: () => void = null, private onUpdateDownloaded: () => void = null,
-        private projectName: string) {
-        autoUpdater.logger = log;
-
-        const linuxCanUpdate = process.platform === 'linux' && isAppImage();
-        const windowsCanUpdate = process.platform === 'win32' && !isWindowsStore() && !isWindowsPortable();
-        const macCanUpdate = process.platform === 'darwin' && !isMacAppStore();
-        this.canUpdate = process.env.ELECTRON_NO_UPDATER !== '1' &&
-            (linuxCanUpdate || windowsCanUpdate || macCanUpdate);
-    }
-
-    async init() {
-        global.setTimeout(async () => await this.checkForUpdate(), UpdaterCheckInitalDelay);
-        global.setInterval(async () => await this.checkForUpdate(), UpdaterCheckInterval);
-
-        autoUpdater.on('checking-for-update', () => {
-            if (this.onCheckingForUpdate != null) {
-                this.onCheckingForUpdate();
-            }
-            this.doingUpdateCheck = true;
-        });
-
-        autoUpdater.on('update-available', async () => {
-            if (this.doingUpdateCheckWithFeedback) {
-                if (this.windowMain.win == null) {
-                    this.reset();
-                    return;
-                }
-
-                const result = await dialog.showMessageBox(this.windowMain.win, {
-                    type: 'info',
-                    title: this.i18nService.t(this.projectName) + ' - ' + this.i18nService.t('updateAvailable'),
-                    message: this.i18nService.t('updateAvailable'),
-                    detail: this.i18nService.t('updateAvailableDesc'),
-                    buttons: [this.i18nService.t('yes'), this.i18nService.t('no')],
-                    cancelId: 1,
-                    defaultId: 0,
-                    noLink: true,
-                });
-
-                if (result.response === 0) {
-                    autoUpdater.downloadUpdate();
-                } else {
-                    this.reset();
-                }
-            }
-        });
-
-        autoUpdater.on('update-not-available', () => {
-            if (this.doingUpdateCheckWithFeedback && this.windowMain.win != null) {
-                dialog.showMessageBox(this.windowMain.win, {
-                    message: this.i18nService.t('noUpdatesAvailable'),
-                    buttons: [this.i18nService.t('ok')],
-                    defaultId: 0,
-                    noLink: true,
-                });
-            }
-
-            this.reset();
-        });
+  private doingUpdateCheck = false;
+  private doingUpdateCheckWithFeedback = false;
+  private canUpdate = false;
+
+  constructor(
+    private i18nService: I18nService,
+    private windowMain: WindowMain,
+    private gitHubProject: string,
+    private onCheckingForUpdate: () => void = null,
+    private onReset: () => void = null,
+    private onUpdateDownloaded: () => void = null,
+    private projectName: string
+  ) {
+    autoUpdater.logger = log;
+
+    const linuxCanUpdate = process.platform === "linux" && isAppImage();
+    const windowsCanUpdate =
+      process.platform === "win32" && !isWindowsStore() && !isWindowsPortable();
+    const macCanUpdate = process.platform === "darwin" && !isMacAppStore();
+    this.canUpdate =
+      process.env.ELECTRON_NO_UPDATER !== "1" &&
+      (linuxCanUpdate || windowsCanUpdate || macCanUpdate);
+  }
+
+  async init() {
+    global.setTimeout(async () => await this.checkForUpdate(), UpdaterCheckInitalDelay);
+    global.setInterval(async () => await this.checkForUpdate(), UpdaterCheckInterval);
+
+    autoUpdater.on("checking-for-update", () => {
+      if (this.onCheckingForUpdate != null) {
+        this.onCheckingForUpdate();
+      }
+      this.doingUpdateCheck = true;
+    });
+
+    autoUpdater.on("update-available", async () => {
+      if (this.doingUpdateCheckWithFeedback) {
+        if (this.windowMain.win == null) {
+          this.reset();
+          return;
+        }
 
-        autoUpdater.on('update-downloaded', async info => {
-            if (this.onUpdateDownloaded != null) {
-                this.onUpdateDownloaded();
-            }
-
-            if (this.windowMain.win == null) {
-                return;
-            }
-
-            const result = await dialog.showMessageBox(this.windowMain.win, {
-                type: 'info',
-                title: this.i18nService.t(this.projectName) + ' - ' + this.i18nService.t('restartToUpdate'),
-                message: this.i18nService.t('restartToUpdate'),
-                detail: this.i18nService.t('restartToUpdateDesc', info.version),
-                buttons: [this.i18nService.t('restart'), this.i18nService.t('later')],
-                cancelId: 1,
-                defaultId: 0,
-                noLink: true,
-            });
-
-            if (result.response === 0) {
-                autoUpdater.quitAndInstall(false, true);
-            }
+        const result = await dialog.showMessageBox(this.windowMain.win, {
+          type: "info",
+          title:
+            this.i18nService.t(this.projectName) + " - " + this.i18nService.t("updateAvailable"),
+          message: this.i18nService.t("updateAvailable"),
+          detail: this.i18nService.t("updateAvailableDesc"),
+          buttons: [this.i18nService.t("yes"), this.i18nService.t("no")],
+          cancelId: 1,
+          defaultId: 0,
+          noLink: true,
         });
 
-        autoUpdater.on('error', error => {
-            if (this.doingUpdateCheckWithFeedback) {
-                dialog.showErrorBox(this.i18nService.t('updateError'),
-                    error == null ? this.i18nService.t('unknown') : (error.stack || error).toString());
-            }
-
-            this.reset();
+        if (result.response === 0) {
+          autoUpdater.downloadUpdate();
+        } else {
+          this.reset();
+        }
+      }
+    });
+
+    autoUpdater.on("update-not-available", () => {
+      if (this.doingUpdateCheckWithFeedback && this.windowMain.win != null) {
+        dialog.showMessageBox(this.windowMain.win, {
+          message: this.i18nService.t("noUpdatesAvailable"),
+          buttons: [this.i18nService.t("ok")],
+          defaultId: 0,
+          noLink: true,
         });
+      }
+
+      this.reset();
+    });
+
+    autoUpdater.on("update-downloaded", async (info) => {
+      if (this.onUpdateDownloaded != null) {
+        this.onUpdateDownloaded();
+      }
+
+      if (this.windowMain.win == null) {
+        return;
+      }
+
+      const result = await dialog.showMessageBox(this.windowMain.win, {
+        type: "info",
+        title: this.i18nService.t(this.projectName) + " - " + this.i18nService.t("restartToUpdate"),
+        message: this.i18nService.t("restartToUpdate"),
+        detail: this.i18nService.t("restartToUpdateDesc", info.version),
+        buttons: [this.i18nService.t("restart"), this.i18nService.t("later")],
+        cancelId: 1,
+        defaultId: 0,
+        noLink: true,
+      });
+
+      if (result.response === 0) {
+        autoUpdater.quitAndInstall(false, true);
+      }
+    });
+
+    autoUpdater.on("error", (error) => {
+      if (this.doingUpdateCheckWithFeedback) {
+        dialog.showErrorBox(
+          this.i18nService.t("updateError"),
+          error == null ? this.i18nService.t("unknown") : (error.stack || error).toString()
+        );
+      }
+
+      this.reset();
+    });
+  }
+
+  async checkForUpdate(withFeedback: boolean = false) {
+    if (this.doingUpdateCheck || isDev()) {
+      return;
     }
 
-    async checkForUpdate(withFeedback: boolean = false) {
-        if (this.doingUpdateCheck || isDev()) {
-            return;
-        }
-
-        if (!this.canUpdate) {
-            if (withFeedback) {
-                shell.openExternal('https://github.com/bitwarden/' + this.gitHubProject + '/releases');
-            }
-
-            return;
-        }
+    if (!this.canUpdate) {
+      if (withFeedback) {
+        shell.openExternal("https://github.com/bitwarden/" + this.gitHubProject + "/releases");
+      }
 
-        this.doingUpdateCheckWithFeedback = withFeedback;
-        if (withFeedback) {
-            autoUpdater.autoDownload = false;
-        }
+      return;
+    }
 
-        await autoUpdater.checkForUpdates();
+    this.doingUpdateCheckWithFeedback = withFeedback;
+    if (withFeedback) {
+      autoUpdater.autoDownload = false;
     }
 
-    private reset() {
-        if (this.onReset != null) {
-            this.onReset();
-        }
-        autoUpdater.autoDownload = true;
-        this.doingUpdateCheck = false;
+    await autoUpdater.checkForUpdates();
+  }
+
+  private reset() {
+    if (this.onReset != null) {
+      this.onReset();
     }
+    autoUpdater.autoDownload = true;
+    this.doingUpdateCheck = false;
+  }
 }
diff --git a/jslib/electron/src/utils.ts b/jslib/electron/src/utils.ts
index ce4de605..a29a27a2 100644
--- a/jslib/electron/src/utils.ts
+++ b/jslib/electron/src/utils.ts
@@ -1,64 +1,76 @@
-import { ipcRenderer } from 'electron';
+import { ipcRenderer } from "electron";
 
-export type RendererMenuItem = {label?: string, type?: ('normal' | 'separator' | 'submenu' | 'checkbox' | 'radio'), click?: () => any};
+export type RendererMenuItem = {
+  label?: string;
+  type?: "normal" | "separator" | "submenu" | "checkbox" | "radio";
+  click?: () => any;
+};
 
 export function invokeMenu(menu: RendererMenuItem[]) {
-    const menuWithoutClick = menu.map(m => {
-        return { label: m.label, type: m.type };
-    });
-    ipcRenderer.invoke('openContextMenu', { menu: menuWithoutClick }).then((i: number) => {
-        if (i !== -1) {
-            menu[i].click();
-        }
-    });
+  const menuWithoutClick = menu.map((m) => {
+    return { label: m.label, type: m.type };
+  });
+  ipcRenderer.invoke("openContextMenu", { menu: menuWithoutClick }).then((i: number) => {
+    if (i !== -1) {
+      menu[i].click();
+    }
+  });
 }
 
 export function isDev() {
-    // ref: https://github.com/sindresorhus/electron-is-dev
-    if ('ELECTRON_IS_DEV' in process.env) {
-        return parseInt(process.env.ELECTRON_IS_DEV, 10) === 1;
-    }
-    return (process.defaultApp || /node_modules[\\/]electron[\\/]/.test(process.execPath));
+  // ref: https://github.com/sindresorhus/electron-is-dev
+  if ("ELECTRON_IS_DEV" in process.env) {
+    return parseInt(process.env.ELECTRON_IS_DEV, 10) === 1;
+  }
+  return process.defaultApp || /node_modules[\\/]electron[\\/]/.test(process.execPath);
 }
 
 export function isAppImage() {
-    return process.platform === 'linux' && 'APPIMAGE' in process.env;
+  return process.platform === "linux" && "APPIMAGE" in process.env;
+}
+
+export function isMac() {
+  return process.platform === "darwin";
 }
 
 export function isMacAppStore() {
-    return process.platform === 'darwin' && process.mas && process.mas === true;
+  return isMac() && process.mas && process.mas === true;
 }
 
 export function isWindowsStore() {
-    const isWindows = process.platform === 'win32';
-    let windowsStore = process.windowsStore;
-    if (isWindows && !windowsStore &&
-        process.resourcesPath.indexOf('8bitSolutionsLLC.bitwardendesktop_') > -1) {
-        windowsStore = true;
-    }
-    return isWindows && windowsStore === true;
+  const isWindows = process.platform === "win32";
+  let windowsStore = process.windowsStore;
+  if (
+    isWindows &&
+    !windowsStore &&
+    process.resourcesPath.indexOf("8bitSolutionsLLC.bitwardendesktop_") > -1
+  ) {
+    windowsStore = true;
+  }
+  return isWindows && windowsStore === true;
 }
 
 export function isSnapStore() {
-    return process.platform === 'linux' && process.env.SNAP_USER_DATA != null;
+  return process.platform === "linux" && process.env.SNAP_USER_DATA != null;
 }
 
 export function isWindowsPortable() {
-    return process.platform === 'win32' && process.env.PORTABLE_EXECUTABLE_DIR != null;
+  return process.platform === "win32" && process.env.PORTABLE_EXECUTABLE_DIR != null;
 }
 
 /**
  * Sanitize user agent so external resources used by the app can't built data on our users.
  */
 export function cleanUserAgent(userAgent: string): string {
-    const userAgentItem = (startString: string, endString: string) => {
-        const startIndex = userAgent.indexOf(startString);
-        return userAgent.substring(startIndex, userAgent.indexOf(endString, startIndex) + 1);
-    };
-    const systemInformation = '(Windows NT 10.0; Win64; x64)';
+  const userAgentItem = (startString: string, endString: string) => {
+    const startIndex = userAgent.indexOf(startString);
+    return userAgent.substring(startIndex, userAgent.indexOf(endString, startIndex) + 1);
+  };
+  const systemInformation = "(Windows NT 10.0; Win64; x64)";
 
-    // Set system information, remove bitwarden, and electron information
-    return userAgent.replace(userAgentItem('(', ')'), systemInformation)
-        .replace(userAgentItem('Bitwarden', ' '), '')
-        .replace(userAgentItem('Electron', ' '), '');
+  // Set system information, remove bitwarden, and electron information
+  return userAgent
+    .replace(userAgentItem("(", ")"), systemInformation)
+    .replace(userAgentItem("Bitwarden", " "), "")
+    .replace(userAgentItem("Electron", " "), "");
 }
diff --git a/jslib/electron/src/window.main.ts b/jslib/electron/src/window.main.ts
index f51dc114..2dc1709e 100644
--- a/jslib/electron/src/window.main.ts
+++ b/jslib/electron/src/window.main.ts
@@ -1,290 +1,291 @@
-import {
-    app,
-    BrowserWindow,
-    screen,
-} from 'electron';
-import * as path from 'path';
-import * as url from 'url';
-
-import { LogService } from 'jslib-common/abstractions/log.service';
-import { StorageService } from 'jslib-common/abstractions/storage.service';
-
-import { ElectronConstants } from './electronConstants';
-import {
-    cleanUserAgent,
-    isDev,
-    isMacAppStore,
-    isSnapStore,
-} from './utils';
+import { app, BrowserWindow, screen } from "electron";
+import * as path from "path";
+import * as url from "url";
 
-const WindowEventHandlingDelay = 100;
-const Keys = {
-    mainWindowSize: 'mainWindowSize',
-};
+import { LogService } from "jslib-common/abstractions/log.service";
+import { StateService } from "jslib-common/abstractions/state.service";
+
+import { cleanUserAgent, isDev, isMacAppStore, isSnapStore } from "./utils";
 
+const mainWindowSizeKey = "mainWindowSize";
+const WindowEventHandlingDelay = 100;
 export class WindowMain {
-    win: BrowserWindow;
-    isQuitting: boolean = false;
-
-    private windowStateChangeTimer: NodeJS.Timer;
-    private windowStates: { [key: string]: any; } = {};
-    private enableAlwaysOnTop: boolean = false;
-
-    constructor(private storageService: StorageService, private logService: LogService,
-        private hideTitleBar = false, private defaultWidth = 950, private defaultHeight = 600,
-        private argvCallback: (argv: string[]) => void = null,
-        private createWindowCallback: (win: BrowserWindow) => void) { }
-
-    init(): Promise<any> {
-        return new Promise<void>((resolve, reject) => {
-            try {
-                if (!isMacAppStore() && !isSnapStore()) {
-                    const gotTheLock = app.requestSingleInstanceLock();
-                    if (!gotTheLock) {
-                        app.quit();
-                        return;
-                    } else {
-                        app.on('second-instance', (event, argv, workingDirectory) => {
-                            // Someone tried to run a second instance, we should focus our window.
-                            if (this.win != null) {
-                                if (this.win.isMinimized() || !this.win.isVisible()) {
-                                    this.win.show();
-                                }
-                                this.win.focus();
-                            }
-                            if (process.platform === 'win32' || process.platform === 'linux') {
-                                if (this.argvCallback != null) {
-                                    this.argvCallback(argv);
-                                }
-                            }
-                        });
-                    }
+  win: BrowserWindow;
+  isQuitting: boolean = false;
+
+  private windowStateChangeTimer: NodeJS.Timer;
+  private windowStates: { [key: string]: any } = {};
+  private enableAlwaysOnTop: boolean = false;
+
+  constructor(
+    private stateService: StateService,
+    private logService: LogService,
+    private hideTitleBar = false,
+    private defaultWidth = 950,
+    private defaultHeight = 600,
+    private argvCallback: (argv: string[]) => void = null,
+    private createWindowCallback: (win: BrowserWindow) => void
+  ) {}
+
+  init(): Promise<any> {
+    return new Promise<void>((resolve, reject) => {
+      try {
+        if (!isMacAppStore() && !isSnapStore()) {
+          const gotTheLock = app.requestSingleInstanceLock();
+          if (!gotTheLock) {
+            app.quit();
+            return;
+          } else {
+            app.on("second-instance", (event, argv, workingDirectory) => {
+              // Someone tried to run a second instance, we should focus our window.
+              if (this.win != null) {
+                if (this.win.isMinimized() || !this.win.isVisible()) {
+                  this.win.show();
                 }
-
-                // This method will be called when Electron is shutting
-                // down the application.
-                app.on('before-quit', () => {
-                    this.isQuitting = true;
-                });
-
-                // This method will be called when Electron has finished
-                // initialization and is ready to create browser windows.
-                // Some APIs can only be used after this event occurs.
-                app.on('ready', async () => {
-                    await this.createWindow();
-                    resolve();
-                    if (this.argvCallback != null) {
-                        this.argvCallback(process.argv);
-                    }
-                });
-
-                // Quit when all windows are closed.
-                app.on('window-all-closed', () => {
-                    // On OS X it is common for applications and their menu bar
-                    // to stay active until the user quits explicitly with Cmd + Q
-                    if (process.platform !== 'darwin' || this.isQuitting || isMacAppStore()) {
-                        app.quit();
-                    }
-                });
-
-                app.on('activate', async () => {
-                    // On OS X it's common to re-create a window in the app when the
-                    // dock icon is clicked and there are no other windows open.
-                    if (this.win === null) {
-                        await this.createWindow();
-                    } else {
-                        // Show the window when clicking on Dock icon
-                        this.win.show();
-                    }
-                });
-
-            } catch (e) {
-                // Catch Error
-                // throw e;
-                reject(e);
-            }
-        });
-    }
-
-    async createWindow(): Promise<void> {
-        this.windowStates[Keys.mainWindowSize] = await this.getWindowState(Keys.mainWindowSize, this.defaultWidth,
-            this.defaultHeight);
-        this.enableAlwaysOnTop = await this.storageService.get<boolean>(ElectronConstants.enableAlwaysOnTopKey);
-
-        // Create the browser window.
-        this.win = new BrowserWindow({
-            width: this.windowStates[Keys.mainWindowSize].width,
-            height: this.windowStates[Keys.mainWindowSize].height,
-            minWidth: 680,
-            minHeight: 500,
-            x: this.windowStates[Keys.mainWindowSize].x,
-            y: this.windowStates[Keys.mainWindowSize].y,
-            title: app.name,
-            icon: process.platform === 'linux' ? path.join(__dirname, '/images/icon.png') : undefined,
-            titleBarStyle: this.hideTitleBar && process.platform === 'darwin' ? 'hiddenInset' : undefined,
-            show: false,
-            backgroundColor: '#fff',
-            alwaysOnTop: this.enableAlwaysOnTop,
-            webPreferences: {
-                nodeIntegration: true,
-                backgroundThrottling: false,
-                contextIsolation: false,
-            },
-        });
-
-        if (this.windowStates[Keys.mainWindowSize].isMaximized) {
-            this.win.maximize();
-        }
-
-        // Show it later since it might need to be maximized.
-        this.win.show();
-
-        // and load the index.html of the app.
-        this.win.loadURL(url.format(
-            {
-                protocol: 'file:',
-                pathname: path.join(__dirname, '/index.html'),
-                slashes: true,
-            }),
-            {
-                userAgent: cleanUserAgent(this.win.webContents.userAgent),
-            }
-        );
-
-        // Open the DevTools.
-        if (isDev()) {
-            this.win.webContents.openDevTools();
+                this.win.focus();
+              }
+              if (process.platform === "win32" || process.platform === "linux") {
+                if (this.argvCallback != null) {
+                  this.argvCallback(argv);
+                }
+              }
+            });
+          }
         }
 
-        // Emitted when the window is closed.
-        this.win.on('closed', async () => {
-            await this.updateWindowState(Keys.mainWindowSize, this.win);
-
-            // Dereference the window object, usually you would store window
-            // in an array if your app supports multi windows, this is the time
-            // when you should delete the corresponding element.
-            this.win = null;
-        });
-
-        this.win.on('close', async () => {
-            await this.updateWindowState(Keys.mainWindowSize, this.win);
-        });
-
-        this.win.on('maximize', async () => {
-            await this.updateWindowState(Keys.mainWindowSize, this.win);
+        // This method will be called when Electron is shutting
+        // down the application.
+        app.on("before-quit", () => {
+          this.isQuitting = true;
         });
 
-        this.win.on('unmaximize', async () => {
-            await this.updateWindowState(Keys.mainWindowSize, this.win);
+        // This method will be called when Electron has finished
+        // initialization and is ready to create browser windows.
+        // Some APIs can only be used after this event occurs.
+        app.on("ready", async () => {
+          await this.createWindow();
+          resolve();
+          if (this.argvCallback != null) {
+            this.argvCallback(process.argv);
+          }
         });
 
-        this.win.on('resize', () => {
-            this.windowStateChangeHandler(Keys.mainWindowSize, this.win);
+        // Quit when all windows are closed.
+        app.on("window-all-closed", () => {
+          // On OS X it is common for applications and their menu bar
+          // to stay active until the user quits explicitly with Cmd + Q
+          if (process.platform !== "darwin" || this.isQuitting || isMacAppStore()) {
+            app.quit();
+          }
         });
 
-        this.win.on('move', () => {
-            this.windowStateChangeHandler(Keys.mainWindowSize, this.win);
-        });
-        this.win.on('focus', () => {
-            this.win.webContents.send('messagingService', {
-                command: 'windowIsFocused',
-                windowIsFocused: true,
-            });
+        app.on("activate", async () => {
+          // On OS X it's common to re-create a window in the app when the
+          // dock icon is clicked and there are no other windows open.
+          if (this.win === null) {
+            await this.createWindow();
+          } else {
+            // Show the window when clicking on Dock icon
+            this.win.show();
+          }
         });
-
-        if (this.createWindowCallback) {
-            this.createWindowCallback(this.win);
-        }
+      } catch (e) {
+        // Catch Error
+        // throw e;
+        reject(e);
+      }
+    });
+  }
+
+  async createWindow(): Promise<void> {
+    this.windowStates[mainWindowSizeKey] = await this.getWindowState(
+      this.defaultWidth,
+      this.defaultHeight
+    );
+    this.enableAlwaysOnTop = await this.stateService.getEnableAlwaysOnTop();
+
+    // Create the browser window.
+    this.win = new BrowserWindow({
+      width: this.windowStates[mainWindowSizeKey].width,
+      height: this.windowStates[mainWindowSizeKey].height,
+      minWidth: 680,
+      minHeight: 500,
+      x: this.windowStates[mainWindowSizeKey].x,
+      y: this.windowStates[mainWindowSizeKey].y,
+      title: app.name,
+      icon: process.platform === "linux" ? path.join(__dirname, "/images/icon.png") : undefined,
+      titleBarStyle: this.hideTitleBar && process.platform === "darwin" ? "hiddenInset" : undefined,
+      show: false,
+      backgroundColor: "#fff",
+      alwaysOnTop: this.enableAlwaysOnTop,
+      webPreferences: {
+        spellcheck: false,
+        nodeIntegration: true,
+        backgroundThrottling: false,
+        contextIsolation: false,
+      },
+    });
+
+    if (this.windowStates[mainWindowSizeKey].isMaximized) {
+      this.win.maximize();
     }
 
-    async toggleAlwaysOnTop() {
-        this.enableAlwaysOnTop = !this.win.isAlwaysOnTop();
-        this.win.setAlwaysOnTop(this.enableAlwaysOnTop);
-        await this.storageService.save(ElectronConstants.enableAlwaysOnTopKey, this.enableAlwaysOnTop);
+    // Show it later since it might need to be maximized.
+    this.win.show();
+
+    // and load the index.html of the app.
+    this.win.loadURL(
+      url.format({
+        protocol: "file:",
+        pathname: path.join(__dirname, "/index.html"),
+        slashes: true,
+      }),
+      {
+        userAgent: cleanUserAgent(this.win.webContents.userAgent),
+      }
+    );
+
+    // Open the DevTools.
+    if (isDev()) {
+      this.win.webContents.openDevTools();
     }
 
-    private windowStateChangeHandler(configKey: string, win: BrowserWindow) {
-        global.clearTimeout(this.windowStateChangeTimer);
-        this.windowStateChangeTimer = global.setTimeout(async () => {
-            await this.updateWindowState(configKey, win);
-        }, WindowEventHandlingDelay);
+    // Emitted when the window is closed.
+    this.win.on("closed", async () => {
+      await this.updateWindowState(mainWindowSizeKey, this.win);
+
+      // Dereference the window object, usually you would store window
+      // in an array if your app supports multi windows, this is the time
+      // when you should delete the corresponding element.
+      this.win = null;
+    });
+
+    this.win.on("close", async () => {
+      await this.updateWindowState(mainWindowSizeKey, this.win);
+    });
+
+    this.win.on("maximize", async () => {
+      await this.updateWindowState(mainWindowSizeKey, this.win);
+    });
+
+    this.win.on("unmaximize", async () => {
+      await this.updateWindowState(mainWindowSizeKey, this.win);
+    });
+
+    this.win.on("resize", () => {
+      this.windowStateChangeHandler(mainWindowSizeKey, this.win);
+    });
+
+    this.win.on("move", () => {
+      this.windowStateChangeHandler(mainWindowSizeKey, this.win);
+    });
+    this.win.on("focus", () => {
+      this.win.webContents.send("messagingService", {
+        command: "windowIsFocused",
+        windowIsFocused: true,
+      });
+    });
+
+    if (this.createWindowCallback) {
+      this.createWindowCallback(this.win);
+    }
+  }
+
+  async toggleAlwaysOnTop() {
+    this.enableAlwaysOnTop = !this.win.isAlwaysOnTop();
+    this.win.setAlwaysOnTop(this.enableAlwaysOnTop);
+    await this.stateService.setEnableAlwaysOnTop(this.enableAlwaysOnTop);
+  }
+
+  private windowStateChangeHandler(configKey: string, win: BrowserWindow) {
+    global.clearTimeout(this.windowStateChangeTimer);
+    this.windowStateChangeTimer = global.setTimeout(async () => {
+      await this.updateWindowState(configKey, win);
+    }, WindowEventHandlingDelay);
+  }
+
+  private async updateWindowState(configKey: string, win: BrowserWindow) {
+    if (win == null) {
+      return;
     }
 
-    private async updateWindowState(configKey: string, win: BrowserWindow) {
-        if (win == null) {
-            return;
-        }
-
-        try {
-            const bounds = win.getBounds();
-
-            if (this.windowStates[configKey] == null) {
-                this.windowStates[configKey] = await this.storageService.get<any>(configKey);
-                if (this.windowStates[configKey] == null) {
-                    this.windowStates[configKey] = {};
-                }
-            }
-
-            this.windowStates[configKey].isMaximized = win.isMaximized();
-            this.windowStates[configKey].displayBounds = screen.getDisplayMatching(bounds).bounds;
-
-            if (!win.isMaximized() && !win.isMinimized() && !win.isFullScreen()) {
-                this.windowStates[configKey].x = bounds.x;
-                this.windowStates[configKey].y = bounds.y;
-                this.windowStates[configKey].width = bounds.width;
-                this.windowStates[configKey].height = bounds.height;
-            }
+    try {
+      const bounds = win.getBounds();
 
-            await this.storageService.save(configKey, this.windowStates[configKey]);
-        } catch (e) {
-            this.logService.error(e);
+      if (this.windowStates[configKey] == null) {
+        this.windowStates[configKey] = await this.stateService.getWindow();
+        if (this.windowStates[configKey] == null) {
+          this.windowStates[configKey] = {};
         }
-    }
+      }
 
-    private async getWindowState(configKey: string, defaultWidth: number, defaultHeight: number) {
-        let state = await this.storageService.get<any>(configKey);
-
-        const isValid = state != null && (this.stateHasBounds(state) || state.isMaximized);
-        let displayBounds: Electron.Rectangle = null;
-        if (!isValid) {
-            state = {
-                width: defaultWidth,
-                height: defaultHeight,
-            };
-
-            displayBounds = screen.getPrimaryDisplay().bounds;
-        } else if (this.stateHasBounds(state) && state.displayBounds) {
-            // Check if the display where the window was last open is still available
-            displayBounds = screen.getDisplayMatching(state.displayBounds).bounds;
-
-            if (displayBounds.width !== state.displayBounds.width ||
-                displayBounds.height !== state.displayBounds.height ||
-                displayBounds.x !== state.displayBounds.x ||
-                displayBounds.y !== state.displayBounds.y) {
-                state.x = undefined;
-                state.y = undefined;
-                displayBounds = screen.getPrimaryDisplay().bounds;
-            }
-        }
+      this.windowStates[configKey].isMaximized = win.isMaximized();
+      this.windowStates[configKey].displayBounds = screen.getDisplayMatching(bounds).bounds;
 
-        if (displayBounds != null) {
-            if (state.width > displayBounds.width && state.height > displayBounds.height) {
-                state.isMaximized = true;
-            }
-
-            if (state.width > displayBounds.width) {
-                state.width = displayBounds.width - 10;
-            }
-            if (state.height > displayBounds.height) {
-                state.height = displayBounds.height - 10;
-            }
-        }
+      if (!win.isMaximized() && !win.isMinimized() && !win.isFullScreen()) {
+        this.windowStates[configKey].x = bounds.x;
+        this.windowStates[configKey].y = bounds.y;
+        this.windowStates[configKey].width = bounds.width;
+        this.windowStates[configKey].height = bounds.height;
+      }
 
-        return state;
+      await this.stateService.setWindow(this.windowStates[configKey]);
+    } catch (e) {
+      this.logService.error(e);
+    }
+  }
+
+  private async getWindowState(defaultWidth: number, defaultHeight: number) {
+    const state = await this.stateService.getWindow();
+
+    const isValid = state != null && (this.stateHasBounds(state) || state.isMaximized);
+    let displayBounds: Electron.Rectangle = null;
+    if (!isValid) {
+      state.width = defaultWidth;
+      state.height = defaultHeight;
+
+      displayBounds = screen.getPrimaryDisplay().bounds;
+    } else if (this.stateHasBounds(state) && state.displayBounds) {
+      // Check if the display where the window was last open is still available
+      displayBounds = screen.getDisplayMatching(state.displayBounds).bounds;
+
+      if (
+        displayBounds.width !== state.displayBounds.width ||
+        displayBounds.height !== state.displayBounds.height ||
+        displayBounds.x !== state.displayBounds.x ||
+        displayBounds.y !== state.displayBounds.y
+      ) {
+        state.x = undefined;
+        state.y = undefined;
+        displayBounds = screen.getPrimaryDisplay().bounds;
+      }
     }
 
-    private stateHasBounds(state: any): boolean {
-        return state != null && Number.isInteger(state.x) && Number.isInteger(state.y) &&
-            Number.isInteger(state.width) && state.width > 0 && Number.isInteger(state.height) && state.height > 0;
+    if (displayBounds != null) {
+      if (state.width > displayBounds.width && state.height > displayBounds.height) {
+        state.isMaximized = true;
+      }
+
+      if (state.width > displayBounds.width) {
+        state.width = displayBounds.width - 10;
+      }
+      if (state.height > displayBounds.height) {
+        state.height = displayBounds.height - 10;
+      }
     }
+
+    return state;
+  }
+
+  private stateHasBounds(state: any): boolean {
+    return (
+      state != null &&
+      Number.isInteger(state.x) &&
+      Number.isInteger(state.y) &&
+      Number.isInteger(state.width) &&
+      state.width > 0 &&
+      Number.isInteger(state.height) &&
+      state.height > 0
+    );
+  }
 }
diff --git a/jslib/electron/tsconfig.json b/jslib/electron/tsconfig.json
index 3d41e86c..07c6a21d 100644
--- a/jslib/electron/tsconfig.json
+++ b/jslib/electron/tsconfig.json
@@ -1,30 +1,10 @@
 {
+  "extends": "../shared/tsconfig",
   "compilerOptions": {
-    "pretty": true,
-    "moduleResolution": "node",
-    "noImplicitAny": true,
-    "target": "ES6",
-    "module": "commonjs",
-    "lib": ["es5", "es6", "es7", "dom"],
-    "sourceMap": true,
-    "declaration": true,
-    "allowSyntheticDefaultImports": true,
-    "experimentalDecorators": true,
-    "emitDecoratorMetadata": true,
-    "declarationDir": "dist/types",
-    "outDir": "dist",
     "paths": {
-      "jslib-common/*": [
-        "../common/src/*"
-      ]
+      "jslib-common/*": ["../common/src/*"]
     }
   },
-  "include": [
-    "src",
-    "spec"
-  ],
-  "exclude": [
-    "node_modules",
-    "dist"
-  ]
+  "include": ["src", "spec"],
+  "exclude": ["node_modules", "dist"]
 }
diff --git a/jslib/node/package-lock.json b/jslib/node/package-lock.json
index ef230d0f..ab1b64a3 100644
--- a/jslib/node/package-lock.json
+++ b/jslib/node/package-lock.json
@@ -21,13 +21,14 @@
       "devDependencies": {
         "@types/inquirer": "^7.3.1",
         "@types/lowdb": "^1.0.10",
-        "@types/node": "^14.17.1",
+        "@types/node": "^16.11.12",
         "@types/node-fetch": "^2.5.10",
         "rimraf": "^3.0.2",
-        "typescript": "4.1.5"
+        "typescript": "4.3.5"
       }
     },
     "../common": {
+      "name": "@bitwarden/jslib-common",
       "version": "0.0.0",
       "license": "GPL-3.0",
       "dependencies": {
@@ -38,19 +39,19 @@
         "lunr": "^2.3.9",
         "node-forge": "^0.10.0",
         "papaparse": "^5.3.0",
-        "rxjs": "6.6.7",
+        "rxjs": "^7.4.0",
         "tldjs": "^2.3.1",
         "zxcvbn": "^4.4.2"
       },
       "devDependencies": {
         "@types/lunr": "^2.3.3",
-        "@types/node": "^14.17.1",
+        "@types/node": "^16.11.12",
         "@types/node-forge": "^0.9.7",
         "@types/papaparse": "^5.2.5",
         "@types/tldjs": "^2.3.0",
         "@types/zxcvbn": "^4.4.1",
         "rimraf": "^3.0.2",
-        "typescript": "4.1.5"
+        "typescript": "4.3.5"
       }
     },
     "node_modules/@bitwarden/jslib-common": {
@@ -59,7 +60,6 @@
     },
     "node_modules/@types/inquirer": {
       "version": "7.3.3",
-      "resolved": "https://registry.npmjs.org/@types/inquirer/-/inquirer-7.3.3.tgz",
       "integrity": "sha512-HhxyLejTHMfohAuhRun4csWigAMjXTmRyiJTU1Y/I1xmggikFMkOUoMQRlFm+zQcPEGHSs3io/0FAmNZf8EymQ==",
       "dev": true,
       "dependencies": {
@@ -69,13 +69,11 @@
     },
     "node_modules/@types/lodash": {
       "version": "4.14.175",
-      "resolved": "https://registry.npmjs.org/@types/lodash/-/lodash-4.14.175.tgz",
       "integrity": "sha512-XmdEOrKQ8a1Y/yxQFOMbC47G/V2VDO1GvMRnl4O75M4GW/abC5tnfzadQYkqEveqRM1dEJGFFegfPNA2vvx2iw==",
       "dev": true
     },
     "node_modules/@types/lowdb": {
       "version": "1.0.11",
-      "resolved": "https://registry.npmjs.org/@types/lowdb/-/lowdb-1.0.11.tgz",
       "integrity": "sha512-h99VMxvTuz+VsXUVCCJo4dsps4vbkXwvU71TpmxDoiBU24bJ0VBygIHgmMm+UPoQIFihmV6euRik4z8J7XDJWg==",
       "dev": true,
       "dependencies": {
@@ -83,14 +81,13 @@
       }
     },
     "node_modules/@types/node": {
-      "version": "14.17.19",
-      "resolved": "https://registry.npmjs.org/@types/node/-/node-14.17.19.tgz",
-      "integrity": "sha512-jjYI6NkyfXykucU6ELEoT64QyKOdvaA6enOqKtP4xUsGY0X0ZUZz29fUmrTRo+7v7c6TgDu82q3GHHaCEkqZwA==",
+      "version": "16.11.12",
+      "resolved": "https://registry.npmjs.org/@types/node/-/node-16.11.12.tgz",
+      "integrity": "sha512-+2Iggwg7PxoO5Kyhvsq9VarmPbIelXP070HMImEpbtGCoyWNINQj4wzjbQCXzdHTRXnqufutJb5KAURZANNBAw==",
       "dev": true
     },
     "node_modules/@types/node-fetch": {
       "version": "2.5.12",
-      "resolved": "https://registry.npmjs.org/@types/node-fetch/-/node-fetch-2.5.12.tgz",
       "integrity": "sha512-MKgC4dlq4kKNa/mYrwpKfzQMB5X3ee5U6fSprkKpToBqBmX4nFZL9cW5jl6sWn+xpRJ7ypWh2yyqqr8UUCstSw==",
       "dev": true,
       "dependencies": {
@@ -100,7 +97,6 @@
     },
     "node_modules/@types/node-fetch/node_modules/form-data": {
       "version": "3.0.1",
-      "resolved": "https://registry.npmjs.org/form-data/-/form-data-3.0.1.tgz",
       "integrity": "sha512-RHkBKtLWUVwd7SqRIvCZMEvAMoGUp0XU+seQiZejj0COz3RI3hWP4sCv3gZWWLjJTd7rGwcsF5eKZGii0r/hbg==",
       "dev": true,
       "dependencies": {
@@ -114,7 +110,6 @@
     },
     "node_modules/@types/through": {
       "version": "0.0.30",
-      "resolved": "https://registry.npmjs.org/@types/through/-/through-0.0.30.tgz",
       "integrity": "sha512-FvnCJljyxhPM3gkRgWmxmDZyAQSiBQQWLI0A0VFL0K7W1oRUrPJSqNO0NvTnLkBcotdlp3lKvaT0JrnyRDkzOg==",
       "dev": true,
       "dependencies": {
@@ -123,7 +118,6 @@
     },
     "node_modules/agent-base": {
       "version": "6.0.2",
-      "resolved": "https://registry.npmjs.org/agent-base/-/agent-base-6.0.2.tgz",
       "integrity": "sha512-RZNwNclF7+MS/8bDg70amg32dyeZGZxiDuQmZxKLAlQjr3jGyLx+4Kkk58UO7D2QdgFIQCovuSuZESne6RG6XQ==",
       "dependencies": {
         "debug": "4"
@@ -134,7 +128,6 @@
     },
     "node_modules/ansi-escapes": {
       "version": "4.3.2",
-      "resolved": "https://registry.npmjs.org/ansi-escapes/-/ansi-escapes-4.3.2.tgz",
       "integrity": "sha512-gKXj5ALrKWQLsYG9jlTRmR/xKluxHV+Z9QEwNIgCfM1/uwPMCuzVVnh5mwTd+OuBZcwSIMbqssNWRm1lE51QaQ==",
       "dependencies": {
         "type-fest": "^0.21.3"
@@ -148,7 +141,6 @@
     },
     "node_modules/ansi-regex": {
       "version": "5.0.1",
-      "resolved": "https://registry.npmjs.org/ansi-regex/-/ansi-regex-5.0.1.tgz",
       "integrity": "sha512-quJQXlTSUGL2LH9SUXo8VwsY4soanhgo6LNSm84E1LBcE8s3O0wpdiRzyR9z/ZZJMlMWv37qOOb9pdJlMUEKFQ==",
       "engines": {
         "node": ">=8"
@@ -156,7 +148,6 @@
     },
     "node_modules/ansi-styles": {
       "version": "4.3.0",
-      "resolved": "https://registry.npmjs.org/ansi-styles/-/ansi-styles-4.3.0.tgz",
       "integrity": "sha512-zbB9rCJAT1rbjiVDb2hqKFHNYLxgtk8NURxZ3IZwD3F6NtxbXZQCnnSi1Lkx+IDohdPlFp222wVALIheZJQSEg==",
       "dependencies": {
         "color-convert": "^2.0.1"
@@ -170,18 +161,15 @@
     },
     "node_modules/asynckit": {
       "version": "0.4.0",
-      "resolved": "https://registry.npmjs.org/asynckit/-/asynckit-0.4.0.tgz",
       "integrity": "sha1-x57Zf380y48robyXkLzDZkdLS3k="
     },
     "node_modules/balanced-match": {
       "version": "1.0.2",
-      "resolved": "https://registry.npmjs.org/balanced-match/-/balanced-match-1.0.2.tgz",
       "integrity": "sha512-3oSeUO0TMV67hN1AmbXsK4yaqU7tjiHlbxRDZOpH0KW9+CeX4bRAaX0Anxt0tx2MrpRpWwQaPwIlISEJhYU5Pw==",
       "dev": true
     },
     "node_modules/brace-expansion": {
       "version": "1.1.11",
-      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-1.1.11.tgz",
       "integrity": "sha512-iCuPHDFgrHX7H2vEI/5xpz07zSHB00TpugqhmYtVmMO6518mCuRMoOYFldEBl0g187ufozdaHgWKcYFb61qGiA==",
       "dev": true,
       "dependencies": {
@@ -191,7 +179,6 @@
     },
     "node_modules/chalk": {
       "version": "4.1.2",
-      "resolved": "https://registry.npmjs.org/chalk/-/chalk-4.1.2.tgz",
       "integrity": "sha512-oKnbhFyRIXpUuez8iBMmyEa4nbj4IOQyuhc/wy9kY7/WVPcwIO9VA668Pu8RkO7+0G76SLROeyw9CpQ061i4mA==",
       "dependencies": {
         "ansi-styles": "^4.1.0",
@@ -206,12 +193,10 @@
     },
     "node_modules/chardet": {
       "version": "0.7.0",
-      "resolved": "https://registry.npmjs.org/chardet/-/chardet-0.7.0.tgz",
       "integrity": "sha512-mT8iDcrh03qDGRRmoA2hmBJnxpllMR+0/0qlzjqZES6NdiWDcZkCNAk4rPFZ9Q85r27unkiNNg8ZOiwZXBHwcA=="
     },
     "node_modules/cli-cursor": {
       "version": "3.1.0",
-      "resolved": "https://registry.npmjs.org/cli-cursor/-/cli-cursor-3.1.0.tgz",
       "integrity": "sha512-I/zHAwsKf9FqGoXM4WWRACob9+SNukZTd94DWF57E4toouRulbCxcUh6RKUEOQlYTHJnzkPMySvPNaaSLNfLZw==",
       "dependencies": {
         "restore-cursor": "^3.1.0"
@@ -222,7 +207,6 @@
     },
     "node_modules/cli-width": {
       "version": "3.0.0",
-      "resolved": "https://registry.npmjs.org/cli-width/-/cli-width-3.0.0.tgz",
       "integrity": "sha512-FxqpkPPwu1HjuN93Omfm4h8uIanXofW0RxVEW3k5RKx+mJJYSthzNhp32Kzxxy3YAEZ/Dc/EWN1vZRY0+kOhbw==",
       "engines": {
         "node": ">= 10"
@@ -230,7 +214,6 @@
     },
     "node_modules/color-convert": {
       "version": "2.0.1",
-      "resolved": "https://registry.npmjs.org/color-convert/-/color-convert-2.0.1.tgz",
       "integrity": "sha512-RRECPsj7iu/xb5oKYcsFHSppFNnsj/52OVTRKb4zP5onXwVF3zVmmToNcOfGC+CRDpfK/U584fMg38ZHCaElKQ==",
       "dependencies": {
         "color-name": "~1.1.4"
@@ -241,12 +224,10 @@
     },
     "node_modules/color-name": {
       "version": "1.1.4",
-      "resolved": "https://registry.npmjs.org/color-name/-/color-name-1.1.4.tgz",
       "integrity": "sha512-dOy+3AuW3a2wNbZHIuMZpTcgjGuLU/uBL/ubcZF9OXbDo8ff4O8yVp5Bf0efS8uEoYo5q4Fx7dY9OgQGXgAsQA=="
     },
     "node_modules/combined-stream": {
       "version": "1.0.8",
-      "resolved": "https://registry.npmjs.org/combined-stream/-/combined-stream-1.0.8.tgz",
       "integrity": "sha512-FQN4MRfuJeHf7cBbBMJFXhKSDq+2kAArBlmRBvcvFE5BB1HZKXtSFASDhdlz9zOYwxh8lDdnvmMOe/+5cdoEdg==",
       "dependencies": {
         "delayed-stream": "~1.0.0"
@@ -264,13 +245,11 @@
     },
     "node_modules/concat-map": {
       "version": "0.0.1",
-      "resolved": "https://registry.npmjs.org/concat-map/-/concat-map-0.0.1.tgz",
       "integrity": "sha1-2Klr13/Wjfd5OnMDajug1UBdR3s=",
       "dev": true
     },
     "node_modules/debug": {
       "version": "4.3.2",
-      "resolved": "https://registry.npmjs.org/debug/-/debug-4.3.2.tgz",
       "integrity": "sha512-mOp8wKcvj7XxC78zLgw/ZA+6TSgkoE2C/ienthhRD298T7UNwAg9diBpLRxC0mOezLl4B0xV7M0cCO6P/O0Xhw==",
       "dependencies": {
         "ms": "2.1.2"
@@ -286,7 +265,6 @@
     },
     "node_modules/delayed-stream": {
       "version": "1.0.0",
-      "resolved": "https://registry.npmjs.org/delayed-stream/-/delayed-stream-1.0.0.tgz",
       "integrity": "sha1-3zrhmayt+31ECqrgsp4icrJOxhk=",
       "engines": {
         "node": ">=0.4.0"
@@ -294,12 +272,10 @@
     },
     "node_modules/emoji-regex": {
       "version": "8.0.0",
-      "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-8.0.0.tgz",
       "integrity": "sha512-MSjYzcWNOA0ewAHpz0MxpYFvwg6yjy1NG3xteoqz644VCo/RPgnr1/GGt+ic3iJTzQ8Eu3TdM14SawnVUmGE6A=="
     },
     "node_modules/escape-string-regexp": {
       "version": "1.0.5",
-      "resolved": "https://registry.npmjs.org/escape-string-regexp/-/escape-string-regexp-1.0.5.tgz",
       "integrity": "sha1-G2HAViGQqN/2rjuyzwIAyhMLhtQ=",
       "engines": {
         "node": ">=0.8.0"
@@ -307,7 +283,6 @@
     },
     "node_modules/external-editor": {
       "version": "3.1.0",
-      "resolved": "https://registry.npmjs.org/external-editor/-/external-editor-3.1.0.tgz",
       "integrity": "sha512-hMQ4CX1p1izmuLYyZqLMO/qGNw10wSv9QDCPfzXfyFrOaCSSoRfqE1Kf1s5an66J5JZC62NewG+mK49jOCtQew==",
       "dependencies": {
         "chardet": "^0.7.0",
@@ -320,7 +295,6 @@
     },
     "node_modules/figures": {
       "version": "3.2.0",
-      "resolved": "https://registry.npmjs.org/figures/-/figures-3.2.0.tgz",
       "integrity": "sha512-yaduQFRKLXYOGgEn6AZau90j3ggSOyiqXU0F9JZfeXYhNa+Jk4X+s45A2zg5jns87GAFa34BBm2kXw4XpNcbdg==",
       "dependencies": {
         "escape-string-regexp": "^1.0.5"
@@ -346,13 +320,11 @@
     },
     "node_modules/fs.realpath": {
       "version": "1.0.0",
-      "resolved": "https://registry.npmjs.org/fs.realpath/-/fs.realpath-1.0.0.tgz",
       "integrity": "sha1-FQStJSMVjKpA20onh8sBQRmU6k8=",
       "dev": true
     },
     "node_modules/glob": {
       "version": "7.2.0",
-      "resolved": "https://registry.npmjs.org/glob/-/glob-7.2.0.tgz",
       "integrity": "sha512-lmLf6gtyrPq8tTjSmrO94wBeQbFR3HbLHbuyD69wuyQkImp2hWqMGB47OX65FBkPffO641IP9jWa1z4ivqG26Q==",
       "dev": true,
       "dependencies": {
@@ -372,12 +344,10 @@
     },
     "node_modules/graceful-fs": {
       "version": "4.2.8",
-      "resolved": "https://registry.npmjs.org/graceful-fs/-/graceful-fs-4.2.8.tgz",
       "integrity": "sha512-qkIilPUYcNhJpd33n0GBXTB1MMPp14TxEsEs0pTrsSVucApsYzW5V+Q8Qxhik6KU3evy+qkAAowTByymK0avdg=="
     },
     "node_modules/has-flag": {
       "version": "4.0.0",
-      "resolved": "https://registry.npmjs.org/has-flag/-/has-flag-4.0.0.tgz",
       "integrity": "sha512-EykJT/Q1KjTWctppgIAgfSO0tKVuZUjhgMr17kqTumMl6Afv3EISleU7qZUzoXDFTAHTDC4NOoG/ZxU3EvlMPQ==",
       "engines": {
         "node": ">=8"
@@ -385,7 +355,6 @@
     },
     "node_modules/https-proxy-agent": {
       "version": "5.0.0",
-      "resolved": "https://registry.npmjs.org/https-proxy-agent/-/https-proxy-agent-5.0.0.tgz",
       "integrity": "sha512-EkYm5BcKUGiduxzSt3Eppko+PiNWNEpa4ySk9vTC6wDsQJW9rHSa+UhGNJoRYp7bz6Ht1eaRIa6QaJqO5rCFbA==",
       "dependencies": {
         "agent-base": "6",
@@ -397,7 +366,6 @@
     },
     "node_modules/iconv-lite": {
       "version": "0.4.24",
-      "resolved": "https://registry.npmjs.org/iconv-lite/-/iconv-lite-0.4.24.tgz",
       "integrity": "sha512-v3MXnZAcvnywkTUEZomIActle7RXXeedOR31wwl7VlyoXO4Qi9arvSenNQWne1TcRwhCL1HwLI21bEqdpj8/rA==",
       "dependencies": {
         "safer-buffer": ">= 2.1.2 < 3"
@@ -408,7 +376,6 @@
     },
     "node_modules/inflight": {
       "version": "1.0.6",
-      "resolved": "https://registry.npmjs.org/inflight/-/inflight-1.0.6.tgz",
       "integrity": "sha1-Sb1jMdfQLQwJvJEKEHW6gWW1bfk=",
       "dev": true,
       "dependencies": {
@@ -418,13 +385,11 @@
     },
     "node_modules/inherits": {
       "version": "2.0.4",
-      "resolved": "https://registry.npmjs.org/inherits/-/inherits-2.0.4.tgz",
       "integrity": "sha512-k/vGaX4/Yla3WzyMCvTQOXYeIHvqOKtnqBduzTHpzpQZzAskKMhZ2K+EnBiSM9zGSoIFeMpXKxa4dYeZIQqewQ==",
       "dev": true
     },
     "node_modules/inquirer": {
       "version": "8.0.0",
-      "resolved": "https://registry.npmjs.org/inquirer/-/inquirer-8.0.0.tgz",
       "integrity": "sha512-ON8pEJPPCdyjxj+cxsYRe6XfCJepTxANdNnTebsTuQgXpRyZRRT9t4dJwjRubgmvn20CLSEnozRUayXyM9VTXA==",
       "dependencies": {
         "ansi-escapes": "^4.2.1",
@@ -447,7 +412,6 @@
     },
     "node_modules/is-fullwidth-code-point": {
       "version": "3.0.0",
-      "resolved": "https://registry.npmjs.org/is-fullwidth-code-point/-/is-fullwidth-code-point-3.0.0.tgz",
       "integrity": "sha512-zymm5+u+sCsSWyD9qNaejV3DFvhCKclKdizYaJUuHA83RLjb7nSuGnddCHGv0hk+KY7BMAlsWeK4Ueg6EV6XQg==",
       "engines": {
         "node": ">=8"
@@ -455,17 +419,14 @@
     },
     "node_modules/is-promise": {
       "version": "2.2.2",
-      "resolved": "https://registry.npmjs.org/is-promise/-/is-promise-2.2.2.tgz",
       "integrity": "sha512-+lP4/6lKUBfQjZ2pdxThZvLUAafmZb8OAxFb8XXtiQmS35INgr85hdOGoEs124ez1FCnZJt6jau/T+alh58QFQ=="
     },
     "node_modules/lodash": {
       "version": "4.17.21",
-      "resolved": "https://registry.npmjs.org/lodash/-/lodash-4.17.21.tgz",
       "integrity": "sha512-v2kDEe57lecTulaDIuNTPy3Ry4gLGJ6Z1O3vE1krgXZNrsQ+LFTGHVxVjcXPs17LhbZVGedAJv8XZ1tvj5FvSg=="
     },
     "node_modules/lowdb": {
       "version": "1.0.0",
-      "resolved": "https://registry.npmjs.org/lowdb/-/lowdb-1.0.0.tgz",
       "integrity": "sha512-2+x8esE/Wb9SQ1F9IHaYWfsC9FIecLOPrK4g17FGEayjUWH172H6nwicRovGvSE2CPZouc2MCIqCI7h9d+GftQ==",
       "dependencies": {
         "graceful-fs": "^4.1.3",
@@ -479,19 +440,17 @@
       }
     },
     "node_modules/mime-db": {
-      "version": "1.49.0",
-      "resolved": "https://registry.npmjs.org/mime-db/-/mime-db-1.49.0.tgz",
-      "integrity": "sha512-CIc8j9URtOVApSFCQIF+VBkX1RwXp/oMMOrqdyXSBXq5RWNEsRfyj1kiRnQgmNXmHxPoFIxOroKA3zcU9P+nAA==",
+      "version": "1.50.0",
+      "integrity": "sha512-9tMZCDlYHqeERXEHO9f/hKfNXhre5dK2eE/krIvUjZbS2KPcqGDfNShIWS1uW9XOTKQKqK6qbeOci18rbfW77A==",
       "engines": {
         "node": ">= 0.6"
       }
     },
     "node_modules/mime-types": {
-      "version": "2.1.32",
-      "resolved": "https://registry.npmjs.org/mime-types/-/mime-types-2.1.32.tgz",
-      "integrity": "sha512-hJGaVS4G4c9TSMYh2n6SQAGrC4RnfU+daP8G7cSCmaqNjiOoUY0VHCMS42pxnQmVF1GWwFhbHWn3RIxCqTmZ9A==",
+      "version": "2.1.33",
+      "integrity": "sha512-plLElXp7pRDd0bNZHw+nMd52vRYjLwQjygaNg7ddJ2uJtTlmnTCjWuPKxVu6//AdaRuME84SvLW91sIkBqGT0g==",
       "dependencies": {
-        "mime-db": "1.49.0"
+        "mime-db": "1.50.0"
       },
       "engines": {
         "node": ">= 0.6"
@@ -499,7 +458,6 @@
     },
     "node_modules/mimic-fn": {
       "version": "2.1.0",
-      "resolved": "https://registry.npmjs.org/mimic-fn/-/mimic-fn-2.1.0.tgz",
       "integrity": "sha512-OqbOk5oEQeAZ8WXWydlu9HJjz9WVdEIvamMCcXmuqUYjTknH/sqsWvhQ3vgwKFRR1HpjvNBKQ37nbJgYzGqGcg==",
       "engines": {
         "node": ">=6"
@@ -507,7 +465,6 @@
     },
     "node_modules/minimatch": {
       "version": "3.0.4",
-      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.0.4.tgz",
       "integrity": "sha512-yJHVQEhyqPLUTgt9B83PXu6W3rx4MvvHvSUvToogpwoGDOUQ+yDrR0HRot+yOCdCO7u4hX3pWft6kWBBcqh0UA==",
       "dev": true,
       "dependencies": {
@@ -519,17 +476,14 @@
     },
     "node_modules/ms": {
       "version": "2.1.2",
-      "resolved": "https://registry.npmjs.org/ms/-/ms-2.1.2.tgz",
       "integrity": "sha512-sGkPx+VjMtmA6MX27oA4FBFELFCZZ4S4XqeGOXCv68tT+jb3vk/RyaKWP0PTKyWtmLSM0b+adUTEvbs1PEaH2w=="
     },
     "node_modules/mute-stream": {
       "version": "0.0.8",
-      "resolved": "https://registry.npmjs.org/mute-stream/-/mute-stream-0.0.8.tgz",
       "integrity": "sha512-nnbWWOkoWyUsTjKrhgD0dcz22mdkSnpYqbEjIm2nhwhuxlSkpywJmBo8h0ZqJdkp73mb90SssHkN4rsRaBAfAA=="
     },
     "node_modules/node-fetch": {
       "version": "2.6.5",
-      "resolved": "https://registry.npmjs.org/node-fetch/-/node-fetch-2.6.5.tgz",
       "integrity": "sha512-mmlIVHJEu5rnIxgEgez6b9GgWXbkZj5YZ7fx+2r94a2E+Uirsp6HsPTPlomfdHtpt/B0cdKviwkoaM6pyvUOpQ==",
       "dependencies": {
         "whatwg-url": "^5.0.0"
@@ -540,7 +494,6 @@
     },
     "node_modules/once": {
       "version": "1.4.0",
-      "resolved": "https://registry.npmjs.org/once/-/once-1.4.0.tgz",
       "integrity": "sha1-WDsap3WWHUsROsF9nFC6753Xa9E=",
       "dev": true,
       "dependencies": {
@@ -549,7 +502,6 @@
     },
     "node_modules/onetime": {
       "version": "5.1.2",
-      "resolved": "https://registry.npmjs.org/onetime/-/onetime-5.1.2.tgz",
       "integrity": "sha512-kbpaSSGJTWdAY5KPVeMOKXSrPtr8C8C7wodJbcsd51jRnmD+GZu8Y0VoU6Dm5Z4vWr0Ig/1NKuWRKf7j5aaYSg==",
       "dependencies": {
         "mimic-fn": "^2.1.0"
@@ -563,7 +515,6 @@
     },
     "node_modules/os-tmpdir": {
       "version": "1.0.2",
-      "resolved": "https://registry.npmjs.org/os-tmpdir/-/os-tmpdir-1.0.2.tgz",
       "integrity": "sha1-u+Z0BseaqFxc/sdm/lc0VV36EnQ=",
       "engines": {
         "node": ">=0.10.0"
@@ -571,7 +522,6 @@
     },
     "node_modules/path-is-absolute": {
       "version": "1.0.1",
-      "resolved": "https://registry.npmjs.org/path-is-absolute/-/path-is-absolute-1.0.1.tgz",
       "integrity": "sha1-F0uSaHNVNP+8es5r9TpanhtcX18=",
       "dev": true,
       "engines": {
@@ -580,7 +530,6 @@
     },
     "node_modules/pify": {
       "version": "3.0.0",
-      "resolved": "https://registry.npmjs.org/pify/-/pify-3.0.0.tgz",
       "integrity": "sha1-5aSs0sEB/fPZpNB/DbxNtJ3SgXY=",
       "engines": {
         "node": ">=4"
@@ -588,7 +537,6 @@
     },
     "node_modules/restore-cursor": {
       "version": "3.1.0",
-      "resolved": "https://registry.npmjs.org/restore-cursor/-/restore-cursor-3.1.0.tgz",
       "integrity": "sha512-l+sSefzHpj5qimhFSE5a8nufZYAM3sBSVMAPtYkmC+4EH2anSGaEMXSD0izRQbu9nfyQ9y5JrVmp7E8oZrUjvA==",
       "dependencies": {
         "onetime": "^5.1.0",
@@ -600,7 +548,6 @@
     },
     "node_modules/rimraf": {
       "version": "3.0.2",
-      "resolved": "https://registry.npmjs.org/rimraf/-/rimraf-3.0.2.tgz",
       "integrity": "sha512-JZkJMZkAGFFPP2YqXZXPbMlMBgsxzE8ILs4lMIX/2o0L9UBw9O/Y3o6wFw/i9YLapcUJWwqbi3kdxIPdC62TIA==",
       "dev": true,
       "dependencies": {
@@ -615,7 +562,6 @@
     },
     "node_modules/run-async": {
       "version": "2.4.1",
-      "resolved": "https://registry.npmjs.org/run-async/-/run-async-2.4.1.tgz",
       "integrity": "sha512-tvVnVv01b8c1RrA6Ep7JkStj85Guv/YrMcwqYQnwjsAS2cTmmPGBBjAjpCW7RrSodNSoE2/qg9O4bceNvUuDgQ==",
       "engines": {
         "node": ">=0.12.0"
@@ -623,7 +569,6 @@
     },
     "node_modules/rxjs": {
       "version": "6.6.7",
-      "resolved": "https://registry.npmjs.org/rxjs/-/rxjs-6.6.7.tgz",
       "integrity": "sha512-hTdwr+7yYNIT5n4AMYp85KA6yw2Va0FLa3Rguvbpa4W3I5xynaBZo41cM3XM+4Q6fRMj3sBYIR1VAmZMXYJvRQ==",
       "dependencies": {
         "tslib": "^1.9.0"
@@ -634,17 +579,14 @@
     },
     "node_modules/safer-buffer": {
       "version": "2.1.2",
-      "resolved": "https://registry.npmjs.org/safer-buffer/-/safer-buffer-2.1.2.tgz",
       "integrity": "sha512-YZo3K82SD7Riyi0E1EQPojLz7kpepnSQI9IyPbHHg1XXXevb5dJI7tpyN2ADxGcQbHG7vcyRHk0cbwqcQriUtg=="
     },
     "node_modules/signal-exit": {
-      "version": "3.0.4",
-      "resolved": "https://registry.npmjs.org/signal-exit/-/signal-exit-3.0.4.tgz",
-      "integrity": "sha512-rqYhcAnZ6d/vTPGghdrw7iumdcbXpsk1b8IG/rz+VWV51DM0p7XCtMoJ3qhPLIbp3tvyt3pKRbaaEMZYpHto8Q=="
+      "version": "3.0.5",
+      "integrity": "sha512-KWcOiKeQj6ZyXx7zq4YxSMgHRlod4czeBQZrPb8OKcohcqAXShm7E20kEMle9WBt26hFcAf0qLOcp5zmY7kOqQ=="
     },
     "node_modules/steno": {
       "version": "0.4.4",
-      "resolved": "https://registry.npmjs.org/steno/-/steno-0.4.4.tgz",
       "integrity": "sha1-BxEFvfwobmYVwEA8J+nXtdy4Vcs=",
       "dependencies": {
         "graceful-fs": "^4.1.3"
@@ -652,7 +594,6 @@
     },
     "node_modules/string-width": {
       "version": "4.2.3",
-      "resolved": "https://registry.npmjs.org/string-width/-/string-width-4.2.3.tgz",
       "integrity": "sha512-wKyQRQpjJ0sIp62ErSZdGsjMJWsap5oRNihHhu6G7JVO/9jIB6UyevL+tXuOqrng8j/cxKTWyWUwvSTriiZz/g==",
       "dependencies": {
         "emoji-regex": "^8.0.0",
@@ -665,7 +606,6 @@
     },
     "node_modules/strip-ansi": {
       "version": "6.0.1",
-      "resolved": "https://registry.npmjs.org/strip-ansi/-/strip-ansi-6.0.1.tgz",
       "integrity": "sha512-Y38VPSHcqkFrCpFnQ9vuSXmquuv5oXOKpGeT6aGrr3o3Gc9AlVa6JBfUSOCnbxGGZF+/0ooI7KrPuUSztUdU5A==",
       "dependencies": {
         "ansi-regex": "^5.0.1"
@@ -676,7 +616,6 @@
     },
     "node_modules/supports-color": {
       "version": "7.2.0",
-      "resolved": "https://registry.npmjs.org/supports-color/-/supports-color-7.2.0.tgz",
       "integrity": "sha512-qpCAvRl9stuOHveKsn7HncJRvv501qIacKzQlO/+Lwxc9+0q2wLyv4Dfvt80/DPn2pqOBsJdDiogXGR9+OvwRw==",
       "dependencies": {
         "has-flag": "^4.0.0"
@@ -687,12 +626,10 @@
     },
     "node_modules/through": {
       "version": "2.3.8",
-      "resolved": "https://registry.npmjs.org/through/-/through-2.3.8.tgz",
       "integrity": "sha1-DdTJ/6q8NXlgsbckEV1+Doai4fU="
     },
     "node_modules/tmp": {
       "version": "0.0.33",
-      "resolved": "https://registry.npmjs.org/tmp/-/tmp-0.0.33.tgz",
       "integrity": "sha512-jRCJlojKnZ3addtTOjdIqoRuPEKBvNXcGYqzO6zWZX8KfKEpnGY5jfggJQ3EjKuu8D4bJRr0y+cYJFmYbImXGw==",
       "dependencies": {
         "os-tmpdir": "~1.0.2"
@@ -703,17 +640,14 @@
     },
     "node_modules/tr46": {
       "version": "0.0.3",
-      "resolved": "https://registry.npmjs.org/tr46/-/tr46-0.0.3.tgz",
       "integrity": "sha1-gYT9NH2snNwYWZLzpmIuFLnZq2o="
     },
     "node_modules/tslib": {
       "version": "1.14.1",
-      "resolved": "https://registry.npmjs.org/tslib/-/tslib-1.14.1.tgz",
       "integrity": "sha512-Xni35NKzjgMrwevysHTCArtLDpPvye8zV/0E4EyYn43P7/7qvQwPh9BGkHewbMulVntbigmcT7rdX3BNo9wRJg=="
     },
     "node_modules/type-fest": {
       "version": "0.21.3",
-      "resolved": "https://registry.npmjs.org/type-fest/-/type-fest-0.21.3.tgz",
       "integrity": "sha512-t0rzBq87m3fVcduHDUFhKmyyX+9eo6WQjZvf51Ea/M0Q7+T374Jp1aUiyUl0GKxp8M/OETVHSDvmkyPgvX+X2w==",
       "engines": {
         "node": ">=10"
@@ -723,9 +657,9 @@
       }
     },
     "node_modules/typescript": {
-      "version": "4.1.5",
-      "resolved": "https://registry.npmjs.org/typescript/-/typescript-4.1.5.tgz",
-      "integrity": "sha512-6OSu9PTIzmn9TCDiovULTnET6BgXtDYL4Gg4szY+cGsc3JP1dQL8qvE8kShTRx1NIw4Q9IBHlwODjkjWEtMUyA==",
+      "version": "4.3.5",
+      "resolved": "https://registry.npmjs.org/typescript/-/typescript-4.3.5.tgz",
+      "integrity": "sha512-DqQgihaQ9cUrskJo9kIyW/+g0Vxsk8cDtZ52a3NGh0YNTfpUSArXSohyUGnvbPazEPLu398C0UxmKSOrPumUzA==",
       "dev": true,
       "bin": {
         "tsc": "bin/tsc",
@@ -737,12 +671,10 @@
     },
     "node_modules/webidl-conversions": {
       "version": "3.0.1",
-      "resolved": "https://registry.npmjs.org/webidl-conversions/-/webidl-conversions-3.0.1.tgz",
       "integrity": "sha1-JFNCdeKnvGvnvIZhHMFq4KVlSHE="
     },
     "node_modules/whatwg-url": {
       "version": "5.0.0",
-      "resolved": "https://registry.npmjs.org/whatwg-url/-/whatwg-url-5.0.0.tgz",
       "integrity": "sha1-lmRU6HZUYuN2RNNib2dCzotwll0=",
       "dependencies": {
         "tr46": "~0.0.3",
@@ -751,7 +683,6 @@
     },
     "node_modules/wrappy": {
       "version": "1.0.2",
-      "resolved": "https://registry.npmjs.org/wrappy/-/wrappy-1.0.2.tgz",
       "integrity": "sha1-tSQ9jz7BqjXxNkYFvA0QNuMKtp8=",
       "dev": true
     }
@@ -763,7 +694,7 @@
         "@microsoft/signalr": "5.0.10",
         "@microsoft/signalr-protocol-msgpack": "5.0.10",
         "@types/lunr": "^2.3.3",
-        "@types/node": "^14.17.1",
+        "@types/node": "^16.11.12",
         "@types/node-forge": "^0.9.7",
         "@types/papaparse": "^5.2.5",
         "@types/tldjs": "^2.3.0",
@@ -774,15 +705,14 @@
         "node-forge": "^0.10.0",
         "papaparse": "^5.3.0",
         "rimraf": "^3.0.2",
-        "rxjs": "6.6.7",
+        "rxjs": "^7.4.0",
         "tldjs": "^2.3.1",
-        "typescript": "4.1.5",
+        "typescript": "4.3.5",
         "zxcvbn": "^4.4.2"
       }
     },
     "@types/inquirer": {
       "version": "7.3.3",
-      "resolved": "https://registry.npmjs.org/@types/inquirer/-/inquirer-7.3.3.tgz",
       "integrity": "sha512-HhxyLejTHMfohAuhRun4csWigAMjXTmRyiJTU1Y/I1xmggikFMkOUoMQRlFm+zQcPEGHSs3io/0FAmNZf8EymQ==",
       "dev": true,
       "requires": {
@@ -792,13 +722,11 @@
     },
     "@types/lodash": {
       "version": "4.14.175",
-      "resolved": "https://registry.npmjs.org/@types/lodash/-/lodash-4.14.175.tgz",
       "integrity": "sha512-XmdEOrKQ8a1Y/yxQFOMbC47G/V2VDO1GvMRnl4O75M4GW/abC5tnfzadQYkqEveqRM1dEJGFFegfPNA2vvx2iw==",
       "dev": true
     },
     "@types/lowdb": {
       "version": "1.0.11",
-      "resolved": "https://registry.npmjs.org/@types/lowdb/-/lowdb-1.0.11.tgz",
       "integrity": "sha512-h99VMxvTuz+VsXUVCCJo4dsps4vbkXwvU71TpmxDoiBU24bJ0VBygIHgmMm+UPoQIFihmV6euRik4z8J7XDJWg==",
       "dev": true,
       "requires": {
@@ -806,14 +734,13 @@
       }
     },
     "@types/node": {
-      "version": "14.17.19",
-      "resolved": "https://registry.npmjs.org/@types/node/-/node-14.17.19.tgz",
-      "integrity": "sha512-jjYI6NkyfXykucU6ELEoT64QyKOdvaA6enOqKtP4xUsGY0X0ZUZz29fUmrTRo+7v7c6TgDu82q3GHHaCEkqZwA==",
+      "version": "16.11.12",
+      "resolved": "https://registry.npmjs.org/@types/node/-/node-16.11.12.tgz",
+      "integrity": "sha512-+2Iggwg7PxoO5Kyhvsq9VarmPbIelXP070HMImEpbtGCoyWNINQj4wzjbQCXzdHTRXnqufutJb5KAURZANNBAw==",
       "dev": true
     },
     "@types/node-fetch": {
       "version": "2.5.12",
-      "resolved": "https://registry.npmjs.org/@types/node-fetch/-/node-fetch-2.5.12.tgz",
       "integrity": "sha512-MKgC4dlq4kKNa/mYrwpKfzQMB5X3ee5U6fSprkKpToBqBmX4nFZL9cW5jl6sWn+xpRJ7ypWh2yyqqr8UUCstSw==",
       "dev": true,
       "requires": {
@@ -823,7 +750,6 @@
       "dependencies": {
         "form-data": {
           "version": "3.0.1",
-          "resolved": "https://registry.npmjs.org/form-data/-/form-data-3.0.1.tgz",
           "integrity": "sha512-RHkBKtLWUVwd7SqRIvCZMEvAMoGUp0XU+seQiZejj0COz3RI3hWP4sCv3gZWWLjJTd7rGwcsF5eKZGii0r/hbg==",
           "dev": true,
           "requires": {
@@ -836,7 +762,6 @@
     },
     "@types/through": {
       "version": "0.0.30",
-      "resolved": "https://registry.npmjs.org/@types/through/-/through-0.0.30.tgz",
       "integrity": "sha512-FvnCJljyxhPM3gkRgWmxmDZyAQSiBQQWLI0A0VFL0K7W1oRUrPJSqNO0NvTnLkBcotdlp3lKvaT0JrnyRDkzOg==",
       "dev": true,
       "requires": {
@@ -845,7 +770,6 @@
     },
     "agent-base": {
       "version": "6.0.2",
-      "resolved": "https://registry.npmjs.org/agent-base/-/agent-base-6.0.2.tgz",
       "integrity": "sha512-RZNwNclF7+MS/8bDg70amg32dyeZGZxiDuQmZxKLAlQjr3jGyLx+4Kkk58UO7D2QdgFIQCovuSuZESne6RG6XQ==",
       "requires": {
         "debug": "4"
@@ -853,7 +777,6 @@
     },
     "ansi-escapes": {
       "version": "4.3.2",
-      "resolved": "https://registry.npmjs.org/ansi-escapes/-/ansi-escapes-4.3.2.tgz",
       "integrity": "sha512-gKXj5ALrKWQLsYG9jlTRmR/xKluxHV+Z9QEwNIgCfM1/uwPMCuzVVnh5mwTd+OuBZcwSIMbqssNWRm1lE51QaQ==",
       "requires": {
         "type-fest": "^0.21.3"
@@ -861,12 +784,10 @@
     },
     "ansi-regex": {
       "version": "5.0.1",
-      "resolved": "https://registry.npmjs.org/ansi-regex/-/ansi-regex-5.0.1.tgz",
       "integrity": "sha512-quJQXlTSUGL2LH9SUXo8VwsY4soanhgo6LNSm84E1LBcE8s3O0wpdiRzyR9z/ZZJMlMWv37qOOb9pdJlMUEKFQ=="
     },
     "ansi-styles": {
       "version": "4.3.0",
-      "resolved": "https://registry.npmjs.org/ansi-styles/-/ansi-styles-4.3.0.tgz",
       "integrity": "sha512-zbB9rCJAT1rbjiVDb2hqKFHNYLxgtk8NURxZ3IZwD3F6NtxbXZQCnnSi1Lkx+IDohdPlFp222wVALIheZJQSEg==",
       "requires": {
         "color-convert": "^2.0.1"
@@ -874,18 +795,15 @@
     },
     "asynckit": {
       "version": "0.4.0",
-      "resolved": "https://registry.npmjs.org/asynckit/-/asynckit-0.4.0.tgz",
       "integrity": "sha1-x57Zf380y48robyXkLzDZkdLS3k="
     },
     "balanced-match": {
       "version": "1.0.2",
-      "resolved": "https://registry.npmjs.org/balanced-match/-/balanced-match-1.0.2.tgz",
       "integrity": "sha512-3oSeUO0TMV67hN1AmbXsK4yaqU7tjiHlbxRDZOpH0KW9+CeX4bRAaX0Anxt0tx2MrpRpWwQaPwIlISEJhYU5Pw==",
       "dev": true
     },
     "brace-expansion": {
       "version": "1.1.11",
-      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-1.1.11.tgz",
       "integrity": "sha512-iCuPHDFgrHX7H2vEI/5xpz07zSHB00TpugqhmYtVmMO6518mCuRMoOYFldEBl0g187ufozdaHgWKcYFb61qGiA==",
       "dev": true,
       "requires": {
@@ -895,7 +813,6 @@
     },
     "chalk": {
       "version": "4.1.2",
-      "resolved": "https://registry.npmjs.org/chalk/-/chalk-4.1.2.tgz",
       "integrity": "sha512-oKnbhFyRIXpUuez8iBMmyEa4nbj4IOQyuhc/wy9kY7/WVPcwIO9VA668Pu8RkO7+0G76SLROeyw9CpQ061i4mA==",
       "requires": {
         "ansi-styles": "^4.1.0",
@@ -904,12 +821,10 @@
     },
     "chardet": {
       "version": "0.7.0",
-      "resolved": "https://registry.npmjs.org/chardet/-/chardet-0.7.0.tgz",
       "integrity": "sha512-mT8iDcrh03qDGRRmoA2hmBJnxpllMR+0/0qlzjqZES6NdiWDcZkCNAk4rPFZ9Q85r27unkiNNg8ZOiwZXBHwcA=="
     },
     "cli-cursor": {
       "version": "3.1.0",
-      "resolved": "https://registry.npmjs.org/cli-cursor/-/cli-cursor-3.1.0.tgz",
       "integrity": "sha512-I/zHAwsKf9FqGoXM4WWRACob9+SNukZTd94DWF57E4toouRulbCxcUh6RKUEOQlYTHJnzkPMySvPNaaSLNfLZw==",
       "requires": {
         "restore-cursor": "^3.1.0"
@@ -917,12 +832,10 @@
     },
     "cli-width": {
       "version": "3.0.0",
-      "resolved": "https://registry.npmjs.org/cli-width/-/cli-width-3.0.0.tgz",
       "integrity": "sha512-FxqpkPPwu1HjuN93Omfm4h8uIanXofW0RxVEW3k5RKx+mJJYSthzNhp32Kzxxy3YAEZ/Dc/EWN1vZRY0+kOhbw=="
     },
     "color-convert": {
       "version": "2.0.1",
-      "resolved": "https://registry.npmjs.org/color-convert/-/color-convert-2.0.1.tgz",
       "integrity": "sha512-RRECPsj7iu/xb5oKYcsFHSppFNnsj/52OVTRKb4zP5onXwVF3zVmmToNcOfGC+CRDpfK/U584fMg38ZHCaElKQ==",
       "requires": {
         "color-name": "~1.1.4"
@@ -930,29 +843,26 @@
     },
     "color-name": {
       "version": "1.1.4",
-      "resolved": "https://registry.npmjs.org/color-name/-/color-name-1.1.4.tgz",
       "integrity": "sha512-dOy+3AuW3a2wNbZHIuMZpTcgjGuLU/uBL/ubcZF9OXbDo8ff4O8yVp5Bf0efS8uEoYo5q4Fx7dY9OgQGXgAsQA=="
     },
     "combined-stream": {
       "version": "1.0.8",
-      "resolved": "https://registry.npmjs.org/combined-stream/-/combined-stream-1.0.8.tgz",
       "integrity": "sha512-FQN4MRfuJeHf7cBbBMJFXhKSDq+2kAArBlmRBvcvFE5BB1HZKXtSFASDhdlz9zOYwxh8lDdnvmMOe/+5cdoEdg==",
       "requires": {
         "delayed-stream": "~1.0.0"
       }
     },
     "commander": {
-      "version": "7.2.0"
+      "version": "7.2.0",
+      "integrity": "sha512-QrWXB+ZQSVPmIWIhtEO9H+gwHaMGYiF5ChvoJ+K9ZGHG/sVsa6yiesAD1GC/x46sET00Xlwo1u49RVVVzvcSkw=="
     },
     "concat-map": {
       "version": "0.0.1",
-      "resolved": "https://registry.npmjs.org/concat-map/-/concat-map-0.0.1.tgz",
       "integrity": "sha1-2Klr13/Wjfd5OnMDajug1UBdR3s=",
       "dev": true
     },
     "debug": {
       "version": "4.3.2",
-      "resolved": "https://registry.npmjs.org/debug/-/debug-4.3.2.tgz",
       "integrity": "sha512-mOp8wKcvj7XxC78zLgw/ZA+6TSgkoE2C/ienthhRD298T7UNwAg9diBpLRxC0mOezLl4B0xV7M0cCO6P/O0Xhw==",
       "requires": {
         "ms": "2.1.2"
@@ -960,22 +870,18 @@
     },
     "delayed-stream": {
       "version": "1.0.0",
-      "resolved": "https://registry.npmjs.org/delayed-stream/-/delayed-stream-1.0.0.tgz",
       "integrity": "sha1-3zrhmayt+31ECqrgsp4icrJOxhk="
     },
     "emoji-regex": {
       "version": "8.0.0",
-      "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-8.0.0.tgz",
       "integrity": "sha512-MSjYzcWNOA0ewAHpz0MxpYFvwg6yjy1NG3xteoqz644VCo/RPgnr1/GGt+ic3iJTzQ8Eu3TdM14SawnVUmGE6A=="
     },
     "escape-string-regexp": {
       "version": "1.0.5",
-      "resolved": "https://registry.npmjs.org/escape-string-regexp/-/escape-string-regexp-1.0.5.tgz",
       "integrity": "sha1-G2HAViGQqN/2rjuyzwIAyhMLhtQ="
     },
     "external-editor": {
       "version": "3.1.0",
-      "resolved": "https://registry.npmjs.org/external-editor/-/external-editor-3.1.0.tgz",
       "integrity": "sha512-hMQ4CX1p1izmuLYyZqLMO/qGNw10wSv9QDCPfzXfyFrOaCSSoRfqE1Kf1s5an66J5JZC62NewG+mK49jOCtQew==",
       "requires": {
         "chardet": "^0.7.0",
@@ -985,7 +891,6 @@
     },
     "figures": {
       "version": "3.2.0",
-      "resolved": "https://registry.npmjs.org/figures/-/figures-3.2.0.tgz",
       "integrity": "sha512-yaduQFRKLXYOGgEn6AZau90j3ggSOyiqXU0F9JZfeXYhNa+Jk4X+s45A2zg5jns87GAFa34BBm2kXw4XpNcbdg==",
       "requires": {
         "escape-string-regexp": "^1.0.5"
@@ -993,6 +898,7 @@
     },
     "form-data": {
       "version": "4.0.0",
+      "integrity": "sha512-ETEklSGi5t0QMZuiXoA/Q6vcnxcLQP5vdugSpuAyi6SVGi2clPPp+xgEhuMaHC+zGgn31Kd235W35f7Hykkaww==",
       "requires": {
         "asynckit": "^0.4.0",
         "combined-stream": "^1.0.8",
@@ -1001,13 +907,11 @@
     },
     "fs.realpath": {
       "version": "1.0.0",
-      "resolved": "https://registry.npmjs.org/fs.realpath/-/fs.realpath-1.0.0.tgz",
       "integrity": "sha1-FQStJSMVjKpA20onh8sBQRmU6k8=",
       "dev": true
     },
     "glob": {
       "version": "7.2.0",
-      "resolved": "https://registry.npmjs.org/glob/-/glob-7.2.0.tgz",
       "integrity": "sha512-lmLf6gtyrPq8tTjSmrO94wBeQbFR3HbLHbuyD69wuyQkImp2hWqMGB47OX65FBkPffO641IP9jWa1z4ivqG26Q==",
       "dev": true,
       "requires": {
@@ -1021,17 +925,14 @@
     },
     "graceful-fs": {
       "version": "4.2.8",
-      "resolved": "https://registry.npmjs.org/graceful-fs/-/graceful-fs-4.2.8.tgz",
       "integrity": "sha512-qkIilPUYcNhJpd33n0GBXTB1MMPp14TxEsEs0pTrsSVucApsYzW5V+Q8Qxhik6KU3evy+qkAAowTByymK0avdg=="
     },
     "has-flag": {
       "version": "4.0.0",
-      "resolved": "https://registry.npmjs.org/has-flag/-/has-flag-4.0.0.tgz",
       "integrity": "sha512-EykJT/Q1KjTWctppgIAgfSO0tKVuZUjhgMr17kqTumMl6Afv3EISleU7qZUzoXDFTAHTDC4NOoG/ZxU3EvlMPQ=="
     },
     "https-proxy-agent": {
       "version": "5.0.0",
-      "resolved": "https://registry.npmjs.org/https-proxy-agent/-/https-proxy-agent-5.0.0.tgz",
       "integrity": "sha512-EkYm5BcKUGiduxzSt3Eppko+PiNWNEpa4ySk9vTC6wDsQJW9rHSa+UhGNJoRYp7bz6Ht1eaRIa6QaJqO5rCFbA==",
       "requires": {
         "agent-base": "6",
@@ -1040,7 +941,6 @@
     },
     "iconv-lite": {
       "version": "0.4.24",
-      "resolved": "https://registry.npmjs.org/iconv-lite/-/iconv-lite-0.4.24.tgz",
       "integrity": "sha512-v3MXnZAcvnywkTUEZomIActle7RXXeedOR31wwl7VlyoXO4Qi9arvSenNQWne1TcRwhCL1HwLI21bEqdpj8/rA==",
       "requires": {
         "safer-buffer": ">= 2.1.2 < 3"
@@ -1048,7 +948,6 @@
     },
     "inflight": {
       "version": "1.0.6",
-      "resolved": "https://registry.npmjs.org/inflight/-/inflight-1.0.6.tgz",
       "integrity": "sha1-Sb1jMdfQLQwJvJEKEHW6gWW1bfk=",
       "dev": true,
       "requires": {
@@ -1058,13 +957,11 @@
     },
     "inherits": {
       "version": "2.0.4",
-      "resolved": "https://registry.npmjs.org/inherits/-/inherits-2.0.4.tgz",
       "integrity": "sha512-k/vGaX4/Yla3WzyMCvTQOXYeIHvqOKtnqBduzTHpzpQZzAskKMhZ2K+EnBiSM9zGSoIFeMpXKxa4dYeZIQqewQ==",
       "dev": true
     },
     "inquirer": {
       "version": "8.0.0",
-      "resolved": "https://registry.npmjs.org/inquirer/-/inquirer-8.0.0.tgz",
       "integrity": "sha512-ON8pEJPPCdyjxj+cxsYRe6XfCJepTxANdNnTebsTuQgXpRyZRRT9t4dJwjRubgmvn20CLSEnozRUayXyM9VTXA==",
       "requires": {
         "ansi-escapes": "^4.2.1",
@@ -1084,22 +981,18 @@
     },
     "is-fullwidth-code-point": {
       "version": "3.0.0",
-      "resolved": "https://registry.npmjs.org/is-fullwidth-code-point/-/is-fullwidth-code-point-3.0.0.tgz",
       "integrity": "sha512-zymm5+u+sCsSWyD9qNaejV3DFvhCKclKdizYaJUuHA83RLjb7nSuGnddCHGv0hk+KY7BMAlsWeK4Ueg6EV6XQg=="
     },
     "is-promise": {
       "version": "2.2.2",
-      "resolved": "https://registry.npmjs.org/is-promise/-/is-promise-2.2.2.tgz",
       "integrity": "sha512-+lP4/6lKUBfQjZ2pdxThZvLUAafmZb8OAxFb8XXtiQmS35INgr85hdOGoEs124ez1FCnZJt6jau/T+alh58QFQ=="
     },
     "lodash": {
       "version": "4.17.21",
-      "resolved": "https://registry.npmjs.org/lodash/-/lodash-4.17.21.tgz",
       "integrity": "sha512-v2kDEe57lecTulaDIuNTPy3Ry4gLGJ6Z1O3vE1krgXZNrsQ+LFTGHVxVjcXPs17LhbZVGedAJv8XZ1tvj5FvSg=="
     },
     "lowdb": {
       "version": "1.0.0",
-      "resolved": "https://registry.npmjs.org/lowdb/-/lowdb-1.0.0.tgz",
       "integrity": "sha512-2+x8esE/Wb9SQ1F9IHaYWfsC9FIecLOPrK4g17FGEayjUWH172H6nwicRovGvSE2CPZouc2MCIqCI7h9d+GftQ==",
       "requires": {
         "graceful-fs": "^4.1.3",
@@ -1110,26 +1003,22 @@
       }
     },
     "mime-db": {
-      "version": "1.49.0",
-      "resolved": "https://registry.npmjs.org/mime-db/-/mime-db-1.49.0.tgz",
-      "integrity": "sha512-CIc8j9URtOVApSFCQIF+VBkX1RwXp/oMMOrqdyXSBXq5RWNEsRfyj1kiRnQgmNXmHxPoFIxOroKA3zcU9P+nAA=="
+      "version": "1.50.0",
+      "integrity": "sha512-9tMZCDlYHqeERXEHO9f/hKfNXhre5dK2eE/krIvUjZbS2KPcqGDfNShIWS1uW9XOTKQKqK6qbeOci18rbfW77A=="
     },
     "mime-types": {
-      "version": "2.1.32",
-      "resolved": "https://registry.npmjs.org/mime-types/-/mime-types-2.1.32.tgz",
-      "integrity": "sha512-hJGaVS4G4c9TSMYh2n6SQAGrC4RnfU+daP8G7cSCmaqNjiOoUY0VHCMS42pxnQmVF1GWwFhbHWn3RIxCqTmZ9A==",
+      "version": "2.1.33",
+      "integrity": "sha512-plLElXp7pRDd0bNZHw+nMd52vRYjLwQjygaNg7ddJ2uJtTlmnTCjWuPKxVu6//AdaRuME84SvLW91sIkBqGT0g==",
       "requires": {
-        "mime-db": "1.49.0"
+        "mime-db": "1.50.0"
       }
     },
     "mimic-fn": {
       "version": "2.1.0",
-      "resolved": "https://registry.npmjs.org/mimic-fn/-/mimic-fn-2.1.0.tgz",
       "integrity": "sha512-OqbOk5oEQeAZ8WXWydlu9HJjz9WVdEIvamMCcXmuqUYjTknH/sqsWvhQ3vgwKFRR1HpjvNBKQ37nbJgYzGqGcg=="
     },
     "minimatch": {
       "version": "3.0.4",
-      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.0.4.tgz",
       "integrity": "sha512-yJHVQEhyqPLUTgt9B83PXu6W3rx4MvvHvSUvToogpwoGDOUQ+yDrR0HRot+yOCdCO7u4hX3pWft6kWBBcqh0UA==",
       "dev": true,
       "requires": {
@@ -1138,17 +1027,14 @@
     },
     "ms": {
       "version": "2.1.2",
-      "resolved": "https://registry.npmjs.org/ms/-/ms-2.1.2.tgz",
       "integrity": "sha512-sGkPx+VjMtmA6MX27oA4FBFELFCZZ4S4XqeGOXCv68tT+jb3vk/RyaKWP0PTKyWtmLSM0b+adUTEvbs1PEaH2w=="
     },
     "mute-stream": {
       "version": "0.0.8",
-      "resolved": "https://registry.npmjs.org/mute-stream/-/mute-stream-0.0.8.tgz",
       "integrity": "sha512-nnbWWOkoWyUsTjKrhgD0dcz22mdkSnpYqbEjIm2nhwhuxlSkpywJmBo8h0ZqJdkp73mb90SssHkN4rsRaBAfAA=="
     },
     "node-fetch": {
       "version": "2.6.5",
-      "resolved": "https://registry.npmjs.org/node-fetch/-/node-fetch-2.6.5.tgz",
       "integrity": "sha512-mmlIVHJEu5rnIxgEgez6b9GgWXbkZj5YZ7fx+2r94a2E+Uirsp6HsPTPlomfdHtpt/B0cdKviwkoaM6pyvUOpQ==",
       "requires": {
         "whatwg-url": "^5.0.0"
@@ -1156,7 +1042,6 @@
     },
     "once": {
       "version": "1.4.0",
-      "resolved": "https://registry.npmjs.org/once/-/once-1.4.0.tgz",
       "integrity": "sha1-WDsap3WWHUsROsF9nFC6753Xa9E=",
       "dev": true,
       "requires": {
@@ -1165,7 +1050,6 @@
     },
     "onetime": {
       "version": "5.1.2",
-      "resolved": "https://registry.npmjs.org/onetime/-/onetime-5.1.2.tgz",
       "integrity": "sha512-kbpaSSGJTWdAY5KPVeMOKXSrPtr8C8C7wodJbcsd51jRnmD+GZu8Y0VoU6Dm5Z4vWr0Ig/1NKuWRKf7j5aaYSg==",
       "requires": {
         "mimic-fn": "^2.1.0"
@@ -1173,23 +1057,19 @@
     },
     "os-tmpdir": {
       "version": "1.0.2",
-      "resolved": "https://registry.npmjs.org/os-tmpdir/-/os-tmpdir-1.0.2.tgz",
       "integrity": "sha1-u+Z0BseaqFxc/sdm/lc0VV36EnQ="
     },
     "path-is-absolute": {
       "version": "1.0.1",
-      "resolved": "https://registry.npmjs.org/path-is-absolute/-/path-is-absolute-1.0.1.tgz",
       "integrity": "sha1-F0uSaHNVNP+8es5r9TpanhtcX18=",
       "dev": true
     },
     "pify": {
       "version": "3.0.0",
-      "resolved": "https://registry.npmjs.org/pify/-/pify-3.0.0.tgz",
       "integrity": "sha1-5aSs0sEB/fPZpNB/DbxNtJ3SgXY="
     },
     "restore-cursor": {
       "version": "3.1.0",
-      "resolved": "https://registry.npmjs.org/restore-cursor/-/restore-cursor-3.1.0.tgz",
       "integrity": "sha512-l+sSefzHpj5qimhFSE5a8nufZYAM3sBSVMAPtYkmC+4EH2anSGaEMXSD0izRQbu9nfyQ9y5JrVmp7E8oZrUjvA==",
       "requires": {
         "onetime": "^5.1.0",
@@ -1198,7 +1078,6 @@
     },
     "rimraf": {
       "version": "3.0.2",
-      "resolved": "https://registry.npmjs.org/rimraf/-/rimraf-3.0.2.tgz",
       "integrity": "sha512-JZkJMZkAGFFPP2YqXZXPbMlMBgsxzE8ILs4lMIX/2o0L9UBw9O/Y3o6wFw/i9YLapcUJWwqbi3kdxIPdC62TIA==",
       "dev": true,
       "requires": {
@@ -1207,12 +1086,10 @@
     },
     "run-async": {
       "version": "2.4.1",
-      "resolved": "https://registry.npmjs.org/run-async/-/run-async-2.4.1.tgz",
       "integrity": "sha512-tvVnVv01b8c1RrA6Ep7JkStj85Guv/YrMcwqYQnwjsAS2cTmmPGBBjAjpCW7RrSodNSoE2/qg9O4bceNvUuDgQ=="
     },
     "rxjs": {
       "version": "6.6.7",
-      "resolved": "https://registry.npmjs.org/rxjs/-/rxjs-6.6.7.tgz",
       "integrity": "sha512-hTdwr+7yYNIT5n4AMYp85KA6yw2Va0FLa3Rguvbpa4W3I5xynaBZo41cM3XM+4Q6fRMj3sBYIR1VAmZMXYJvRQ==",
       "requires": {
         "tslib": "^1.9.0"
@@ -1220,17 +1097,14 @@
     },
     "safer-buffer": {
       "version": "2.1.2",
-      "resolved": "https://registry.npmjs.org/safer-buffer/-/safer-buffer-2.1.2.tgz",
       "integrity": "sha512-YZo3K82SD7Riyi0E1EQPojLz7kpepnSQI9IyPbHHg1XXXevb5dJI7tpyN2ADxGcQbHG7vcyRHk0cbwqcQriUtg=="
     },
     "signal-exit": {
-      "version": "3.0.4",
-      "resolved": "https://registry.npmjs.org/signal-exit/-/signal-exit-3.0.4.tgz",
-      "integrity": "sha512-rqYhcAnZ6d/vTPGghdrw7iumdcbXpsk1b8IG/rz+VWV51DM0p7XCtMoJ3qhPLIbp3tvyt3pKRbaaEMZYpHto8Q=="
+      "version": "3.0.5",
+      "integrity": "sha512-KWcOiKeQj6ZyXx7zq4YxSMgHRlod4czeBQZrPb8OKcohcqAXShm7E20kEMle9WBt26hFcAf0qLOcp5zmY7kOqQ=="
     },
     "steno": {
       "version": "0.4.4",
-      "resolved": "https://registry.npmjs.org/steno/-/steno-0.4.4.tgz",
       "integrity": "sha1-BxEFvfwobmYVwEA8J+nXtdy4Vcs=",
       "requires": {
         "graceful-fs": "^4.1.3"
@@ -1238,7 +1112,6 @@
     },
     "string-width": {
       "version": "4.2.3",
-      "resolved": "https://registry.npmjs.org/string-width/-/string-width-4.2.3.tgz",
       "integrity": "sha512-wKyQRQpjJ0sIp62ErSZdGsjMJWsap5oRNihHhu6G7JVO/9jIB6UyevL+tXuOqrng8j/cxKTWyWUwvSTriiZz/g==",
       "requires": {
         "emoji-regex": "^8.0.0",
@@ -1248,7 +1121,6 @@
     },
     "strip-ansi": {
       "version": "6.0.1",
-      "resolved": "https://registry.npmjs.org/strip-ansi/-/strip-ansi-6.0.1.tgz",
       "integrity": "sha512-Y38VPSHcqkFrCpFnQ9vuSXmquuv5oXOKpGeT6aGrr3o3Gc9AlVa6JBfUSOCnbxGGZF+/0ooI7KrPuUSztUdU5A==",
       "requires": {
         "ansi-regex": "^5.0.1"
@@ -1256,7 +1128,6 @@
     },
     "supports-color": {
       "version": "7.2.0",
-      "resolved": "https://registry.npmjs.org/supports-color/-/supports-color-7.2.0.tgz",
       "integrity": "sha512-qpCAvRl9stuOHveKsn7HncJRvv501qIacKzQlO/+Lwxc9+0q2wLyv4Dfvt80/DPn2pqOBsJdDiogXGR9+OvwRw==",
       "requires": {
         "has-flag": "^4.0.0"
@@ -1264,12 +1135,10 @@
     },
     "through": {
       "version": "2.3.8",
-      "resolved": "https://registry.npmjs.org/through/-/through-2.3.8.tgz",
       "integrity": "sha1-DdTJ/6q8NXlgsbckEV1+Doai4fU="
     },
     "tmp": {
       "version": "0.0.33",
-      "resolved": "https://registry.npmjs.org/tmp/-/tmp-0.0.33.tgz",
       "integrity": "sha512-jRCJlojKnZ3addtTOjdIqoRuPEKBvNXcGYqzO6zWZX8KfKEpnGY5jfggJQ3EjKuu8D4bJRr0y+cYJFmYbImXGw==",
       "requires": {
         "os-tmpdir": "~1.0.2"
@@ -1277,33 +1146,28 @@
     },
     "tr46": {
       "version": "0.0.3",
-      "resolved": "https://registry.npmjs.org/tr46/-/tr46-0.0.3.tgz",
       "integrity": "sha1-gYT9NH2snNwYWZLzpmIuFLnZq2o="
     },
     "tslib": {
       "version": "1.14.1",
-      "resolved": "https://registry.npmjs.org/tslib/-/tslib-1.14.1.tgz",
       "integrity": "sha512-Xni35NKzjgMrwevysHTCArtLDpPvye8zV/0E4EyYn43P7/7qvQwPh9BGkHewbMulVntbigmcT7rdX3BNo9wRJg=="
     },
     "type-fest": {
       "version": "0.21.3",
-      "resolved": "https://registry.npmjs.org/type-fest/-/type-fest-0.21.3.tgz",
       "integrity": "sha512-t0rzBq87m3fVcduHDUFhKmyyX+9eo6WQjZvf51Ea/M0Q7+T374Jp1aUiyUl0GKxp8M/OETVHSDvmkyPgvX+X2w=="
     },
     "typescript": {
-      "version": "4.1.5",
-      "resolved": "https://registry.npmjs.org/typescript/-/typescript-4.1.5.tgz",
-      "integrity": "sha512-6OSu9PTIzmn9TCDiovULTnET6BgXtDYL4Gg4szY+cGsc3JP1dQL8qvE8kShTRx1NIw4Q9IBHlwODjkjWEtMUyA==",
+      "version": "4.3.5",
+      "resolved": "https://registry.npmjs.org/typescript/-/typescript-4.3.5.tgz",
+      "integrity": "sha512-DqQgihaQ9cUrskJo9kIyW/+g0Vxsk8cDtZ52a3NGh0YNTfpUSArXSohyUGnvbPazEPLu398C0UxmKSOrPumUzA==",
       "dev": true
     },
     "webidl-conversions": {
       "version": "3.0.1",
-      "resolved": "https://registry.npmjs.org/webidl-conversions/-/webidl-conversions-3.0.1.tgz",
       "integrity": "sha1-JFNCdeKnvGvnvIZhHMFq4KVlSHE="
     },
     "whatwg-url": {
       "version": "5.0.0",
-      "resolved": "https://registry.npmjs.org/whatwg-url/-/whatwg-url-5.0.0.tgz",
       "integrity": "sha1-lmRU6HZUYuN2RNNib2dCzotwll0=",
       "requires": {
         "tr46": "~0.0.3",
@@ -1312,7 +1176,6 @@
     },
     "wrappy": {
       "version": "1.0.2",
-      "resolved": "https://registry.npmjs.org/wrappy/-/wrappy-1.0.2.tgz",
       "integrity": "sha1-tSQ9jz7BqjXxNkYFvA0QNuMKtp8=",
       "dev": true
     }
diff --git a/jslib/node/package.json b/jslib/node/package.json
index 607cfce1..af6c0e3a 100644
--- a/jslib/node/package.json
+++ b/jslib/node/package.json
@@ -22,10 +22,10 @@
   "devDependencies": {
     "@types/inquirer": "^7.3.1",
     "@types/lowdb": "^1.0.10",
-    "@types/node": "^14.17.1",
+    "@types/node": "^16.11.12",
     "@types/node-fetch": "^2.5.10",
     "rimraf": "^3.0.2",
-    "typescript": "4.1.5"
+    "typescript": "4.3.5"
   },
   "dependencies": {
     "@bitwarden/jslib-common": "file:../common",
diff --git a/jslib/node/src/cli/baseProgram.ts b/jslib/node/src/cli/baseProgram.ts
index 7772ba80..b2ddd22f 100644
--- a/jslib/node/src/cli/baseProgram.ts
+++ b/jslib/node/src/cli/baseProgram.ts
@@ -1,108 +1,113 @@
-import * as chalk from 'chalk';
+import * as chalk from "chalk";
 
-import { Response } from './models/response';
-import { ListResponse } from './models/response/listResponse';
-import { MessageResponse } from './models/response/messageResponse';
-import { StringResponse } from './models/response/stringResponse';
+import { StateService } from "jslib-common/abstractions/state.service";
 
-import { UserService } from 'jslib-common/abstractions/user.service';
+import { Response } from "./models/response";
+import { ListResponse } from "./models/response/listResponse";
+import { MessageResponse } from "./models/response/messageResponse";
+import { StringResponse } from "./models/response/stringResponse";
 
 export abstract class BaseProgram {
-    constructor(
-        private userService: UserService,
-        private writeLn: (s: string, finalLine: boolean, error: boolean) => void) { }
+  constructor(
+    protected stateService: StateService,
+    private writeLn: (s: string, finalLine: boolean, error: boolean) => void
+  ) {}
 
-    protected processResponse(response: Response, exitImmediately = false, dataProcessor: () => string = null) {
-        if (!response.success) {
-            if (process.env.BW_QUIET !== 'true') {
-                if (process.env.BW_RESPONSE === 'true') {
-                    this.writeLn(this.getJson(response), true, false);
-                } else {
-                    this.writeLn(chalk.redBright(response.message), true, true);
-                }
-            }
-            const exitCode = process.env.BW_CLEANEXIT ? 0 : 1;
-            if (exitImmediately) {
-                process.exit(exitCode);
-            } else {
-                process.exitCode = exitCode;
-            }
-            return;
-        }
-
-        if (process.env.BW_RESPONSE === 'true') {
-            this.writeLn(this.getJson(response), true, false);
-        } else if (response.data != null) {
-            let out: string = dataProcessor != null ? dataProcessor() : null;
-            if (out == null) {
-                if (response.data.object === 'string') {
-                    const data = (response.data as StringResponse).data;
-                    if (data != null) {
-                        out = data;
-                    }
-                } else if (response.data.object === 'list') {
-                    out = this.getJson((response.data as ListResponse).data);
-                } else if (response.data.object === 'message') {
-                    out = this.getMessage(response);
-                } else {
-                    out = this.getJson(response.data);
-                }
-            }
-
-            if (out != null && process.env.BW_QUIET !== 'true') {
-                this.writeLn(out, true, false);
-            }
-        }
-        if (exitImmediately) {
-            process.exit(0);
+  protected processResponse(
+    response: Response,
+    exitImmediately = false,
+    dataProcessor: () => string = null
+  ) {
+    if (!response.success) {
+      if (process.env.BW_QUIET !== "true") {
+        if (process.env.BW_RESPONSE === "true") {
+          this.writeLn(this.getJson(response), true, false);
         } else {
-            process.exitCode = 0;
+          this.writeLn(chalk.redBright(response.message), true, true);
         }
+      }
+      const exitCode = process.env.BW_CLEANEXIT ? 0 : 1;
+      if (exitImmediately) {
+        process.exit(exitCode);
+      } else {
+        process.exitCode = exitCode;
+      }
+      return;
     }
 
-    protected getJson(obj: any): string {
-        if (process.env.BW_PRETTY === 'true') {
-            return JSON.stringify(obj, null, '  ');
+    if (process.env.BW_RESPONSE === "true") {
+      this.writeLn(this.getJson(response), true, false);
+    } else if (response.data != null) {
+      let out: string = dataProcessor != null ? dataProcessor() : null;
+      if (out == null) {
+        if (response.data.object === "string") {
+          const data = (response.data as StringResponse).data;
+          if (data != null) {
+            out = data;
+          }
+        } else if (response.data.object === "list") {
+          out = this.getJson((response.data as ListResponse).data);
+        } else if (response.data.object === "message") {
+          out = this.getMessage(response);
         } else {
-            return JSON.stringify(obj);
+          out = this.getJson(response.data);
         }
+      }
+
+      if (out != null && process.env.BW_QUIET !== "true") {
+        this.writeLn(out, true, false);
+      }
+    }
+    if (exitImmediately) {
+      process.exit(0);
+    } else {
+      process.exitCode = 0;
     }
+  }
 
-    protected getMessage(response: Response): string {
-        const message = (response.data as MessageResponse);
-        if (process.env.BW_RAW === 'true') {
-            return message.raw;
-        }
+  protected getJson(obj: any): string {
+    if (process.env.BW_PRETTY === "true") {
+      return JSON.stringify(obj, null, "  ");
+    } else {
+      return JSON.stringify(obj);
+    }
+  }
 
-        let out: string = '';
-        if (message.title != null) {
-            if (message.noColor) {
-                out = message.title;
-            } else {
-                out = chalk.greenBright(message.title);
-            }
-        }
-        if (message.message != null) {
-            if (message.title != null) {
-                out += '\n';
-            }
-            out += message.message;
-        }
-        return out.trim() === '' ? null : out;
+  protected getMessage(response: Response): string {
+    const message = response.data as MessageResponse;
+    if (process.env.BW_RAW === "true") {
+      return message.raw;
     }
 
-    protected async exitIfAuthed() {
-        const authed = await this.userService.isAuthenticated();
-        if (authed) {
-            const email = await this.userService.getEmail();
-            this.processResponse(Response.error('You are already logged in as ' + email + '.'), true);
-        }
+    let out: string = "";
+    if (message.title != null) {
+      if (message.noColor) {
+        out = message.title;
+      } else {
+        out = chalk.greenBright(message.title);
+      }
+    }
+    if (message.message != null) {
+      if (message.title != null) {
+        out += "\n";
+      }
+      out += message.message;
     }
+    return out.trim() === "" ? null : out;
+  }
 
-    protected async exitIfNotAuthed() {
-        const authed = await this.userService.isAuthenticated();
-        if (!authed) {
-            this.processResponse(Response.error('You are not logged in.'), true);
-        }
+  protected async exitIfAuthed() {
+    const authed = await this.stateService.getIsAuthenticated();
+    if (authed) {
+      const email = await this.stateService.getEmail();
+      this.processResponse(Response.error("You are already logged in as " + email + "."), true);
+    }
+  }
+
+  protected async exitIfNotAuthed() {
+    const authed = await this.stateService.getIsAuthenticated();
+    if (!authed) {
+      this.processResponse(Response.error("You are not logged in."), true);
     }
+  }
 }
diff --git a/jslib/node/src/cli/commands/login.command.ts b/jslib/node/src/cli/commands/login.command.ts
index 7cdb607e..8dfac8ec 100644
--- a/jslib/node/src/cli/commands/login.command.ts
+++ b/jslib/node/src/cli/commands/login.command.ts
@@ -1,572 +1,610 @@
-import * as program from 'commander';
-import * as http from 'http';
-import * as inquirer from 'inquirer';
+import * as program from "commander";
+import * as http from "http";
+import * as inquirer from "inquirer";
 
-import { TwoFactorProviderType } from 'jslib-common/enums/twoFactorProviderType';
+import { TwoFactorProviderType } from "jslib-common/enums/twoFactorProviderType";
 
-import { AuthResult } from 'jslib-common/models/domain/authResult';
-import { TwoFactorEmailRequest } from 'jslib-common/models/request/twoFactorEmailRequest';
-import { ErrorResponse } from 'jslib-common/models/response/errorResponse';
+import { AuthResult } from "jslib-common/models/domain/authResult";
+import { TwoFactorEmailRequest } from "jslib-common/models/request/twoFactorEmailRequest";
+import { ErrorResponse } from "jslib-common/models/response/errorResponse";
 
-import { ApiService } from 'jslib-common/abstractions/api.service';
-import { AuthService } from 'jslib-common/abstractions/auth.service';
-import { CryptoService } from 'jslib-common/abstractions/crypto.service';
-import { CryptoFunctionService } from 'jslib-common/abstractions/cryptoFunction.service';
-import { EnvironmentService } from 'jslib-common/abstractions/environment.service';
-import { I18nService } from 'jslib-common/abstractions/i18n.service';
-import { KeyConnectorService } from 'jslib-common/abstractions/keyConnector.service';
-import { PasswordGenerationService } from 'jslib-common/abstractions/passwordGeneration.service';
-import { PlatformUtilsService } from 'jslib-common/abstractions/platformUtils.service';
-import { PolicyService } from 'jslib-common/abstractions/policy.service';
-import { SyncService } from 'jslib-common/abstractions/sync.service';
-import { UserService } from 'jslib-common/abstractions/user.service';
+import { ApiService } from "jslib-common/abstractions/api.service";
+import { AuthService } from "jslib-common/abstractions/auth.service";
+import { CryptoService } from "jslib-common/abstractions/crypto.service";
+import { CryptoFunctionService } from "jslib-common/abstractions/cryptoFunction.service";
+import { EnvironmentService } from "jslib-common/abstractions/environment.service";
+import { I18nService } from "jslib-common/abstractions/i18n.service";
+import { PasswordGenerationService } from "jslib-common/abstractions/passwordGeneration.service";
+import { PlatformUtilsService } from "jslib-common/abstractions/platformUtils.service";
+import { PolicyService } from "jslib-common/abstractions/policy.service";
+import { StateService } from "jslib-common/abstractions/state.service";
 
-import { Response } from '../models/response';
+import { Response } from "../models/response";
 
-import { KeyConnectorUserKeyRequest } from 'jslib-common/models/request/keyConnectorUserKeyRequest';
-import { UpdateTempPasswordRequest } from 'jslib-common/models/request/updateTempPasswordRequest';
+import { UpdateTempPasswordRequest } from "jslib-common/models/request/updateTempPasswordRequest";
 
-import { MessageResponse } from '../models/response/messageResponse';
+import { MessageResponse } from "../models/response/messageResponse";
 
-import { NodeUtils } from 'jslib-common/misc/nodeUtils';
-import { Utils } from 'jslib-common/misc/utils';
+import { NodeUtils } from "jslib-common/misc/nodeUtils";
+import { Utils } from "jslib-common/misc/utils";
 
 // tslint:disable-next-line
-const open = require('open');
+const open = require("open");
 
 export class LoginCommand {
-    protected validatedParams: () => Promise<any>;
-    protected success: () => Promise<MessageResponse>;
-    protected logout: () => Promise<void>;
-    protected canInteract: boolean;
-    protected clientId: string;
-    protected clientSecret: string;
-    protected email: string;
-
-    private ssoRedirectUri: string = null;
-
-    constructor(protected authService: AuthService, protected apiService: ApiService,
-        protected i18nService: I18nService, protected environmentService: EnvironmentService,
-        protected passwordGenerationService: PasswordGenerationService,
-        protected cryptoFunctionService: CryptoFunctionService, protected platformUtilsService: PlatformUtilsService,
-        protected userService: UserService, protected cryptoService: CryptoService,
-        protected policyService: PolicyService, clientId: string, private syncService: SyncService,
-        protected keyConnectorService: KeyConnectorService) {
-        this.clientId = clientId;
+  protected validatedParams: () => Promise<any>;
+  protected success: () => Promise<MessageResponse>;
+  protected logout: () => Promise<void>;
+  protected canInteract: boolean;
+  protected clientId: string;
+  protected clientSecret: string;
+  protected email: string;
+
+  private ssoRedirectUri: string = null;
+
+  constructor(
+    protected authService: AuthService,
+    protected apiService: ApiService,
+    protected i18nService: I18nService,
+    protected environmentService: EnvironmentService,
+    protected passwordGenerationService: PasswordGenerationService,
+    protected cryptoFunctionService: CryptoFunctionService,
+    protected platformUtilsService: PlatformUtilsService,
+    protected stateService: StateService,
+    protected cryptoService: CryptoService,
+    protected policyService: PolicyService,
+    clientId: string
+  ) {
+    this.clientId = clientId;
+  }
+
+  async run(email: string, password: string, options: program.OptionValues) {
+    this.canInteract = process.env.BW_NOINTERACTION !== "true";
+
+    let ssoCodeVerifier: string = null;
+    let ssoCode: string = null;
+    let orgIdentifier: string = null;
+
+    let clientId: string = null;
+    let clientSecret: string = null;
+
+    if (options.apikey != null) {
+      const apiIdentifiers = await this.apiIdentifiers();
+      clientId = apiIdentifiers.clientId;
+      clientSecret = apiIdentifiers.clientSecret;
+    } else if (options.sso != null && this.canInteract) {
+      const passwordOptions: any = {
+        type: "password",
+        length: 64,
+        uppercase: true,
+        lowercase: true,
+        numbers: true,
+        special: false,
+      };
+      const state = await this.passwordGenerationService.generatePassword(passwordOptions);
+      ssoCodeVerifier = await this.passwordGenerationService.generatePassword(passwordOptions);
+      const codeVerifierHash = await this.cryptoFunctionService.hash(ssoCodeVerifier, "sha256");
+      const codeChallenge = Utils.fromBufferToUrlB64(codeVerifierHash);
+      try {
+        const ssoParams = await this.openSsoPrompt(codeChallenge, state);
+        ssoCode = ssoParams.ssoCode;
+        orgIdentifier = ssoParams.orgIdentifier;
+      } catch {
+        return Response.badRequest("Something went wrong. Try again.");
+      }
+    } else {
+      if ((email == null || email === "") && this.canInteract) {
+        const answer: inquirer.Answers = await inquirer.createPromptModule({
+          output: process.stderr,
+        })({
+          type: "input",
+          name: "email",
+          message: "Email address:",
+        });
+        email = answer.email;
+      }
+      if (email == null || email.trim() === "") {
+        return Response.badRequest("Email address is required.");
+      }
+      if (email.indexOf("@") === -1) {
+        return Response.badRequest("Email address is invalid.");
+      }
+      this.email = email;
+
+      if (password == null || password === "") {
+        if (options.passwordfile) {
+          password = await NodeUtils.readFirstLine(options.passwordfile);
+        } else if (options.passwordenv && process.env[options.passwordenv]) {
+          password = process.env[options.passwordenv];
+        } else if (this.canInteract) {
+          const answer: inquirer.Answers = await inquirer.createPromptModule({
+            output: process.stderr,
+          })({
+            type: "password",
+            name: "password",
+            message: "Master password:",
+          });
+          password = answer.password;
+        }
+      }
+
+      if (password == null || password === "") {
+        return Response.badRequest("Master password is required.");
+      }
     }
 
-    async run(email: string, password: string, options: program.OptionValues) {
-        this.canInteract = process.env.BW_NOINTERACTION !== 'true';
-
-        let ssoCodeVerifier: string = null;
-        let ssoCode: string = null;
-        let orgIdentifier: string = null;
-
-        let clientId: string = null;
-        let clientSecret: string = null;
-
-        if (options.apikey != null) {
-            const apiIdentifiers = await this.apiIdentifiers();
-            clientId = apiIdentifiers.clientId;
-            clientSecret = apiIdentifiers.clientSecret;
-        } else if (options.sso != null && this.canInteract) {
-            const passwordOptions: any = {
-                type: 'password',
-                length: 64,
-                uppercase: true,
-                lowercase: true,
-                numbers: true,
-                special: false,
-            };
-            const state = await this.passwordGenerationService.generatePassword(passwordOptions);
-            ssoCodeVerifier = await this.passwordGenerationService.generatePassword(passwordOptions);
-            const codeVerifierHash = await this.cryptoFunctionService.hash(ssoCodeVerifier, 'sha256');
-            const codeChallenge = Utils.fromBufferToUrlB64(codeVerifierHash);
-            try {
-                const ssoParams = await this.openSsoPrompt(codeChallenge, state);
-                ssoCode = ssoParams.ssoCode;
-                orgIdentifier = ssoParams.orgIdentifier;
-            } catch {
-                return Response.badRequest('Something went wrong. Try again.');
-            }
-        } else {
-            if ((email == null || email === '') && this.canInteract) {
-                const answer: inquirer.Answers = await inquirer.createPromptModule({ output: process.stderr })({
-                    type: 'input',
-                    name: 'email',
-                    message: 'Email address:',
-                });
-                email = answer.email;
-            }
-            if (email == null || email.trim() === '') {
-                return Response.badRequest('Email address is required.');
-            }
-            if (email.indexOf('@') === -1) {
-                return Response.badRequest('Email address is invalid.');
-            }
-            this.email = email;
-
-            if (password == null || password === '') {
-                if (options.passwordfile) {
-                    password = await NodeUtils.readFirstLine(options.passwordfile);
-                } else if (options.passwordenv && process.env[options.passwordenv]) {
-                    password = process.env[options.passwordenv];
-                } else if (this.canInteract) {
-                    const answer: inquirer.Answers = await inquirer.createPromptModule({ output: process.stderr })({
-                        type: 'password',
-                        name: 'password',
-                        message: 'Master password:',
-                    });
-                    password = answer.password;
-                }
-            }
+    let twoFactorToken: string = options.code;
+    let twoFactorMethod: TwoFactorProviderType = null;
+    try {
+      if (options.method != null) {
+        twoFactorMethod = parseInt(options.method, null);
+      }
+    } catch (e) {
+      return Response.error("Invalid two-step login method.");
+    }
 
-            if (password == null || password === '') {
-                return Response.badRequest('Master password is required.');
-            }
+    try {
+      if (this.validatedParams != null) {
+        await this.validatedParams();
+      }
+
+      let response: AuthResult = null;
+      if (twoFactorToken != null && twoFactorMethod != null) {
+        if (clientId != null && clientSecret != null) {
+          response = await this.authService.logInApiKeyComplete(
+            clientId,
+            clientSecret,
+            twoFactorMethod,
+            twoFactorToken,
+            false
+          );
+        } else if (ssoCode != null && ssoCodeVerifier != null) {
+          response = await this.authService.logInSsoComplete(
+            ssoCode,
+            ssoCodeVerifier,
+            this.ssoRedirectUri,
+            twoFactorMethod,
+            twoFactorToken,
+            false
+          );
+        } else {
+          response = await this.authService.logInComplete(
+            email,
+            password,
+            twoFactorMethod,
+            twoFactorToken,
+            false,
+            this.clientSecret
+          );
         }
-
-        let twoFactorToken: string = options.code;
-        let twoFactorMethod: TwoFactorProviderType = null;
-        try {
-            if (options.method != null) {
-                twoFactorMethod = parseInt(options.method, null);
-            }
-        } catch (e) {
-            return Response.error('Invalid two-step login method.');
+      } else {
+        if (clientId != null && clientSecret != null) {
+          response = await this.authService.logInApiKey(clientId, clientSecret);
+        } else if (ssoCode != null && ssoCodeVerifier != null) {
+          response = await this.authService.logInSso(
+            ssoCode,
+            ssoCodeVerifier,
+            this.ssoRedirectUri,
+            orgIdentifier
+          );
+        } else {
+          response = await this.authService.logIn(email, password);
         }
-
-        try {
-            if (this.validatedParams != null) {
-                await this.validatedParams();
+        if (response.captchaSiteKey) {
+          const badCaptcha = Response.badRequest(
+            "Your authentication request appears to be coming from a bot\n" +
+              "Please use your API key to validate this request and ensure BW_CLIENTSECRET is correct, if set.\n" +
+              "(https://bitwarden.com/help/article/cli-auth-challenges)"
+          );
+
+          try {
+            const captchaClientSecret = await this.apiClientSecret(true);
+            if (Utils.isNullOrWhitespace(captchaClientSecret)) {
+              return badCaptcha;
             }
 
-            let response: AuthResult = null;
-            if (twoFactorToken != null && twoFactorMethod != null) {
-                if (clientId != null && clientSecret != null) {
-                    response = await this.authService.logInApiKeyComplete(clientId, clientSecret, twoFactorMethod,
-                        twoFactorToken, false);
-                } else if (ssoCode != null && ssoCodeVerifier != null) {
-                    response = await this.authService.logInSsoComplete(ssoCode, ssoCodeVerifier, this.ssoRedirectUri,
-                        twoFactorMethod, twoFactorToken, false);
-                } else {
-                    response = await this.authService.logInComplete(email, password, twoFactorMethod,
-                        twoFactorToken, false, this.clientSecret);
-                }
+            const secondResponse = await this.authService.logInComplete(
+              email,
+              password,
+              twoFactorMethod,
+              twoFactorToken,
+              false,
+              captchaClientSecret
+            );
+            response = secondResponse;
+          } catch (e) {
+            if (
+              (e instanceof ErrorResponse || e.constructor.name === "ErrorResponse") &&
+              (e as ErrorResponse).message.includes("Captcha is invalid")
+            ) {
+              return badCaptcha;
             } else {
-                if (clientId != null && clientSecret != null) {
-                    response = await this.authService.logInApiKey(clientId, clientSecret);
-                } else if (ssoCode != null && ssoCodeVerifier != null) {
-                    response = await this.authService.logInSso(ssoCode, ssoCodeVerifier, this.ssoRedirectUri,
-                        orgIdentifier);
-                } else {
-                    response = await this.authService.logIn(email, password);
-                }
-                if (response.captchaSiteKey) {
-                    const badCaptcha = Response.badRequest('Your authentication request appears to be coming from a bot\n' +
-                        'Please use your API key to validate this request and ensure BW_CLIENTSECRET is correct, if set.\n' +
-                        '(https://bitwarden.com/help/article/cli-auth-challenges)');
-
-                    try {
-                        const captchaClientSecret = await this.apiClientSecret(true);
-                        if (Utils.isNullOrWhitespace(captchaClientSecret)) {
-                            return badCaptcha;
-                        }
-
-                        const secondResponse = await this.authService.logInComplete(email, password, twoFactorMethod,
-                            twoFactorToken, false, captchaClientSecret);
-                        response = secondResponse;
-                    } catch (e) {
-                        if ((e instanceof ErrorResponse || e.constructor.name === 'ErrorResponse') &&
-                            (e as ErrorResponse).message.includes('Captcha is invalid')) {
-                            return badCaptcha;
-                        } else {
-                            throw e;
-                        }
-                    }
-                }
-                if (response.twoFactor) {
-                    let selectedProvider: any = null;
-                    const twoFactorProviders = this.authService.getSupportedTwoFactorProviders(null);
-                    if (twoFactorProviders.length === 0) {
-                        return Response.badRequest('No providers available for this client.');
-                    }
-
-                    if (twoFactorMethod != null) {
-                        try {
-                            selectedProvider = twoFactorProviders.filter(p => p.type === twoFactorMethod)[0];
-                        } catch (e) {
-                            return Response.error('Invalid two-step login method.');
-                        }
-                    }
-
-                    if (selectedProvider == null) {
-                        if (twoFactorProviders.length === 1) {
-                            selectedProvider = twoFactorProviders[0];
-                        } else if (this.canInteract) {
-                            const twoFactorOptions = twoFactorProviders.map(p => p.name);
-                            twoFactorOptions.push(new inquirer.Separator());
-                            twoFactorOptions.push('Cancel');
-                            const answer: inquirer.Answers =
-                                await inquirer.createPromptModule({ output: process.stderr })({
-                                    type: 'list',
-                                    name: 'method',
-                                    message: 'Two-step login method:',
-                                    choices: twoFactorOptions,
-                                });
-                            const i = twoFactorOptions.indexOf(answer.method);
-                            if (i === (twoFactorOptions.length - 1)) {
-                                return Response.error('Login failed.');
-                            }
-                            selectedProvider = twoFactorProviders[i];
-                        }
-                        if (selectedProvider == null) {
-                            return Response.error('Login failed. No provider selected.');
-                        }
-                    }
-
-                    if (twoFactorToken == null && response.twoFactorProviders.size > 1 &&
-                        selectedProvider.type === TwoFactorProviderType.Email) {
-                        const emailReq = new TwoFactorEmailRequest();
-                        emailReq.email = this.authService.email;
-                        emailReq.masterPasswordHash = this.authService.masterPasswordHash;
-                        await this.apiService.postTwoFactorEmail(emailReq);
-                    }
-
-                    if (twoFactorToken == null) {
-                        if (this.canInteract) {
-                            const answer: inquirer.Answers =
-                                await inquirer.createPromptModule({ output: process.stderr })({
-                                    type: 'input',
-                                    name: 'token',
-                                    message: 'Two-step login code:',
-                                });
-                            twoFactorToken = answer.token;
-                        }
-                        if (twoFactorToken == null || twoFactorToken === '') {
-                            return Response.badRequest('Code is required.');
-                        }
-                    }
-
-                    response = await this.authService.logInTwoFactor(selectedProvider.type,
-                        twoFactorToken, false);
-                }
+              throw e;
             }
-
-            if (response.twoFactor) {
-                return Response.error('Login failed.');
+          }
+        }
+        if (response.twoFactor) {
+          let selectedProvider: any = null;
+          const twoFactorProviders = this.authService.getSupportedTwoFactorProviders(null);
+          if (twoFactorProviders.length === 0) {
+            return Response.badRequest("No providers available for this client.");
+          }
+
+          if (twoFactorMethod != null) {
+            try {
+              selectedProvider = twoFactorProviders.filter((p) => p.type === twoFactorMethod)[0];
+            } catch (e) {
+              return Response.error("Invalid two-step login method.");
             }
-
-            if (response.resetMasterPassword) {
-                return Response.error('In order to log in with SSO from the CLI, you must first log in' +
-                    ' through the web vault to set your master password.');
+          }
+
+          if (selectedProvider == null) {
+            if (twoFactorProviders.length === 1) {
+              selectedProvider = twoFactorProviders[0];
+            } else if (this.canInteract) {
+              const twoFactorOptions = twoFactorProviders.map((p) => p.name);
+              twoFactorOptions.push(new inquirer.Separator());
+              twoFactorOptions.push("Cancel");
+              const answer: inquirer.Answers = await inquirer.createPromptModule({
+                output: process.stderr,
+              })({
+                type: "list",
+                name: "method",
+                message: "Two-step login method:",
+                choices: twoFactorOptions,
+              });
+              const i = twoFactorOptions.indexOf(answer.method);
+              if (i === twoFactorOptions.length - 1) {
+                return Response.error("Login failed.");
+              }
+              selectedProvider = twoFactorProviders[i];
             }
-
-            // Full sync required for the reset password and key connector checks
-            await this.syncService.fullSync(true);
-
-            // Handle converting to Key Connector if required
-            if (await this.keyConnectorService.userNeedsMigration()) {
-                return await this.migrateToKeyConnector();
+            if (selectedProvider == null) {
+              return Response.error("Login failed. No provider selected.");
             }
-
-            // Handle Updating Temp Password if NOT using an API Key for authentication
-            if (response.forcePasswordReset && (clientId == null && clientSecret == null)) {
-                return await this.updateTempPassword();
+          }
+
+          if (
+            twoFactorToken == null &&
+            response.twoFactorProviders.size > 1 &&
+            selectedProvider.type === TwoFactorProviderType.Email
+          ) {
+            const emailReq = new TwoFactorEmailRequest();
+            emailReq.email = this.authService.email;
+            emailReq.masterPasswordHash = this.authService.masterPasswordHash;
+            await this.apiService.postTwoFactorEmail(emailReq);
+          }
+
+          if (twoFactorToken == null) {
+            if (this.canInteract) {
+              const answer: inquirer.Answers = await inquirer.createPromptModule({
+                output: process.stderr,
+              })({
+                type: "input",
+                name: "token",
+                message: "Two-step login code:",
+              });
+              twoFactorToken = answer.token;
+            }
+            if (twoFactorToken == null || twoFactorToken === "") {
+              return Response.badRequest("Code is required.");
             }
+          }
 
-            return await this.handleSuccessResponse();
-        } catch (e) {
-            return Response.error(e);
+          response = await this.authService.logInTwoFactor(
+            selectedProvider.type,
+            twoFactorToken,
+            false
+          );
         }
+      }
+
+      if (response.twoFactor) {
+        return Response.error("Login failed.");
+      }
+
+      if (response.resetMasterPassword) {
+        return Response.error(
+          "In order to log in with SSO from the CLI, you must first log in" +
+            " through the web vault to set your master password."
+        );
+      }
+
+      // Handle Updating Temp Password if NOT using an API Key for authentication
+      if (response.forcePasswordReset && clientId == null && clientSecret == null) {
+        return await this.updateTempPassword();
+      }
+
+      return await this.handleSuccessResponse();
+    } catch (e) {
+      return Response.error(e);
     }
-
-    private async handleSuccessResponse(): Promise<Response> {
-        if (this.success != null) {
-            const res = await this.success();
-            return Response.success(res);
-        } else {
-            const res = new MessageResponse('You are logged in!', null);
-            return Response.success(res);
-        }
+  }
+
+  private async handleSuccessResponse(): Promise<Response> {
+    if (this.success != null) {
+      const res = await this.success();
+      return Response.success(res);
+    } else {
+      const res = new MessageResponse("You are logged in!", null);
+      return Response.success(res);
     }
-
-    private async updateTempPassword(error?: string): Promise<Response> {
-        // If no interaction available, alert user to use web vault
-        if (!this.canInteract) {
-            await this.logout();
-            this.authService.logOut(() => { /* Do nothing */ });
-            return Response.error(new MessageResponse('An organization administrator recently changed your master password. In order to access the vault, you must update your master password now via the web vault. You have been logged out.', null));
-        }
-
-        if (this.email == null || this.email === 'undefined') {
-            this.email = await this.userService.getEmail();
-        }
-
-        // Get New Master Password
-        const baseMessage = 'An organization administrator recently changed your master password. In order to access the vault, you must update your master password now.\n' + 'Master password: ';
-        const firstMessage = error != null ? error + baseMessage : baseMessage;
-        const mp: inquirer.Answers = await inquirer.createPromptModule({ output: process.stderr })({
-            type: 'password',
-            name: 'password',
-            message: firstMessage,
-        });
-        const masterPassword = mp.password;
-
-        // Master Password Validation
-        if (masterPassword == null || masterPassword === '') {
-            return this.updateTempPassword('Master password is required.\n');
-        }
-
-        if (masterPassword.length < 8) {
-            return this.updateTempPassword('Master password must be at least 8 characters long.\n');
-        }
-
-        // Strength & Policy Validation
-        const strengthResult = this.passwordGenerationService.passwordStrength(masterPassword,
-            this.getPasswordStrengthUserInput());
-
-        // Get New Master Password Re-type
-        const reTypeMessage = 'Re-type New Master password (Strength: ' + strengthResult.score + ')';
-        const retype: inquirer.Answers = await inquirer.createPromptModule({ output: process.stderr })({
-            type: 'password',
-            name: 'password',
-            message: reTypeMessage,
-        });
-        const masterPasswordRetype = retype.password;
-
-        // Re-type Validation
-        if (masterPassword !== masterPasswordRetype) {
-            return this.updateTempPassword('Master password confirmation does not match.\n');
-        }
-
-        // Get Hint (optional)
-        const hint: inquirer.Answers = await inquirer.createPromptModule({ output: process.stderr })({
-            type: 'input',
-            name: 'input',
-            message: 'Master Password Hint (optional):',
-        });
-        const masterPasswordHint = hint.input;
-
-        // Retrieve details for key generation
-        const enforcedPolicyOptions = await this.policyService.getMasterPasswordPolicyOptions();
-        const kdf = await this.userService.getKdf();
-        const kdfIterations = await this.userService.getKdfIterations();
-
-        if (enforcedPolicyOptions != null &&
-            !this.policyService.evaluateMasterPassword(
-                strengthResult.score,
-                masterPassword,
-                enforcedPolicyOptions)) {
-            return this.updateTempPassword('Your new master password does not meet the policy requirements.\n');
-        }
-
-        try {
-            // Create new key and hash new password
-            const newKey = await this.cryptoService.makeKey(masterPassword, this.email.trim().toLowerCase(),
-                kdf, kdfIterations);
-            const newPasswordHash = await this.cryptoService.hashPassword(masterPassword, newKey);
-
-            // Grab user's current enc key
-            const userEncKey = await this.cryptoService.getEncKey();
-
-            // Create new encKey for the User
-            const newEncKey = await this.cryptoService.remakeEncKey(newKey, userEncKey);
-
-            // Create request
-            const request = new UpdateTempPasswordRequest();
-            request.key = newEncKey[1].encryptedString;
-            request.newMasterPasswordHash = newPasswordHash;
-            request.masterPasswordHint = masterPasswordHint;
-
-            // Update user's password
-            await this.apiService.putUpdateTempPassword(request);
-            return this.handleSuccessResponse();
-        } catch (e) {
-            await this.logout();
-            this.authService.logOut(() => { /* Do nothing */ });
-            return Response.error(e);
-        }
+  }
+
+  private async updateTempPassword(error?: string): Promise<Response> {
+    // If no interaction available, alert user to use web vault
+    if (!this.canInteract) {
+      await this.logout();
+      this.authService.logOut(() => {
+        /* Do nothing */
+      });
+      return Response.error(
+        new MessageResponse(
+          "An organization administrator recently changed your master password. In order to access the vault, you must update your master password now via the web vault. You have been logged out.",
+          null
+        )
+      );
     }
 
-    private getPasswordStrengthUserInput() {
-        let userInput: string[] = [];
-        const atPosition = this.email.indexOf('@');
-        if (atPosition > -1) {
-            userInput = userInput.concat(this.email.substr(0, atPosition).trim().toLowerCase().split(/[^A-Za-z0-9]/));
-        }
-        return userInput;
+    if (this.email == null || this.email === "undefined") {
+      this.email = await this.stateService.getEmail();
     }
 
-    private async migrateToKeyConnector() {
-        // If no interaction available, alert user to use web vault
-        if (!this.canInteract) {
-            await this.logout();
-            this.authService.logOut(() => { /* Do nothing */ });
-            return Response.error(new MessageResponse('An organization you are a member of is using Key Connector. ' +
-                'In order to access the vault, you must opt-in to Key Connector now via the web vault. You have been logged out.', null));
-        }
-
-        const organization = await this.keyConnectorService.getManagingOrganization();
-
-        const answer: inquirer.Answers = await inquirer.createPromptModule({ output: process.stderr })({
-            type: 'list',
-            name: 'convert',
-            message: organization.name + ' is using a self-hosted key server. A master password is no longer required to log in for members of this organization. ',
-            choices: [
-                {
-                    name: 'Remove master password and log in',
-                    value: 'remove',
-                },
-                {
-                    name: 'Leave organization and log in',
-                    value: 'leave',
-                },
-                {
-                    name: 'Exit',
-                    value: 'exit',
-                },
-            ],
-        });
-
-        if (answer.convert === 'remove') {
-            await this.keyConnectorService.migrateUser();
-
-            // Update environment URL - required for api key login
-            const urls = this.environmentService.getUrls();
-            urls.keyConnector = organization.keyConnectorUrl;
-            await this.environmentService.setUrls(urls, true);
-
-            return await this.handleSuccessResponse();
-        } else if (answer.convert === 'leave') {
-            await this.apiService.postLeaveOrganization(organization.id);
-            await this.syncService.fullSync(true);
-            return await this.handleSuccessResponse();
-        } else {
-            await this.logout();
-            this.authService.logOut(() => { /* Do nothing */ });
-            return Response.error('You have been logged out.');
-        }
+    // Get New Master Password
+    const baseMessage =
+      "An organization administrator recently changed your master password. In order to access the vault, you must update your master password now.\n" +
+      "Master password: ";
+    const firstMessage = error != null ? error + baseMessage : baseMessage;
+    const mp: inquirer.Answers = await inquirer.createPromptModule({ output: process.stderr })({
+      type: "password",
+      name: "password",
+      message: firstMessage,
+    });
+    const masterPassword = mp.password;
+
+    // Master Password Validation
+    if (masterPassword == null || masterPassword === "") {
+      return this.updateTempPassword("Master password is required.\n");
     }
 
-    private async apiClientId(): Promise<string> {
-        let clientId: string = null;
-
-        const storedClientId: string = process.env.BW_CLIENTID;
-        if (storedClientId == null) {
-            if (this.canInteract) {
-                const answer: inquirer.Answers = await inquirer.createPromptModule({ output: process.stderr })({
-                    type: 'input',
-                    name: 'clientId',
-                    message: 'client_id:',
-                });
-                clientId = answer.clientId;
-            } else {
-                clientId = null;
-            }
-        } else {
-            clientId = storedClientId;
-        }
-
-        return clientId;
+    if (masterPassword.length < 8) {
+      return this.updateTempPassword("Master password must be at least 8 characters long.\n");
     }
 
-    private async apiClientSecret(isAdditionalAuthentication: boolean = false): Promise<string> {
-        const additionalAuthenticationMessage = 'Additional authentication required.\nAPI key ';
-        let clientSecret: string = null;
-
-        const storedClientSecret: string = this.clientSecret || process.env.BW_CLIENTSECRET;
-        if (this.canInteract && storedClientSecret == null) {
-            const answer: inquirer.Answers = await inquirer.createPromptModule({ output: process.stderr })({
-                type: 'input',
-                name: 'clientSecret',
-                message: (isAdditionalAuthentication ? additionalAuthenticationMessage : '') + 'client_secret:',
-
-            });
-            clientSecret = answer.clientSecret;
-        } else {
-            clientSecret = storedClientSecret;
-        }
-
-        return clientSecret;
+    // Strength & Policy Validation
+    const strengthResult = this.passwordGenerationService.passwordStrength(
+      masterPassword,
+      this.getPasswordStrengthUserInput()
+    );
+
+    // Get New Master Password Re-type
+    const reTypeMessage = "Re-type New Master password (Strength: " + strengthResult.score + ")";
+    const retype: inquirer.Answers = await inquirer.createPromptModule({ output: process.stderr })({
+      type: "password",
+      name: "password",
+      message: reTypeMessage,
+    });
+    const masterPasswordRetype = retype.password;
+
+    // Re-type Validation
+    if (masterPassword !== masterPasswordRetype) {
+      return this.updateTempPassword("Master password confirmation does not match.\n");
     }
 
-    private async apiIdentifiers(): Promise<{ clientId: string, clientSecret: string; }> {
-        return {
-            clientId: await this.apiClientId(),
-            clientSecret: await this.apiClientSecret(),
-        };
+    // Get Hint (optional)
+    const hint: inquirer.Answers = await inquirer.createPromptModule({ output: process.stderr })({
+      type: "input",
+      name: "input",
+      message: "Master Password Hint (optional):",
+    });
+    const masterPasswordHint = hint.input;
+
+    // Retrieve details for key generation
+    const enforcedPolicyOptions = await this.policyService.getMasterPasswordPolicyOptions();
+    const kdf = await this.stateService.getKdfType();
+    const kdfIterations = await this.stateService.getKdfIterations();
+
+    if (
+      enforcedPolicyOptions != null &&
+      !this.policyService.evaluateMasterPassword(
+        strengthResult.score,
+        masterPassword,
+        enforcedPolicyOptions
+      )
+    ) {
+      return this.updateTempPassword(
+        "Your new master password does not meet the policy requirements.\n"
+      );
     }
 
-    private async openSsoPrompt(codeChallenge: string, state: string): Promise<{ ssoCode: string, orgIdentifier: string }> {
-        return new Promise((resolve, reject) => {
-            const callbackServer = http.createServer((req, res) => {
-                const urlString = 'http://localhost' + req.url;
-                const url = new URL(urlString);
-                const code = url.searchParams.get('code');
-                const receivedState = url.searchParams.get('state');
-                const orgIdentifier = this.getOrgIdentifierFromState(receivedState);
-                res.setHeader('Content-Type', 'text/html');
-                if (code != null && receivedState != null && this.checkState(receivedState, state)) {
-                    res.writeHead(200);
-                    res.end('<html><head><title>Success | Bitwarden CLI</title></head><body>' +
-                        '<h1>Successfully authenticated with the Bitwarden CLI</h1>' +
-                        '<p>You may now close this tab and return to the terminal.</p>' +
-                        '</body></html>');
-                    callbackServer.close(() => resolve({
-                        ssoCode: code,
-                        orgIdentifier: orgIdentifier,
-                    }));
-                } else {
-                    res.writeHead(400);
-                    res.end('<html><head><title>Failed | Bitwarden CLI</title></head><body>' +
-                        '<h1>Something went wrong logging into the Bitwarden CLI</h1>' +
-                        '<p>You may now close this tab and return to the terminal.</p>' +
-                        '</body></html>');
-                    callbackServer.close(() => reject());
-                }
-            });
-            let foundPort = false;
-            const webUrl = this.environmentService.getWebVaultUrl();
-            for (let port = 8065; port <= 8070; port++) {
-                try {
-                    this.ssoRedirectUri = 'http://localhost:' + port;
-                    callbackServer.listen(port, () => {
-                        this.platformUtilsService.launchUri(webUrl + '/#/sso?clientId=' + this.clientId +
-                            '&redirectUri=' + encodeURIComponent(this.ssoRedirectUri) +
-                            '&state=' + state + '&codeChallenge=' + codeChallenge);
-                    });
-                    foundPort = true;
-                    break;
-                } catch {
-                    // Ignore error since we run the same command up to 5 times.
-                }
-            }
-            if (!foundPort) {
-                reject();
-            }
+    try {
+      // Create new key and hash new password
+      const newKey = await this.cryptoService.makeKey(
+        masterPassword,
+        this.email.trim().toLowerCase(),
+        kdf,
+        kdfIterations
+      );
+      const newPasswordHash = await this.cryptoService.hashPassword(masterPassword, newKey);
+
+      // Grab user's current enc key
+      const userEncKey = await this.cryptoService.getEncKey();
+
+      // Create new encKey for the User
+      const newEncKey = await this.cryptoService.remakeEncKey(newKey, userEncKey);
+
+      // Create request
+      const request = new UpdateTempPasswordRequest();
+      request.key = newEncKey[1].encryptedString;
+      request.newMasterPasswordHash = newPasswordHash;
+      request.masterPasswordHint = masterPasswordHint;
+
+      // Update user's password
+      await this.apiService.putUpdateTempPassword(request);
+      return this.handleSuccessResponse();
+    } catch (e) {
+      await this.logout();
+      this.authService.logOut(() => {
+        /* Do nothing */
+      });
+      return Response.error(e);
+    }
+  }
+
+  private getPasswordStrengthUserInput() {
+    let userInput: string[] = [];
+    const atPosition = this.email.indexOf("@");
+    if (atPosition > -1) {
+      userInput = userInput.concat(
+        this.email
+          .substr(0, atPosition)
+          .trim()
+          .toLowerCase()
+          .split(/[^A-Za-z0-9]/)
+      );
+    }
+    return userInput;
+  }
+
+  private async apiClientId(): Promise<string> {
+    let clientId: string = null;
+
+    const storedClientId: string = process.env.BW_CLIENTID;
+    if (storedClientId == null) {
+      if (this.canInteract) {
+        const answer: inquirer.Answers = await inquirer.createPromptModule({
+          output: process.stderr,
+        })({
+          type: "input",
+          name: "clientId",
+          message: "client_id:",
         });
+        clientId = answer.clientId;
+      } else {
+        clientId = null;
+      }
+    } else {
+      clientId = storedClientId;
     }
 
-    private getOrgIdentifierFromState(state: string): string {
-        if (state === null || state === undefined) {
-            return null;
-        }
-
-        const stateSplit = state.split('_identifier=');
-        return stateSplit.length > 1 ? stateSplit[1] : null;
+    return clientId;
+  }
+
+  private async apiClientSecret(isAdditionalAuthentication: boolean = false): Promise<string> {
+    const additionalAuthenticationMessage = "Additional authentication required.\nAPI key ";
+    let clientSecret: string = null;
+
+    const storedClientSecret: string = this.clientSecret || process.env.BW_CLIENTSECRET;
+    if (this.canInteract && storedClientSecret == null) {
+      const answer: inquirer.Answers = await inquirer.createPromptModule({
+        output: process.stderr,
+      })({
+        type: "input",
+        name: "clientSecret",
+        message:
+          (isAdditionalAuthentication ? additionalAuthenticationMessage : "") + "client_secret:",
+      });
+      clientSecret = answer.clientSecret;
+    } else {
+      clientSecret = storedClientSecret;
     }
 
-    private checkState(state: string, checkState: string): boolean {
-        if (state === null || state === undefined) {
-            return false;
+    return clientSecret;
+  }
+
+  private async apiIdentifiers(): Promise<{ clientId: string; clientSecret: string }> {
+    return {
+      clientId: await this.apiClientId(),
+      clientSecret: await this.apiClientSecret(),
+    };
+  }
+
+  private async openSsoPrompt(
+    codeChallenge: string,
+    state: string
+  ): Promise<{ ssoCode: string; orgIdentifier: string }> {
+    return new Promise((resolve, reject) => {
+      const callbackServer = http.createServer((req, res) => {
+        const urlString = "http://localhost" + req.url;
+        const url = new URL(urlString);
+        const code = url.searchParams.get("code");
+        const receivedState = url.searchParams.get("state");
+        const orgIdentifier = this.getOrgIdentifierFromState(receivedState);
+        res.setHeader("Content-Type", "text/html");
+        if (code != null && receivedState != null && this.checkState(receivedState, state)) {
+          res.writeHead(200);
+          res.end(
+            "<html><head><title>Success | Bitwarden CLI</title></head><body>" +
+              "<h1>Successfully authenticated with the Bitwarden CLI</h1>" +
+              "<p>You may now close this tab and return to the terminal.</p>" +
+              "</body></html>"
+          );
+          callbackServer.close(() =>
+            resolve({
+              ssoCode: code,
+              orgIdentifier: orgIdentifier,
+            })
+          );
+        } else {
+          res.writeHead(400);
+          res.end(
+            "<html><head><title>Failed | Bitwarden CLI</title></head><body>" +
+              "<h1>Something went wrong logging into the Bitwarden CLI</h1>" +
+              "<p>You may now close this tab and return to the terminal.</p>" +
+              "</body></html>"
+          );
+          callbackServer.close(() => reject());
         }
-        if (checkState === null || checkState === undefined) {
-            return false;
+      });
+      let foundPort = false;
+      const webUrl = this.environmentService.getWebVaultUrl();
+      for (let port = 8065; port <= 8070; port++) {
+        try {
+          this.ssoRedirectUri = "http://localhost:" + port;
+          callbackServer.listen(port, () => {
+            this.platformUtilsService.launchUri(
+              webUrl +
+                "/#/sso?clientId=" +
+                this.clientId +
+                "&redirectUri=" +
+                encodeURIComponent(this.ssoRedirectUri) +
+                "&state=" +
+                state +
+                "&codeChallenge=" +
+                codeChallenge
+            );
+          });
+          foundPort = true;
+          break;
+        } catch {
+          // Ignore error since we run the same command up to 5 times.
         }
+      }
+      if (!foundPort) {
+        reject();
+      }
+    });
+  }
+
+  private getOrgIdentifierFromState(state: string): string {
+    if (state === null || state === undefined) {
+      return null;
+    }
+
+    const stateSplit = state.split("_identifier=");
+    return stateSplit.length > 1 ? stateSplit[1] : null;
+  }
 
-        const stateSplit = state.split('_identifier=');
-        const checkStateSplit = checkState.split('_identifier=');
-        return stateSplit[0] === checkStateSplit[0];
+  private checkState(state: string, checkState: string): boolean {
+    if (state === null || state === undefined) {
+      return false;
     }
+    if (checkState === null || checkState === undefined) {
+      return false;
+    }
+
+    const stateSplit = state.split("_identifier=");
+    const checkStateSplit = checkState.split("_identifier=");
+    return stateSplit[0] === checkStateSplit[0];
+  }
 }
diff --git a/jslib/node/src/cli/commands/logout.command.ts b/jslib/node/src/cli/commands/logout.command.ts
index 12b1533e..752d142d 100644
--- a/jslib/node/src/cli/commands/logout.command.ts
+++ b/jslib/node/src/cli/commands/logout.command.ts
@@ -1,19 +1,24 @@
-import * as program from 'commander';
+import * as program from "commander";
 
-import { AuthService } from 'jslib-common/abstractions/auth.service';
-import { I18nService } from 'jslib-common/abstractions/i18n.service';
+import { AuthService } from "jslib-common/abstractions/auth.service";
+import { I18nService } from "jslib-common/abstractions/i18n.service";
 
-import { Response } from '../models/response';
-import { MessageResponse } from '../models/response/messageResponse';
+import { Response } from "../models/response";
+import { MessageResponse } from "../models/response/messageResponse";
 
 export class LogoutCommand {
-    constructor(private authService: AuthService, private i18nService: I18nService,
-        private logoutCallback: () => Promise<void>) { }
+  constructor(
+    private authService: AuthService,
+    private i18nService: I18nService,
+    private logoutCallback: () => Promise<void>
+  ) {}
 
-    async run() {
-        await this.logoutCallback();
-        this.authService.logOut(() => { /* Do nothing */ });
-        const res = new MessageResponse('You have logged out.', null);
-        return Response.success(res);
-    }
+  async run() {
+    await this.logoutCallback();
+    this.authService.logOut(() => {
+      /* Do nothing */
+    });
+    const res = new MessageResponse("You have logged out.", null);
+    return Response.success(res);
+  }
 }
diff --git a/jslib/node/src/cli/commands/update.command.ts b/jslib/node/src/cli/commands/update.command.ts
index 94dc046e..147a4694 100644
--- a/jslib/node/src/cli/commands/update.command.ts
+++ b/jslib/node/src/cli/commands/update.command.ts
@@ -1,86 +1,105 @@
-import * as program from 'commander';
-import * as fetch from 'node-fetch';
+import * as program from "commander";
+import * as fetch from "node-fetch";
 
-import { I18nService } from 'jslib-common/abstractions/i18n.service';
-import { PlatformUtilsService } from 'jslib-common/abstractions/platformUtils.service';
+import { I18nService } from "jslib-common/abstractions/i18n.service";
+import { PlatformUtilsService } from "jslib-common/abstractions/platformUtils.service";
 
-import { Response } from '../models/response';
-import { MessageResponse } from '../models/response/messageResponse';
+import { Response } from "../models/response";
+import { MessageResponse } from "../models/response/messageResponse";
 
 export class UpdateCommand {
-    inPkg: boolean = false;
+  inPkg: boolean = false;
 
-    constructor(private platformUtilsService: PlatformUtilsService, private i18nService: I18nService,
-        private repoName: string, private executableName: string, private showExtendedMessage: boolean) {
-        this.inPkg = !!(process as any).pkg;
-    }
+  constructor(
+    private platformUtilsService: PlatformUtilsService,
+    private i18nService: I18nService,
+    private repoName: string,
+    private executableName: string,
+    private showExtendedMessage: boolean
+  ) {
+    this.inPkg = !!(process as any).pkg;
+  }
 
-    async run(): Promise<Response> {
-        const currentVersion = await this.platformUtilsService.getApplicationVersion();
+  async run(): Promise<Response> {
+    const currentVersion = await this.platformUtilsService.getApplicationVersion();
 
-        const response = await fetch.default('https://api.github.com/repos/bitwarden/' +
-            this.repoName + '/releases/latest');
-        if (response.status === 200) {
-            const responseJson = await response.json();
-            const res = new MessageResponse(null, null);
+    const response = await fetch.default(
+      "https://api.github.com/repos/bitwarden/" + this.repoName + "/releases/latest"
+    );
+    if (response.status === 200) {
+      const responseJson = await response.json();
+      const res = new MessageResponse(null, null);
 
-            const tagName: string = responseJson.tag_name;
-            if (tagName === ('v' + currentVersion)) {
-                res.title = 'No update available.';
-                res.noColor = true;
-                return Response.success(res);
-            }
+      const tagName: string = responseJson.tag_name;
+      if (tagName === "v" + currentVersion) {
+        res.title = "No update available.";
+        res.noColor = true;
+        return Response.success(res);
+      }
 
-            let downloadUrl: string = null;
-            if (responseJson.assets != null) {
-                for (const a of responseJson.assets) {
-                    const download: string = a.browser_download_url;
-                    if (download == null) {
-                        continue;
-                    }
+      let downloadUrl: string = null;
+      if (responseJson.assets != null) {
+        for (const a of responseJson.assets) {
+          const download: string = a.browser_download_url;
+          if (download == null) {
+            continue;
+          }
 
-                    if (download.indexOf('.zip') === -1) {
-                        continue;
-                    }
+          if (download.indexOf(".zip") === -1) {
+            continue;
+          }
 
-                    if (process.platform === 'win32' && download.indexOf(this.executableName + '-windows') > -1) {
-                        downloadUrl = download;
-                        break;
-                    } else if (process.platform === 'darwin' && download.indexOf(this.executableName + '-macos') > -1) {
-                        downloadUrl = download;
-                        break;
-                    } else if (process.platform === 'linux' && download.indexOf(this.executableName + '-linux') > -1) {
-                        downloadUrl = download;
-                        break;
-                    }
-                }
-            }
+          if (
+            process.platform === "win32" &&
+            download.indexOf(this.executableName + "-windows") > -1
+          ) {
+            downloadUrl = download;
+            break;
+          } else if (
+            process.platform === "darwin" &&
+            download.indexOf(this.executableName + "-macos") > -1
+          ) {
+            downloadUrl = download;
+            break;
+          } else if (
+            process.platform === "linux" &&
+            download.indexOf(this.executableName + "-linux") > -1
+          ) {
+            downloadUrl = download;
+            break;
+          }
+        }
+      }
 
-            res.title = 'A new version is available: ' + tagName;
-            if (downloadUrl == null) {
-                downloadUrl = 'https://github.com/bitwarden/' + this.repoName + '/releases';
-            } else {
-                res.raw = downloadUrl;
-            }
-            res.message = '';
-            if (responseJson.body != null && responseJson.body !== '') {
-                res.message = responseJson.body + '\n\n';
-            }
+      res.title = "A new version is available: " + tagName;
+      if (downloadUrl == null) {
+        downloadUrl = "https://github.com/bitwarden/" + this.repoName + "/releases";
+      } else {
+        res.raw = downloadUrl;
+      }
+      res.message = "";
+      if (responseJson.body != null && responseJson.body !== "") {
+        res.message = responseJson.body + "\n\n";
+      }
 
-            res.message += 'You can download this update at ' + downloadUrl;
+      res.message += "You can download this update at " + downloadUrl;
 
-            if (this.showExtendedMessage) {
-                if (this.inPkg) {
-                    res.message += '\n\nIf you installed this CLI through a package manager ' +
-                        'you should probably update using its update command instead.';
-                } else {
-                    res.message += '\n\nIf you installed this CLI through NPM ' +
-                        'you should update using `npm install -g @bitwarden/' + this.repoName + '`';
-                }
-            }
-            return Response.success(res);
+      if (this.showExtendedMessage) {
+        if (this.inPkg) {
+          res.message +=
+            "\n\nIf you installed this CLI through a package manager " +
+            "you should probably update using its update command instead.";
         } else {
-            return Response.error('Error contacting update API: ' + response.status);
+          res.message +=
+            "\n\nIf you installed this CLI through NPM " +
+            "you should update using `npm install -g @bitwarden/" +
+            this.repoName +
+            "`";
         }
+      }
+      return Response.success(res);
+    } else {
+      return Response.error("Error contacting update API: " + response.status);
     }
+  }
 }
diff --git a/jslib/node/src/cli/models/response.ts b/jslib/node/src/cli/models/response.ts
index d3a858ac..d768c51f 100644
--- a/jslib/node/src/cli/models/response.ts
+++ b/jslib/node/src/cli/models/response.ts
@@ -1,45 +1,50 @@
-import { BaseResponse } from './response/baseResponse';
+import { BaseResponse } from "./response/baseResponse";
 
 export class Response {
-    static error(error: any, data?: any): Response {
-        const res = new Response();
-        res.success = false;
-        if (typeof (error) === 'string') {
-            res.message = error;
-        } else {
-            res.message = error.message != null ? error.message :
-                error.toString() === '[object Object]' ? JSON.stringify(error) : error.toString();
-        }
-        res.data = data;
-        return res;
+  static error(error: any, data?: any): Response {
+    const res = new Response();
+    res.success = false;
+    if (typeof error === "string") {
+      res.message = error;
+    } else {
+      res.message =
+        error.message != null
+          ? error.message
+          : error.toString() === "[object Object]"
+          ? JSON.stringify(error)
+          : error.toString();
     }
+    res.data = data;
+    return res;
+  }
 
-    static notFound(): Response {
-        return Response.error('Not found.');
-    }
+  static notFound(): Response {
+    return Response.error("Not found.");
+  }
 
-    static badRequest(message: string): Response {
-        return Response.error(message);
-    }
+  static badRequest(message: string): Response {
+    return Response.error(message);
+  }
 
-    static multipleResults(ids: string[]): Response {
-        let msg = 'More than one result was found. Try getting a specific object by `id` instead. ' +
-            'The following objects were found:';
-        ids.forEach(id => {
-            msg += '\n' + id;
-        });
-        return Response.error(msg, ids);
-    }
+  static multipleResults(ids: string[]): Response {
+    let msg =
+      "More than one result was found. Try getting a specific object by `id` instead. " +
+      "The following objects were found:";
+    ids.forEach((id) => {
+      msg += "\n" + id;
+    });
+    return Response.error(msg, ids);
+  }
 
-    static success(data?: BaseResponse): Response {
-        const res = new Response();
-        res.success = true;
-        res.data = data;
-        return res;
-    }
+  static success(data?: BaseResponse): Response {
+    const res = new Response();
+    res.success = true;
+    res.data = data;
+    return res;
+  }
 
-    success: boolean;
-    message: string;
-    errorCode: number;
-    data: BaseResponse;
+  success: boolean;
+  message: string;
+  errorCode: number;
+  data: BaseResponse;
 }
diff --git a/jslib/node/src/cli/models/response/baseResponse.ts b/jslib/node/src/cli/models/response/baseResponse.ts
index 9d8beca0..b0cc57da 100644
--- a/jslib/node/src/cli/models/response/baseResponse.ts
+++ b/jslib/node/src/cli/models/response/baseResponse.ts
@@ -1,3 +1,3 @@
 export interface BaseResponse {
-    object: string;
+  object: string;
 }
diff --git a/jslib/node/src/cli/models/response/fileResponse.ts b/jslib/node/src/cli/models/response/fileResponse.ts
index 2e832dfc..c16b56e0 100644
--- a/jslib/node/src/cli/models/response/fileResponse.ts
+++ b/jslib/node/src/cli/models/response/fileResponse.ts
@@ -1,13 +1,13 @@
-import { BaseResponse } from './baseResponse';
+import { BaseResponse } from "./baseResponse";
 
 export class FileResponse implements BaseResponse {
-    object: string;
-    data: Buffer;
-    fileName: string;
+  object: string;
+  data: Buffer;
+  fileName: string;
 
-    constructor(data: Buffer, fileName: string) {
-        this.object = 'file';
-        this.data = data;
-        this.fileName = fileName;
-    }
+  constructor(data: Buffer, fileName: string) {
+    this.object = "file";
+    this.data = data;
+    this.fileName = fileName;
+  }
 }
diff --git a/jslib/node/src/cli/models/response/listResponse.ts b/jslib/node/src/cli/models/response/listResponse.ts
index 7995bd4f..db415bcd 100644
--- a/jslib/node/src/cli/models/response/listResponse.ts
+++ b/jslib/node/src/cli/models/response/listResponse.ts
@@ -1,11 +1,11 @@
-import { BaseResponse } from './baseResponse';
+import { BaseResponse } from "./baseResponse";
 
 export class ListResponse implements BaseResponse {
-    object: string;
-    data: BaseResponse[];
+  object: string;
+  data: BaseResponse[];
 
-    constructor(data: BaseResponse[]) {
-        this.object = 'list';
-        this.data = data;
-    }
+  constructor(data: BaseResponse[]) {
+    this.object = "list";
+    this.data = data;
+  }
 }
diff --git a/jslib/node/src/cli/models/response/messageResponse.ts b/jslib/node/src/cli/models/response/messageResponse.ts
index 448e3db7..8612841a 100644
--- a/jslib/node/src/cli/models/response/messageResponse.ts
+++ b/jslib/node/src/cli/models/response/messageResponse.ts
@@ -1,15 +1,15 @@
-import { BaseResponse } from './baseResponse';
+import { BaseResponse } from "./baseResponse";
 
 export class MessageResponse implements BaseResponse {
-    object: string;
-    title: string;
-    message: string;
-    raw: string;
-    noColor = false;
+  object: string;
+  title: string;
+  message: string;
+  raw: string;
+  noColor = false;
 
-    constructor(title: string, message: string) {
-        this.object = 'message';
-        this.title = title;
-        this.message = message;
-    }
+  constructor(title: string, message: string) {
+    this.object = "message";
+    this.title = title;
+    this.message = message;
+  }
 }
diff --git a/jslib/node/src/cli/models/response/stringResponse.ts b/jslib/node/src/cli/models/response/stringResponse.ts
index b9a0f044..f4becfe8 100644
--- a/jslib/node/src/cli/models/response/stringResponse.ts
+++ b/jslib/node/src/cli/models/response/stringResponse.ts
@@ -1,11 +1,11 @@
-import { BaseResponse } from './baseResponse';
+import { BaseResponse } from "./baseResponse";
 
 export class StringResponse implements BaseResponse {
-    object: string;
-    data: string;
+  object: string;
+  data: string;
 
-    constructor(data: string) {
-        this.object = 'string';
-        this.data = data;
-    }
+  constructor(data: string) {
+    this.object = "string";
+    this.data = data;
+  }
 }
diff --git a/jslib/node/src/cli/services/cliPlatformUtils.service.ts b/jslib/node/src/cli/services/cliPlatformUtils.service.ts
index 78afaee9..7975d064 100644
--- a/jslib/node/src/cli/services/cliPlatformUtils.service.ts
+++ b/jslib/node/src/cli/services/cliPlatformUtils.service.ts
@@ -1,157 +1,166 @@
-import * as child_process from 'child_process';
+import * as child_process from "child_process";
 
-import { DeviceType } from 'jslib-common/enums/deviceType';
-import { ThemeType } from 'jslib-common/enums/themeType';
+import { DeviceType } from "jslib-common/enums/deviceType";
+import { ThemeType } from "jslib-common/enums/themeType";
 
-import { PlatformUtilsService } from 'jslib-common/abstractions/platformUtils.service';
+import { PlatformUtilsService } from "jslib-common/abstractions/platformUtils.service";
 
 // tslint:disable-next-line
-const open = require('open');
+const open = require("open");
 
 export class CliPlatformUtilsService implements PlatformUtilsService {
-    identityClientId: string;
-
-    private deviceCache: DeviceType = null;
-
-    constructor(identityClientId: string, private packageJson: any) {
-        this.identityClientId = identityClientId;
-    }
-
-    getDevice(): DeviceType {
-        if (!this.deviceCache) {
-            switch (process.platform) {
-                case 'win32':
-                    this.deviceCache = DeviceType.WindowsDesktop;
-                    break;
-                case 'darwin':
-                    this.deviceCache = DeviceType.MacOsDesktop;
-                    break;
-                case 'linux':
-                default:
-                    this.deviceCache = DeviceType.LinuxDesktop;
-                    break;
-            }
-        }
-
-        return this.deviceCache;
-    }
-
-    getDeviceString(): string {
-        const device = DeviceType[this.getDevice()].toLowerCase();
-        return device.replace('desktop', '');
-    }
-
-    isFirefox() {
-        return false;
-    }
-
-    isChrome() {
-        return false;
-    }
-
-    isEdge() {
-        return false;
-    }
-
-    isOpera() {
-        return false;
-    }
-
-    isVivaldi() {
-        return false;
-    }
-
-    isSafari() {
-        return false;
-    }
-
-    isIE() {
-        return false;
-    }
-
-    isMacAppStore() {
-        return false;
-    }
-
-    isViewOpen() {
-        return Promise.resolve(false);
-    }
-
-    launchUri(uri: string, options?: any): void {
-        if (process.platform === 'linux') {
-            child_process.spawnSync('xdg-open', [uri]);
-        } else {
-            open(uri);
-        }
-    }
-
-    saveFile(win: Window, blobData: any, blobOptions: any, fileName: string): void {
-        throw new Error('Not implemented.');
-    }
-
-    getApplicationVersion(): Promise<string> {
-        return Promise.resolve(this.packageJson.version);
-    }
-
-    getApplicationVersionSync(): string {
-        return this.packageJson.version;
-    }
-
-    supportsWebAuthn(win: Window) {
-        return false;
-    }
-
-    supportsDuo(): boolean {
-        return false;
-    }
-
-    showToast(type: 'error' | 'success' | 'warning' | 'info', title: string, text: string | string[],
-        options?: any): void {
-        throw new Error('Not implemented.');
-    }
-
-    showDialog(text: string, title?: string, confirmText?: string, cancelText?: string, type?: string):
-        Promise<boolean> {
-        throw new Error('Not implemented.');
-    }
-
-    isDev(): boolean {
-        return process.env.BWCLI_ENV === 'development';
-    }
-
-    isSelfHost(): boolean {
-        return false;
-    }
-
-    copyToClipboard(text: string, options?: any): void {
-        throw new Error('Not implemented.');
-    }
-
-    readFromClipboard(options?: any): Promise<string> {
-        throw new Error('Not implemented.');
-    }
-
-    supportsBiometric(): Promise<boolean> {
-        return Promise.resolve(false);
-    }
-
-    authenticateBiometric(): Promise<boolean> {
-        return Promise.resolve(false);
-    }
-
-    getDefaultSystemTheme() {
-        return Promise.resolve(ThemeType.Light as ThemeType.Light | ThemeType.Dark);
-    }
-
-    onDefaultSystemThemeChange() {
-        /* noop */
-    }
-
-    getEffectiveTheme() {
-        return Promise.resolve(ThemeType.Light);
-    }
-
-    supportsSecureStorage(): boolean {
-        return false;
-    }
+  identityClientId: string;
+
+  private deviceCache: DeviceType = null;
+
+  constructor(identityClientId: string, private packageJson: any) {
+    this.identityClientId = identityClientId;
+  }
+
+  getDevice(): DeviceType {
+    if (!this.deviceCache) {
+      switch (process.platform) {
+        case "win32":
+          this.deviceCache = DeviceType.WindowsDesktop;
+          break;
+        case "darwin":
+          this.deviceCache = DeviceType.MacOsDesktop;
+          break;
+        case "linux":
+        default:
+          this.deviceCache = DeviceType.LinuxDesktop;
+          break;
+      }
+    }
+
+    return this.deviceCache;
+  }
+
+  getDeviceString(): string {
+    const device = DeviceType[this.getDevice()].toLowerCase();
+    return device.replace("desktop", "");
+  }
+
+  isFirefox() {
+    return false;
+  }
+
+  isChrome() {
+    return false;
+  }
+
+  isEdge() {
+    return false;
+  }
+
+  isOpera() {
+    return false;
+  }
+
+  isVivaldi() {
+    return false;
+  }
+
+  isSafari() {
+    return false;
+  }
+
+  isIE() {
+    return false;
+  }
+
+  isMacAppStore() {
+    return false;
+  }
+
+  isViewOpen() {
+    return Promise.resolve(false);
+  }
+
+  launchUri(uri: string, options?: any): void {
+    if (process.platform === "linux") {
+      child_process.spawnSync("xdg-open", [uri]);
+    } else {
+      open(uri);
+    }
+  }
+
+  saveFile(win: Window, blobData: any, blobOptions: any, fileName: string): void {
+    throw new Error("Not implemented.");
+  }
+
+  getApplicationVersion(): Promise<string> {
+    return Promise.resolve(this.packageJson.version);
+  }
+
+  getApplicationVersionSync(): string {
+    return this.packageJson.version;
+  }
+
+  supportsWebAuthn(win: Window) {
+    return false;
+  }
+
+  supportsDuo(): boolean {
+    return false;
+  }
+
+  showToast(
+    type: "error" | "success" | "warning" | "info",
+    title: string,
+    text: string | string[],
+    options?: any
+  ): void {
+    throw new Error("Not implemented.");
+  }
+
+  showDialog(
+    text: string,
+    title?: string,
+    confirmText?: string,
+    cancelText?: string,
+    type?: string
+  ): Promise<boolean> {
+    throw new Error("Not implemented.");
+  }
+
+  isDev(): boolean {
+    return process.env.BWCLI_ENV === "development";
+  }
+
+  isSelfHost(): boolean {
+    return false;
+  }
+
+  copyToClipboard(text: string, options?: any): void {
+    throw new Error("Not implemented.");
+  }
+
+  readFromClipboard(options?: any): Promise<string> {
+    throw new Error("Not implemented.");
+  }
+
+  supportsBiometric(): Promise<boolean> {
+    return Promise.resolve(false);
+  }
+
+  authenticateBiometric(): Promise<boolean> {
+    return Promise.resolve(false);
+  }
+
+  getDefaultSystemTheme() {
+    return Promise.resolve(ThemeType.Light as ThemeType.Light | ThemeType.Dark);
+  }
+
+  onDefaultSystemThemeChange() {
+    /* noop */
+  }
+
+  getEffectiveTheme() {
+    return Promise.resolve(ThemeType.Light);
+  }
+
+  supportsSecureStorage(): boolean {
+    return false;
+  }
 }
diff --git a/jslib/node/src/cli/services/consoleLog.service.ts b/jslib/node/src/cli/services/consoleLog.service.ts
index f603f326..f55e2d7d 100644
--- a/jslib/node/src/cli/services/consoleLog.service.ts
+++ b/jslib/node/src/cli/services/consoleLog.service.ts
@@ -1,23 +1,23 @@
-import { LogLevelType } from 'jslib-common/enums/logLevelType';
+import { LogLevelType } from "jslib-common/enums/logLevelType";
 
-import { ConsoleLogService as BaseConsoleLogService } from 'jslib-common/services/consoleLog.service';
+import { ConsoleLogService as BaseConsoleLogService } from "jslib-common/services/consoleLog.service";
 
 export class ConsoleLogService extends BaseConsoleLogService {
-    constructor(isDev: boolean, filter: (level: LogLevelType) => boolean = null) {
-        super(isDev, filter);
-    }
-
-    write(level: LogLevelType, message: string) {
-        if (this.filter != null && this.filter(level)) {
-            return;
-        }
+  constructor(isDev: boolean, filter: (level: LogLevelType) => boolean = null) {
+    super(isDev, filter);
+  }
 
-        if (process.env.BW_RESPONSE === 'true') {
-            // tslint:disable-next-line
-            console.error(message);
-            return;
-        }
+  write(level: LogLevelType, message: string) {
+    if (this.filter != null && this.filter(level)) {
+      return;
+    }
 
-        super.write(level, message);
+    if (process.env.BW_RESPONSE === "true") {
+      // tslint:disable-next-line
+      console.error(message);
+      return;
     }
+
+    super.write(level, message);
+  }
 }
diff --git a/jslib/node/src/services/lowdbStorage.service.ts b/jslib/node/src/services/lowdbStorage.service.ts
index 99b327a1..05396115 100644
--- a/jslib/node/src/services/lowdbStorage.service.ts
+++ b/jslib/node/src/services/lowdbStorage.service.ts
@@ -1,119 +1,148 @@
-import * as fs from 'fs';
-import * as lowdb from 'lowdb';
-import * as FileSync from 'lowdb/adapters/FileSync';
-import * as path from 'path';
+import * as fs from "fs";
+import * as lowdb from "lowdb";
+import * as FileSync from "lowdb/adapters/FileSync";
+import * as path from "path";
 
-import { LogService } from 'jslib-common/abstractions/log.service';
-import { StorageService } from 'jslib-common/abstractions/storage.service';
+import { LogService } from "jslib-common/abstractions/log.service";
+import { StorageService } from "jslib-common/abstractions/storage.service";
 
-import { NodeUtils } from 'jslib-common/misc/nodeUtils';
-import { Utils } from 'jslib-common/misc/utils';
+import { NodeUtils } from "jslib-common/misc/nodeUtils";
+import { sequentialize } from "jslib-common/misc/sequentialize";
+import { Utils } from "jslib-common/misc/utils";
 
 export class LowdbStorageService implements StorageService {
-    protected dataFilePath: string;
-    private db: lowdb.LowdbSync<any>;
-    private defaults: any;
+  protected dataFilePath: string;
+  private db: lowdb.LowdbSync<any>;
+  private defaults: any;
+  private ready = false;
 
-    constructor(protected logService: LogService, defaults?: any, private dir?: string, private allowCache = false) {
-        this.defaults = defaults;
-    }
+  constructor(
+    protected logService: LogService,
+    defaults?: any,
+    private dir?: string,
+    private allowCache = false
+  ) {
+    this.defaults = defaults;
+  }
 
-    async init() {
-        this.logService.info('Initializing lowdb storage service.');
-        let adapter: lowdb.AdapterSync<any>;
-        if (Utils.isNode && this.dir != null) {
-            if (!fs.existsSync(this.dir)) {
-                this.logService.warning(`Could not find dir, "${this.dir}"; creating it instead.`);
-                NodeUtils.mkdirpSync(this.dir, '700');
-                this.logService.info(`Created dir "${this.dir}".`);
-            }
-            this.dataFilePath = path.join(this.dir, 'data.json');
-            if (!fs.existsSync(this.dataFilePath)) {
-                this.logService.warning(`Could not find data file, "${this.dataFilePath}"; creating it instead.`);
-                fs.writeFileSync(this.dataFilePath, '', { mode: 0o600 });
-                fs.chmodSync(this.dataFilePath, 0o600);
-                this.logService.info(`Created data file "${this.dataFilePath}" with chmod 600.`);
-            } else {
-                this.logService.info(`db file "${this.dataFilePath} already exists"; using existing db`);
-            }
-            await this.lockDbFile(() => {
-                adapter = new FileSync(this.dataFilePath);
-            });
-        }
-        try {
-            this.logService.info('Attempting to create lowdb storage adapter.');
-            this.db = lowdb(adapter);
-            this.logService.info('Successfully created lowdb storage adapter.');
-        } catch (e) {
-            if (e instanceof SyntaxError) {
-                this.logService.warning(`Error creating lowdb storage adapter, "${e.message}"; emptying data file.`);
-                if (fs.existsSync(this.dataFilePath)) {
-                    const backupPath = this.dataFilePath + '.bak';
-                    this.logService.warning(`Writing backup of data file to ${backupPath}`);
-                    await fs.copyFile(this.dataFilePath, backupPath, err => {
-                        this.logService.warning(`Error while creating data file backup, "${e.message}". No backup may have been created.`);
-                    });
-                }
-                adapter.write({});
-                this.db = lowdb(adapter);
-            } else {
-                this.logService.error(`Error creating lowdb storage adapter, "${e.message}".`);
-                throw e;
-            }
-        }
+  @sequentialize(() => "lowdbStorageInit")
+  async init() {
+    if (this.ready) {
+      return;
+    }
 
-        if (this.defaults != null) {
-            this.lockDbFile(() => {
-                this.logService.info('Writing defaults.');
-                this.readForNoCache();
-                this.db.defaults(this.defaults).write();
-                this.logService.info('Successfully wrote defaults to db.');
-            });
+    this.logService.info("Initializing lowdb storage service.");
+    let adapter: lowdb.AdapterSync<any>;
+    if (Utils.isNode && this.dir != null) {
+      if (!fs.existsSync(this.dir)) {
+        this.logService.warning(`Could not find dir, "${this.dir}"; creating it instead.`);
+        NodeUtils.mkdirpSync(this.dir, "700");
+        this.logService.info(`Created dir "${this.dir}".`);
+      }
+      this.dataFilePath = path.join(this.dir, "data.json");
+      if (!fs.existsSync(this.dataFilePath)) {
+        this.logService.warning(
+          `Could not find data file, "${this.dataFilePath}"; creating it instead.`
+        );
+        fs.writeFileSync(this.dataFilePath, "", { mode: 0o600 });
+        fs.chmodSync(this.dataFilePath, 0o600);
+        this.logService.info(`Created data file "${this.dataFilePath}" with chmod 600.`);
+      } else {
+        this.logService.info(`db file "${this.dataFilePath} already exists"; using existing db`);
+      }
+      await this.lockDbFile(() => {
+        adapter = new FileSync(this.dataFilePath);
+      });
+    }
+    try {
+      this.logService.info("Attempting to create lowdb storage adapter.");
+      this.db = lowdb(adapter);
+      this.logService.info("Successfully created lowdb storage adapter.");
+    } catch (e) {
+      if (e instanceof SyntaxError) {
+        this.logService.warning(
+          `Error creating lowdb storage adapter, "${e.message}"; emptying data file.`
+        );
+        if (fs.existsSync(this.dataFilePath)) {
+          const backupPath = this.dataFilePath + ".bak";
+          this.logService.warning(`Writing backup of data file to ${backupPath}`);
+          await fs.copyFile(this.dataFilePath, backupPath, (err) => {
+            this.logService.warning(
+              `Error while creating data file backup, "${e.message}". No backup may have been created.`
+            );
+          });
         }
+        adapter.write({});
+        this.db = lowdb(adapter);
+      } else {
+        this.logService.error(`Error creating lowdb storage adapter, "${e.message}".`);
+        throw e;
+      }
     }
 
-    get<T>(key: string): Promise<T> {
-        return this.lockDbFile(() => {
-            this.readForNoCache();
-            const val = this.db.get(key).value();
-            this.logService.debug(`Successfully read ${key} from db`);
-            if (val == null) {
-                return null;
-            }
-            return val as T;
-        });
+    if (this.defaults != null) {
+      this.lockDbFile(() => {
+        this.logService.info("Writing defaults.");
+        this.readForNoCache();
+        this.db.defaults(this.defaults).write();
+        this.logService.info("Successfully wrote defaults to db.");
+      });
     }
 
-    has(key: string): Promise<boolean> {
-        return this.get(key).then(v => v != null);
-    }
+    this.ready = true;
+  }
 
-    save(key: string, obj: any): Promise<any> {
-        return this.lockDbFile(() => {
-            this.readForNoCache();
-            this.db.set(key, obj).write();
-            this.logService.debug(`Successfully wrote ${key} to db`);
-            return;
-        });
-    }
+  async get<T>(key: string): Promise<T> {
+    await this.waitForReady();
+    return this.lockDbFile(() => {
+      this.readForNoCache();
+      const val = this.db.get(key).value();
+      this.logService.debug(`Successfully read ${key} from db`);
+      if (val == null) {
+        return null;
+      }
+      return val as T;
+    });
+  }
 
-    remove(key: string): Promise<any> {
-        return this.lockDbFile(() => {
-            this.readForNoCache();
-            this.db.unset(key).write();
-            this.logService.debug(`Successfully removed ${key} from db`);
-            return;
-        });
-    }
+  has(key: string): Promise<boolean> {
+    return this.get(key).then((v) => v != null);
+  }
+
+  async save(key: string, obj: any): Promise<any> {
+    await this.waitForReady();
+    return this.lockDbFile(() => {
+      this.readForNoCache();
+      this.db.set(key, obj).write();
+      this.logService.debug(`Successfully wrote ${key} to db`);
+      return;
+    });
+  }
 
-    protected async lockDbFile<T>(action: () => T): Promise<T> {
-        // Lock methods implemented in clients
-        return Promise.resolve(action());
+  async remove(key: string): Promise<any> {
+    await this.waitForReady();
+    return this.lockDbFile(() => {
+      this.readForNoCache();
+      this.db.unset(key).write();
+      this.logService.debug(`Successfully removed ${key} from db`);
+      return;
+    });
+  }
+
+  protected async lockDbFile<T>(action: () => T): Promise<T> {
+    // Lock methods implemented in clients
+    return Promise.resolve(action());
+  }
+
+  private readForNoCache() {
+    if (!this.allowCache) {
+      this.db.read();
     }
+  }
 
-    private readForNoCache() {
-        if (!this.allowCache) {
-            this.db.read();
-        }
+  private async waitForReady() {
+    if (!this.ready) {
+      await this.init();
     }
+  }
 }
diff --git a/jslib/node/src/services/nodeApi.service.ts b/jslib/node/src/services/nodeApi.service.ts
index 3cfc5bb8..08d85449 100644
--- a/jslib/node/src/services/nodeApi.service.ts
+++ b/jslib/node/src/services/nodeApi.service.ts
@@ -1,12 +1,12 @@
-import * as FormData from 'form-data';
-import { HttpsProxyAgent } from 'https-proxy-agent';
-import * as fe from 'node-fetch';
+import * as FormData from "form-data";
+import { HttpsProxyAgent } from "https-proxy-agent";
+import * as fe from "node-fetch";
 
-import { ApiService } from 'jslib-common/services/api.service';
+import { ApiService } from "jslib-common/services/api.service";
 
-import { EnvironmentService } from 'jslib-common/abstractions/environment.service';
-import { PlatformUtilsService } from 'jslib-common/abstractions/platformUtils.service';
-import { TokenService } from 'jslib-common/abstractions/token.service';
+import { EnvironmentService } from "jslib-common/abstractions/environment.service";
+import { PlatformUtilsService } from "jslib-common/abstractions/platformUtils.service";
+import { TokenService } from "jslib-common/abstractions/token.service";
 
 (global as any).fetch = fe.default;
 (global as any).Request = fe.Request;
@@ -15,18 +15,23 @@ import { TokenService } from 'jslib-common/abstractions/token.service';
 (global as any).FormData = FormData;
 
 export class NodeApiService extends ApiService {
-    constructor(tokenService: TokenService, platformUtilsService: PlatformUtilsService,
-        environmentService: EnvironmentService, logoutCallback: (expired: boolean) => Promise<void>,
-        customUserAgent: string = null, apiKeyRefresh: (clientId: string, clientSecret: string) => Promise<any>) {
-        super(tokenService, platformUtilsService, environmentService, logoutCallback, customUserAgent);
-        this.apiKeyRefresh = apiKeyRefresh;
-    }
+  constructor(
+    tokenService: TokenService,
+    platformUtilsService: PlatformUtilsService,
+    environmentService: EnvironmentService,
+    logoutCallback: (expired: boolean) => Promise<void>,
+    customUserAgent: string = null,
+    apiKeyRefresh: (clientId: string, clientSecret: string) => Promise<any>
+  ) {
+    super(tokenService, platformUtilsService, environmentService, logoutCallback, customUserAgent);
+    this.apiKeyRefresh = apiKeyRefresh;
+  }
 
-    nativeFetch(request: Request): Promise<Response> {
-        const proxy = process.env.http_proxy || process.env.https_proxy;
-        if (proxy) {
-            (request as any).agent = new HttpsProxyAgent(proxy);
-        }
-        return fetch(request);
+  nativeFetch(request: Request): Promise<Response> {
+    const proxy = process.env.http_proxy || process.env.https_proxy;
+    if (proxy) {
+      (request as any).agent = new HttpsProxyAgent(proxy);
     }
+    return fetch(request);
+  }
 }
diff --git a/jslib/node/src/services/nodeCryptoFunction.service.ts b/jslib/node/src/services/nodeCryptoFunction.service.ts
index 5fd6b2c5..dae6fa68 100644
--- a/jslib/node/src/services/nodeCryptoFunction.service.ts
+++ b/jslib/node/src/services/nodeCryptoFunction.service.ts
@@ -1,263 +1,302 @@
-import * as crypto from 'crypto';
-import * as forge from 'node-forge';
+import * as crypto from "crypto";
+import * as forge from "node-forge";
 
-import { CryptoFunctionService } from 'jslib-common/abstractions/cryptoFunction.service';
+import { CryptoFunctionService } from "jslib-common/abstractions/cryptoFunction.service";
 
-import { DecryptParameters } from 'jslib-common/models/domain/decryptParameters';
-import { SymmetricCryptoKey } from 'jslib-common/models/domain/symmetricCryptoKey';
+import { DecryptParameters } from "jslib-common/models/domain/decryptParameters";
+import { SymmetricCryptoKey } from "jslib-common/models/domain/symmetricCryptoKey";
 
-import { Utils } from 'jslib-common/misc/utils';
+import { Utils } from "jslib-common/misc/utils";
 
 export class NodeCryptoFunctionService implements CryptoFunctionService {
-    pbkdf2(password: string | ArrayBuffer, salt: string | ArrayBuffer, algorithm: 'sha256' | 'sha512',
-        iterations: number): Promise<ArrayBuffer> {
-        const len = algorithm === 'sha256' ? 32 : 64;
-        const nodePassword = this.toNodeValue(password);
-        const nodeSalt = this.toNodeValue(salt);
-        return new Promise<ArrayBuffer>((resolve, reject) => {
-            crypto.pbkdf2(nodePassword, nodeSalt, iterations, len, algorithm, (error, key) => {
-                if (error != null) {
-                    reject(error);
-                } else {
-                    resolve(this.toArrayBuffer(key));
-                }
-            });
-        });
-    }
-
-    // ref: https://tools.ietf.org/html/rfc5869
-    async hkdf(ikm: ArrayBuffer, salt: string | ArrayBuffer, info: string | ArrayBuffer,
-        outputByteSize: number, algorithm: 'sha256' | 'sha512'): Promise<ArrayBuffer> {
-        const saltBuf = this.toArrayBuffer(salt);
-        const prk = await this.hmac(ikm, saltBuf, algorithm);
-        return this.hkdfExpand(prk, info, outputByteSize, algorithm);
-    }
-
-    // ref: https://tools.ietf.org/html/rfc5869
-    async hkdfExpand(prk: ArrayBuffer, info: string | ArrayBuffer, outputByteSize: number,
-        algorithm: 'sha256' | 'sha512'): Promise<ArrayBuffer> {
-        const hashLen = algorithm === 'sha256' ? 32 : 64;
-        if (outputByteSize > 255 * hashLen) {
-            throw new Error('outputByteSize is too large.');
-        }
-        const prkArr = new Uint8Array(prk);
-        if (prkArr.length < hashLen) {
-            throw new Error('prk is too small.');
-        }
-        const infoBuf = this.toArrayBuffer(info);
-        const infoArr = new Uint8Array(infoBuf);
-        let runningOkmLength = 0;
-        let previousT = new Uint8Array(0);
-        const n = Math.ceil(outputByteSize / hashLen);
-        const okm = new Uint8Array(n * hashLen);
-        for (let i = 0; i < n; i++) {
-            const t = new Uint8Array(previousT.length + infoArr.length + 1);
-            t.set(previousT);
-            t.set(infoArr, previousT.length);
-            t.set([i + 1], t.length - 1);
-            previousT = new Uint8Array(await this.hmac(t.buffer, prk, algorithm));
-            okm.set(previousT, runningOkmLength);
-            runningOkmLength += previousT.length;
-            if (runningOkmLength >= outputByteSize) {
-                break;
-            }
-        }
-        return okm.slice(0, outputByteSize).buffer;
-    }
-
-    hash(value: string | ArrayBuffer, algorithm: 'sha1' | 'sha256' | 'sha512' | 'md5'): Promise<ArrayBuffer> {
-        const nodeValue = this.toNodeValue(value);
-        const hash = crypto.createHash(algorithm);
-        hash.update(nodeValue);
-        return Promise.resolve(this.toArrayBuffer(hash.digest()));
-    }
-
-    hmac(value: ArrayBuffer, key: ArrayBuffer, algorithm: 'sha1' | 'sha256' | 'sha512'): Promise<ArrayBuffer> {
-        const nodeValue = this.toNodeBuffer(value);
-        const nodeKey = this.toNodeBuffer(key);
-        const hmac = crypto.createHmac(algorithm, nodeKey);
-        hmac.update(nodeValue);
-        return Promise.resolve(this.toArrayBuffer(hmac.digest()));
-    }
-
-    async compare(a: ArrayBuffer, b: ArrayBuffer): Promise<boolean> {
-        const key = await this.randomBytes(32);
-        const mac1 = await this.hmac(a, key, 'sha256');
-        const mac2 = await this.hmac(b, key, 'sha256');
-        if (mac1.byteLength !== mac2.byteLength) {
-            return false;
-        }
-
-        const arr1 = new Uint8Array(mac1);
-        const arr2 = new Uint8Array(mac2);
-        for (let i = 0; i < arr2.length; i++) {
-            if (arr1[i] !== arr2[i]) {
-                return false;
-            }
+  pbkdf2(
+    password: string | ArrayBuffer,
+    salt: string | ArrayBuffer,
+    algorithm: "sha256" | "sha512",
+    iterations: number
+  ): Promise<ArrayBuffer> {
+    const len = algorithm === "sha256" ? 32 : 64;
+    const nodePassword = this.toNodeValue(password);
+    const nodeSalt = this.toNodeValue(salt);
+    return new Promise<ArrayBuffer>((resolve, reject) => {
+      crypto.pbkdf2(nodePassword, nodeSalt, iterations, len, algorithm, (error, key) => {
+        if (error != null) {
+          reject(error);
+        } else {
+          resolve(this.toArrayBuffer(key));
         }
-
-        return true;
-    }
-
-    hmacFast(value: ArrayBuffer, key: ArrayBuffer, algorithm: 'sha1' | 'sha256' | 'sha512'): Promise<ArrayBuffer> {
-        return this.hmac(value, key, algorithm);
-    }
-
-    compareFast(a: ArrayBuffer, b: ArrayBuffer): Promise<boolean> {
-        return this.compare(a, b);
-    }
-
-    aesEncrypt(data: ArrayBuffer, iv: ArrayBuffer, key: ArrayBuffer): Promise<ArrayBuffer> {
-        const nodeData = this.toNodeBuffer(data);
-        const nodeIv = this.toNodeBuffer(iv);
-        const nodeKey = this.toNodeBuffer(key);
-        const cipher = crypto.createCipheriv('aes-256-cbc', nodeKey, nodeIv);
-        const encBuf = Buffer.concat([cipher.update(nodeData), cipher.final()]);
-        return Promise.resolve(this.toArrayBuffer(encBuf));
+      });
+    });
+  }
+
+  // ref: https://tools.ietf.org/html/rfc5869
+  async hkdf(
+    ikm: ArrayBuffer,
+    salt: string | ArrayBuffer,
+    info: string | ArrayBuffer,
+    outputByteSize: number,
+    algorithm: "sha256" | "sha512"
+  ): Promise<ArrayBuffer> {
+    const saltBuf = this.toArrayBuffer(salt);
+    const prk = await this.hmac(ikm, saltBuf, algorithm);
+    return this.hkdfExpand(prk, info, outputByteSize, algorithm);
+  }
+
+  // ref: https://tools.ietf.org/html/rfc5869
+  async hkdfExpand(
+    prk: ArrayBuffer,
+    info: string | ArrayBuffer,
+    outputByteSize: number,
+    algorithm: "sha256" | "sha512"
+  ): Promise<ArrayBuffer> {
+    const hashLen = algorithm === "sha256" ? 32 : 64;
+    if (outputByteSize > 255 * hashLen) {
+      throw new Error("outputByteSize is too large.");
     }
-
-    aesDecryptFastParameters(data: string, iv: string, mac: string, key: SymmetricCryptoKey):
-        DecryptParameters<ArrayBuffer> {
-        const p = new DecryptParameters<ArrayBuffer>();
-        p.encKey = key.encKey;
-        p.data = Utils.fromB64ToArray(data).buffer;
-        p.iv = Utils.fromB64ToArray(iv).buffer;
-
-        const macData = new Uint8Array(p.iv.byteLength + p.data.byteLength);
-        macData.set(new Uint8Array(p.iv), 0);
-        macData.set(new Uint8Array(p.data), p.iv.byteLength);
-        p.macData = macData.buffer;
-
-        if (key.macKey != null) {
-            p.macKey = key.macKey;
-        }
-        if (mac != null) {
-            p.mac = Utils.fromB64ToArray(mac).buffer;
-        }
-
-        return p;
+    const prkArr = new Uint8Array(prk);
+    if (prkArr.length < hashLen) {
+      throw new Error("prk is too small.");
     }
-
-    async aesDecryptFast(parameters: DecryptParameters<ArrayBuffer>): Promise<string> {
-        const decBuf = await this.aesDecrypt(parameters.data, parameters.iv, parameters.encKey);
-        return Utils.fromBufferToUtf8(decBuf);
+    const infoBuf = this.toArrayBuffer(info);
+    const infoArr = new Uint8Array(infoBuf);
+    let runningOkmLength = 0;
+    let previousT = new Uint8Array(0);
+    const n = Math.ceil(outputByteSize / hashLen);
+    const okm = new Uint8Array(n * hashLen);
+    for (let i = 0; i < n; i++) {
+      const t = new Uint8Array(previousT.length + infoArr.length + 1);
+      t.set(previousT);
+      t.set(infoArr, previousT.length);
+      t.set([i + 1], t.length - 1);
+      previousT = new Uint8Array(await this.hmac(t.buffer, prk, algorithm));
+      okm.set(previousT, runningOkmLength);
+      runningOkmLength += previousT.length;
+      if (runningOkmLength >= outputByteSize) {
+        break;
+      }
     }
-
-    aesDecrypt(data: ArrayBuffer, iv: ArrayBuffer, key: ArrayBuffer): Promise<ArrayBuffer> {
-        const nodeData = this.toNodeBuffer(data);
-        const nodeIv = this.toNodeBuffer(iv);
-        const nodeKey = this.toNodeBuffer(key);
-        const decipher = crypto.createDecipheriv('aes-256-cbc', nodeKey, nodeIv);
-        const decBuf = Buffer.concat([decipher.update(nodeData), decipher.final()]);
-        return Promise.resolve(this.toArrayBuffer(decBuf));
+    return okm.slice(0, outputByteSize).buffer;
+  }
+
+  hash(
+    value: string | ArrayBuffer,
+    algorithm: "sha1" | "sha256" | "sha512" | "md5"
+  ): Promise<ArrayBuffer> {
+    const nodeValue = this.toNodeValue(value);
+    const hash = crypto.createHash(algorithm);
+    hash.update(nodeValue);
+    return Promise.resolve(this.toArrayBuffer(hash.digest()));
+  }
+
+  hmac(
+    value: ArrayBuffer,
+    key: ArrayBuffer,
+    algorithm: "sha1" | "sha256" | "sha512"
+  ): Promise<ArrayBuffer> {
+    const nodeValue = this.toNodeBuffer(value);
+    const nodeKey = this.toNodeBuffer(key);
+    const hmac = crypto.createHmac(algorithm, nodeKey);
+    hmac.update(nodeValue);
+    return Promise.resolve(this.toArrayBuffer(hmac.digest()));
+  }
+
+  async compare(a: ArrayBuffer, b: ArrayBuffer): Promise<boolean> {
+    const key = await this.randomBytes(32);
+    const mac1 = await this.hmac(a, key, "sha256");
+    const mac2 = await this.hmac(b, key, "sha256");
+    if (mac1.byteLength !== mac2.byteLength) {
+      return false;
     }
 
-    rsaEncrypt(data: ArrayBuffer, publicKey: ArrayBuffer, algorithm: 'sha1' | 'sha256'): Promise<ArrayBuffer> {
-        if (algorithm === 'sha256') {
-            throw new Error('Node crypto does not support RSA-OAEP SHA-256');
-        }
-
-        const pem = this.toPemPublicKey(publicKey);
-        const decipher = crypto.publicEncrypt(pem, this.toNodeBuffer(data));
-        return Promise.resolve(this.toArrayBuffer(decipher));
+    const arr1 = new Uint8Array(mac1);
+    const arr2 = new Uint8Array(mac2);
+    for (let i = 0; i < arr2.length; i++) {
+      if (arr1[i] !== arr2[i]) {
+        return false;
+      }
     }
 
-    rsaDecrypt(data: ArrayBuffer, privateKey: ArrayBuffer, algorithm: 'sha1' | 'sha256'): Promise<ArrayBuffer> {
-        if (algorithm === 'sha256') {
-            throw new Error('Node crypto does not support RSA-OAEP SHA-256');
-        }
-
-        const pem = this.toPemPrivateKey(privateKey);
-        const decipher = crypto.privateDecrypt(pem, this.toNodeBuffer(data));
-        return Promise.resolve(this.toArrayBuffer(decipher));
+    return true;
+  }
+
+  hmacFast(
+    value: ArrayBuffer,
+    key: ArrayBuffer,
+    algorithm: "sha1" | "sha256" | "sha512"
+  ): Promise<ArrayBuffer> {
+    return this.hmac(value, key, algorithm);
+  }
+
+  compareFast(a: ArrayBuffer, b: ArrayBuffer): Promise<boolean> {
+    return this.compare(a, b);
+  }
+
+  aesEncrypt(data: ArrayBuffer, iv: ArrayBuffer, key: ArrayBuffer): Promise<ArrayBuffer> {
+    const nodeData = this.toNodeBuffer(data);
+    const nodeIv = this.toNodeBuffer(iv);
+    const nodeKey = this.toNodeBuffer(key);
+    const cipher = crypto.createCipheriv("aes-256-cbc", nodeKey, nodeIv);
+    const encBuf = Buffer.concat([cipher.update(nodeData), cipher.final()]);
+    return Promise.resolve(this.toArrayBuffer(encBuf));
+  }
+
+  aesDecryptFastParameters(
+    data: string,
+    iv: string,
+    mac: string,
+    key: SymmetricCryptoKey
+  ): DecryptParameters<ArrayBuffer> {
+    const p = new DecryptParameters<ArrayBuffer>();
+    p.encKey = key.encKey;
+    p.data = Utils.fromB64ToArray(data).buffer;
+    p.iv = Utils.fromB64ToArray(iv).buffer;
+
+    const macData = new Uint8Array(p.iv.byteLength + p.data.byteLength);
+    macData.set(new Uint8Array(p.iv), 0);
+    macData.set(new Uint8Array(p.data), p.iv.byteLength);
+    p.macData = macData.buffer;
+
+    if (key.macKey != null) {
+      p.macKey = key.macKey;
     }
-
-    rsaExtractPublicKey(privateKey: ArrayBuffer): Promise<ArrayBuffer> {
-        const privateKeyByteString = Utils.fromBufferToByteString(privateKey);
-        const privateKeyAsn1 = forge.asn1.fromDer(privateKeyByteString);
-        const forgePrivateKey = (forge as any).pki.privateKeyFromAsn1(privateKeyAsn1);
-        const forgePublicKey = (forge.pki as any).setRsaPublicKey(forgePrivateKey.n, forgePrivateKey.e);
-        const publicKeyAsn1 = (forge.pki as any).publicKeyToAsn1(forgePublicKey);
-        const publicKeyByteString = forge.asn1.toDer(publicKeyAsn1).data;
-        const publicKeyArray = Utils.fromByteStringToArray(publicKeyByteString);
-        return Promise.resolve(publicKeyArray.buffer);
+    if (mac != null) {
+      p.mac = Utils.fromB64ToArray(mac).buffer;
     }
 
-    async rsaGenerateKeyPair(length: 1024 | 2048 | 4096): Promise<[ArrayBuffer, ArrayBuffer]> {
-        return new Promise<[ArrayBuffer, ArrayBuffer]>((resolve, reject) => {
-            forge.pki.rsa.generateKeyPair({
-                bits: length,
-                workers: -1,
-                e: 0x10001, // 65537
-            }, (error, keyPair) => {
-                if (error != null) {
-                    reject(error);
-                    return;
-                }
-
-                const publicKeyAsn1 = (forge.pki as any).publicKeyToAsn1(keyPair.publicKey);
-                const publicKeyByteString = forge.asn1.toDer(publicKeyAsn1).getBytes();
-                const publicKey = Utils.fromByteStringToArray(publicKeyByteString);
-
-                const privateKeyAsn1 = (forge.pki as any).privateKeyToAsn1(keyPair.privateKey);
-                const privateKeyPkcs8 = (forge.pki as any).wrapRsaPrivateKey(privateKeyAsn1);
-                const privateKeyByteString = forge.asn1.toDer(privateKeyPkcs8).getBytes();
-                const privateKey = Utils.fromByteStringToArray(privateKeyByteString);
-
-                resolve([publicKey.buffer, privateKey.buffer]);
-            });
-        });
+    return p;
+  }
+
+  async aesDecryptFast(parameters: DecryptParameters<ArrayBuffer>): Promise<string> {
+    const decBuf = await this.aesDecrypt(parameters.data, parameters.iv, parameters.encKey);
+    return Utils.fromBufferToUtf8(decBuf);
+  }
+
+  aesDecrypt(data: ArrayBuffer, iv: ArrayBuffer, key: ArrayBuffer): Promise<ArrayBuffer> {
+    const nodeData = this.toNodeBuffer(data);
+    const nodeIv = this.toNodeBuffer(iv);
+    const nodeKey = this.toNodeBuffer(key);
+    const decipher = crypto.createDecipheriv("aes-256-cbc", nodeKey, nodeIv);
+    const decBuf = Buffer.concat([decipher.update(nodeData), decipher.final()]);
+    return Promise.resolve(this.toArrayBuffer(decBuf));
+  }
+
+  rsaEncrypt(
+    data: ArrayBuffer,
+    publicKey: ArrayBuffer,
+    algorithm: "sha1" | "sha256"
+  ): Promise<ArrayBuffer> {
+    if (algorithm === "sha256") {
+      throw new Error("Node crypto does not support RSA-OAEP SHA-256");
     }
 
-    randomBytes(length: number): Promise<ArrayBuffer> {
-        return new Promise<ArrayBuffer>((resolve, reject) => {
-            crypto.randomBytes(length, (error, bytes) => {
-                if (error != null) {
-                    reject(error);
-                } else {
-                    resolve(this.toArrayBuffer(bytes));
-                }
-            });
-        });
+    const pem = this.toPemPublicKey(publicKey);
+    const decipher = crypto.publicEncrypt(pem, this.toNodeBuffer(data));
+    return Promise.resolve(this.toArrayBuffer(decipher));
+  }
+
+  rsaDecrypt(
+    data: ArrayBuffer,
+    privateKey: ArrayBuffer,
+    algorithm: "sha1" | "sha256"
+  ): Promise<ArrayBuffer> {
+    if (algorithm === "sha256") {
+      throw new Error("Node crypto does not support RSA-OAEP SHA-256");
     }
 
-    private toNodeValue(value: string | ArrayBuffer): string | Buffer {
-        let nodeValue: string | Buffer;
-        if (typeof (value) === 'string') {
-            nodeValue = value;
-        } else {
-            nodeValue = this.toNodeBuffer(value);
+    const pem = this.toPemPrivateKey(privateKey);
+    const decipher = crypto.privateDecrypt(pem, this.toNodeBuffer(data));
+    return Promise.resolve(this.toArrayBuffer(decipher));
+  }
+
+  rsaExtractPublicKey(privateKey: ArrayBuffer): Promise<ArrayBuffer> {
+    const privateKeyByteString = Utils.fromBufferToByteString(privateKey);
+    const privateKeyAsn1 = forge.asn1.fromDer(privateKeyByteString);
+    const forgePrivateKey = (forge as any).pki.privateKeyFromAsn1(privateKeyAsn1);
+    const forgePublicKey = (forge.pki as any).setRsaPublicKey(forgePrivateKey.n, forgePrivateKey.e);
+    const publicKeyAsn1 = (forge.pki as any).publicKeyToAsn1(forgePublicKey);
+    const publicKeyByteString = forge.asn1.toDer(publicKeyAsn1).data;
+    const publicKeyArray = Utils.fromByteStringToArray(publicKeyByteString);
+    return Promise.resolve(publicKeyArray.buffer);
+  }
+
+  async rsaGenerateKeyPair(length: 1024 | 2048 | 4096): Promise<[ArrayBuffer, ArrayBuffer]> {
+    return new Promise<[ArrayBuffer, ArrayBuffer]>((resolve, reject) => {
+      forge.pki.rsa.generateKeyPair(
+        {
+          bits: length,
+          workers: -1,
+          e: 0x10001, // 65537
+        },
+        (error, keyPair) => {
+          if (error != null) {
+            reject(error);
+            return;
+          }
+
+          const publicKeyAsn1 = (forge.pki as any).publicKeyToAsn1(keyPair.publicKey);
+          const publicKeyByteString = forge.asn1.toDer(publicKeyAsn1).getBytes();
+          const publicKey = Utils.fromByteStringToArray(publicKeyByteString);
+
+          const privateKeyAsn1 = (forge.pki as any).privateKeyToAsn1(keyPair.privateKey);
+          const privateKeyPkcs8 = (forge.pki as any).wrapRsaPrivateKey(privateKeyAsn1);
+          const privateKeyByteString = forge.asn1.toDer(privateKeyPkcs8).getBytes();
+          const privateKey = Utils.fromByteStringToArray(privateKeyByteString);
+
+          resolve([publicKey.buffer, privateKey.buffer]);
         }
-        return nodeValue;
-    }
-
-    private toNodeBuffer(value: ArrayBuffer): Buffer {
-        return Buffer.from(new Uint8Array(value) as any);
-    }
-
-    private toArrayBuffer(value: Buffer | string | ArrayBuffer): ArrayBuffer {
-        let buf: ArrayBuffer;
-        if (typeof (value) === 'string') {
-            buf = Utils.fromUtf8ToArray(value).buffer;
+      );
+    });
+  }
+
+  randomBytes(length: number): Promise<ArrayBuffer> {
+    return new Promise<ArrayBuffer>((resolve, reject) => {
+      crypto.randomBytes(length, (error, bytes) => {
+        if (error != null) {
+          reject(error);
         } else {
-            buf = new Uint8Array(value).buffer;
+          resolve(this.toArrayBuffer(bytes));
         }
-        return buf;
+      });
+    });
+  }
+
+  private toNodeValue(value: string | ArrayBuffer): string | Buffer {
+    let nodeValue: string | Buffer;
+    if (typeof value === "string") {
+      nodeValue = value;
+    } else {
+      nodeValue = this.toNodeBuffer(value);
     }
-
-    private toPemPrivateKey(key: ArrayBuffer): string {
-        const byteString = Utils.fromBufferToByteString(key);
-        const asn1 = forge.asn1.fromDer(byteString);
-        const privateKey = (forge as any).pki.privateKeyFromAsn1(asn1);
-        const rsaPrivateKey = (forge.pki as any).privateKeyToAsn1(privateKey);
-        const privateKeyInfo = (forge.pki as any).wrapRsaPrivateKey(rsaPrivateKey);
-        return (forge.pki as any).privateKeyInfoToPem(privateKeyInfo);
-    }
-
-    private toPemPublicKey(key: ArrayBuffer): string {
-        const byteString = Utils.fromBufferToByteString(key);
-        const asn1 = forge.asn1.fromDer(byteString);
-        const publicKey = (forge as any).pki.publicKeyFromAsn1(asn1);
-        return (forge.pki as any).publicKeyToPem(publicKey);
+    return nodeValue;
+  }
+
+  private toNodeBuffer(value: ArrayBuffer): Buffer {
+    return Buffer.from(new Uint8Array(value) as any);
+  }
+
+  private toArrayBuffer(value: Buffer | string | ArrayBuffer): ArrayBuffer {
+    let buf: ArrayBuffer;
+    if (typeof value === "string") {
+      buf = Utils.fromUtf8ToArray(value).buffer;
+    } else {
+      buf = new Uint8Array(value).buffer;
     }
+    return buf;
+  }
+
+  private toPemPrivateKey(key: ArrayBuffer): string {
+    const byteString = Utils.fromBufferToByteString(key);
+    const asn1 = forge.asn1.fromDer(byteString);
+    const privateKey = (forge as any).pki.privateKeyFromAsn1(asn1);
+    const rsaPrivateKey = (forge.pki as any).privateKeyToAsn1(privateKey);
+    const privateKeyInfo = (forge.pki as any).wrapRsaPrivateKey(rsaPrivateKey);
+    return (forge.pki as any).privateKeyInfoToPem(privateKeyInfo);
+  }
+
+  private toPemPublicKey(key: ArrayBuffer): string {
+    const byteString = Utils.fromBufferToByteString(key);
+    const asn1 = forge.asn1.fromDer(byteString);
+    const publicKey = (forge as any).pki.publicKeyFromAsn1(asn1);
+    return (forge.pki as any).publicKeyToPem(publicKey);
+  }
 }
diff --git a/jslib/node/tsconfig.json b/jslib/node/tsconfig.json
index 69844dd1..07c6a21d 100644
--- a/jslib/node/tsconfig.json
+++ b/jslib/node/tsconfig.json
@@ -1,31 +1,10 @@
 {
+  "extends": "../shared/tsconfig",
   "compilerOptions": {
-    "pretty": true,
-    "moduleResolution": "node",
-    "noImplicitAny": true,
-    "target": "ES6",
-    "module": "commonjs",
-    "lib": ["es5", "es6", "es7", "dom"],
-    "sourceMap": true,
-    "declaration": true,
-    "allowSyntheticDefaultImports": true,
-    "experimentalDecorators": true,
-    "emitDecoratorMetadata": true,
-    "declarationDir": "dist/types",
-    "outDir": "dist",
-    "types": [],
     "paths": {
-      "jslib-common/*": [
-        "../common/src/*"
-      ]
+      "jslib-common/*": ["../common/src/*"]
     }
   },
-  "include": [
-    "src",
-    "spec"
-  ],
-  "exclude": [
-    "node_modules",
-    "dist"
-  ]
+  "include": ["src", "spec"],
+  "exclude": ["node_modules", "dist"]
 }
diff --git a/jslib/package-lock.json b/jslib/package-lock.json
index b3e72c7f..2ca4e006 100644
--- a/jslib/package-lock.json
+++ b/jslib/package-lock.json
@@ -17,10 +17,14 @@
       "devDependencies": {
         "@fluffy-spoon/substitute": "^1.202.0",
         "@types/jasmine": "^3.7.6",
-        "@types/node": "^14.17.1",
+        "@types/node": "^16.11.12",
+        "commander": "7.2.0",
         "concurrently": "^6.1.0",
+        "form-data": "4.0.0",
+        "husky": "^7.0.4",
         "jasmine": "^3.7.0",
         "jasmine-core": "^3.7.1",
+        "jasmine-ts": "^0.4.0",
         "jasmine-ts-console-reporter": "^3.1.1",
         "jsdom": "^16.5.3",
         "karma": "^6.3.2",
@@ -32,19 +36,24 @@
         "karma-jasmine-html-reporter": "^1.5.4",
         "karma-safari-launcher": "^1.0.0",
         "karma-webpack": "^4.0.2",
+        "lint-staged": "^12.1.2",
         "nodemon": "^2.0.7",
+        "prettier": "2.5.1",
         "rimraf": "^3.0.2",
+        "rxjs": "^7.4.0",
         "ts-loader": "^8.1.0",
+        "ts-node": "^10.4.0",
+        "tsconfig-paths": "^3.12.0",
         "tslint": "^6.1.3",
         "ttypescript": "^1.5.12",
         "typemoq": "^2.1.0",
-        "typescript": "4.1.5",
+        "typescript": "4.3.5",
         "typescript-transform-paths": "^2.2.3",
         "webpack": "^4.46.0"
       },
       "engines": {
-        "node": "~14",
-        "npm": "~7"
+        "node": "~16",
+        "npm": "~8"
       }
     },
     "angular": {
@@ -52,25 +61,25 @@
       "version": "0.0.0",
       "license": "GPL-3.0",
       "dependencies": {
-        "@angular/animations": "^11.2.11",
-        "@angular/cdk": "^11.2.10",
-        "@angular/common": "^11.2.11",
-        "@angular/compiler": "^11.2.11",
-        "@angular/core": "^11.2.11",
-        "@angular/forms": "^11.2.11",
-        "@angular/platform-browser": "^11.2.11",
-        "@angular/platform-browser-dynamic": "^11.2.11",
-        "@angular/router": "^11.2.11",
+        "@angular/animations": "^12.2.13",
+        "@angular/cdk": "^12.2.13",
+        "@angular/common": "^12.2.13",
+        "@angular/compiler": "^12.2.13",
+        "@angular/core": "^12.2.13",
+        "@angular/forms": "^12.2.13",
+        "@angular/platform-browser": "^12.2.13",
+        "@angular/platform-browser-dynamic": "^12.2.13",
+        "@angular/router": "^12.2.13",
         "@bitwarden/jslib-common": "file:../common",
         "duo_web_sdk": "git+https://github.com/duosecurity/duo_web_sdk.git",
-        "rxjs": "6.6.7",
+        "rxjs": "^7.4.0",
         "tldjs": "^2.3.1",
         "zone.js": "0.11.4"
       },
       "devDependencies": {
         "@types/duo_web_sdk": "^2.7.1",
         "rimraf": "^3.0.2",
-        "typescript": "4.1.5"
+        "typescript": "4.3.5"
       }
     },
     "common": {
@@ -85,19 +94,19 @@
         "lunr": "^2.3.9",
         "node-forge": "^0.10.0",
         "papaparse": "^5.3.0",
-        "rxjs": "6.6.7",
+        "rxjs": "^7.4.0",
         "tldjs": "^2.3.1",
         "zxcvbn": "^4.4.2"
       },
       "devDependencies": {
         "@types/lunr": "^2.3.3",
-        "@types/node": "^14.17.1",
+        "@types/node": "^16.11.12",
         "@types/node-forge": "^0.9.7",
         "@types/papaparse": "^5.2.5",
         "@types/tldjs": "^2.3.0",
         "@types/zxcvbn": "^4.4.1",
         "rimraf": "^3.0.2",
-        "typescript": "4.1.5"
+        "typescript": "4.3.5"
       }
     },
     "electron": {
@@ -107,17 +116,17 @@
       "dependencies": {
         "@bitwarden/jslib-common": "file:../common",
         "@nodert-win10-rs4/windows.security.credentials.ui": "^0.4.4",
-        "electron": "14.2.0",
+        "electron": "16.0.7",
         "electron-log": "4.4.1",
         "electron-store": "8.0.1",
-        "electron-updater": "4.3.9",
+        "electron-updater": "4.6.1",
         "forcefocus": "^1.1.0",
         "keytar": "7.7.0"
       },
       "devDependencies": {
-        "@types/node": "^14.17.1",
+        "@types/node": "^16.11.12",
         "rimraf": "^3.0.2",
-        "typescript": "4.1.5"
+        "typescript": "4.3.5"
       }
     },
     "node": {
@@ -137,21 +146,24 @@
       "devDependencies": {
         "@types/inquirer": "^7.3.1",
         "@types/lowdb": "^1.0.10",
-        "@types/node": "^14.17.1",
+        "@types/node": "^16.11.12",
         "@types/node-fetch": "^2.5.10",
         "rimraf": "^3.0.2",
-        "typescript": "4.1.5"
+        "typescript": "4.3.5"
       }
     },
     "node_modules/@angular/animations": {
-      "version": "11.2.14",
-      "resolved": "https://registry.npmjs.org/@angular/animations/-/animations-11.2.14.tgz",
-      "integrity": "sha512-Heq/nNrCmb3jbkusu+BQszOecfFI/31Oxxj+CDQkqqYpBcswk6bOJLoEE472o+vmgxaXbgeflU9qbIiCQhpMFA==",
+      "version": "12.2.14",
+      "resolved": "https://registry.npmjs.org/@angular/animations/-/animations-12.2.14.tgz",
+      "integrity": "sha512-1BR5u32auVePvXNNP96DB2008V+Ku0OGqeZQl2h4XA9xzES/Zk5WllIJZXqRmWMRBVARfXsfb0RdMty9gcaVjA==",
       "dependencies": {
-        "tslib": "^2.0.0"
+        "tslib": "^2.2.0"
+      },
+      "engines": {
+        "node": "^12.14.1 || >=14.0.0"
       },
       "peerDependencies": {
-        "@angular/core": "11.2.14"
+        "@angular/core": "12.2.14"
       }
     },
     "node_modules/@angular/animations/node_modules/tslib": {
@@ -160,18 +172,19 @@
       "integrity": "sha512-77EbyPPpMz+FRFRuAFlWMtmgUWGe9UOG2Z25NqCwiIjRhOf5iKGuzSe5P2w1laq+FkRy4p+PCuVkJSGkzTEKVw=="
     },
     "node_modules/@angular/cdk": {
-      "version": "11.2.13",
-      "resolved": "https://registry.npmjs.org/@angular/cdk/-/cdk-11.2.13.tgz",
-      "integrity": "sha512-FkE4iCwoLbQxLDUOjV1I7M/6hmpyb7erAjEdWgch7nGRNxF1hqX5Bqf1lvLFKPNCbx5NRI5K7YVAdIUQUR8vug==",
+      "version": "12.2.13",
+      "resolved": "https://registry.npmjs.org/@angular/cdk/-/cdk-12.2.13.tgz",
+      "integrity": "sha512-zSKRhECyFqhingIeyRInIyTvYErt4gWo+x5DQr0b7YLUbU8DZSwWnG4w76Ke2s4U8T7ry1jpJBHoX/e8YBpGMg==",
       "dependencies": {
-        "tslib": "^2.0.0"
+        "tslib": "^2.2.0"
       },
       "optionalDependencies": {
         "parse5": "^5.0.0"
       },
       "peerDependencies": {
-        "@angular/common": "^11.0.0 || ^12.0.0-0",
-        "@angular/core": "^11.0.0 || ^12.0.0-0"
+        "@angular/common": "^12.0.0 || ^13.0.0-0",
+        "@angular/core": "^12.0.0 || ^13.0.0-0",
+        "rxjs": "^6.5.3 || ^7.0.0"
       }
     },
     "node_modules/@angular/cdk/node_modules/parse5": {
@@ -186,15 +199,18 @@
       "integrity": "sha512-77EbyPPpMz+FRFRuAFlWMtmgUWGe9UOG2Z25NqCwiIjRhOf5iKGuzSe5P2w1laq+FkRy4p+PCuVkJSGkzTEKVw=="
     },
     "node_modules/@angular/common": {
-      "version": "11.2.14",
-      "resolved": "https://registry.npmjs.org/@angular/common/-/common-11.2.14.tgz",
-      "integrity": "sha512-ZSLV/3j7eCTyLf/8g4yBFLWySjiLz3vLJAGWscYoUpnJWMnug1VRu6zoF/COxCbtORgE+Wz6K0uhfS6MziBGVw==",
+      "version": "12.2.14",
+      "resolved": "https://registry.npmjs.org/@angular/common/-/common-12.2.14.tgz",
+      "integrity": "sha512-ffYUYdwZETmFJw0AcWY30WsaWBhJxj/zSmFXWjgEGEGZH56zwbbNwfMZOYZ1jz4haAVxGu+TdXsOl2yMGzN7jQ==",
       "dependencies": {
-        "tslib": "^2.0.0"
+        "tslib": "^2.2.0"
+      },
+      "engines": {
+        "node": "^12.14.1 || >=14.0.0"
       },
       "peerDependencies": {
-        "@angular/core": "11.2.14",
-        "rxjs": "^6.5.3"
+        "@angular/core": "12.2.14",
+        "rxjs": "^6.5.3 || ^7.0.0"
       }
     },
     "node_modules/@angular/common/node_modules/tslib": {
@@ -203,11 +219,14 @@
       "integrity": "sha512-77EbyPPpMz+FRFRuAFlWMtmgUWGe9UOG2Z25NqCwiIjRhOf5iKGuzSe5P2w1laq+FkRy4p+PCuVkJSGkzTEKVw=="
     },
     "node_modules/@angular/compiler": {
-      "version": "11.2.14",
-      "resolved": "https://registry.npmjs.org/@angular/compiler/-/compiler-11.2.14.tgz",
-      "integrity": "sha512-XBOK3HgA+/y6Cz7kOX4zcJYmgJ264XnfcbXUMU2cD7Ac+mbNhLPKohWrEiSWalfcjnpf5gRfufQrQP7lpAGu0A==",
+      "version": "12.2.14",
+      "resolved": "https://registry.npmjs.org/@angular/compiler/-/compiler-12.2.14.tgz",
+      "integrity": "sha512-dwmZi+n66IUzRFlGWu9mjXq170ZEsaDvlNLZzaPgs6vZTa4Kt7PWvIF/Y7TMvnVv/uqNG6kOhfmOkf6rfz1Gjg==",
       "dependencies": {
-        "tslib": "^2.0.0"
+        "tslib": "^2.2.0"
+      },
+      "engines": {
+        "node": "^12.14.1 || >=14.0.0"
       }
     },
     "node_modules/@angular/compiler/node_modules/tslib": {
@@ -216,15 +235,18 @@
       "integrity": "sha512-77EbyPPpMz+FRFRuAFlWMtmgUWGe9UOG2Z25NqCwiIjRhOf5iKGuzSe5P2w1laq+FkRy4p+PCuVkJSGkzTEKVw=="
     },
     "node_modules/@angular/core": {
-      "version": "11.2.14",
-      "resolved": "https://registry.npmjs.org/@angular/core/-/core-11.2.14.tgz",
-      "integrity": "sha512-vpR4XqBGitk1Faph37CSpemwIYTmJ3pdIVNoHKP6jLonpWu+0azkchf0f7oD8/2ivj2F81opcIw0tcsy/D/5Vg==",
+      "version": "12.2.14",
+      "resolved": "https://registry.npmjs.org/@angular/core/-/core-12.2.14.tgz",
+      "integrity": "sha512-dlVk7yqUHL2R/eCmM8LsWuxhEBfzg0y1zHt0UqCuFwlCoiw+IG4HFy4OlZEUw9NUEZJSv0aDv3sWqxLkvK5vvg==",
       "dependencies": {
-        "tslib": "^2.0.0"
+        "tslib": "^2.2.0"
+      },
+      "engines": {
+        "node": "^12.14.1 || >=14.0.0"
       },
       "peerDependencies": {
-        "rxjs": "^6.5.3",
-        "zone.js": "^0.10.2 || ^0.11.3"
+        "rxjs": "^6.5.3 || ^7.0.0",
+        "zone.js": "~0.11.4"
       }
     },
     "node_modules/@angular/core/node_modules/tslib": {
@@ -233,17 +255,20 @@
       "integrity": "sha512-77EbyPPpMz+FRFRuAFlWMtmgUWGe9UOG2Z25NqCwiIjRhOf5iKGuzSe5P2w1laq+FkRy4p+PCuVkJSGkzTEKVw=="
     },
     "node_modules/@angular/forms": {
-      "version": "11.2.14",
-      "resolved": "https://registry.npmjs.org/@angular/forms/-/forms-11.2.14.tgz",
-      "integrity": "sha512-4LWqY6KEIk1AZQFnk+4PJSOCamlD4tumuVN06gO4D0dZo9Cx+GcvW6pM6N0CPubRvPs3sScCnu20WT11HNWC1w==",
+      "version": "12.2.14",
+      "resolved": "https://registry.npmjs.org/@angular/forms/-/forms-12.2.14.tgz",
+      "integrity": "sha512-/9/gSJUBXVRVdRnzgJnALAQZYJATuGDMkFC9ms9DEMG4PMAhe9x4if1lJjN6noz5RAom3qNuVBNWaYAPUxlcBQ==",
       "dependencies": {
-        "tslib": "^2.0.0"
+        "tslib": "^2.2.0"
+      },
+      "engines": {
+        "node": "^12.14.1 || >=14.0.0"
       },
       "peerDependencies": {
-        "@angular/common": "11.2.14",
-        "@angular/core": "11.2.14",
-        "@angular/platform-browser": "11.2.14",
-        "rxjs": "^6.5.3"
+        "@angular/common": "12.2.14",
+        "@angular/core": "12.2.14",
+        "@angular/platform-browser": "12.2.14",
+        "rxjs": "^6.5.3 || ^7.0.0"
       }
     },
     "node_modules/@angular/forms/node_modules/tslib": {
@@ -252,16 +277,19 @@
       "integrity": "sha512-77EbyPPpMz+FRFRuAFlWMtmgUWGe9UOG2Z25NqCwiIjRhOf5iKGuzSe5P2w1laq+FkRy4p+PCuVkJSGkzTEKVw=="
     },
     "node_modules/@angular/platform-browser": {
-      "version": "11.2.14",
-      "resolved": "https://registry.npmjs.org/@angular/platform-browser/-/platform-browser-11.2.14.tgz",
-      "integrity": "sha512-fb7b7ss/gRoP8wLAN17W62leMgjynuyjEPU2eUoAAazsG9f2cgM+z3rK29GYncDVyYQxZUZYnjSqvL6GSXx86A==",
+      "version": "12.2.14",
+      "resolved": "https://registry.npmjs.org/@angular/platform-browser/-/platform-browser-12.2.14.tgz",
+      "integrity": "sha512-fWcE2rnJ3ZCISa1oPfsIDV7FBZBoLFEdDuMXAiDYqDPKvF/E5U5nHrS+K4SlLAi094bMobtTOReNWl/Ienniyw==",
       "dependencies": {
-        "tslib": "^2.0.0"
+        "tslib": "^2.2.0"
+      },
+      "engines": {
+        "node": "^12.14.1 || >=14.0.0"
       },
       "peerDependencies": {
-        "@angular/animations": "11.2.14",
-        "@angular/common": "11.2.14",
-        "@angular/core": "11.2.14"
+        "@angular/animations": "12.2.14",
+        "@angular/common": "12.2.14",
+        "@angular/core": "12.2.14"
       },
       "peerDependenciesMeta": {
         "@angular/animations": {
@@ -270,17 +298,20 @@
       }
     },
     "node_modules/@angular/platform-browser-dynamic": {
-      "version": "11.2.14",
-      "resolved": "https://registry.npmjs.org/@angular/platform-browser-dynamic/-/platform-browser-dynamic-11.2.14.tgz",
-      "integrity": "sha512-TWTPdFs6iBBcp+/YMsgCRQwdHpWGq8KjeJDJ2tfatGgBD3Gqt2YaHOMST1zPW6RkrmupytTejuVqXzeaKWFxuw==",
+      "version": "12.2.14",
+      "resolved": "https://registry.npmjs.org/@angular/platform-browser-dynamic/-/platform-browser-dynamic-12.2.14.tgz",
+      "integrity": "sha512-0NPF7mS91Tct8rBmOLZPmnLSuS4kbLHXo6eTgrg80OC0vlzBiQwGDVW4X3KncCoX9CpevaGJCdSMc+uPNsFOUQ==",
       "dependencies": {
-        "tslib": "^2.0.0"
+        "tslib": "^2.2.0"
+      },
+      "engines": {
+        "node": "^12.14.1 || >=14.0.0"
       },
       "peerDependencies": {
-        "@angular/common": "11.2.14",
-        "@angular/compiler": "11.2.14",
-        "@angular/core": "11.2.14",
-        "@angular/platform-browser": "11.2.14"
+        "@angular/common": "12.2.14",
+        "@angular/compiler": "12.2.14",
+        "@angular/core": "12.2.14",
+        "@angular/platform-browser": "12.2.14"
       }
     },
     "node_modules/@angular/platform-browser-dynamic/node_modules/tslib": {
@@ -294,17 +325,20 @@
       "integrity": "sha512-77EbyPPpMz+FRFRuAFlWMtmgUWGe9UOG2Z25NqCwiIjRhOf5iKGuzSe5P2w1laq+FkRy4p+PCuVkJSGkzTEKVw=="
     },
     "node_modules/@angular/router": {
-      "version": "11.2.14",
-      "resolved": "https://registry.npmjs.org/@angular/router/-/router-11.2.14.tgz",
-      "integrity": "sha512-3aYBmj+zrEL9yf/ntIQxHIYaWShZOBKP3U07X2mX+TPMpGlvHDnR7L6bWhQVZwewzMMz7YVR16ldg50IFuAlfA==",
+      "version": "12.2.14",
+      "resolved": "https://registry.npmjs.org/@angular/router/-/router-12.2.14.tgz",
+      "integrity": "sha512-yP5grSnqBvc4vNhtYdcxDgDYIebUKs5f0xyFkUJM5030UnQ0CV45tBsSxHMkQbPZucIfOuxpRy8xy5+4GizuwQ==",
       "dependencies": {
-        "tslib": "^2.0.0"
+        "tslib": "^2.2.0"
+      },
+      "engines": {
+        "node": "^12.14.1 || >=14.0.0"
       },
       "peerDependencies": {
-        "@angular/common": "11.2.14",
-        "@angular/core": "11.2.14",
-        "@angular/platform-browser": "11.2.14",
-        "rxjs": "^6.5.3"
+        "@angular/common": "12.2.14",
+        "@angular/core": "12.2.14",
+        "@angular/platform-browser": "12.2.14",
+        "rxjs": "^6.5.3 || ^7.0.0"
       }
     },
     "node_modules/@angular/router/node_modules/tslib": {
@@ -313,12 +347,12 @@
       "integrity": "sha512-77EbyPPpMz+FRFRuAFlWMtmgUWGe9UOG2Z25NqCwiIjRhOf5iKGuzSe5P2w1laq+FkRy4p+PCuVkJSGkzTEKVw=="
     },
     "node_modules/@babel/code-frame": {
-      "version": "7.14.5",
-      "resolved": "https://registry.npmjs.org/@babel/code-frame/-/code-frame-7.14.5.tgz",
-      "integrity": "sha512-9pzDqyc6OLDaqe+zbACgFkb6fKMNG6CObKpnYXChRsvYGyEdc7CA2BaqeOM+vOtCS5ndmJicPJhKAwYRI6UfFw==",
+      "version": "7.16.0",
+      "resolved": "https://registry.npmjs.org/@babel/code-frame/-/code-frame-7.16.0.tgz",
+      "integrity": "sha512-IF4EOMEV+bfYwOmNxGzSnjR2EmQod7f1UXOpZM3l4i4o4QNwzjtJAu/HxdjHq0aYBvdqMuQEY1eg0nqW9ZPORA==",
       "dev": true,
       "dependencies": {
-        "@babel/highlight": "^7.14.5"
+        "@babel/highlight": "^7.16.0"
       },
       "engines": {
         "node": ">=6.9.0"
@@ -334,12 +368,12 @@
       }
     },
     "node_modules/@babel/highlight": {
-      "version": "7.14.5",
-      "resolved": "https://registry.npmjs.org/@babel/highlight/-/highlight-7.14.5.tgz",
-      "integrity": "sha512-qf9u2WFWVV0MppaL877j2dBtQIDgmidgjGk5VIMw3OadXvYaXn66U1BFlH2t4+t3i+8PhedppRv+i40ABzd+gg==",
+      "version": "7.16.0",
+      "resolved": "https://registry.npmjs.org/@babel/highlight/-/highlight-7.16.0.tgz",
+      "integrity": "sha512-t8MH41kUQylBtu2+4IQA3atqevA2lRgqA2wyVB/YiWmsDSuylZZuXOUy9ric30hfzauEFfdsuk/eXTRrGrfd0g==",
       "dev": true,
       "dependencies": {
-        "@babel/helper-validator-identifier": "^7.14.5",
+        "@babel/helper-validator-identifier": "^7.15.7",
         "chalk": "^2.0.0",
         "js-tokens": "^4.0.0"
       },
@@ -430,17 +464,15 @@
       "resolved": "https://registry.npmjs.org/@cspotcode/source-map-consumer/-/source-map-consumer-0.8.0.tgz",
       "integrity": "sha512-41qniHzTU8yAGbCp04ohlmSrZf8bkf/iJsl3V0dRGsQN/5GFfx+LbCSsCpp2gqrqjTVg/K6O8ycoV35JIwAzAg==",
       "dev": true,
-      "peer": true,
       "engines": {
         "node": ">= 12"
       }
     },
     "node_modules/@cspotcode/source-map-support": {
-      "version": "0.6.1",
-      "resolved": "https://registry.npmjs.org/@cspotcode/source-map-support/-/source-map-support-0.6.1.tgz",
-      "integrity": "sha512-DX3Z+T5dt1ockmPdobJS/FAsQPW4V4SrWEhD2iYQT2Cb2tQsiMnYxrcUH9By/Z3B+v0S5LMBkQtV/XOBbpLEOg==",
+      "version": "0.7.0",
+      "resolved": "https://registry.npmjs.org/@cspotcode/source-map-support/-/source-map-support-0.7.0.tgz",
+      "integrity": "sha512-X4xqRHqN8ACt2aHVe51OxeA2HjbcL4MqFqXkrmQszJ1NOUuUu5u6Vqx/0lZSVNku7velL5FC/s5uEAj1lsBMhA==",
       "dev": true,
-      "peer": true,
       "dependencies": {
         "@cspotcode/source-map-consumer": "0.8.0"
       },
@@ -449,9 +481,9 @@
       }
     },
     "node_modules/@electron/get": {
-      "version": "1.13.0",
-      "resolved": "https://registry.npmjs.org/@electron/get/-/get-1.13.0.tgz",
-      "integrity": "sha512-+SjZhRuRo+STTO1Fdhzqnv9D2ZhjxXP6egsJ9kiO8dtP68cDx7dFCwWi64dlMQV7sWcfW1OYCW4wviEBzmRsfQ==",
+      "version": "1.13.1",
+      "resolved": "https://registry.npmjs.org/@electron/get/-/get-1.13.1.tgz",
+      "integrity": "sha512-U5vkXDZ9DwXtkPqlB45tfYnnYBN8PePp1z/XDCupnSpdrxT8/ThCv9WCwPLf9oqiSGZTkH6dx2jDUPuoXpjkcA==",
       "dependencies": {
         "debug": "^4.1.1",
         "env-paths": "^2.2.0",
@@ -465,7 +497,7 @@
         "node": ">=8.6"
       },
       "optionalDependencies": {
-        "global-agent": "^2.0.2",
+        "global-agent": "^3.0.0",
         "global-tunnel-ng": "^2.7.1"
       }
     },
@@ -560,34 +592,30 @@
       "version": "1.0.8",
       "resolved": "https://registry.npmjs.org/@tsconfig/node10/-/node10-1.0.8.tgz",
       "integrity": "sha512-6XFfSQmMgq0CFLY1MslA/CPUfhIL919M1rMsa5lP2P097N2Wd1sSX0tx1u4olM16fLNhtHZpRhedZJphNJqmZg==",
-      "dev": true,
-      "peer": true
+      "dev": true
     },
     "node_modules/@tsconfig/node12": {
       "version": "1.0.9",
       "resolved": "https://registry.npmjs.org/@tsconfig/node12/-/node12-1.0.9.tgz",
       "integrity": "sha512-/yBMcem+fbvhSREH+s14YJi18sp7J9jpuhYByADT2rypfajMZZN4WQ6zBGgBKp53NKmqI36wFYDb3yaMPurITw==",
-      "dev": true,
-      "peer": true
+      "dev": true
     },
     "node_modules/@tsconfig/node14": {
       "version": "1.0.1",
       "resolved": "https://registry.npmjs.org/@tsconfig/node14/-/node14-1.0.1.tgz",
       "integrity": "sha512-509r2+yARFfHHE7T6Puu2jjkoycftovhXRqW328PDXTVGKihlb1P8Z9mMZH04ebyajfRY7dedfGynlrFHJUQCg==",
-      "dev": true,
-      "peer": true
+      "dev": true
     },
     "node_modules/@tsconfig/node16": {
       "version": "1.0.2",
       "resolved": "https://registry.npmjs.org/@tsconfig/node16/-/node16-1.0.2.tgz",
       "integrity": "sha512-eZxlbI8GZscaGS7kkc/trHTT5xgrjH3/1n2JDwusC9iahPKWMRvRjJSAN5mCXviuTGQ/lHnhvv8Q1YTpnfz9gA==",
-      "dev": true,
-      "peer": true
+      "dev": true
     },
     "node_modules/@types/component-emitter": {
-      "version": "1.2.10",
-      "resolved": "https://registry.npmjs.org/@types/component-emitter/-/component-emitter-1.2.10.tgz",
-      "integrity": "sha512-bsjleuRKWmGqajMerkzox19aGbscQX5rmmvvXl3wlIp5gMG1HgkiwPxsN5p070fBDKTNSPgojVbuY1+HWMbFhg==",
+      "version": "1.2.11",
+      "resolved": "https://registry.npmjs.org/@types/component-emitter/-/component-emitter-1.2.11.tgz",
+      "integrity": "sha512-SRXjM+tfsSlA9VuG8hGO2nft2p8zjXCK1VcC6N4NXbBbYbSia9kzCChYQajIjzIqOOOuh5Ock6MmV2oux4jDZQ==",
       "dev": true
     },
     "node_modules/@types/cookie": {
@@ -618,16 +646,40 @@
         "rxjs": "^6.4.0"
       }
     },
+    "node_modules/@types/inquirer/node_modules/rxjs": {
+      "version": "6.6.7",
+      "resolved": "https://registry.npmjs.org/rxjs/-/rxjs-6.6.7.tgz",
+      "integrity": "sha512-hTdwr+7yYNIT5n4AMYp85KA6yw2Va0FLa3Rguvbpa4W3I5xynaBZo41cM3XM+4Q6fRMj3sBYIR1VAmZMXYJvRQ==",
+      "dev": true,
+      "dependencies": {
+        "tslib": "^1.9.0"
+      },
+      "engines": {
+        "npm": ">=2.0.0"
+      }
+    },
+    "node_modules/@types/inquirer/node_modules/tslib": {
+      "version": "1.14.1",
+      "resolved": "https://registry.npmjs.org/tslib/-/tslib-1.14.1.tgz",
+      "integrity": "sha512-Xni35NKzjgMrwevysHTCArtLDpPvye8zV/0E4EyYn43P7/7qvQwPh9BGkHewbMulVntbigmcT7rdX3BNo9wRJg==",
+      "dev": true
+    },
     "node_modules/@types/jasmine": {
-      "version": "3.9.1",
-      "resolved": "https://registry.npmjs.org/@types/jasmine/-/jasmine-3.9.1.tgz",
-      "integrity": "sha512-PVpjh8S8lqKFKurWSKdFATlfBHGPzgy0PoDdzQ+rr78jTQ0aacyh9YndzZcAUPxhk4kRujItFFGQdUJ7flHumw==",
+      "version": "3.10.2",
+      "resolved": "https://registry.npmjs.org/@types/jasmine/-/jasmine-3.10.2.tgz",
+      "integrity": "sha512-qs4xjVm4V/XjM6owGm/x6TNmhGl5iKX8dkTdsgdgl9oFnqgzxLepnS7rN9Tdo7kDmnFD/VEqKrW57cGD2odbEg==",
+      "dev": true
+    },
+    "node_modules/@types/json5": {
+      "version": "0.0.29",
+      "resolved": "https://registry.npmjs.org/@types/json5/-/json5-0.0.29.tgz",
+      "integrity": "sha1-7ihweulOEdK4J7y+UnC86n8+ce4=",
       "dev": true
     },
     "node_modules/@types/lodash": {
-      "version": "4.14.175",
-      "resolved": "https://registry.npmjs.org/@types/lodash/-/lodash-4.14.175.tgz",
-      "integrity": "sha512-XmdEOrKQ8a1Y/yxQFOMbC47G/V2VDO1GvMRnl4O75M4GW/abC5tnfzadQYkqEveqRM1dEJGFFegfPNA2vvx2iw==",
+      "version": "4.14.178",
+      "resolved": "https://registry.npmjs.org/@types/lodash/-/lodash-4.14.178.tgz",
+      "integrity": "sha512-0d5Wd09ItQWH1qFbEyQ7oTQ3GZrMfth5JkbN3EvTKLXcHLRDSXeLnlvlOn0wvxVIwK5o2M8JzP/OWz7T3NRsbw==",
       "dev": true
     },
     "node_modules/@types/lowdb": {
@@ -646,9 +698,10 @@
       "dev": true
     },
     "node_modules/@types/node": {
-      "version": "14.17.20",
-      "resolved": "https://registry.npmjs.org/@types/node/-/node-14.17.20.tgz",
-      "integrity": "sha512-gI5Sl30tmhXsqkNvopFydP7ASc4c2cLfGNQrVKN3X90ADFWFsPEsotm/8JHSUJQKTHbwowAHtcJPeyVhtKv0TQ=="
+      "version": "16.11.13",
+      "resolved": "https://registry.npmjs.org/@types/node/-/node-16.11.13.tgz",
+      "integrity": "sha512-eUXZzHLHoZqj1frtUetNkUetYoJ6X55UmrVnFD4DMhVeAmwLjniZhtBmsRiemQh4uq4G3vUra/Ws/hs9vEvL3Q==",
+      "dev": true
     },
     "node_modules/@types/node-fetch": {
       "version": "2.5.12",
@@ -660,6 +713,20 @@
         "form-data": "^3.0.0"
       }
     },
+    "node_modules/@types/node-fetch/node_modules/form-data": {
+      "version": "3.0.1",
+      "resolved": "https://registry.npmjs.org/form-data/-/form-data-3.0.1.tgz",
+      "integrity": "sha512-RHkBKtLWUVwd7SqRIvCZMEvAMoGUp0XU+seQiZejj0COz3RI3hWP4sCv3gZWWLjJTd7rGwcsF5eKZGii0r/hbg==",
+      "dev": true,
+      "dependencies": {
+        "asynckit": "^0.4.0",
+        "combined-stream": "^1.0.8",
+        "mime-types": "^2.1.12"
+      },
+      "engines": {
+        "node": ">= 6"
+      }
+    },
     "node_modules/@types/node-forge": {
       "version": "0.9.10",
       "resolved": "https://registry.npmjs.org/@types/node-forge/-/node-forge-0.9.10.tgz",
@@ -670,18 +737,18 @@
       }
     },
     "node_modules/@types/papaparse": {
-      "version": "5.2.6",
-      "resolved": "https://registry.npmjs.org/@types/papaparse/-/papaparse-5.2.6.tgz",
-      "integrity": "sha512-xGKSd0UTn58N1h0+zf8mW863Rv8BvXcGibEgKFtBIXZlcDXAmX/T4RdDO2mwmrmOypUDt5vRgo2v32a78JdqUA==",
+      "version": "5.3.1",
+      "resolved": "https://registry.npmjs.org/@types/papaparse/-/papaparse-5.3.1.tgz",
+      "integrity": "sha512-1lbngk9wty2kCyQB42LjqSa12SEop3t9wcEC7/xYr3ujTSTmv7HWKjKYXly0GkMfQ42PRb2lFPFEibDOiMXS0g==",
       "dev": true,
       "dependencies": {
         "@types/node": "*"
       }
     },
     "node_modules/@types/semver": {
-      "version": "7.3.8",
-      "resolved": "https://registry.npmjs.org/@types/semver/-/semver-7.3.8.tgz",
-      "integrity": "sha512-D/2EJvAlCEtYFEYmmlGwbGXuK886HzyCc3nZX/tkFTQdEU8jZDAgiv08P162yB17y4ZXZoq7yFAnW4GDBb9Now=="
+      "version": "7.3.9",
+      "resolved": "https://registry.npmjs.org/@types/semver/-/semver-7.3.9.tgz",
+      "integrity": "sha512-L/TMpyURfBkf+o/526Zb6kd/tchUP3iBDEPjqjb+U2MAJhVRxxrmr2fwpe08E7QsV7YLcpq0tUaQ9O9x97ZIxQ=="
     },
     "node_modules/@types/through": {
       "version": "0.0.30",
@@ -928,9 +995,9 @@
       }
     },
     "node_modules/acorn": {
-      "version": "8.5.0",
-      "resolved": "https://registry.npmjs.org/acorn/-/acorn-8.5.0.tgz",
-      "integrity": "sha512-yXbYeFy+jUuYd3/CDcg2NkIYE991XYX/bje7LmjJigUciaeO1JR4XxXgCIV1/Zc/dRuFEyw1L0pbA+qynJkW5Q==",
+      "version": "8.6.0",
+      "resolved": "https://registry.npmjs.org/acorn/-/acorn-8.6.0.tgz",
+      "integrity": "sha512-U1riIR+lBSNi3IbxtaHOIKdH8sLFv3NYfNv8sg7ZsNhcfl4HF2++BfqqrNAxoCLQW1iiylOj76ecnaUxz+z9yw==",
       "dev": true,
       "bin": {
         "acorn": "bin/acorn"
@@ -981,6 +1048,19 @@
         "node": ">= 6.0.0"
       }
     },
+    "node_modules/aggregate-error": {
+      "version": "3.1.0",
+      "resolved": "https://registry.npmjs.org/aggregate-error/-/aggregate-error-3.1.0.tgz",
+      "integrity": "sha512-4I7Td01quW/RpocfNayFdFVk1qSuoh0E7JrbRJ16nH01HhKFQ88INq9Sd+nd72zqRySlr9BmDA8xlEJ6vJMrYA==",
+      "dev": true,
+      "dependencies": {
+        "clean-stack": "^2.0.0",
+        "indent-string": "^4.0.0"
+      },
+      "engines": {
+        "node": ">=8"
+      }
+    },
     "node_modules/ajv": {
       "version": "6.12.6",
       "resolved": "https://registry.npmjs.org/ajv/-/ajv-6.12.6.tgz",
@@ -1023,9 +1103,9 @@
       }
     },
     "node_modules/ajv-formats/node_modules/ajv": {
-      "version": "8.6.3",
-      "resolved": "https://registry.npmjs.org/ajv/-/ajv-8.6.3.tgz",
-      "integrity": "sha512-SMJOdDP6LqTkD0Uq8qLi+gMwSt0imXLSV080qFVwJCpH9U6Mb+SUGHAXM0KNbcBPguytWyvFxcHgMLe2D2XSpw==",
+      "version": "8.8.2",
+      "resolved": "https://registry.npmjs.org/ajv/-/ajv-8.8.2.tgz",
+      "integrity": "sha512-x9VuX+R/jcFj1DHo/fCp99esgGDWiHENrKxaCENuCxpoMCmAt/COCGVDwA7kleEpEzJjDnvh3yGoOuLu0Dtllw==",
       "dependencies": {
         "fast-deep-equal": "^3.1.1",
         "json-schema-traverse": "^1.0.0",
@@ -1060,10 +1140,39 @@
         "string-width": "^4.1.0"
       }
     },
+    "node_modules/ansi-align/node_modules/emoji-regex": {
+      "version": "8.0.0",
+      "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-8.0.0.tgz",
+      "integrity": "sha512-MSjYzcWNOA0ewAHpz0MxpYFvwg6yjy1NG3xteoqz644VCo/RPgnr1/GGt+ic3iJTzQ8Eu3TdM14SawnVUmGE6A==",
+      "dev": true
+    },
+    "node_modules/ansi-align/node_modules/is-fullwidth-code-point": {
+      "version": "3.0.0",
+      "resolved": "https://registry.npmjs.org/is-fullwidth-code-point/-/is-fullwidth-code-point-3.0.0.tgz",
+      "integrity": "sha512-zymm5+u+sCsSWyD9qNaejV3DFvhCKclKdizYaJUuHA83RLjb7nSuGnddCHGv0hk+KY7BMAlsWeK4Ueg6EV6XQg==",
+      "dev": true,
+      "engines": {
+        "node": ">=8"
+      }
+    },
+    "node_modules/ansi-align/node_modules/string-width": {
+      "version": "4.2.3",
+      "resolved": "https://registry.npmjs.org/string-width/-/string-width-4.2.3.tgz",
+      "integrity": "sha512-wKyQRQpjJ0sIp62ErSZdGsjMJWsap5oRNihHhu6G7JVO/9jIB6UyevL+tXuOqrng8j/cxKTWyWUwvSTriiZz/g==",
+      "dev": true,
+      "dependencies": {
+        "emoji-regex": "^8.0.0",
+        "is-fullwidth-code-point": "^3.0.0",
+        "strip-ansi": "^6.0.1"
+      },
+      "engines": {
+        "node": ">=8"
+      }
+    },
     "node_modules/ansi-colors": {
-      "version": "3.2.4",
-      "resolved": "https://registry.npmjs.org/ansi-colors/-/ansi-colors-3.2.4.tgz",
-      "integrity": "sha512-hHUXGagefjN2iRrID63xckIvotOXOojhQKWIPUZ4mNUZ9nLZW+7FMNoE1lOkEhNWYsx/7ysGIuJYCiMAA9FnrA==",
+      "version": "4.1.1",
+      "resolved": "https://registry.npmjs.org/ansi-colors/-/ansi-colors-4.1.1.tgz",
+      "integrity": "sha512-JoX0apGbHaUJBNl6yF+p6JAFYZ666/hhCGKN5t9QFjbJQKUU/g8MNbFDbvfrgKXvI1QpZplPOnwIo99lX/AAmA==",
       "dev": true,
       "engines": {
         "node": ">=6"
@@ -1136,8 +1245,7 @@
       "version": "4.1.3",
       "resolved": "https://registry.npmjs.org/arg/-/arg-4.1.3.tgz",
       "integrity": "sha512-58S9QDqG0Xx27YwPSt9fJxivjYl432YCwfDMfZ+71RAqUrZef7LrKQZ3LHLOwCS4FLNBplP533Zx895SeOCHvA==",
-      "dev": true,
-      "peer": true
+      "dev": true
     },
     "node_modules/argparse": {
       "version": "1.0.10",
@@ -1236,6 +1344,15 @@
         "node": ">=0.10.0"
       }
     },
+    "node_modules/astral-regex": {
+      "version": "2.0.0",
+      "resolved": "https://registry.npmjs.org/astral-regex/-/astral-regex-2.0.0.tgz",
+      "integrity": "sha512-Z7tMw1ytTXt5jqMcOP+OQteU1VuNK9Y02uuJtKQ1Sv69jXQKKg5cibLwGJow8yzZP+eAc18EmLGPal0bp36rvQ==",
+      "dev": true,
+      "engines": {
+        "node": ">=8"
+      }
+    },
     "node_modules/async-each": {
       "version": "1.0.3",
       "resolved": "https://registry.npmjs.org/async-each/-/async-each-1.0.3.tgz",
@@ -1348,9 +1465,9 @@
       }
     },
     "node_modules/base64-arraybuffer": {
-      "version": "0.1.4",
-      "resolved": "https://registry.npmjs.org/base64-arraybuffer/-/base64-arraybuffer-0.1.4.tgz",
-      "integrity": "sha1-mBjHngWbE1X5fgQooBfIOOkLqBI=",
+      "version": "1.0.1",
+      "resolved": "https://registry.npmjs.org/base64-arraybuffer/-/base64-arraybuffer-1.0.1.tgz",
+      "integrity": "sha512-vFIUq7FdLtjZMhATwDul5RZWv2jpXQ09Pd6jcVEOvIsqCWTRFD/ONHNfyOS8dA/Ippi5dsIgpyKWKZaAKZltbA==",
       "dev": true,
       "engines": {
         "node": ">= 0.6.0"
@@ -1440,21 +1557,21 @@
       "dev": true
     },
     "node_modules/body-parser": {
-      "version": "1.19.0",
-      "resolved": "https://registry.npmjs.org/body-parser/-/body-parser-1.19.0.tgz",
-      "integrity": "sha512-dhEPs72UPbDnAQJ9ZKMNTP6ptJaionhP5cBb541nXPlW60Jepo9RV/a4fX4XWW9CuFNK22krhrj1+rgzifNCsw==",
+      "version": "1.19.1",
+      "resolved": "https://registry.npmjs.org/body-parser/-/body-parser-1.19.1.tgz",
+      "integrity": "sha512-8ljfQi5eBk8EJfECMrgqNGWPEY5jWP+1IzkzkGdFFEwFQZZyaZ21UqdaHktgiMlH0xLHqIFtE/u2OYE5dOtViA==",
       "dev": true,
       "dependencies": {
-        "bytes": "3.1.0",
+        "bytes": "3.1.1",
         "content-type": "~1.0.4",
         "debug": "2.6.9",
         "depd": "~1.1.2",
-        "http-errors": "1.7.2",
+        "http-errors": "1.8.1",
         "iconv-lite": "0.4.24",
         "on-finished": "~2.3.0",
-        "qs": "6.7.0",
-        "raw-body": "2.4.0",
-        "type-is": "~1.6.17"
+        "qs": "6.9.6",
+        "raw-body": "2.4.2",
+        "type-is": "~1.6.18"
       },
       "engines": {
         "node": ">= 0.8"
@@ -1503,6 +1620,35 @@
         "url": "https://github.com/sponsors/sindresorhus"
       }
     },
+    "node_modules/boxen/node_modules/emoji-regex": {
+      "version": "8.0.0",
+      "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-8.0.0.tgz",
+      "integrity": "sha512-MSjYzcWNOA0ewAHpz0MxpYFvwg6yjy1NG3xteoqz644VCo/RPgnr1/GGt+ic3iJTzQ8Eu3TdM14SawnVUmGE6A==",
+      "dev": true
+    },
+    "node_modules/boxen/node_modules/is-fullwidth-code-point": {
+      "version": "3.0.0",
+      "resolved": "https://registry.npmjs.org/is-fullwidth-code-point/-/is-fullwidth-code-point-3.0.0.tgz",
+      "integrity": "sha512-zymm5+u+sCsSWyD9qNaejV3DFvhCKclKdizYaJUuHA83RLjb7nSuGnddCHGv0hk+KY7BMAlsWeK4Ueg6EV6XQg==",
+      "dev": true,
+      "engines": {
+        "node": ">=8"
+      }
+    },
+    "node_modules/boxen/node_modules/string-width": {
+      "version": "4.2.3",
+      "resolved": "https://registry.npmjs.org/string-width/-/string-width-4.2.3.tgz",
+      "integrity": "sha512-wKyQRQpjJ0sIp62ErSZdGsjMJWsap5oRNihHhu6G7JVO/9jIB6UyevL+tXuOqrng8j/cxKTWyWUwvSTriiZz/g==",
+      "dev": true,
+      "dependencies": {
+        "emoji-regex": "^8.0.0",
+        "is-fullwidth-code-point": "^3.0.0",
+        "strip-ansi": "^6.0.1"
+      },
+      "engines": {
+        "node": ">=8"
+      }
+    },
     "node_modules/boxen/node_modules/type-fest": {
       "version": "0.20.2",
       "resolved": "https://registry.npmjs.org/type-fest/-/type-fest-0.20.2.tgz",
@@ -1692,9 +1838,9 @@
       "dev": true
     },
     "node_modules/builder-util-runtime": {
-      "version": "8.7.5",
-      "resolved": "https://registry.npmjs.org/builder-util-runtime/-/builder-util-runtime-8.7.5.tgz",
-      "integrity": "sha512-fgUFHKtMNjdvH6PDRFntdIGUPgwZ69sXsAqEulCtoiqgWes5agrMq/Ud274zjJRTbckYh2PHh8/1CpFc6dpsbQ==",
+      "version": "8.9.1",
+      "resolved": "https://registry.npmjs.org/builder-util-runtime/-/builder-util-runtime-8.9.1.tgz",
+      "integrity": "sha512-c8a8J3wK6BIVLW7ls+7TRK9igspTbzWmUqxFbgK0m40Ggm6efUbxtWVCGIjc+dtchyr5qAMAUL6iEGRdS/6vwg==",
       "dependencies": {
         "debug": "^4.3.2",
         "sax": "^1.2.4"
@@ -1719,9 +1865,9 @@
       "dev": true
     },
     "node_modules/bytes": {
-      "version": "3.1.0",
-      "resolved": "https://registry.npmjs.org/bytes/-/bytes-3.1.0.tgz",
-      "integrity": "sha512-zauLjrfCG+xvoyaqLoV8bLVXXNGC4JqlxFCutSDWA6fJrTo2ZuvLYTqZ7aHBLZSMOopbzwv8f+wZcVzfVTI2Dg==",
+      "version": "3.1.1",
+      "resolved": "https://registry.npmjs.org/bytes/-/bytes-3.1.1.tgz",
+      "integrity": "sha512-dWe4nWO/ruEOY7HkUJ5gFt1DCFV9zPRoJr8pV0/ASQermOZjtq8jMjOprC0Kd10GLN+l7xaUPvxzJFWtxGu8Fg==",
       "dev": true,
       "engines": {
         "node": ">= 0.8"
@@ -1822,9 +1968,9 @@
       }
     },
     "node_modules/camelcase": {
-      "version": "6.2.0",
-      "resolved": "https://registry.npmjs.org/camelcase/-/camelcase-6.2.0.tgz",
-      "integrity": "sha512-c7wVvbw3f37nuobQNtgsgG9POC9qMbNuMQmTCqZv23b6MIz0fcYpBiOlv9gEN/hdLdnZTDQhg6e9Dq5M1vKvfg==",
+      "version": "6.2.1",
+      "resolved": "https://registry.npmjs.org/camelcase/-/camelcase-6.2.1.tgz",
+      "integrity": "sha512-tVI4q5jjFV5CavAU8DXfza/TJcZutVKo/5Foskmsqcm0MsL91moHvwiGNnqaa2o6PF/7yT5ikDRcVcl8Rj6LCA==",
       "dev": true,
       "engines": {
         "node": ">=10"
@@ -1937,6 +2083,15 @@
         "node": ">=0.10.0"
       }
     },
+    "node_modules/clean-stack": {
+      "version": "2.2.0",
+      "resolved": "https://registry.npmjs.org/clean-stack/-/clean-stack-2.2.0.tgz",
+      "integrity": "sha512-4diC9HaTE+KRAMWhDhrGOECgWZxoevMc5TlkObMqNSsVU62PYzXZ/SMTjzyGAFF1YusgxGcSWTEXBhp0CPwQ1A==",
+      "dev": true,
+      "engines": {
+        "node": ">=6"
+      }
+    },
     "node_modules/cli-boxes": {
       "version": "2.2.1",
       "resolved": "https://registry.npmjs.org/cli-boxes/-/cli-boxes-2.2.1.tgz",
@@ -1960,6 +2115,22 @@
         "node": ">=8"
       }
     },
+    "node_modules/cli-truncate": {
+      "version": "3.1.0",
+      "resolved": "https://registry.npmjs.org/cli-truncate/-/cli-truncate-3.1.0.tgz",
+      "integrity": "sha512-wfOBkjXteqSnI59oPcJkcPl/ZmwvMMOj340qUIY1SKZCv0B9Cf4D4fAucRkIKQmsIuYK3x1rrgU7MeGRruiuiA==",
+      "dev": true,
+      "dependencies": {
+        "slice-ansi": "^5.0.0",
+        "string-width": "^5.0.0"
+      },
+      "engines": {
+        "node": "^12.20.0 || ^14.13.1 || >=16.0.0"
+      },
+      "funding": {
+        "url": "https://github.com/sponsors/sindresorhus"
+      }
+    },
     "node_modules/cli-width": {
       "version": "3.0.0",
       "resolved": "https://registry.npmjs.org/cli-width/-/cli-width-3.0.0.tgz",
@@ -1979,6 +2150,35 @@
         "wrap-ansi": "^7.0.0"
       }
     },
+    "node_modules/cliui/node_modules/emoji-regex": {
+      "version": "8.0.0",
+      "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-8.0.0.tgz",
+      "integrity": "sha512-MSjYzcWNOA0ewAHpz0MxpYFvwg6yjy1NG3xteoqz644VCo/RPgnr1/GGt+ic3iJTzQ8Eu3TdM14SawnVUmGE6A==",
+      "dev": true
+    },
+    "node_modules/cliui/node_modules/is-fullwidth-code-point": {
+      "version": "3.0.0",
+      "resolved": "https://registry.npmjs.org/is-fullwidth-code-point/-/is-fullwidth-code-point-3.0.0.tgz",
+      "integrity": "sha512-zymm5+u+sCsSWyD9qNaejV3DFvhCKclKdizYaJUuHA83RLjb7nSuGnddCHGv0hk+KY7BMAlsWeK4Ueg6EV6XQg==",
+      "dev": true,
+      "engines": {
+        "node": ">=8"
+      }
+    },
+    "node_modules/cliui/node_modules/string-width": {
+      "version": "4.2.3",
+      "resolved": "https://registry.npmjs.org/string-width/-/string-width-4.2.3.tgz",
+      "integrity": "sha512-wKyQRQpjJ0sIp62ErSZdGsjMJWsap5oRNihHhu6G7JVO/9jIB6UyevL+tXuOqrng8j/cxKTWyWUwvSTriiZz/g==",
+      "dev": true,
+      "dependencies": {
+        "emoji-regex": "^8.0.0",
+        "is-fullwidth-code-point": "^3.0.0",
+        "strip-ansi": "^6.0.1"
+      },
+      "engines": {
+        "node": ">=8"
+      }
+    },
     "node_modules/clone-deep": {
       "version": "4.0.1",
       "resolved": "https://registry.npmjs.org/clone-deep/-/clone-deep-4.0.1.tgz",
@@ -2038,6 +2238,12 @@
       "resolved": "https://registry.npmjs.org/color-name/-/color-name-1.1.4.tgz",
       "integrity": "sha512-dOy+3AuW3a2wNbZHIuMZpTcgjGuLU/uBL/ubcZF9OXbDo8ff4O8yVp5Bf0efS8uEoYo5q4Fx7dY9OgQGXgAsQA=="
     },
+    "node_modules/colorette": {
+      "version": "2.0.16",
+      "resolved": "https://registry.npmjs.org/colorette/-/colorette-2.0.16.tgz",
+      "integrity": "sha512-hUewv7oMjCp+wkBv5Rm0v87eJhq4woh5rSR+42YSQJKecCqgIqNkZ6lAlQms/BwHPJA5NKMRlpxPRv0n8HQW6g==",
+      "dev": true
+    },
     "node_modules/colors": {
       "version": "1.4.0",
       "resolved": "https://registry.npmjs.org/colors/-/colors-1.4.0.tgz",
@@ -2099,9 +2305,9 @@
       }
     },
     "node_modules/concurrently": {
-      "version": "6.2.2",
-      "resolved": "https://registry.npmjs.org/concurrently/-/concurrently-6.2.2.tgz",
-      "integrity": "sha512-7a45BjVakAl3pprLOeqaOoZfIWZRmdC68NkjyzPbKu0/pE6CRmqS3l8RG7Q2cX9LnRHkB0oPM6af8PS7NEQvYQ==",
+      "version": "6.4.0",
+      "resolved": "https://registry.npmjs.org/concurrently/-/concurrently-6.4.0.tgz",
+      "integrity": "sha512-HZ3D0RTQMH3oS4gvtYj1P+NBc6PzE2McEra6yEFcQKrUQ9HvtTGU4Dbne083F034p+LRb7kWU0tPRNvSGs1UCQ==",
       "dev": true,
       "dependencies": {
         "chalk": "^4.1.0",
@@ -2120,10 +2326,28 @@
         "node": ">=10.0.0"
       }
     },
+    "node_modules/concurrently/node_modules/rxjs": {
+      "version": "6.6.7",
+      "resolved": "https://registry.npmjs.org/rxjs/-/rxjs-6.6.7.tgz",
+      "integrity": "sha512-hTdwr+7yYNIT5n4AMYp85KA6yw2Va0FLa3Rguvbpa4W3I5xynaBZo41cM3XM+4Q6fRMj3sBYIR1VAmZMXYJvRQ==",
+      "dev": true,
+      "dependencies": {
+        "tslib": "^1.9.0"
+      },
+      "engines": {
+        "npm": ">=2.0.0"
+      }
+    },
+    "node_modules/concurrently/node_modules/tslib": {
+      "version": "1.14.1",
+      "resolved": "https://registry.npmjs.org/tslib/-/tslib-1.14.1.tgz",
+      "integrity": "sha512-Xni35NKzjgMrwevysHTCArtLDpPvye8zV/0E4EyYn43P7/7qvQwPh9BGkHewbMulVntbigmcT7rdX3BNo9wRJg==",
+      "dev": true
+    },
     "node_modules/conf": {
-      "version": "10.0.3",
-      "resolved": "https://registry.npmjs.org/conf/-/conf-10.0.3.tgz",
-      "integrity": "sha512-4gtQ/Q36qVxBzMe6B7gWOAfni1VdhuHkIzxydHkclnwGmgN+eW4bb6jj73vigCfr7d3WlmqawvhZrpCUCTPYxQ==",
+      "version": "10.1.1",
+      "resolved": "https://registry.npmjs.org/conf/-/conf-10.1.1.tgz",
+      "integrity": "sha512-z2civwq/k8TMYtcn3SVP0Peso4otIWnHtcTuHhQ0zDZDdP4NTxqEc8owfkz4zBsdMYdn/LFcE+ZhbCeqkhtq3Q==",
       "dependencies": {
         "ajv": "^8.6.3",
         "ajv-formats": "^2.1.1",
@@ -2144,9 +2368,9 @@
       }
     },
     "node_modules/conf/node_modules/ajv": {
-      "version": "8.6.3",
-      "resolved": "https://registry.npmjs.org/ajv/-/ajv-8.6.3.tgz",
-      "integrity": "sha512-SMJOdDP6LqTkD0Uq8qLi+gMwSt0imXLSV080qFVwJCpH9U6Mb+SUGHAXM0KNbcBPguytWyvFxcHgMLe2D2XSpw==",
+      "version": "8.8.2",
+      "resolved": "https://registry.npmjs.org/ajv/-/ajv-8.8.2.tgz",
+      "integrity": "sha512-x9VuX+R/jcFj1DHo/fCp99esgGDWiHENrKxaCENuCxpoMCmAt/COCGVDwA7kleEpEzJjDnvh3yGoOuLu0Dtllw==",
       "dependencies": {
         "fast-deep-equal": "^3.1.1",
         "json-schema-traverse": "^1.0.0",
@@ -2340,17 +2564,6 @@
         "node": ">=0.10.0"
       }
     },
-    "node_modules/core-js": {
-      "version": "3.18.1",
-      "resolved": "https://registry.npmjs.org/core-js/-/core-js-3.18.1.tgz",
-      "integrity": "sha512-vJlUi/7YdlCZeL6fXvWNaLUPh/id12WXj3MbkMw5uOyF0PfWPBNOCNbs53YqgrvtujLNlt9JQpruyIKkUZ+PKA==",
-      "hasInstallScript": true,
-      "optional": true,
-      "funding": {
-        "type": "opencollective",
-        "url": "https://opencollective.com/core-js"
-      }
-    },
     "node_modules/core-util-is": {
       "version": "1.0.3",
       "resolved": "https://registry.npmjs.org/core-util-is/-/core-util-is-1.0.3.tgz",
@@ -2416,8 +2629,36 @@
       "version": "1.1.1",
       "resolved": "https://registry.npmjs.org/create-require/-/create-require-1.1.1.tgz",
       "integrity": "sha512-dcKFX3jn0MpIaXjisoRvexIJVEKzaq7z2rZKxf+MSr9TkdmHmsU4m2lcLojrj/FHl8mk5VxMmYA+ftRkP/3oKQ==",
+      "dev": true
+    },
+    "node_modules/cross-spawn": {
+      "version": "7.0.3",
+      "resolved": "https://registry.npmjs.org/cross-spawn/-/cross-spawn-7.0.3.tgz",
+      "integrity": "sha512-iRDPJKUPVEND7dHPO8rkbOnPpyDygcDFtWjpeWNCgy8WP2rXcxXL8TskReQl6OrB2G7+UJrags1q15Fudc7G6w==",
+      "dev": true,
+      "dependencies": {
+        "path-key": "^3.1.0",
+        "shebang-command": "^2.0.0",
+        "which": "^2.0.1"
+      },
+      "engines": {
+        "node": ">= 8"
+      }
+    },
+    "node_modules/cross-spawn/node_modules/which": {
+      "version": "2.0.2",
+      "resolved": "https://registry.npmjs.org/which/-/which-2.0.2.tgz",
+      "integrity": "sha512-BLI3Tl1TW3Pvl70l3yq3Y64i+awpwXqsGBYWkkqMtnbXgrMD+yj7rhW0kuEDxzJaYXGjEW5ogapKNMEKNMjibA==",
       "dev": true,
-      "peer": true
+      "dependencies": {
+        "isexe": "^2.0.0"
+      },
+      "bin": {
+        "node-which": "bin/node-which"
+      },
+      "engines": {
+        "node": ">= 8"
+      }
     },
     "node_modules/crypto-browserify": {
       "version": "3.12.0",
@@ -2501,9 +2742,9 @@
       }
     },
     "node_modules/date-fns": {
-      "version": "2.24.0",
-      "resolved": "https://registry.npmjs.org/date-fns/-/date-fns-2.24.0.tgz",
-      "integrity": "sha512-6ujwvwgPID6zbI0o7UbURi2vlLDR9uP26+tW6Lg+Ji3w7dd0i3DOcjcClLjLPranT60SSEFBwdSyYwn/ZkPIuw==",
+      "version": "2.27.0",
+      "resolved": "https://registry.npmjs.org/date-fns/-/date-fns-2.27.0.tgz",
+      "integrity": "sha512-sj+J0Mo2p2X1e306MHq282WS4/A8Pz/95GIFcsPNMPMZVI3EUrAdSv90al1k+p74WGLCruMXk23bfEDZa71X9Q==",
       "dev": true,
       "engines": {
         "node": ">=0.11"
@@ -2545,9 +2786,9 @@
       }
     },
     "node_modules/debug": {
-      "version": "4.3.2",
-      "resolved": "https://registry.npmjs.org/debug/-/debug-4.3.2.tgz",
-      "integrity": "sha512-mOp8wKcvj7XxC78zLgw/ZA+6TSgkoE2C/ienthhRD298T7UNwAg9diBpLRxC0mOezLl4B0xV7M0cCO6P/O0Xhw==",
+      "version": "4.3.3",
+      "resolved": "https://registry.npmjs.org/debug/-/debug-4.3.3.tgz",
+      "integrity": "sha512-/zxw5+vh1Tfv+4Qn7a5nsbcJKPaSvCDhojn6FEl9vupwK2VCSDtEiEtqr8DFtzYFOdz63LBkxec7DYuc2jon6Q==",
       "dependencies": {
         "ms": "2.1.2"
       },
@@ -2794,12 +3035,12 @@
       "dev": true
     },
     "node_modules/electron": {
-      "version": "14.2.0",
-      "resolved": "https://registry.npmjs.org/electron/-/electron-14.2.0.tgz",
-      "integrity": "sha512-6CmAv1P0xcwK3FQOSA27fHI36/wctSFVgj46VODn56srXXQWeolkK1VzeAFNE613iAuuH9jJdHvE3gz+c7XkNA==",
+      "version": "16.0.7",
+      "resolved": "https://registry.npmjs.org/electron/-/electron-16.0.7.tgz",
+      "integrity": "sha512-/IMwpBf2svhA1X/7Q58RV+Nn0fvUJsHniG4TizaO7q4iKFYSQ6hBvsLz+cylcZ8hRMKmVy5G1XaMNJID2ah23w==",
       "hasInstallScript": true,
       "dependencies": {
-        "@electron/get": "^1.0.1",
+        "@electron/get": "^1.13.0",
         "@types/node": "^14.6.2",
         "extract-zip": "^1.0.3"
       },
@@ -2839,15 +3080,15 @@
       }
     },
     "node_modules/electron-updater": {
-      "version": "4.3.9",
-      "resolved": "https://registry.npmjs.org/electron-updater/-/electron-updater-4.3.9.tgz",
-      "integrity": "sha512-LCNfedSwZfS4Hza+pDyPR05LqHtGorCStaBgVpRnfKxOlZcvpYEX0AbMeH5XUtbtGRoH2V8osbbf2qKPNb7AsA==",
+      "version": "4.6.1",
+      "resolved": "https://registry.npmjs.org/electron-updater/-/electron-updater-4.6.1.tgz",
+      "integrity": "sha512-YsU1mHqXLrXXmBMsxhxy24PrbaB8rnpZDPmFa2gOkTYk/Ch13+R0fjsRSpPYvqtskVVY0ux8fu+HnUkVkqc7og==",
       "dependencies": {
-        "@types/semver": "^7.3.5",
-        "builder-util-runtime": "8.7.5",
+        "@types/semver": "^7.3.6",
+        "builder-util-runtime": "8.9.1",
         "fs-extra": "^10.0.0",
         "js-yaml": "^4.1.0",
-        "lazy-val": "^1.0.4",
+        "lazy-val": "^1.0.5",
         "lodash.escaperegexp": "^4.1.2",
         "lodash.isequal": "^4.5.0",
         "semver": "^7.3.5"
@@ -2931,6 +3172,11 @@
       "resolved": "https://registry.npmjs.org/yallist/-/yallist-4.0.0.tgz",
       "integrity": "sha512-3wdGidZyq5PB084XLES5TpOSRA3wjXAlIWMhum2kRcv/41Sn2emQ0dycQW4uZXLejwKvg6EsvbdlVL+FYEct7A=="
     },
+    "node_modules/electron/node_modules/@types/node": {
+      "version": "14.18.0",
+      "resolved": "https://registry.npmjs.org/@types/node/-/node-14.18.0.tgz",
+      "integrity": "sha512-0GeIl2kmVMXEnx8tg1SlG6Gg8vkqirrW752KqolYo1PHevhhZN3bhJ67qHj+bQaINhX0Ra3TlWwRvMCd9iEfNQ=="
+    },
     "node_modules/elliptic": {
       "version": "6.5.4",
       "resolved": "https://registry.npmjs.org/elliptic/-/elliptic-6.5.4.tgz",
@@ -2953,9 +3199,10 @@
       "dev": true
     },
     "node_modules/emoji-regex": {
-      "version": "8.0.0",
-      "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-8.0.0.tgz",
-      "integrity": "sha512-MSjYzcWNOA0ewAHpz0MxpYFvwg6yjy1NG3xteoqz644VCo/RPgnr1/GGt+ic3iJTzQ8Eu3TdM14SawnVUmGE6A=="
+      "version": "9.2.2",
+      "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-9.2.2.tgz",
+      "integrity": "sha512-L18DaJsXSUk2+42pv8mLs5jJT2hqFkFE4j21wOmgbUqsZ2hL72NsUU785g9RXgo3s0ZNgVl42TiHp3ZtOv/Vyg==",
+      "dev": true
     },
     "node_modules/emojis-list": {
       "version": "3.0.0",
@@ -2984,42 +3231,45 @@
       }
     },
     "node_modules/engine.io": {
-      "version": "4.1.1",
-      "resolved": "https://registry.npmjs.org/engine.io/-/engine.io-4.1.1.tgz",
-      "integrity": "sha512-t2E9wLlssQjGw0nluF6aYyfX8LwYU8Jj0xct+pAhfWfv/YrBn6TSNtEYsgxHIfaMqfrLx07czcMg9bMN6di+3w==",
+      "version": "6.1.0",
+      "resolved": "https://registry.npmjs.org/engine.io/-/engine.io-6.1.0.tgz",
+      "integrity": "sha512-ErhZOVu2xweCjEfYcTdkCnEYUiZgkAcBBAhW4jbIvNG8SLU3orAqoJCiytZjYF7eTpVmmCrLDjLIEaPlUAs1uw==",
       "dev": true,
       "dependencies": {
+        "@types/cookie": "^0.4.1",
+        "@types/cors": "^2.8.12",
+        "@types/node": ">=10.0.0",
         "accepts": "~1.3.4",
         "base64id": "2.0.0",
         "cookie": "~0.4.1",
         "cors": "~2.8.5",
         "debug": "~4.3.1",
-        "engine.io-parser": "~4.0.0",
-        "ws": "~7.4.2"
+        "engine.io-parser": "~5.0.0",
+        "ws": "~8.2.3"
       },
       "engines": {
         "node": ">=10.0.0"
       }
     },
     "node_modules/engine.io-parser": {
-      "version": "4.0.3",
-      "resolved": "https://registry.npmjs.org/engine.io-parser/-/engine.io-parser-4.0.3.tgz",
-      "integrity": "sha512-xEAAY0msNnESNPc00e19y5heTPX4y/TJ36gr8t1voOaNmTojP9b3oK3BbJLFufW2XFPQaaijpFewm2g2Um3uqA==",
+      "version": "5.0.2",
+      "resolved": "https://registry.npmjs.org/engine.io-parser/-/engine.io-parser-5.0.2.tgz",
+      "integrity": "sha512-wuiO7qO/OEkPJSFueuATIXtrxF7/6GTbAO9QLv7nnbjwZ5tYhLm9zxvLwxstRs0dcT0KUlWTjtIOs1T86jt12g==",
       "dev": true,
       "dependencies": {
-        "base64-arraybuffer": "0.1.4"
+        "base64-arraybuffer": "~1.0.1"
       },
       "engines": {
-        "node": ">=8.0.0"
+        "node": ">=10.0.0"
       }
     },
     "node_modules/engine.io/node_modules/ws": {
-      "version": "7.4.6",
-      "resolved": "https://registry.npmjs.org/ws/-/ws-7.4.6.tgz",
-      "integrity": "sha512-YmhHDO4MzaDLB+M9ym/mDA5z0naX8j7SIlT8f8z+I0VtzsRbekxEutHSme7NPS2qE8StCYQNUnfWdXta/Yu85A==",
+      "version": "8.2.3",
+      "resolved": "https://registry.npmjs.org/ws/-/ws-8.2.3.tgz",
+      "integrity": "sha512-wBuoj1BDpC6ZQ1B7DWQBYVLphPWkm8i9Y0/3YdHjHKHiohOJ1ws+3OccDWtH+PoC9DZD5WOTrJvNbWvjS6JWaA==",
       "dev": true,
       "engines": {
-        "node": ">=8.3.0"
+        "node": ">=10.0.0"
       },
       "peerDependencies": {
         "bufferutil": "^4.0.1",
@@ -3048,6 +3298,18 @@
         "node": ">=6.9.0"
       }
     },
+    "node_modules/enquirer": {
+      "version": "2.3.6",
+      "resolved": "https://registry.npmjs.org/enquirer/-/enquirer-2.3.6.tgz",
+      "integrity": "sha512-yjNnPr315/FjS4zIsUxYguYUPP2e1NK4d7E7ZOLiyYCcbFBiTMyID+2wvm2w6+pZ/odMA7cRkjhsPbltwBOrLg==",
+      "dev": true,
+      "dependencies": {
+        "ansi-colors": "^4.1.1"
+      },
+      "engines": {
+        "node": ">=8.6"
+      }
+    },
     "node_modules/ent": {
       "version": "2.2.0",
       "resolved": "https://registry.npmjs.org/ent/-/ent-2.2.0.tgz",
@@ -3206,9 +3468,9 @@
       }
     },
     "node_modules/estraverse": {
-      "version": "5.2.0",
-      "resolved": "https://registry.npmjs.org/estraverse/-/estraverse-5.2.0.tgz",
-      "integrity": "sha512-BxbNGGNm0RyRYvUdHpIwv9IWzeM9XClbOxwoATuFdOE7ZE6wHL+HQ5T8hoPM+zHvmKzzsEqhgy0GrQ5X13afiQ==",
+      "version": "5.3.0",
+      "resolved": "https://registry.npmjs.org/estraverse/-/estraverse-5.3.0.tgz",
+      "integrity": "sha512-MMdARuVEQziNTeJD8DgMqmhwR11BRQ/cBP+pLtYdSTnf3MIO8fFeiINEbX36ZdNlfU/7A9f3gUw49B3oQsvwBA==",
       "dev": true,
       "engines": {
         "node": ">=4.0"
@@ -3267,6 +3529,29 @@
         "safe-buffer": "^5.1.1"
       }
     },
+    "node_modules/execa": {
+      "version": "5.1.1",
+      "resolved": "https://registry.npmjs.org/execa/-/execa-5.1.1.tgz",
+      "integrity": "sha512-8uSpZZocAZRBAPIEINJj3Lo9HyGitllczc27Eh5YYojjMFMn8yHMDMaUHE2Jqfq05D/wucwI4JGURyXt1vchyg==",
+      "dev": true,
+      "dependencies": {
+        "cross-spawn": "^7.0.3",
+        "get-stream": "^6.0.0",
+        "human-signals": "^2.1.0",
+        "is-stream": "^2.0.0",
+        "merge-stream": "^2.0.0",
+        "npm-run-path": "^4.0.1",
+        "onetime": "^5.1.2",
+        "signal-exit": "^3.0.3",
+        "strip-final-newline": "^2.0.0"
+      },
+      "engines": {
+        "node": ">=10"
+      },
+      "funding": {
+        "url": "https://github.com/sindresorhus/execa?sponsor=1"
+      }
+    },
     "node_modules/expand-brackets": {
       "version": "2.1.4",
       "resolved": "https://registry.npmjs.org/expand-brackets/-/expand-brackets-2.1.4.tgz",
@@ -3339,6 +3624,17 @@
         "node": ">=4"
       }
     },
+    "node_modules/external-editor/node_modules/tmp": {
+      "version": "0.0.33",
+      "resolved": "https://registry.npmjs.org/tmp/-/tmp-0.0.33.tgz",
+      "integrity": "sha512-jRCJlojKnZ3addtTOjdIqoRuPEKBvNXcGYqzO6zWZX8KfKEpnGY5jfggJQ3EjKuu8D4bJRr0y+cYJFmYbImXGw==",
+      "dependencies": {
+        "os-tmpdir": "~1.0.2"
+      },
+      "engines": {
+        "node": ">=0.6.0"
+      }
+    },
     "node_modules/extglob": {
       "version": "2.0.4",
       "resolved": "https://registry.npmjs.org/extglob/-/extglob-2.0.4.tgz",
@@ -3615,9 +3911,9 @@
       }
     },
     "node_modules/follow-redirects": {
-      "version": "1.14.4",
-      "resolved": "https://registry.npmjs.org/follow-redirects/-/follow-redirects-1.14.4.tgz",
-      "integrity": "sha512-zwGkiSXC1MUJG/qmeIFH2HBJx9u0V46QGUe3YR1fXG8bXQxq7fLj0RjLZQ5nubr9qNJUZrH+xUcwXEoXNpfS+g==",
+      "version": "1.14.6",
+      "resolved": "https://registry.npmjs.org/follow-redirects/-/follow-redirects-1.14.6.tgz",
+      "integrity": "sha512-fhUl5EwSJbbl8AR+uYL2KQDxLkdSjZGR36xy46AO7cOMTrCMON6Sa28FmAnC2tRTDbd/Uuzz3aJBv7EBN7JH8A==",
       "dev": true,
       "funding": [
         {
@@ -3657,10 +3953,9 @@
       }
     },
     "node_modules/form-data": {
-      "version": "3.0.1",
-      "resolved": "https://registry.npmjs.org/form-data/-/form-data-3.0.1.tgz",
-      "integrity": "sha512-RHkBKtLWUVwd7SqRIvCZMEvAMoGUp0XU+seQiZejj0COz3RI3hWP4sCv3gZWWLjJTd7rGwcsF5eKZGii0r/hbg==",
-      "dev": true,
+      "version": "4.0.0",
+      "resolved": "https://registry.npmjs.org/form-data/-/form-data-4.0.0.tgz",
+      "integrity": "sha512-ETEklSGi5t0QMZuiXoA/Q6vcnxcLQP5vdugSpuAyi6SVGi2clPPp+xgEhuMaHC+zGgn31Kd235W35f7Hykkaww==",
       "dependencies": {
         "asynckit": "^0.4.0",
         "combined-stream": "^1.0.8",
@@ -3816,14 +4111,15 @@
       }
     },
     "node_modules/get-stream": {
-      "version": "4.1.0",
-      "resolved": "https://registry.npmjs.org/get-stream/-/get-stream-4.1.0.tgz",
-      "integrity": "sha512-GMat4EJ5161kIy2HevLlr4luNjBgvmj413KaQA7jt4V8B4RDsfpHk7WQ9GVqfYyyx8OS/L66Kox+rJRNklLK7w==",
-      "dependencies": {
-        "pump": "^3.0.0"
-      },
+      "version": "6.0.1",
+      "resolved": "https://registry.npmjs.org/get-stream/-/get-stream-6.0.1.tgz",
+      "integrity": "sha512-ts6Wi+2j3jQjqi70w5AlN8DFnkSwC+MqmxEzdEALB2qXZYV3X/b1CTfgPLGJNMeAWxdPfU8FO1ms3NUfaHCPYg==",
+      "dev": true,
       "engines": {
-        "node": ">=6"
+        "node": ">=10"
+      },
+      "funding": {
+        "url": "https://github.com/sponsors/sindresorhus"
       }
     },
     "node_modules/get-value": {
@@ -3873,13 +4169,12 @@
       }
     },
     "node_modules/global-agent": {
-      "version": "2.2.0",
-      "resolved": "https://registry.npmjs.org/global-agent/-/global-agent-2.2.0.tgz",
-      "integrity": "sha512-+20KpaW6DDLqhG7JDiJpD1JvNvb8ts+TNl7BPOYcURqCrXqnN1Vf+XVOrkKJAFPqfX+oEhsdzOj1hLWkBTdNJg==",
+      "version": "3.0.0",
+      "resolved": "https://registry.npmjs.org/global-agent/-/global-agent-3.0.0.tgz",
+      "integrity": "sha512-PT6XReJ+D07JvGoxQMkT6qji/jVNfX/h364XHZOWeRzy64sSFr+xJ5OX7LI3b4MPQzdL4H8Y8M0xzPpsVMwA8Q==",
       "optional": true,
       "dependencies": {
         "boolean": "^3.0.1",
-        "core-js": "^3.6.5",
         "es6-error": "^4.1.1",
         "matcher": "^3.0.0",
         "roarr": "^2.15.3",
@@ -3989,6 +4284,17 @@
         "node": ">=8.6"
       }
     },
+    "node_modules/got/node_modules/get-stream": {
+      "version": "4.1.0",
+      "resolved": "https://registry.npmjs.org/get-stream/-/get-stream-4.1.0.tgz",
+      "integrity": "sha512-GMat4EJ5161kIy2HevLlr4luNjBgvmj413KaQA7jt4V8B4RDsfpHk7WQ9GVqfYyyx8OS/L66Kox+rJRNklLK7w==",
+      "dependencies": {
+        "pump": "^3.0.0"
+      },
+      "engines": {
+        "node": ">=6"
+      }
+    },
     "node_modules/graceful-fs": {
       "version": "4.2.8",
       "resolved": "https://registry.npmjs.org/graceful-fs/-/graceful-fs-4.2.8.tgz",
@@ -4178,27 +4484,21 @@
       "integrity": "sha512-carPklcUh7ROWRK7Cv27RPtdhYhUsela/ue5/jKzjegVvXDqM2ILE9Q2BGn9JZJh1g87cp56su/FgQSzcWS8cQ=="
     },
     "node_modules/http-errors": {
-      "version": "1.7.2",
-      "resolved": "https://registry.npmjs.org/http-errors/-/http-errors-1.7.2.tgz",
-      "integrity": "sha512-uUQBt3H/cSIVfch6i1EuPNy/YsRSOUBXTVfZ+yR7Zjez3qjBz6i9+i4zjNaoqcoFVI4lQJ5plg63TvGfRSDCRg==",
+      "version": "1.8.1",
+      "resolved": "https://registry.npmjs.org/http-errors/-/http-errors-1.8.1.tgz",
+      "integrity": "sha512-Kpk9Sm7NmI+RHhnj6OIWDI1d6fIoFAtFt9RLaTMRlg/8w49juAStsrBgp0Dp4OdxdVbRIeKhtCUvoi/RuAhO4g==",
       "dev": true,
       "dependencies": {
         "depd": "~1.1.2",
-        "inherits": "2.0.3",
-        "setprototypeof": "1.1.1",
+        "inherits": "2.0.4",
+        "setprototypeof": "1.2.0",
         "statuses": ">= 1.5.0 < 2",
-        "toidentifier": "1.0.0"
+        "toidentifier": "1.0.1"
       },
       "engines": {
         "node": ">= 0.6"
       }
     },
-    "node_modules/http-errors/node_modules/inherits": {
-      "version": "2.0.3",
-      "resolved": "https://registry.npmjs.org/inherits/-/inherits-2.0.3.tgz",
-      "integrity": "sha1-Yzwsg+PaQqUC9SRmAiSA9CCCYd4=",
-      "dev": true
-    },
     "node_modules/http-proxy": {
       "version": "1.18.1",
       "resolved": "https://registry.npmjs.org/http-proxy/-/http-proxy-1.18.1.tgz",
@@ -4245,6 +4545,30 @@
         "node": ">= 6"
       }
     },
+    "node_modules/human-signals": {
+      "version": "2.1.0",
+      "resolved": "https://registry.npmjs.org/human-signals/-/human-signals-2.1.0.tgz",
+      "integrity": "sha512-B4FFZ6q/T2jhhksgkbEW3HBvWIfDW85snkQgawt07S7J5QXTk6BkNV+0yAeZrM5QpMAdYlocGoljn0sJ/WQkFw==",
+      "dev": true,
+      "engines": {
+        "node": ">=10.17.0"
+      }
+    },
+    "node_modules/husky": {
+      "version": "7.0.4",
+      "resolved": "https://registry.npmjs.org/husky/-/husky-7.0.4.tgz",
+      "integrity": "sha512-vbaCKN2QLtP/vD4yvs6iz6hBEo6wkSzs8HpRah1Z6aGmF2KW5PdYuAd7uX5a+OyBZHBhd+TFLqgjUgytQr4RvQ==",
+      "dev": true,
+      "bin": {
+        "husky": "lib/bin.js"
+      },
+      "engines": {
+        "node": ">=12"
+      },
+      "funding": {
+        "url": "https://github.com/sponsors/typicode"
+      }
+    },
     "node_modules/iconv-lite": {
       "version": "0.4.24",
       "resolved": "https://registry.npmjs.org/iconv-lite/-/iconv-lite-0.4.24.tgz",
@@ -4305,6 +4629,15 @@
         "node": ">=0.8.19"
       }
     },
+    "node_modules/indent-string": {
+      "version": "4.0.0",
+      "resolved": "https://registry.npmjs.org/indent-string/-/indent-string-4.0.0.tgz",
+      "integrity": "sha512-EdDDZu4A2OyIK7Lr/2zG+w5jmbuk1DVBnEwREQvBzspBJkCEbRa8GxU1lghYcaGJCnRWibjDXlq779X1/y5xwg==",
+      "dev": true,
+      "engines": {
+        "node": ">=8"
+      }
+    },
     "node_modules/infer-owner": {
       "version": "1.0.4",
       "resolved": "https://registry.npmjs.org/infer-owner/-/infer-owner-1.0.4.tgz",
@@ -4358,6 +4691,48 @@
         "node": ">=8.0.0"
       }
     },
+    "node_modules/inquirer/node_modules/emoji-regex": {
+      "version": "8.0.0",
+      "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-8.0.0.tgz",
+      "integrity": "sha512-MSjYzcWNOA0ewAHpz0MxpYFvwg6yjy1NG3xteoqz644VCo/RPgnr1/GGt+ic3iJTzQ8Eu3TdM14SawnVUmGE6A=="
+    },
+    "node_modules/inquirer/node_modules/is-fullwidth-code-point": {
+      "version": "3.0.0",
+      "resolved": "https://registry.npmjs.org/is-fullwidth-code-point/-/is-fullwidth-code-point-3.0.0.tgz",
+      "integrity": "sha512-zymm5+u+sCsSWyD9qNaejV3DFvhCKclKdizYaJUuHA83RLjb7nSuGnddCHGv0hk+KY7BMAlsWeK4Ueg6EV6XQg==",
+      "engines": {
+        "node": ">=8"
+      }
+    },
+    "node_modules/inquirer/node_modules/rxjs": {
+      "version": "6.6.7",
+      "resolved": "https://registry.npmjs.org/rxjs/-/rxjs-6.6.7.tgz",
+      "integrity": "sha512-hTdwr+7yYNIT5n4AMYp85KA6yw2Va0FLa3Rguvbpa4W3I5xynaBZo41cM3XM+4Q6fRMj3sBYIR1VAmZMXYJvRQ==",
+      "dependencies": {
+        "tslib": "^1.9.0"
+      },
+      "engines": {
+        "npm": ">=2.0.0"
+      }
+    },
+    "node_modules/inquirer/node_modules/string-width": {
+      "version": "4.2.3",
+      "resolved": "https://registry.npmjs.org/string-width/-/string-width-4.2.3.tgz",
+      "integrity": "sha512-wKyQRQpjJ0sIp62ErSZdGsjMJWsap5oRNihHhu6G7JVO/9jIB6UyevL+tXuOqrng8j/cxKTWyWUwvSTriiZz/g==",
+      "dependencies": {
+        "emoji-regex": "^8.0.0",
+        "is-fullwidth-code-point": "^3.0.0",
+        "strip-ansi": "^6.0.1"
+      },
+      "engines": {
+        "node": ">=8"
+      }
+    },
+    "node_modules/inquirer/node_modules/tslib": {
+      "version": "1.14.1",
+      "resolved": "https://registry.npmjs.org/tslib/-/tslib-1.14.1.tgz",
+      "integrity": "sha512-Xni35NKzjgMrwevysHTCArtLDpPvye8zV/0E4EyYn43P7/7qvQwPh9BGkHewbMulVntbigmcT7rdX3BNo9wRJg=="
+    },
     "node_modules/is-accessor-descriptor": {
       "version": "0.1.6",
       "resolved": "https://registry.npmjs.org/is-accessor-descriptor/-/is-accessor-descriptor-0.1.6.tgz",
@@ -4413,9 +4788,9 @@
       }
     },
     "node_modules/is-core-module": {
-      "version": "2.7.0",
-      "resolved": "https://registry.npmjs.org/is-core-module/-/is-core-module-2.7.0.tgz",
-      "integrity": "sha512-ByY+tjCciCr+9nLryBYcSD50EOGWt95c7tIsKTG1J2ixKKXPvF7Ej3AVd+UfDydAJom3biBGDBALaO79ktwgEQ==",
+      "version": "2.8.0",
+      "resolved": "https://registry.npmjs.org/is-core-module/-/is-core-module-2.8.0.tgz",
+      "integrity": "sha512-vd15qHsaqrRL7dtH6QNuy0ndJmRDrS9HAM1CAiSifNUFv4x1a0CCVsj18hJ1mShxIG6T2i1sO78MkP56r0nYRw==",
       "dev": true,
       "dependencies": {
         "has": "^1.0.3"
@@ -4505,11 +4880,15 @@
       }
     },
     "node_modules/is-fullwidth-code-point": {
-      "version": "3.0.0",
-      "resolved": "https://registry.npmjs.org/is-fullwidth-code-point/-/is-fullwidth-code-point-3.0.0.tgz",
-      "integrity": "sha512-zymm5+u+sCsSWyD9qNaejV3DFvhCKclKdizYaJUuHA83RLjb7nSuGnddCHGv0hk+KY7BMAlsWeK4Ueg6EV6XQg==",
+      "version": "4.0.0",
+      "resolved": "https://registry.npmjs.org/is-fullwidth-code-point/-/is-fullwidth-code-point-4.0.0.tgz",
+      "integrity": "sha512-O4L094N2/dZ7xqVdrXhh9r1KODPJpFms8B5sGdJLPy664AgvXsreZUyCQQNItZRDlYug4xStLjNp/sz3HvBowQ==",
+      "dev": true,
       "engines": {
-        "node": ">=8"
+        "node": ">=12"
+      },
+      "funding": {
+        "url": "https://github.com/sponsors/sindresorhus"
       }
     },
     "node_modules/is-glob": {
@@ -4601,6 +4980,18 @@
       "resolved": "https://registry.npmjs.org/is-promise/-/is-promise-2.2.2.tgz",
       "integrity": "sha512-+lP4/6lKUBfQjZ2pdxThZvLUAafmZb8OAxFb8XXtiQmS35INgr85hdOGoEs124ez1FCnZJt6jau/T+alh58QFQ=="
     },
+    "node_modules/is-stream": {
+      "version": "2.0.1",
+      "resolved": "https://registry.npmjs.org/is-stream/-/is-stream-2.0.1.tgz",
+      "integrity": "sha512-hFoiJiTl63nn+kstHGBtewWSKnQLpyb155KHheA1l39uvtO9nWIop1p3udqPcUd/xbF1VLMO4n7OI6p7RbngDg==",
+      "dev": true,
+      "engines": {
+        "node": ">=8"
+      },
+      "funding": {
+        "url": "https://github.com/sponsors/sindresorhus"
+      }
+    },
     "node_modules/is-typedarray": {
       "version": "1.0.0",
       "resolved": "https://registry.npmjs.org/is-typedarray/-/is-typedarray-1.0.0.tgz",
@@ -4667,24 +5058,41 @@
       }
     },
     "node_modules/jasmine": {
-      "version": "3.9.0",
-      "resolved": "https://registry.npmjs.org/jasmine/-/jasmine-3.9.0.tgz",
-      "integrity": "sha512-JgtzteG7xnqZZ51fg7N2/wiQmXon09szkALcRMTgCMX4u/m17gVJFjObnvw5FXkZOWuweHPaPRVB6DI2uN0wVA==",
+      "version": "3.10.0",
+      "resolved": "https://registry.npmjs.org/jasmine/-/jasmine-3.10.0.tgz",
+      "integrity": "sha512-2Y42VsC+3CQCTzTwJezOvji4qLORmKIE0kwowWC+934Krn6ZXNQYljiwK5st9V3PVx96BSiDYXSB60VVah3IlQ==",
       "dev": true,
       "dependencies": {
         "glob": "^7.1.6",
-        "jasmine-core": "~3.9.0"
+        "jasmine-core": "~3.10.0"
       },
       "bin": {
         "jasmine": "bin/jasmine.js"
       }
     },
     "node_modules/jasmine-core": {
-      "version": "3.9.0",
-      "resolved": "https://registry.npmjs.org/jasmine-core/-/jasmine-core-3.9.0.tgz",
-      "integrity": "sha512-Tv3kVbPCGVrjsnHBZ38NsPU3sDOtNa0XmbG2baiyJqdb5/SPpDO6GVwJYtUryl6KB4q1Ssckwg612ES9Z0dreQ==",
+      "version": "3.10.1",
+      "resolved": "https://registry.npmjs.org/jasmine-core/-/jasmine-core-3.10.1.tgz",
+      "integrity": "sha512-ooZWSDVAdh79Rrj4/nnfklL3NQVra0BcuhcuWoAwwi+znLDoUeH87AFfeX8s+YeYi6xlv5nveRyaA1v7CintfA==",
       "dev": true
     },
+    "node_modules/jasmine-ts": {
+      "version": "0.4.0",
+      "resolved": "https://registry.npmjs.org/jasmine-ts/-/jasmine-ts-0.4.0.tgz",
+      "integrity": "sha512-bIAWJKUwxfuZfGI1ctEbny7+dsyFzsN0eLzOokxh0qIUCofai2WUEKoe3MMllkGEBXJzbEVYr2IyhJBv4j7SBA==",
+      "dev": true,
+      "dependencies": {
+        "yargs": "^17.0.1"
+      },
+      "bin": {
+        "jasmine-ts": "lib/index.js"
+      },
+      "peerDependencies": {
+        "jasmine": ">=3.4",
+        "ts-node": ">=3.2.0 <=11",
+        "typescript": ">=3.5.2"
+      }
+    },
     "node_modules/jasmine-ts-console-reporter": {
       "version": "3.1.1",
       "resolved": "https://registry.npmjs.org/jasmine-ts-console-reporter/-/jasmine-ts-console-reporter-3.1.1.tgz",
@@ -4697,6 +5105,71 @@
         "source-map-resolve": "^0.5.0"
       }
     },
+    "node_modules/jasmine-ts/node_modules/emoji-regex": {
+      "version": "8.0.0",
+      "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-8.0.0.tgz",
+      "integrity": "sha512-MSjYzcWNOA0ewAHpz0MxpYFvwg6yjy1NG3xteoqz644VCo/RPgnr1/GGt+ic3iJTzQ8Eu3TdM14SawnVUmGE6A==",
+      "dev": true
+    },
+    "node_modules/jasmine-ts/node_modules/is-fullwidth-code-point": {
+      "version": "3.0.0",
+      "resolved": "https://registry.npmjs.org/is-fullwidth-code-point/-/is-fullwidth-code-point-3.0.0.tgz",
+      "integrity": "sha512-zymm5+u+sCsSWyD9qNaejV3DFvhCKclKdizYaJUuHA83RLjb7nSuGnddCHGv0hk+KY7BMAlsWeK4Ueg6EV6XQg==",
+      "dev": true,
+      "engines": {
+        "node": ">=8"
+      }
+    },
+    "node_modules/jasmine-ts/node_modules/string-width": {
+      "version": "4.2.3",
+      "resolved": "https://registry.npmjs.org/string-width/-/string-width-4.2.3.tgz",
+      "integrity": "sha512-wKyQRQpjJ0sIp62ErSZdGsjMJWsap5oRNihHhu6G7JVO/9jIB6UyevL+tXuOqrng8j/cxKTWyWUwvSTriiZz/g==",
+      "dev": true,
+      "dependencies": {
+        "emoji-regex": "^8.0.0",
+        "is-fullwidth-code-point": "^3.0.0",
+        "strip-ansi": "^6.0.1"
+      },
+      "engines": {
+        "node": ">=8"
+      }
+    },
+    "node_modules/jasmine-ts/node_modules/y18n": {
+      "version": "5.0.8",
+      "resolved": "https://registry.npmjs.org/y18n/-/y18n-5.0.8.tgz",
+      "integrity": "sha512-0pfFzegeDWJHJIAmTLRP2DwHjdF5s7jo9tuztdQxAhINCdvS+3nGINqPd00AphqJR/0LhANUS6/+7SCb98YOfA==",
+      "dev": true,
+      "engines": {
+        "node": ">=10"
+      }
+    },
+    "node_modules/jasmine-ts/node_modules/yargs": {
+      "version": "17.3.1",
+      "resolved": "https://registry.npmjs.org/yargs/-/yargs-17.3.1.tgz",
+      "integrity": "sha512-WUANQeVgjLbNsEmGk20f+nlHgOqzRFpiGWVaBrYGYIGANIIu3lWjoyi0fNlFmJkvfhCZ6BXINe7/W2O2bV4iaA==",
+      "dev": true,
+      "dependencies": {
+        "cliui": "^7.0.2",
+        "escalade": "^3.1.1",
+        "get-caller-file": "^2.0.5",
+        "require-directory": "^2.1.1",
+        "string-width": "^4.2.3",
+        "y18n": "^5.0.5",
+        "yargs-parser": "^21.0.0"
+      },
+      "engines": {
+        "node": ">=12"
+      }
+    },
+    "node_modules/jasmine-ts/node_modules/yargs-parser": {
+      "version": "21.0.0",
+      "resolved": "https://registry.npmjs.org/yargs-parser/-/yargs-parser-21.0.0.tgz",
+      "integrity": "sha512-z9kApYUOCwoeZ78rfRYYWdiU/iNL6mwwYlkkZfJoyMR1xps+NEBX5X7XmRpxkZHhXJ6+Ey00IwKxBBSW9FIjyA==",
+      "dev": true,
+      "engines": {
+        "node": ">=12"
+      }
+    },
     "node_modules/js-tokens": {
       "version": "4.0.0",
       "resolved": "https://registry.npmjs.org/js-tokens/-/js-tokens-4.0.0.tgz",
@@ -4762,6 +5235,20 @@
         }
       }
     },
+    "node_modules/jsdom/node_modules/form-data": {
+      "version": "3.0.1",
+      "resolved": "https://registry.npmjs.org/form-data/-/form-data-3.0.1.tgz",
+      "integrity": "sha512-RHkBKtLWUVwd7SqRIvCZMEvAMoGUp0XU+seQiZejj0COz3RI3hWP4sCv3gZWWLjJTd7rGwcsF5eKZGii0r/hbg==",
+      "dev": true,
+      "dependencies": {
+        "asynckit": "^0.4.0",
+        "combined-stream": "^1.0.8",
+        "mime-types": "^2.1.12"
+      },
+      "engines": {
+        "node": ">= 6"
+      }
+    },
     "node_modules/json-buffer": {
       "version": "3.0.0",
       "resolved": "https://registry.npmjs.org/json-buffer/-/json-buffer-3.0.0.tgz",
@@ -4811,9 +5298,9 @@
       }
     },
     "node_modules/karma": {
-      "version": "6.3.4",
-      "resolved": "https://registry.npmjs.org/karma/-/karma-6.3.4.tgz",
-      "integrity": "sha512-hbhRogUYIulfkBTZT7xoPrCYhRBnBoqbbL4fszWD0ReFGUxU+LYBr3dwKdAluaDQ/ynT9/7C+Lf7pPNW4gSx4Q==",
+      "version": "6.3.9",
+      "resolved": "https://registry.npmjs.org/karma/-/karma-6.3.9.tgz",
+      "integrity": "sha512-E/MqdLM9uVIhfuyVnrhlGBu4miafBdXEAEqCmwdEMh3n17C7UWC/8Kvm3AYKr91gc7scutekZ0xv6rxRaUCtnw==",
       "dev": true,
       "dependencies": {
         "body-parser": "^1.19.0",
@@ -4834,10 +5321,10 @@
         "qjobs": "^1.2.0",
         "range-parser": "^1.2.1",
         "rimraf": "^3.0.2",
-        "socket.io": "^3.1.0",
+        "socket.io": "^4.2.0",
         "source-map": "^0.6.1",
         "tmp": "^0.2.1",
-        "ua-parser-js": "^0.7.28",
+        "ua-parser-js": "^0.7.30",
         "yargs": "^16.1.1"
       },
       "bin": {
@@ -4881,9 +5368,9 @@
       }
     },
     "node_modules/karma-firefox-launcher": {
-      "version": "2.1.1",
-      "resolved": "https://registry.npmjs.org/karma-firefox-launcher/-/karma-firefox-launcher-2.1.1.tgz",
-      "integrity": "sha512-VzDMgPseXak9DtfyE1O5bB2BwsMy1zzO1kUxVW1rP0yhC4tDNJ0p3JoFdzvrK4QqVzdqUMa9Rx9YzkdFp8hz3Q==",
+      "version": "2.1.2",
+      "resolved": "https://registry.npmjs.org/karma-firefox-launcher/-/karma-firefox-launcher-2.1.2.tgz",
+      "integrity": "sha512-VV9xDQU1QIboTrjtGVD4NCfzIH7n01ZXqy/qpBhnOeGVOkG5JYPEm8kuSd7psHE6WouZaQ9Ool92g8LFweSNMA==",
       "dev": true,
       "dependencies": {
         "is-wsl": "^2.2.0",
@@ -4978,18 +5465,6 @@
         "node": ">=0.10.0"
       }
     },
-    "node_modules/karma/node_modules/tmp": {
-      "version": "0.2.1",
-      "resolved": "https://registry.npmjs.org/tmp/-/tmp-0.2.1.tgz",
-      "integrity": "sha512-76SUhtfqR2Ijn+xllcI5P1oyannHNHByD80W1q447gU3mp9G9PSpGdWmjUOHRDPiHYacIk66W7ubDTuPF3BEtQ==",
-      "dev": true,
-      "dependencies": {
-        "rimraf": "^3.0.0"
-      },
-      "engines": {
-        "node": ">=8.17.0"
-      }
-    },
     "node_modules/keytar": {
       "version": "7.7.0",
       "resolved": "https://registry.npmjs.org/keytar/-/keytar-7.7.0.tgz",
@@ -5073,6 +5548,153 @@
         "node": ">= 0.8.0"
       }
     },
+    "node_modules/lilconfig": {
+      "version": "2.0.4",
+      "resolved": "https://registry.npmjs.org/lilconfig/-/lilconfig-2.0.4.tgz",
+      "integrity": "sha512-bfTIN7lEsiooCocSISTWXkiWJkRqtL9wYtYy+8EK3Y41qh3mpwPU0ycTOgjdY9ErwXCc8QyrQp82bdL0Xkm9yA==",
+      "dev": true,
+      "engines": {
+        "node": ">=10"
+      }
+    },
+    "node_modules/lint-staged": {
+      "version": "12.1.2",
+      "resolved": "https://registry.npmjs.org/lint-staged/-/lint-staged-12.1.2.tgz",
+      "integrity": "sha512-bSMcQVqMW98HLLLR2c2tZ+vnDCnx4fd+0QJBQgN/4XkdspGRPc8DGp7UuOEBe1ApCfJ+wXXumYnJmU+wDo7j9A==",
+      "dev": true,
+      "dependencies": {
+        "cli-truncate": "^3.1.0",
+        "colorette": "^2.0.16",
+        "commander": "^8.3.0",
+        "debug": "^4.3.2",
+        "enquirer": "^2.3.6",
+        "execa": "^5.1.1",
+        "lilconfig": "2.0.4",
+        "listr2": "^3.13.3",
+        "micromatch": "^4.0.4",
+        "normalize-path": "^3.0.0",
+        "object-inspect": "^1.11.0",
+        "string-argv": "^0.3.1",
+        "supports-color": "^9.0.2",
+        "yaml": "^1.10.2"
+      },
+      "bin": {
+        "lint-staged": "bin/lint-staged.js"
+      },
+      "engines": {
+        "node": "^12.20.0 || ^14.13.1 || >=16.0.0"
+      },
+      "funding": {
+        "url": "https://opencollective.com/lint-staged"
+      }
+    },
+    "node_modules/lint-staged/node_modules/commander": {
+      "version": "8.3.0",
+      "resolved": "https://registry.npmjs.org/commander/-/commander-8.3.0.tgz",
+      "integrity": "sha512-OkTL9umf+He2DZkUq8f8J9of7yL6RJKI24dVITBmNfZBmri9zYZQrKkuXiKhyfPSu8tUhnVBB1iKXevvnlR4Ww==",
+      "dev": true,
+      "engines": {
+        "node": ">= 12"
+      }
+    },
+    "node_modules/lint-staged/node_modules/supports-color": {
+      "version": "9.2.1",
+      "resolved": "https://registry.npmjs.org/supports-color/-/supports-color-9.2.1.tgz",
+      "integrity": "sha512-Obv7ycoCTG51N7y175StI9BlAXrmgZrFhZOb0/PyjHBher/NmsdBgbbQ1Inhq+gIhz6+7Gb+jWF2Vqi7Mf1xnQ==",
+      "dev": true,
+      "engines": {
+        "node": ">=12"
+      },
+      "funding": {
+        "url": "https://github.com/chalk/supports-color?sponsor=1"
+      }
+    },
+    "node_modules/listr2": {
+      "version": "3.13.5",
+      "resolved": "https://registry.npmjs.org/listr2/-/listr2-3.13.5.tgz",
+      "integrity": "sha512-3n8heFQDSk+NcwBn3CgxEibZGaRzx+pC64n3YjpMD1qguV4nWus3Al+Oo3KooqFKTQEJ1v7MmnbnyyNspgx3NA==",
+      "dev": true,
+      "dependencies": {
+        "cli-truncate": "^2.1.0",
+        "colorette": "^2.0.16",
+        "log-update": "^4.0.0",
+        "p-map": "^4.0.0",
+        "rfdc": "^1.3.0",
+        "rxjs": "^7.4.0",
+        "through": "^2.3.8",
+        "wrap-ansi": "^7.0.0"
+      },
+      "engines": {
+        "node": ">=10.0.0"
+      },
+      "peerDependencies": {
+        "enquirer": ">= 2.3.0 < 3"
+      },
+      "peerDependenciesMeta": {
+        "enquirer": {
+          "optional": true
+        }
+      }
+    },
+    "node_modules/listr2/node_modules/cli-truncate": {
+      "version": "2.1.0",
+      "resolved": "https://registry.npmjs.org/cli-truncate/-/cli-truncate-2.1.0.tgz",
+      "integrity": "sha512-n8fOixwDD6b/ObinzTrp1ZKFzbgvKZvuz/TvejnLn1aQfC6r52XEx85FmuC+3HI+JM7coBRXUvNqEU2PHVrHpg==",
+      "dev": true,
+      "dependencies": {
+        "slice-ansi": "^3.0.0",
+        "string-width": "^4.2.0"
+      },
+      "engines": {
+        "node": ">=8"
+      },
+      "funding": {
+        "url": "https://github.com/sponsors/sindresorhus"
+      }
+    },
+    "node_modules/listr2/node_modules/emoji-regex": {
+      "version": "8.0.0",
+      "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-8.0.0.tgz",
+      "integrity": "sha512-MSjYzcWNOA0ewAHpz0MxpYFvwg6yjy1NG3xteoqz644VCo/RPgnr1/GGt+ic3iJTzQ8Eu3TdM14SawnVUmGE6A==",
+      "dev": true
+    },
+    "node_modules/listr2/node_modules/is-fullwidth-code-point": {
+      "version": "3.0.0",
+      "resolved": "https://registry.npmjs.org/is-fullwidth-code-point/-/is-fullwidth-code-point-3.0.0.tgz",
+      "integrity": "sha512-zymm5+u+sCsSWyD9qNaejV3DFvhCKclKdizYaJUuHA83RLjb7nSuGnddCHGv0hk+KY7BMAlsWeK4Ueg6EV6XQg==",
+      "dev": true,
+      "engines": {
+        "node": ">=8"
+      }
+    },
+    "node_modules/listr2/node_modules/slice-ansi": {
+      "version": "3.0.0",
+      "resolved": "https://registry.npmjs.org/slice-ansi/-/slice-ansi-3.0.0.tgz",
+      "integrity": "sha512-pSyv7bSTC7ig9Dcgbw9AuRNUb5k5V6oDudjZoMBSr13qpLBG7tB+zgCkARjq7xIUgdz5P1Qe8u+rSGdouOOIyQ==",
+      "dev": true,
+      "dependencies": {
+        "ansi-styles": "^4.0.0",
+        "astral-regex": "^2.0.0",
+        "is-fullwidth-code-point": "^3.0.0"
+      },
+      "engines": {
+        "node": ">=8"
+      }
+    },
+    "node_modules/listr2/node_modules/string-width": {
+      "version": "4.2.3",
+      "resolved": "https://registry.npmjs.org/string-width/-/string-width-4.2.3.tgz",
+      "integrity": "sha512-wKyQRQpjJ0sIp62ErSZdGsjMJWsap5oRNihHhu6G7JVO/9jIB6UyevL+tXuOqrng8j/cxKTWyWUwvSTriiZz/g==",
+      "dev": true,
+      "dependencies": {
+        "emoji-regex": "^8.0.0",
+        "is-fullwidth-code-point": "^3.0.0",
+        "strip-ansi": "^6.0.1"
+      },
+      "engines": {
+        "node": ">=8"
+      }
+    },
     "node_modules/loader-runner": {
       "version": "2.4.0",
       "resolved": "https://registry.npmjs.org/loader-runner/-/loader-runner-2.4.0.tgz",
@@ -5123,6 +5745,84 @@
       "resolved": "https://registry.npmjs.org/lodash.isequal/-/lodash.isequal-4.5.0.tgz",
       "integrity": "sha1-QVxEePK8wwEgwizhDtMib30+GOA="
     },
+    "node_modules/log-update": {
+      "version": "4.0.0",
+      "resolved": "https://registry.npmjs.org/log-update/-/log-update-4.0.0.tgz",
+      "integrity": "sha512-9fkkDevMefjg0mmzWFBW8YkFP91OrizzkW3diF7CpG+S2EYdy4+TVfGwz1zeF8x7hCx1ovSPTOE9Ngib74qqUg==",
+      "dev": true,
+      "dependencies": {
+        "ansi-escapes": "^4.3.0",
+        "cli-cursor": "^3.1.0",
+        "slice-ansi": "^4.0.0",
+        "wrap-ansi": "^6.2.0"
+      },
+      "engines": {
+        "node": ">=10"
+      },
+      "funding": {
+        "url": "https://github.com/sponsors/sindresorhus"
+      }
+    },
+    "node_modules/log-update/node_modules/emoji-regex": {
+      "version": "8.0.0",
+      "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-8.0.0.tgz",
+      "integrity": "sha512-MSjYzcWNOA0ewAHpz0MxpYFvwg6yjy1NG3xteoqz644VCo/RPgnr1/GGt+ic3iJTzQ8Eu3TdM14SawnVUmGE6A==",
+      "dev": true
+    },
+    "node_modules/log-update/node_modules/is-fullwidth-code-point": {
+      "version": "3.0.0",
+      "resolved": "https://registry.npmjs.org/is-fullwidth-code-point/-/is-fullwidth-code-point-3.0.0.tgz",
+      "integrity": "sha512-zymm5+u+sCsSWyD9qNaejV3DFvhCKclKdizYaJUuHA83RLjb7nSuGnddCHGv0hk+KY7BMAlsWeK4Ueg6EV6XQg==",
+      "dev": true,
+      "engines": {
+        "node": ">=8"
+      }
+    },
+    "node_modules/log-update/node_modules/slice-ansi": {
+      "version": "4.0.0",
+      "resolved": "https://registry.npmjs.org/slice-ansi/-/slice-ansi-4.0.0.tgz",
+      "integrity": "sha512-qMCMfhY040cVHT43K9BFygqYbUPFZKHOg7K73mtTWJRb8pyP3fzf4Ixd5SzdEJQ6MRUg/WBnOLxghZtKKurENQ==",
+      "dev": true,
+      "dependencies": {
+        "ansi-styles": "^4.0.0",
+        "astral-regex": "^2.0.0",
+        "is-fullwidth-code-point": "^3.0.0"
+      },
+      "engines": {
+        "node": ">=10"
+      },
+      "funding": {
+        "url": "https://github.com/chalk/slice-ansi?sponsor=1"
+      }
+    },
+    "node_modules/log-update/node_modules/string-width": {
+      "version": "4.2.3",
+      "resolved": "https://registry.npmjs.org/string-width/-/string-width-4.2.3.tgz",
+      "integrity": "sha512-wKyQRQpjJ0sIp62ErSZdGsjMJWsap5oRNihHhu6G7JVO/9jIB6UyevL+tXuOqrng8j/cxKTWyWUwvSTriiZz/g==",
+      "dev": true,
+      "dependencies": {
+        "emoji-regex": "^8.0.0",
+        "is-fullwidth-code-point": "^3.0.0",
+        "strip-ansi": "^6.0.1"
+      },
+      "engines": {
+        "node": ">=8"
+      }
+    },
+    "node_modules/log-update/node_modules/wrap-ansi": {
+      "version": "6.2.0",
+      "resolved": "https://registry.npmjs.org/wrap-ansi/-/wrap-ansi-6.2.0.tgz",
+      "integrity": "sha512-r6lPcBGxZXlIcymEu7InxDMhdW0KDxpLgoFLcguasxCaJ/SOIZwINatK9KY/tf+ZrlywOKU0UDj3ATXUBfxJXA==",
+      "dev": true,
+      "dependencies": {
+        "ansi-styles": "^4.0.0",
+        "string-width": "^4.1.0",
+        "strip-ansi": "^6.0.0"
+      },
+      "engines": {
+        "node": ">=8"
+      }
+    },
     "node_modules/log4js": {
       "version": "6.3.0",
       "resolved": "https://registry.npmjs.org/log4js/-/log4js-6.3.0.tgz",
@@ -5204,8 +5904,7 @@
       "version": "1.3.6",
       "resolved": "https://registry.npmjs.org/make-error/-/make-error-1.3.6.tgz",
       "integrity": "sha512-s8UhlNe7vPKomQhC1qFelMokr/Sc3AgNbso3n74mVPA5LTZwkB9NlXf4XPamLxJE8h0gh73rM94xvwRT2CVInw==",
-      "dev": true,
-      "peer": true
+      "dev": true
     },
     "node_modules/map-cache": {
       "version": "0.2.2",
@@ -5285,6 +5984,12 @@
         "node": ">=4.3.0 <5.0.0 || >=5.10"
       }
     },
+    "node_modules/merge-stream": {
+      "version": "2.0.0",
+      "resolved": "https://registry.npmjs.org/merge-stream/-/merge-stream-2.0.0.tgz",
+      "integrity": "sha512-abv/qOcuPfk3URPfDzmZU1LKmuw8kT+0nIHvKrKgFrwifol/doWcdA4ZqsWQ8ENrFKkd67Mfpo/LovbIUsbt3w==",
+      "dev": true
+    },
     "node_modules/micromatch": {
       "version": "4.0.4",
       "resolved": "https://registry.npmjs.org/micromatch/-/micromatch-4.0.4.tgz",
@@ -5318,9 +6023,9 @@
       "dev": true
     },
     "node_modules/mime": {
-      "version": "2.5.2",
-      "resolved": "https://registry.npmjs.org/mime/-/mime-2.5.2.tgz",
-      "integrity": "sha512-tqkh47FzKeCPD2PUiPB6pkbMzsCasjxAfC62/Wap5qrUWcb+sFasXUC5I3gYM5iBM8v/Qpn4UK0x+j0iHyFPDg==",
+      "version": "2.6.0",
+      "resolved": "https://registry.npmjs.org/mime/-/mime-2.6.0.tgz",
+      "integrity": "sha512-USPkMeET31rOMiarsBNIHZKLGgvKc/LrjofAnBlOttf5ajRvqiRA8QsenbcooctK6d6Ts6aqZXBA+XbkKthiQg==",
       "dev": true,
       "bin": {
         "mime": "cli.js"
@@ -5330,19 +6035,19 @@
       }
     },
     "node_modules/mime-db": {
-      "version": "1.49.0",
-      "resolved": "https://registry.npmjs.org/mime-db/-/mime-db-1.49.0.tgz",
-      "integrity": "sha512-CIc8j9URtOVApSFCQIF+VBkX1RwXp/oMMOrqdyXSBXq5RWNEsRfyj1kiRnQgmNXmHxPoFIxOroKA3zcU9P+nAA==",
+      "version": "1.51.0",
+      "resolved": "https://registry.npmjs.org/mime-db/-/mime-db-1.51.0.tgz",
+      "integrity": "sha512-5y8A56jg7XVQx2mbv1lu49NR4dokRnhZYTtL+KGfaa27uq4pSTXkwQkFJl4pkRMyNFz/EtYDSkiiEHx3F7UN6g==",
       "engines": {
         "node": ">= 0.6"
       }
     },
     "node_modules/mime-types": {
-      "version": "2.1.32",
-      "resolved": "https://registry.npmjs.org/mime-types/-/mime-types-2.1.32.tgz",
-      "integrity": "sha512-hJGaVS4G4c9TSMYh2n6SQAGrC4RnfU+daP8G7cSCmaqNjiOoUY0VHCMS42pxnQmVF1GWwFhbHWn3RIxCqTmZ9A==",
+      "version": "2.1.34",
+      "resolved": "https://registry.npmjs.org/mime-types/-/mime-types-2.1.34.tgz",
+      "integrity": "sha512-6cP692WwGIs9XXdOO4++N+7qjqv0rqxxVvJ3VHPh/Sc9mVZcQP+ZGhkKiTvWMQRr2tbHkJP/Yn7Y0npb3ZBs4A==",
       "dependencies": {
-        "mime-db": "1.49.0"
+        "mime-db": "1.51.0"
       },
       "engines": {
         "node": ">= 0.6"
@@ -5639,9 +6344,9 @@
       "integrity": "sha512-mmcei9JghVNDYydghQmeDX8KoAm0FAiYyIcUt/N4nhyAipB17pllZQDOJD2fotxABnt4Mdz+dKTO7eftLg4d0A=="
     },
     "node_modules/node-fetch": {
-      "version": "2.6.5",
-      "resolved": "https://registry.npmjs.org/node-fetch/-/node-fetch-2.6.5.tgz",
-      "integrity": "sha512-mmlIVHJEu5rnIxgEgez6b9GgWXbkZj5YZ7fx+2r94a2E+Uirsp6HsPTPlomfdHtpt/B0cdKviwkoaM6pyvUOpQ==",
+      "version": "2.6.6",
+      "resolved": "https://registry.npmjs.org/node-fetch/-/node-fetch-2.6.6.tgz",
+      "integrity": "sha512-Z8/6vRlTUChSdIgMa51jxQ4lrw/Jy5SOW10ObaA47/RElsAN2c5Pn8bTgFGWn/ibwzXTE8qwr1Yzx28vsecXEA==",
       "dependencies": {
         "whatwg-url": "^5.0.0"
       },
@@ -5714,21 +6419,21 @@
       "dev": true
     },
     "node_modules/nodemon": {
-      "version": "2.0.13",
-      "resolved": "https://registry.npmjs.org/nodemon/-/nodemon-2.0.13.tgz",
-      "integrity": "sha512-UMXMpsZsv1UXUttCn6gv8eQPhn6DR4BW+txnL3IN5IHqrCwcrT/yWHfL35UsClGXknTH79r5xbu+6J1zNHuSyA==",
+      "version": "2.0.15",
+      "resolved": "https://registry.npmjs.org/nodemon/-/nodemon-2.0.15.tgz",
+      "integrity": "sha512-gdHMNx47Gw7b3kWxJV64NI+Q5nfl0y5DgDbiVtShiwa7Z0IZ07Ll4RLFo6AjrhzMtoEZn5PDE3/c2AbVsiCkpA==",
       "dev": true,
       "hasInstallScript": true,
       "dependencies": {
-        "chokidar": "^3.2.2",
-        "debug": "^3.2.6",
+        "chokidar": "^3.5.2",
+        "debug": "^3.2.7",
         "ignore-by-default": "^1.0.1",
         "minimatch": "^3.0.4",
-        "pstree.remy": "^1.1.7",
+        "pstree.remy": "^1.1.8",
         "semver": "^5.7.1",
         "supports-color": "^5.5.0",
         "touch": "^3.1.0",
-        "undefsafe": "^2.0.3",
+        "undefsafe": "^2.0.5",
         "update-notifier": "^5.1.0"
       },
       "bin": {
@@ -5822,6 +6527,18 @@
         "node": ">=4"
       }
     },
+    "node_modules/npm-run-path": {
+      "version": "4.0.1",
+      "resolved": "https://registry.npmjs.org/npm-run-path/-/npm-run-path-4.0.1.tgz",
+      "integrity": "sha512-S48WzZW777zhNIrn7gxOlISNAqi9ZC/uQFnRdbeIHhZhCA6UqpkOT8T1G7BvfdgP4Er8gF4sUbaS0i7QvIfCWw==",
+      "dev": true,
+      "dependencies": {
+        "path-key": "^3.0.0"
+      },
+      "engines": {
+        "node": ">=8"
+      }
+    },
     "node_modules/npmlog": {
       "version": "4.1.2",
       "resolved": "https://registry.npmjs.org/npmlog/-/npmlog-4.1.2.tgz",
@@ -5881,6 +6598,15 @@
         "node": ">=0.10.0"
       }
     },
+    "node_modules/object-inspect": {
+      "version": "1.11.1",
+      "resolved": "https://registry.npmjs.org/object-inspect/-/object-inspect-1.11.1.tgz",
+      "integrity": "sha512-If7BjFlpkzzBeV1cqgT3OSWT3azyoxDGajR+iGnFBfVV2EWyDyWaZZW2ERDjUaY2QM8i5jI3Sj7mhsM4DDAqWA==",
+      "dev": true,
+      "funding": {
+        "url": "https://github.com/sponsors/ljharb"
+      }
+    },
     "node_modules/object-keys": {
       "version": "1.1.1",
       "resolved": "https://registry.npmjs.org/object-keys/-/object-keys-1.1.1.tgz",
@@ -6020,6 +6746,21 @@
         "node": ">=6"
       }
     },
+    "node_modules/p-map": {
+      "version": "4.0.0",
+      "resolved": "https://registry.npmjs.org/p-map/-/p-map-4.0.0.tgz",
+      "integrity": "sha512-/bjOqmgETBYB5BoEeGVea8dmvHb2m9GLy1E9W43yeyfP6QQCZGFNa+XRceJEuDB6zqr+gKpIAmlLebMpykw/MQ==",
+      "dev": true,
+      "dependencies": {
+        "aggregate-error": "^3.0.0"
+      },
+      "engines": {
+        "node": ">=10"
+      },
+      "funding": {
+        "url": "https://github.com/sponsors/sindresorhus"
+      }
+    },
     "node_modules/p-try": {
       "version": "2.2.0",
       "resolved": "https://registry.npmjs.org/p-try/-/p-try-2.2.0.tgz",
@@ -6141,6 +6882,15 @@
         "node": ">=0.10.0"
       }
     },
+    "node_modules/path-key": {
+      "version": "3.1.1",
+      "resolved": "https://registry.npmjs.org/path-key/-/path-key-3.1.1.tgz",
+      "integrity": "sha512-ojmeN0qd+y0jszEtoY48r0Peq5dwMEkIlCOu6Q5f41lfkswXuKtYrhgoTpLnyIcHm24Uhqx+5Tqm2InSwLhE6Q==",
+      "dev": true,
+      "engines": {
+        "node": ">=8"
+      }
+    },
     "node_modules/path-parse": {
       "version": "1.0.7",
       "resolved": "https://registry.npmjs.org/path-parse/-/path-parse-1.0.7.tgz",
@@ -6275,6 +7025,18 @@
         "node": ">=4"
       }
     },
+    "node_modules/prettier": {
+      "version": "2.5.1",
+      "resolved": "https://registry.npmjs.org/prettier/-/prettier-2.5.1.tgz",
+      "integrity": "sha512-vBZcPRUR5MZJwoyi3ZoyQlc1rXeEck8KgeC9AwwOn+exuxLxq5toTRDTSaVrXHxelDMHy9zlicw8u66yxoSUFg==",
+      "dev": true,
+      "bin": {
+        "prettier": "bin-prettier.js"
+      },
+      "engines": {
+        "node": ">=10.13.0"
+      }
+    },
     "node_modules/process": {
       "version": "0.11.10",
       "resolved": "https://registry.npmjs.org/process/-/process-0.11.10.tgz",
@@ -6406,12 +7168,15 @@
       }
     },
     "node_modules/qs": {
-      "version": "6.7.0",
-      "resolved": "https://registry.npmjs.org/qs/-/qs-6.7.0.tgz",
-      "integrity": "sha512-VCdBRNFTX1fyE7Nb6FYoURo/SPe62QCaAyzJvUjwRaIsc+NePBEniHlvxFmmX56+HZphIGtV0XeCirBtpDrTyQ==",
+      "version": "6.9.6",
+      "resolved": "https://registry.npmjs.org/qs/-/qs-6.9.6.tgz",
+      "integrity": "sha512-TIRk4aqYLNoJUbd+g2lEdz5kLWIuTMRagAXxl78Q0RiVjAOugHmeKNGdd3cwo/ktpf9aL9epCfFqWDEKysUlLQ==",
       "dev": true,
       "engines": {
         "node": ">=0.6"
+      },
+      "funding": {
+        "url": "https://github.com/sponsors/ljharb"
       }
     },
     "node_modules/querystring": {
@@ -6467,13 +7232,13 @@
       }
     },
     "node_modules/raw-body": {
-      "version": "2.4.0",
-      "resolved": "https://registry.npmjs.org/raw-body/-/raw-body-2.4.0.tgz",
-      "integrity": "sha512-4Oz8DUIwdvoa5qMJelxipzi/iJIi40O5cGV1wNYp5hvZP8ZN0T+jiNkL0QepXs+EsQ9XJ8ipEDoiH70ySUJP3Q==",
+      "version": "2.4.2",
+      "resolved": "https://registry.npmjs.org/raw-body/-/raw-body-2.4.2.tgz",
+      "integrity": "sha512-RPMAFUJP19WIet/99ngh6Iv8fzAbqum4Li7AD6DtGaW2RpMB/11xDoalPiJMTbu6I3hkbMVkATvZrqb9EEqeeQ==",
       "dev": true,
       "dependencies": {
-        "bytes": "3.1.0",
-        "http-errors": "1.7.2",
+        "bytes": "3.1.1",
+        "http-errors": "1.8.1",
         "iconv-lite": "0.4.24",
         "unpipe": "1.0.0"
       },
@@ -6756,14 +7521,11 @@
       }
     },
     "node_modules/rxjs": {
-      "version": "6.6.7",
-      "resolved": "https://registry.npmjs.org/rxjs/-/rxjs-6.6.7.tgz",
-      "integrity": "sha512-hTdwr+7yYNIT5n4AMYp85KA6yw2Va0FLa3Rguvbpa4W3I5xynaBZo41cM3XM+4Q6fRMj3sBYIR1VAmZMXYJvRQ==",
+      "version": "7.4.0",
+      "resolved": "https://registry.npmjs.org/rxjs/-/rxjs-7.4.0.tgz",
+      "integrity": "sha512-7SQDi7xeTMCJpqViXh8gL/lebcwlp3d831F05+9B44A4B0WfsEwUQHR64gsH1kvJ+Ep/J9K2+n1hVl1CsGN23w==",
       "dependencies": {
-        "tslib": "^1.9.0"
-      },
-      "engines": {
-        "npm": ">=2.0.0"
+        "tslib": "~2.1.0"
       }
     },
     "node_modules/safe-buffer": {
@@ -6914,9 +7676,9 @@
       "dev": true
     },
     "node_modules/setprototypeof": {
-      "version": "1.1.1",
-      "resolved": "https://registry.npmjs.org/setprototypeof/-/setprototypeof-1.1.1.tgz",
-      "integrity": "sha512-JvdAWfbXeIGaZ9cILp38HntZSFSo3mWg6xGcJJsd+d4aRMOqauag1C63dJfDw7OaMYwEbHMOxEZ1lqVRYP2OAw==",
+      "version": "1.2.0",
+      "resolved": "https://registry.npmjs.org/setprototypeof/-/setprototypeof-1.2.0.tgz",
+      "integrity": "sha512-E5LDX7Wrp85Kil5bhZv46j8jOeboKq5JMmYM3gVGdGH8xFpPWXUMsNrlODCrkoxMEeNi/XZIwuRvY4XNwYMJpw==",
       "dev": true
     },
     "node_modules/sha.js": {
@@ -6944,10 +7706,31 @@
         "node": ">=8"
       }
     },
+    "node_modules/shebang-command": {
+      "version": "2.0.0",
+      "resolved": "https://registry.npmjs.org/shebang-command/-/shebang-command-2.0.0.tgz",
+      "integrity": "sha512-kHxr2zZpYtdmrN1qDjrrX/Z1rR1kG8Dx+gkpK1G4eXmvXswmcE1hTWBWYUzlraYw1/yZp6YuDY77YtvbN0dmDA==",
+      "dev": true,
+      "dependencies": {
+        "shebang-regex": "^3.0.0"
+      },
+      "engines": {
+        "node": ">=8"
+      }
+    },
+    "node_modules/shebang-regex": {
+      "version": "3.0.0",
+      "resolved": "https://registry.npmjs.org/shebang-regex/-/shebang-regex-3.0.0.tgz",
+      "integrity": "sha512-7++dFhtcx3353uBaq8DDR4NuxBetBzC7ZQOhmTQInHEd6bSrXdiEyzCvG07Z44UYdLShWUyXt5M/yhz8ekcb1A==",
+      "dev": true,
+      "engines": {
+        "node": ">=8"
+      }
+    },
     "node_modules/signal-exit": {
-      "version": "3.0.5",
-      "resolved": "https://registry.npmjs.org/signal-exit/-/signal-exit-3.0.5.tgz",
-      "integrity": "sha512-KWcOiKeQj6ZyXx7zq4YxSMgHRlod4czeBQZrPb8OKcohcqAXShm7E20kEMle9WBt26hFcAf0qLOcp5zmY7kOqQ=="
+      "version": "3.0.6",
+      "resolved": "https://registry.npmjs.org/signal-exit/-/signal-exit-3.0.6.tgz",
+      "integrity": "sha512-sDl4qMFpijcGw22U5w63KmD3cZJfBuFlVNbVMKje2keoKML7X2UzWbc4XrmEbDwg0NXJc3yv4/ox7b+JWb57kQ=="
     },
     "node_modules/simple-concat": {
       "version": "1.0.1",
@@ -7000,6 +7783,34 @@
         "url": "https://github.com/sponsors/sindresorhus"
       }
     },
+    "node_modules/slice-ansi": {
+      "version": "5.0.0",
+      "resolved": "https://registry.npmjs.org/slice-ansi/-/slice-ansi-5.0.0.tgz",
+      "integrity": "sha512-FC+lgizVPfie0kkhqUScwRu1O/lF6NOgJmlCgK+/LYxDCTk8sGelYaHDhFcDN+Sn3Cv+3VSa4Byeo+IMCzpMgQ==",
+      "dev": true,
+      "dependencies": {
+        "ansi-styles": "^6.0.0",
+        "is-fullwidth-code-point": "^4.0.0"
+      },
+      "engines": {
+        "node": ">=12"
+      },
+      "funding": {
+        "url": "https://github.com/chalk/slice-ansi?sponsor=1"
+      }
+    },
+    "node_modules/slice-ansi/node_modules/ansi-styles": {
+      "version": "6.1.0",
+      "resolved": "https://registry.npmjs.org/ansi-styles/-/ansi-styles-6.1.0.tgz",
+      "integrity": "sha512-VbqNsoz55SYGczauuup0MFUyXNQviSpFTj1RQtFzmQLk18qbVSpTFFGMT293rmDaQuKCT6InmbuEyUne4mTuxQ==",
+      "dev": true,
+      "engines": {
+        "node": ">=12"
+      },
+      "funding": {
+        "url": "https://github.com/chalk/ansi-styles?sponsor=1"
+      }
+    },
     "node_modules/snapdragon": {
       "version": "0.8.2",
       "resolved": "https://registry.npmjs.org/snapdragon/-/snapdragon-0.8.2.tgz",
@@ -7123,29 +7934,26 @@
       "dev": true
     },
     "node_modules/socket.io": {
-      "version": "3.1.2",
-      "resolved": "https://registry.npmjs.org/socket.io/-/socket.io-3.1.2.tgz",
-      "integrity": "sha512-JubKZnTQ4Z8G4IZWtaAZSiRP3I/inpy8c/Bsx2jrwGrTbKeVU5xd6qkKMHpChYeM3dWZSO0QACiGK+obhBNwYw==",
+      "version": "4.4.0",
+      "resolved": "https://registry.npmjs.org/socket.io/-/socket.io-4.4.0.tgz",
+      "integrity": "sha512-bnpJxswR9ov0Bw6ilhCvO38/1WPtE3eA2dtxi2Iq4/sFebiDJQzgKNYA7AuVVdGW09nrESXd90NbZqtDd9dzRQ==",
       "dev": true,
       "dependencies": {
-        "@types/cookie": "^0.4.0",
-        "@types/cors": "^2.8.8",
-        "@types/node": ">=10.0.0",
         "accepts": "~1.3.4",
         "base64id": "~2.0.0",
-        "debug": "~4.3.1",
-        "engine.io": "~4.1.0",
-        "socket.io-adapter": "~2.1.0",
-        "socket.io-parser": "~4.0.3"
+        "debug": "~4.3.2",
+        "engine.io": "~6.1.0",
+        "socket.io-adapter": "~2.3.3",
+        "socket.io-parser": "~4.0.4"
       },
       "engines": {
         "node": ">=10.0.0"
       }
     },
     "node_modules/socket.io-adapter": {
-      "version": "2.1.0",
-      "resolved": "https://registry.npmjs.org/socket.io-adapter/-/socket.io-adapter-2.1.0.tgz",
-      "integrity": "sha512-+vDov/aTsLjViYTwS9fPy5pEtTkrbEKsw2M+oVSoFGw6OD1IpvlV1VPhUzNbofCQ8oyMbdYJqDtGdmHQK6TdPg==",
+      "version": "2.3.3",
+      "resolved": "https://registry.npmjs.org/socket.io-adapter/-/socket.io-adapter-2.3.3.tgz",
+      "integrity": "sha512-Qd/iwn3VskrpNO60BeRyCyr8ZWw9CPZyitW4AQwmRZ8zCiyDiL+znRnWX6tDHXnWn1sJrM1+b6Mn6wEDJJ4aYQ==",
       "dev": true
     },
     "node_modules/socket.io-parser": {
@@ -7191,9 +7999,9 @@
       }
     },
     "node_modules/source-map-support": {
-      "version": "0.5.20",
-      "resolved": "https://registry.npmjs.org/source-map-support/-/source-map-support-0.5.20.tgz",
-      "integrity": "sha512-n1lZZ8Ve4ksRqizaBQgxXDgKwttHDhyfQjA6YZZn8+AroHbsIz+JjwxQDxbp+7y5OYCI8t1Yk7etjD9CRd2hIw==",
+      "version": "0.5.21",
+      "resolved": "https://registry.npmjs.org/source-map-support/-/source-map-support-0.5.21.tgz",
+      "integrity": "sha512-uBHU3L3czsIyYXKX88fdrGovxdSCoTGDRZ6SYXtSRxLZUzHg5P/66Ht6uoUlHu9EZod+inXhKo3qQgwXUT/y1w==",
       "dev": true,
       "dependencies": {
         "buffer-from": "^1.0.0",
@@ -7379,17 +8187,57 @@
         "safe-buffer": "~5.1.0"
       }
     },
+    "node_modules/string-argv": {
+      "version": "0.3.1",
+      "resolved": "https://registry.npmjs.org/string-argv/-/string-argv-0.3.1.tgz",
+      "integrity": "sha512-a1uQGz7IyVy9YwhqjZIZu1c8JO8dNIe20xBmSS6qu9kv++k3JGzCVmprbNN5Kn+BgzD5E7YYwg1CcjuJMRNsvg==",
+      "dev": true,
+      "engines": {
+        "node": ">=0.6.19"
+      }
+    },
     "node_modules/string-width": {
-      "version": "4.2.3",
-      "resolved": "https://registry.npmjs.org/string-width/-/string-width-4.2.3.tgz",
-      "integrity": "sha512-wKyQRQpjJ0sIp62ErSZdGsjMJWsap5oRNihHhu6G7JVO/9jIB6UyevL+tXuOqrng8j/cxKTWyWUwvSTriiZz/g==",
+      "version": "5.0.1",
+      "resolved": "https://registry.npmjs.org/string-width/-/string-width-5.0.1.tgz",
+      "integrity": "sha512-5ohWO/M4//8lErlUUtrFy3b11GtNOuMOU0ysKCDXFcfXuuvUXu95akgj/i8ofmaGdN0hCqyl6uu9i8dS/mQp5g==",
+      "dev": true,
       "dependencies": {
-        "emoji-regex": "^8.0.0",
-        "is-fullwidth-code-point": "^3.0.0",
-        "strip-ansi": "^6.0.1"
+        "emoji-regex": "^9.2.2",
+        "is-fullwidth-code-point": "^4.0.0",
+        "strip-ansi": "^7.0.1"
       },
       "engines": {
-        "node": ">=8"
+        "node": ">=12"
+      },
+      "funding": {
+        "url": "https://github.com/sponsors/sindresorhus"
+      }
+    },
+    "node_modules/string-width/node_modules/ansi-regex": {
+      "version": "6.0.1",
+      "resolved": "https://registry.npmjs.org/ansi-regex/-/ansi-regex-6.0.1.tgz",
+      "integrity": "sha512-n5M855fKb2SsfMIiFFoVrABHJC8QtHwVx+mHWP3QcEqBHYienj5dHSgjbxtC0WEZXYt4wcD6zrQElDPhFuZgfA==",
+      "dev": true,
+      "engines": {
+        "node": ">=12"
+      },
+      "funding": {
+        "url": "https://github.com/chalk/ansi-regex?sponsor=1"
+      }
+    },
+    "node_modules/string-width/node_modules/strip-ansi": {
+      "version": "7.0.1",
+      "resolved": "https://registry.npmjs.org/strip-ansi/-/strip-ansi-7.0.1.tgz",
+      "integrity": "sha512-cXNxvT8dFNRVfhVME3JAe98mkXDYN2O1l7jmcwMnOslDeESg1rF/OZMtK0nRAhiari1unG5cD4jG3rapUAkLbw==",
+      "dev": true,
+      "dependencies": {
+        "ansi-regex": "^6.0.1"
+      },
+      "engines": {
+        "node": ">=12"
+      },
+      "funding": {
+        "url": "https://github.com/chalk/strip-ansi?sponsor=1"
       }
     },
     "node_modules/strip-ansi": {
@@ -7400,7 +8248,25 @@
         "ansi-regex": "^5.0.1"
       },
       "engines": {
-        "node": ">=8"
+        "node": ">=8"
+      }
+    },
+    "node_modules/strip-bom": {
+      "version": "3.0.0",
+      "resolved": "https://registry.npmjs.org/strip-bom/-/strip-bom-3.0.0.tgz",
+      "integrity": "sha1-IzTBjpx1n3vdVv3vfprj1YjmjtM=",
+      "dev": true,
+      "engines": {
+        "node": ">=4"
+      }
+    },
+    "node_modules/strip-final-newline": {
+      "version": "2.0.0",
+      "resolved": "https://registry.npmjs.org/strip-final-newline/-/strip-final-newline-2.0.0.tgz",
+      "integrity": "sha512-BrpvfNAE3dcvq7ll3xVumzjKjZQ5tI1sEUIKr3Uoks0XUl45St3FlatVqef9prk4jRDzhW6WZg+3bk93y6pLjA==",
+      "dev": true,
+      "engines": {
+        "node": ">=6"
       }
     },
     "node_modules/strip-json-comments": {
@@ -7642,14 +8508,15 @@
       "integrity": "sha1-wNWmOycYgArY4esPpSachN1BhF4="
     },
     "node_modules/tmp": {
-      "version": "0.0.33",
-      "resolved": "https://registry.npmjs.org/tmp/-/tmp-0.0.33.tgz",
-      "integrity": "sha512-jRCJlojKnZ3addtTOjdIqoRuPEKBvNXcGYqzO6zWZX8KfKEpnGY5jfggJQ3EjKuu8D4bJRr0y+cYJFmYbImXGw==",
+      "version": "0.2.1",
+      "resolved": "https://registry.npmjs.org/tmp/-/tmp-0.2.1.tgz",
+      "integrity": "sha512-76SUhtfqR2Ijn+xllcI5P1oyannHNHByD80W1q447gU3mp9G9PSpGdWmjUOHRDPiHYacIk66W7ubDTuPF3BEtQ==",
+      "dev": true,
       "dependencies": {
-        "os-tmpdir": "~1.0.2"
+        "rimraf": "^3.0.0"
       },
       "engines": {
-        "node": ">=0.6.0"
+        "node": ">=8.17.0"
       }
     },
     "node_modules/to-arraybuffer": {
@@ -7794,9 +8661,9 @@
       }
     },
     "node_modules/toidentifier": {
-      "version": "1.0.0",
-      "resolved": "https://registry.npmjs.org/toidentifier/-/toidentifier-1.0.0.tgz",
-      "integrity": "sha512-yaOH/Pk/VEhBWWTlhI+qXxDFXlejDGcQipMlyxda9nthulaxLZUNcUqFxokp0vcYnvteJln5FNQDRrxj3YcbVw==",
+      "version": "1.0.1",
+      "resolved": "https://registry.npmjs.org/toidentifier/-/toidentifier-1.0.1.tgz",
+      "integrity": "sha512-o5sSPKEkg/DIQNmH43V0/uerLrpzVedkUh8tGNvaeXpfpuwjKenlSox/2O/BTlZUtEe+JG7s5YhEz608PlAHRA==",
       "dev": true,
       "engines": {
         "node": ">=0.6"
@@ -7885,9 +8752,9 @@
       }
     },
     "node_modules/ts-loader/node_modules/loader-utils": {
-      "version": "2.0.0",
-      "resolved": "https://registry.npmjs.org/loader-utils/-/loader-utils-2.0.0.tgz",
-      "integrity": "sha512-rP4F0h2RaWSvPEkD7BLDFQnvSf+nK+wr3ESUjNTyAGobqrijmW92zc+SO6d4p4B1wh7+B/Jg1mkQe5NYUEHtHQ==",
+      "version": "2.0.2",
+      "resolved": "https://registry.npmjs.org/loader-utils/-/loader-utils-2.0.2.tgz",
+      "integrity": "sha512-TM57VeHptv569d/GKh6TAYdzKblwDNiumOdkFnejjD0XwTH87K90w3O7AiJRqdQoXygvi1VQTJTLGhJl7WqA7A==",
       "dev": true,
       "dependencies": {
         "big.js": "^5.2.2",
@@ -7932,13 +8799,12 @@
       "dev": true
     },
     "node_modules/ts-node": {
-      "version": "10.2.1",
-      "resolved": "https://registry.npmjs.org/ts-node/-/ts-node-10.2.1.tgz",
-      "integrity": "sha512-hCnyOyuGmD5wHleOQX6NIjJtYVIO8bPP8F2acWkB4W06wdlkgyvJtubO/I9NkI88hCFECbsEgoLc0VNkYmcSfw==",
+      "version": "10.4.0",
+      "resolved": "https://registry.npmjs.org/ts-node/-/ts-node-10.4.0.tgz",
+      "integrity": "sha512-g0FlPvvCXSIO1JDF6S232P5jPYqBkRL9qly81ZgAOSU7rwI0stphCgd2kLiCrU9DjQCrJMWEqcNSjQL02s6d8A==",
       "dev": true,
-      "peer": true,
       "dependencies": {
-        "@cspotcode/source-map-support": "0.6.1",
+        "@cspotcode/source-map-support": "0.7.0",
         "@tsconfig/node10": "^1.0.7",
         "@tsconfig/node12": "^1.0.7",
         "@tsconfig/node14": "^1.0.0",
@@ -7958,9 +8824,6 @@
         "ts-node-transpile-only": "dist/bin-transpile.js",
         "ts-script": "dist/bin-script-deprecated.js"
       },
-      "engines": {
-        "node": ">=12.0.0"
-      },
       "peerDependencies": {
         "@swc/core": ">=1.2.50",
         "@swc/wasm": ">=1.2.50",
@@ -7981,15 +8844,26 @@
       "resolved": "https://registry.npmjs.org/acorn-walk/-/acorn-walk-8.2.0.tgz",
       "integrity": "sha512-k+iyHEuPgSw6SbuDpGQM+06HQUa04DZ3o+F6CSzXMvvI5KMvnaEqXe+YVe555R9nn6GPt404fos4wcgpw12SDA==",
       "dev": true,
-      "peer": true,
       "engines": {
         "node": ">=0.4.0"
       }
     },
+    "node_modules/tsconfig-paths": {
+      "version": "3.12.0",
+      "resolved": "https://registry.npmjs.org/tsconfig-paths/-/tsconfig-paths-3.12.0.tgz",
+      "integrity": "sha512-e5adrnOYT6zqVnWqZu7i/BQ3BnhzvGbjEjejFXO20lKIKpwTaupkCPgEfv4GZK1IBciJUEhYs3J3p75FdaTFVg==",
+      "dev": true,
+      "dependencies": {
+        "@types/json5": "^0.0.29",
+        "json5": "^1.0.1",
+        "minimist": "^1.2.0",
+        "strip-bom": "^3.0.0"
+      }
+    },
     "node_modules/tslib": {
-      "version": "1.14.1",
-      "resolved": "https://registry.npmjs.org/tslib/-/tslib-1.14.1.tgz",
-      "integrity": "sha512-Xni35NKzjgMrwevysHTCArtLDpPvye8zV/0E4EyYn43P7/7qvQwPh9BGkHewbMulVntbigmcT7rdX3BNo9wRJg=="
+      "version": "2.1.0",
+      "resolved": "https://registry.npmjs.org/tslib/-/tslib-2.1.0.tgz",
+      "integrity": "sha512-hcVC3wYEziELGGmEEXue7D75zbwIIVUMWAVbHItGPx0ziyXxrOMQx4rQEVEV45Ut/1IotuEvwqPopzIOkDMf0A=="
     },
     "node_modules/tslint": {
       "version": "6.1.3",
@@ -8090,6 +8964,12 @@
         "node": ">=4"
       }
     },
+    "node_modules/tslint/node_modules/tslib": {
+      "version": "1.14.1",
+      "resolved": "https://registry.npmjs.org/tslib/-/tslib-1.14.1.tgz",
+      "integrity": "sha512-Xni35NKzjgMrwevysHTCArtLDpPvye8zV/0E4EyYn43P7/7qvQwPh9BGkHewbMulVntbigmcT7rdX3BNo9wRJg==",
+      "dev": true
+    },
     "node_modules/tslint/node_modules/tsutils": {
       "version": "2.29.0",
       "resolved": "https://registry.npmjs.org/tsutils/-/tsutils-2.29.0.tgz",
@@ -8109,9 +8989,9 @@
       "dev": true
     },
     "node_modules/ttypescript": {
-      "version": "1.5.12",
-      "resolved": "https://registry.npmjs.org/ttypescript/-/ttypescript-1.5.12.tgz",
-      "integrity": "sha512-1ojRyJvpnmgN9kIHmUnQPlEV1gq+VVsxVYjk/NfvMlHSmYxjK5hEvOOU2MQASrbekTUiUM7pR/nXeCc8bzvMOQ==",
+      "version": "1.5.13",
+      "resolved": "https://registry.npmjs.org/ttypescript/-/ttypescript-1.5.13.tgz",
+      "integrity": "sha512-KT/RBfGGlVJFqEI8cVvI3nMsmYcFvPSZh8bU0qX+pAwbi7/ABmYkzn7l/K8skw0xmYjVCoyaV6WLsBQxdadybQ==",
       "dev": true,
       "dependencies": {
         "resolve": ">=1.9.0"
@@ -8211,9 +9091,9 @@
       }
     },
     "node_modules/typescript": {
-      "version": "4.1.5",
-      "resolved": "https://registry.npmjs.org/typescript/-/typescript-4.1.5.tgz",
-      "integrity": "sha512-6OSu9PTIzmn9TCDiovULTnET6BgXtDYL4Gg4szY+cGsc3JP1dQL8qvE8kShTRx1NIw4Q9IBHlwODjkjWEtMUyA==",
+      "version": "4.3.5",
+      "resolved": "https://registry.npmjs.org/typescript/-/typescript-4.3.5.tgz",
+      "integrity": "sha512-DqQgihaQ9cUrskJo9kIyW/+g0Vxsk8cDtZ52a3NGh0YNTfpUSArXSohyUGnvbPazEPLu398C0UxmKSOrPumUzA==",
       "dev": true,
       "bin": {
         "tsc": "bin/tsc",
@@ -8236,9 +9116,9 @@
       }
     },
     "node_modules/ua-parser-js": {
-      "version": "0.7.28",
-      "resolved": "https://registry.npmjs.org/ua-parser-js/-/ua-parser-js-0.7.28.tgz",
-      "integrity": "sha512-6Gurc1n//gjp9eQNXjD9O3M/sMwVtN5S8Lv9bvOYBfKfDNiIIhqiyi01vMBO45u4zkDE420w/e0se7Vs+sIg+g==",
+      "version": "0.7.31",
+      "resolved": "https://registry.npmjs.org/ua-parser-js/-/ua-parser-js-0.7.31.tgz",
+      "integrity": "sha512-qLK/Xe9E2uzmYI3qLeOmI0tEOt+TBBQyUIAh4aAgU05FVYzeZrKUdkAZfBNVGRaHVgV0TDkdEngJSw/SyQchkQ==",
       "dev": true,
       "funding": [
         {
@@ -8255,27 +9135,9 @@
       }
     },
     "node_modules/undefsafe": {
-      "version": "2.0.3",
-      "resolved": "https://registry.npmjs.org/undefsafe/-/undefsafe-2.0.3.tgz",
-      "integrity": "sha512-nrXZwwXrD/T/JXeygJqdCO6NZZ1L66HrxM/Z7mIq2oPanoN0F1nLx3lwJMu6AwJY69hdixaFQOuoYsMjE5/C2A==",
-      "dev": true,
-      "dependencies": {
-        "debug": "^2.2.0"
-      }
-    },
-    "node_modules/undefsafe/node_modules/debug": {
-      "version": "2.6.9",
-      "resolved": "https://registry.npmjs.org/debug/-/debug-2.6.9.tgz",
-      "integrity": "sha512-bC7ElrdJaJnPbAP+1EotYvqZsb3ecl5wi6Bfi6BJTUcNowp6cvspg0jXznRTKDjm/E7AdgFBVeAPVMNcKGsHMA==",
-      "dev": true,
-      "dependencies": {
-        "ms": "2.0.0"
-      }
-    },
-    "node_modules/undefsafe/node_modules/ms": {
-      "version": "2.0.0",
-      "resolved": "https://registry.npmjs.org/ms/-/ms-2.0.0.tgz",
-      "integrity": "sha1-VgiurfwAvmwpAd9fmGF4jeDVl8g=",
+      "version": "2.0.5",
+      "resolved": "https://registry.npmjs.org/undefsafe/-/undefsafe-2.0.5.tgz",
+      "integrity": "sha512-WxONCrssBM8TSPRqN5EmsjVrsv4A8X12J4ArBiiayv3DyyG3ZlIg6yysuuSYdZsVz3TKcTg2fd//Ujd4CHV1iA==",
       "dev": true
     },
     "node_modules/union-value": {
@@ -9042,6 +9904,15 @@
         "node": ">= 6"
       }
     },
+    "node_modules/webpack-log/node_modules/ansi-colors": {
+      "version": "3.2.4",
+      "resolved": "https://registry.npmjs.org/ansi-colors/-/ansi-colors-3.2.4.tgz",
+      "integrity": "sha512-hHUXGagefjN2iRrID63xckIvotOXOojhQKWIPUZ4mNUZ9nLZW+7FMNoE1lOkEhNWYsx/7ysGIuJYCiMAA9FnrA==",
+      "dev": true,
+      "engines": {
+        "node": ">=6"
+      }
+    },
     "node_modules/webpack-sources": {
       "version": "1.4.3",
       "resolved": "https://registry.npmjs.org/webpack-sources/-/webpack-sources-1.4.3.tgz",
@@ -9303,50 +10174,37 @@
       "integrity": "sha1-Zws6+8VS4LVd9rd4DKdGFfI60cs="
     },
     "node_modules/wide-align": {
-      "version": "1.1.3",
-      "resolved": "https://registry.npmjs.org/wide-align/-/wide-align-1.1.3.tgz",
-      "integrity": "sha512-QGkOQc8XL6Bt5PwnsExKBPuMKBxnGxWWW3fU55Xt4feHozMUhdUMaBCk290qpm/wG5u/RSKzwdAC4i51YigihA==",
+      "version": "1.1.5",
+      "resolved": "https://registry.npmjs.org/wide-align/-/wide-align-1.1.5.tgz",
+      "integrity": "sha512-eDMORYaPNZ4sQIuuYPDHdQvf4gyCF9rEEV/yPxGfwPkRodwEgiMUUXTx/dex+Me0wxx53S+NgUHaP7y3MGlDmg==",
       "dependencies": {
-        "string-width": "^1.0.2 || 2"
+        "string-width": "^1.0.2 || 2 || 3 || 4"
       }
     },
-    "node_modules/wide-align/node_modules/ansi-regex": {
-      "version": "3.0.0",
-      "resolved": "https://registry.npmjs.org/ansi-regex/-/ansi-regex-3.0.0.tgz",
-      "integrity": "sha1-7QMXwyIGT3lGbAKWa922Bas32Zg=",
-      "engines": {
-        "node": ">=4"
-      }
+    "node_modules/wide-align/node_modules/emoji-regex": {
+      "version": "8.0.0",
+      "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-8.0.0.tgz",
+      "integrity": "sha512-MSjYzcWNOA0ewAHpz0MxpYFvwg6yjy1NG3xteoqz644VCo/RPgnr1/GGt+ic3iJTzQ8Eu3TdM14SawnVUmGE6A=="
     },
     "node_modules/wide-align/node_modules/is-fullwidth-code-point": {
-      "version": "2.0.0",
-      "resolved": "https://registry.npmjs.org/is-fullwidth-code-point/-/is-fullwidth-code-point-2.0.0.tgz",
-      "integrity": "sha1-o7MKXE8ZkYMWeqq5O+764937ZU8=",
+      "version": "3.0.0",
+      "resolved": "https://registry.npmjs.org/is-fullwidth-code-point/-/is-fullwidth-code-point-3.0.0.tgz",
+      "integrity": "sha512-zymm5+u+sCsSWyD9qNaejV3DFvhCKclKdizYaJUuHA83RLjb7nSuGnddCHGv0hk+KY7BMAlsWeK4Ueg6EV6XQg==",
       "engines": {
-        "node": ">=4"
+        "node": ">=8"
       }
     },
     "node_modules/wide-align/node_modules/string-width": {
-      "version": "2.1.1",
-      "resolved": "https://registry.npmjs.org/string-width/-/string-width-2.1.1.tgz",
-      "integrity": "sha512-nOqH59deCq9SRHlxq1Aw85Jnt4w6KvLKqWVik6oA9ZklXLNIOlqg4F2yrT1MVaTjAqvVwdfeZ7w7aCvJD7ugkw==",
-      "dependencies": {
-        "is-fullwidth-code-point": "^2.0.0",
-        "strip-ansi": "^4.0.0"
-      },
-      "engines": {
-        "node": ">=4"
-      }
-    },
-    "node_modules/wide-align/node_modules/strip-ansi": {
-      "version": "4.0.0",
-      "resolved": "https://registry.npmjs.org/strip-ansi/-/strip-ansi-4.0.0.tgz",
-      "integrity": "sha1-qEeQIusaw2iocTibY1JixQXuNo8=",
+      "version": "4.2.3",
+      "resolved": "https://registry.npmjs.org/string-width/-/string-width-4.2.3.tgz",
+      "integrity": "sha512-wKyQRQpjJ0sIp62ErSZdGsjMJWsap5oRNihHhu6G7JVO/9jIB6UyevL+tXuOqrng8j/cxKTWyWUwvSTriiZz/g==",
       "dependencies": {
-        "ansi-regex": "^3.0.0"
+        "emoji-regex": "^8.0.0",
+        "is-fullwidth-code-point": "^3.0.0",
+        "strip-ansi": "^6.0.1"
       },
       "engines": {
-        "node": ">=4"
+        "node": ">=8"
       }
     },
     "node_modules/widest-line": {
@@ -9361,6 +10219,35 @@
         "node": ">=8"
       }
     },
+    "node_modules/widest-line/node_modules/emoji-regex": {
+      "version": "8.0.0",
+      "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-8.0.0.tgz",
+      "integrity": "sha512-MSjYzcWNOA0ewAHpz0MxpYFvwg6yjy1NG3xteoqz644VCo/RPgnr1/GGt+ic3iJTzQ8Eu3TdM14SawnVUmGE6A==",
+      "dev": true
+    },
+    "node_modules/widest-line/node_modules/is-fullwidth-code-point": {
+      "version": "3.0.0",
+      "resolved": "https://registry.npmjs.org/is-fullwidth-code-point/-/is-fullwidth-code-point-3.0.0.tgz",
+      "integrity": "sha512-zymm5+u+sCsSWyD9qNaejV3DFvhCKclKdizYaJUuHA83RLjb7nSuGnddCHGv0hk+KY7BMAlsWeK4Ueg6EV6XQg==",
+      "dev": true,
+      "engines": {
+        "node": ">=8"
+      }
+    },
+    "node_modules/widest-line/node_modules/string-width": {
+      "version": "4.2.3",
+      "resolved": "https://registry.npmjs.org/string-width/-/string-width-4.2.3.tgz",
+      "integrity": "sha512-wKyQRQpjJ0sIp62ErSZdGsjMJWsap5oRNihHhu6G7JVO/9jIB6UyevL+tXuOqrng8j/cxKTWyWUwvSTriiZz/g==",
+      "dev": true,
+      "dependencies": {
+        "emoji-regex": "^8.0.0",
+        "is-fullwidth-code-point": "^3.0.0",
+        "strip-ansi": "^6.0.1"
+      },
+      "engines": {
+        "node": ">=8"
+      }
+    },
     "node_modules/word-wrap": {
       "version": "1.2.3",
       "resolved": "https://registry.npmjs.org/word-wrap/-/word-wrap-1.2.3.tgz",
@@ -9396,6 +10283,35 @@
         "url": "https://github.com/chalk/wrap-ansi?sponsor=1"
       }
     },
+    "node_modules/wrap-ansi/node_modules/emoji-regex": {
+      "version": "8.0.0",
+      "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-8.0.0.tgz",
+      "integrity": "sha512-MSjYzcWNOA0ewAHpz0MxpYFvwg6yjy1NG3xteoqz644VCo/RPgnr1/GGt+ic3iJTzQ8Eu3TdM14SawnVUmGE6A==",
+      "dev": true
+    },
+    "node_modules/wrap-ansi/node_modules/is-fullwidth-code-point": {
+      "version": "3.0.0",
+      "resolved": "https://registry.npmjs.org/is-fullwidth-code-point/-/is-fullwidth-code-point-3.0.0.tgz",
+      "integrity": "sha512-zymm5+u+sCsSWyD9qNaejV3DFvhCKclKdizYaJUuHA83RLjb7nSuGnddCHGv0hk+KY7BMAlsWeK4Ueg6EV6XQg==",
+      "dev": true,
+      "engines": {
+        "node": ">=8"
+      }
+    },
+    "node_modules/wrap-ansi/node_modules/string-width": {
+      "version": "4.2.3",
+      "resolved": "https://registry.npmjs.org/string-width/-/string-width-4.2.3.tgz",
+      "integrity": "sha512-wKyQRQpjJ0sIp62ErSZdGsjMJWsap5oRNihHhu6G7JVO/9jIB6UyevL+tXuOqrng8j/cxKTWyWUwvSTriiZz/g==",
+      "dev": true,
+      "dependencies": {
+        "emoji-regex": "^8.0.0",
+        "is-fullwidth-code-point": "^3.0.0",
+        "strip-ansi": "^6.0.1"
+      },
+      "engines": {
+        "node": ">=8"
+      }
+    },
     "node_modules/wrappy": {
       "version": "1.0.2",
       "resolved": "https://registry.npmjs.org/wrappy/-/wrappy-1.0.2.tgz",
@@ -9414,9 +10330,9 @@
       }
     },
     "node_modules/ws": {
-      "version": "7.5.5",
-      "resolved": "https://registry.npmjs.org/ws/-/ws-7.5.5.tgz",
-      "integrity": "sha512-BAkMFcAzl8as1G/hArkxOxq3G7pjUqQ3gzYbLL0/5zNkph70e+lCoxBGnm6AW1+/aiNeV4fnKqZ8m4GZewmH2w==",
+      "version": "7.5.6",
+      "resolved": "https://registry.npmjs.org/ws/-/ws-7.5.6.tgz",
+      "integrity": "sha512-6GLgCqo2cy2A2rjCNFlxQS6ZljG/coZfZXclldI8FB/1G3CCI36Zd8xy2HrFVACi8tfk5XrgLQEk+P0Tnz9UcA==",
       "dev": true,
       "engines": {
         "node": ">=8.3.0"
@@ -9476,6 +10392,15 @@
       "integrity": "sha512-a4UGQaWPH59mOXUYnAG2ewncQS4i4F43Tv3JoAM+s2VDAmS9NsK8GpDMLrCHPksFT7h3K6TOoUNn2pb7RoXx4g==",
       "dev": true
     },
+    "node_modules/yaml": {
+      "version": "1.10.2",
+      "resolved": "https://registry.npmjs.org/yaml/-/yaml-1.10.2.tgz",
+      "integrity": "sha512-r3vXyErRCYJ7wg28yvBY5VSoAF8ZvlcW9/BwUzEtUsjvX/DKs24dIkuwjtuprwJJHsbyUbLApepYTR1BN4uHrg==",
+      "dev": true,
+      "engines": {
+        "node": ">= 6"
+      }
+    },
     "node_modules/yargs": {
       "version": "16.2.0",
       "resolved": "https://registry.npmjs.org/yargs/-/yargs-16.2.0.tgz",
@@ -9503,6 +10428,35 @@
         "node": ">=10"
       }
     },
+    "node_modules/yargs/node_modules/emoji-regex": {
+      "version": "8.0.0",
+      "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-8.0.0.tgz",
+      "integrity": "sha512-MSjYzcWNOA0ewAHpz0MxpYFvwg6yjy1NG3xteoqz644VCo/RPgnr1/GGt+ic3iJTzQ8Eu3TdM14SawnVUmGE6A==",
+      "dev": true
+    },
+    "node_modules/yargs/node_modules/is-fullwidth-code-point": {
+      "version": "3.0.0",
+      "resolved": "https://registry.npmjs.org/is-fullwidth-code-point/-/is-fullwidth-code-point-3.0.0.tgz",
+      "integrity": "sha512-zymm5+u+sCsSWyD9qNaejV3DFvhCKclKdizYaJUuHA83RLjb7nSuGnddCHGv0hk+KY7BMAlsWeK4Ueg6EV6XQg==",
+      "dev": true,
+      "engines": {
+        "node": ">=8"
+      }
+    },
+    "node_modules/yargs/node_modules/string-width": {
+      "version": "4.2.3",
+      "resolved": "https://registry.npmjs.org/string-width/-/string-width-4.2.3.tgz",
+      "integrity": "sha512-wKyQRQpjJ0sIp62ErSZdGsjMJWsap5oRNihHhu6G7JVO/9jIB6UyevL+tXuOqrng8j/cxKTWyWUwvSTriiZz/g==",
+      "dev": true,
+      "dependencies": {
+        "emoji-regex": "^8.0.0",
+        "is-fullwidth-code-point": "^3.0.0",
+        "strip-ansi": "^6.0.1"
+      },
+      "engines": {
+        "node": ">=8"
+      }
+    },
     "node_modules/yargs/node_modules/y18n": {
       "version": "5.0.8",
       "resolved": "https://registry.npmjs.org/y18n/-/y18n-5.0.8.tgz",
@@ -9526,7 +10480,6 @@
       "resolved": "https://registry.npmjs.org/yn/-/yn-3.1.1.tgz",
       "integrity": "sha512-Ux4ygGWsu2c7isFWe8Yu1YluJmqVhxqK2cLXNQA5AcC3QfbGNpM7fu0Y8b/z16pXLnFxZYvWhd3fhBY9DLmC6Q==",
       "dev": true,
-      "peer": true,
       "engines": {
         "node": ">=6"
       }
@@ -9539,37 +10492,19 @@
         "tslib": "^2.0.0"
       }
     },
-    "node_modules/zone.js/node_modules/tslib": {
-      "version": "2.3.1",
-      "resolved": "https://registry.npmjs.org/tslib/-/tslib-2.3.1.tgz",
-      "integrity": "sha512-77EbyPPpMz+FRFRuAFlWMtmgUWGe9UOG2Z25NqCwiIjRhOf5iKGuzSe5P2w1laq+FkRy4p+PCuVkJSGkzTEKVw=="
-    },
     "node_modules/zxcvbn": {
       "version": "4.4.2",
       "resolved": "https://registry.npmjs.org/zxcvbn/-/zxcvbn-4.4.2.tgz",
       "integrity": "sha1-KOwXzwl0PtyrBW3dixsGJizHPDA="
-    },
-    "node/node_modules/form-data": {
-      "version": "4.0.0",
-      "resolved": "https://registry.npmjs.org/form-data/-/form-data-4.0.0.tgz",
-      "integrity": "sha512-ETEklSGi5t0QMZuiXoA/Q6vcnxcLQP5vdugSpuAyi6SVGi2clPPp+xgEhuMaHC+zGgn31Kd235W35f7Hykkaww==",
-      "dependencies": {
-        "asynckit": "^0.4.0",
-        "combined-stream": "^1.0.8",
-        "mime-types": "^2.1.12"
-      },
-      "engines": {
-        "node": ">= 6"
-      }
     }
   },
   "dependencies": {
     "@angular/animations": {
-      "version": "11.2.14",
-      "resolved": "https://registry.npmjs.org/@angular/animations/-/animations-11.2.14.tgz",
-      "integrity": "sha512-Heq/nNrCmb3jbkusu+BQszOecfFI/31Oxxj+CDQkqqYpBcswk6bOJLoEE472o+vmgxaXbgeflU9qbIiCQhpMFA==",
+      "version": "12.2.14",
+      "resolved": "https://registry.npmjs.org/@angular/animations/-/animations-12.2.14.tgz",
+      "integrity": "sha512-1BR5u32auVePvXNNP96DB2008V+Ku0OGqeZQl2h4XA9xzES/Zk5WllIJZXqRmWMRBVARfXsfb0RdMty9gcaVjA==",
       "requires": {
-        "tslib": "^2.0.0"
+        "tslib": "^2.2.0"
       },
       "dependencies": {
         "tslib": {
@@ -9580,12 +10515,12 @@
       }
     },
     "@angular/cdk": {
-      "version": "11.2.13",
-      "resolved": "https://registry.npmjs.org/@angular/cdk/-/cdk-11.2.13.tgz",
-      "integrity": "sha512-FkE4iCwoLbQxLDUOjV1I7M/6hmpyb7erAjEdWgch7nGRNxF1hqX5Bqf1lvLFKPNCbx5NRI5K7YVAdIUQUR8vug==",
+      "version": "12.2.13",
+      "resolved": "https://registry.npmjs.org/@angular/cdk/-/cdk-12.2.13.tgz",
+      "integrity": "sha512-zSKRhECyFqhingIeyRInIyTvYErt4gWo+x5DQr0b7YLUbU8DZSwWnG4w76Ke2s4U8T7ry1jpJBHoX/e8YBpGMg==",
       "requires": {
         "parse5": "^5.0.0",
-        "tslib": "^2.0.0"
+        "tslib": "^2.2.0"
       },
       "dependencies": {
         "parse5": {
@@ -9602,11 +10537,11 @@
       }
     },
     "@angular/common": {
-      "version": "11.2.14",
-      "resolved": "https://registry.npmjs.org/@angular/common/-/common-11.2.14.tgz",
-      "integrity": "sha512-ZSLV/3j7eCTyLf/8g4yBFLWySjiLz3vLJAGWscYoUpnJWMnug1VRu6zoF/COxCbtORgE+Wz6K0uhfS6MziBGVw==",
+      "version": "12.2.14",
+      "resolved": "https://registry.npmjs.org/@angular/common/-/common-12.2.14.tgz",
+      "integrity": "sha512-ffYUYdwZETmFJw0AcWY30WsaWBhJxj/zSmFXWjgEGEGZH56zwbbNwfMZOYZ1jz4haAVxGu+TdXsOl2yMGzN7jQ==",
       "requires": {
-        "tslib": "^2.0.0"
+        "tslib": "^2.2.0"
       },
       "dependencies": {
         "tslib": {
@@ -9617,11 +10552,11 @@
       }
     },
     "@angular/compiler": {
-      "version": "11.2.14",
-      "resolved": "https://registry.npmjs.org/@angular/compiler/-/compiler-11.2.14.tgz",
-      "integrity": "sha512-XBOK3HgA+/y6Cz7kOX4zcJYmgJ264XnfcbXUMU2cD7Ac+mbNhLPKohWrEiSWalfcjnpf5gRfufQrQP7lpAGu0A==",
+      "version": "12.2.14",
+      "resolved": "https://registry.npmjs.org/@angular/compiler/-/compiler-12.2.14.tgz",
+      "integrity": "sha512-dwmZi+n66IUzRFlGWu9mjXq170ZEsaDvlNLZzaPgs6vZTa4Kt7PWvIF/Y7TMvnVv/uqNG6kOhfmOkf6rfz1Gjg==",
       "requires": {
-        "tslib": "^2.0.0"
+        "tslib": "^2.2.0"
       },
       "dependencies": {
         "tslib": {
@@ -9632,11 +10567,11 @@
       }
     },
     "@angular/core": {
-      "version": "11.2.14",
-      "resolved": "https://registry.npmjs.org/@angular/core/-/core-11.2.14.tgz",
-      "integrity": "sha512-vpR4XqBGitk1Faph37CSpemwIYTmJ3pdIVNoHKP6jLonpWu+0azkchf0f7oD8/2ivj2F81opcIw0tcsy/D/5Vg==",
+      "version": "12.2.14",
+      "resolved": "https://registry.npmjs.org/@angular/core/-/core-12.2.14.tgz",
+      "integrity": "sha512-dlVk7yqUHL2R/eCmM8LsWuxhEBfzg0y1zHt0UqCuFwlCoiw+IG4HFy4OlZEUw9NUEZJSv0aDv3sWqxLkvK5vvg==",
       "requires": {
-        "tslib": "^2.0.0"
+        "tslib": "^2.2.0"
       },
       "dependencies": {
         "tslib": {
@@ -9647,11 +10582,11 @@
       }
     },
     "@angular/forms": {
-      "version": "11.2.14",
-      "resolved": "https://registry.npmjs.org/@angular/forms/-/forms-11.2.14.tgz",
-      "integrity": "sha512-4LWqY6KEIk1AZQFnk+4PJSOCamlD4tumuVN06gO4D0dZo9Cx+GcvW6pM6N0CPubRvPs3sScCnu20WT11HNWC1w==",
+      "version": "12.2.14",
+      "resolved": "https://registry.npmjs.org/@angular/forms/-/forms-12.2.14.tgz",
+      "integrity": "sha512-/9/gSJUBXVRVdRnzgJnALAQZYJATuGDMkFC9ms9DEMG4PMAhe9x4if1lJjN6noz5RAom3qNuVBNWaYAPUxlcBQ==",
       "requires": {
-        "tslib": "^2.0.0"
+        "tslib": "^2.2.0"
       },
       "dependencies": {
         "tslib": {
@@ -9662,11 +10597,11 @@
       }
     },
     "@angular/platform-browser": {
-      "version": "11.2.14",
-      "resolved": "https://registry.npmjs.org/@angular/platform-browser/-/platform-browser-11.2.14.tgz",
-      "integrity": "sha512-fb7b7ss/gRoP8wLAN17W62leMgjynuyjEPU2eUoAAazsG9f2cgM+z3rK29GYncDVyYQxZUZYnjSqvL6GSXx86A==",
+      "version": "12.2.14",
+      "resolved": "https://registry.npmjs.org/@angular/platform-browser/-/platform-browser-12.2.14.tgz",
+      "integrity": "sha512-fWcE2rnJ3ZCISa1oPfsIDV7FBZBoLFEdDuMXAiDYqDPKvF/E5U5nHrS+K4SlLAi094bMobtTOReNWl/Ienniyw==",
       "requires": {
-        "tslib": "^2.0.0"
+        "tslib": "^2.2.0"
       },
       "dependencies": {
         "tslib": {
@@ -9677,11 +10612,11 @@
       }
     },
     "@angular/platform-browser-dynamic": {
-      "version": "11.2.14",
-      "resolved": "https://registry.npmjs.org/@angular/platform-browser-dynamic/-/platform-browser-dynamic-11.2.14.tgz",
-      "integrity": "sha512-TWTPdFs6iBBcp+/YMsgCRQwdHpWGq8KjeJDJ2tfatGgBD3Gqt2YaHOMST1zPW6RkrmupytTejuVqXzeaKWFxuw==",
+      "version": "12.2.14",
+      "resolved": "https://registry.npmjs.org/@angular/platform-browser-dynamic/-/platform-browser-dynamic-12.2.14.tgz",
+      "integrity": "sha512-0NPF7mS91Tct8rBmOLZPmnLSuS4kbLHXo6eTgrg80OC0vlzBiQwGDVW4X3KncCoX9CpevaGJCdSMc+uPNsFOUQ==",
       "requires": {
-        "tslib": "^2.0.0"
+        "tslib": "^2.2.0"
       },
       "dependencies": {
         "tslib": {
@@ -9692,11 +10627,11 @@
       }
     },
     "@angular/router": {
-      "version": "11.2.14",
-      "resolved": "https://registry.npmjs.org/@angular/router/-/router-11.2.14.tgz",
-      "integrity": "sha512-3aYBmj+zrEL9yf/ntIQxHIYaWShZOBKP3U07X2mX+TPMpGlvHDnR7L6bWhQVZwewzMMz7YVR16ldg50IFuAlfA==",
+      "version": "12.2.14",
+      "resolved": "https://registry.npmjs.org/@angular/router/-/router-12.2.14.tgz",
+      "integrity": "sha512-yP5grSnqBvc4vNhtYdcxDgDYIebUKs5f0xyFkUJM5030UnQ0CV45tBsSxHMkQbPZucIfOuxpRy8xy5+4GizuwQ==",
       "requires": {
-        "tslib": "^2.0.0"
+        "tslib": "^2.2.0"
       },
       "dependencies": {
         "tslib": {
@@ -9707,12 +10642,12 @@
       }
     },
     "@babel/code-frame": {
-      "version": "7.14.5",
-      "resolved": "https://registry.npmjs.org/@babel/code-frame/-/code-frame-7.14.5.tgz",
-      "integrity": "sha512-9pzDqyc6OLDaqe+zbACgFkb6fKMNG6CObKpnYXChRsvYGyEdc7CA2BaqeOM+vOtCS5ndmJicPJhKAwYRI6UfFw==",
+      "version": "7.16.0",
+      "resolved": "https://registry.npmjs.org/@babel/code-frame/-/code-frame-7.16.0.tgz",
+      "integrity": "sha512-IF4EOMEV+bfYwOmNxGzSnjR2EmQod7f1UXOpZM3l4i4o4QNwzjtJAu/HxdjHq0aYBvdqMuQEY1eg0nqW9ZPORA==",
       "dev": true,
       "requires": {
-        "@babel/highlight": "^7.14.5"
+        "@babel/highlight": "^7.16.0"
       }
     },
     "@babel/helper-validator-identifier": {
@@ -9722,12 +10657,12 @@
       "dev": true
     },
     "@babel/highlight": {
-      "version": "7.14.5",
-      "resolved": "https://registry.npmjs.org/@babel/highlight/-/highlight-7.14.5.tgz",
-      "integrity": "sha512-qf9u2WFWVV0MppaL877j2dBtQIDgmidgjGk5VIMw3OadXvYaXn66U1BFlH2t4+t3i+8PhedppRv+i40ABzd+gg==",
+      "version": "7.16.0",
+      "resolved": "https://registry.npmjs.org/@babel/highlight/-/highlight-7.16.0.tgz",
+      "integrity": "sha512-t8MH41kUQylBtu2+4IQA3atqevA2lRgqA2wyVB/YiWmsDSuylZZuXOUy9ric30hfzauEFfdsuk/eXTRrGrfd0g==",
       "dev": true,
       "requires": {
-        "@babel/helper-validator-identifier": "^7.14.5",
+        "@babel/helper-validator-identifier": "^7.15.7",
         "chalk": "^2.0.0",
         "js-tokens": "^4.0.0"
       },
@@ -9787,22 +10722,22 @@
     "@bitwarden/jslib-angular": {
       "version": "file:angular",
       "requires": {
-        "@angular/animations": "^11.2.11",
-        "@angular/cdk": "^11.2.10",
-        "@angular/common": "^11.2.11",
-        "@angular/compiler": "^11.2.11",
-        "@angular/core": "^11.2.11",
-        "@angular/forms": "^11.2.11",
-        "@angular/platform-browser": "^11.2.11",
-        "@angular/platform-browser-dynamic": "^11.2.11",
-        "@angular/router": "^11.2.11",
+        "@angular/animations": "^12.2.13",
+        "@angular/cdk": "^12.2.13",
+        "@angular/common": "^12.2.13",
+        "@angular/compiler": "^12.2.13",
+        "@angular/core": "^12.2.13",
+        "@angular/forms": "^12.2.13",
+        "@angular/platform-browser": "^12.2.13",
+        "@angular/platform-browser-dynamic": "^12.2.13",
+        "@angular/router": "^12.2.13",
         "@bitwarden/jslib-common": "file:../common",
         "@types/duo_web_sdk": "^2.7.1",
         "duo_web_sdk": "git+https://github.com/duosecurity/duo_web_sdk.git",
         "rimraf": "^3.0.2",
-        "rxjs": "6.6.7",
+        "rxjs": "^7.4.0",
         "tldjs": "^2.3.1",
-        "typescript": "4.1.5",
+        "typescript": "4.3.5",
         "zone.js": "0.11.4"
       }
     },
@@ -9812,7 +10747,7 @@
         "@microsoft/signalr": "5.0.10",
         "@microsoft/signalr-protocol-msgpack": "5.0.10",
         "@types/lunr": "^2.3.3",
-        "@types/node": "^14.17.1",
+        "@types/node": "^16.11.12",
         "@types/node-forge": "^0.9.7",
         "@types/papaparse": "^5.2.5",
         "@types/tldjs": "^2.3.0",
@@ -9823,9 +10758,9 @@
         "node-forge": "^0.10.0",
         "papaparse": "^5.3.0",
         "rimraf": "^3.0.2",
-        "rxjs": "6.6.7",
+        "rxjs": "^7.4.0",
         "tldjs": "^2.3.1",
-        "typescript": "4.1.5",
+        "typescript": "4.3.5",
         "zxcvbn": "^4.4.2"
       }
     },
@@ -9834,15 +10769,15 @@
       "requires": {
         "@bitwarden/jslib-common": "file:../common",
         "@nodert-win10-rs4/windows.security.credentials.ui": "^0.4.4",
-        "@types/node": "^14.17.1",
-        "electron": "14.2.0",
+        "@types/node": "^16.11.12",
+        "electron": "16.0.7",
         "electron-log": "4.4.1",
         "electron-store": "8.0.1",
-        "electron-updater": "4.3.9",
+        "electron-updater": "4.6.1",
         "forcefocus": "^1.1.0",
         "keytar": "7.7.0",
         "rimraf": "^3.0.2",
-        "typescript": "4.1.5"
+        "typescript": "4.3.5"
       }
     },
     "@bitwarden/jslib-node": {
@@ -9851,7 +10786,7 @@
         "@bitwarden/jslib-common": "file:../common",
         "@types/inquirer": "^7.3.1",
         "@types/lowdb": "^1.0.10",
-        "@types/node": "^14.17.1",
+        "@types/node": "^16.11.12",
         "@types/node-fetch": "^2.5.10",
         "chalk": "^4.1.1",
         "commander": "7.2.0",
@@ -9861,47 +10796,33 @@
         "lowdb": "1.0.0",
         "node-fetch": "^2.6.1",
         "rimraf": "^3.0.2",
-        "typescript": "4.1.5"
-      },
-      "dependencies": {
-        "form-data": {
-          "version": "4.0.0",
-          "resolved": "https://registry.npmjs.org/form-data/-/form-data-4.0.0.tgz",
-          "integrity": "sha512-ETEklSGi5t0QMZuiXoA/Q6vcnxcLQP5vdugSpuAyi6SVGi2clPPp+xgEhuMaHC+zGgn31Kd235W35f7Hykkaww==",
-          "requires": {
-            "asynckit": "^0.4.0",
-            "combined-stream": "^1.0.8",
-            "mime-types": "^2.1.12"
-          }
-        }
+        "typescript": "4.3.5"
       }
     },
     "@cspotcode/source-map-consumer": {
       "version": "0.8.0",
       "resolved": "https://registry.npmjs.org/@cspotcode/source-map-consumer/-/source-map-consumer-0.8.0.tgz",
       "integrity": "sha512-41qniHzTU8yAGbCp04ohlmSrZf8bkf/iJsl3V0dRGsQN/5GFfx+LbCSsCpp2gqrqjTVg/K6O8ycoV35JIwAzAg==",
-      "dev": true,
-      "peer": true
+      "dev": true
     },
     "@cspotcode/source-map-support": {
-      "version": "0.6.1",
-      "resolved": "https://registry.npmjs.org/@cspotcode/source-map-support/-/source-map-support-0.6.1.tgz",
-      "integrity": "sha512-DX3Z+T5dt1ockmPdobJS/FAsQPW4V4SrWEhD2iYQT2Cb2tQsiMnYxrcUH9By/Z3B+v0S5LMBkQtV/XOBbpLEOg==",
+      "version": "0.7.0",
+      "resolved": "https://registry.npmjs.org/@cspotcode/source-map-support/-/source-map-support-0.7.0.tgz",
+      "integrity": "sha512-X4xqRHqN8ACt2aHVe51OxeA2HjbcL4MqFqXkrmQszJ1NOUuUu5u6Vqx/0lZSVNku7velL5FC/s5uEAj1lsBMhA==",
       "dev": true,
-      "peer": true,
       "requires": {
         "@cspotcode/source-map-consumer": "0.8.0"
       }
     },
     "@electron/get": {
-      "version": "1.13.0",
-      "resolved": "https://registry.npmjs.org/@electron/get/-/get-1.13.0.tgz",
-      "integrity": "sha512-+SjZhRuRo+STTO1Fdhzqnv9D2ZhjxXP6egsJ9kiO8dtP68cDx7dFCwWi64dlMQV7sWcfW1OYCW4wviEBzmRsfQ==",
+      "version": "1.13.1",
+      "resolved": "https://registry.npmjs.org/@electron/get/-/get-1.13.1.tgz",
+      "integrity": "sha512-U5vkXDZ9DwXtkPqlB45tfYnnYBN8PePp1z/XDCupnSpdrxT8/ThCv9WCwPLf9oqiSGZTkH6dx2jDUPuoXpjkcA==",
       "requires": {
         "debug": "^4.1.1",
         "env-paths": "^2.2.0",
         "fs-extra": "^8.1.0",
-        "global-agent": "^2.0.2",
+        "global-agent": "^3.0.0",
         "global-tunnel-ng": "^2.7.1",
         "got": "^9.6.0",
         "progress": "^2.0.3",
@@ -9984,34 +10905,30 @@
       "version": "1.0.8",
       "resolved": "https://registry.npmjs.org/@tsconfig/node10/-/node10-1.0.8.tgz",
       "integrity": "sha512-6XFfSQmMgq0CFLY1MslA/CPUfhIL919M1rMsa5lP2P097N2Wd1sSX0tx1u4olM16fLNhtHZpRhedZJphNJqmZg==",
-      "dev": true,
-      "peer": true
+      "dev": true
     },
     "@tsconfig/node12": {
       "version": "1.0.9",
       "resolved": "https://registry.npmjs.org/@tsconfig/node12/-/node12-1.0.9.tgz",
       "integrity": "sha512-/yBMcem+fbvhSREH+s14YJi18sp7J9jpuhYByADT2rypfajMZZN4WQ6zBGgBKp53NKmqI36wFYDb3yaMPurITw==",
-      "dev": true,
-      "peer": true
+      "dev": true
     },
     "@tsconfig/node14": {
       "version": "1.0.1",
       "resolved": "https://registry.npmjs.org/@tsconfig/node14/-/node14-1.0.1.tgz",
       "integrity": "sha512-509r2+yARFfHHE7T6Puu2jjkoycftovhXRqW328PDXTVGKihlb1P8Z9mMZH04ebyajfRY7dedfGynlrFHJUQCg==",
-      "dev": true,
-      "peer": true
+      "dev": true
     },
     "@tsconfig/node16": {
       "version": "1.0.2",
       "resolved": "https://registry.npmjs.org/@tsconfig/node16/-/node16-1.0.2.tgz",
       "integrity": "sha512-eZxlbI8GZscaGS7kkc/trHTT5xgrjH3/1n2JDwusC9iahPKWMRvRjJSAN5mCXviuTGQ/lHnhvv8Q1YTpnfz9gA==",
-      "dev": true,
-      "peer": true
+      "dev": true
     },
     "@types/component-emitter": {
-      "version": "1.2.10",
-      "resolved": "https://registry.npmjs.org/@types/component-emitter/-/component-emitter-1.2.10.tgz",
-      "integrity": "sha512-bsjleuRKWmGqajMerkzox19aGbscQX5rmmvvXl3wlIp5gMG1HgkiwPxsN5p070fBDKTNSPgojVbuY1+HWMbFhg==",
+      "version": "1.2.11",
+      "resolved": "https://registry.npmjs.org/@types/component-emitter/-/component-emitter-1.2.11.tgz",
+      "integrity": "sha512-SRXjM+tfsSlA9VuG8hGO2nft2p8zjXCK1VcC6N4NXbBbYbSia9kzCChYQajIjzIqOOOuh5Ock6MmV2oux4jDZQ==",
       "dev": true
     },
     "@types/cookie": {
@@ -10040,18 +10957,41 @@
       "requires": {
         "@types/through": "*",
         "rxjs": "^6.4.0"
+      },
+      "dependencies": {
+        "rxjs": {
+          "version": "6.6.7",
+          "resolved": "https://registry.npmjs.org/rxjs/-/rxjs-6.6.7.tgz",
+          "integrity": "sha512-hTdwr+7yYNIT5n4AMYp85KA6yw2Va0FLa3Rguvbpa4W3I5xynaBZo41cM3XM+4Q6fRMj3sBYIR1VAmZMXYJvRQ==",
+          "dev": true,
+          "requires": {
+            "tslib": "^1.9.0"
+          }
+        },
+        "tslib": {
+          "version": "1.14.1",
+          "resolved": "https://registry.npmjs.org/tslib/-/tslib-1.14.1.tgz",
+          "integrity": "sha512-Xni35NKzjgMrwevysHTCArtLDpPvye8zV/0E4EyYn43P7/7qvQwPh9BGkHewbMulVntbigmcT7rdX3BNo9wRJg==",
+          "dev": true
+        }
       }
     },
     "@types/jasmine": {
-      "version": "3.9.1",
-      "resolved": "https://registry.npmjs.org/@types/jasmine/-/jasmine-3.9.1.tgz",
-      "integrity": "sha512-PVpjh8S8lqKFKurWSKdFATlfBHGPzgy0PoDdzQ+rr78jTQ0aacyh9YndzZcAUPxhk4kRujItFFGQdUJ7flHumw==",
+      "version": "3.10.2",
+      "resolved": "https://registry.npmjs.org/@types/jasmine/-/jasmine-3.10.2.tgz",
+      "integrity": "sha512-qs4xjVm4V/XjM6owGm/x6TNmhGl5iKX8dkTdsgdgl9oFnqgzxLepnS7rN9Tdo7kDmnFD/VEqKrW57cGD2odbEg==",
+      "dev": true
+    },
+    "@types/json5": {
+      "version": "0.0.29",
+      "resolved": "https://registry.npmjs.org/@types/json5/-/json5-0.0.29.tgz",
+      "integrity": "sha1-7ihweulOEdK4J7y+UnC86n8+ce4=",
       "dev": true
     },
     "@types/lodash": {
-      "version": "4.14.175",
-      "resolved": "https://registry.npmjs.org/@types/lodash/-/lodash-4.14.175.tgz",
-      "integrity": "sha512-XmdEOrKQ8a1Y/yxQFOMbC47G/V2VDO1GvMRnl4O75M4GW/abC5tnfzadQYkqEveqRM1dEJGFFegfPNA2vvx2iw==",
+      "version": "4.14.178",
+      "resolved": "https://registry.npmjs.org/@types/lodash/-/lodash-4.14.178.tgz",
+      "integrity": "sha512-0d5Wd09ItQWH1qFbEyQ7oTQ3GZrMfth5JkbN3EvTKLXcHLRDSXeLnlvlOn0wvxVIwK5o2M8JzP/OWz7T3NRsbw==",
       "dev": true
     },
     "@types/lowdb": {
@@ -10070,9 +11010,10 @@
       "dev": true
     },
     "@types/node": {
-      "version": "14.17.20",
-      "resolved": "https://registry.npmjs.org/@types/node/-/node-14.17.20.tgz",
-      "integrity": "sha512-gI5Sl30tmhXsqkNvopFydP7ASc4c2cLfGNQrVKN3X90ADFWFsPEsotm/8JHSUJQKTHbwowAHtcJPeyVhtKv0TQ=="
+      "version": "16.11.13",
+      "resolved": "https://registry.npmjs.org/@types/node/-/node-16.11.13.tgz",
+      "integrity": "sha512-eUXZzHLHoZqj1frtUetNkUetYoJ6X55UmrVnFD4DMhVeAmwLjniZhtBmsRiemQh4uq4G3vUra/Ws/hs9vEvL3Q==",
+      "dev": true
     },
     "@types/node-fetch": {
       "version": "2.5.12",
@@ -10082,6 +11023,19 @@
       "requires": {
         "@types/node": "*",
         "form-data": "^3.0.0"
+      },
+      "dependencies": {
+        "form-data": {
+          "version": "3.0.1",
+          "resolved": "https://registry.npmjs.org/form-data/-/form-data-3.0.1.tgz",
+          "integrity": "sha512-RHkBKtLWUVwd7SqRIvCZMEvAMoGUp0XU+seQiZejj0COz3RI3hWP4sCv3gZWWLjJTd7rGwcsF5eKZGii0r/hbg==",
+          "dev": true,
+          "requires": {
+            "asynckit": "^0.4.0",
+            "combined-stream": "^1.0.8",
+            "mime-types": "^2.1.12"
+          }
+        }
       }
     },
     "@types/node-forge": {
@@ -10094,18 +11048,18 @@
       }
     },
     "@types/papaparse": {
-      "version": "5.2.6",
-      "resolved": "https://registry.npmjs.org/@types/papaparse/-/papaparse-5.2.6.tgz",
-      "integrity": "sha512-xGKSd0UTn58N1h0+zf8mW863Rv8BvXcGibEgKFtBIXZlcDXAmX/T4RdDO2mwmrmOypUDt5vRgo2v32a78JdqUA==",
+      "version": "5.3.1",
+      "resolved": "https://registry.npmjs.org/@types/papaparse/-/papaparse-5.3.1.tgz",
+      "integrity": "sha512-1lbngk9wty2kCyQB42LjqSa12SEop3t9wcEC7/xYr3ujTSTmv7HWKjKYXly0GkMfQ42PRb2lFPFEibDOiMXS0g==",
       "dev": true,
       "requires": {
         "@types/node": "*"
       }
     },
     "@types/semver": {
-      "version": "7.3.8",
-      "resolved": "https://registry.npmjs.org/@types/semver/-/semver-7.3.8.tgz",
-      "integrity": "sha512-D/2EJvAlCEtYFEYmmlGwbGXuK886HzyCc3nZX/tkFTQdEU8jZDAgiv08P162yB17y4ZXZoq7yFAnW4GDBb9Now=="
+      "version": "7.3.9",
+      "resolved": "https://registry.npmjs.org/@types/semver/-/semver-7.3.9.tgz",
+      "integrity": "sha512-L/TMpyURfBkf+o/526Zb6kd/tchUP3iBDEPjqjb+U2MAJhVRxxrmr2fwpe08E7QsV7YLcpq0tUaQ9O9x97ZIxQ=="
     },
     "@types/through": {
       "version": "0.0.30",
@@ -10346,9 +11300,9 @@
       }
     },
     "acorn": {
-      "version": "8.5.0",
-      "resolved": "https://registry.npmjs.org/acorn/-/acorn-8.5.0.tgz",
-      "integrity": "sha512-yXbYeFy+jUuYd3/CDcg2NkIYE991XYX/bje7LmjJigUciaeO1JR4XxXgCIV1/Zc/dRuFEyw1L0pbA+qynJkW5Q==",
+      "version": "8.6.0",
+      "resolved": "https://registry.npmjs.org/acorn/-/acorn-8.6.0.tgz",
+      "integrity": "sha512-U1riIR+lBSNi3IbxtaHOIKdH8sLFv3NYfNv8sg7ZsNhcfl4HF2++BfqqrNAxoCLQW1iiylOj76ecnaUxz+z9yw==",
       "dev": true
     },
     "acorn-globals": {
@@ -10383,6 +11337,16 @@
         "debug": "4"
       }
     },
+    "aggregate-error": {
+      "version": "3.1.0",
+      "resolved": "https://registry.npmjs.org/aggregate-error/-/aggregate-error-3.1.0.tgz",
+      "integrity": "sha512-4I7Td01quW/RpocfNayFdFVk1qSuoh0E7JrbRJ16nH01HhKFQ88INq9Sd+nd72zqRySlr9BmDA8xlEJ6vJMrYA==",
+      "dev": true,
+      "requires": {
+        "clean-stack": "^2.0.0",
+        "indent-string": "^4.0.0"
+      }
+    },
     "ajv": {
       "version": "6.12.6",
       "resolved": "https://registry.npmjs.org/ajv/-/ajv-6.12.6.tgz",
@@ -10411,9 +11375,9 @@
       },
       "dependencies": {
         "ajv": {
-          "version": "8.6.3",
-          "resolved": "https://registry.npmjs.org/ajv/-/ajv-8.6.3.tgz",
-          "integrity": "sha512-SMJOdDP6LqTkD0Uq8qLi+gMwSt0imXLSV080qFVwJCpH9U6Mb+SUGHAXM0KNbcBPguytWyvFxcHgMLe2D2XSpw==",
+          "version": "8.8.2",
+          "resolved": "https://registry.npmjs.org/ajv/-/ajv-8.8.2.tgz",
+          "integrity": "sha512-x9VuX+R/jcFj1DHo/fCp99esgGDWiHENrKxaCENuCxpoMCmAt/COCGVDwA7kleEpEzJjDnvh3yGoOuLu0Dtllw==",
           "requires": {
             "fast-deep-equal": "^3.1.1",
             "json-schema-traverse": "^1.0.0",
@@ -10442,12 +11406,37 @@
       "dev": true,
       "requires": {
         "string-width": "^4.1.0"
+      },
+      "dependencies": {
+        "emoji-regex": {
+          "version": "8.0.0",
+          "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-8.0.0.tgz",
+          "integrity": "sha512-MSjYzcWNOA0ewAHpz0MxpYFvwg6yjy1NG3xteoqz644VCo/RPgnr1/GGt+ic3iJTzQ8Eu3TdM14SawnVUmGE6A==",
+          "dev": true
+        },
+        "is-fullwidth-code-point": {
+          "version": "3.0.0",
+          "resolved": "https://registry.npmjs.org/is-fullwidth-code-point/-/is-fullwidth-code-point-3.0.0.tgz",
+          "integrity": "sha512-zymm5+u+sCsSWyD9qNaejV3DFvhCKclKdizYaJUuHA83RLjb7nSuGnddCHGv0hk+KY7BMAlsWeK4Ueg6EV6XQg==",
+          "dev": true
+        },
+        "string-width": {
+          "version": "4.2.3",
+          "resolved": "https://registry.npmjs.org/string-width/-/string-width-4.2.3.tgz",
+          "integrity": "sha512-wKyQRQpjJ0sIp62ErSZdGsjMJWsap5oRNihHhu6G7JVO/9jIB6UyevL+tXuOqrng8j/cxKTWyWUwvSTriiZz/g==",
+          "dev": true,
+          "requires": {
+            "emoji-regex": "^8.0.0",
+            "is-fullwidth-code-point": "^3.0.0",
+            "strip-ansi": "^6.0.1"
+          }
+        }
       }
     },
     "ansi-colors": {
-      "version": "3.2.4",
-      "resolved": "https://registry.npmjs.org/ansi-colors/-/ansi-colors-3.2.4.tgz",
-      "integrity": "sha512-hHUXGagefjN2iRrID63xckIvotOXOojhQKWIPUZ4mNUZ9nLZW+7FMNoE1lOkEhNWYsx/7ysGIuJYCiMAA9FnrA==",
+      "version": "4.1.1",
+      "resolved": "https://registry.npmjs.org/ansi-colors/-/ansi-colors-4.1.1.tgz",
+      "integrity": "sha512-JoX0apGbHaUJBNl6yF+p6JAFYZ666/hhCGKN5t9QFjbJQKUU/g8MNbFDbvfrgKXvI1QpZplPOnwIo99lX/AAmA==",
       "dev": true
     },
     "ansi-escapes": {
@@ -10499,8 +11488,7 @@
       "version": "4.1.3",
       "resolved": "https://registry.npmjs.org/arg/-/arg-4.1.3.tgz",
       "integrity": "sha512-58S9QDqG0Xx27YwPSt9fJxivjYl432YCwfDMfZ+71RAqUrZef7LrKQZ3LHLOwCS4FLNBplP533Zx895SeOCHvA==",
-      "dev": true,
-      "peer": true
+      "dev": true
     },
     "argparse": {
       "version": "1.0.10",
@@ -10588,6 +11576,12 @@
       "integrity": "sha1-WWZ/QfrdTyDMvCu5a41Pf3jsA2c=",
       "dev": true
     },
+    "astral-regex": {
+      "version": "2.0.0",
+      "resolved": "https://registry.npmjs.org/astral-regex/-/astral-regex-2.0.0.tgz",
+      "integrity": "sha512-Z7tMw1ytTXt5jqMcOP+OQteU1VuNK9Y02uuJtKQ1Sv69jXQKKg5cibLwGJow8yzZP+eAc18EmLGPal0bp36rvQ==",
+      "dev": true
+    },
     "async-each": {
       "version": "1.0.3",
       "resolved": "https://registry.npmjs.org/async-each/-/async-each-1.0.3.tgz",
@@ -10678,9 +11672,9 @@
       }
     },
     "base64-arraybuffer": {
-      "version": "0.1.4",
-      "resolved": "https://registry.npmjs.org/base64-arraybuffer/-/base64-arraybuffer-0.1.4.tgz",
-      "integrity": "sha1-mBjHngWbE1X5fgQooBfIOOkLqBI=",
+      "version": "1.0.1",
+      "resolved": "https://registry.npmjs.org/base64-arraybuffer/-/base64-arraybuffer-1.0.1.tgz",
+      "integrity": "sha512-vFIUq7FdLtjZMhATwDul5RZWv2jpXQ09Pd6jcVEOvIsqCWTRFD/ONHNfyOS8dA/Ippi5dsIgpyKWKZaAKZltbA==",
       "dev": true
     },
     "base64-js": {
@@ -10741,21 +11735,21 @@
       "dev": true
     },
     "body-parser": {
-      "version": "1.19.0",
-      "resolved": "https://registry.npmjs.org/body-parser/-/body-parser-1.19.0.tgz",
-      "integrity": "sha512-dhEPs72UPbDnAQJ9ZKMNTP6ptJaionhP5cBb541nXPlW60Jepo9RV/a4fX4XWW9CuFNK22krhrj1+rgzifNCsw==",
+      "version": "1.19.1",
+      "resolved": "https://registry.npmjs.org/body-parser/-/body-parser-1.19.1.tgz",
+      "integrity": "sha512-8ljfQi5eBk8EJfECMrgqNGWPEY5jWP+1IzkzkGdFFEwFQZZyaZ21UqdaHktgiMlH0xLHqIFtE/u2OYE5dOtViA==",
       "dev": true,
       "requires": {
-        "bytes": "3.1.0",
+        "bytes": "3.1.1",
         "content-type": "~1.0.4",
         "debug": "2.6.9",
         "depd": "~1.1.2",
-        "http-errors": "1.7.2",
+        "http-errors": "1.8.1",
         "iconv-lite": "0.4.24",
         "on-finished": "~2.3.0",
-        "qs": "6.7.0",
-        "raw-body": "2.4.0",
-        "type-is": "~1.6.17"
+        "qs": "6.9.6",
+        "raw-body": "2.4.2",
+        "type-is": "~1.6.18"
       },
       "dependencies": {
         "debug": {
@@ -10797,6 +11791,29 @@
         "wrap-ansi": "^7.0.0"
       },
       "dependencies": {
+        "emoji-regex": {
+          "version": "8.0.0",
+          "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-8.0.0.tgz",
+          "integrity": "sha512-MSjYzcWNOA0ewAHpz0MxpYFvwg6yjy1NG3xteoqz644VCo/RPgnr1/GGt+ic3iJTzQ8Eu3TdM14SawnVUmGE6A==",
+          "dev": true
+        },
+        "is-fullwidth-code-point": {
+          "version": "3.0.0",
+          "resolved": "https://registry.npmjs.org/is-fullwidth-code-point/-/is-fullwidth-code-point-3.0.0.tgz",
+          "integrity": "sha512-zymm5+u+sCsSWyD9qNaejV3DFvhCKclKdizYaJUuHA83RLjb7nSuGnddCHGv0hk+KY7BMAlsWeK4Ueg6EV6XQg==",
+          "dev": true
+        },
+        "string-width": {
+          "version": "4.2.3",
+          "resolved": "https://registry.npmjs.org/string-width/-/string-width-4.2.3.tgz",
+          "integrity": "sha512-wKyQRQpjJ0sIp62ErSZdGsjMJWsap5oRNihHhu6G7JVO/9jIB6UyevL+tXuOqrng8j/cxKTWyWUwvSTriiZz/g==",
+          "dev": true,
+          "requires": {
+            "emoji-regex": "^8.0.0",
+            "is-fullwidth-code-point": "^3.0.0",
+            "strip-ansi": "^6.0.1"
+          }
+        },
         "type-fest": {
           "version": "0.20.2",
           "resolved": "https://registry.npmjs.org/type-fest/-/type-fest-0.20.2.tgz",
@@ -10961,9 +11978,9 @@
       "dev": true
     },
     "builder-util-runtime": {
-      "version": "8.7.5",
-      "resolved": "https://registry.npmjs.org/builder-util-runtime/-/builder-util-runtime-8.7.5.tgz",
-      "integrity": "sha512-fgUFHKtMNjdvH6PDRFntdIGUPgwZ69sXsAqEulCtoiqgWes5agrMq/Ud274zjJRTbckYh2PHh8/1CpFc6dpsbQ==",
+      "version": "8.9.1",
+      "resolved": "https://registry.npmjs.org/builder-util-runtime/-/builder-util-runtime-8.9.1.tgz",
+      "integrity": "sha512-c8a8J3wK6BIVLW7ls+7TRK9igspTbzWmUqxFbgK0m40Ggm6efUbxtWVCGIjc+dtchyr5qAMAUL6iEGRdS/6vwg==",
       "requires": {
         "debug": "^4.3.2",
         "sax": "^1.2.4"
@@ -10982,9 +11999,9 @@
       "dev": true
     },
     "bytes": {
-      "version": "3.1.0",
-      "resolved": "https://registry.npmjs.org/bytes/-/bytes-3.1.0.tgz",
-      "integrity": "sha512-zauLjrfCG+xvoyaqLoV8bLVXXNGC4JqlxFCutSDWA6fJrTo2ZuvLYTqZ7aHBLZSMOopbzwv8f+wZcVzfVTI2Dg==",
+      "version": "3.1.1",
+      "resolved": "https://registry.npmjs.org/bytes/-/bytes-3.1.1.tgz",
+      "integrity": "sha512-dWe4nWO/ruEOY7HkUJ5gFt1DCFV9zPRoJr8pV0/ASQermOZjtq8jMjOprC0Kd10GLN+l7xaUPvxzJFWtxGu8Fg==",
       "dev": true
     },
     "cacache": {
@@ -11068,9 +12085,9 @@
       }
     },
     "camelcase": {
-      "version": "6.2.0",
-      "resolved": "https://registry.npmjs.org/camelcase/-/camelcase-6.2.0.tgz",
-      "integrity": "sha512-c7wVvbw3f37nuobQNtgsgG9POC9qMbNuMQmTCqZv23b6MIz0fcYpBiOlv9gEN/hdLdnZTDQhg6e9Dq5M1vKvfg==",
+      "version": "6.2.1",
+      "resolved": "https://registry.npmjs.org/camelcase/-/camelcase-6.2.1.tgz",
+      "integrity": "sha512-tVI4q5jjFV5CavAU8DXfza/TJcZutVKo/5Foskmsqcm0MsL91moHvwiGNnqaa2o6PF/7yT5ikDRcVcl8Rj6LCA==",
       "dev": true
     },
     "chalk": {
@@ -11158,6 +12175,12 @@
         "static-extend": "^0.1.1"
       }
     },
+    "clean-stack": {
+      "version": "2.2.0",
+      "resolved": "https://registry.npmjs.org/clean-stack/-/clean-stack-2.2.0.tgz",
+      "integrity": "sha512-4diC9HaTE+KRAMWhDhrGOECgWZxoevMc5TlkObMqNSsVU62PYzXZ/SMTjzyGAFF1YusgxGcSWTEXBhp0CPwQ1A==",
+      "dev": true
+    },
     "cli-boxes": {
       "version": "2.2.1",
       "resolved": "https://registry.npmjs.org/cli-boxes/-/cli-boxes-2.2.1.tgz",
@@ -11172,6 +12195,16 @@
         "restore-cursor": "^3.1.0"
       }
     },
+    "cli-truncate": {
+      "version": "3.1.0",
+      "resolved": "https://registry.npmjs.org/cli-truncate/-/cli-truncate-3.1.0.tgz",
+      "integrity": "sha512-wfOBkjXteqSnI59oPcJkcPl/ZmwvMMOj340qUIY1SKZCv0B9Cf4D4fAucRkIKQmsIuYK3x1rrgU7MeGRruiuiA==",
+      "dev": true,
+      "requires": {
+        "slice-ansi": "^5.0.0",
+        "string-width": "^5.0.0"
+      }
+    },
     "cli-width": {
       "version": "3.0.0",
       "resolved": "https://registry.npmjs.org/cli-width/-/cli-width-3.0.0.tgz",
@@ -11186,6 +12219,31 @@
         "string-width": "^4.2.0",
         "strip-ansi": "^6.0.0",
         "wrap-ansi": "^7.0.0"
+      },
+      "dependencies": {
+        "emoji-regex": {
+          "version": "8.0.0",
+          "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-8.0.0.tgz",
+          "integrity": "sha512-MSjYzcWNOA0ewAHpz0MxpYFvwg6yjy1NG3xteoqz644VCo/RPgnr1/GGt+ic3iJTzQ8Eu3TdM14SawnVUmGE6A==",
+          "dev": true
+        },
+        "is-fullwidth-code-point": {
+          "version": "3.0.0",
+          "resolved": "https://registry.npmjs.org/is-fullwidth-code-point/-/is-fullwidth-code-point-3.0.0.tgz",
+          "integrity": "sha512-zymm5+u+sCsSWyD9qNaejV3DFvhCKclKdizYaJUuHA83RLjb7nSuGnddCHGv0hk+KY7BMAlsWeK4Ueg6EV6XQg==",
+          "dev": true
+        },
+        "string-width": {
+          "version": "4.2.3",
+          "resolved": "https://registry.npmjs.org/string-width/-/string-width-4.2.3.tgz",
+          "integrity": "sha512-wKyQRQpjJ0sIp62ErSZdGsjMJWsap5oRNihHhu6G7JVO/9jIB6UyevL+tXuOqrng8j/cxKTWyWUwvSTriiZz/g==",
+          "dev": true,
+          "requires": {
+            "emoji-regex": "^8.0.0",
+            "is-fullwidth-code-point": "^3.0.0",
+            "strip-ansi": "^6.0.1"
+          }
+        }
       }
     },
     "clone-deep": {
@@ -11235,6 +12293,12 @@
       "resolved": "https://registry.npmjs.org/color-name/-/color-name-1.1.4.tgz",
       "integrity": "sha512-dOy+3AuW3a2wNbZHIuMZpTcgjGuLU/uBL/ubcZF9OXbDo8ff4O8yVp5Bf0efS8uEoYo5q4Fx7dY9OgQGXgAsQA=="
     },
+    "colorette": {
+      "version": "2.0.16",
+      "resolved": "https://registry.npmjs.org/colorette/-/colorette-2.0.16.tgz",
+      "integrity": "sha512-hUewv7oMjCp+wkBv5Rm0v87eJhq4woh5rSR+42YSQJKecCqgIqNkZ6lAlQms/BwHPJA5NKMRlpxPRv0n8HQW6g==",
+      "dev": true
+    },
     "colors": {
       "version": "1.4.0",
       "resolved": "https://registry.npmjs.org/colors/-/colors-1.4.0.tgz",
@@ -11284,9 +12348,9 @@
       }
     },
     "concurrently": {
-      "version": "6.2.2",
-      "resolved": "https://registry.npmjs.org/concurrently/-/concurrently-6.2.2.tgz",
-      "integrity": "sha512-7a45BjVakAl3pprLOeqaOoZfIWZRmdC68NkjyzPbKu0/pE6CRmqS3l8RG7Q2cX9LnRHkB0oPM6af8PS7NEQvYQ==",
+      "version": "6.4.0",
+      "resolved": "https://registry.npmjs.org/concurrently/-/concurrently-6.4.0.tgz",
+      "integrity": "sha512-HZ3D0RTQMH3oS4gvtYj1P+NBc6PzE2McEra6yEFcQKrUQ9HvtTGU4Dbne083F034p+LRb7kWU0tPRNvSGs1UCQ==",
       "dev": true,
       "requires": {
         "chalk": "^4.1.0",
@@ -11297,12 +12361,29 @@
         "supports-color": "^8.1.0",
         "tree-kill": "^1.2.2",
         "yargs": "^16.2.0"
+      },
+      "dependencies": {
+        "rxjs": {
+          "version": "6.6.7",
+          "resolved": "https://registry.npmjs.org/rxjs/-/rxjs-6.6.7.tgz",
+          "integrity": "sha512-hTdwr+7yYNIT5n4AMYp85KA6yw2Va0FLa3Rguvbpa4W3I5xynaBZo41cM3XM+4Q6fRMj3sBYIR1VAmZMXYJvRQ==",
+          "dev": true,
+          "requires": {
+            "tslib": "^1.9.0"
+          }
+        },
+        "tslib": {
+          "version": "1.14.1",
+          "resolved": "https://registry.npmjs.org/tslib/-/tslib-1.14.1.tgz",
+          "integrity": "sha512-Xni35NKzjgMrwevysHTCArtLDpPvye8zV/0E4EyYn43P7/7qvQwPh9BGkHewbMulVntbigmcT7rdX3BNo9wRJg==",
+          "dev": true
+        }
       }
     },
     "conf": {
-      "version": "10.0.3",
-      "resolved": "https://registry.npmjs.org/conf/-/conf-10.0.3.tgz",
-      "integrity": "sha512-4gtQ/Q36qVxBzMe6B7gWOAfni1VdhuHkIzxydHkclnwGmgN+eW4bb6jj73vigCfr7d3WlmqawvhZrpCUCTPYxQ==",
+      "version": "10.1.1",
+      "resolved": "https://registry.npmjs.org/conf/-/conf-10.1.1.tgz",
+      "integrity": "sha512-z2civwq/k8TMYtcn3SVP0Peso4otIWnHtcTuHhQ0zDZDdP4NTxqEc8owfkz4zBsdMYdn/LFcE+ZhbCeqkhtq3Q==",
       "requires": {
         "ajv": "^8.6.3",
         "ajv-formats": "^2.1.1",
@@ -11317,9 +12398,9 @@
       },
       "dependencies": {
         "ajv": {
-          "version": "8.6.3",
-          "resolved": "https://registry.npmjs.org/ajv/-/ajv-8.6.3.tgz",
-          "integrity": "sha512-SMJOdDP6LqTkD0Uq8qLi+gMwSt0imXLSV080qFVwJCpH9U6Mb+SUGHAXM0KNbcBPguytWyvFxcHgMLe2D2XSpw==",
+          "version": "8.8.2",
+          "resolved": "https://registry.npmjs.org/ajv/-/ajv-8.8.2.tgz",
+          "integrity": "sha512-x9VuX+R/jcFj1DHo/fCp99esgGDWiHENrKxaCENuCxpoMCmAt/COCGVDwA7kleEpEzJjDnvh3yGoOuLu0Dtllw==",
           "requires": {
             "fast-deep-equal": "^3.1.1",
             "json-schema-traverse": "^1.0.0",
@@ -11484,12 +12565,6 @@
       "integrity": "sha1-Z29us8OZl8LuGsOpJP1hJHSPV40=",
       "dev": true
     },
-    "core-js": {
-      "version": "3.18.1",
-      "resolved": "https://registry.npmjs.org/core-js/-/core-js-3.18.1.tgz",
-      "integrity": "sha512-vJlUi/7YdlCZeL6fXvWNaLUPh/id12WXj3MbkMw5uOyF0PfWPBNOCNbs53YqgrvtujLNlt9JQpruyIKkUZ+PKA==",
-      "optional": true
-    },
     "core-util-is": {
       "version": "1.0.3",
       "resolved": "https://registry.npmjs.org/core-util-is/-/core-util-is-1.0.3.tgz",
@@ -11554,8 +12629,29 @@
       "version": "1.1.1",
       "resolved": "https://registry.npmjs.org/create-require/-/create-require-1.1.1.tgz",
       "integrity": "sha512-dcKFX3jn0MpIaXjisoRvexIJVEKzaq7z2rZKxf+MSr9TkdmHmsU4m2lcLojrj/FHl8mk5VxMmYA+ftRkP/3oKQ==",
+      "dev": true
+    },
+    "cross-spawn": {
+      "version": "7.0.3",
+      "resolved": "https://registry.npmjs.org/cross-spawn/-/cross-spawn-7.0.3.tgz",
+      "integrity": "sha512-iRDPJKUPVEND7dHPO8rkbOnPpyDygcDFtWjpeWNCgy8WP2rXcxXL8TskReQl6OrB2G7+UJrags1q15Fudc7G6w==",
       "dev": true,
-      "peer": true
+      "requires": {
+        "path-key": "^3.1.0",
+        "shebang-command": "^2.0.0",
+        "which": "^2.0.1"
+      },
+      "dependencies": {
+        "which": {
+          "version": "2.0.2",
+          "resolved": "https://registry.npmjs.org/which/-/which-2.0.2.tgz",
+          "integrity": "sha512-BLI3Tl1TW3Pvl70l3yq3Y64i+awpwXqsGBYWkkqMtnbXgrMD+yj7rhW0kuEDxzJaYXGjEW5ogapKNMEKNMjibA==",
+          "dev": true,
+          "requires": {
+            "isexe": "^2.0.0"
+          }
+        }
+      }
     },
     "crypto-browserify": {
       "version": "3.12.0",
@@ -11629,9 +12725,9 @@
       }
     },
     "date-fns": {
-      "version": "2.24.0",
-      "resolved": "https://registry.npmjs.org/date-fns/-/date-fns-2.24.0.tgz",
-      "integrity": "sha512-6ujwvwgPID6zbI0o7UbURi2vlLDR9uP26+tW6Lg+Ji3w7dd0i3DOcjcClLjLPranT60SSEFBwdSyYwn/ZkPIuw==",
+      "version": "2.27.0",
+      "resolved": "https://registry.npmjs.org/date-fns/-/date-fns-2.27.0.tgz",
+      "integrity": "sha512-sj+J0Mo2p2X1e306MHq282WS4/A8Pz/95GIFcsPNMPMZVI3EUrAdSv90al1k+p74WGLCruMXk23bfEDZa71X9Q==",
       "dev": true
     },
     "date-format": {
@@ -11656,9 +12752,9 @@
       }
     },
     "debug": {
-      "version": "4.3.2",
-      "resolved": "https://registry.npmjs.org/debug/-/debug-4.3.2.tgz",
-      "integrity": "sha512-mOp8wKcvj7XxC78zLgw/ZA+6TSgkoE2C/ienthhRD298T7UNwAg9diBpLRxC0mOezLl4B0xV7M0cCO6P/O0Xhw==",
+      "version": "4.3.3",
+      "resolved": "https://registry.npmjs.org/debug/-/debug-4.3.3.tgz",
+      "integrity": "sha512-/zxw5+vh1Tfv+4Qn7a5nsbcJKPaSvCDhojn6FEl9vupwK2VCSDtEiEtqr8DFtzYFOdz63LBkxec7DYuc2jon6Q==",
       "requires": {
         "ms": "2.1.2"
       }
@@ -11857,13 +12953,20 @@
       "dev": true
     },
     "electron": {
-      "version": "14.2.0",
-      "resolved": "https://registry.npmjs.org/electron/-/electron-14.2.0.tgz",
-      "integrity": "sha512-6CmAv1P0xcwK3FQOSA27fHI36/wctSFVgj46VODn56srXXQWeolkK1VzeAFNE613iAuuH9jJdHvE3gz+c7XkNA==",
+      "version": "16.0.7",
+      "resolved": "https://registry.npmjs.org/electron/-/electron-16.0.7.tgz",
+      "integrity": "sha512-/IMwpBf2svhA1X/7Q58RV+Nn0fvUJsHniG4TizaO7q4iKFYSQ6hBvsLz+cylcZ8hRMKmVy5G1XaMNJID2ah23w==",
       "requires": {
-        "@electron/get": "^1.0.1",
+        "@electron/get": "^1.13.0",
         "@types/node": "^14.6.2",
         "extract-zip": "^1.0.3"
+      },
+      "dependencies": {
+        "@types/node": {
+          "version": "14.18.0",
+          "resolved": "https://registry.npmjs.org/@types/node/-/node-14.18.0.tgz",
+          "integrity": "sha512-0GeIl2kmVMXEnx8tg1SlG6Gg8vkqirrW752KqolYo1PHevhhZN3bhJ67qHj+bQaINhX0Ra3TlWwRvMCd9iEfNQ=="
+        }
       }
     },
     "electron-log": {
@@ -11888,15 +12991,15 @@
       }
     },
     "electron-updater": {
-      "version": "4.3.9",
-      "resolved": "https://registry.npmjs.org/electron-updater/-/electron-updater-4.3.9.tgz",
-      "integrity": "sha512-LCNfedSwZfS4Hza+pDyPR05LqHtGorCStaBgVpRnfKxOlZcvpYEX0AbMeH5XUtbtGRoH2V8osbbf2qKPNb7AsA==",
+      "version": "4.6.1",
+      "resolved": "https://registry.npmjs.org/electron-updater/-/electron-updater-4.6.1.tgz",
+      "integrity": "sha512-YsU1mHqXLrXXmBMsxhxy24PrbaB8rnpZDPmFa2gOkTYk/Ch13+R0fjsRSpPYvqtskVVY0ux8fu+HnUkVkqc7og==",
       "requires": {
-        "@types/semver": "^7.3.5",
-        "builder-util-runtime": "8.7.5",
+        "@types/semver": "^7.3.6",
+        "builder-util-runtime": "8.9.1",
         "fs-extra": "^10.0.0",
         "js-yaml": "^4.1.0",
-        "lazy-val": "^1.0.4",
+        "lazy-val": "^1.0.5",
         "lodash.escaperegexp": "^4.1.2",
         "lodash.isequal": "^4.5.0",
         "semver": "^7.3.5"
@@ -11986,9 +13089,10 @@
       }
     },
     "emoji-regex": {
-      "version": "8.0.0",
-      "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-8.0.0.tgz",
-      "integrity": "sha512-MSjYzcWNOA0ewAHpz0MxpYFvwg6yjy1NG3xteoqz644VCo/RPgnr1/GGt+ic3iJTzQ8Eu3TdM14SawnVUmGE6A=="
+      "version": "9.2.2",
+      "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-9.2.2.tgz",
+      "integrity": "sha512-L18DaJsXSUk2+42pv8mLs5jJT2hqFkFE4j21wOmgbUqsZ2hL72NsUU785g9RXgo3s0ZNgVl42TiHp3ZtOv/Vyg==",
+      "dev": true
     },
     "emojis-list": {
       "version": "3.0.0",
@@ -12011,36 +13115,39 @@
       }
     },
     "engine.io": {
-      "version": "4.1.1",
-      "resolved": "https://registry.npmjs.org/engine.io/-/engine.io-4.1.1.tgz",
-      "integrity": "sha512-t2E9wLlssQjGw0nluF6aYyfX8LwYU8Jj0xct+pAhfWfv/YrBn6TSNtEYsgxHIfaMqfrLx07czcMg9bMN6di+3w==",
+      "version": "6.1.0",
+      "resolved": "https://registry.npmjs.org/engine.io/-/engine.io-6.1.0.tgz",
+      "integrity": "sha512-ErhZOVu2xweCjEfYcTdkCnEYUiZgkAcBBAhW4jbIvNG8SLU3orAqoJCiytZjYF7eTpVmmCrLDjLIEaPlUAs1uw==",
       "dev": true,
       "requires": {
+        "@types/cookie": "^0.4.1",
+        "@types/cors": "^2.8.12",
+        "@types/node": ">=10.0.0",
         "accepts": "~1.3.4",
         "base64id": "2.0.0",
         "cookie": "~0.4.1",
         "cors": "~2.8.5",
         "debug": "~4.3.1",
-        "engine.io-parser": "~4.0.0",
-        "ws": "~7.4.2"
+        "engine.io-parser": "~5.0.0",
+        "ws": "~8.2.3"
       },
       "dependencies": {
         "ws": {
-          "version": "7.4.6",
-          "resolved": "https://registry.npmjs.org/ws/-/ws-7.4.6.tgz",
-          "integrity": "sha512-YmhHDO4MzaDLB+M9ym/mDA5z0naX8j7SIlT8f8z+I0VtzsRbekxEutHSme7NPS2qE8StCYQNUnfWdXta/Yu85A==",
+          "version": "8.2.3",
+          "resolved": "https://registry.npmjs.org/ws/-/ws-8.2.3.tgz",
+          "integrity": "sha512-wBuoj1BDpC6ZQ1B7DWQBYVLphPWkm8i9Y0/3YdHjHKHiohOJ1ws+3OccDWtH+PoC9DZD5WOTrJvNbWvjS6JWaA==",
           "dev": true,
           "requires": {}
         }
       }
     },
     "engine.io-parser": {
-      "version": "4.0.3",
-      "resolved": "https://registry.npmjs.org/engine.io-parser/-/engine.io-parser-4.0.3.tgz",
-      "integrity": "sha512-xEAAY0msNnESNPc00e19y5heTPX4y/TJ36gr8t1voOaNmTojP9b3oK3BbJLFufW2XFPQaaijpFewm2g2Um3uqA==",
+      "version": "5.0.2",
+      "resolved": "https://registry.npmjs.org/engine.io-parser/-/engine.io-parser-5.0.2.tgz",
+      "integrity": "sha512-wuiO7qO/OEkPJSFueuATIXtrxF7/6GTbAO9QLv7nnbjwZ5tYhLm9zxvLwxstRs0dcT0KUlWTjtIOs1T86jt12g==",
       "dev": true,
       "requires": {
-        "base64-arraybuffer": "0.1.4"
+        "base64-arraybuffer": "~1.0.1"
       }
     },
     "enhanced-resolve": {
@@ -12054,6 +13161,15 @@
         "tapable": "^1.0.0"
       }
     },
+    "enquirer": {
+      "version": "2.3.6",
+      "resolved": "https://registry.npmjs.org/enquirer/-/enquirer-2.3.6.tgz",
+      "integrity": "sha512-yjNnPr315/FjS4zIsUxYguYUPP2e1NK4d7E7ZOLiyYCcbFBiTMyID+2wvm2w6+pZ/odMA7cRkjhsPbltwBOrLg==",
+      "dev": true,
+      "requires": {
+        "ansi-colors": "^4.1.1"
+      }
+    },
     "ent": {
       "version": "2.2.0",
       "resolved": "https://registry.npmjs.org/ent/-/ent-2.2.0.tgz",
@@ -12173,9 +13289,9 @@
       }
     },
     "estraverse": {
-      "version": "5.2.0",
-      "resolved": "https://registry.npmjs.org/estraverse/-/estraverse-5.2.0.tgz",
-      "integrity": "sha512-BxbNGGNm0RyRYvUdHpIwv9IWzeM9XClbOxwoATuFdOE7ZE6wHL+HQ5T8hoPM+zHvmKzzsEqhgy0GrQ5X13afiQ==",
+      "version": "5.3.0",
+      "resolved": "https://registry.npmjs.org/estraverse/-/estraverse-5.3.0.tgz",
+      "integrity": "sha512-MMdARuVEQziNTeJD8DgMqmhwR11BRQ/cBP+pLtYdSTnf3MIO8fFeiINEbX36ZdNlfU/7A9f3gUw49B3oQsvwBA==",
       "dev": true
     },
     "esutils": {
@@ -12219,6 +13335,23 @@
         "safe-buffer": "^5.1.1"
       }
     },
+    "execa": {
+      "version": "5.1.1",
+      "resolved": "https://registry.npmjs.org/execa/-/execa-5.1.1.tgz",
+      "integrity": "sha512-8uSpZZocAZRBAPIEINJj3Lo9HyGitllczc27Eh5YYojjMFMn8yHMDMaUHE2Jqfq05D/wucwI4JGURyXt1vchyg==",
+      "dev": true,
+      "requires": {
+        "cross-spawn": "^7.0.3",
+        "get-stream": "^6.0.0",
+        "human-signals": "^2.1.0",
+        "is-stream": "^2.0.0",
+        "merge-stream": "^2.0.0",
+        "npm-run-path": "^4.0.1",
+        "onetime": "^5.1.2",
+        "signal-exit": "^3.0.3",
+        "strip-final-newline": "^2.0.0"
+      }
+    },
     "expand-brackets": {
       "version": "2.1.4",
       "resolved": "https://registry.npmjs.org/expand-brackets/-/expand-brackets-2.1.4.tgz",
@@ -12279,6 +13412,16 @@
         "chardet": "^0.7.0",
         "iconv-lite": "^0.4.24",
         "tmp": "^0.0.33"
+      },
+      "dependencies": {
+        "tmp": {
+          "version": "0.0.33",
+          "resolved": "https://registry.npmjs.org/tmp/-/tmp-0.0.33.tgz",
+          "integrity": "sha512-jRCJlojKnZ3addtTOjdIqoRuPEKBvNXcGYqzO6zWZX8KfKEpnGY5jfggJQ3EjKuu8D4bJRr0y+cYJFmYbImXGw==",
+          "requires": {
+            "os-tmpdir": "~1.0.2"
+          }
+        }
       }
     },
     "extglob": {
@@ -12522,9 +13665,9 @@
       }
     },
     "follow-redirects": {
-      "version": "1.14.4",
-      "resolved": "https://registry.npmjs.org/follow-redirects/-/follow-redirects-1.14.4.tgz",
-      "integrity": "sha512-zwGkiSXC1MUJG/qmeIFH2HBJx9u0V46QGUe3YR1fXG8bXQxq7fLj0RjLZQ5nubr9qNJUZrH+xUcwXEoXNpfS+g==",
+      "version": "1.14.6",
+      "resolved": "https://registry.npmjs.org/follow-redirects/-/follow-redirects-1.14.6.tgz",
+      "integrity": "sha512-fhUl5EwSJbbl8AR+uYL2KQDxLkdSjZGR36xy46AO7cOMTrCMON6Sa28FmAnC2tRTDbd/Uuzz3aJBv7EBN7JH8A==",
       "dev": true
     },
     "for-in": {
@@ -12543,10 +13686,9 @@
       }
     },
     "form-data": {
-      "version": "3.0.1",
-      "resolved": "https://registry.npmjs.org/form-data/-/form-data-3.0.1.tgz",
-      "integrity": "sha512-RHkBKtLWUVwd7SqRIvCZMEvAMoGUp0XU+seQiZejj0COz3RI3hWP4sCv3gZWWLjJTd7rGwcsF5eKZGii0r/hbg==",
-      "dev": true,
+      "version": "4.0.0",
+      "resolved": "https://registry.npmjs.org/form-data/-/form-data-4.0.0.tgz",
+      "integrity": "sha512-ETEklSGi5t0QMZuiXoA/Q6vcnxcLQP5vdugSpuAyi6SVGi2clPPp+xgEhuMaHC+zGgn31Kd235W35f7Hykkaww==",
       "requires": {
         "asynckit": "^0.4.0",
         "combined-stream": "^1.0.8",
@@ -12673,12 +13815,10 @@
       "dev": true
     },
     "get-stream": {
-      "version": "4.1.0",
-      "resolved": "https://registry.npmjs.org/get-stream/-/get-stream-4.1.0.tgz",
-      "integrity": "sha512-GMat4EJ5161kIy2HevLlr4luNjBgvmj413KaQA7jt4V8B4RDsfpHk7WQ9GVqfYyyx8OS/L66Kox+rJRNklLK7w==",
-      "requires": {
-        "pump": "^3.0.0"
-      }
+      "version": "6.0.1",
+      "resolved": "https://registry.npmjs.org/get-stream/-/get-stream-6.0.1.tgz",
+      "integrity": "sha512-ts6Wi+2j3jQjqi70w5AlN8DFnkSwC+MqmxEzdEALB2qXZYV3X/b1CTfgPLGJNMeAWxdPfU8FO1ms3NUfaHCPYg==",
+      "dev": true
     },
     "get-value": {
       "version": "2.0.6",
@@ -12715,13 +13855,12 @@
       }
     },
     "global-agent": {
-      "version": "2.2.0",
-      "resolved": "https://registry.npmjs.org/global-agent/-/global-agent-2.2.0.tgz",
-      "integrity": "sha512-+20KpaW6DDLqhG7JDiJpD1JvNvb8ts+TNl7BPOYcURqCrXqnN1Vf+XVOrkKJAFPqfX+oEhsdzOj1hLWkBTdNJg==",
+      "version": "3.0.0",
+      "resolved": "https://registry.npmjs.org/global-agent/-/global-agent-3.0.0.tgz",
+      "integrity": "sha512-PT6XReJ+D07JvGoxQMkT6qji/jVNfX/h364XHZOWeRzy64sSFr+xJ5OX7LI3b4MPQzdL4H8Y8M0xzPpsVMwA8Q==",
       "optional": true,
       "requires": {
         "boolean": "^3.0.1",
-        "core-js": "^3.6.5",
         "es6-error": "^4.1.1",
         "matcher": "^3.0.0",
         "roarr": "^2.15.3",
@@ -12801,6 +13940,16 @@
         "p-cancelable": "^1.0.0",
         "to-readable-stream": "^1.0.0",
         "url-parse-lax": "^3.0.0"
+      },
+      "dependencies": {
+        "get-stream": {
+          "version": "4.1.0",
+          "resolved": "https://registry.npmjs.org/get-stream/-/get-stream-4.1.0.tgz",
+          "integrity": "sha512-GMat4EJ5161kIy2HevLlr4luNjBgvmj413KaQA7jt4V8B4RDsfpHk7WQ9GVqfYyyx8OS/L66Kox+rJRNklLK7w==",
+          "requires": {
+            "pump": "^3.0.0"
+          }
+        }
       }
     },
     "graceful-fs": {
@@ -12951,24 +14100,16 @@
       "integrity": "sha512-carPklcUh7ROWRK7Cv27RPtdhYhUsela/ue5/jKzjegVvXDqM2ILE9Q2BGn9JZJh1g87cp56su/FgQSzcWS8cQ=="
     },
     "http-errors": {
-      "version": "1.7.2",
-      "resolved": "https://registry.npmjs.org/http-errors/-/http-errors-1.7.2.tgz",
-      "integrity": "sha512-uUQBt3H/cSIVfch6i1EuPNy/YsRSOUBXTVfZ+yR7Zjez3qjBz6i9+i4zjNaoqcoFVI4lQJ5plg63TvGfRSDCRg==",
+      "version": "1.8.1",
+      "resolved": "https://registry.npmjs.org/http-errors/-/http-errors-1.8.1.tgz",
+      "integrity": "sha512-Kpk9Sm7NmI+RHhnj6OIWDI1d6fIoFAtFt9RLaTMRlg/8w49juAStsrBgp0Dp4OdxdVbRIeKhtCUvoi/RuAhO4g==",
       "dev": true,
       "requires": {
         "depd": "~1.1.2",
-        "inherits": "2.0.3",
-        "setprototypeof": "1.1.1",
+        "inherits": "2.0.4",
+        "setprototypeof": "1.2.0",
         "statuses": ">= 1.5.0 < 2",
-        "toidentifier": "1.0.0"
-      },
-      "dependencies": {
-        "inherits": {
-          "version": "2.0.3",
-          "resolved": "https://registry.npmjs.org/inherits/-/inherits-2.0.3.tgz",
-          "integrity": "sha1-Yzwsg+PaQqUC9SRmAiSA9CCCYd4=",
-          "dev": true
-        }
+        "toidentifier": "1.0.1"
       }
     },
     "http-proxy": {
@@ -13008,6 +14149,18 @@
         "debug": "4"
       }
     },
+    "human-signals": {
+      "version": "2.1.0",
+      "resolved": "https://registry.npmjs.org/human-signals/-/human-signals-2.1.0.tgz",
+      "integrity": "sha512-B4FFZ6q/T2jhhksgkbEW3HBvWIfDW85snkQgawt07S7J5QXTk6BkNV+0yAeZrM5QpMAdYlocGoljn0sJ/WQkFw==",
+      "dev": true
+    },
+    "husky": {
+      "version": "7.0.4",
+      "resolved": "https://registry.npmjs.org/husky/-/husky-7.0.4.tgz",
+      "integrity": "sha512-vbaCKN2QLtP/vD4yvs6iz6hBEo6wkSzs8HpRah1Z6aGmF2KW5PdYuAd7uX5a+OyBZHBhd+TFLqgjUgytQr4RvQ==",
+      "dev": true
+    },
     "iconv-lite": {
       "version": "0.4.24",
       "resolved": "https://registry.npmjs.org/iconv-lite/-/iconv-lite-0.4.24.tgz",
@@ -13045,6 +14198,12 @@
       "integrity": "sha1-khi5srkoojixPcT7a21XbyMUU+o=",
       "dev": true
     },
+    "indent-string": {
+      "version": "4.0.0",
+      "resolved": "https://registry.npmjs.org/indent-string/-/indent-string-4.0.0.tgz",
+      "integrity": "sha512-EdDDZu4A2OyIK7Lr/2zG+w5jmbuk1DVBnEwREQvBzspBJkCEbRa8GxU1lghYcaGJCnRWibjDXlq779X1/y5xwg==",
+      "dev": true
+    },
     "infer-owner": {
       "version": "1.0.4",
       "resolved": "https://registry.npmjs.org/infer-owner/-/infer-owner-1.0.4.tgz",
@@ -13090,6 +14249,41 @@
         "string-width": "^4.1.0",
         "strip-ansi": "^6.0.0",
         "through": "^2.3.6"
+      },
+      "dependencies": {
+        "emoji-regex": {
+          "version": "8.0.0",
+          "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-8.0.0.tgz",
+          "integrity": "sha512-MSjYzcWNOA0ewAHpz0MxpYFvwg6yjy1NG3xteoqz644VCo/RPgnr1/GGt+ic3iJTzQ8Eu3TdM14SawnVUmGE6A=="
+        },
+        "is-fullwidth-code-point": {
+          "version": "3.0.0",
+          "resolved": "https://registry.npmjs.org/is-fullwidth-code-point/-/is-fullwidth-code-point-3.0.0.tgz",
+          "integrity": "sha512-zymm5+u+sCsSWyD9qNaejV3DFvhCKclKdizYaJUuHA83RLjb7nSuGnddCHGv0hk+KY7BMAlsWeK4Ueg6EV6XQg=="
+        },
+        "rxjs": {
+          "version": "6.6.7",
+          "resolved": "https://registry.npmjs.org/rxjs/-/rxjs-6.6.7.tgz",
+          "integrity": "sha512-hTdwr+7yYNIT5n4AMYp85KA6yw2Va0FLa3Rguvbpa4W3I5xynaBZo41cM3XM+4Q6fRMj3sBYIR1VAmZMXYJvRQ==",
+          "requires": {
+            "tslib": "^1.9.0"
+          }
+        },
+        "string-width": {
+          "version": "4.2.3",
+          "resolved": "https://registry.npmjs.org/string-width/-/string-width-4.2.3.tgz",
+          "integrity": "sha512-wKyQRQpjJ0sIp62ErSZdGsjMJWsap5oRNihHhu6G7JVO/9jIB6UyevL+tXuOqrng8j/cxKTWyWUwvSTriiZz/g==",
+          "requires": {
+            "emoji-regex": "^8.0.0",
+            "is-fullwidth-code-point": "^3.0.0",
+            "strip-ansi": "^6.0.1"
+          }
+        },
+        "tslib": {
+          "version": "1.14.1",
+          "resolved": "https://registry.npmjs.org/tslib/-/tslib-1.14.1.tgz",
+          "integrity": "sha512-Xni35NKzjgMrwevysHTCArtLDpPvye8zV/0E4EyYn43P7/7qvQwPh9BGkHewbMulVntbigmcT7rdX3BNo9wRJg=="
+        }
       }
     },
     "is-accessor-descriptor": {
@@ -13137,9 +14331,9 @@
       }
     },
     "is-core-module": {
-      "version": "2.7.0",
-      "resolved": "https://registry.npmjs.org/is-core-module/-/is-core-module-2.7.0.tgz",
-      "integrity": "sha512-ByY+tjCciCr+9nLryBYcSD50EOGWt95c7tIsKTG1J2ixKKXPvF7Ej3AVd+UfDydAJom3biBGDBALaO79ktwgEQ==",
+      "version": "2.8.0",
+      "resolved": "https://registry.npmjs.org/is-core-module/-/is-core-module-2.8.0.tgz",
+      "integrity": "sha512-vd15qHsaqrRL7dtH6QNuy0ndJmRDrS9HAM1CAiSifNUFv4x1a0CCVsj18hJ1mShxIG6T2i1sO78MkP56r0nYRw==",
       "dev": true,
       "requires": {
         "has": "^1.0.3"
@@ -13203,9 +14397,10 @@
       "dev": true
     },
     "is-fullwidth-code-point": {
-      "version": "3.0.0",
-      "resolved": "https://registry.npmjs.org/is-fullwidth-code-point/-/is-fullwidth-code-point-3.0.0.tgz",
-      "integrity": "sha512-zymm5+u+sCsSWyD9qNaejV3DFvhCKclKdizYaJUuHA83RLjb7nSuGnddCHGv0hk+KY7BMAlsWeK4Ueg6EV6XQg=="
+      "version": "4.0.0",
+      "resolved": "https://registry.npmjs.org/is-fullwidth-code-point/-/is-fullwidth-code-point-4.0.0.tgz",
+      "integrity": "sha512-O4L094N2/dZ7xqVdrXhh9r1KODPJpFms8B5sGdJLPy664AgvXsreZUyCQQNItZRDlYug4xStLjNp/sz3HvBowQ==",
+      "dev": true
     },
     "is-glob": {
       "version": "4.0.3",
@@ -13269,6 +14464,12 @@
       "resolved": "https://registry.npmjs.org/is-promise/-/is-promise-2.2.2.tgz",
       "integrity": "sha512-+lP4/6lKUBfQjZ2pdxThZvLUAafmZb8OAxFb8XXtiQmS35INgr85hdOGoEs124ez1FCnZJt6jau/T+alh58QFQ=="
     },
+    "is-stream": {
+      "version": "2.0.1",
+      "resolved": "https://registry.npmjs.org/is-stream/-/is-stream-2.0.1.tgz",
+      "integrity": "sha512-hFoiJiTl63nn+kstHGBtewWSKnQLpyb155KHheA1l39uvtO9nWIop1p3udqPcUd/xbF1VLMO4n7OI6p7RbngDg==",
+      "dev": true
+    },
     "is-typedarray": {
       "version": "1.0.0",
       "resolved": "https://registry.npmjs.org/is-typedarray/-/is-typedarray-1.0.0.tgz",
@@ -13320,21 +14521,82 @@
       "dev": true
     },
     "jasmine": {
-      "version": "3.9.0",
-      "resolved": "https://registry.npmjs.org/jasmine/-/jasmine-3.9.0.tgz",
-      "integrity": "sha512-JgtzteG7xnqZZ51fg7N2/wiQmXon09szkALcRMTgCMX4u/m17gVJFjObnvw5FXkZOWuweHPaPRVB6DI2uN0wVA==",
+      "version": "3.10.0",
+      "resolved": "https://registry.npmjs.org/jasmine/-/jasmine-3.10.0.tgz",
+      "integrity": "sha512-2Y42VsC+3CQCTzTwJezOvji4qLORmKIE0kwowWC+934Krn6ZXNQYljiwK5st9V3PVx96BSiDYXSB60VVah3IlQ==",
       "dev": true,
       "requires": {
         "glob": "^7.1.6",
-        "jasmine-core": "~3.9.0"
+        "jasmine-core": "~3.10.0"
       }
     },
     "jasmine-core": {
-      "version": "3.9.0",
-      "resolved": "https://registry.npmjs.org/jasmine-core/-/jasmine-core-3.9.0.tgz",
-      "integrity": "sha512-Tv3kVbPCGVrjsnHBZ38NsPU3sDOtNa0XmbG2baiyJqdb5/SPpDO6GVwJYtUryl6KB4q1Ssckwg612ES9Z0dreQ==",
+      "version": "3.10.1",
+      "resolved": "https://registry.npmjs.org/jasmine-core/-/jasmine-core-3.10.1.tgz",
+      "integrity": "sha512-ooZWSDVAdh79Rrj4/nnfklL3NQVra0BcuhcuWoAwwi+znLDoUeH87AFfeX8s+YeYi6xlv5nveRyaA1v7CintfA==",
       "dev": true
     },
+    "jasmine-ts": {
+      "version": "0.4.0",
+      "resolved": "https://registry.npmjs.org/jasmine-ts/-/jasmine-ts-0.4.0.tgz",
+      "integrity": "sha512-bIAWJKUwxfuZfGI1ctEbny7+dsyFzsN0eLzOokxh0qIUCofai2WUEKoe3MMllkGEBXJzbEVYr2IyhJBv4j7SBA==",
+      "dev": true,
+      "requires": {
+        "yargs": "^17.0.1"
+      },
+      "dependencies": {
+        "emoji-regex": {
+          "version": "8.0.0",
+          "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-8.0.0.tgz",
+          "integrity": "sha512-MSjYzcWNOA0ewAHpz0MxpYFvwg6yjy1NG3xteoqz644VCo/RPgnr1/GGt+ic3iJTzQ8Eu3TdM14SawnVUmGE6A==",
+          "dev": true
+        },
+        "is-fullwidth-code-point": {
+          "version": "3.0.0",
+          "resolved": "https://registry.npmjs.org/is-fullwidth-code-point/-/is-fullwidth-code-point-3.0.0.tgz",
+          "integrity": "sha512-zymm5+u+sCsSWyD9qNaejV3DFvhCKclKdizYaJUuHA83RLjb7nSuGnddCHGv0hk+KY7BMAlsWeK4Ueg6EV6XQg==",
+          "dev": true
+        },
+        "string-width": {
+          "version": "4.2.3",
+          "resolved": "https://registry.npmjs.org/string-width/-/string-width-4.2.3.tgz",
+          "integrity": "sha512-wKyQRQpjJ0sIp62ErSZdGsjMJWsap5oRNihHhu6G7JVO/9jIB6UyevL+tXuOqrng8j/cxKTWyWUwvSTriiZz/g==",
+          "dev": true,
+          "requires": {
+            "emoji-regex": "^8.0.0",
+            "is-fullwidth-code-point": "^3.0.0",
+            "strip-ansi": "^6.0.1"
+          }
+        },
+        "y18n": {
+          "version": "5.0.8",
+          "resolved": "https://registry.npmjs.org/y18n/-/y18n-5.0.8.tgz",
+          "integrity": "sha512-0pfFzegeDWJHJIAmTLRP2DwHjdF5s7jo9tuztdQxAhINCdvS+3nGINqPd00AphqJR/0LhANUS6/+7SCb98YOfA==",
+          "dev": true
+        },
+        "yargs": {
+          "version": "17.3.1",
+          "resolved": "https://registry.npmjs.org/yargs/-/yargs-17.3.1.tgz",
+          "integrity": "sha512-WUANQeVgjLbNsEmGk20f+nlHgOqzRFpiGWVaBrYGYIGANIIu3lWjoyi0fNlFmJkvfhCZ6BXINe7/W2O2bV4iaA==",
+          "dev": true,
+          "requires": {
+            "cliui": "^7.0.2",
+            "escalade": "^3.1.1",
+            "get-caller-file": "^2.0.5",
+            "require-directory": "^2.1.1",
+            "string-width": "^4.2.3",
+            "y18n": "^5.0.5",
+            "yargs-parser": "^21.0.0"
+          }
+        },
+        "yargs-parser": {
+          "version": "21.0.0",
+          "resolved": "https://registry.npmjs.org/yargs-parser/-/yargs-parser-21.0.0.tgz",
+          "integrity": "sha512-z9kApYUOCwoeZ78rfRYYWdiU/iNL6mwwYlkkZfJoyMR1xps+NEBX5X7XmRpxkZHhXJ6+Ey00IwKxBBSW9FIjyA==",
+          "dev": true
+        }
+      }
+    },
     "jasmine-ts-console-reporter": {
       "version": "3.1.1",
       "resolved": "https://registry.npmjs.org/jasmine-ts-console-reporter/-/jasmine-ts-console-reporter-3.1.1.tgz",
@@ -13396,6 +14658,19 @@
         "whatwg-url": "^8.5.0",
         "ws": "^7.4.6",
         "xml-name-validator": "^3.0.0"
+      },
+      "dependencies": {
+        "form-data": {
+          "version": "3.0.1",
+          "resolved": "https://registry.npmjs.org/form-data/-/form-data-3.0.1.tgz",
+          "integrity": "sha512-RHkBKtLWUVwd7SqRIvCZMEvAMoGUp0XU+seQiZejj0COz3RI3hWP4sCv3gZWWLjJTd7rGwcsF5eKZGii0r/hbg==",
+          "dev": true,
+          "requires": {
+            "asynckit": "^0.4.0",
+            "combined-stream": "^1.0.8",
+            "mime-types": "^2.1.12"
+          }
+        }
       }
     },
     "json-buffer": {
@@ -13444,9 +14719,9 @@
       }
     },
     "karma": {
-      "version": "6.3.4",
-      "resolved": "https://registry.npmjs.org/karma/-/karma-6.3.4.tgz",
-      "integrity": "sha512-hbhRogUYIulfkBTZT7xoPrCYhRBnBoqbbL4fszWD0ReFGUxU+LYBr3dwKdAluaDQ/ynT9/7C+Lf7pPNW4gSx4Q==",
+      "version": "6.3.9",
+      "resolved": "https://registry.npmjs.org/karma/-/karma-6.3.9.tgz",
+      "integrity": "sha512-E/MqdLM9uVIhfuyVnrhlGBu4miafBdXEAEqCmwdEMh3n17C7UWC/8Kvm3AYKr91gc7scutekZ0xv6rxRaUCtnw==",
       "dev": true,
       "requires": {
         "body-parser": "^1.19.0",
@@ -13467,10 +14742,10 @@
         "qjobs": "^1.2.0",
         "range-parser": "^1.2.1",
         "rimraf": "^3.0.2",
-        "socket.io": "^3.1.0",
+        "socket.io": "^4.2.0",
         "source-map": "^0.6.1",
         "tmp": "^0.2.1",
-        "ua-parser-js": "^0.7.28",
+        "ua-parser-js": "^0.7.30",
         "yargs": "^16.1.1"
       },
       "dependencies": {
@@ -13479,15 +14754,6 @@
           "resolved": "https://registry.npmjs.org/source-map/-/source-map-0.6.1.tgz",
           "integrity": "sha512-UjgapumWlbMhkBgzT7Ykc5YXUT46F0iKu8SGXq0bcwP5dz/h0Plj6enJqjz1Zbq2l5WaqYnrVbwWOWMyF3F47g==",
           "dev": true
-        },
-        "tmp": {
-          "version": "0.2.1",
-          "resolved": "https://registry.npmjs.org/tmp/-/tmp-0.2.1.tgz",
-          "integrity": "sha512-76SUhtfqR2Ijn+xllcI5P1oyannHNHByD80W1q447gU3mp9G9PSpGdWmjUOHRDPiHYacIk66W7ubDTuPF3BEtQ==",
-          "dev": true,
-          "requires": {
-            "rimraf": "^3.0.0"
-          }
         }
       }
     },
@@ -13519,9 +14785,9 @@
       }
     },
     "karma-firefox-launcher": {
-      "version": "2.1.1",
-      "resolved": "https://registry.npmjs.org/karma-firefox-launcher/-/karma-firefox-launcher-2.1.1.tgz",
-      "integrity": "sha512-VzDMgPseXak9DtfyE1O5bB2BwsMy1zzO1kUxVW1rP0yhC4tDNJ0p3JoFdzvrK4QqVzdqUMa9Rx9YzkdFp8hz3Q==",
+      "version": "2.1.2",
+      "resolved": "https://registry.npmjs.org/karma-firefox-launcher/-/karma-firefox-launcher-2.1.2.tgz",
+      "integrity": "sha512-VV9xDQU1QIboTrjtGVD4NCfzIH7n01ZXqy/qpBhnOeGVOkG5JYPEm8kuSd7psHE6WouZaQ9Ool92g8LFweSNMA==",
       "dev": true,
       "requires": {
         "is-wsl": "^2.2.0",
@@ -13643,14 +14909,118 @@
       "resolved": "https://registry.npmjs.org/lazy-val/-/lazy-val-1.0.5.tgz",
       "integrity": "sha512-0/BnGCCfyUMkBpeDgWihanIAF9JmZhHBgUhEqzvf+adhNGLoP6TaiI5oF8oyb3I45P+PcnrqihSf01M0l0G5+Q=="
     },
-    "levn": {
-      "version": "0.3.0",
-      "resolved": "https://registry.npmjs.org/levn/-/levn-0.3.0.tgz",
-      "integrity": "sha1-OwmSTt+fCDwEkP3UwLxEIeBHZO4=",
+    "levn": {
+      "version": "0.3.0",
+      "resolved": "https://registry.npmjs.org/levn/-/levn-0.3.0.tgz",
+      "integrity": "sha1-OwmSTt+fCDwEkP3UwLxEIeBHZO4=",
+      "dev": true,
+      "requires": {
+        "prelude-ls": "~1.1.2",
+        "type-check": "~0.3.2"
+      }
+    },
+    "lilconfig": {
+      "version": "2.0.4",
+      "resolved": "https://registry.npmjs.org/lilconfig/-/lilconfig-2.0.4.tgz",
+      "integrity": "sha512-bfTIN7lEsiooCocSISTWXkiWJkRqtL9wYtYy+8EK3Y41qh3mpwPU0ycTOgjdY9ErwXCc8QyrQp82bdL0Xkm9yA==",
+      "dev": true
+    },
+    "lint-staged": {
+      "version": "12.1.2",
+      "resolved": "https://registry.npmjs.org/lint-staged/-/lint-staged-12.1.2.tgz",
+      "integrity": "sha512-bSMcQVqMW98HLLLR2c2tZ+vnDCnx4fd+0QJBQgN/4XkdspGRPc8DGp7UuOEBe1ApCfJ+wXXumYnJmU+wDo7j9A==",
+      "dev": true,
+      "requires": {
+        "cli-truncate": "^3.1.0",
+        "colorette": "^2.0.16",
+        "commander": "^8.3.0",
+        "debug": "^4.3.2",
+        "enquirer": "^2.3.6",
+        "execa": "^5.1.1",
+        "lilconfig": "2.0.4",
+        "listr2": "^3.13.3",
+        "micromatch": "^4.0.4",
+        "normalize-path": "^3.0.0",
+        "object-inspect": "^1.11.0",
+        "string-argv": "^0.3.1",
+        "supports-color": "^9.0.2",
+        "yaml": "^1.10.2"
+      },
+      "dependencies": {
+        "commander": {
+          "version": "8.3.0",
+          "resolved": "https://registry.npmjs.org/commander/-/commander-8.3.0.tgz",
+          "integrity": "sha512-OkTL9umf+He2DZkUq8f8J9of7yL6RJKI24dVITBmNfZBmri9zYZQrKkuXiKhyfPSu8tUhnVBB1iKXevvnlR4Ww==",
+          "dev": true
+        },
+        "supports-color": {
+          "version": "9.2.1",
+          "resolved": "https://registry.npmjs.org/supports-color/-/supports-color-9.2.1.tgz",
+          "integrity": "sha512-Obv7ycoCTG51N7y175StI9BlAXrmgZrFhZOb0/PyjHBher/NmsdBgbbQ1Inhq+gIhz6+7Gb+jWF2Vqi7Mf1xnQ==",
+          "dev": true
+        }
+      }
+    },
+    "listr2": {
+      "version": "3.13.5",
+      "resolved": "https://registry.npmjs.org/listr2/-/listr2-3.13.5.tgz",
+      "integrity": "sha512-3n8heFQDSk+NcwBn3CgxEibZGaRzx+pC64n3YjpMD1qguV4nWus3Al+Oo3KooqFKTQEJ1v7MmnbnyyNspgx3NA==",
       "dev": true,
       "requires": {
-        "prelude-ls": "~1.1.2",
-        "type-check": "~0.3.2"
+        "cli-truncate": "^2.1.0",
+        "colorette": "^2.0.16",
+        "log-update": "^4.0.0",
+        "p-map": "^4.0.0",
+        "rfdc": "^1.3.0",
+        "rxjs": "^7.4.0",
+        "through": "^2.3.8",
+        "wrap-ansi": "^7.0.0"
+      },
+      "dependencies": {
+        "cli-truncate": {
+          "version": "2.1.0",
+          "resolved": "https://registry.npmjs.org/cli-truncate/-/cli-truncate-2.1.0.tgz",
+          "integrity": "sha512-n8fOixwDD6b/ObinzTrp1ZKFzbgvKZvuz/TvejnLn1aQfC6r52XEx85FmuC+3HI+JM7coBRXUvNqEU2PHVrHpg==",
+          "dev": true,
+          "requires": {
+            "slice-ansi": "^3.0.0",
+            "string-width": "^4.2.0"
+          }
+        },
+        "emoji-regex": {
+          "version": "8.0.0",
+          "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-8.0.0.tgz",
+          "integrity": "sha512-MSjYzcWNOA0ewAHpz0MxpYFvwg6yjy1NG3xteoqz644VCo/RPgnr1/GGt+ic3iJTzQ8Eu3TdM14SawnVUmGE6A==",
+          "dev": true
+        },
+        "is-fullwidth-code-point": {
+          "version": "3.0.0",
+          "resolved": "https://registry.npmjs.org/is-fullwidth-code-point/-/is-fullwidth-code-point-3.0.0.tgz",
+          "integrity": "sha512-zymm5+u+sCsSWyD9qNaejV3DFvhCKclKdizYaJUuHA83RLjb7nSuGnddCHGv0hk+KY7BMAlsWeK4Ueg6EV6XQg==",
+          "dev": true
+        },
+        "slice-ansi": {
+          "version": "3.0.0",
+          "resolved": "https://registry.npmjs.org/slice-ansi/-/slice-ansi-3.0.0.tgz",
+          "integrity": "sha512-pSyv7bSTC7ig9Dcgbw9AuRNUb5k5V6oDudjZoMBSr13qpLBG7tB+zgCkARjq7xIUgdz5P1Qe8u+rSGdouOOIyQ==",
+          "dev": true,
+          "requires": {
+            "ansi-styles": "^4.0.0",
+            "astral-regex": "^2.0.0",
+            "is-fullwidth-code-point": "^3.0.0"
+          }
+        },
+        "string-width": {
+          "version": "4.2.3",
+          "resolved": "https://registry.npmjs.org/string-width/-/string-width-4.2.3.tgz",
+          "integrity": "sha512-wKyQRQpjJ0sIp62ErSZdGsjMJWsap5oRNihHhu6G7JVO/9jIB6UyevL+tXuOqrng8j/cxKTWyWUwvSTriiZz/g==",
+          "dev": true,
+          "requires": {
+            "emoji-regex": "^8.0.0",
+            "is-fullwidth-code-point": "^3.0.0",
+            "strip-ansi": "^6.0.1"
+          }
+        }
       }
     },
     "loader-runner": {
@@ -13694,6 +15064,65 @@
       "resolved": "https://registry.npmjs.org/lodash.isequal/-/lodash.isequal-4.5.0.tgz",
       "integrity": "sha1-QVxEePK8wwEgwizhDtMib30+GOA="
     },
+    "log-update": {
+      "version": "4.0.0",
+      "resolved": "https://registry.npmjs.org/log-update/-/log-update-4.0.0.tgz",
+      "integrity": "sha512-9fkkDevMefjg0mmzWFBW8YkFP91OrizzkW3diF7CpG+S2EYdy4+TVfGwz1zeF8x7hCx1ovSPTOE9Ngib74qqUg==",
+      "dev": true,
+      "requires": {
+        "ansi-escapes": "^4.3.0",
+        "cli-cursor": "^3.1.0",
+        "slice-ansi": "^4.0.0",
+        "wrap-ansi": "^6.2.0"
+      },
+      "dependencies": {
+        "emoji-regex": {
+          "version": "8.0.0",
+          "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-8.0.0.tgz",
+          "integrity": "sha512-MSjYzcWNOA0ewAHpz0MxpYFvwg6yjy1NG3xteoqz644VCo/RPgnr1/GGt+ic3iJTzQ8Eu3TdM14SawnVUmGE6A==",
+          "dev": true
+        },
+        "is-fullwidth-code-point": {
+          "version": "3.0.0",
+          "resolved": "https://registry.npmjs.org/is-fullwidth-code-point/-/is-fullwidth-code-point-3.0.0.tgz",
+          "integrity": "sha512-zymm5+u+sCsSWyD9qNaejV3DFvhCKclKdizYaJUuHA83RLjb7nSuGnddCHGv0hk+KY7BMAlsWeK4Ueg6EV6XQg==",
+          "dev": true
+        },
+        "slice-ansi": {
+          "version": "4.0.0",
+          "resolved": "https://registry.npmjs.org/slice-ansi/-/slice-ansi-4.0.0.tgz",
+          "integrity": "sha512-qMCMfhY040cVHT43K9BFygqYbUPFZKHOg7K73mtTWJRb8pyP3fzf4Ixd5SzdEJQ6MRUg/WBnOLxghZtKKurENQ==",
+          "dev": true,
+          "requires": {
+            "ansi-styles": "^4.0.0",
+            "astral-regex": "^2.0.0",
+            "is-fullwidth-code-point": "^3.0.0"
+          }
+        },
+        "string-width": {
+          "version": "4.2.3",
+          "resolved": "https://registry.npmjs.org/string-width/-/string-width-4.2.3.tgz",
+          "integrity": "sha512-wKyQRQpjJ0sIp62ErSZdGsjMJWsap5oRNihHhu6G7JVO/9jIB6UyevL+tXuOqrng8j/cxKTWyWUwvSTriiZz/g==",
+          "dev": true,
+          "requires": {
+            "emoji-regex": "^8.0.0",
+            "is-fullwidth-code-point": "^3.0.0",
+            "strip-ansi": "^6.0.1"
+          }
+        },
+        "wrap-ansi": {
+          "version": "6.2.0",
+          "resolved": "https://registry.npmjs.org/wrap-ansi/-/wrap-ansi-6.2.0.tgz",
+          "integrity": "sha512-r6lPcBGxZXlIcymEu7InxDMhdW0KDxpLgoFLcguasxCaJ/SOIZwINatK9KY/tf+ZrlywOKU0UDj3ATXUBfxJXA==",
+          "dev": true,
+          "requires": {
+            "ansi-styles": "^4.0.0",
+            "string-width": "^4.1.0",
+            "strip-ansi": "^6.0.0"
+          }
+        }
+      }
+    },
     "log4js": {
       "version": "6.3.0",
       "resolved": "https://registry.npmjs.org/log4js/-/log4js-6.3.0.tgz",
@@ -13759,8 +15188,7 @@
       "version": "1.3.6",
       "resolved": "https://registry.npmjs.org/make-error/-/make-error-1.3.6.tgz",
       "integrity": "sha512-s8UhlNe7vPKomQhC1qFelMokr/Sc3AgNbso3n74mVPA5LTZwkB9NlXf4XPamLxJE8h0gh73rM94xvwRT2CVInw==",
-      "dev": true,
-      "peer": true
+      "dev": true
     },
     "map-cache": {
       "version": "0.2.2",
@@ -13821,6 +15249,12 @@
         "readable-stream": "^2.0.1"
       }
     },
+    "merge-stream": {
+      "version": "2.0.0",
+      "resolved": "https://registry.npmjs.org/merge-stream/-/merge-stream-2.0.0.tgz",
+      "integrity": "sha512-abv/qOcuPfk3URPfDzmZU1LKmuw8kT+0nIHvKrKgFrwifol/doWcdA4ZqsWQ8ENrFKkd67Mfpo/LovbIUsbt3w==",
+      "dev": true
+    },
     "micromatch": {
       "version": "4.0.4",
       "resolved": "https://registry.npmjs.org/micromatch/-/micromatch-4.0.4.tgz",
@@ -13850,22 +15284,22 @@
       }
     },
     "mime": {
-      "version": "2.5.2",
-      "resolved": "https://registry.npmjs.org/mime/-/mime-2.5.2.tgz",
-      "integrity": "sha512-tqkh47FzKeCPD2PUiPB6pkbMzsCasjxAfC62/Wap5qrUWcb+sFasXUC5I3gYM5iBM8v/Qpn4UK0x+j0iHyFPDg==",
+      "version": "2.6.0",
+      "resolved": "https://registry.npmjs.org/mime/-/mime-2.6.0.tgz",
+      "integrity": "sha512-USPkMeET31rOMiarsBNIHZKLGgvKc/LrjofAnBlOttf5ajRvqiRA8QsenbcooctK6d6Ts6aqZXBA+XbkKthiQg==",
       "dev": true
     },
     "mime-db": {
-      "version": "1.49.0",
-      "resolved": "https://registry.npmjs.org/mime-db/-/mime-db-1.49.0.tgz",
-      "integrity": "sha512-CIc8j9URtOVApSFCQIF+VBkX1RwXp/oMMOrqdyXSBXq5RWNEsRfyj1kiRnQgmNXmHxPoFIxOroKA3zcU9P+nAA=="
+      "version": "1.51.0",
+      "resolved": "https://registry.npmjs.org/mime-db/-/mime-db-1.51.0.tgz",
+      "integrity": "sha512-5y8A56jg7XVQx2mbv1lu49NR4dokRnhZYTtL+KGfaa27uq4pSTXkwQkFJl4pkRMyNFz/EtYDSkiiEHx3F7UN6g=="
     },
     "mime-types": {
-      "version": "2.1.32",
-      "resolved": "https://registry.npmjs.org/mime-types/-/mime-types-2.1.32.tgz",
-      "integrity": "sha512-hJGaVS4G4c9TSMYh2n6SQAGrC4RnfU+daP8G7cSCmaqNjiOoUY0VHCMS42pxnQmVF1GWwFhbHWn3RIxCqTmZ9A==",
+      "version": "2.1.34",
+      "resolved": "https://registry.npmjs.org/mime-types/-/mime-types-2.1.34.tgz",
+      "integrity": "sha512-6cP692WwGIs9XXdOO4++N+7qjqv0rqxxVvJ3VHPh/Sc9mVZcQP+ZGhkKiTvWMQRr2tbHkJP/Yn7Y0npb3ZBs4A==",
       "requires": {
-        "mime-db": "1.49.0"
+        "mime-db": "1.51.0"
       }
     },
     "mimic-fn": {
@@ -14117,9 +15551,9 @@
       "integrity": "sha512-mmcei9JghVNDYydghQmeDX8KoAm0FAiYyIcUt/N4nhyAipB17pllZQDOJD2fotxABnt4Mdz+dKTO7eftLg4d0A=="
     },
     "node-fetch": {
-      "version": "2.6.5",
-      "resolved": "https://registry.npmjs.org/node-fetch/-/node-fetch-2.6.5.tgz",
-      "integrity": "sha512-mmlIVHJEu5rnIxgEgez6b9GgWXbkZj5YZ7fx+2r94a2E+Uirsp6HsPTPlomfdHtpt/B0cdKviwkoaM6pyvUOpQ==",
+      "version": "2.6.6",
+      "resolved": "https://registry.npmjs.org/node-fetch/-/node-fetch-2.6.6.tgz",
+      "integrity": "sha512-Z8/6vRlTUChSdIgMa51jxQ4lrw/Jy5SOW10ObaA47/RElsAN2c5Pn8bTgFGWn/ibwzXTE8qwr1Yzx28vsecXEA==",
       "requires": {
         "whatwg-url": "^5.0.0"
       },
@@ -14190,20 +15624,20 @@
       }
     },
     "nodemon": {
-      "version": "2.0.13",
-      "resolved": "https://registry.npmjs.org/nodemon/-/nodemon-2.0.13.tgz",
-      "integrity": "sha512-UMXMpsZsv1UXUttCn6gv8eQPhn6DR4BW+txnL3IN5IHqrCwcrT/yWHfL35UsClGXknTH79r5xbu+6J1zNHuSyA==",
+      "version": "2.0.15",
+      "resolved": "https://registry.npmjs.org/nodemon/-/nodemon-2.0.15.tgz",
+      "integrity": "sha512-gdHMNx47Gw7b3kWxJV64NI+Q5nfl0y5DgDbiVtShiwa7Z0IZ07Ll4RLFo6AjrhzMtoEZn5PDE3/c2AbVsiCkpA==",
       "dev": true,
       "requires": {
-        "chokidar": "^3.2.2",
-        "debug": "^3.2.6",
+        "chokidar": "^3.5.2",
+        "debug": "^3.2.7",
         "ignore-by-default": "^1.0.1",
         "minimatch": "^3.0.4",
-        "pstree.remy": "^1.1.7",
+        "pstree.remy": "^1.1.8",
         "semver": "^5.7.1",
         "supports-color": "^5.5.0",
         "touch": "^3.1.0",
-        "undefsafe": "^2.0.3",
+        "undefsafe": "^2.0.5",
         "update-notifier": "^5.1.0"
       },
       "dependencies": {
@@ -14268,6 +15702,15 @@
         "pify": "^3.0.0"
       }
     },
+    "npm-run-path": {
+      "version": "4.0.1",
+      "resolved": "https://registry.npmjs.org/npm-run-path/-/npm-run-path-4.0.1.tgz",
+      "integrity": "sha512-S48WzZW777zhNIrn7gxOlISNAqi9ZC/uQFnRdbeIHhZhCA6UqpkOT8T1G7BvfdgP4Er8gF4sUbaS0i7QvIfCWw==",
+      "dev": true,
+      "requires": {
+        "path-key": "^3.0.0"
+      }
+    },
     "npmlog": {
       "version": "4.1.2",
       "resolved": "https://registry.npmjs.org/npmlog/-/npmlog-4.1.2.tgz",
@@ -14317,6 +15760,12 @@
         }
       }
     },
+    "object-inspect": {
+      "version": "1.11.1",
+      "resolved": "https://registry.npmjs.org/object-inspect/-/object-inspect-1.11.1.tgz",
+      "integrity": "sha512-If7BjFlpkzzBeV1cqgT3OSWT3azyoxDGajR+iGnFBfVV2EWyDyWaZZW2ERDjUaY2QM8i5jI3Sj7mhsM4DDAqWA==",
+      "dev": true
+    },
     "object-keys": {
       "version": "1.1.1",
       "resolved": "https://registry.npmjs.org/object-keys/-/object-keys-1.1.1.tgz",
@@ -14420,6 +15869,15 @@
         "p-limit": "^2.0.0"
       }
     },
+    "p-map": {
+      "version": "4.0.0",
+      "resolved": "https://registry.npmjs.org/p-map/-/p-map-4.0.0.tgz",
+      "integrity": "sha512-/bjOqmgETBYB5BoEeGVea8dmvHb2m9GLy1E9W43yeyfP6QQCZGFNa+XRceJEuDB6zqr+gKpIAmlLebMpykw/MQ==",
+      "dev": true,
+      "requires": {
+        "aggregate-error": "^3.0.0"
+      }
+    },
     "p-try": {
       "version": "2.2.0",
       "resolved": "https://registry.npmjs.org/p-try/-/p-try-2.2.0.tgz",
@@ -14522,6 +15980,12 @@
       "integrity": "sha1-F0uSaHNVNP+8es5r9TpanhtcX18=",
       "dev": true
     },
+    "path-key": {
+      "version": "3.1.1",
+      "resolved": "https://registry.npmjs.org/path-key/-/path-key-3.1.1.tgz",
+      "integrity": "sha512-ojmeN0qd+y0jszEtoY48r0Peq5dwMEkIlCOu6Q5f41lfkswXuKtYrhgoTpLnyIcHm24Uhqx+5Tqm2InSwLhE6Q==",
+      "dev": true
+    },
     "path-parse": {
       "version": "1.0.7",
       "resolved": "https://registry.npmjs.org/path-parse/-/path-parse-1.0.7.tgz",
@@ -14619,6 +16083,12 @@
       "resolved": "https://registry.npmjs.org/prepend-http/-/prepend-http-2.0.0.tgz",
       "integrity": "sha1-6SQ0v6XqjBn0HN/UAddBo8gZ2Jc="
     },
+    "prettier": {
+      "version": "2.5.1",
+      "resolved": "https://registry.npmjs.org/prettier/-/prettier-2.5.1.tgz",
+      "integrity": "sha512-vBZcPRUR5MZJwoyi3ZoyQlc1rXeEck8KgeC9AwwOn+exuxLxq5toTRDTSaVrXHxelDMHy9zlicw8u66yxoSUFg==",
+      "dev": true
+    },
     "process": {
       "version": "0.11.10",
       "resolved": "https://registry.npmjs.org/process/-/process-0.11.10.tgz",
@@ -14739,9 +16209,9 @@
       "dev": true
     },
     "qs": {
-      "version": "6.7.0",
-      "resolved": "https://registry.npmjs.org/qs/-/qs-6.7.0.tgz",
-      "integrity": "sha512-VCdBRNFTX1fyE7Nb6FYoURo/SPe62QCaAyzJvUjwRaIsc+NePBEniHlvxFmmX56+HZphIGtV0XeCirBtpDrTyQ==",
+      "version": "6.9.6",
+      "resolved": "https://registry.npmjs.org/qs/-/qs-6.9.6.tgz",
+      "integrity": "sha512-TIRk4aqYLNoJUbd+g2lEdz5kLWIuTMRagAXxl78Q0RiVjAOugHmeKNGdd3cwo/ktpf9aL9epCfFqWDEKysUlLQ==",
       "dev": true
     },
     "querystring": {
@@ -14787,13 +16257,13 @@
       "dev": true
     },
     "raw-body": {
-      "version": "2.4.0",
-      "resolved": "https://registry.npmjs.org/raw-body/-/raw-body-2.4.0.tgz",
-      "integrity": "sha512-4Oz8DUIwdvoa5qMJelxipzi/iJIi40O5cGV1wNYp5hvZP8ZN0T+jiNkL0QepXs+EsQ9XJ8ipEDoiH70ySUJP3Q==",
+      "version": "2.4.2",
+      "resolved": "https://registry.npmjs.org/raw-body/-/raw-body-2.4.2.tgz",
+      "integrity": "sha512-RPMAFUJP19WIet/99ngh6Iv8fzAbqum4Li7AD6DtGaW2RpMB/11xDoalPiJMTbu6I3hkbMVkATvZrqb9EEqeeQ==",
       "dev": true,
       "requires": {
-        "bytes": "3.1.0",
-        "http-errors": "1.7.2",
+        "bytes": "3.1.1",
+        "http-errors": "1.8.1",
         "iconv-lite": "0.4.24",
         "unpipe": "1.0.0"
       }
@@ -15024,11 +16494,11 @@
       }
     },
     "rxjs": {
-      "version": "6.6.7",
-      "resolved": "https://registry.npmjs.org/rxjs/-/rxjs-6.6.7.tgz",
-      "integrity": "sha512-hTdwr+7yYNIT5n4AMYp85KA6yw2Va0FLa3Rguvbpa4W3I5xynaBZo41cM3XM+4Q6fRMj3sBYIR1VAmZMXYJvRQ==",
+      "version": "7.4.0",
+      "resolved": "https://registry.npmjs.org/rxjs/-/rxjs-7.4.0.tgz",
+      "integrity": "sha512-7SQDi7xeTMCJpqViXh8gL/lebcwlp3d831F05+9B44A4B0WfsEwUQHR64gsH1kvJ+Ep/J9K2+n1hVl1CsGN23w==",
       "requires": {
-        "tslib": "^1.9.0"
+        "tslib": "~2.1.0"
       }
     },
     "safe-buffer": {
@@ -15153,9 +16623,9 @@
       "dev": true
     },
     "setprototypeof": {
-      "version": "1.1.1",
-      "resolved": "https://registry.npmjs.org/setprototypeof/-/setprototypeof-1.1.1.tgz",
-      "integrity": "sha512-JvdAWfbXeIGaZ9cILp38HntZSFSo3mWg6xGcJJsd+d4aRMOqauag1C63dJfDw7OaMYwEbHMOxEZ1lqVRYP2OAw==",
+      "version": "1.2.0",
+      "resolved": "https://registry.npmjs.org/setprototypeof/-/setprototypeof-1.2.0.tgz",
+      "integrity": "sha512-E5LDX7Wrp85Kil5bhZv46j8jOeboKq5JMmYM3gVGdGH8xFpPWXUMsNrlODCrkoxMEeNi/XZIwuRvY4XNwYMJpw==",
       "dev": true
     },
     "sha.js": {
@@ -15177,10 +16647,25 @@
         "kind-of": "^6.0.2"
       }
     },
+    "shebang-command": {
+      "version": "2.0.0",
+      "resolved": "https://registry.npmjs.org/shebang-command/-/shebang-command-2.0.0.tgz",
+      "integrity": "sha512-kHxr2zZpYtdmrN1qDjrrX/Z1rR1kG8Dx+gkpK1G4eXmvXswmcE1hTWBWYUzlraYw1/yZp6YuDY77YtvbN0dmDA==",
+      "dev": true,
+      "requires": {
+        "shebang-regex": "^3.0.0"
+      }
+    },
+    "shebang-regex": {
+      "version": "3.0.0",
+      "resolved": "https://registry.npmjs.org/shebang-regex/-/shebang-regex-3.0.0.tgz",
+      "integrity": "sha512-7++dFhtcx3353uBaq8DDR4NuxBetBzC7ZQOhmTQInHEd6bSrXdiEyzCvG07Z44UYdLShWUyXt5M/yhz8ekcb1A==",
+      "dev": true
+    },
     "signal-exit": {
-      "version": "3.0.5",
-      "resolved": "https://registry.npmjs.org/signal-exit/-/signal-exit-3.0.5.tgz",
-      "integrity": "sha512-KWcOiKeQj6ZyXx7zq4YxSMgHRlod4czeBQZrPb8OKcohcqAXShm7E20kEMle9WBt26hFcAf0qLOcp5zmY7kOqQ=="
+      "version": "3.0.6",
+      "resolved": "https://registry.npmjs.org/signal-exit/-/signal-exit-3.0.6.tgz",
+      "integrity": "sha512-sDl4qMFpijcGw22U5w63KmD3cZJfBuFlVNbVMKje2keoKML7X2UzWbc4XrmEbDwg0NXJc3yv4/ox7b+JWb57kQ=="
     },
     "simple-concat": {
       "version": "1.0.1",
@@ -15212,6 +16697,24 @@
         }
       }
     },
+    "slice-ansi": {
+      "version": "5.0.0",
+      "resolved": "https://registry.npmjs.org/slice-ansi/-/slice-ansi-5.0.0.tgz",
+      "integrity": "sha512-FC+lgizVPfie0kkhqUScwRu1O/lF6NOgJmlCgK+/LYxDCTk8sGelYaHDhFcDN+Sn3Cv+3VSa4Byeo+IMCzpMgQ==",
+      "dev": true,
+      "requires": {
+        "ansi-styles": "^6.0.0",
+        "is-fullwidth-code-point": "^4.0.0"
+      },
+      "dependencies": {
+        "ansi-styles": {
+          "version": "6.1.0",
+          "resolved": "https://registry.npmjs.org/ansi-styles/-/ansi-styles-6.1.0.tgz",
+          "integrity": "sha512-VbqNsoz55SYGczauuup0MFUyXNQviSpFTj1RQtFzmQLk18qbVSpTFFGMT293rmDaQuKCT6InmbuEyUne4mTuxQ==",
+          "dev": true
+        }
+      }
+    },
     "snapdragon": {
       "version": "0.8.2",
       "resolved": "https://registry.npmjs.org/snapdragon/-/snapdragon-0.8.2.tgz",
@@ -15317,26 +16820,23 @@
       }
     },
     "socket.io": {
-      "version": "3.1.2",
-      "resolved": "https://registry.npmjs.org/socket.io/-/socket.io-3.1.2.tgz",
-      "integrity": "sha512-JubKZnTQ4Z8G4IZWtaAZSiRP3I/inpy8c/Bsx2jrwGrTbKeVU5xd6qkKMHpChYeM3dWZSO0QACiGK+obhBNwYw==",
+      "version": "4.4.0",
+      "resolved": "https://registry.npmjs.org/socket.io/-/socket.io-4.4.0.tgz",
+      "integrity": "sha512-bnpJxswR9ov0Bw6ilhCvO38/1WPtE3eA2dtxi2Iq4/sFebiDJQzgKNYA7AuVVdGW09nrESXd90NbZqtDd9dzRQ==",
       "dev": true,
       "requires": {
-        "@types/cookie": "^0.4.0",
-        "@types/cors": "^2.8.8",
-        "@types/node": ">=10.0.0",
         "accepts": "~1.3.4",
         "base64id": "~2.0.0",
-        "debug": "~4.3.1",
-        "engine.io": "~4.1.0",
-        "socket.io-adapter": "~2.1.0",
-        "socket.io-parser": "~4.0.3"
+        "debug": "~4.3.2",
+        "engine.io": "~6.1.0",
+        "socket.io-adapter": "~2.3.3",
+        "socket.io-parser": "~4.0.4"
       }
     },
     "socket.io-adapter": {
-      "version": "2.1.0",
-      "resolved": "https://registry.npmjs.org/socket.io-adapter/-/socket.io-adapter-2.1.0.tgz",
-      "integrity": "sha512-+vDov/aTsLjViYTwS9fPy5pEtTkrbEKsw2M+oVSoFGw6OD1IpvlV1VPhUzNbofCQ8oyMbdYJqDtGdmHQK6TdPg==",
+      "version": "2.3.3",
+      "resolved": "https://registry.npmjs.org/socket.io-adapter/-/socket.io-adapter-2.3.3.tgz",
+      "integrity": "sha512-Qd/iwn3VskrpNO60BeRyCyr8ZWw9CPZyitW4AQwmRZ8zCiyDiL+znRnWX6tDHXnWn1sJrM1+b6Mn6wEDJJ4aYQ==",
       "dev": true
     },
     "socket.io-parser": {
@@ -15376,9 +16876,9 @@
       }
     },
     "source-map-support": {
-      "version": "0.5.20",
-      "resolved": "https://registry.npmjs.org/source-map-support/-/source-map-support-0.5.20.tgz",
-      "integrity": "sha512-n1lZZ8Ve4ksRqizaBQgxXDgKwttHDhyfQjA6YZZn8+AroHbsIz+JjwxQDxbp+7y5OYCI8t1Yk7etjD9CRd2hIw==",
+      "version": "0.5.21",
+      "resolved": "https://registry.npmjs.org/source-map-support/-/source-map-support-0.5.21.tgz",
+      "integrity": "sha512-uBHU3L3czsIyYXKX88fdrGovxdSCoTGDRZ6SYXtSRxLZUzHg5P/66Ht6uoUlHu9EZod+inXhKo3qQgwXUT/y1w==",
       "dev": true,
       "requires": {
         "buffer-from": "^1.0.0",
@@ -15546,14 +17046,38 @@
         "safe-buffer": "~5.1.0"
       }
     },
+    "string-argv": {
+      "version": "0.3.1",
+      "resolved": "https://registry.npmjs.org/string-argv/-/string-argv-0.3.1.tgz",
+      "integrity": "sha512-a1uQGz7IyVy9YwhqjZIZu1c8JO8dNIe20xBmSS6qu9kv++k3JGzCVmprbNN5Kn+BgzD5E7YYwg1CcjuJMRNsvg==",
+      "dev": true
+    },
     "string-width": {
-      "version": "4.2.3",
-      "resolved": "https://registry.npmjs.org/string-width/-/string-width-4.2.3.tgz",
-      "integrity": "sha512-wKyQRQpjJ0sIp62ErSZdGsjMJWsap5oRNihHhu6G7JVO/9jIB6UyevL+tXuOqrng8j/cxKTWyWUwvSTriiZz/g==",
+      "version": "5.0.1",
+      "resolved": "https://registry.npmjs.org/string-width/-/string-width-5.0.1.tgz",
+      "integrity": "sha512-5ohWO/M4//8lErlUUtrFy3b11GtNOuMOU0ysKCDXFcfXuuvUXu95akgj/i8ofmaGdN0hCqyl6uu9i8dS/mQp5g==",
+      "dev": true,
       "requires": {
-        "emoji-regex": "^8.0.0",
-        "is-fullwidth-code-point": "^3.0.0",
-        "strip-ansi": "^6.0.1"
+        "emoji-regex": "^9.2.2",
+        "is-fullwidth-code-point": "^4.0.0",
+        "strip-ansi": "^7.0.1"
+      },
+      "dependencies": {
+        "ansi-regex": {
+          "version": "6.0.1",
+          "resolved": "https://registry.npmjs.org/ansi-regex/-/ansi-regex-6.0.1.tgz",
+          "integrity": "sha512-n5M855fKb2SsfMIiFFoVrABHJC8QtHwVx+mHWP3QcEqBHYienj5dHSgjbxtC0WEZXYt4wcD6zrQElDPhFuZgfA==",
+          "dev": true
+        },
+        "strip-ansi": {
+          "version": "7.0.1",
+          "resolved": "https://registry.npmjs.org/strip-ansi/-/strip-ansi-7.0.1.tgz",
+          "integrity": "sha512-cXNxvT8dFNRVfhVME3JAe98mkXDYN2O1l7jmcwMnOslDeESg1rF/OZMtK0nRAhiari1unG5cD4jG3rapUAkLbw==",
+          "dev": true,
+          "requires": {
+            "ansi-regex": "^6.0.1"
+          }
+        }
       }
     },
     "strip-ansi": {
@@ -15564,6 +17088,18 @@
         "ansi-regex": "^5.0.1"
       }
     },
+    "strip-bom": {
+      "version": "3.0.0",
+      "resolved": "https://registry.npmjs.org/strip-bom/-/strip-bom-3.0.0.tgz",
+      "integrity": "sha1-IzTBjpx1n3vdVv3vfprj1YjmjtM=",
+      "dev": true
+    },
+    "strip-final-newline": {
+      "version": "2.0.0",
+      "resolved": "https://registry.npmjs.org/strip-final-newline/-/strip-final-newline-2.0.0.tgz",
+      "integrity": "sha512-BrpvfNAE3dcvq7ll3xVumzjKjZQ5tI1sEUIKr3Uoks0XUl45St3FlatVqef9prk4jRDzhW6WZg+3bk93y6pLjA==",
+      "dev": true
+    },
     "strip-json-comments": {
       "version": "2.0.1",
       "resolved": "https://registry.npmjs.org/strip-json-comments/-/strip-json-comments-2.0.1.tgz",
@@ -15748,11 +17284,12 @@
       }
     },
     "tmp": {
-      "version": "0.0.33",
-      "resolved": "https://registry.npmjs.org/tmp/-/tmp-0.0.33.tgz",
-      "integrity": "sha512-jRCJlojKnZ3addtTOjdIqoRuPEKBvNXcGYqzO6zWZX8KfKEpnGY5jfggJQ3EjKuu8D4bJRr0y+cYJFmYbImXGw==",
+      "version": "0.2.1",
+      "resolved": "https://registry.npmjs.org/tmp/-/tmp-0.2.1.tgz",
+      "integrity": "sha512-76SUhtfqR2Ijn+xllcI5P1oyannHNHByD80W1q447gU3mp9G9PSpGdWmjUOHRDPiHYacIk66W7ubDTuPF3BEtQ==",
+      "dev": true,
       "requires": {
-        "os-tmpdir": "~1.0.2"
+        "rimraf": "^3.0.0"
       }
     },
     "to-arraybuffer": {
@@ -15868,9 +17405,9 @@
       }
     },
     "toidentifier": {
-      "version": "1.0.0",
-      "resolved": "https://registry.npmjs.org/toidentifier/-/toidentifier-1.0.0.tgz",
-      "integrity": "sha512-yaOH/Pk/VEhBWWTlhI+qXxDFXlejDGcQipMlyxda9nthulaxLZUNcUqFxokp0vcYnvteJln5FNQDRrxj3YcbVw==",
+      "version": "1.0.1",
+      "resolved": "https://registry.npmjs.org/toidentifier/-/toidentifier-1.0.1.tgz",
+      "integrity": "sha512-o5sSPKEkg/DIQNmH43V0/uerLrpzVedkUh8tGNvaeXpfpuwjKenlSox/2O/BTlZUtEe+JG7s5YhEz608PlAHRA==",
       "dev": true
     },
     "touch": {
@@ -15931,9 +17468,9 @@
           }
         },
         "loader-utils": {
-          "version": "2.0.0",
-          "resolved": "https://registry.npmjs.org/loader-utils/-/loader-utils-2.0.0.tgz",
-          "integrity": "sha512-rP4F0h2RaWSvPEkD7BLDFQnvSf+nK+wr3ESUjNTyAGobqrijmW92zc+SO6d4p4B1wh7+B/Jg1mkQe5NYUEHtHQ==",
+          "version": "2.0.2",
+          "resolved": "https://registry.npmjs.org/loader-utils/-/loader-utils-2.0.2.tgz",
+          "integrity": "sha512-TM57VeHptv569d/GKh6TAYdzKblwDNiumOdkFnejjD0XwTH87K90w3O7AiJRqdQoXygvi1VQTJTLGhJl7WqA7A==",
           "dev": true,
           "requires": {
             "big.js": "^5.2.2",
@@ -15968,13 +17505,12 @@
       }
     },
     "ts-node": {
-      "version": "10.2.1",
-      "resolved": "https://registry.npmjs.org/ts-node/-/ts-node-10.2.1.tgz",
-      "integrity": "sha512-hCnyOyuGmD5wHleOQX6NIjJtYVIO8bPP8F2acWkB4W06wdlkgyvJtubO/I9NkI88hCFECbsEgoLc0VNkYmcSfw==",
+      "version": "10.4.0",
+      "resolved": "https://registry.npmjs.org/ts-node/-/ts-node-10.4.0.tgz",
+      "integrity": "sha512-g0FlPvvCXSIO1JDF6S232P5jPYqBkRL9qly81ZgAOSU7rwI0stphCgd2kLiCrU9DjQCrJMWEqcNSjQL02s6d8A==",
       "dev": true,
-      "peer": true,
       "requires": {
-        "@cspotcode/source-map-support": "0.6.1",
+        "@cspotcode/source-map-support": "0.7.0",
         "@tsconfig/node10": "^1.0.7",
         "@tsconfig/node12": "^1.0.7",
         "@tsconfig/node14": "^1.0.0",
@@ -15992,15 +17528,26 @@
           "version": "8.2.0",
           "resolved": "https://registry.npmjs.org/acorn-walk/-/acorn-walk-8.2.0.tgz",
           "integrity": "sha512-k+iyHEuPgSw6SbuDpGQM+06HQUa04DZ3o+F6CSzXMvvI5KMvnaEqXe+YVe555R9nn6GPt404fos4wcgpw12SDA==",
-          "dev": true,
-          "peer": true
+          "dev": true
         }
       }
     },
+    "tsconfig-paths": {
+      "version": "3.12.0",
+      "resolved": "https://registry.npmjs.org/tsconfig-paths/-/tsconfig-paths-3.12.0.tgz",
+      "integrity": "sha512-e5adrnOYT6zqVnWqZu7i/BQ3BnhzvGbjEjejFXO20lKIKpwTaupkCPgEfv4GZK1IBciJUEhYs3J3p75FdaTFVg==",
+      "dev": true,
+      "requires": {
+        "@types/json5": "^0.0.29",
+        "json5": "^1.0.1",
+        "minimist": "^1.2.0",
+        "strip-bom": "^3.0.0"
+      }
+    },
     "tslib": {
-      "version": "1.14.1",
-      "resolved": "https://registry.npmjs.org/tslib/-/tslib-1.14.1.tgz",
-      "integrity": "sha512-Xni35NKzjgMrwevysHTCArtLDpPvye8zV/0E4EyYn43P7/7qvQwPh9BGkHewbMulVntbigmcT7rdX3BNo9wRJg=="
+      "version": "2.1.0",
+      "resolved": "https://registry.npmjs.org/tslib/-/tslib-2.1.0.tgz",
+      "integrity": "sha512-hcVC3wYEziELGGmEEXue7D75zbwIIVUMWAVbHItGPx0ziyXxrOMQx4rQEVEV45Ut/1IotuEvwqPopzIOkDMf0A=="
     },
     "tslint": {
       "version": "6.1.3",
@@ -16079,6 +17626,12 @@
             "has-flag": "^3.0.0"
           }
         },
+        "tslib": {
+          "version": "1.14.1",
+          "resolved": "https://registry.npmjs.org/tslib/-/tslib-1.14.1.tgz",
+          "integrity": "sha512-Xni35NKzjgMrwevysHTCArtLDpPvye8zV/0E4EyYn43P7/7qvQwPh9BGkHewbMulVntbigmcT7rdX3BNo9wRJg==",
+          "dev": true
+        },
         "tsutils": {
           "version": "2.29.0",
           "resolved": "https://registry.npmjs.org/tsutils/-/tsutils-2.29.0.tgz",
@@ -16097,9 +17650,9 @@
       "dev": true
     },
     "ttypescript": {
-      "version": "1.5.12",
-      "resolved": "https://registry.npmjs.org/ttypescript/-/ttypescript-1.5.12.tgz",
-      "integrity": "sha512-1ojRyJvpnmgN9kIHmUnQPlEV1gq+VVsxVYjk/NfvMlHSmYxjK5hEvOOU2MQASrbekTUiUM7pR/nXeCc8bzvMOQ==",
+      "version": "1.5.13",
+      "resolved": "https://registry.npmjs.org/ttypescript/-/ttypescript-1.5.13.tgz",
+      "integrity": "sha512-KT/RBfGGlVJFqEI8cVvI3nMsmYcFvPSZh8bU0qX+pAwbi7/ABmYkzn7l/K8skw0xmYjVCoyaV6WLsBQxdadybQ==",
       "dev": true,
       "requires": {
         "resolve": ">=1.9.0"
@@ -16169,9 +17722,9 @@
       }
     },
     "typescript": {
-      "version": "4.1.5",
-      "resolved": "https://registry.npmjs.org/typescript/-/typescript-4.1.5.tgz",
-      "integrity": "sha512-6OSu9PTIzmn9TCDiovULTnET6BgXtDYL4Gg4szY+cGsc3JP1dQL8qvE8kShTRx1NIw4Q9IBHlwODjkjWEtMUyA==",
+      "version": "4.3.5",
+      "resolved": "https://registry.npmjs.org/typescript/-/typescript-4.3.5.tgz",
+      "integrity": "sha512-DqQgihaQ9cUrskJo9kIyW/+g0Vxsk8cDtZ52a3NGh0YNTfpUSArXSohyUGnvbPazEPLu398C0UxmKSOrPumUzA==",
       "dev": true
     },
     "typescript-transform-paths": {
@@ -16184,36 +17737,16 @@
       }
     },
     "ua-parser-js": {
-      "version": "0.7.28",
-      "resolved": "https://registry.npmjs.org/ua-parser-js/-/ua-parser-js-0.7.28.tgz",
-      "integrity": "sha512-6Gurc1n//gjp9eQNXjD9O3M/sMwVtN5S8Lv9bvOYBfKfDNiIIhqiyi01vMBO45u4zkDE420w/e0se7Vs+sIg+g==",
+      "version": "0.7.31",
+      "resolved": "https://registry.npmjs.org/ua-parser-js/-/ua-parser-js-0.7.31.tgz",
+      "integrity": "sha512-qLK/Xe9E2uzmYI3qLeOmI0tEOt+TBBQyUIAh4aAgU05FVYzeZrKUdkAZfBNVGRaHVgV0TDkdEngJSw/SyQchkQ==",
       "dev": true
     },
     "undefsafe": {
-      "version": "2.0.3",
-      "resolved": "https://registry.npmjs.org/undefsafe/-/undefsafe-2.0.3.tgz",
-      "integrity": "sha512-nrXZwwXrD/T/JXeygJqdCO6NZZ1L66HrxM/Z7mIq2oPanoN0F1nLx3lwJMu6AwJY69hdixaFQOuoYsMjE5/C2A==",
-      "dev": true,
-      "requires": {
-        "debug": "^2.2.0"
-      },
-      "dependencies": {
-        "debug": {
-          "version": "2.6.9",
-          "resolved": "https://registry.npmjs.org/debug/-/debug-2.6.9.tgz",
-          "integrity": "sha512-bC7ElrdJaJnPbAP+1EotYvqZsb3ecl5wi6Bfi6BJTUcNowp6cvspg0jXznRTKDjm/E7AdgFBVeAPVMNcKGsHMA==",
-          "dev": true,
-          "requires": {
-            "ms": "2.0.0"
-          }
-        },
-        "ms": {
-          "version": "2.0.0",
-          "resolved": "https://registry.npmjs.org/ms/-/ms-2.0.0.tgz",
-          "integrity": "sha1-VgiurfwAvmwpAd9fmGF4jeDVl8g=",
-          "dev": true
-        }
-      }
+      "version": "2.0.5",
+      "resolved": "https://registry.npmjs.org/undefsafe/-/undefsafe-2.0.5.tgz",
+      "integrity": "sha512-WxONCrssBM8TSPRqN5EmsjVrsv4A8X12J4ArBiiayv3DyyG3ZlIg6yysuuSYdZsVz3TKcTg2fd//Ujd4CHV1iA==",
+      "dev": true
     },
     "union-value": {
       "version": "1.0.1",
@@ -16998,6 +18531,14 @@
       "requires": {
         "ansi-colors": "^3.0.0",
         "uuid": "^3.3.2"
+      },
+      "dependencies": {
+        "ansi-colors": {
+          "version": "3.2.4",
+          "resolved": "https://registry.npmjs.org/ansi-colors/-/ansi-colors-3.2.4.tgz",
+          "integrity": "sha512-hHUXGagefjN2iRrID63xckIvotOXOojhQKWIPUZ4mNUZ9nLZW+7FMNoE1lOkEhNWYsx/7ysGIuJYCiMAA9FnrA==",
+          "dev": true
+        }
       }
     },
     "webpack-sources": {
@@ -17059,38 +18600,31 @@
       "integrity": "sha1-Zws6+8VS4LVd9rd4DKdGFfI60cs="
     },
     "wide-align": {
-      "version": "1.1.3",
-      "resolved": "https://registry.npmjs.org/wide-align/-/wide-align-1.1.3.tgz",
-      "integrity": "sha512-QGkOQc8XL6Bt5PwnsExKBPuMKBxnGxWWW3fU55Xt4feHozMUhdUMaBCk290qpm/wG5u/RSKzwdAC4i51YigihA==",
+      "version": "1.1.5",
+      "resolved": "https://registry.npmjs.org/wide-align/-/wide-align-1.1.5.tgz",
+      "integrity": "sha512-eDMORYaPNZ4sQIuuYPDHdQvf4gyCF9rEEV/yPxGfwPkRodwEgiMUUXTx/dex+Me0wxx53S+NgUHaP7y3MGlDmg==",
       "requires": {
-        "string-width": "^1.0.2 || 2"
+        "string-width": "^1.0.2 || 2 || 3 || 4"
       },
       "dependencies": {
-        "ansi-regex": {
-          "version": "3.0.0",
-          "resolved": "https://registry.npmjs.org/ansi-regex/-/ansi-regex-3.0.0.tgz",
-          "integrity": "sha1-7QMXwyIGT3lGbAKWa922Bas32Zg="
+        "emoji-regex": {
+          "version": "8.0.0",
+          "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-8.0.0.tgz",
+          "integrity": "sha512-MSjYzcWNOA0ewAHpz0MxpYFvwg6yjy1NG3xteoqz644VCo/RPgnr1/GGt+ic3iJTzQ8Eu3TdM14SawnVUmGE6A=="
         },
         "is-fullwidth-code-point": {
-          "version": "2.0.0",
-          "resolved": "https://registry.npmjs.org/is-fullwidth-code-point/-/is-fullwidth-code-point-2.0.0.tgz",
-          "integrity": "sha1-o7MKXE8ZkYMWeqq5O+764937ZU8="
+          "version": "3.0.0",
+          "resolved": "https://registry.npmjs.org/is-fullwidth-code-point/-/is-fullwidth-code-point-3.0.0.tgz",
+          "integrity": "sha512-zymm5+u+sCsSWyD9qNaejV3DFvhCKclKdizYaJUuHA83RLjb7nSuGnddCHGv0hk+KY7BMAlsWeK4Ueg6EV6XQg=="
         },
         "string-width": {
-          "version": "2.1.1",
-          "resolved": "https://registry.npmjs.org/string-width/-/string-width-2.1.1.tgz",
-          "integrity": "sha512-nOqH59deCq9SRHlxq1Aw85Jnt4w6KvLKqWVik6oA9ZklXLNIOlqg4F2yrT1MVaTjAqvVwdfeZ7w7aCvJD7ugkw==",
-          "requires": {
-            "is-fullwidth-code-point": "^2.0.0",
-            "strip-ansi": "^4.0.0"
-          }
-        },
-        "strip-ansi": {
-          "version": "4.0.0",
-          "resolved": "https://registry.npmjs.org/strip-ansi/-/strip-ansi-4.0.0.tgz",
-          "integrity": "sha1-qEeQIusaw2iocTibY1JixQXuNo8=",
+          "version": "4.2.3",
+          "resolved": "https://registry.npmjs.org/string-width/-/string-width-4.2.3.tgz",
+          "integrity": "sha512-wKyQRQpjJ0sIp62ErSZdGsjMJWsap5oRNihHhu6G7JVO/9jIB6UyevL+tXuOqrng8j/cxKTWyWUwvSTriiZz/g==",
           "requires": {
-            "ansi-regex": "^3.0.0"
+            "emoji-regex": "^8.0.0",
+            "is-fullwidth-code-point": "^3.0.0",
+            "strip-ansi": "^6.0.1"
           }
         }
       }
@@ -17102,6 +18636,31 @@
       "dev": true,
       "requires": {
         "string-width": "^4.0.0"
+      },
+      "dependencies": {
+        "emoji-regex": {
+          "version": "8.0.0",
+          "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-8.0.0.tgz",
+          "integrity": "sha512-MSjYzcWNOA0ewAHpz0MxpYFvwg6yjy1NG3xteoqz644VCo/RPgnr1/GGt+ic3iJTzQ8Eu3TdM14SawnVUmGE6A==",
+          "dev": true
+        },
+        "is-fullwidth-code-point": {
+          "version": "3.0.0",
+          "resolved": "https://registry.npmjs.org/is-fullwidth-code-point/-/is-fullwidth-code-point-3.0.0.tgz",
+          "integrity": "sha512-zymm5+u+sCsSWyD9qNaejV3DFvhCKclKdizYaJUuHA83RLjb7nSuGnddCHGv0hk+KY7BMAlsWeK4Ueg6EV6XQg==",
+          "dev": true
+        },
+        "string-width": {
+          "version": "4.2.3",
+          "resolved": "https://registry.npmjs.org/string-width/-/string-width-4.2.3.tgz",
+          "integrity": "sha512-wKyQRQpjJ0sIp62ErSZdGsjMJWsap5oRNihHhu6G7JVO/9jIB6UyevL+tXuOqrng8j/cxKTWyWUwvSTriiZz/g==",
+          "dev": true,
+          "requires": {
+            "emoji-regex": "^8.0.0",
+            "is-fullwidth-code-point": "^3.0.0",
+            "strip-ansi": "^6.0.1"
+          }
+        }
       }
     },
     "word-wrap": {
@@ -17128,6 +18687,31 @@
         "ansi-styles": "^4.0.0",
         "string-width": "^4.1.0",
         "strip-ansi": "^6.0.0"
+      },
+      "dependencies": {
+        "emoji-regex": {
+          "version": "8.0.0",
+          "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-8.0.0.tgz",
+          "integrity": "sha512-MSjYzcWNOA0ewAHpz0MxpYFvwg6yjy1NG3xteoqz644VCo/RPgnr1/GGt+ic3iJTzQ8Eu3TdM14SawnVUmGE6A==",
+          "dev": true
+        },
+        "is-fullwidth-code-point": {
+          "version": "3.0.0",
+          "resolved": "https://registry.npmjs.org/is-fullwidth-code-point/-/is-fullwidth-code-point-3.0.0.tgz",
+          "integrity": "sha512-zymm5+u+sCsSWyD9qNaejV3DFvhCKclKdizYaJUuHA83RLjb7nSuGnddCHGv0hk+KY7BMAlsWeK4Ueg6EV6XQg==",
+          "dev": true
+        },
+        "string-width": {
+          "version": "4.2.3",
+          "resolved": "https://registry.npmjs.org/string-width/-/string-width-4.2.3.tgz",
+          "integrity": "sha512-wKyQRQpjJ0sIp62ErSZdGsjMJWsap5oRNihHhu6G7JVO/9jIB6UyevL+tXuOqrng8j/cxKTWyWUwvSTriiZz/g==",
+          "dev": true,
+          "requires": {
+            "emoji-regex": "^8.0.0",
+            "is-fullwidth-code-point": "^3.0.0",
+            "strip-ansi": "^6.0.1"
+          }
+        }
       }
     },
     "wrappy": {
@@ -17148,9 +18732,9 @@
       }
     },
     "ws": {
-      "version": "7.5.5",
-      "resolved": "https://registry.npmjs.org/ws/-/ws-7.5.5.tgz",
-      "integrity": "sha512-BAkMFcAzl8as1G/hArkxOxq3G7pjUqQ3gzYbLL0/5zNkph70e+lCoxBGnm6AW1+/aiNeV4fnKqZ8m4GZewmH2w==",
+      "version": "7.5.6",
+      "resolved": "https://registry.npmjs.org/ws/-/ws-7.5.6.tgz",
+      "integrity": "sha512-6GLgCqo2cy2A2rjCNFlxQS6ZljG/coZfZXclldI8FB/1G3CCI36Zd8xy2HrFVACi8tfk5XrgLQEk+P0Tnz9UcA==",
       "dev": true,
       "requires": {}
     },
@@ -17190,6 +18774,12 @@
       "integrity": "sha512-a4UGQaWPH59mOXUYnAG2ewncQS4i4F43Tv3JoAM+s2VDAmS9NsK8GpDMLrCHPksFT7h3K6TOoUNn2pb7RoXx4g==",
       "dev": true
     },
+    "yaml": {
+      "version": "1.10.2",
+      "resolved": "https://registry.npmjs.org/yaml/-/yaml-1.10.2.tgz",
+      "integrity": "sha512-r3vXyErRCYJ7wg28yvBY5VSoAF8ZvlcW9/BwUzEtUsjvX/DKs24dIkuwjtuprwJJHsbyUbLApepYTR1BN4uHrg==",
+      "dev": true
+    },
     "yargs": {
       "version": "16.2.0",
       "resolved": "https://registry.npmjs.org/yargs/-/yargs-16.2.0.tgz",
@@ -17205,6 +18795,29 @@
         "yargs-parser": "^20.2.2"
       },
       "dependencies": {
+        "emoji-regex": {
+          "version": "8.0.0",
+          "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-8.0.0.tgz",
+          "integrity": "sha512-MSjYzcWNOA0ewAHpz0MxpYFvwg6yjy1NG3xteoqz644VCo/RPgnr1/GGt+ic3iJTzQ8Eu3TdM14SawnVUmGE6A==",
+          "dev": true
+        },
+        "is-fullwidth-code-point": {
+          "version": "3.0.0",
+          "resolved": "https://registry.npmjs.org/is-fullwidth-code-point/-/is-fullwidth-code-point-3.0.0.tgz",
+          "integrity": "sha512-zymm5+u+sCsSWyD9qNaejV3DFvhCKclKdizYaJUuHA83RLjb7nSuGnddCHGv0hk+KY7BMAlsWeK4Ueg6EV6XQg==",
+          "dev": true
+        },
+        "string-width": {
+          "version": "4.2.3",
+          "resolved": "https://registry.npmjs.org/string-width/-/string-width-4.2.3.tgz",
+          "integrity": "sha512-wKyQRQpjJ0sIp62ErSZdGsjMJWsap5oRNihHhu6G7JVO/9jIB6UyevL+tXuOqrng8j/cxKTWyWUwvSTriiZz/g==",
+          "dev": true,
+          "requires": {
+            "emoji-regex": "^8.0.0",
+            "is-fullwidth-code-point": "^3.0.0",
+            "strip-ansi": "^6.0.1"
+          }
+        },
         "y18n": {
           "version": "5.0.8",
           "resolved": "https://registry.npmjs.org/y18n/-/y18n-5.0.8.tgz",
@@ -17232,8 +18845,7 @@
       "version": "3.1.1",
       "resolved": "https://registry.npmjs.org/yn/-/yn-3.1.1.tgz",
       "integrity": "sha512-Ux4ygGWsu2c7isFWe8Yu1YluJmqVhxqK2cLXNQA5AcC3QfbGNpM7fu0Y8b/z16pXLnFxZYvWhd3fhBY9DLmC6Q==",
-      "dev": true,
-      "peer": true
+      "dev": true
     },
     "zone.js": {
       "version": "0.11.4",
@@ -17241,13 +18853,6 @@
       "integrity": "sha512-DDh2Ab+A/B+9mJyajPjHFPWfYU1H+pdun4wnnk0OcQTNjem1XQSZ2CDW+rfZEUDjv5M19SBqAkjZi0x5wuB5Qw==",
       "requires": {
         "tslib": "^2.0.0"
-      },
-      "dependencies": {
-        "tslib": {
-          "version": "2.3.1",
-          "resolved": "https://registry.npmjs.org/tslib/-/tslib-2.3.1.tgz",
-          "integrity": "sha512-77EbyPPpMz+FRFRuAFlWMtmgUWGe9UOG2Z25NqCwiIjRhOf5iKGuzSe5P2w1laq+FkRy4p+PCuVkJSGkzTEKVw=="
-        }
       }
     },
     "zxcvbn": {
diff --git a/jslib/package.json b/jslib/package.json
index 0ff173fa..ef9d5ccd 100644
--- a/jslib/package.json
+++ b/jslib/package.json
@@ -16,20 +16,26 @@
     "clean": "rimraf dist/**/*",
     "build": "npm run clean && ttsc",
     "build:watch": "npm run clean && ttsc -watch",
-    "lint": "tslint '*/src/**/*.ts' 'spec/**/*.ts'",
+    "lint": "tslint '*/src/**/*.ts' 'spec/**/*.ts' && prettier --check .",
     "lint:fix": "tslint '*/src/**/*.ts' 'spec/**/*.ts' --fix",
+    "prettier": "prettier --write .",
     "test": "karma start ./spec/support/karma.conf.js --single-run",
     "test:watch": "karma start ./spec/support/karma.conf.js",
-    "test:node": "npm run build && jasmine",
-    "test:node:watch": "concurrently -k -n TSC,Node -c yellow,cyan \"npm run build:watch\" \"nodemon -w ./dist --delay 500ms --exec jasmine\""
+    "test:node": "jasmine-ts -r tsconfig-paths/register",
+    "test:node:watch": "nodemon -w ./angular -w ./common -w ./electron -w ./node -w ./shared -w ./spec --ext \"ts,js,mjs,json\" --exec jasmine-ts -r tsconfig-paths/register",
+    "prepare": "husky install"
   },
   "devDependencies": {
     "@fluffy-spoon/substitute": "^1.202.0",
     "@types/jasmine": "^3.7.6",
-    "@types/node": "^14.17.1",
+    "@types/node": "^16.11.12",
+    "commander": "7.2.0",
     "concurrently": "^6.1.0",
+    "form-data": "4.0.0",
+    "husky": "^7.0.4",
     "jasmine": "^3.7.0",
     "jasmine-core": "^3.7.1",
+    "jasmine-ts": "^0.4.0",
     "jasmine-ts-console-reporter": "^3.1.1",
     "jsdom": "^16.5.3",
     "karma": "^6.3.2",
@@ -41,13 +47,18 @@
     "karma-jasmine-html-reporter": "^1.5.4",
     "karma-safari-launcher": "^1.0.0",
     "karma-webpack": "^4.0.2",
+    "lint-staged": "^12.1.2",
     "nodemon": "^2.0.7",
+    "prettier": "2.5.1",
     "rimraf": "^3.0.2",
+    "rxjs": "^7.4.0",
     "ts-loader": "^8.1.0",
+    "ts-node": "^10.4.0",
+    "tsconfig-paths": "^3.12.0",
     "tslint": "^6.1.3",
     "ttypescript": "^1.5.12",
     "typemoq": "^2.1.0",
-    "typescript": "4.1.5",
+    "typescript": "4.3.5",
     "typescript-transform-paths": "^2.2.3",
     "webpack": "^4.46.0"
   },
@@ -58,7 +69,10 @@
     "@bitwarden/jslib-node": "file:node"
   },
   "engines": {
-    "node": "~14",
-    "npm": "~7"
+    "node": "~16",
+    "npm": "~8"
+  },
+  "lint-staged": {
+    "*": "prettier --ignore-unknown --write"
   }
 }
diff --git a/jslib/shared/tsconfig.json b/jslib/shared/tsconfig.json
new file mode 100644
index 00000000..3a70f6b9
--- /dev/null
+++ b/jslib/shared/tsconfig.json
@@ -0,0 +1,15 @@
+{
+  "compilerOptions": {
+    "pretty": true,
+    "moduleResolution": "node",
+    "noImplicitAny": true,
+    "target": "ES6",
+    "module": "commonjs",
+    "lib": ["es5", "es6", "es7", "dom"],
+    "sourceMap": true,
+    "allowSyntheticDefaultImports": true,
+    "experimentalDecorators": true,
+    "emitDecoratorMetadata": true,
+    "outDir": "dist"
+  }
+}
diff --git a/jslib/spec/common/importers/firefoxCsvImporter.spec.ts b/jslib/spec/common/importers/firefoxCsvImporter.spec.ts
index 81f31e0d..fc42c6ec 100644
--- a/jslib/spec/common/importers/firefoxCsvImporter.spec.ts
+++ b/jslib/spec/common/importers/firefoxCsvImporter.spec.ts
@@ -1,73 +1,73 @@
-import { FirefoxCsvImporter as Importer } from 'jslib-common/importers/firefoxCsvImporter';
+import { FirefoxCsvImporter as Importer } from "jslib-common/importers/firefoxCsvImporter";
 
-import { CipherView } from 'jslib-common/models/view/cipherView';
-import { LoginUriView } from 'jslib-common/models/view/loginUriView';
-import { LoginView } from 'jslib-common/models/view/loginView';
+import { CipherView } from "jslib-common/models/view/cipherView";
+import { LoginUriView } from "jslib-common/models/view/loginUriView";
+import { LoginView } from "jslib-common/models/view/loginView";
 
-import { data as firefoxAccountsData } from './testData/firefoxCsv/firefoxAccountsData.csv';
-import { data as simplePasswordData } from './testData/firefoxCsv/simplePasswordData.csv';
+import { data as firefoxAccountsData } from "./testData/firefoxCsv/firefoxAccountsData.csv";
+import { data as simplePasswordData } from "./testData/firefoxCsv/simplePasswordData.csv";
 
 const CipherData = [
-    {
-        title: 'should parse password',
-        csv: simplePasswordData,
-        expected: Object.assign(new CipherView(), {
-            id: null,
-            organizationId: null,
-            folderId: null,
-            name: 'example.com',
-            login: Object.assign(new LoginView(), {
-                username: 'foo',
-                password: 'bar',
-                uris: [
-                    Object.assign(new LoginUriView(), {
-                        uri: 'https://example.com',
-                    }),
-                ],
-            }),
-            notes: null,
-            type: 1,
-        }),
-    },
-    {
-        title: 'should skip "chrome://FirefoxAccounts"',
-        csv: firefoxAccountsData,
-        expected: Object.assign(new CipherView(), {
-            id: null,
-            organizationId: null,
-            folderId: null,
-            name: 'example.com',
-            login: Object.assign(new LoginView(), {
-                username: 'foo',
-                password: 'bar',
-                uris: [
-                    Object.assign(new LoginUriView(), {
-                        uri: 'https://example.com',
-                    }),
-                ],
-            }),
-            notes: null,
-            type: 1,
-        }),
-    },
+  {
+    title: "should parse password",
+    csv: simplePasswordData,
+    expected: Object.assign(new CipherView(), {
+      id: null,
+      organizationId: null,
+      folderId: null,
+      name: "example.com",
+      login: Object.assign(new LoginView(), {
+        username: "foo",
+        password: "bar",
+        uris: [
+          Object.assign(new LoginUriView(), {
+            uri: "https://example.com",
+          }),
+        ],
+      }),
+      notes: null,
+      type: 1,
+    }),
+  },
+  {
+    title: 'should skip "chrome://FirefoxAccounts"',
+    csv: firefoxAccountsData,
+    expected: Object.assign(new CipherView(), {
+      id: null,
+      organizationId: null,
+      folderId: null,
+      name: "example.com",
+      login: Object.assign(new LoginView(), {
+        username: "foo",
+        password: "bar",
+        uris: [
+          Object.assign(new LoginUriView(), {
+            uri: "https://example.com",
+          }),
+        ],
+      }),
+      notes: null,
+      type: 1,
+    }),
+  },
 ];
 
-describe('Firefox CSV Importer', () => {
-    CipherData.forEach(data => {
-        it(data.title, async () => {
-            const importer = new Importer();
-            const result = await importer.parse(data.csv);
-            expect(result != null).toBe(true);
-            expect(result.ciphers.length).toBeGreaterThan(0);
+describe("Firefox CSV Importer", () => {
+  CipherData.forEach((data) => {
+    it(data.title, async () => {
+      const importer = new Importer();
+      const result = await importer.parse(data.csv);
+      expect(result != null).toBe(true);
+      expect(result.ciphers.length).toBeGreaterThan(0);
 
-            const cipher = result.ciphers.shift();
-            let property: keyof typeof data.expected;
-            for (property in data.expected) {
-                if (data.expected.hasOwnProperty(property)) {
-                    expect(cipher.hasOwnProperty(property)).toBe(true);
-                    expect(cipher[property]).toEqual(data.expected[property]);
-                }
-            }
-        });
+      const cipher = result.ciphers.shift();
+      let property: keyof typeof data.expected;
+      for (property in data.expected) {
+        if (data.expected.hasOwnProperty(property)) {
+          expect(cipher.hasOwnProperty(property)).toBe(true);
+          expect(cipher[property]).toEqual(data.expected[property]);
+        }
+      }
     });
+  });
 });
diff --git a/jslib/spec/common/importers/fsecureFskImporter.spec.ts b/jslib/spec/common/importers/fsecureFskImporter.spec.ts
new file mode 100644
index 00000000..63d082df
--- /dev/null
+++ b/jslib/spec/common/importers/fsecureFskImporter.spec.ts
@@ -0,0 +1,77 @@
+import { FSecureFskImporter as Importer } from "jslib-common/importers/fsecureFskImporter";
+
+const TestDataWithStyleSetToWebsite: string = JSON.stringify({
+  data: {
+    "8d58b5cf252dd06fbd98f5289e918ab1": {
+      color: "#00baff",
+      reatedDate: 1609302913,
+      creditCvv: "",
+      creditExpiry: "",
+      creditNumber: "",
+      favorite: 0,
+      modifiedDate: 1609302913,
+      notes: "note",
+      password: "word",
+      passwordList: [],
+      passwordModifiedDate: 1609302913,
+      rev: 1,
+      service: "My first pass",
+      style: "website",
+      type: 1,
+      url: "https://bitwarden.com",
+      username: "pass",
+    },
+  },
+});
+
+const TestDataWithStyleSetToGlobe: string = JSON.stringify({
+  data: {
+    "8d58b5cf252dd06fbd98f5289e918ab1": {
+      color: "#00baff",
+      reatedDate: 1609302913,
+      creditCvv: "",
+      creditExpiry: "",
+      creditNumber: "",
+      favorite: 0,
+      modifiedDate: 1609302913,
+      notes: "note",
+      password: "word",
+      passwordList: [],
+      passwordModifiedDate: 1609302913,
+      rev: 1,
+      service: "My first pass",
+      style: "globe",
+      type: 1,
+      url: "https://bitwarden.com",
+      username: "pass",
+    },
+  },
+});
+
+describe("FSecure FSK Importer", () => {
+  it("should parse data with style set to website", async () => {
+    const importer = new Importer();
+    const result = await importer.parse(TestDataWithStyleSetToWebsite);
+    expect(result != null).toBe(true);
+
+    const cipher = result.ciphers.shift();
+    expect(cipher.login.username).toEqual("pass");
+    expect(cipher.login.password).toEqual("word");
+    expect(cipher.login.uris.length).toEqual(1);
+    const uriView = cipher.login.uris.shift();
+    expect(uriView.uri).toEqual("https://bitwarden.com");
+  });
+
+  it("should parse data with style set to globe", async () => {
+    const importer = new Importer();
+    const result = await importer.parse(TestDataWithStyleSetToGlobe);
+    expect(result != null).toBe(true);
+
+    const cipher = result.ciphers.shift();
+    expect(cipher.login.username).toEqual("pass");
+    expect(cipher.login.password).toEqual("word");
+    expect(cipher.login.uris.length).toEqual(1);
+    const uriView = cipher.login.uris.shift();
+    expect(uriView.uri).toEqual("https://bitwarden.com");
+  });
+});
diff --git a/jslib/spec/common/importers/keepass2XmlImporter.spec.ts b/jslib/spec/common/importers/keepass2XmlImporter.spec.ts
index abeb4911..ff0f2d14 100644
--- a/jslib/spec/common/importers/keepass2XmlImporter.spec.ts
+++ b/jslib/spec/common/importers/keepass2XmlImporter.spec.ts
@@ -1,4 +1,4 @@
-import { KeePass2XmlImporter as Importer } from 'jslib-common/importers/keepass2XmlImporter';
+import { KeePass2XmlImporter as Importer } from "jslib-common/importers/keepass2XmlImporter";
 
 const TestData: string = `<?xml version="1.0" encoding="utf-8" standalone="yes"?>
 <KeePassFile>
@@ -180,10 +180,10 @@ line2</Value>
 	</Root>
 </KeePassFile>`;
 
-describe('KeePass2 Xml Importer', () => {
-    it('should parse XML data', async () => {
-        const importer = new Importer();
-        const result = await importer.parse(TestData);
-        expect(result != null).toBe(true);
-    });
+describe("KeePass2 Xml Importer", () => {
+  it("should parse XML data", async () => {
+    const importer = new Importer();
+    const result = await importer.parse(TestData);
+    expect(result != null).toBe(true);
+  });
 });
diff --git a/jslib/spec/common/importers/keeperJsonImporter.spec.ts b/jslib/spec/common/importers/keeperJsonImporter.spec.ts
new file mode 100644
index 00000000..3a4f34c2
--- /dev/null
+++ b/jslib/spec/common/importers/keeperJsonImporter.spec.ts
@@ -0,0 +1,109 @@
+import { Utils } from "jslib-common/misc/utils";
+
+import { KeeperJsonImporter as Importer } from "jslib-common/importers/keeperImporters/keeperJsonImporter";
+
+import { testData as TestData } from "./testData/keeperJson/testData";
+
+describe("Keeper Json Importer", () => {
+  const testDataJson = JSON.stringify(TestData);
+
+  let importer: Importer;
+  beforeEach(() => {
+    importer = new Importer();
+  });
+
+  it("should parse login data", async () => {
+    const result = await importer.parse(testDataJson);
+    expect(result != null).toBe(true);
+
+    const cipher = result.ciphers.shift();
+    expect(cipher.name).toEqual("Bank Account 1");
+    expect(cipher.login.username).toEqual("customer1234");
+    expect(cipher.login.password).toEqual("4813fJDHF4239fdk");
+    expect(cipher.login.uris.length).toEqual(1);
+    const uriView = cipher.login.uris.shift();
+    expect(uriView.uri).toEqual("https://chase.com");
+    expect(cipher.notes).toEqual("These are some notes.");
+
+    const cipher2 = result.ciphers.shift();
+    expect(cipher2.name).toEqual("Bank Account 2");
+    expect(cipher2.login.username).toEqual("mybankusername");
+    expect(cipher2.login.password).toEqual("w4k4k193f$^&@#*%2");
+    expect(cipher2.login.uris.length).toEqual(1);
+    const uriView2 = cipher2.login.uris.shift();
+    expect(uriView2.uri).toEqual("https://amex.com");
+    expect(cipher2.notes).toEqual("Some great information here.");
+
+    const cipher3 = result.ciphers.shift();
+    expect(cipher3.name).toEqual("Some Account");
+    expect(cipher3.login.username).toEqual("someUserName");
+    expect(cipher3.login.password).toEqual("w4k4k1wergf$^&@#*%2");
+    expect(cipher3.notes).toBeNull();
+    expect(cipher3.fields).toBeNull();
+    expect(cipher3.login.uris.length).toEqual(1);
+    const uriView3 = cipher3.login.uris.shift();
+    expect(uriView3.uri).toEqual("https://example.com");
+  });
+
+  it("should import TOTP when present", async () => {
+    const result = await importer.parse(testDataJson);
+    expect(result != null).toBe(true);
+
+    const cipher = result.ciphers.shift();
+    expect(cipher.login.totp).toBeNull();
+
+    // 2nd Cipher
+    const cipher2 = result.ciphers.shift();
+    expect(cipher2.login.totp).toEqual(
+      "otpauth://totp/Amazon:me@company.com?secret=JBSWY3DPEHPK3PXP&issuer=Amazon&algorithm=SHA1&digits=6&period=30"
+    );
+  });
+
+  it("should parse custom fields", async () => {
+    const result = await importer.parse(testDataJson);
+    expect(result != null).toBe(true);
+
+    const cipher = result.ciphers.shift();
+    expect(cipher.fields.length).toBe(1);
+    expect(cipher.fields[0].name).toEqual("Account Number");
+    expect(cipher.fields[0].value).toEqual("123-456-789");
+
+    // 2nd Cipher
+    const cipher2 = result.ciphers.shift();
+    expect(cipher2.fields.length).toBe(2);
+    expect(cipher2.fields[0].name).toEqual("Security Group");
+    expect(cipher2.fields[0].value).toEqual("Public");
+
+    expect(cipher2.fields[1].name).toEqual("IP Address");
+    expect(cipher2.fields[1].value).toEqual("12.45.67.8");
+  });
+
+  it("should create folders and assigned ciphers to them", async () => {
+    const result = await importer.parse(testDataJson);
+    expect(result != null).toBe(true);
+
+    const folders = result.folders;
+    expect(folders.length).toBe(2);
+    expect(folders[0].name).toBe("Optional Private Folder 1");
+    expect(folders[1].name).toBe("My Customer 1");
+
+    expect(result.folderRelationships[0]).toEqual([0, 0]);
+    expect(result.folderRelationships[1]).toEqual([1, 0]);
+    expect(result.folderRelationships[2]).toEqual([1, 1]);
+  });
+
+  it("should create collections if part of an organization", async () => {
+    importer.organizationId = Utils.newGuid();
+    const result = await importer.parse(testDataJson);
+    expect(result != null).toBe(true);
+
+    const collections = result.collections;
+    expect(collections.length).toBe(2);
+    expect(collections[0].name).toBe("Optional Private Folder 1");
+    expect(collections[1].name).toBe("My Customer 1");
+
+    expect(result.collectionRelationships[0]).toEqual([0, 0]);
+    expect(result.collectionRelationships[1]).toEqual([1, 0]);
+    expect(result.collectionRelationships[2]).toEqual([1, 1]);
+  });
+});
diff --git a/jslib/spec/common/importers/lastpassCsvImporter.spec.ts b/jslib/spec/common/importers/lastpassCsvImporter.spec.ts
index f42ea676..935db38c 100644
--- a/jslib/spec/common/importers/lastpassCsvImporter.spec.ts
+++ b/jslib/spec/common/importers/lastpassCsvImporter.spec.ts
@@ -1,33 +1,33 @@
-import { LastPassCsvImporter as Importer } from 'jslib-common/importers/lastpassCsvImporter';
+import { LastPassCsvImporter as Importer } from "jslib-common/importers/lastpassCsvImporter";
 
-import { ImportResult } from 'jslib-common/models/domain/importResult';
-import { CipherView } from 'jslib-common/models/view/cipherView';
-import { FieldView } from 'jslib-common/models/view/fieldView';
+import { ImportResult } from "jslib-common/models/domain/importResult";
+import { CipherView } from "jslib-common/models/view/cipherView";
+import { FieldView } from "jslib-common/models/view/fieldView";
 
-import { CipherType } from 'jslib-common/enums/cipherType';
-import { FieldType } from 'jslib-common/enums/fieldType';
+import { CipherType } from "jslib-common/enums/cipherType";
+import { FieldType } from "jslib-common/enums/fieldType";
 
 function baseExcept(result: ImportResult) {
-    expect(result).not.toBeNull();
-    expect(result.success).toBe(true);
-    expect(result.ciphers.length).toBe(1);
+  expect(result).not.toBeNull();
+  expect(result.success).toBe(true);
+  expect(result.ciphers.length).toBe(1);
 }
 
 function expectLogin(cipher: CipherView) {
-    expect(cipher.type).toBe(CipherType.Login);
+  expect(cipher.type).toBe(CipherType.Login);
 
-    expect(cipher.name).toBe('example.com');
-    expect(cipher.notes).toBe('super secure notes');
-    expect(cipher.login.uri).toBe('http://example.com');
-    expect(cipher.login.username).toBe('someUser');
-    expect(cipher.login.password).toBe('myPassword');
-    expect(cipher.login.totp).toBe('Y64VEVMBTSXCYIWRSHRNDZW62MPGVU2G');
+  expect(cipher.name).toBe("example.com");
+  expect(cipher.notes).toBe("super secure notes");
+  expect(cipher.login.uri).toBe("http://example.com");
+  expect(cipher.login.username).toBe("someUser");
+  expect(cipher.login.password).toBe("myPassword");
+  expect(cipher.login.totp).toBe("Y64VEVMBTSXCYIWRSHRNDZW62MPGVU2G");
 }
 
 const CipherData = [
-    {
-        title: 'should parse expiration date',
-        csv: `url,username,password,extra,name,grouping,fav
+  {
+    title: "should parse expiration date",
+    csv: `url,username,password,extra,name,grouping,fav
 http://sn,,,"NoteType:Credit Card
 Name on Card:John Doe
 Type:
@@ -37,32 +37,32 @@ Start Date:October,2017
 Expiration Date:June,2020
 Notes:some text
 ",Credit-card,,0`,
-        expected: Object.assign(new CipherView(), {
-            id: null,
-            organizationId: null,
-            folderId: null,
-            name: 'Credit-card',
-            notes: 'some text\n',
-            type: 3,
-            card: {
-                cardholderName: 'John Doe',
-                number: '1234567812345678',
-                code: '123',
-                expYear: '2020',
-                expMonth: '6',
-            },
-            fields: [
-                Object.assign(new FieldView(), {
-                    name: 'Start Date',
-                    value: 'October,2017',
-                    type: FieldType.Text,
-                }),
-            ],
+    expected: Object.assign(new CipherView(), {
+      id: null,
+      organizationId: null,
+      folderId: null,
+      name: "Credit-card",
+      notes: "some text\n",
+      type: 3,
+      card: {
+        cardholderName: "John Doe",
+        number: "1234567812345678",
+        code: "123",
+        expYear: "2020",
+        expMonth: "6",
+      },
+      fields: [
+        Object.assign(new FieldView(), {
+          name: "Start Date",
+          value: "October,2017",
+          type: FieldType.Text,
         }),
-    },
-    {
-        title: 'should parse blank card note',
-        csv: `url,username,password,extra,name,grouping,fav
+      ],
+    }),
+  },
+  {
+    title: "should parse blank card note",
+    csv: `url,username,password,extra,name,grouping,fav
 http://sn,,,"NoteType:Credit Card
 Name on Card:
 Type:
@@ -71,28 +71,28 @@ Security Code:
 Start Date:,
 Expiration Date:,
 Notes:",empty,,0`,
-        expected: Object.assign(new CipherView(), {
-            id: null,
-            organizationId: null,
-            folderId: null,
-            name: 'empty',
-            notes: null,
-            type: 3,
-            card: {
-                expMonth: undefined,
-            },
-            fields: [
-                Object.assign(new FieldView(), {
-                    name: 'Start Date',
-                    value: ',',
-                    type: FieldType.Text,
-                }),
-            ],
+    expected: Object.assign(new CipherView(), {
+      id: null,
+      organizationId: null,
+      folderId: null,
+      name: "empty",
+      notes: null,
+      type: 3,
+      card: {
+        expMonth: undefined,
+      },
+      fields: [
+        Object.assign(new FieldView(), {
+          name: "Start Date",
+          value: ",",
+          type: FieldType.Text,
         }),
-    },
-    {
-        title: 'should parse card expiration date w/ no exp year',
-        csv: `url,username,password,extra,name,grouping,fav
+      ],
+    }),
+  },
+  {
+    title: "should parse card expiration date w/ no exp year",
+    csv: `url,username,password,extra,name,grouping,fav
 http://sn,,,"NoteType:Credit Card
 Name on Card:John Doe
 Type:Visa
@@ -101,36 +101,36 @@ Security Code:321
 Start Date:,
 Expiration Date:January,
 Notes:",noyear,,0`,
-        expected: Object.assign(new CipherView(), {
-            id: null,
-            organizationId: null,
-            folderId: null,
-            name: 'noyear',
-            notes: null,
-            type: 3,
-            card: {
-                cardholderName: 'John Doe',
-                number: '1234567887654321',
-                code: '321',
-                expMonth: '1',
-            },
-            fields: [
-                Object.assign(new FieldView(), {
-                    name: 'Type',
-                    value: 'Visa',
-                    type: FieldType.Text,
-                }),
-                Object.assign(new FieldView(), {
-                    name: 'Start Date',
-                    value: ',',
-                    type: FieldType.Text,
-                }),
-            ],
+    expected: Object.assign(new CipherView(), {
+      id: null,
+      organizationId: null,
+      folderId: null,
+      name: "noyear",
+      notes: null,
+      type: 3,
+      card: {
+        cardholderName: "John Doe",
+        number: "1234567887654321",
+        code: "321",
+        expMonth: "1",
+      },
+      fields: [
+        Object.assign(new FieldView(), {
+          name: "Type",
+          value: "Visa",
+          type: FieldType.Text,
         }),
-    },
-    {
-        title: 'should parse card expiration date w/ no month',
-        csv: `url,username,password,extra,name,grouping,fav
+        Object.assign(new FieldView(), {
+          name: "Start Date",
+          value: ",",
+          type: FieldType.Text,
+        }),
+      ],
+    }),
+  },
+  {
+    title: "should parse card expiration date w/ no month",
+    csv: `url,username,password,extra,name,grouping,fav
 http://sn,,,"NoteType:Credit Card
 Name on Card:John Doe
 Type:Mastercard
@@ -139,64 +139,64 @@ Security Code:987
 Start Date:,
 Expiration Date:,2020
 Notes:",nomonth,,0`,
-        expected: Object.assign(new CipherView(), {
-            id: null,
-            organizationId: null,
-            folderId: null,
-            name: 'nomonth',
-            notes: null,
-            type: 3,
-            card: {
-                cardholderName: 'John Doe',
-                number: '8765432112345678',
-                code: '987',
-                expYear: '2020',
-                expMonth: undefined,
-            },
-            fields: [
-                Object.assign(new FieldView(), {
-                    name: 'Type',
-                    value: 'Mastercard',
-                    type: FieldType.Text,
-                }),
-                Object.assign(new FieldView(), {
-                    name: 'Start Date',
-                    value: ',',
-                    type: FieldType.Text,
-                }),
-            ],
+    expected: Object.assign(new CipherView(), {
+      id: null,
+      organizationId: null,
+      folderId: null,
+      name: "nomonth",
+      notes: null,
+      type: 3,
+      card: {
+        cardholderName: "John Doe",
+        number: "8765432112345678",
+        code: "987",
+        expYear: "2020",
+        expMonth: undefined,
+      },
+      fields: [
+        Object.assign(new FieldView(), {
+          name: "Type",
+          value: "Mastercard",
+          type: FieldType.Text,
+        }),
+        Object.assign(new FieldView(), {
+          name: "Start Date",
+          value: ",",
+          type: FieldType.Text,
         }),
-    },
+      ],
+    }),
+  },
 ];
 
-describe('Lastpass CSV Importer', () => {
-    CipherData.forEach(data => {
-        it(data.title, async () => {
-            const importer = new Importer();
-            const result = await importer.parse(data.csv);
-            expect(result != null).toBe(true);
-            expect(result.ciphers.length).toBeGreaterThan(0);
+describe("Lastpass CSV Importer", () => {
+  CipherData.forEach((data) => {
+    it(data.title, async () => {
+      const importer = new Importer();
+      const result = await importer.parse(data.csv);
+      expect(result != null).toBe(true);
+      expect(result.ciphers.length).toBeGreaterThan(0);
 
-            const cipher = result.ciphers.shift();
-            let property: keyof typeof data.expected;
-            for (property in data.expected) {
-                if (data.expected.hasOwnProperty(property)) {
-                    expect(cipher.hasOwnProperty(property)).toBe(true);
-                    expect(cipher[property]).toEqual(data.expected[property]);
-                }
-            }
-        });
+      const cipher = result.ciphers.shift();
+      let property: keyof typeof data.expected;
+      for (property in data.expected) {
+        if (data.expected.hasOwnProperty(property)) {
+          expect(cipher.hasOwnProperty(property)).toBe(true);
+          expect(cipher[property]).toEqual(data.expected[property]);
+        }
+      }
     });
+  });
 
-    it('should parse login with totp', async () => {
-        const input = `url,username,password,totp,extra,name,grouping,fav
+  it("should parse login with totp", async () => {
+    const input = `url,username,password,totp,extra,name,grouping,fav
         http://example.com,someUser,myPassword,Y64VEVMBTSXCYIWRSHRNDZW62MPGVU2G,super secure notes,example.com,,0`;
 
-        const importer = new Importer();
-        const result = await importer.parse(input);
-        baseExcept(result);
+    const importer = new Importer();
+    const result = await importer.parse(input);
+    baseExcept(result);
 
-        const cipher = result.ciphers[0];
-        expectLogin(cipher);
-    });
-});
\ No newline at end of file
+    const cipher = result.ciphers[0];
+    expectLogin(cipher);
+  });
+});
diff --git a/jslib/spec/common/importers/nordpassCsvImporter.spec.ts b/jslib/spec/common/importers/nordpassCsvImporter.spec.ts
index 4e8cfcbf..7ac99bd2 100644
--- a/jslib/spec/common/importers/nordpassCsvImporter.spec.ts
+++ b/jslib/spec/common/importers/nordpassCsvImporter.spec.ts
@@ -1,181 +1,182 @@
-import { NordPassCsvImporter as Importer } from 'jslib-common/importers/nordpassCsvImporter';
+import { NordPassCsvImporter as Importer } from "jslib-common/importers/nordpassCsvImporter";
 
-import { CipherType } from 'jslib-common/enums/cipherType';
-import { SecureNoteType } from 'jslib-common/enums/secureNoteType';
-import { CipherView } from 'jslib-common/models/view/cipherView';
-import { IdentityView } from 'jslib-common/models/view/identityView';
+import { CipherType } from "jslib-common/enums/cipherType";
+import { SecureNoteType } from "jslib-common/enums/secureNoteType";
+import { CipherView } from "jslib-common/models/view/cipherView";
+import { IdentityView } from "jslib-common/models/view/identityView";
 
-import { data as creditCardData } from './testData/nordpassCsv/nordpass.card.csv';
-import { data as identityData } from './testData/nordpassCsv/nordpass.identity.csv';
-import { data as loginData } from './testData/nordpassCsv/nordpass.login.csv';
-import { data as secureNoteData } from './testData/nordpassCsv/nordpass.secureNote.csv';
+import { data as creditCardData } from "./testData/nordpassCsv/nordpass.card.csv";
+import { data as identityData } from "./testData/nordpassCsv/nordpass.identity.csv";
+import { data as loginData } from "./testData/nordpassCsv/nordpass.login.csv";
+import { data as secureNoteData } from "./testData/nordpassCsv/nordpass.secureNote.csv";
 
 const namesTestData = [
-    {
-        title: 'Given #fullName should set firstName',
-        fullName: 'MyFirstName',
-        expected: Object.assign(new IdentityView(), {
-            firstName: 'MyFirstName',
-            middleName: null,
-            lastName: null,
-        }),
-    },
-    {
-        title: 'Given #fullName should set first- and lastName',
-        fullName: 'MyFirstName MyLastName',
-        expected: Object.assign(new IdentityView(), {
-            firstName: 'MyFirstName',
-            middleName: null,
-            lastName: 'MyLastName',
-        }),
-    },
-    {
-        title: 'Given #fullName should set first-, middle and lastName',
-        fullName: 'MyFirstName MyMiddleName MyLastName',
-        expected: Object.assign(new IdentityView(), {
-            firstName: 'MyFirstName',
-            middleName: 'MyMiddleName',
-            lastName: 'MyLastName',
-        }),
-    },
-    {
-        title: 'Given #fullName should set first-, middle and lastName with Jr',
-        fullName: 'MyFirstName MyMiddleName MyLastName Jr',
-        expected: Object.assign(new IdentityView(), {
-            firstName: 'MyFirstName',
-            middleName: 'MyMiddleName',
-            lastName: 'MyLastName Jr',
-        }),
-    },
-    {
-        title: 'Given #fullName should set first-, middle and lastName with Jr and III',
-        fullName: 'MyFirstName MyMiddleName MyLastName Jr III',
-        expected: Object.assign(new IdentityView(), {
-            firstName: 'MyFirstName',
-            middleName: 'MyMiddleName',
-            lastName: 'MyLastName Jr III',
-        }),
-    },
+  {
+    title: "Given #fullName should set firstName",
+    fullName: "MyFirstName",
+    expected: Object.assign(new IdentityView(), {
+      firstName: "MyFirstName",
+      middleName: null,
+      lastName: null,
+    }),
+  },
+  {
+    title: "Given #fullName should set first- and lastName",
+    fullName: "MyFirstName MyLastName",
+    expected: Object.assign(new IdentityView(), {
+      firstName: "MyFirstName",
+      middleName: null,
+      lastName: "MyLastName",
+    }),
+  },
+  {
+    title: "Given #fullName should set first-, middle and lastName",
+    fullName: "MyFirstName MyMiddleName MyLastName",
+    expected: Object.assign(new IdentityView(), {
+      firstName: "MyFirstName",
+      middleName: "MyMiddleName",
+      lastName: "MyLastName",
+    }),
+  },
+  {
+    title: "Given #fullName should set first-, middle and lastName with Jr",
+    fullName: "MyFirstName MyMiddleName MyLastName Jr",
+    expected: Object.assign(new IdentityView(), {
+      firstName: "MyFirstName",
+      middleName: "MyMiddleName",
+      lastName: "MyLastName Jr",
+    }),
+  },
+  {
+    title: "Given #fullName should set first-, middle and lastName with Jr and III",
+    fullName: "MyFirstName MyMiddleName MyLastName Jr III",
+    expected: Object.assign(new IdentityView(), {
+      firstName: "MyFirstName",
+      middleName: "MyMiddleName",
+      lastName: "MyLastName Jr III",
+    }),
+  },
 ];
 
-
 function expectLogin(cipher: CipherView) {
-    expect(cipher.type).toBe(CipherType.Login);
+  expect(cipher.type).toBe(CipherType.Login);
 
-    expect(cipher.name).toBe('SomeVaultItemName');
-    expect(cipher.notes).toBe('Some note for the VaultItem');
-    expect(cipher.login.uri).toBe('https://example.com');
-    expect(cipher.login.username).toBe('hello@bitwarden.com');
-    expect(cipher.login.password).toBe('someStrongPassword');
+  expect(cipher.name).toBe("SomeVaultItemName");
+  expect(cipher.notes).toBe("Some note for the VaultItem");
+  expect(cipher.login.uri).toBe("https://example.com");
+  expect(cipher.login.username).toBe("hello@bitwarden.com");
+  expect(cipher.login.password).toBe("someStrongPassword");
 }
 
 function expectCreditCard(cipher: CipherView) {
-    expect(cipher.type).toBe(CipherType.Card);
-
-    expect(cipher.name).toBe('SomeVisa');
-    expect(cipher.card.brand).toBe('Visa');
-    expect(cipher.card.cardholderName).toBe('SomeHolder');
-    expect(cipher.card.number).toBe('4024007103939509');
-    expect(cipher.card.code).toBe('123');
-    expect(cipher.card.expMonth).toBe('1');
-    expect(cipher.card.expYear).toBe('22');
+  expect(cipher.type).toBe(CipherType.Card);
+
+  expect(cipher.name).toBe("SomeVisa");
+  expect(cipher.card.brand).toBe("Visa");
+  expect(cipher.card.cardholderName).toBe("SomeHolder");
+  expect(cipher.card.number).toBe("4024007103939509");
+  expect(cipher.card.code).toBe("123");
+  expect(cipher.card.expMonth).toBe("1");
+  expect(cipher.card.expYear).toBe("22");
 }
 
 function expectIdentity(cipher: CipherView) {
-    expect(cipher.type).toBe(CipherType.Identity);
-
-    expect(cipher.name).toBe('SomeTitle');
-    expect(cipher.identity.fullName).toBe('MyFirstName MyMiddleName MyLastName');
-    expect(cipher.identity.firstName).toBe('MyFirstName');
-    expect(cipher.identity.middleName).toBe('MyMiddleName');
-    expect(cipher.identity.lastName).toBe('MyLastName');
-    expect(cipher.identity.email).toBe('hello@bitwarden.com');
-    expect(cipher.identity.phone).toBe('123456789');
-
-    expect(cipher.identity.address1).toBe('Test street 123');
-    expect(cipher.identity.address2).toBe('additional addressinfo');
-    expect(cipher.identity.postalCode).toBe('123456');
-    expect(cipher.identity.city).toBe('Cologne');
-    expect(cipher.identity.state).toBe('North-Rhine-Westphalia');
-    expect(cipher.identity.country).toBe('GERMANY');
-    expect(cipher.notes).toBe('SomeNoteToMyIdentity');
+  expect(cipher.type).toBe(CipherType.Identity);
+
+  expect(cipher.name).toBe("SomeTitle");
+  expect(cipher.identity.fullName).toBe("MyFirstName MyMiddleName MyLastName");
+  expect(cipher.identity.firstName).toBe("MyFirstName");
+  expect(cipher.identity.middleName).toBe("MyMiddleName");
+  expect(cipher.identity.lastName).toBe("MyLastName");
+  expect(cipher.identity.email).toBe("hello@bitwarden.com");
+  expect(cipher.identity.phone).toBe("123456789");
+
+  expect(cipher.identity.address1).toBe("Test street 123");
+  expect(cipher.identity.address2).toBe("additional addressinfo");
+  expect(cipher.identity.postalCode).toBe("123456");
+  expect(cipher.identity.city).toBe("Cologne");
+  expect(cipher.identity.state).toBe("North-Rhine-Westphalia");
+  expect(cipher.identity.country).toBe("GERMANY");
+  expect(cipher.notes).toBe("SomeNoteToMyIdentity");
 }
 
 function expectSecureNote(cipher: CipherView) {
-    expect(cipher.type).toBe(CipherType.SecureNote);
+  expect(cipher.type).toBe(CipherType.SecureNote);
 
-    expect(cipher.name).toBe('MySuperSecureNoteTitle');
-    expect(cipher.secureNote.type).toBe(SecureNoteType.Generic);
-    expect(cipher.notes).toBe('MySuperSecureNote');
+  expect(cipher.name).toBe("MySuperSecureNoteTitle");
+  expect(cipher.secureNote.type).toBe(SecureNoteType.Generic);
+  expect(cipher.notes).toBe("MySuperSecureNote");
 }
 
-describe('NordPass CSV Importer', () => {
-    let importer: Importer;
-    beforeEach(() => {
-        importer = new Importer();
-    });
-
-    it('should parse login records', async () => {
-        const result = await importer.parse(loginData);
-
-        expect(result).not.toBeNull();
-        expect(result.success).toBe(true);
-        expect(result.ciphers.length).toBe(1);
-        const cipher = result.ciphers[0];
-        expectLogin(cipher);
-    });
-
-    it('should parse credit card records', async () => {
-        const result = await importer.parse(creditCardData);
-
-        expect(result).not.toBeNull();
-        expect(result.success).toBe(true);
-        expect(result.ciphers.length).toBe(1);
-        const cipher = result.ciphers[0];
-        expectCreditCard(cipher);
-    });
-
-    it('should parse identity records', async () => {
-        const result = await importer.parse(identityData.replace('#fullName', 'MyFirstName MyMiddleName MyLastName'));
-
-        expect(result).not.toBeNull();
-        expect(result.success).toBe(true);
-        expect(result.ciphers.length).toBe(1);
-        const cipher = result.ciphers[0];
-        expectIdentity(cipher);
-    });
-
-    namesTestData.forEach(data => {
-        it(data.title.replace('#fullName', data.fullName), async () => {
-            const result = await importer.parse(identityData.replace('#fullName', data.fullName));
-
-            expect(result).not.toBeNull();
-            expect(result.success).toBe(true);
-            expect(result.ciphers.length).toBe(1);
-            const cipher = result.ciphers[0];
-            expect(cipher.identity.firstName).toBe(data.expected.firstName);
-            expect(cipher.identity.middleName).toBe(data.expected.middleName);
-            expect(cipher.identity.lastName).toBe(data.expected.lastName);
-        });
-    });
-
-    it('should parse secureNote records', async () => {
-        const result = await importer.parse(secureNoteData);
-
-        expect(result).not.toBeNull();
-        expect(result.success).toBe(true);
-        expect(result.ciphers.length).toBe(1);
-        const cipher = result.ciphers[0];
-        expectSecureNote(cipher);
-    });
-
-    it('should parse an item and create a folder', async () => {
-        const result = await importer.parse(secureNoteData);
-
-        expect(result).not.toBeNull();
-        expect(result.success).toBe(true);
-        expect(result.folders.length).toBe(1);
-        const folder = result.folders[0];
-        expect(folder.name).toBe('notesFolder');
+describe("NordPass CSV Importer", () => {
+  let importer: Importer;
+  beforeEach(() => {
+    importer = new Importer();
+  });
+
+  it("should parse login records", async () => {
+    const result = await importer.parse(loginData);
+
+    expect(result).not.toBeNull();
+    expect(result.success).toBe(true);
+    expect(result.ciphers.length).toBe(1);
+    const cipher = result.ciphers[0];
+    expectLogin(cipher);
+  });
+
+  it("should parse credit card records", async () => {
+    const result = await importer.parse(creditCardData);
+
+    expect(result).not.toBeNull();
+    expect(result.success).toBe(true);
+    expect(result.ciphers.length).toBe(1);
+    const cipher = result.ciphers[0];
+    expectCreditCard(cipher);
+  });
+
+  it("should parse identity records", async () => {
+    const result = await importer.parse(
+      identityData.replace("#fullName", "MyFirstName MyMiddleName MyLastName")
+    );
+
+    expect(result).not.toBeNull();
+    expect(result.success).toBe(true);
+    expect(result.ciphers.length).toBe(1);
+    const cipher = result.ciphers[0];
+    expectIdentity(cipher);
+  });
+
+  namesTestData.forEach((data) => {
+    it(data.title.replace("#fullName", data.fullName), async () => {
+      const result = await importer.parse(identityData.replace("#fullName", data.fullName));
+
+      expect(result).not.toBeNull();
+      expect(result.success).toBe(true);
+      expect(result.ciphers.length).toBe(1);
+      const cipher = result.ciphers[0];
+      expect(cipher.identity.firstName).toBe(data.expected.firstName);
+      expect(cipher.identity.middleName).toBe(data.expected.middleName);
+      expect(cipher.identity.lastName).toBe(data.expected.lastName);
     });
+  });
+
+  it("should parse secureNote records", async () => {
+    const result = await importer.parse(secureNoteData);
+
+    expect(result).not.toBeNull();
+    expect(result.success).toBe(true);
+    expect(result.ciphers.length).toBe(1);
+    const cipher = result.ciphers[0];
+    expectSecureNote(cipher);
+  });
+
+  it("should parse an item and create a folder", async () => {
+    const result = await importer.parse(secureNoteData);
+
+    expect(result).not.toBeNull();
+    expect(result.success).toBe(true);
+    expect(result.folders.length).toBe(1);
+    const folder = result.folders[0];
+    expect(folder.name).toBe("notesFolder");
+  });
 });
diff --git a/jslib/spec/common/importers/onepassword1PifImporter.spec.ts b/jslib/spec/common/importers/onepassword1PifImporter.spec.ts
index 4c26a001..ffa2417a 100644
--- a/jslib/spec/common/importers/onepassword1PifImporter.spec.ts
+++ b/jslib/spec/common/importers/onepassword1PifImporter.spec.ts
@@ -1,513 +1,527 @@
-import { FieldType } from 'jslib-common/enums/fieldType';
-import { OnePassword1PifImporter as Importer } from 'jslib-common/importers/onepasswordImporters/onepassword1PifImporter';
+import { FieldType } from "jslib-common/enums/fieldType";
+import { OnePassword1PifImporter as Importer } from "jslib-common/importers/onepasswordImporters/onepassword1PifImporter";
 
-const TestData: string = '***aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee***\n' +
-    JSON.stringify({
-        uuid: 'AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA',
-        updatedAt: 1486071244,
-        securityLevel: 'SL5',
-        contentsHash: 'aaaaaaaa',
-        title: 'Imported Entry',
-        location: 'https://www.google.com',
-        secureContents: {
-            fields: [
-                {
-                    value: 'user@test.net',
-                    id: 'email-input',
-                    name: 'email',
-                    type: 'T',
-                    designation: 'username',
-                },
-                {
-                    value: 'myservicepassword',
-                    id: 'password-input',
-                    name: 'password',
-                    type: 'P',
-                    designation: 'password',
-                },
-            ],
-            sections: [
-                {
-                    fields: [
-                        {
-                            k: 'concealed',
-                            n: 'AAAAAAAAAAAABBBBBBBBBBBCCCCCCCCC',
-                            v: 'console-password-123',
-                            t: 'console password',
-                        },
-                    ],
-                    title: 'Admin Console',
-                    name: 'admin_console',
-                },
-            ],
-            passwordHistory: [
-                {
-                    value: 'old-password',
-                    time: 1447791421,
-                },
-            ],
+const TestData: string =
+  "***aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee***\n" +
+  JSON.stringify({
+    uuid: "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
+    updatedAt: 1486071244,
+    securityLevel: "SL5",
+    contentsHash: "aaaaaaaa",
+    title: "Imported Entry",
+    location: "https://www.google.com",
+    secureContents: {
+      fields: [
+        {
+          value: "user@test.net",
+          id: "email-input",
+          name: "email",
+          type: "T",
+          designation: "username",
+        },
+        {
+          value: "myservicepassword",
+          id: "password-input",
+          name: "password",
+          type: "P",
+          designation: "password",
         },
-        URLs: [
+      ],
+      sections: [
+        {
+          fields: [
             {
-                label: 'website',
-                url: 'https://www.google.com',
+              k: "concealed",
+              n: "AAAAAAAAAAAABBBBBBBBBBBCCCCCCCCC",
+              v: "console-password-123",
+              t: "console password",
             },
-        ],
-        txTimestamp: 1508941334,
-        createdAt: 1390426636,
-        typeName: 'webforms.WebForm',
-    });
+          ],
+          title: "Admin Console",
+          name: "admin_console",
+        },
+      ],
+      passwordHistory: [
+        {
+          value: "old-password",
+          time: 1447791421,
+        },
+      ],
+    },
+    URLs: [
+      {
+        label: "website",
+        url: "https://www.google.com",
+      },
+    ],
+    txTimestamp: 1508941334,
+    createdAt: 1390426636,
+    typeName: "webforms.WebForm",
+  });
 
 const WindowsOpVaultTestData = JSON.stringify({
-    category: '001',
-    created: 1544823719,
-    hmac: 'NtyBmTTPOb88HV3JUKPx1xl/vcMhac9kvCfe/NtszY0=',
-    k: '**REMOVED LONG LINE FOR LINTER** -Kyle',
-    tx: 1553395669,
-    updated: 1553395669,
-    uuid: '528AB076FB5F4FBF960884B8E01619AC',
-    overview: {
-        title: 'Google',
-        URLs: [
-            {
-                u: 'google.com',
-            },
+  category: "001",
+  created: 1544823719,
+  hmac: "NtyBmTTPOb88HV3JUKPx1xl/vcMhac9kvCfe/NtszY0=",
+  k: "**REMOVED LONG LINE FOR LINTER** -Kyle",
+  tx: 1553395669,
+  updated: 1553395669,
+  uuid: "528AB076FB5F4FBF960884B8E01619AC",
+  overview: {
+    title: "Google",
+    URLs: [
+      {
+        u: "google.com",
+      },
+    ],
+    url: "google.com",
+    ps: 26,
+    ainfo: "googluser",
+  },
+  details: {
+    passwordHistory: [
+      {
+        value: "oldpass1",
+        time: 1553394449,
+      },
+      {
+        value: "oldpass2",
+        time: 1553394457,
+      },
+      {
+        value: "oldpass3",
+        time: 1553394458,
+      },
+      {
+        value: "oldpass4",
+        time: 1553394459,
+      },
+      {
+        value: "oldpass5",
+        time: 1553394460,
+      },
+      {
+        value: "oldpass6",
+        time: 1553394461,
+      },
+    ],
+    fields: [
+      {
+        type: "T",
+        id: "username",
+        name: "username",
+        value: "googluser",
+        designation: "username",
+      },
+      {
+        type: "P",
+        id: "password",
+        name: "password",
+        value: "12345678901",
+        designation: "password",
+      },
+    ],
+    notesPlain: "This is a note\r\n\r\nline1\r\nline2",
+    sections: [
+      {
+        title: "test",
+        name: "1214FD88CD30405D9EED14BEB4D61B60",
+        fields: [
+          {
+            k: "string",
+            n: "6CC3BD77482D4559A4B8BB2D360F821B",
+            v: "fgfg",
+            t: "fgggf",
+          },
+          {
+            k: "concealed",
+            n: "5CFE7BCAA1DF4578BBF7EB508959BFF3",
+            v: "dfgdfgfdg",
+            t: "pwfield",
+          },
         ],
-        url: 'google.com',
-        ps: 26,
-        ainfo: 'googluser',
-    },
-    details: {
-        passwordHistory: [
-            {
-                value: 'oldpass1',
-                time: 1553394449,
+      },
+    ],
+  },
+});
+
+const IdentityTestData = JSON.stringify({
+  uuid: "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
+  updatedAt: 1553365894,
+  securityLevel: "SL5",
+  contentsHash: "eeeeeeee",
+  title: "Test Identity",
+  secureContents: {
+    lastname: "Fritzenberger",
+    zip: "223344",
+    birthdate_dd: "11",
+    homephone: "+49 333 222 111",
+    company: "Web Inc.",
+    firstname: "Frank",
+    birthdate_mm: "3",
+    country: "de",
+    sex: "male",
+    sections: [
+      {
+        fields: [
+          {
+            k: "string",
+            inputTraits: {
+              autocapitalization: "Words",
             },
-            {
-                value: 'oldpass2',
-                time: 1553394457,
+            n: "firstname",
+            v: "Frank",
+            a: {
+              guarded: "yes",
             },
-            {
-                value: 'oldpass3',
-                time: 1553394458,
+            t: "first name",
+          },
+          {
+            k: "string",
+            inputTraits: {
+              autocapitalization: "Words",
             },
-            {
-                value: 'oldpass4',
-                time: 1553394459,
+            n: "initial",
+            v: "MD",
+            a: {
+              guarded: "yes",
             },
-            {
-                value: 'oldpass5',
-                time: 1553394460,
+            t: "initial",
+          },
+          {
+            k: "string",
+            inputTraits: {
+              autocapitalization: "Words",
             },
-            {
-                value: 'oldpass6',
-                time: 1553394461,
+            n: "lastname",
+            v: "Fritzenberger",
+            a: {
+              guarded: "yes",
+            },
+            t: "last name",
+          },
+          {
+            k: "menu",
+            v: "male",
+            n: "sex",
+            a: {
+              guarded: "yes",
+            },
+            t: "sex",
+          },
+          {
+            k: "date",
+            v: 1552305660,
+            n: "birthdate",
+            a: {
+              guarded: "yes",
+            },
+            t: "birth date",
+          },
+          {
+            k: "string",
+            inputTraits: {
+              autocapitalization: "Words",
+            },
+            n: "occupation",
+            v: "Engineer",
+            a: {
+              guarded: "yes",
+            },
+            t: "occupation",
+          },
+          {
+            k: "string",
+            inputTraits: {
+              autocapitalization: "Words",
             },
+            n: "company",
+            v: "Web Inc.",
+            a: {
+              guarded: "yes",
+            },
+            t: "company",
+          },
+          {
+            k: "string",
+            inputTraits: {
+              autocapitalization: "Words",
+            },
+            n: "department",
+            v: "IT",
+            a: {
+              guarded: "yes",
+            },
+            t: "department",
+          },
+          {
+            k: "string",
+            inputTraits: {
+              autocapitalization: "Words",
+            },
+            n: "jobtitle",
+            v: "Developer",
+            a: {
+              guarded: "yes",
+            },
+            t: "job title",
+          },
         ],
+        title: "Identification",
+        name: "name",
+      },
+      {
         fields: [
-            {
-                type: 'T',
-                id: 'username',
-                name: 'username',
-                value: 'googluser',
-                designation: 'username',
+          {
+            k: "address",
+            inputTraits: {
+              autocapitalization: "Sentences",
             },
-            {
-                type: 'P',
-                id: 'password',
-                name: 'password',
-                value: '12345678901',
-                designation: 'password',
+            n: "address",
+            v: {
+              street: "Mainstreet 1",
+              city: "Berlin",
+              country: "de",
+              zip: "223344",
             },
-        ],
-        notesPlain: 'This is a note\r\n\r\nline1\r\nline2',
-        sections: [
-            {
-                title: 'test',
-                name: '1214FD88CD30405D9EED14BEB4D61B60',
-                fields: [
-                    {
-                        k: 'string',
-                        n: '6CC3BD77482D4559A4B8BB2D360F821B',
-                        v: 'fgfg',
-                        t: 'fgggf',
-                    },
-                    {
-                        k: 'concealed',
-                        n: '5CFE7BCAA1DF4578BBF7EB508959BFF3',
-                        v: 'dfgdfgfdg',
-                        t: 'pwfield',
-                    },
-                ],
+            a: {
+              guarded: "yes",
+            },
+            t: "address",
+          },
+          {
+            k: "phone",
+            v: "+49 001 222 333 44",
+            n: "defphone",
+            a: {
+              guarded: "yes",
+            },
+            t: "default phone",
+          },
+          {
+            k: "phone",
+            v: "+49 333 222 111",
+            n: "homephone",
+            a: {
+              guarded: "yes",
+            },
+            t: "home",
+          },
+          {
+            k: "phone",
+            n: "cellphone",
+            a: {
+              guarded: "yes",
             },
+            t: "mobile",
+          },
+          {
+            k: "phone",
+            n: "busphone",
+            a: {
+              guarded: "yes",
+            },
+            t: "business",
+          },
         ],
-    },
-});
-
-const IdentityTestData = JSON.stringify({
-    uuid: 'AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA',
-    updatedAt: 1553365894,
-    securityLevel: 'SL5',
-    contentsHash: 'eeeeeeee',
-    title: 'Test Identity',
-    secureContents: {
-        lastname: 'Fritzenberger',
-        zip: '223344',
-        birthdate_dd: '11',
-        homephone: '+49 333 222 111',
-        company: 'Web Inc.',
-        firstname: 'Frank',
-        birthdate_mm: '3',
-        country: 'de',
-        sex: 'male',
-        sections: [
-            {
-                fields: [
-                    {
-                        k: 'string',
-                        inputTraits: {
-                            autocapitalization: 'Words',
-                        },
-                        n: 'firstname',
-                        v: 'Frank',
-                        a: {
-                            guarded: 'yes',
-                        },
-                        t: 'first name',
-                    },
-                    {
-                        k: 'string',
-                        inputTraits: {
-                            autocapitalization: 'Words',
-                        },
-                        n: 'initial',
-                        v: 'MD',
-                        a: {
-                            guarded: 'yes',
-                        },
-                        t: 'initial',
-                    },
-                    {
-                        k: 'string',
-                        inputTraits: {
-                            autocapitalization: 'Words',
-                        },
-                        n: 'lastname',
-                        v: 'Fritzenberger',
-                        a: {
-                            guarded: 'yes',
-                        },
-                        t: 'last name',
-                    },
-                    {
-                        k: 'menu',
-                        v: 'male',
-                        n: 'sex',
-                        a: {
-                            guarded: 'yes',
-                        },
-                        t: 'sex',
-                    },
-                    {
-                        k: 'date',
-                        v: 1552305660,
-                        n: 'birthdate',
-                        a: {
-                            guarded: 'yes',
-                        },
-                        t: 'birth date',
-                    },
-                    {
-                        k: 'string',
-                        inputTraits: {
-                            autocapitalization: 'Words',
-                        },
-                        n: 'occupation',
-                        v: 'Engineer',
-                        a: {
-                            guarded: 'yes',
-                        },
-                        t: 'occupation',
-                    },
-                    {
-                        k: 'string',
-                        inputTraits: {
-                            autocapitalization: 'Words',
-                        },
-                        n: 'company',
-                        v: 'Web Inc.',
-                        a: {
-                            guarded: 'yes',
-                        },
-                        t: 'company',
-                    },
-                    {
-                        k: 'string',
-                        inputTraits: {
-                            autocapitalization: 'Words',
-                        },
-                        n: 'department',
-                        v: 'IT',
-                        a: {
-                            guarded: 'yes',
-                        },
-                        t: 'department',
-                    },
-                    {
-                        k: 'string',
-                        inputTraits: {
-                            autocapitalization: 'Words',
-                        },
-                        n: 'jobtitle',
-                        v: 'Developer',
-                        a: {
-                            guarded: 'yes',
-                        },
-                        t: 'job title',
-                    },
-                ],
-                title: 'Identification',
-                name: 'name',
+        title: "Address",
+        name: "address",
+      },
+      {
+        fields: [
+          {
+            k: "string",
+            n: "username",
+            a: {
+              guarded: "yes",
             },
-            {
-                fields: [
-                    {
-                        k: 'address',
-                        inputTraits: {
-                            autocapitalization: 'Sentences',
-                        },
-                        n: 'address',
-                        v: {
-                            street: 'Mainstreet 1',
-                            city: 'Berlin',
-                            country: 'de',
-                            zip: '223344',
-                        },
-                        a: {
-                            guarded: 'yes',
-                        },
-                        t: 'address',
-                    },
-                    {
-                        k: 'phone',
-                        v: '+49 001 222 333 44',
-                        n: 'defphone',
-                        a: {
-                            guarded: 'yes',
-                        },
-                        t: 'default phone',
-                    },
-                    {
-                        k: 'phone',
-                        v: '+49 333 222 111',
-                        n: 'homephone',
-                        a: {
-                            guarded: 'yes',
-                        },
-                        t: 'home',
-                    },
-                    {
-                        k: 'phone',
-                        n: 'cellphone',
-                        a: {
-                            guarded: 'yes',
-                        },
-                        t: 'mobile',
-                    },
-                    {
-                        k: 'phone',
-                        n: 'busphone',
-                        a: {
-                            guarded: 'yes',
-                        },
-                        t: 'business',
-                    },
-                ],
-                title: 'Address',
-                name: 'address',
+            t: "username",
+          },
+          {
+            k: "string",
+            n: "reminderq",
+            t: "reminder question",
+          },
+          {
+            k: "string",
+            n: "remindera",
+            t: "reminder answer",
+          },
+          {
+            k: "string",
+            inputTraits: {
+              keyboard: "EmailAddress",
             },
-            {
-                fields: [
-                    {
-                        k: 'string',
-                        n: 'username',
-                        a: {
-                            guarded: 'yes',
-                        },
-                        t: 'username',
-                    },
-                    {
-                        k: 'string',
-                        n: 'reminderq',
-                        t: 'reminder question',
-                    },
-                    {
-                        k: 'string',
-                        n: 'remindera',
-                        t: 'reminder answer',
-                    },
-                    {
-                        k: 'string',
-                        inputTraits: {
-                            keyboard: 'EmailAddress',
-                        },
-                        n: 'email',
-                        v: 'test@web.de',
-                        a: {
-                            guarded: 'yes',
-                        },
-                        t: 'email',
-                    },
-                    {
-                        k: 'string',
-                        n: 'website',
-                        inputTraits: {
-                            keyboard: 'URL',
-                        },
-                        t: 'website',
-                    },
-                    {
-                        k: 'string',
-                        n: 'icq',
-                        t: 'ICQ',
-                    },
-                    {
-                        k: 'string',
-                        n: 'skype',
-                        t: 'skype',
-                    },
-                    {
-                        k: 'string',
-                        n: 'aim',
-                        t: 'AOL/AIM',
-                    },
-                    {
-                        k: 'string',
-                        n: 'yahoo',
-                        t: 'Yahoo',
-                    },
-                    {
-                        k: 'string',
-                        n: 'msn',
-                        t: 'MSN',
-                    },
-                    {
-                        k: 'string',
-                        n: 'forumsig',
-                        t: 'forum signature',
-                    },
-                ],
-                title: 'Internet Details',
-                name: 'internet',
+            n: "email",
+            v: "test@web.de",
+            a: {
+              guarded: "yes",
             },
-            {
-                title: 'Related Items',
-                name: 'linked items',
+            t: "email",
+          },
+          {
+            k: "string",
+            n: "website",
+            inputTraits: {
+              keyboard: "URL",
             },
+            t: "website",
+          },
+          {
+            k: "string",
+            n: "icq",
+            t: "ICQ",
+          },
+          {
+            k: "string",
+            n: "skype",
+            t: "skype",
+          },
+          {
+            k: "string",
+            n: "aim",
+            t: "AOL/AIM",
+          },
+          {
+            k: "string",
+            n: "yahoo",
+            t: "Yahoo",
+          },
+          {
+            k: "string",
+            n: "msn",
+            t: "MSN",
+          },
+          {
+            k: "string",
+            n: "forumsig",
+            t: "forum signature",
+          },
         ],
-        initial: 'MD',
-        address1: 'Mainstreet 1',
-        city: 'Berlin',
-        jobtitle: 'Developer',
-        occupation: 'Engineer',
-        department: 'IT',
-        email: 'test@web.de',
-        birthdate_yy: '2019',
-        homephone_local: '+49 333 222 111',
-        defphone_local: '+49 001 222 333 44',
-        defphone: '+49 001 222 333 44',
-    },
-    txTimestamp: 1553365894,
-    createdAt: 1553364679,
-    typeName: 'identities.Identity',
+        title: "Internet Details",
+        name: "internet",
+      },
+      {
+        title: "Related Items",
+        name: "linked items",
+      },
+    ],
+    initial: "MD",
+    address1: "Mainstreet 1",
+    city: "Berlin",
+    jobtitle: "Developer",
+    occupation: "Engineer",
+    department: "IT",
+    email: "test@web.de",
+    birthdate_yy: "2019",
+    homephone_local: "+49 333 222 111",
+    defphone_local: "+49 001 222 333 44",
+    defphone: "+49 001 222 333 44",
+  },
+  txTimestamp: 1553365894,
+  createdAt: 1553364679,
+  typeName: "identities.Identity",
 });
 
-describe('1Password 1Pif Importer', () => {
-    it('should parse data', async () => {
-        const importer = new Importer();
-        const result = await importer.parse(TestData);
-        expect(result != null).toBe(true);
+describe("1Password 1Pif Importer", () => {
+  it("should parse data", async () => {
+    const importer = new Importer();
+    const result = await importer.parse(TestData);
+    expect(result != null).toBe(true);
 
-        const cipher = result.ciphers.shift();
-        expect(cipher.login.username).toEqual('user@test.net');
-        expect(cipher.login.password).toEqual('myservicepassword');
-        expect(cipher.login.uris.length).toEqual(1);
-        const uriView = cipher.login.uris.shift();
-        expect(uriView.uri).toEqual('https://www.google.com');
-    });
+    const cipher = result.ciphers.shift();
+    expect(cipher.login.username).toEqual("user@test.net");
+    expect(cipher.login.password).toEqual("myservicepassword");
+    expect(cipher.login.uris.length).toEqual(1);
+    const uriView = cipher.login.uris.shift();
+    expect(uriView.uri).toEqual("https://www.google.com");
+  });
 
-    it('should create concealed field as "hidden" type', async () => {
-        const importer = new Importer();
-        const result = await importer.parse(TestData);
-        expect(result != null).toBe(true);
+  it('should create concealed field as "hidden" type', async () => {
+    const importer = new Importer();
+    const result = await importer.parse(TestData);
+    expect(result != null).toBe(true);
 
-        const ciphers = result.ciphers;
-        expect(ciphers.length).toEqual(1);
+    const ciphers = result.ciphers;
+    expect(ciphers.length).toEqual(1);
 
-        const cipher = ciphers.shift();
-        const fields = cipher.fields;
-        expect(fields.length).toEqual(1);
+    const cipher = ciphers.shift();
+    const fields = cipher.fields;
+    expect(fields.length).toEqual(1);
 
-        const field = fields.shift();
-        expect(field.name).toEqual('console password');
-        expect(field.value).toEqual('console-password-123');
-        expect(field.type).toEqual(FieldType.Hidden);
-    });
+    const field = fields.shift();
+    expect(field.name).toEqual("console password");
+    expect(field.value).toEqual("console-password-123");
+    expect(field.type).toEqual(FieldType.Hidden);
+  });
 
-    it('should create identity records', async () => {
-        const importer = new Importer();
-        const result = await importer.parse(IdentityTestData);
-        expect(result != null).toBe(true);
-        const cipher = result.ciphers.shift();
-        expect(cipher.name).toEqual('Test Identity');
+  it("should create identity records", async () => {
+    const importer = new Importer();
+    const result = await importer.parse(IdentityTestData);
+    expect(result != null).toBe(true);
+    const cipher = result.ciphers.shift();
+    expect(cipher.name).toEqual("Test Identity");
 
-        const identity = cipher.identity;
-        expect(identity.firstName).toEqual('Frank');
-        expect(identity.middleName).toEqual('MD');
-        expect(identity.lastName).toEqual('Fritzenberger');
-        expect(identity.company).toEqual('Web Inc.');
-        expect(identity.address1).toEqual('Mainstreet 1');
-        expect(identity.country).toEqual('DE');
-        expect(identity.city).toEqual('Berlin');
-        expect(identity.postalCode).toEqual('223344');
-        expect(identity.phone).toEqual('+49 001 222 333 44');
-        expect(identity.email).toEqual('test@web.de');
+    const identity = cipher.identity;
+    expect(identity.firstName).toEqual("Frank");
+    expect(identity.middleName).toEqual("MD");
+    expect(identity.lastName).toEqual("Fritzenberger");
+    expect(identity.company).toEqual("Web Inc.");
+    expect(identity.address1).toEqual("Mainstreet 1");
+    expect(identity.country).toEqual("DE");
+    expect(identity.city).toEqual("Berlin");
+    expect(identity.postalCode).toEqual("223344");
+    expect(identity.phone).toEqual("+49 001 222 333 44");
+    expect(identity.email).toEqual("test@web.de");
 
-        // remaining fields as custom fields
-        expect(cipher.fields.length).toEqual(6);
-    });
+    // remaining fields as custom fields
+    expect(cipher.fields.length).toEqual(6);
+    const fields = cipher.fields;
+    expect(fields[0].name).toEqual("sex");
+    expect(fields[0].value).toEqual("male");
+    expect(fields[1].name).toEqual("birth date");
+    expect(fields[1].value).toEqual("Mon, 11 Mar 2019 12:01:00 GMT");
+    expect(fields[2].name).toEqual("occupation");
+    expect(fields[2].value).toEqual("Engineer");
+    expect(fields[3].name).toEqual("department");
+    expect(fields[3].value).toEqual("IT");
+    expect(fields[4].name).toEqual("job title");
+    expect(fields[4].value).toEqual("Developer");
+    expect(fields[5].name).toEqual("home");
+    expect(fields[5].value).toEqual("+49 333 222 111");
+  });
 
-    it('should create password history', async () => {
-        const importer = new Importer();
-        const result = await importer.parse(TestData);
-        const cipher = result.ciphers.shift();
+  it("should create password history", async () => {
+    const importer = new Importer();
+    const result = await importer.parse(TestData);
+    const cipher = result.ciphers.shift();
 
-        expect(cipher.passwordHistory.length).toEqual(1);
-        const ph = cipher.passwordHistory.shift();
-        expect(ph.password).toEqual('old-password');
-        expect(ph.lastUsedDate.toISOString()).toEqual('2015-11-17T20:17:01.000Z');
-    });
+    expect(cipher.passwordHistory.length).toEqual(1);
+    const ph = cipher.passwordHistory.shift();
+    expect(ph.password).toEqual("old-password");
+    expect(ph.lastUsedDate.toISOString()).toEqual("2015-11-17T20:17:01.000Z");
+  });
 
-    it('should create password history from windows opvault 1pif format', async () => {
-        const importer = new Importer();
-        const result = await importer.parse(WindowsOpVaultTestData);
-        const cipher = result.ciphers.shift();
+  it("should create password history from windows opvault 1pif format", async () => {
+    const importer = new Importer();
+    const result = await importer.parse(WindowsOpVaultTestData);
+    const cipher = result.ciphers.shift();
 
-        expect(cipher.passwordHistory.length).toEqual(5);
-        let ph = cipher.passwordHistory.shift();
-        expect(ph.password).toEqual('oldpass6');
-        expect(ph.lastUsedDate.toISOString()).toEqual('2019-03-24T02:27:41.000Z');
-        ph = cipher.passwordHistory.shift();
-        expect(ph.password).toEqual('oldpass5');
-        expect(ph.lastUsedDate.toISOString()).toEqual('2019-03-24T02:27:40.000Z');
-        ph = cipher.passwordHistory.shift();
-        expect(ph.password).toEqual('oldpass4');
-        expect(ph.lastUsedDate.toISOString()).toEqual('2019-03-24T02:27:39.000Z');
-        ph = cipher.passwordHistory.shift();
-        expect(ph.password).toEqual('oldpass3');
-        expect(ph.lastUsedDate.toISOString()).toEqual('2019-03-24T02:27:38.000Z');
-        ph = cipher.passwordHistory.shift();
-        expect(ph.password).toEqual('oldpass2');
-        expect(ph.lastUsedDate.toISOString()).toEqual('2019-03-24T02:27:37.000Z');
-    });
+    expect(cipher.passwordHistory.length).toEqual(5);
+    let ph = cipher.passwordHistory.shift();
+    expect(ph.password).toEqual("oldpass6");
+    expect(ph.lastUsedDate.toISOString()).toEqual("2019-03-24T02:27:41.000Z");
+    ph = cipher.passwordHistory.shift();
+    expect(ph.password).toEqual("oldpass5");
+    expect(ph.lastUsedDate.toISOString()).toEqual("2019-03-24T02:27:40.000Z");
+    ph = cipher.passwordHistory.shift();
+    expect(ph.password).toEqual("oldpass4");
+    expect(ph.lastUsedDate.toISOString()).toEqual("2019-03-24T02:27:39.000Z");
+    ph = cipher.passwordHistory.shift();
+    expect(ph.password).toEqual("oldpass3");
+    expect(ph.lastUsedDate.toISOString()).toEqual("2019-03-24T02:27:38.000Z");
+    ph = cipher.passwordHistory.shift();
+    expect(ph.password).toEqual("oldpass2");
+    expect(ph.lastUsedDate.toISOString()).toEqual("2019-03-24T02:27:37.000Z");
+  });
 });
diff --git a/jslib/spec/common/importers/onepasswordMacCsvImporter.spec.ts b/jslib/spec/common/importers/onepasswordMacCsvImporter.spec.ts
index 47326db6..ed643c8d 100644
--- a/jslib/spec/common/importers/onepasswordMacCsvImporter.spec.ts
+++ b/jslib/spec/common/importers/onepasswordMacCsvImporter.spec.ts
@@ -1,71 +1,75 @@
-import { OnePasswordMacCsvImporter as Importer } from 'jslib-common/importers/onepasswordImporters/onepasswordMacCsvImporter';
+import { OnePasswordMacCsvImporter as Importer } from "jslib-common/importers/onepasswordImporters/onepasswordMacCsvImporter";
 
-import { CipherType } from 'jslib-common/enums/cipherType';
-import { CipherView } from 'jslib-common/models/view/cipherView';
+import { CipherType } from "jslib-common/enums/cipherType";
+import { CipherView } from "jslib-common/models/view/cipherView";
 
-import { data as creditCardData } from './testData/onePasswordCsv/creditCard.mac.csv';
-import { data as identityData } from './testData/onePasswordCsv/identity.mac.csv';
-import { data as multiTypeData } from './testData/onePasswordCsv/multipleItems.mac.csv';
+import { data as creditCardData } from "./testData/onePasswordCsv/creditCard.mac.csv";
+import { data as identityData } from "./testData/onePasswordCsv/identity.mac.csv";
+import { data as multiTypeData } from "./testData/onePasswordCsv/multipleItems.mac.csv";
 
 function expectIdentity(cipher: CipherView) {
-    expect(cipher.type).toBe(CipherType.Identity);
+  expect(cipher.type).toBe(CipherType.Identity);
 
-    expect(cipher.identity).toEqual(jasmine.objectContaining({
-        firstName: 'first name',
-        middleName: 'mi',
-        lastName: 'last name',
-        username: 'userNam3',
-        company: 'bitwarden',
-        phone: '8005555555',
-        email: 'email@bitwarden.com',
-    }));
+  expect(cipher.identity).toEqual(
+    jasmine.objectContaining({
+      firstName: "first name",
+      middleName: "mi",
+      lastName: "last name",
+      username: "userNam3",
+      company: "bitwarden",
+      phone: "8005555555",
+      email: "email@bitwarden.com",
+    })
+  );
 
-    expect(cipher.notes).toContain('address\ncity state zip\nUnited States');
+  expect(cipher.notes).toContain("address\ncity state zip\nUnited States");
 }
 
 function expectCreditCard(cipher: CipherView) {
-    expect(cipher.type).toBe(CipherType.Card);
+  expect(cipher.type).toBe(CipherType.Card);
 
-    expect(cipher.card).toEqual(jasmine.objectContaining({
-        number: '4111111111111111',
-        code: '111',
-        cardholderName: 'test',
-        expMonth: '1',
-        expYear: '2030',
-    }));
+  expect(cipher.card).toEqual(
+    jasmine.objectContaining({
+      number: "4111111111111111",
+      code: "111",
+      cardholderName: "test",
+      expMonth: "1",
+      expYear: "2030",
+    })
+  );
 }
 
-describe('1Password mac CSV Importer', () => {
-    it('should parse identity records', async () => {
-        const importer = new Importer();
-        const result = await importer.parse(identityData);
+describe("1Password mac CSV Importer", () => {
+  it("should parse identity records", async () => {
+    const importer = new Importer();
+    const result = await importer.parse(identityData);
 
-        expect(result).not.toBeNull();
-        expect(result.success).toBe(true);
-        expect(result.ciphers.length).toBe(1);
-        const cipher = result.ciphers[0];
-        expectIdentity(cipher);
-    });
+    expect(result).not.toBeNull();
+    expect(result.success).toBe(true);
+    expect(result.ciphers.length).toBe(1);
+    const cipher = result.ciphers[0];
+    expectIdentity(cipher);
+  });
 
-    it('should parse credit card records', async () => {
-        const importer = new Importer();
-        const result = await importer.parse(creditCardData);
+  it("should parse credit card records", async () => {
+    const importer = new Importer();
+    const result = await importer.parse(creditCardData);
 
-        expect(result).not.toBeNull();
-        expect(result.success).toBe(true);
-        expect(result.ciphers.length).toBe(1);
-        const cipher = result.ciphers[0];
-        expectCreditCard(cipher);
-    });
+    expect(result).not.toBeNull();
+    expect(result.success).toBe(true);
+    expect(result.ciphers.length).toBe(1);
+    const cipher = result.ciphers[0];
+    expectCreditCard(cipher);
+  });
 
-    it('should parse csv\'s with multiple record type', async () => {
-        const importer = new Importer();
-        const result = await importer.parse(multiTypeData);
+  it("should parse csv's with multiple record type", async () => {
+    const importer = new Importer();
+    const result = await importer.parse(multiTypeData);
 
-        expect(result).not.toBeNull();
-        expect(result.success).toBe(true);
-        expect(result.ciphers.length).toBe(4);
-        expectIdentity(result.ciphers[1]);
-        expectCreditCard(result.ciphers[2]);
-    });
+    expect(result).not.toBeNull();
+    expect(result.success).toBe(true);
+    expect(result.ciphers.length).toBe(4);
+    expectIdentity(result.ciphers[1]);
+    expectCreditCard(result.ciphers[2]);
+  });
 });
diff --git a/jslib/spec/common/importers/onepasswordWinCsvImporter.spec.ts b/jslib/spec/common/importers/onepasswordWinCsvImporter.spec.ts
index 3b11d15a..a8415d73 100644
--- a/jslib/spec/common/importers/onepasswordWinCsvImporter.spec.ts
+++ b/jslib/spec/common/importers/onepasswordWinCsvImporter.spec.ts
@@ -1,82 +1,88 @@
-import { OnePasswordWinCsvImporter as Importer } from 'jslib-common/importers/onepasswordImporters/onepasswordWinCsvImporter';
+import { OnePasswordWinCsvImporter as Importer } from "jslib-common/importers/onepasswordImporters/onepasswordWinCsvImporter";
 
-import { CipherType } from 'jslib-common/enums/cipherType';
-import { FieldType } from 'jslib-common/enums/fieldType';
-import { CipherView } from 'jslib-common/models/view/cipherView';
-import { FieldView } from 'jslib-common/models/view/fieldView';
+import { CipherType } from "jslib-common/enums/cipherType";
+import { FieldType } from "jslib-common/enums/fieldType";
+import { CipherView } from "jslib-common/models/view/cipherView";
+import { FieldView } from "jslib-common/models/view/fieldView";
 
-import { data as creditCardData } from './testData/onePasswordCsv/creditCard.windows.csv';
-import { data as identityData } from './testData/onePasswordCsv/identity.windows.csv';
-import { data as multiTypeData } from './testData/onePasswordCsv/multipleItems.windows.csv';
+import { data as creditCardData } from "./testData/onePasswordCsv/creditCard.windows.csv";
+import { data as identityData } from "./testData/onePasswordCsv/identity.windows.csv";
+import { data as multiTypeData } from "./testData/onePasswordCsv/multipleItems.windows.csv";
 
 function expectIdentity(cipher: CipherView) {
-    expect(cipher.type).toBe(CipherType.Identity);
+  expect(cipher.type).toBe(CipherType.Identity);
 
-    expect(cipher.identity).toEqual(jasmine.objectContaining({
-        firstName: 'first name',
-        middleName: 'mi',
-        lastName: 'last name',
-        username: 'userNam3',
-        company: 'bitwarden',
-        phone: '8005555555',
-        email: 'email@bitwarden.com',
-    }));
+  expect(cipher.identity).toEqual(
+    jasmine.objectContaining({
+      firstName: "first name",
+      middleName: "mi",
+      lastName: "last name",
+      username: "userNam3",
+      company: "bitwarden",
+      phone: "8005555555",
+      email: "email@bitwarden.com",
+    })
+  );
 
-    expect(cipher.fields).toEqual(jasmine.arrayContaining([
-        Object.assign(new FieldView(), {
-            type: FieldType.Text,
-            name: 'address',
-            value: 'address city state zip us',
-        }),
-    ]));
+  expect(cipher.fields).toEqual(
+    jasmine.arrayContaining([
+      Object.assign(new FieldView(), {
+        type: FieldType.Text,
+        name: "address",
+        value: "address city state zip us",
+      }),
+    ])
+  );
 }
 
 function expectCreditCard(cipher: CipherView) {
-    expect(cipher.type).toBe(CipherType.Card);
+  expect(cipher.type).toBe(CipherType.Card);
 
-    expect(cipher.card).toEqual(jasmine.objectContaining({
-        number: '4111111111111111',
-        code: '111',
-        cardholderName: 'test',
-        expMonth: '1',
-        expYear: '1970',
-    }));
+  expect(cipher.card).toEqual(
+    jasmine.objectContaining({
+      number: "4111111111111111",
+      code: "111",
+      cardholderName: "test",
+      expMonth: "1",
+      expYear: "1970",
+    })
+  );
 }
 
-describe('1Password windows CSV Importer', () => {
-    let importer: Importer;
-    beforeEach(() => {
-        importer = new Importer();
-    });
+describe("1Password windows CSV Importer", () => {
+  let importer: Importer;
+  beforeEach(() => {
+    importer = new Importer();
+  });
 
-    it('should parse identity records', async () => {
-        const result = await importer.parse(identityData);
+  it("should parse identity records", async () => {
+    const result = await importer.parse(identityData);
 
-        expect(result).not.toBeNull();
-        expect(result.success).toBe(true);
-        expect(result.ciphers.length).toBe(1);
-        const cipher = result.ciphers[0];
-        expectIdentity(cipher);
-    });
+    expect(result).not.toBeNull();
+    expect(result.success).toBe(true);
+    expect(result.ciphers.length).toBe(1);
+    const cipher = result.ciphers[0];
+    expectIdentity(cipher);
+  });
 
-    it('should parse credit card records', async () => {
-        const result = await importer.parse(creditCardData);
+  it("should parse credit card records", async () => {
+    const result = await importer.parse(creditCardData);
 
-        expect(result).not.toBeNull();
-        expect(result.success).toBe(true);
-        expect(result.ciphers.length).toBe(1);
-        const cipher = result.ciphers[0];
-        expectCreditCard(cipher);
-    });
+    expect(result).not.toBeNull();
+    expect(result.success).toBe(true);
+    expect(result.ciphers.length).toBe(1);
+    const cipher = result.ciphers[0];
+    expectCreditCard(cipher);
+  });
 
-    it('should parse csv\'s with multiple record types', async () => {
-        const result = await importer.parse(multiTypeData);
+  it("should parse csv's with multiple record types", async () => {
+    const result = await importer.parse(multiTypeData);
 
-        expect(result).not.toBeNull();
-        expect(result.success).toBe(true);
-        expect(result.ciphers.length).toBe(4);
+    expect(result).not.toBeNull();
+    expect(result.success).toBe(true);
+    expect(result.ciphers.length).toBe(4);
 
-        expectIdentity(result.ciphers[1]);
-        expectCreditCard(result.ciphers[2]);
-    });
+    expectIdentity(result.ciphers[1]);
+    expectCreditCard(result.ciphers[2]);
+  });
 });
diff --git a/jslib/spec/common/importers/testData/keeperJson/testData.ts b/jslib/spec/common/importers/testData/keeperJson/testData.ts
new file mode 100644
index 00000000..fee8f54c
--- /dev/null
+++ b/jslib/spec/common/importers/testData/keeperJson/testData.ts
@@ -0,0 +1,90 @@
+import { KeeperJsonExport } from "jslib-common/importers/keeperImporters/types/keeperJsonTypes";
+
+export const testData: KeeperJsonExport = {
+  shared_folders: [
+    {
+      path: "My Customer 1",
+      manage_users: true,
+      manage_records: true,
+      can_edit: true,
+      can_share: true,
+      permissions: [
+        {
+          uid: "kVM96KGEoGxhskZoSTd_jw",
+          manage_users: true,
+          manage_records: true,
+        },
+        {
+          name: "user@mycompany.com",
+          manage_users: true,
+          manage_records: true,
+        },
+      ],
+    },
+    {
+      path: "Testing\\My Customer 2",
+      manage_users: true,
+      manage_records: true,
+      can_edit: true,
+      can_share: true,
+      permissions: [
+        {
+          uid: "ih1CggiQ-3ENXcn4G0sl-g",
+          manage_users: true,
+          manage_records: true,
+        },
+        {
+          name: "user@mycompany.com",
+          manage_users: true,
+          manage_records: true,
+        },
+      ],
+    },
+  ],
+  records: [
+    {
+      title: "Bank Account 1",
+      login: "customer1234",
+      password: "4813fJDHF4239fdk",
+      login_url: "https://chase.com",
+      notes: "These are some notes.",
+      custom_fields: {
+        "Account Number": "123-456-789",
+      },
+      folders: [
+        {
+          folder: "Optional Private Folder 1",
+        },
+      ],
+    },
+    {
+      title: "Bank Account 2",
+      login: "mybankusername",
+      password: "w4k4k193f$^&@#*%2",
+      login_url: "https://amex.com",
+      notes: "Some great information here.",
+      custom_fields: {
+        "Security Group": "Public",
+        "IP Address": "12.45.67.8",
+        "TFC:Keeper":
+          "otpauth://totp/Amazon:me@company.com?secret=JBSWY3DPEHPK3PXP&issuer=Amazon&algorithm=SHA1&digits=6&period=30",
+      },
+      folders: [
+        {
+          folder: "Optional Private Folder 1",
+        },
+        {
+          shared_folder: "My Customer 1",
+          can_edit: true,
+          can_share: true,
+        },
+      ],
+    },
+    {
+      title: "Some Account",
+      login: "someUserName",
+      password: "w4k4k1wergf$^&@#*%2",
+      login_url: "https://example.com",
+    },
+  ],
+};
diff --git a/jslib/spec/common/importers/testData/nordpassCsv/nordpass.secureNote.csv.ts b/jslib/spec/common/importers/testData/nordpassCsv/nordpass.secureNote.csv.ts
index 7d8c2307..0e4dcb2e 100644
--- a/jslib/spec/common/importers/testData/nordpassCsv/nordpass.secureNote.csv.ts
+++ b/jslib/spec/common/importers/testData/nordpassCsv/nordpass.secureNote.csv.ts
@@ -1,3 +1,3 @@
 export const data = `name,url,username,password,note,cardholdername,cardnumber,cvc,expirydate,zipcode,folder,full_name,phone_number,email,address1,address2,city,country,state
 notesFolder,,,,,,,,,,,,,,,,,,
-MySuperSecureNoteTitle,,,,MySuperSecureNote,,,,,,notesFolder,,,,,,,,`;
\ No newline at end of file
+MySuperSecureNoteTitle,,,,MySuperSecureNote,,,,,,notesFolder,,,,,,,,`;
diff --git a/jslib/spec/common/importers/testData/onePasswordCsv/creditCard.windows.csv.ts b/jslib/spec/common/importers/testData/onePasswordCsv/creditCard.windows.csv.ts
index f9dd9808..927cabec 100644
--- a/jslib/spec/common/importers/testData/onePasswordCsv/creditCard.windows.csv.ts
+++ b/jslib/spec/common/importers/testData/onePasswordCsv/creditCard.windows.csv.ts
@@ -1,2 +1,2 @@
-export const data = `"UUID","TITLE","SCOPE","AUTOSUBMIT","1: CARDHOLDER NAME","2: NUMBER","3: VERIFICATION NUMBER","4: EXPIRY DATE","SECTION 2: SECTION_PZET7LEKRQXZUINIEGH5ABA2UY","SECTION_PZET7LEKRQXZUINIEGH5ABA2UY 1: LABEL"
-"sd26pt226etnsijbl3kqzi5bmm","test card","Default","Default","test","4111111111111111","111","1/3/1970 12:23 AM","section","field (phone)"`;
+export const data = `"UUID","TITLE","SCOPE","AUTOSUBMIT","1: CARDHOLDER NAME","2: NUMBER","3: VERIFICATION NUMBER","4: EXPIRY DATE","SECTION 2: SECTION_PZET7LEKRQXZUINIEGH5ABA2UY","SECTION_PZET7LEKRQXZUINIEGH5ABA2UY 1: LABEL"
+"sd26pt226etnsijbl3kqzi5bmm","test card","Default","Default","test","4111111111111111","111","1/3/1970 12:23 AM","section","field (phone)"`;
diff --git a/jslib/spec/common/importers/testData/onePasswordCsv/identity.windows.csv.ts b/jslib/spec/common/importers/testData/onePasswordCsv/identity.windows.csv.ts
index 3e198e17..d936b42b 100644
--- a/jslib/spec/common/importers/testData/onePasswordCsv/identity.windows.csv.ts
+++ b/jslib/spec/common/importers/testData/onePasswordCsv/identity.windows.csv.ts
@@ -1,2 +1,2 @@
-export const data = `"UUID","TITLE","SCOPE","AUTOSUBMIT","TAGS","NOTES","SECTION 1: NAME","NAME 1: FIRST NAME","NAME 2: INITIAL","NAME 3: LAST NAME","NAME 4: BIRTH DATE","NAME 5: OCCUPATION","NAME 6: COMPANY","NAME 7: DEPARTMENT","NAME 8: JOB TITLE","SECTION 2: ADDRESS","ADDRESS 1: ADDRESS","ADDRESS 2: DEFAULT PHONE","SECTION 3: INTERNET","INTERNET 1: USERNAME","INTERNET 2: EMAIL","SECTION 4: MFJQKMWEOYDZDFH4YMR7WLJKIY","MFJQKMWEOYDZDFH4YMR7WLJKIY 1: SECTION FIELD","MFJQKMWEOYDZDFH4YMR7WLJKIY 2: SECTION FIELD"
-"6v56y5z4tejwg37jsettta7d7m","Identity Item","Default","Default","Starter Kit","It’s you! 🖐 Select Edit to fill in more details, like your address and contact information.","Identification","first name","mi","last name","12/2/2020 4:01 AM","occupation","bitwarden","department","job title","Address","address city state zip us","8005555555","Internet Details","userNam3","email@bitwarden.com","💡 Did you know?","1Password can fill names and addresses into webpages:","https://support.1password.com/credit-card-address-filling/"`;
+export const data = `"UUID","TITLE","SCOPE","AUTOSUBMIT","TAGS","NOTES","SECTION 1: NAME","NAME 1: FIRST NAME","NAME 2: INITIAL","NAME 3: LAST NAME","NAME 4: BIRTH DATE","NAME 5: OCCUPATION","NAME 6: COMPANY","NAME 7: DEPARTMENT","NAME 8: JOB TITLE","SECTION 2: ADDRESS","ADDRESS 1: ADDRESS","ADDRESS 2: DEFAULT PHONE","SECTION 3: INTERNET","INTERNET 1: USERNAME","INTERNET 2: EMAIL","SECTION 4: MFJQKMWEOYDZDFH4YMR7WLJKIY","MFJQKMWEOYDZDFH4YMR7WLJKIY 1: SECTION FIELD","MFJQKMWEOYDZDFH4YMR7WLJKIY 2: SECTION FIELD"
+"6v56y5z4tejwg37jsettta7d7m","Identity Item","Default","Default","Starter Kit","It’s you! 🖐 Select Edit to fill in more details, like your address and contact information.","Identification","first name","mi","last name","12/2/2020 4:01 AM","occupation","bitwarden","department","job title","Address","address city state zip us","8005555555","Internet Details","userNam3","email@bitwarden.com","💡 Did you know?","1Password can fill names and addresses into webpages:","https://support.1password.com/credit-card-address-filling/"`;
diff --git a/jslib/spec/common/importers/testData/onePasswordCsv/multipleItems.windows.csv.ts b/jslib/spec/common/importers/testData/onePasswordCsv/multipleItems.windows.csv.ts
index 918b7a52..08733e7c 100644
--- a/jslib/spec/common/importers/testData/onePasswordCsv/multipleItems.windows.csv.ts
+++ b/jslib/spec/common/importers/testData/onePasswordCsv/multipleItems.windows.csv.ts
@@ -1,5 +1,5 @@
-export const data = `"UUID","TITLE","USERNAME","PASSWORD","URL","URLS","EMAIL","MASTER-PASSWORD","ACCOUNT-KEY","SCOPE","AUTOSUBMIT","TAGS","NOTES","SECTION 1: WXHDKEQREE3TH6QRFCPFPSD3AE","WXHDKEQREE3TH6QRFCPFPSD3AE 1: SECRET KEY","SECTION 1: NAME","NAME 1: FIRST NAME","NAME 2: INITIAL","NAME 3: LAST NAME","NAME 4: BIRTH DATE","NAME 5: OCCUPATION","NAME 6: COMPANY","NAME 7: DEPARTMENT","NAME 8: JOB TITLE","SECTION 2: ADDRESS","ADDRESS 1: ADDRESS","ADDRESS 2: DEFAULT PHONE","SECTION 3: INTERNET","INTERNET 1: USERNAME","INTERNET 2: EMAIL","SECTION 4: MFJQKMWEOYDZDFH4YMR7WLJKIY","MFJQKMWEOYDZDFH4YMR7WLJKIY 1: SECTION FIELD","MFJQKMWEOYDZDFH4YMR7WLJKIY 2: SECTION FIELD","1: CARDHOLDER NAME","2: NUMBER","3: VERIFICATION NUMBER","4: EXPIRY DATE","SECTION 2: SECTION_PZET7LEKRQXZUINIEGH5ABA2UY","SECTION_PZET7LEKRQXZUINIEGH5ABA2UY 1: LABEL","SECTION 1: 4PQVXPR4BMOPGC3DBMTP5U4OFY","4PQVXPR4BMOPGC3DBMTP5U4OFY 1: SECTION FIELD","4PQVXPR4BMOPGC3DBMTP5U4OFY 2: SECTION FIELD","SECTION 2: M2NTUZZBFOFTPAYXVXE6EMZ5JU","M2NTUZZBFOFTPAYXVXE6EMZ5JU 1: SECTION FIELD","M2NTUZZBFOFTPAYXVXE6EMZ5JU 2: SECTION FIELD","SECTION 3: WC3KPAWH6ZAEQB2ARJB6WYZ3DQ","WC3KPAWH6ZAEQB2ARJB6WYZ3DQ 1: SECTION FIELD","WC3KPAWH6ZAEQB2ARJB6WYZ3DQ 2: SECTION FIELD","WC3KPAWH6ZAEQB2ARJB6WYZ3DQ 3: SECTION FIELD","SECTION 4: TOHUYJEJEMGMI6GEQAZ2LJODFE","TOHUYJEJEMGMI6GEQAZ2LJODFE 1: SECTION FIELD","TOHUYJEJEMGMI6GEQAZ2LJODFE 2: SECTION FIELD","SECTION 5: O26UWJJTXRAANG3ONYYOUUJHDM","O26UWJJTXRAANG3ONYYOUUJHDM 1: SECTION FIELD","O26UWJJTXRAANG3ONYYOUUJHDM 2: WATCH VIDEOS","O26UWJJTXRAANG3ONYYOUUJHDM 3: GET SUPPORT","O26UWJJTXRAANG3ONYYOUUJHDM 4: READ THE BLOG","O26UWJJTXRAANG3ONYYOUUJHDM 5: CONTACT US"
-"xjq32axcswefpcxu2mtxxqnufa","1Password Account","email@bitwarden.com","the account's password","https://my.1password.com","https://my.1password.com","email@bitwarden.com","the account's password","A3-76TR2N-NJG3TZ-9NXFX-WT8GF-6YQC9-R2659","Default","Default","Starter Kit","You can use this login to sign in to your account on 1password.com.","🔑 Secret Key","the account's secret key","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""
-"6v56y5z4tejwg37jsettta7d7m","Identity Item","","","","","","","","Default","Default","Starter Kit","It’s you! 🖐 Select Edit to fill in more details, like your address and contact information.","","","Identification","first name","mi","last name","12/2/2020 4:01 AM","occupation","bitwarden","department","job title","Address","address city state zip us","8005555555","Internet Details","userNam3","email@bitwarden.com","💡 Did you know?","1Password can fill names and addresses into webpages:","https://support.1password.com/credit-card-address-filling/","","","","","","","","","","","","","","","","","","","","","","","","",""
-"sd26pt226etnsijbl3kqzi5bmm","test card","","","","","","","","Default","Default","","","","","","","","","","","","","","","","","","","","","","","test","4111111111111111","111","1/3/1970 12:23 AM","section","field (phone)","","","","","","","","","","","","","","","","","","",""
-"oml2sgit3yk7737kxdis65o4xq","🎉 Welcome to 1Password!","","","","","","","","Default","Default","Starter Kit","Follow these steps to get started.","","","","","","","","","","","","","","","","","","","","","","","","","","","1️⃣ Get the apps","https://1password.com/downloads","Install 1Password everywhere you need your passwords.","2️⃣ Get 1Password in your browser","https://1password.com/downloads/#browsers","Install 1Password in your browser to save and fill passwords.","3️⃣ Save your first password","1. Sign in to your favorite website.","2. 1Password will ask to save your username and password.","3. Click Save Login.","4️⃣ Fill passwords and more","https://support.1password.com/explore/extension/","Save and fill passwords, credit cards, and addresses.","📚 Learn 1Password","Check out our videos and articles:","https://youtube.com/1PasswordVideos","https://support.1password.com/","https://blog.1password.com/","https://support.1password.com/contact-us/"`;
+export const data = `"UUID","TITLE","USERNAME","PASSWORD","URL","URLS","EMAIL","MASTER-PASSWORD","ACCOUNT-KEY","SCOPE","AUTOSUBMIT","TAGS","NOTES","SECTION 1: WXHDKEQREE3TH6QRFCPFPSD3AE","WXHDKEQREE3TH6QRFCPFPSD3AE 1: SECRET KEY","SECTION 1: NAME","NAME 1: FIRST NAME","NAME 2: INITIAL","NAME 3: LAST NAME","NAME 4: BIRTH DATE","NAME 5: OCCUPATION","NAME 6: COMPANY","NAME 7: DEPARTMENT","NAME 8: JOB TITLE","SECTION 2: ADDRESS","ADDRESS 1: ADDRESS","ADDRESS 2: DEFAULT PHONE","SECTION 3: INTERNET","INTERNET 1: USERNAME","INTERNET 2: EMAIL","SECTION 4: MFJQKMWEOYDZDFH4YMR7WLJKIY","MFJQKMWEOYDZDFH4YMR7WLJKIY 1: SECTION FIELD","MFJQKMWEOYDZDFH4YMR7WLJKIY 2: SECTION FIELD","1: CARDHOLDER NAME","2: NUMBER","3: VERIFICATION NUMBER","4: EXPIRY DATE","SECTION 2: SECTION_PZET7LEKRQXZUINIEGH5ABA2UY","SECTION_PZET7LEKRQXZUINIEGH5ABA2UY 1: LABEL","SECTION 1: 4PQVXPR4BMOPGC3DBMTP5U4OFY","4PQVXPR4BMOPGC3DBMTP5U4OFY 1: SECTION FIELD","4PQVXPR4BMOPGC3DBMTP5U4OFY 2: SECTION FIELD","SECTION 2: M2NTUZZBFOFTPAYXVXE6EMZ5JU","M2NTUZZBFOFTPAYXVXE6EMZ5JU 1: SECTION FIELD","M2NTUZZBFOFTPAYXVXE6EMZ5JU 2: SECTION FIELD","SECTION 3: WC3KPAWH6ZAEQB2ARJB6WYZ3DQ","WC3KPAWH6ZAEQB2ARJB6WYZ3DQ 1: SECTION FIELD","WC3KPAWH6ZAEQB2ARJB6WYZ3DQ 2: SECTION FIELD","WC3KPAWH6ZAEQB2ARJB6WYZ3DQ 3: SECTION FIELD","SECTION 4: TOHUYJEJEMGMI6GEQAZ2LJODFE","TOHUYJEJEMGMI6GEQAZ2LJODFE 1: SECTION FIELD","TOHUYJEJEMGMI6GEQAZ2LJODFE 2: SECTION FIELD","SECTION 5: O26UWJJTXRAANG3ONYYOUUJHDM","O26UWJJTXRAANG3ONYYOUUJHDM 1: SECTION FIELD","O26UWJJTXRAANG3ONYYOUUJHDM 2: WATCH VIDEOS","O26UWJJTXRAANG3ONYYOUUJHDM 3: GET SUPPORT","O26UWJJTXRAANG3ONYYOUUJHDM 4: READ THE BLOG","O26UWJJTXRAANG3ONYYOUUJHDM 5: CONTACT US"
+"xjq32axcswefpcxu2mtxxqnufa","1Password Account","email@bitwarden.com","the account's password","https://my.1password.com","https://my.1password.com","email@bitwarden.com","the account's password","A3-76TR2N-NJG3TZ-9NXFX-WT8GF-6YQC9-R2659","Default","Default","Starter Kit","You can use this login to sign in to your account on 1password.com.","🔑 Secret Key","the account's secret key","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""
+"6v56y5z4tejwg37jsettta7d7m","Identity Item","","","","","","","","Default","Default","Starter Kit","It’s you! 🖐 Select Edit to fill in more details, like your address and contact information.","","","Identification","first name","mi","last name","12/2/2020 4:01 AM","occupation","bitwarden","department","job title","Address","address city state zip us","8005555555","Internet Details","userNam3","email@bitwarden.com","💡 Did you know?","1Password can fill names and addresses into webpages:","https://support.1password.com/credit-card-address-filling/","","","","","","","","","","","","","","","","","","","","","","","","",""
+"sd26pt226etnsijbl3kqzi5bmm","test card","","","","","","","","Default","Default","","","","","","","","","","","","","","","","","","","","","","","test","4111111111111111","111","1/3/1970 12:23 AM","section","field (phone)","","","","","","","","","","","","","","","","","","",""
+"oml2sgit3yk7737kxdis65o4xq","🎉 Welcome to 1Password!","","","","","","","","Default","Default","Starter Kit","Follow these steps to get started.","","","","","","","","","","","","","","","","","","","","","","","","","","","1️⃣ Get the apps","https://1password.com/downloads","Install 1Password everywhere you need your passwords.","2️⃣ Get 1Password in your browser","https://1password.com/downloads/#browsers","Install 1Password in your browser to save and fill passwords.","3️⃣ Save your first password","1. Sign in to your favorite website.","2. 1Password will ask to save your username and password.","3. Click Save Login.","4️⃣ Fill passwords and more","https://support.1password.com/explore/extension/","Save and fill passwords, credit cards, and addresses.","📚 Learn 1Password","Check out our videos and articles:","https://youtube.com/1PasswordVideos","https://support.1password.com/","https://blog.1password.com/","https://support.1password.com/contact-us/"`;
diff --git a/jslib/spec/common/importers/testData/safeInCloud/testData.xml.ts b/jslib/spec/common/importers/testData/safeInCloud/testData.xml.ts
index 5f11612d..4c3d7b77 100644
--- a/jslib/spec/common/importers/testData/safeInCloud/testData.xml.ts
+++ b/jslib/spec/common/importers/testData/safeInCloud/testData.xml.ts
@@ -59,4 +59,4 @@ export const data = `
         <label_id>3</label_id>
     </card>
 </database>
-`;
\ No newline at end of file
+`;
diff --git a/jslib/spec/common/misc/sequentialize.spec.ts b/jslib/spec/common/misc/sequentialize.spec.ts
index e347a786..4165eca2 100644
--- a/jslib/spec/common/misc/sequentialize.spec.ts
+++ b/jslib/spec/common/misc/sequentialize.spec.ts
@@ -1,141 +1,127 @@
-import { sequentialize } from 'jslib-common/misc/sequentialize';
-
-describe('sequentialize decorator', () => {
-    it('should call the function once', async () => {
-        const foo = new Foo();
-        const promises = [];
-        for (let i = 0; i < 10; i++) {
-            promises.push(foo.bar(1));
-        }
-        await Promise.all(promises);
-
-        expect(foo.calls).toBe(1);
-    });
-
-    it('should call the function once for each instance of the object', async () => {
-        const foo = new Foo();
-        const foo2 = new Foo();
-        const promises = [];
-        for (let i = 0; i < 10; i++) {
-            promises.push(foo.bar(1));
-            promises.push(foo2.bar(1));
-        }
-        await Promise.all(promises);
-
-        expect(foo.calls).toBe(1);
-        expect(foo2.calls).toBe(1);
-    });
-
-    it('should call the function once with key function', async () => {
-        const foo = new Foo();
-        const promises = [];
-        for (let i = 0; i < 10; i++) {
-            promises.push(foo.baz(1));
-        }
-        await Promise.all(promises);
-
-        expect(foo.calls).toBe(1);
-    });
-
-    it('should call the function again when already resolved', async () => {
-        const foo = new Foo();
-        await foo.bar(1);
-        expect(foo.calls).toBe(1);
-        await foo.bar(1);
-        expect(foo.calls).toBe(2);
-    });
-
-    it('should call the function again when already resolved with a key function', async () => {
-        const foo = new Foo();
-        await foo.baz(1);
-        expect(foo.calls).toBe(1);
-        await foo.baz(1);
-        expect(foo.calls).toBe(2);
-    });
-
-    it('should call the function for each argument', async () => {
-        const foo = new Foo();
-        await Promise.all([
-            foo.bar(1),
-            foo.bar(1),
-            foo.bar(2),
-            foo.bar(2),
-            foo.bar(3),
-            foo.bar(3),
-        ]);
-        expect(foo.calls).toBe(3);
-    });
-
-    it('should call the function for each argument with key function', async () => {
-        const foo = new Foo();
-        await Promise.all([
-            foo.baz(1),
-            foo.baz(1),
-            foo.baz(2),
-            foo.baz(2),
-            foo.baz(3),
-            foo.baz(3),
-        ]);
-        expect(foo.calls).toBe(3);
-    });
+import { sequentialize } from "jslib-common/misc/sequentialize";
+
+describe("sequentialize decorator", () => {
+  it("should call the function once", async () => {
+    const foo = new Foo();
+    const promises = [];
+    for (let i = 0; i < 10; i++) {
+      promises.push(foo.bar(1));
+    }
+    await Promise.all(promises);
+
+    expect(foo.calls).toBe(1);
+  });
+
+  it("should call the function once for each instance of the object", async () => {
+    const foo = new Foo();
+    const foo2 = new Foo();
+    const promises = [];
+    for (let i = 0; i < 10; i++) {
+      promises.push(foo.bar(1));
+      promises.push(foo2.bar(1));
+    }
+    await Promise.all(promises);
 
-    it('should return correct result for each call', async () => {
-        const foo = new Foo();
-        const allRes: number[] = [];
-
-        await Promise.all([
-            foo.bar(1).then(res => allRes.push(res)),
-            foo.bar(1).then(res => allRes.push(res)),
-            foo.bar(2).then(res => allRes.push(res)),
-            foo.bar(2).then(res => allRes.push(res)),
-            foo.bar(3).then(res => allRes.push(res)),
-            foo.bar(3).then(res => allRes.push(res)),
-        ]);
-        expect(foo.calls).toBe(3);
-        expect(allRes.length).toBe(6);
-        allRes.sort();
-        expect(allRes).toEqual([2, 2, 4, 4, 6, 6]);
-    });
+    expect(foo.calls).toBe(1);
+    expect(foo2.calls).toBe(1);
+  });
 
-    it('should return correct result for each call with key function', async () => {
-        const foo = new Foo();
-        const allRes: number[] = [];
-
-        await Promise.all([
-            foo.baz(1).then(res => allRes.push(res)),
-            foo.baz(1).then(res => allRes.push(res)),
-            foo.baz(2).then(res => allRes.push(res)),
-            foo.baz(2).then(res => allRes.push(res)),
-            foo.baz(3).then(res => allRes.push(res)),
-            foo.baz(3).then(res => allRes.push(res)),
-        ]);
-        expect(foo.calls).toBe(3);
-        expect(allRes.length).toBe(6);
-        allRes.sort();
-        expect(allRes).toEqual([3, 3, 6, 6, 9, 9]);
-    });
+  it("should call the function once with key function", async () => {
+    const foo = new Foo();
+    const promises = [];
+    for (let i = 0; i < 10; i++) {
+      promises.push(foo.baz(1));
+    }
+    await Promise.all(promises);
+
+    expect(foo.calls).toBe(1);
+  });
+
+  it("should call the function again when already resolved", async () => {
+    const foo = new Foo();
+    await foo.bar(1);
+    expect(foo.calls).toBe(1);
+    await foo.bar(1);
+    expect(foo.calls).toBe(2);
+  });
+
+  it("should call the function again when already resolved with a key function", async () => {
+    const foo = new Foo();
+    await foo.baz(1);
+    expect(foo.calls).toBe(1);
+    await foo.baz(1);
+    expect(foo.calls).toBe(2);
+  });
+
+  it("should call the function for each argument", async () => {
+    const foo = new Foo();
+    await Promise.all([foo.bar(1), foo.bar(1), foo.bar(2), foo.bar(2), foo.bar(3), foo.bar(3)]);
+    expect(foo.calls).toBe(3);
+  });
+
+  it("should call the function for each argument with key function", async () => {
+    const foo = new Foo();
+    await Promise.all([foo.baz(1), foo.baz(1), foo.baz(2), foo.baz(2), foo.baz(3), foo.baz(3)]);
+    expect(foo.calls).toBe(3);
+  });
+
+  it("should return correct result for each call", async () => {
+    const foo = new Foo();
+    const allRes: number[] = [];
+
+    await Promise.all([
+      foo.bar(1).then((res) => allRes.push(res)),
+      foo.bar(1).then((res) => allRes.push(res)),
+      foo.bar(2).then((res) => allRes.push(res)),
+      foo.bar(2).then((res) => allRes.push(res)),
+      foo.bar(3).then((res) => allRes.push(res)),
+      foo.bar(3).then((res) => allRes.push(res)),
+    ]);
+    expect(foo.calls).toBe(3);
+    expect(allRes.length).toBe(6);
+    allRes.sort();
+    expect(allRes).toEqual([2, 2, 4, 4, 6, 6]);
+  });
+
+  it("should return correct result for each call with key function", async () => {
+    const foo = new Foo();
+    const allRes: number[] = [];
+
+    await Promise.all([
+      foo.baz(1).then((res) => allRes.push(res)),
+      foo.baz(1).then((res) => allRes.push(res)),
+      foo.baz(2).then((res) => allRes.push(res)),
+      foo.baz(2).then((res) => allRes.push(res)),
+      foo.baz(3).then((res) => allRes.push(res)),
+      foo.baz(3).then((res) => allRes.push(res)),
+    ]);
+    expect(foo.calls).toBe(3);
+    expect(allRes.length).toBe(6);
+    allRes.sort();
+    expect(allRes).toEqual([3, 3, 6, 6, 9, 9]);
+  });
 });
 
 class Foo {
-    calls = 0;
-
-    @sequentialize(args => 'bar' + args[0])
-    bar(a: number): Promise<number> {
-        this.calls++;
-        return new Promise(res => {
-            setTimeout(() => {
-                res(a * 2);
-            }, Math.random() * 100);
-        });
-    }
-
-    @sequentialize(args => 'baz' + args[0])
-    baz(a: number): Promise<number> {
-        this.calls++;
-        return new Promise(res => {
-            setTimeout(() => {
-                res(a * 3);
-            }, Math.random() * 100);
-        });
-    }
+  calls = 0;
+
+  @sequentialize((args) => "bar" + args[0])
+  bar(a: number): Promise<number> {
+    this.calls++;
+    return new Promise((res) => {
+      setTimeout(() => {
+        res(a * 2);
+      }, Math.random() * 100);
+    });
+  }
+
+  @sequentialize((args) => "baz" + args[0])
+  baz(a: number): Promise<number> {
+    this.calls++;
+    return new Promise((res) => {
+      setTimeout(() => {
+        res(a * 3);
+      }, Math.random() * 100);
+    });
+  }
 }
diff --git a/jslib/spec/common/misc/throttle.spec.ts b/jslib/spec/common/misc/throttle.spec.ts
index c61e2aef..5a8cd27e 100644
--- a/jslib/spec/common/misc/throttle.spec.ts
+++ b/jslib/spec/common/misc/throttle.spec.ts
@@ -1,110 +1,110 @@
-import { sequentialize } from 'jslib-common/misc/sequentialize';
-import { throttle } from 'jslib-common/misc/throttle';
+import { sequentialize } from "jslib-common/misc/sequentialize";
+import { throttle } from "jslib-common/misc/throttle";
 
-describe('throttle decorator', () => {
-    it('should call the function once at a time', async () => {
-        const foo = new Foo();
-        const promises = [];
-        for (let i = 0; i < 10; i++) {
-            promises.push(foo.bar(1));
-        }
-        await Promise.all(promises);
+describe("throttle decorator", () => {
+  it("should call the function once at a time", async () => {
+    const foo = new Foo();
+    const promises = [];
+    for (let i = 0; i < 10; i++) {
+      promises.push(foo.bar(1));
+    }
+    await Promise.all(promises);
 
-        expect(foo.calls).toBe(10);
-    });
+    expect(foo.calls).toBe(10);
+  });
 
-    it('should call the function once at a time for each object', async () => {
-        const foo = new Foo();
-        const foo2 = new Foo();
-        const promises = [];
-        for (let i = 0; i < 10; i++) {
-            promises.push(foo.bar(1));
-            promises.push(foo2.bar(1));
-        }
-        await Promise.all(promises);
+  it("should call the function once at a time for each object", async () => {
+    const foo = new Foo();
+    const foo2 = new Foo();
+    const promises = [];
+    for (let i = 0; i < 10; i++) {
+      promises.push(foo.bar(1));
+      promises.push(foo2.bar(1));
+    }
+    await Promise.all(promises);
 
-        expect(foo.calls).toBe(10);
-        expect(foo2.calls).toBe(10);
-    });
+    expect(foo.calls).toBe(10);
+    expect(foo2.calls).toBe(10);
+  });
 
-    it('should call the function limit at a time', async () => {
-        const foo = new Foo();
-        const promises = [];
-        for (let i = 0; i < 10; i++) {
-            promises.push(foo.baz(1));
-        }
-        await Promise.all(promises);
+  it("should call the function limit at a time", async () => {
+    const foo = new Foo();
+    const promises = [];
+    for (let i = 0; i < 10; i++) {
+      promises.push(foo.baz(1));
+    }
+    await Promise.all(promises);
 
-        expect(foo.calls).toBe(10);
-    });
+    expect(foo.calls).toBe(10);
+  });
 
-    it('should call the function limit at a time for each object', async () => {
-        const foo = new Foo();
-        const foo2 = new Foo();
-        const promises = [];
-        for (let i = 0; i < 10; i++) {
-            promises.push(foo.baz(1));
-            promises.push(foo2.baz(1));
-        }
-        await Promise.all(promises);
+  it("should call the function limit at a time for each object", async () => {
+    const foo = new Foo();
+    const foo2 = new Foo();
+    const promises = [];
+    for (let i = 0; i < 10; i++) {
+      promises.push(foo.baz(1));
+      promises.push(foo2.baz(1));
+    }
+    await Promise.all(promises);
 
-        expect(foo.calls).toBe(10);
-        expect(foo2.calls).toBe(10);
-    });
+    expect(foo.calls).toBe(10);
+    expect(foo2.calls).toBe(10);
+  });
 
-    it('should work together with sequentialize', async () => {
-        const foo = new Foo();
-        const promises = [];
-        for (let i = 0; i < 10; i++) {
-            promises.push(foo.qux(Math.floor(i / 2) * 2));
-        }
-        await Promise.all(promises);
+  it("should work together with sequentialize", async () => {
+    const foo = new Foo();
+    const promises = [];
+    for (let i = 0; i < 10; i++) {
+      promises.push(foo.qux(Math.floor(i / 2) * 2));
+    }
+    await Promise.all(promises);
 
-        expect(foo.calls).toBe(5);
-    });
+    expect(foo.calls).toBe(5);
+  });
 });
 
 class Foo {
-    calls = 0;
-    inflight = 0;
+  calls = 0;
+  inflight = 0;
 
-    @throttle(1, () => 'bar')
-    bar(a: number) {
-        this.calls++;
-        this.inflight++;
-        return new Promise(res => {
-            setTimeout(() => {
-                expect(this.inflight).toBe(1);
-                this.inflight--;
-                res(a * 2);
-            }, Math.random() * 10);
-        });
-    }
+  @throttle(1, () => "bar")
+  bar(a: number) {
+    this.calls++;
+    this.inflight++;
+    return new Promise((res) => {
+      setTimeout(() => {
+        expect(this.inflight).toBe(1);
+        this.inflight--;
+        res(a * 2);
+      }, Math.random() * 10);
+    });
+  }
 
-    @throttle(5, () => 'baz')
-    baz(a: number) {
-        this.calls++;
-        this.inflight++;
-        return new Promise(res => {
-            setTimeout(() => {
-                expect(this.inflight).toBeLessThanOrEqual(5);
-                this.inflight--;
-                res(a * 3);
-            }, Math.random() * 10);
-        });
-    }
+  @throttle(5, () => "baz")
+  baz(a: number) {
+    this.calls++;
+    this.inflight++;
+    return new Promise((res) => {
+      setTimeout(() => {
+        expect(this.inflight).toBeLessThanOrEqual(5);
+        this.inflight--;
+        res(a * 3);
+      }, Math.random() * 10);
+    });
+  }
 
-    @sequentialize(args => 'qux' + args[0])
-    @throttle(1, () => 'qux')
-    qux(a: number) {
-        this.calls++;
-        this.inflight++;
-        return new Promise(res => {
-            setTimeout(() => {
-                expect(this.inflight).toBe(1);
-                this.inflight--;
-                res(a * 3);
-            }, Math.random() * 10);
-        });
-    }
+  @sequentialize((args) => "qux" + args[0])
+  @throttle(1, () => "qux")
+  qux(a: number) {
+    this.calls++;
+    this.inflight++;
+    return new Promise((res) => {
+      setTimeout(() => {
+        expect(this.inflight).toBe(1);
+        this.inflight--;
+        res(a * 3);
+      }, Math.random() * 10);
+    });
+  }
 }
diff --git a/jslib/spec/common/misc/utils.spec.ts b/jslib/spec/common/misc/utils.spec.ts
index 97c3d1e5..eec41e4b 100644
--- a/jslib/spec/common/misc/utils.spec.ts
+++ b/jslib/spec/common/misc/utils.spec.ts
@@ -1,71 +1,73 @@
-import { Utils } from 'jslib-common/misc/utils';
+import { Utils } from "jslib-common/misc/utils";
 
-describe('Utils Service', () => {
-    describe('getDomain', () => {
-        it('should fail for invalid urls', () => {
-            expect(Utils.getDomain(null)).toBeNull();
-            expect(Utils.getDomain(undefined)).toBeNull();
-            expect(Utils.getDomain(' ')).toBeNull();
-            expect(Utils.getDomain('https://bit!:"_&ward.com')).toBeNull();
-            expect(Utils.getDomain('bitwarden')).toBeNull();
-        });
+describe("Utils Service", () => {
+  describe("getDomain", () => {
+    it("should fail for invalid urls", () => {
+      expect(Utils.getDomain(null)).toBeNull();
+      expect(Utils.getDomain(undefined)).toBeNull();
+      expect(Utils.getDomain(" ")).toBeNull();
+      expect(Utils.getDomain('https://bit!:"_&ward.com')).toBeNull();
+      expect(Utils.getDomain("bitwarden")).toBeNull();
+    });
 
-        it('should fail for data urls', () => {
-            expect(Utils.getDomain('data:image/jpeg;base64,AAA')).toBeNull();
-        });
+    it("should fail for data urls", () => {
+      expect(Utils.getDomain("data:image/jpeg;base64,AAA")).toBeNull();
+    });
 
-        it('should handle urls without protocol', () => {
-            expect(Utils.getDomain('bitwarden.com')).toBe('bitwarden.com');
-            expect(Utils.getDomain('wrong://bitwarden.com')).toBe('bitwarden.com');
-        });
+    it("should handle urls without protocol", () => {
+      expect(Utils.getDomain("bitwarden.com")).toBe("bitwarden.com");
+      expect(Utils.getDomain("wrong://bitwarden.com")).toBe("bitwarden.com");
+    });
 
-        it('should handle valid urls', () => {
-            expect(Utils.getDomain('https://bitwarden')).toBe('bitwarden');
-            expect(Utils.getDomain('https://bitwarden.com')).toBe('bitwarden.com');
-            expect(Utils.getDomain('http://bitwarden.com')).toBe('bitwarden.com');
-            expect(Utils.getDomain('http://vault.bitwarden.com')).toBe('bitwarden.com');
-            expect(Utils.getDomain('https://user:password@bitwarden.com:8080/password/sites?and&query#hash'))
-                .toBe('bitwarden.com');
-            expect(Utils.getDomain('https://bitwarden.unknown')).toBe('bitwarden.unknown');
-        });
+    it("should handle valid urls", () => {
+      expect(Utils.getDomain("https://bitwarden")).toBe("bitwarden");
+      expect(Utils.getDomain("https://bitwarden.com")).toBe("bitwarden.com");
+      expect(Utils.getDomain("http://bitwarden.com")).toBe("bitwarden.com");
+      expect(Utils.getDomain("http://vault.bitwarden.com")).toBe("bitwarden.com");
+      expect(
+        Utils.getDomain("https://user:password@bitwarden.com:8080/password/sites?and&query#hash")
+      ).toBe("bitwarden.com");
+      expect(Utils.getDomain("https://bitwarden.unknown")).toBe("bitwarden.unknown");
+    });
 
-        it('should support localhost and IP', () => {
-            expect(Utils.getDomain('https://localhost')).toBe('localhost');
-            expect(Utils.getDomain('https://192.168.1.1')).toBe('192.168.1.1');
-        });
+    it("should support localhost and IP", () => {
+      expect(Utils.getDomain("https://localhost")).toBe("localhost");
+      expect(Utils.getDomain("https://192.168.1.1")).toBe("192.168.1.1");
+    });
 
-        it('should reject invalid hostnames', () => {
-            expect(Utils.getDomain('https://mywebsite.com$.mywebsite.com')).toBeNull();
-            expect(Utils.getDomain('https://mywebsite.com!.mywebsite.com')).toBeNull();
-        });
+    it("should reject invalid hostnames", () => {
+      expect(Utils.getDomain("https://mywebsite.com$.mywebsite.com")).toBeNull();
+      expect(Utils.getDomain("https://mywebsite.com!.mywebsite.com")).toBeNull();
     });
+  });
 
-    describe('getHostname', () => {
-        it('should fail for invalid urls', () => {
-            expect(Utils.getHostname(null)).toBeNull();
-            expect(Utils.getHostname(undefined)).toBeNull();
-            expect(Utils.getHostname(' ')).toBeNull();
-            expect(Utils.getHostname('https://bit!:"_&ward.com')).toBeNull();
-            expect(Utils.getHostname('bitwarden')).toBeNull();
-        });
+  describe("getHostname", () => {
+    it("should fail for invalid urls", () => {
+      expect(Utils.getHostname(null)).toBeNull();
+      expect(Utils.getHostname(undefined)).toBeNull();
+      expect(Utils.getHostname(" ")).toBeNull();
+      expect(Utils.getHostname('https://bit!:"_&ward.com')).toBeNull();
+      expect(Utils.getHostname("bitwarden")).toBeNull();
+    });
 
-        it('should handle valid urls', () => {
-            expect(Utils.getHostname('bitwarden.com')).toBe('bitwarden.com');
-            expect(Utils.getHostname('https://bitwarden.com')).toBe('bitwarden.com');
-            expect(Utils.getHostname('http://bitwarden.com')).toBe('bitwarden.com');
-            expect(Utils.getHostname('http://vault.bitwarden.com')).toBe('vault.bitwarden.com');
-        });
+    it("should handle valid urls", () => {
+      expect(Utils.getHostname("bitwarden.com")).toBe("bitwarden.com");
+      expect(Utils.getHostname("https://bitwarden.com")).toBe("bitwarden.com");
+      expect(Utils.getHostname("http://bitwarden.com")).toBe("bitwarden.com");
+      expect(Utils.getHostname("http://vault.bitwarden.com")).toBe("vault.bitwarden.com");
+    });
 
-        it('should support localhost and IP', () => {
-            expect(Utils.getHostname('https://localhost')).toBe('localhost');
-            expect(Utils.getHostname('https://192.168.1.1')).toBe('192.168.1.1');
-        });
+    it("should support localhost and IP", () => {
+      expect(Utils.getHostname("https://localhost")).toBe("localhost");
+      expect(Utils.getHostname("https://192.168.1.1")).toBe("192.168.1.1");
     });
+  });
 
-    describe('newGuid', () => {
-        it('should create a valid guid', () => {
-            const validGuid = /^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;
-            expect(Utils.newGuid()).toMatch(validGuid);
-        });
+  describe("newGuid", () => {
+    it("should create a valid guid", () => {
+      const validGuid =
+        /^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;
+      expect(Utils.newGuid()).toMatch(validGuid);
     });
+  });
 });
diff --git a/jslib/spec/common/services/cipher.service.spec.ts b/jslib/spec/common/services/cipher.service.spec.ts
index 83dce24c..e1bf461c 100644
--- a/jslib/spec/common/services/cipher.service.spec.ts
+++ b/jslib/spec/common/services/cipher.service.spec.ts
@@ -1,64 +1,71 @@
-import { Arg, Substitute, SubstituteOf } from '@fluffy-spoon/substitute';
+import { Arg, Substitute, SubstituteOf } from "@fluffy-spoon/substitute";
 
-import { ApiService } from 'jslib-common/abstractions/api.service';
-import { CryptoService } from 'jslib-common/abstractions/crypto.service';
-import { FileUploadService } from 'jslib-common/abstractions/fileUpload.service';
-import { I18nService } from 'jslib-common/abstractions/i18n.service';
-import { LogService } from 'jslib-common/abstractions/log.service';
-import { SearchService } from 'jslib-common/abstractions/search.service';
-import { SettingsService } from 'jslib-common/abstractions/settings.service';
-import { StorageService } from 'jslib-common/abstractions/storage.service';
-import { UserService } from 'jslib-common/abstractions/user.service';
-import { Utils } from 'jslib-common/misc/utils';
-import { Cipher } from 'jslib-common/models/domain/cipher';
-import { EncArrayBuffer } from 'jslib-common/models/domain/encArrayBuffer';
-import { EncString } from 'jslib-common/models/domain/encString';
-import { SymmetricCryptoKey } from 'jslib-common/models/domain/symmetricCryptoKey';
+import { ApiService } from "jslib-common/abstractions/api.service";
+import { CryptoService } from "jslib-common/abstractions/crypto.service";
+import { FileUploadService } from "jslib-common/abstractions/fileUpload.service";
+import { I18nService } from "jslib-common/abstractions/i18n.service";
+import { LogService } from "jslib-common/abstractions/log.service";
+import { SearchService } from "jslib-common/abstractions/search.service";
+import { SettingsService } from "jslib-common/abstractions/settings.service";
+import { StateService } from "jslib-common/abstractions/state.service";
 
-import { CipherService } from 'jslib-common/services/cipher.service';
+import { Utils } from "jslib-common/misc/utils";
+import { Cipher } from "jslib-common/models/domain/cipher";
+import { EncArrayBuffer } from "jslib-common/models/domain/encArrayBuffer";
+import { EncString } from "jslib-common/models/domain/encString";
+import { SymmetricCryptoKey } from "jslib-common/models/domain/symmetricCryptoKey";
 
-const ENCRYPTED_TEXT = 'This data has been encrypted';
+import { CipherService } from "jslib-common/services/cipher.service";
+
+const ENCRYPTED_TEXT = "This data has been encrypted";
 const ENCRYPTED_BYTES = new EncArrayBuffer(Utils.fromUtf8ToArray(ENCRYPTED_TEXT).buffer);
 
-describe('Cipher Service', () => {
-    let cryptoService: SubstituteOf<CryptoService>;
-    let userService: SubstituteOf<UserService>;
-    let settingsService: SubstituteOf<SettingsService>;
-    let apiService: SubstituteOf<ApiService>;
-    let fileUploadService: SubstituteOf<FileUploadService>;
-    let storageService: SubstituteOf<StorageService>;
-    let i18nService: SubstituteOf<I18nService>;
-    let searchService: SubstituteOf<SearchService>;
-    let logService: SubstituteOf<LogService>;
+describe("Cipher Service", () => {
+  let cryptoService: SubstituteOf<CryptoService>;
+  let stateService: SubstituteOf<StateService>;
+  let settingsService: SubstituteOf<SettingsService>;
+  let apiService: SubstituteOf<ApiService>;
+  let fileUploadService: SubstituteOf<FileUploadService>;
+  let i18nService: SubstituteOf<I18nService>;
+  let searchService: SubstituteOf<SearchService>;
+  let logService: SubstituteOf<LogService>;
 
-    let cipherService: CipherService;
+  let cipherService: CipherService;
 
-    beforeEach(() => {
-        cryptoService = Substitute.for<CryptoService>();
-        userService = Substitute.for<UserService>();
-        settingsService = Substitute.for<SettingsService>();
-        apiService = Substitute.for<ApiService>();
-        fileUploadService = Substitute.for<FileUploadService>();
-        storageService = Substitute.for<StorageService>();
-        i18nService = Substitute.for<I18nService>();
-        searchService = Substitute.for<SearchService>();
-        logService = Substitute.for<LogService>();
+  beforeEach(() => {
+    cryptoService = Substitute.for<CryptoService>();
+    stateService = Substitute.for<StateService>();
+    settingsService = Substitute.for<SettingsService>();
+    apiService = Substitute.for<ApiService>();
+    fileUploadService = Substitute.for<FileUploadService>();
+    i18nService = Substitute.for<I18nService>();
+    searchService = Substitute.for<SearchService>();
+    logService = Substitute.for<LogService>();
 
-        cryptoService.encryptToBytes(Arg.any(), Arg.any()).resolves(ENCRYPTED_BYTES);
-        cryptoService.encrypt(Arg.any(), Arg.any()).resolves(new EncString(ENCRYPTED_TEXT));
+    cryptoService.encryptToBytes(Arg.any(), Arg.any()).resolves(ENCRYPTED_BYTES);
+    cryptoService.encrypt(Arg.any(), Arg.any()).resolves(new EncString(ENCRYPTED_TEXT));
 
-        cipherService = new CipherService(cryptoService, userService, settingsService, apiService, fileUploadService,
-            storageService, i18nService, () => searchService, logService);
-    });
+    cipherService = new CipherService(
+      cryptoService,
+      settingsService,
+      apiService,
+      fileUploadService,
+      i18nService,
+      () => searchService,
+      logService,
+      stateService
+    );
+  });
 
-    it('attachments upload encrypted file contents', async () => {
-        const key = new SymmetricCryptoKey(new Uint8Array(32).buffer);
-        const fileName = 'filename';
-        const fileData = new Uint8Array(10).buffer;
-        cryptoService.getOrgKey(Arg.any()).resolves(new SymmetricCryptoKey(new Uint8Array(32).buffer));
+  it("attachments upload encrypted file contents", async () => {
+    const fileName = "filename";
+    const fileData = new Uint8Array(10).buffer;
+    cryptoService.getOrgKey(Arg.any()).resolves(new SymmetricCryptoKey(new Uint8Array(32).buffer));
 
-        await cipherService.saveAttachmentRawWithServer(new Cipher(), fileName, fileData);
+    await cipherService.saveAttachmentRawWithServer(new Cipher(), fileName, fileData);
 
-        fileUploadService.received(1).uploadCipherAttachment(Arg.any(), Arg.any(), new EncString(ENCRYPTED_TEXT), ENCRYPTED_BYTES);
-    });
+    fileUploadService
+      .received(1)
+      .uploadCipherAttachment(Arg.any(), Arg.any(), new EncString(ENCRYPTED_TEXT), ENCRYPTED_BYTES);
+  });
 });
diff --git a/jslib/spec/common/services/consoleLog.service.spec.ts b/jslib/spec/common/services/consoleLog.service.spec.ts
index 5f0a1412..a7f7eddb 100644
--- a/jslib/spec/common/services/consoleLog.service.spec.ts
+++ b/jslib/spec/common/services/consoleLog.service.spec.ts
@@ -1,4 +1,4 @@
-import { ConsoleLogService } from 'jslib-common/services/consoleLog.service';
+import { ConsoleLogService } from "jslib-common/services/consoleLog.service";
 
 const originalConsole = console;
 let caughtMessage: any;
@@ -6,90 +6,97 @@ let caughtMessage: any;
 declare var console: any;
 
 export function interceptConsole(interceptions: any): object {
-    console = {
-        // tslint:disable-next-line
-        log: function () {
-            interceptions.log = arguments;
-        },
-        // tslint:disable-next-line
-        warn: function () {
-            interceptions.warn = arguments;
-        },
-        // tslint:disable-next-line
-        error: function () {
-            interceptions.error = arguments;
-        },
-    };
-    return interceptions;
+  console = {
+    // tslint:disable-next-line
+    log: function () {
+      interceptions.log = arguments;
+    },
+    // tslint:disable-next-line
+    warn: function () {
+      interceptions.warn = arguments;
+    },
+    // tslint:disable-next-line
+    error: function () {
+      interceptions.error = arguments;
+    },
+  };
+  return interceptions;
 }
 
 export function restoreConsole() {
-    console = originalConsole;
+  console = originalConsole;
 }
 
-describe('ConsoleLogService', () => {
-    let logService: ConsoleLogService;
-    beforeEach(() => {
-        caughtMessage = {};
-        interceptConsole(caughtMessage);
-        logService = new ConsoleLogService(true);
+describe("ConsoleLogService", () => {
+  let logService: ConsoleLogService;
+  beforeEach(() => {
+    caughtMessage = {};
+    interceptConsole(caughtMessage);
+    logService = new ConsoleLogService(true);
+  });
+
+  afterAll(() => {
+    restoreConsole();
+  });
+
+  it("filters messages below the set threshold", () => {
+    logService = new ConsoleLogService(true, (level) => true);
+    logService.debug("debug");
+    logService.info("info");
+    logService.warning("warning");
+    logService.error("error");
+
+    expect(caughtMessage).toEqual({});
+  });
+  it("only writes debug messages in dev mode", () => {
+    logService = new ConsoleLogService(false);
+
+    logService.debug("debug message");
+    expect(caughtMessage.log).toBeUndefined();
+  });
+
+  it("writes debug/info messages to console.log", () => {
+    logService.debug("this is a debug message");
+    expect(caughtMessage).toEqual({
+      log: jasmine.arrayWithExactContents(["this is a debug message"]),
     });
 
-    afterAll(() => {
-        restoreConsole();
+    logService.info("this is an info message");
+    expect(caughtMessage).toEqual({
+      log: jasmine.arrayWithExactContents(["this is an info message"]),
     });
-
-    it('filters messages below the set threshold', () => {
-        logService = new ConsoleLogService(true, level => true);
-        logService.debug('debug');
-        logService.info('info');
-        logService.warning('warning');
-        logService.error('error');
-
-        expect(caughtMessage).toEqual({});
-    });
-    it('only writes debug messages in dev mode', () => {
-        logService = new ConsoleLogService(false);
-
-        logService.debug('debug message');
-        expect(caughtMessage.log).toBeUndefined();
-    });
-
-
-    it('writes debug/info messages to console.log', () => {
-        logService.debug('this is a debug message');
-        expect(caughtMessage).toEqual({ log: jasmine.arrayWithExactContents(['this is a debug message']) });
-
-        logService.info('this is an info message');
-        expect(caughtMessage).toEqual({ log: jasmine.arrayWithExactContents(['this is an info message']) });
+  });
+  it("writes warning messages to console.warn", () => {
+    logService.warning("this is a warning message");
+    expect(caughtMessage).toEqual({
+      warn: jasmine.arrayWithExactContents(["this is a warning message"]),
     });
-    it('writes warning messages to console.warn', () => {
-        logService.warning('this is a warning message');
-        expect(caughtMessage).toEqual({ warn: jasmine.arrayWithExactContents(['this is a warning message']) });
-    });
-    it('writes error messages to console.error', () => {
-        logService.error('this is an error message');
-        expect(caughtMessage).toEqual({ error: jasmine.arrayWithExactContents(['this is an error message']) });
-    });
-
-    it('times with output to info', async () => {
-        logService.time();
-        await new Promise(r => setTimeout(r, 250));
-        const duration = logService.timeEnd();
-        expect(duration[0]).toBe(0);
-        expect(duration[1]).toBeGreaterThan(0);
-        expect(duration[1]).toBeLessThan(500 * 10e6);
-
-        expect(caughtMessage).toEqual(jasmine.arrayContaining([]));
-        expect(caughtMessage.log.length).toBe(1);
-        expect(caughtMessage.log[0]).toEqual(jasmine.stringMatching(/^default: \d+\.?\d*ms$/));
-    });
-
-    it('filters time output', async () => {
-        logService = new ConsoleLogService(true, level => true);
-        logService.time();
-        logService.timeEnd();
-
-        expect(caughtMessage).toEqual({});
+  });
+  it("writes error messages to console.error", () => {
+    logService.error("this is an error message");
+    expect(caughtMessage).toEqual({
+      error: jasmine.arrayWithExactContents(["this is an error message"]),
     });
+  });
+
+  it("times with output to info", async () => {
+    logService.time();
+    await new Promise((r) => setTimeout(r, 250));
+    const duration = logService.timeEnd();
+    expect(duration[0]).toBe(0);
+    expect(duration[1]).toBeGreaterThan(0);
+    expect(duration[1]).toBeLessThan(500 * 10e6);
+
+    expect(caughtMessage).toEqual(jasmine.arrayContaining([]));
+    expect(caughtMessage.log.length).toBe(1);
+    expect(caughtMessage.log[0]).toEqual(jasmine.stringMatching(/^default: \d+\.?\d*ms$/));
+  });
+
+  it("filters time output", async () => {
+    logService = new ConsoleLogService(true, (level) => true);
+    logService.time();
+    logService.timeEnd();
+
+    expect(caughtMessage).toEqual({});
+  });
 });
diff --git a/jslib/spec/common/services/export.service.spec.ts b/jslib/spec/common/services/export.service.spec.ts
index a9d57d2b..62402d78 100644
--- a/jslib/spec/common/services/export.service.spec.ts
+++ b/jslib/spec/common/services/export.service.spec.ts
@@ -1,123 +1,135 @@
-import { Substitute, SubstituteOf } from '@fluffy-spoon/substitute';
+import { Substitute, SubstituteOf } from "@fluffy-spoon/substitute";
 
-import { ApiService } from 'jslib-common/abstractions/api.service';
-import { CipherService } from 'jslib-common/abstractions/cipher.service';
-import { CryptoService } from 'jslib-common/abstractions/crypto.service';
-import { FolderService } from 'jslib-common/abstractions/folder.service';
+import { ApiService } from "jslib-common/abstractions/api.service";
+import { CipherService } from "jslib-common/abstractions/cipher.service";
+import { CryptoService } from "jslib-common/abstractions/crypto.service";
+import { FolderService } from "jslib-common/abstractions/folder.service";
 
-import { ExportService } from 'jslib-common/services/export.service';
+import { ExportService } from "jslib-common/services/export.service";
 
-import { Cipher } from 'jslib-common/models/domain/cipher';
-import { EncString } from 'jslib-common/models/domain/encString';
-import { Login } from 'jslib-common/models/domain/login';
-import { CipherWithIds as CipherExport } from 'jslib-common/models/export/cipherWithIds';
+import { Cipher } from "jslib-common/models/domain/cipher";
+import { EncString } from "jslib-common/models/domain/encString";
+import { Login } from "jslib-common/models/domain/login";
+import { CipherWithIds as CipherExport } from "jslib-common/models/export/cipherWithIds";
 
-import { CipherType } from 'jslib-common/enums/cipherType';
-import { CipherView } from 'jslib-common/models/view/cipherView';
-import { LoginView } from 'jslib-common/models/view/loginView';
+import { CipherType } from "jslib-common/enums/cipherType";
+import { CipherView } from "jslib-common/models/view/cipherView";
+import { LoginView } from "jslib-common/models/view/loginView";
 
-import { BuildTestObject, GetUniqueString } from '../../utils';
+import { BuildTestObject, GetUniqueString } from "../../utils";
 
 const UserCipherViews = [
-    generateCipherView(false),
-    generateCipherView(false),
-    generateCipherView(true),
+  generateCipherView(false),
+  generateCipherView(false),
+  generateCipherView(true),
 ];
 
 const UserCipherDomains = [
-    generateCipherDomain(false),
-    generateCipherDomain(false),
-    generateCipherDomain(true),
+  generateCipherDomain(false),
+  generateCipherDomain(false),
+  generateCipherDomain(true),
 ];
 
 function generateCipherView(deleted: boolean) {
-    return BuildTestObject({
-        id: GetUniqueString('id'),
-        notes: GetUniqueString('notes'),
-        type: CipherType.Login,
-        login: BuildTestObject<LoginView>({
-            username: GetUniqueString('username'),
-            password: GetUniqueString('password'),
-        }, LoginView),
-        collectionIds: null,
-        deletedDate: deleted ? new Date() : null,
-    }, CipherView);
+  return BuildTestObject(
+    {
+      id: GetUniqueString("id"),
+      notes: GetUniqueString("notes"),
+      type: CipherType.Login,
+      login: BuildTestObject<LoginView>(
+        {
+          username: GetUniqueString("username"),
+          password: GetUniqueString("password"),
+        },
+        LoginView
+      ),
+      collectionIds: null,
+      deletedDate: deleted ? new Date() : null,
+    },
+    CipherView
+  );
 }
 
 function generateCipherDomain(deleted: boolean) {
-    return BuildTestObject({
-        id: GetUniqueString('id'),
-        notes: new EncString(GetUniqueString('notes')),
-        type: CipherType.Login,
-        login: BuildTestObject<Login>({
-            username: new EncString(GetUniqueString('username')),
-            password: new EncString(GetUniqueString('password')),
-        }, Login),
-        collectionIds: null,
-        deletedDate: deleted ? new Date() : null,
-    }, Cipher);
+  return BuildTestObject(
+    {
+      id: GetUniqueString("id"),
+      notes: new EncString(GetUniqueString("notes")),
+      type: CipherType.Login,
+      login: BuildTestObject<Login>(
+        {
+          username: new EncString(GetUniqueString("username")),
+          password: new EncString(GetUniqueString("password")),
+        },
+        Login
+      ),
+      collectionIds: null,
+      deletedDate: deleted ? new Date() : null,
+    },
+    Cipher
+  );
 }
 
 function expectEqualCiphers(ciphers: CipherView[] | Cipher[], jsonResult: string) {
-    const actual = JSON.stringify(JSON.parse(jsonResult).items);
-    const items: CipherExport[] = [];
-    ciphers.forEach((c: CipherView | Cipher) => {
-        const item = new CipherExport();
-        item.build(c);
-        items.push(item);
-    });
-
-    expect(actual).toEqual(JSON.stringify(items));
+  const actual = JSON.stringify(JSON.parse(jsonResult).items);
+  const items: CipherExport[] = [];
+  ciphers.forEach((c: CipherView | Cipher) => {
+    const item = new CipherExport();
+    item.build(c);
+    items.push(item);
+  });
+
+  expect(actual).toEqual(JSON.stringify(items));
 }
 
-describe('ExportService', () => {
-    let exportService: ExportService;
-    let apiService: SubstituteOf<ApiService>;
-    let cipherService: SubstituteOf<CipherService>;
-    let folderService: SubstituteOf<FolderService>;
-    let cryptoService: SubstituteOf<CryptoService>;
+describe("ExportService", () => {
+  let exportService: ExportService;
+  let apiService: SubstituteOf<ApiService>;
+  let cipherService: SubstituteOf<CipherService>;
+  let folderService: SubstituteOf<FolderService>;
+  let cryptoService: SubstituteOf<CryptoService>;
 
-    beforeEach(() => {
-        apiService = Substitute.for<ApiService>();
-        cipherService = Substitute.for<CipherService>();
-        folderService = Substitute.for<FolderService>();
-        cryptoService = Substitute.for<CryptoService>();
+  beforeEach(() => {
+    apiService = Substitute.for<ApiService>();
+    cipherService = Substitute.for<CipherService>();
+    folderService = Substitute.for<FolderService>();
+    cryptoService = Substitute.for<CryptoService>();
 
-        folderService.getAllDecrypted().resolves([]);
-        folderService.getAll().resolves([]);
+    folderService.getAllDecrypted().resolves([]);
+    folderService.getAll().resolves([]);
 
-        exportService = new ExportService(folderService, cipherService, apiService, cryptoService);
-    });
+    exportService = new ExportService(folderService, cipherService, apiService, cryptoService);
+  });
 
-    it('exports unecrypted user ciphers', async () => {
-        cipherService.getAllDecrypted().resolves(UserCipherViews.slice(0, 1));
+  it("exports unecrypted user ciphers", async () => {
+    cipherService.getAllDecrypted().resolves(UserCipherViews.slice(0, 1));
 
-        const actual = await exportService.getExport('json');
+    const actual = await exportService.getExport("json");
 
-        expectEqualCiphers(UserCipherViews.slice(0, 1), actual);
-    });
+    expectEqualCiphers(UserCipherViews.slice(0, 1), actual);
+  });
 
-    it('exports encrypted json user ciphers', async () => {
-        cipherService.getAll().resolves(UserCipherDomains.slice(0, 1));
+  it("exports encrypted json user ciphers", async () => {
+    cipherService.getAll().resolves(UserCipherDomains.slice(0, 1));
 
-        const actual = await exportService.getExport('encrypted_json');
+    const actual = await exportService.getExport("encrypted_json");
 
-        expectEqualCiphers(UserCipherDomains.slice(0, 1), actual);
-    });
+    expectEqualCiphers(UserCipherDomains.slice(0, 1), actual);
+  });
 
-    it('does not unecrypted export trashed user items', async () => {
-        cipherService.getAllDecrypted().resolves(UserCipherViews);
+  it("does not unecrypted export trashed user items", async () => {
+    cipherService.getAllDecrypted().resolves(UserCipherViews);
 
-        const actual = await exportService.getExport('json');
+    const actual = await exportService.getExport("json");
 
-        expectEqualCiphers(UserCipherViews.slice(0, 2), actual);
-    });
+    expectEqualCiphers(UserCipherViews.slice(0, 2), actual);
+  });
 
-    it('does not encrypted export trashed user items', async () => {
-        cipherService.getAll().resolves(UserCipherDomains);
+  it("does not encrypted export trashed user items", async () => {
+    cipherService.getAll().resolves(UserCipherDomains);
 
-        const actual = await exportService.getExport('encrypted_json');
+    const actual = await exportService.getExport("encrypted_json");
 
-        expectEqualCiphers(UserCipherDomains.slice(0, 2), actual);
-    });
+    expectEqualCiphers(UserCipherDomains.slice(0, 2), actual);
+  });
 });
diff --git a/jslib/spec/electron/services/electronLog.service.spec.ts b/jslib/spec/electron/services/electronLog.service.spec.ts
index 8bbb46ee..30b52ce0 100644
--- a/jslib/spec/electron/services/electronLog.service.spec.ts
+++ b/jslib/spec/electron/services/electronLog.service.spec.ts
@@ -1,9 +1,9 @@
-import { ElectronLogService } from 'jslib-electron/services/electronLog.service';
+import { ElectronLogService } from "jslib-electron/services/electronLog.service";
 
-describe('ElectronLogService', () => {
-    it('sets dev based on electron method', () => {
-        process.env.ELECTRON_IS_DEV = '1';
-        const logService = new ElectronLogService();
-        expect(logService).toEqual(jasmine.objectContaining({ isDev: true }) as any);
-    });
+describe("ElectronLogService", () => {
+  it("sets dev based on electron method", () => {
+    process.env.ELECTRON_IS_DEV = "1";
+    const logService = new ElectronLogService();
+    expect(logService).toEqual(jasmine.objectContaining({ isDev: true }) as any);
+  });
 });
diff --git a/jslib/spec/electron/utils.spec.ts b/jslib/spec/electron/utils.spec.ts
index b350a82d..f9e95a2d 100644
--- a/jslib/spec/electron/utils.spec.ts
+++ b/jslib/spec/electron/utils.spec.ts
@@ -1,27 +1,27 @@
-import { cleanUserAgent } from 'jslib-electron/utils';
+import { cleanUserAgent } from "jslib-electron/utils";
 
 const expectedUserAgent = `Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/${process.versions.chrome} Safari/537.36`;
 
-describe('cleanUserAgent', () => {
-    it('cleans mac agent', () => {
-        const initialMacAgent = `Mozilla/5.0 (Macintosh; Intel Mac OS X 11_6_0) AppleWebKit/537.36 (KHTML, like Gecko) Bitwarden/${process.version} Chrome/${process.versions.chrome} Electron/${process.versions.electron} Safari/537.36`;
-        expect(cleanUserAgent(initialMacAgent)).toEqual(expectedUserAgent);
-    });
+describe("cleanUserAgent", () => {
+  it("cleans mac agent", () => {
+    const initialMacAgent = `Mozilla/5.0 (Macintosh; Intel Mac OS X 11_6_0) AppleWebKit/537.36 (KHTML, like Gecko) Bitwarden/${process.version} Chrome/${process.versions.chrome} Electron/${process.versions.electron} Safari/537.36`;
+    expect(cleanUserAgent(initialMacAgent)).toEqual(expectedUserAgent);
+  });
 
-    it('cleans windows agent', () => {
-        const initialWindowsAgent = `Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Bitwarden/${process.version} Chrome/${process.versions.chrome} Electron/${process.versions.electron} Safari/537.36`;
-        expect(cleanUserAgent(initialWindowsAgent)).toEqual(expectedUserAgent);
-    });
+  it("cleans windows agent", () => {
+    const initialWindowsAgent = `Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Bitwarden/${process.version} Chrome/${process.versions.chrome} Electron/${process.versions.electron} Safari/537.36`;
+    expect(cleanUserAgent(initialWindowsAgent)).toEqual(expectedUserAgent);
+  });
 
-    it('cleans linux agent', () => {
-        const initialWindowsAgent = `Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Bitwarden/${process.version} Chrome/${process.versions.chrome} Electron/${process.versions.electron} Safari/537.36`;
-        expect(cleanUserAgent(initialWindowsAgent)).toEqual(expectedUserAgent);
-    });
+  it("cleans linux agent", () => {
+    const initialWindowsAgent = `Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Bitwarden/${process.version} Chrome/${process.versions.chrome} Electron/${process.versions.electron} Safari/537.36`;
+    expect(cleanUserAgent(initialWindowsAgent)).toEqual(expectedUserAgent);
+  });
 
-    it('does not change version numbers', () => {
-        const expected = `Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.141 Safari/537.36`;
-        const initialAgent = `Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Bitwarden/1.28.3 Chrome/87.0.4280.141 Electron/11.4.5 Safari/537.36`;
+  it("does not change version numbers", () => {
+    const expected = `Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.141 Safari/537.36`;
+    const initialAgent = `Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Bitwarden/1.28.3 Chrome/87.0.4280.141 Electron/11.4.5 Safari/537.36`;
 
-        expect(cleanUserAgent(initialAgent)).toEqual(expected);
-    });
+    expect(cleanUserAgent(initialAgent)).toEqual(expected);
+  });
 });
diff --git a/jslib/spec/helpers.ts b/jslib/spec/helpers.ts
index 058cc4fa..3d7aaa73 100644
--- a/jslib/spec/helpers.ts
+++ b/jslib/spec/helpers.ts
@@ -1,9 +1,9 @@
 // tslint:disable-next-line
-const TSConsoleReporter = require('jasmine-ts-console-reporter');
+const TSConsoleReporter = require("jasmine-ts-console-reporter");
 jasmine.getEnv().clearReporters(); // Clear default console reporter
 jasmine.getEnv().addReporter(new TSConsoleReporter());
 
 // Polyfills
 // tslint:disable-next-line
-const jsdom: any = require('jsdom');
+const jsdom: any = require("jsdom");
 (global as any).DOMParser = new jsdom.JSDOM().window.DOMParser;
diff --git a/jslib/spec/node/cli/consoleLog.service.spec.ts b/jslib/spec/node/cli/consoleLog.service.spec.ts
index afcdc007..a6d4529c 100644
--- a/jslib/spec/node/cli/consoleLog.service.spec.ts
+++ b/jslib/spec/node/cli/consoleLog.service.spec.ts
@@ -1,41 +1,42 @@
-import { ConsoleLogService } from 'jslib-node/cli/services/consoleLog.service';
-import { interceptConsole, restoreConsole } from '../../common/services/consoleLog.service.spec';
+import { ConsoleLogService } from "jslib-node/cli/services/consoleLog.service";
+import { interceptConsole, restoreConsole } from "../../common/services/consoleLog.service.spec";
 
 const originalConsole = console;
 let caughtMessage: any = {};
 
-describe('CLI Console log service', () => {
-    let logService: ConsoleLogService;
-    beforeEach(() => {
-        caughtMessage = {};
-        interceptConsole(caughtMessage);
-        logService = new ConsoleLogService(true);
-    });
+describe("CLI Console log service", () => {
+  let logService: ConsoleLogService;
+  beforeEach(() => {
+    caughtMessage = {};
+    interceptConsole(caughtMessage);
+    logService = new ConsoleLogService(true);
+  });
 
-    afterAll(() => {
-        restoreConsole();
-    });
+  afterAll(() => {
+    restoreConsole();
+  });
 
-    it('should redirect all console to error if BW_RESPONSE env is true', () => {
-        process.env.BW_RESPONSE = 'true';
+  it("should redirect all console to error if BW_RESPONSE env is true", () => {
+    process.env.BW_RESPONSE = "true";
 
-        logService.debug('this is a debug message');
-        expect(caughtMessage).toEqual({ error: jasmine.arrayWithExactContents(['this is a debug message']) });
+    logService.debug("this is a debug message");
+    expect(caughtMessage).toEqual({
+      error: jasmine.arrayWithExactContents(["this is a debug message"]),
     });
+  });
 
-    it('should not redirect console to error if BW_RESPONSE != true', () => {
-        process.env.BW_RESPONSE = 'false';
-
-        logService.debug('debug');
-        logService.info('info');
-        logService.warning('warning');
-        logService.error('error');
+  it("should not redirect console to error if BW_RESPONSE != true", () => {
+    process.env.BW_RESPONSE = "false";
 
-        expect(caughtMessage).toEqual({
-            log: jasmine.arrayWithExactContents(['info']),
-            warn: jasmine.arrayWithExactContents(['warning']),
-            error: jasmine.arrayWithExactContents(['error']),
-        });
+    logService.debug("debug");
+    logService.info("info");
+    logService.warning("warning");
+    logService.error("error");
 
+    expect(caughtMessage).toEqual({
+      log: jasmine.arrayWithExactContents(["info"]),
+      warn: jasmine.arrayWithExactContents(["warning"]),
+      error: jasmine.arrayWithExactContents(["error"]),
     });
+  });
 });
diff --git a/jslib/spec/node/services/nodeCryptoFunction.service.spec.ts b/jslib/spec/node/services/nodeCryptoFunction.service.spec.ts
index 12b00b6e..43849b74 100644
--- a/jslib/spec/node/services/nodeCryptoFunction.service.spec.ts
+++ b/jslib/spec/node/services/nodeCryptoFunction.service.spec.ts
@@ -1,424 +1,519 @@
-import { NodeCryptoFunctionService } from 'jslib-node/services/nodeCryptoFunction.service';
-
-import { Utils } from 'jslib-common/misc/utils';
-import { SymmetricCryptoKey } from 'jslib-common/models/domain/symmetricCryptoKey';
-
-const RsaPublicKey = 'MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAl0Vawl/toXzkEvB82FEtqHP' +
-    '4xlU2ab/v0crqIfXfIoWF/XXdHGIdrZeilnRXPPJT1B9dTsasttEZNnua/0Rek/cjNDHtzT52irfoZYS7X6HNIfOi54Q+egP' +
-    'RQ1H7iNHVZz3K8Db9GCSKPeC8MbW6gVCzb15esCe1gGzg6wkMuWYDFYPoh/oBqcIqrGah7firqB1nDedzEjw32heP2DAffVN' +
-    '084iTDjiWrJNUxBJ2pDD5Z9dT3MzQ2s09ew1yMWK2z37rT3YerC7OgEDmo3WYo3xL3qYJznu3EO2nmrYjiRa40wKSjxsTlUc' +
-    'xDF+F0uMW8oR9EMUHgepdepfAtLsSAQIDAQAB';
-const RsaPrivateKey = 'MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQCXRVrCX+2hfOQS8Hz' +
-    'YUS2oc/jGVTZpv+/Ryuoh9d8ihYX9dd0cYh2tl6KWdFc88lPUH11Oxqy20Rk2e5r/RF6T9yM0Me3NPnaKt+hlhLtfoc0h86L' +
-    'nhD56A9FDUfuI0dVnPcrwNv0YJIo94LwxtbqBULNvXl6wJ7WAbODrCQy5ZgMVg+iH+gGpwiqsZqHt+KuoHWcN53MSPDfaF4/' +
-    'YMB99U3TziJMOOJask1TEEnakMPln11PczNDazT17DXIxYrbPfutPdh6sLs6AQOajdZijfEvepgnOe7cQ7aeatiOJFrjTApK' +
-    'PGxOVRzEMX4XS4xbyhH0QxQeB6l16l8C0uxIBAgMBAAECggEASaWfeVDA3cVzOPFSpvJm20OTE+R6uGOU+7vh36TX/POq92q' +
-    'Buwbd0h0oMD32FxsXywd2IxtBDUSiFM9699qufTVuM0Q3tZw6lHDTOVG08+tPdr8qSbMtw7PGFxN79fHLBxejjO4IrM9lapj' +
-    'WpxEF+11x7r+wM+0xRZQ8sNFYG46aPfIaty4BGbL0I2DQ2y8I57iBCAy69eht59NLMm27fRWGJIWCuBIjlpfzET1j2HLXUIh' +
-    '5bTBNzqaN039WH49HczGE3mQKVEJZc/efk3HaVd0a1Sjzyn0QY+N1jtZN3jTRbuDWA1AknkX1LX/0tUhuS3/7C3ejHxjw4Dk' +
-    '1ZLo5/QKBgQDIWvqFn0+IKRSu6Ua2hDsufIHHUNLelbfLUMmFthxabcUn4zlvIscJO00Tq/ezopSRRvbGiqnxjv/mYxucvOU' +
-    'BeZtlus0Q9RTACBtw9TGoNTmQbEunJ2FOSlqbQxkBBAjgGEppRPt30iGj/VjAhCATq2MYOa/X4dVR51BqQAFIEwKBgQDBSIf' +
-    'TFKC/hDk6FKZlgwvupWYJyU9RkyfstPErZFmzoKhPkQ3YORo2oeAYmVUbS9I2iIYpYpYQJHX8jMuCbCz4ONxTCuSIXYQYUcU' +
-    'q4PglCKp31xBAE6TN8SvhfME9/MvuDssnQinAHuF0GDAhF646T3LLS1not6Vszv7brwSoGwKBgQC88v/8cGfi80ssQZeMnVv' +
-    'q1UTXIeQcQnoY5lGHJl3K8mbS3TnXE6c9j417Fdz+rj8KWzBzwWXQB5pSPflWcdZO886Xu/mVGmy9RWgLuVFhXwCwsVEPjNX' +
-    '5ramRb0/vY0yzenUCninBsIxFSbIfrPtLUYCc4hpxr+sr2Mg/y6jpvQKBgBezMRRs3xkcuXepuI2R+BCXL1/b02IJTUf1F+1' +
-    'eLLGd7YV0H+J3fgNc7gGWK51hOrF9JBZHBGeOUPlaukmPwiPdtQZpu4QNE3l37VlIpKTF30E6mb+BqR+nht3rUjarnMXgAoE' +
-    'Z18y6/KIjpSMpqC92Nnk/EBM9EYe6Cf4eA9ApAoGAeqEUg46UTlJySkBKURGpIs3v1kkf5I0X8DnOhwb+HPxNaiEdmO7ckm8' +
-    '+tPVgppLcG0+tMdLjigFQiDUQk2y3WjyxP5ZvXu7U96jaJRI8PFMoE06WeVYcdIzrID2HvqH+w0UQJFrLJ/0Mn4stFAEzXKZ' +
-    'BokBGnjFnTnKcs7nv/O8=';
-
-const Sha1Mac = '4d4c223f95dc577b665ec4ccbcb680b80a397038';
-const Sha256Mac = '6be3caa84922e12aaaaa2f16c40d44433bb081ef323db584eb616333ab4e874f';
-const Sha512Mac = '21910e341fa12106ca35758a2285374509326c9fbe0bd64e7b99c898f841dc948c58ce66d3504d8883c' +
-    '5ea7817a0b7c5d4d9b00364ccd214669131fc17fe4aca';
-
-describe('NodeCrypto Function Service', () => {
-    describe('pbkdf2', () => {
-        const regular256Key = 'pj9prw/OHPleXI6bRdmlaD+saJS4awrMiQsQiDjeu2I=';
-        const utf8256Key = 'yqvoFXgMRmHR3QPYr5pyR4uVuoHkltv9aHUP63p8n7I=';
-        const unicode256Key = 'ZdeOata6xoRpB4DLp8zHhXz5kLmkWtX5pd+TdRH8w8w=';
-
-        const regular512Key = 'liTi/Ke8LPU1Qv+Vl7NGEVt/XMbsBVJ2kQxtVG/Z1/JFHFKQW3ZkI81qVlwTiCpb+cFXzs+57' +
-            'eyhhx5wfKo5Cg==';
-        const utf8512Key = 'df0KdvIBeCzD/kyXptwQohaqUa4e7IyFUyhFQjXCANu5T+scq55hCcE4dG4T/MhAk2exw8j7ixRN' +
-            'zXANiVZpnw==';
-        const unicode512Key = 'FE+AnUJaxv8jh+zUDtZz4mjjcYk0/PZDZm+SLJe3XtxtnpdqqpblX6JjuMZt/dYYNMOrb2+mD' +
-            'L3FiQDTROh1lg==';
-
-        testPbkdf2('sha256', regular256Key, utf8256Key, unicode256Key);
-        testPbkdf2('sha512', regular512Key, utf8512Key, unicode512Key);
-    });
-
-    describe('hkdf', () => {
-        const regular256Key = 'qBUmEYtwTwwGPuw/z6bs/qYXXYNUlocFlyAuuANI8Pw=';
-        const utf8256Key = '6DfJwW1R3txgiZKkIFTvVAb7qVlG7lKcmJGJoxR2GBU=';
-        const unicode256Key = 'gejGI82xthA+nKtKmIh82kjw+ttHr+ODsUoGdu5sf0A=';
-
-        const regular512Key = 'xe5cIG6ZfwGmb1FvsOedM0XKOm21myZkjL/eDeKIqqM=';
-        const utf8512Key = 'XQMVBnxVEhlvjSFDQc77j5GDE9aorvbS0vKnjhRg0LY=';
-        const unicode512Key = '148GImrTbrjaGAe/iWEpclINM8Ehhko+9lB14+52lqc=';
-
-        testHkdf('sha256', regular256Key, utf8256Key, unicode256Key);
-        testHkdf('sha512', regular512Key, utf8512Key, unicode512Key);
-    });
-
-    describe('hkdfExpand', () => {
-        const prk16Byte = 'criAmKtfzxanbgea5/kelQ==';
-        const prk32Byte = 'F5h4KdYQnIVH4rKH0P9CZb1GrR4n16/sJrS0PsQEn0Y=';
-        const prk64Byte = 'ssBK0mRG17VHdtsgt8yo4v25CRNpauH+0r2fwY/E9rLyaFBAOMbIeTry+' +
-            'gUJ28p8y+hFh3EI9pcrEWaNvFYonQ==';
-
-        testHkdfExpand('sha256', prk32Byte, 32, 'BnIqJlfnHm0e/2iB/15cbHyR19ARPIcWRp4oNS22CD8=');
-        testHkdfExpand('sha256', prk32Byte, 64, 'BnIqJlfnHm0e/2iB/15cbHyR19ARPIcWRp4oNS22CD9BV+' +
-            '/queOZenPNkDhmlVyL2WZ3OSU5+7ISNF5NhNfvZA==');
-        testHkdfExpand('sha512', prk64Byte, 32, 'uLWbMWodSBms5uGJ5WTRTesyW+MD7nlpCZvagvIRXlk=');
-        testHkdfExpand('sha512', prk64Byte, 64, 'uLWbMWodSBms5uGJ5WTRTesyW+MD7nlpCZvagvIRXlkY5Pv0sB+' +
-            'MqvaopmkC6sD/j89zDwTV9Ib2fpucUydO8w==');
-
-        it('should fail with prk too small', async () => {
-            const cryptoFunctionService = new NodeCryptoFunctionService();
-            const f = cryptoFunctionService.hkdfExpand(Utils.fromB64ToArray(prk16Byte), 'info', 32, 'sha256');
-            await expectAsync(f).toBeRejectedWith(new Error('prk is too small.'));
-        });
-
-        it('should fail with outputByteSize is too large', async () => {
-            const cryptoFunctionService = new NodeCryptoFunctionService();
-            const f = cryptoFunctionService.hkdfExpand(Utils.fromB64ToArray(prk32Byte), 'info', 8161, 'sha256');
-            await expectAsync(f).toBeRejectedWith(new Error('outputByteSize is too large.'));
-        });
-    });
-
-    describe('hash', () => {
-        const regular1Hash = '2a241604fb921fad12bf877282457268e1dccb70';
-        const utf81Hash = '85672798dc5831e96d6c48655d3d39365a9c88b6';
-        const unicode1Hash = '39c975935054a3efc805a9709b60763a823a6ad4';
-
-        const regular256Hash = '2b8e96031d352a8655d733d7a930b5ffbea69dc25cf65c7bca7dd946278908b2';
-        const utf8256Hash = '25fe8440f5b01ed113b0a0e38e721b126d2f3f77a67518c4a04fcde4e33eeb9d';
-        const unicode256Hash = 'adc1c0c2afd6e92cefdf703f9b6eb2c38e0d6d1a040c83f8505c561fea58852e';
-
-        const regular512Hash = 'c15cf11d43bde333647e3f559ec4193bb2edeaa0e8b902772f514cdf3f785a3f49a6e02a4b87b3' +
-            'b47523271ad45b7e0aebb5cdcc1bc54815d256eb5dcb80da9d';
-        const utf8512Hash = '035c31a877a291af09ed2d3a1a293e69c3e079ea2cecc00211f35e6bce10474ca3ad6e30b59e26118' +
-            '37463f20969c5bc95282965a051a88f8cdf2e166549fcdd';
-        const unicode512Hash = '2b16a5561af8ad6fe414cc103fc8036492e1fc6d9aabe1b655497054f760fe0e34c5d100ac773d' +
-            '9f3030438284f22dbfa20cb2e9b019f2c98dfe38ce1ef41bae';
-
-        const regularMd5 = '5eceffa53a5fd58c44134211e2c5f522';
-        const utf8Md5 = '3abc9433c09551b939c80aa0aa3174e1';
-        const unicodeMd5 = '85ae134072c8d81257933f7045ba17ca';
-
-        testHash('sha1', regular1Hash, utf81Hash, unicode1Hash);
-        testHash('sha256', regular256Hash, utf8256Hash, unicode256Hash);
-        testHash('sha512', regular512Hash, utf8512Hash, unicode512Hash);
-        testHash('md5', regularMd5, utf8Md5, unicodeMd5);
-    });
-
-    describe('hmac', () => {
-        testHmac('sha1', Sha1Mac);
-        testHmac('sha256', Sha256Mac);
-        testHmac('sha512', Sha512Mac);
-    });
-
-    describe('compare', () => {
-        testCompare(false);
-    });
-
-    describe('hmacFast', () => {
-        testHmac('sha1', Sha1Mac, true);
-        testHmac('sha256', Sha256Mac, true);
-        testHmac('sha512', Sha512Mac, true);
-    });
-
-    describe('compareFast', () => {
-        testCompare(true);
-    });
-
-    describe('aesEncrypt', () => {
-        it('should successfully encrypt data', async () => {
-            const nodeCryptoFunctionService = new NodeCryptoFunctionService();
-            const iv = makeStaticByteArray(16);
-            const key = makeStaticByteArray(32);
-            const data = Utils.fromUtf8ToArray('EncryptMe!');
-            const encValue = await nodeCryptoFunctionService.aesEncrypt(data.buffer, iv.buffer, key.buffer);
-            expect(Utils.fromBufferToB64(encValue)).toBe('ByUF8vhyX4ddU9gcooznwA==');
-        });
-
-        it('should successfully encrypt and then decrypt data', async () => {
-            const nodeCryptoFunctionService = new NodeCryptoFunctionService();
-            const iv = makeStaticByteArray(16);
-            const key = makeStaticByteArray(32);
-            const value = 'EncryptMe!';
-            const data = Utils.fromUtf8ToArray(value);
-            const encValue = await nodeCryptoFunctionService.aesEncrypt(data.buffer, iv.buffer, key.buffer);
-            const decValue = await nodeCryptoFunctionService.aesDecrypt(encValue, iv.buffer, key.buffer);
-            expect(Utils.fromBufferToUtf8(decValue)).toBe(value);
-        });
-    });
-
-    describe('aesDecryptFast', () => {
-        it('should successfully decrypt data', async () => {
-            const nodeCryptoFunctionService = new NodeCryptoFunctionService();
-            const iv = Utils.fromBufferToB64(makeStaticByteArray(16).buffer);
-            const symKey = new SymmetricCryptoKey(makeStaticByteArray(32).buffer);
-            const data = 'ByUF8vhyX4ddU9gcooznwA==';
-            const params = nodeCryptoFunctionService.aesDecryptFastParameters(data, iv, null, symKey);
-            const decValue = await nodeCryptoFunctionService.aesDecryptFast(params);
-            expect(decValue).toBe('EncryptMe!');
-        });
-    });
-
-    describe('aesDecrypt', () => {
-        it('should successfully decrypt data', async () => {
-            const nodeCryptoFunctionService = new NodeCryptoFunctionService();
-            const iv = makeStaticByteArray(16);
-            const key = makeStaticByteArray(32);
-            const data = Utils.fromB64ToArray('ByUF8vhyX4ddU9gcooznwA==');
-            const decValue = await nodeCryptoFunctionService.aesDecrypt(data.buffer, iv.buffer, key.buffer);
-            expect(Utils.fromBufferToUtf8(decValue)).toBe('EncryptMe!');
-        });
-    });
-
-    describe('rsaEncrypt', () => {
-        it('should successfully encrypt and then decrypt data', async () => {
-            const nodeCryptoFunctionService = new NodeCryptoFunctionService();
-            const pubKey = Utils.fromB64ToArray(RsaPublicKey);
-            const privKey = Utils.fromB64ToArray(RsaPrivateKey);
-            const value = 'EncryptMe!';
-            const data = Utils.fromUtf8ToArray(value);
-            const encValue = await nodeCryptoFunctionService.rsaEncrypt(data.buffer, pubKey.buffer, 'sha1');
-            const decValue = await nodeCryptoFunctionService.rsaDecrypt(encValue, privKey.buffer, 'sha1');
-            expect(Utils.fromBufferToUtf8(decValue)).toBe(value);
-        });
-    });
-
-    describe('rsaDecrypt', () => {
-        it('should successfully decrypt data', async () => {
-            const nodeCryptoFunctionService = new NodeCryptoFunctionService();
-            const privKey = Utils.fromB64ToArray(RsaPrivateKey);
-            const data = Utils.fromB64ToArray('A1/p8BQzN9UrbdYxUY2Va5+kPLyfZXF9JsZrjeEXcaclsnHurdxVAJcnbEqYMP3UXV' +
-                '4YAS/mpf+Rxe6/X0WS1boQdA0MAHSgx95hIlAraZYpiMLLiJRKeo2u8YivCdTM9V5vuAEJwf9Tof/qFsFci3sApdbATkorCT' +
-                'zFOIEPF2S1zgperEP23M01mr4dWVdYN18B32YF67xdJHMbFhp5dkQwv9CmscoWq7OE5HIfOb+JAh7BEZb+CmKhM3yWJvoR/D' +
-                '/5jcercUtK2o+XrzNrL4UQ7yLZcFz6Bfwb/j6ICYvqd/YJwXNE6dwlL57OfwJyCdw2rRYf0/qI00t9u8Iitw==');
-            const decValue = await nodeCryptoFunctionService.rsaDecrypt(data.buffer, privKey.buffer, 'sha1');
-            expect(Utils.fromBufferToUtf8(decValue)).toBe('EncryptMe!');
-        });
-    });
-
-    describe('rsaExtractPublicKey', () => {
-        it('should successfully extract key', async () => {
-            const nodeCryptoFunctionService = new NodeCryptoFunctionService();
-            const privKey = Utils.fromB64ToArray(RsaPrivateKey);
-            const publicKey = await nodeCryptoFunctionService.rsaExtractPublicKey(privKey.buffer);
-            expect(Utils.fromBufferToB64(publicKey)).toBe(RsaPublicKey);
-        });
-    });
-
-    describe('rsaGenerateKeyPair', () => {
-        testRsaGenerateKeyPair(1024);
-        testRsaGenerateKeyPair(2048);
-
-        // Generating 4096 bit keys is really slow with Forge lib.
-        // Maybe move to something else if we ever want to generate keys of this size.
-        // testRsaGenerateKeyPair(4096);
-    });
-
-    describe('randomBytes', () => {
-        it('should make a value of the correct length', async () => {
-            const nodeCryptoFunctionService = new NodeCryptoFunctionService();
-            const randomData = await nodeCryptoFunctionService.randomBytes(16);
-            expect(randomData.byteLength).toBe(16);
-        });
-
-        it('should not make the same value twice', async () => {
-            const nodeCryptoFunctionService = new NodeCryptoFunctionService();
-            const randomData = await nodeCryptoFunctionService.randomBytes(16);
-            const randomData2 = await nodeCryptoFunctionService.randomBytes(16);
-            expect(randomData.byteLength === randomData2.byteLength && randomData !== randomData2).toBeTruthy();
-        });
-    });
+import { NodeCryptoFunctionService } from "jslib-node/services/nodeCryptoFunction.service";
+
+import { Utils } from "jslib-common/misc/utils";
+import { SymmetricCryptoKey } from "jslib-common/models/domain/symmetricCryptoKey";
+
+const RsaPublicKey =
+  "MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAl0Vawl/toXzkEvB82FEtqHP" +
+  "4xlU2ab/v0crqIfXfIoWF/XXdHGIdrZeilnRXPPJT1B9dTsasttEZNnua/0Rek/cjNDHtzT52irfoZYS7X6HNIfOi54Q+egP" +
+  "RQ1H7iNHVZz3K8Db9GCSKPeC8MbW6gVCzb15esCe1gGzg6wkMuWYDFYPoh/oBqcIqrGah7firqB1nDedzEjw32heP2DAffVN" +
+  "084iTDjiWrJNUxBJ2pDD5Z9dT3MzQ2s09ew1yMWK2z37rT3YerC7OgEDmo3WYo3xL3qYJznu3EO2nmrYjiRa40wKSjxsTlUc" +
+  "xDF+F0uMW8oR9EMUHgepdepfAtLsSAQIDAQAB";
+const RsaPrivateKey =
+  "MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQCXRVrCX+2hfOQS8Hz" +
+  "YUS2oc/jGVTZpv+/Ryuoh9d8ihYX9dd0cYh2tl6KWdFc88lPUH11Oxqy20Rk2e5r/RF6T9yM0Me3NPnaKt+hlhLtfoc0h86L" +
+  "nhD56A9FDUfuI0dVnPcrwNv0YJIo94LwxtbqBULNvXl6wJ7WAbODrCQy5ZgMVg+iH+gGpwiqsZqHt+KuoHWcN53MSPDfaF4/" +
+  "YMB99U3TziJMOOJask1TEEnakMPln11PczNDazT17DXIxYrbPfutPdh6sLs6AQOajdZijfEvepgnOe7cQ7aeatiOJFrjTApK" +
+  "PGxOVRzEMX4XS4xbyhH0QxQeB6l16l8C0uxIBAgMBAAECggEASaWfeVDA3cVzOPFSpvJm20OTE+R6uGOU+7vh36TX/POq92q" +
+  "Buwbd0h0oMD32FxsXywd2IxtBDUSiFM9699qufTVuM0Q3tZw6lHDTOVG08+tPdr8qSbMtw7PGFxN79fHLBxejjO4IrM9lapj" +
+  "WpxEF+11x7r+wM+0xRZQ8sNFYG46aPfIaty4BGbL0I2DQ2y8I57iBCAy69eht59NLMm27fRWGJIWCuBIjlpfzET1j2HLXUIh" +
+  "5bTBNzqaN039WH49HczGE3mQKVEJZc/efk3HaVd0a1Sjzyn0QY+N1jtZN3jTRbuDWA1AknkX1LX/0tUhuS3/7C3ejHxjw4Dk" +
+  "1ZLo5/QKBgQDIWvqFn0+IKRSu6Ua2hDsufIHHUNLelbfLUMmFthxabcUn4zlvIscJO00Tq/ezopSRRvbGiqnxjv/mYxucvOU" +
+  "BeZtlus0Q9RTACBtw9TGoNTmQbEunJ2FOSlqbQxkBBAjgGEppRPt30iGj/VjAhCATq2MYOa/X4dVR51BqQAFIEwKBgQDBSIf" +
+  "TFKC/hDk6FKZlgwvupWYJyU9RkyfstPErZFmzoKhPkQ3YORo2oeAYmVUbS9I2iIYpYpYQJHX8jMuCbCz4ONxTCuSIXYQYUcU" +
+  "q4PglCKp31xBAE6TN8SvhfME9/MvuDssnQinAHuF0GDAhF646T3LLS1not6Vszv7brwSoGwKBgQC88v/8cGfi80ssQZeMnVv" +
+  "q1UTXIeQcQnoY5lGHJl3K8mbS3TnXE6c9j417Fdz+rj8KWzBzwWXQB5pSPflWcdZO886Xu/mVGmy9RWgLuVFhXwCwsVEPjNX" +
+  "5ramRb0/vY0yzenUCninBsIxFSbIfrPtLUYCc4hpxr+sr2Mg/y6jpvQKBgBezMRRs3xkcuXepuI2R+BCXL1/b02IJTUf1F+1" +
+  "eLLGd7YV0H+J3fgNc7gGWK51hOrF9JBZHBGeOUPlaukmPwiPdtQZpu4QNE3l37VlIpKTF30E6mb+BqR+nht3rUjarnMXgAoE" +
+  "Z18y6/KIjpSMpqC92Nnk/EBM9EYe6Cf4eA9ApAoGAeqEUg46UTlJySkBKURGpIs3v1kkf5I0X8DnOhwb+HPxNaiEdmO7ckm8" +
+  "+tPVgppLcG0+tMdLjigFQiDUQk2y3WjyxP5ZvXu7U96jaJRI8PFMoE06WeVYcdIzrID2HvqH+w0UQJFrLJ/0Mn4stFAEzXKZ" +
+  "BokBGnjFnTnKcs7nv/O8=";
+
+const Sha1Mac = "4d4c223f95dc577b665ec4ccbcb680b80a397038";
+const Sha256Mac = "6be3caa84922e12aaaaa2f16c40d44433bb081ef323db584eb616333ab4e874f";
+const Sha512Mac =
+  "21910e341fa12106ca35758a2285374509326c9fbe0bd64e7b99c898f841dc948c58ce66d3504d8883c" +
+  "5ea7817a0b7c5d4d9b00364ccd214669131fc17fe4aca";
+
+describe("NodeCrypto Function Service", () => {
+  describe("pbkdf2", () => {
+    const regular256Key = "pj9prw/OHPleXI6bRdmlaD+saJS4awrMiQsQiDjeu2I=";
+    const utf8256Key = "yqvoFXgMRmHR3QPYr5pyR4uVuoHkltv9aHUP63p8n7I=";
+    const unicode256Key = "ZdeOata6xoRpB4DLp8zHhXz5kLmkWtX5pd+TdRH8w8w=";
+
+    const regular512Key =
+      "liTi/Ke8LPU1Qv+Vl7NGEVt/XMbsBVJ2kQxtVG/Z1/JFHFKQW3ZkI81qVlwTiCpb+cFXzs+57" +
+      "eyhhx5wfKo5Cg==";
+    const utf8512Key =
+      "df0KdvIBeCzD/kyXptwQohaqUa4e7IyFUyhFQjXCANu5T+scq55hCcE4dG4T/MhAk2exw8j7ixRN" +
+      "zXANiVZpnw==";
+    const unicode512Key =
+      "FE+AnUJaxv8jh+zUDtZz4mjjcYk0/PZDZm+SLJe3XtxtnpdqqpblX6JjuMZt/dYYNMOrb2+mD" +
+      "L3FiQDTROh1lg==";
+
+    testPbkdf2("sha256", regular256Key, utf8256Key, unicode256Key);
+    testPbkdf2("sha512", regular512Key, utf8512Key, unicode512Key);
+  });
+
+  describe("hkdf", () => {
+    const regular256Key = "qBUmEYtwTwwGPuw/z6bs/qYXXYNUlocFlyAuuANI8Pw=";
+    const utf8256Key = "6DfJwW1R3txgiZKkIFTvVAb7qVlG7lKcmJGJoxR2GBU=";
+    const unicode256Key = "gejGI82xthA+nKtKmIh82kjw+ttHr+ODsUoGdu5sf0A=";
+
+    const regular512Key = "xe5cIG6ZfwGmb1FvsOedM0XKOm21myZkjL/eDeKIqqM=";
+    const utf8512Key = "XQMVBnxVEhlvjSFDQc77j5GDE9aorvbS0vKnjhRg0LY=";
+    const unicode512Key = "148GImrTbrjaGAe/iWEpclINM8Ehhko+9lB14+52lqc=";
+
+    testHkdf("sha256", regular256Key, utf8256Key, unicode256Key);
+    testHkdf("sha512", regular512Key, utf8512Key, unicode512Key);
+  });
+
+  describe("hkdfExpand", () => {
+    const prk16Byte = "criAmKtfzxanbgea5/kelQ==";
+    const prk32Byte = "F5h4KdYQnIVH4rKH0P9CZb1GrR4n16/sJrS0PsQEn0Y=";
+    const prk64Byte =
+      "ssBK0mRG17VHdtsgt8yo4v25CRNpauH+0r2fwY/E9rLyaFBAOMbIeTry+" +
+      "gUJ28p8y+hFh3EI9pcrEWaNvFYonQ==";
+
+    testHkdfExpand("sha256", prk32Byte, 32, "BnIqJlfnHm0e/2iB/15cbHyR19ARPIcWRp4oNS22CD8=");
+    testHkdfExpand(
+      "sha256",
+      prk32Byte,
+      64,
+      "BnIqJlfnHm0e/2iB/15cbHyR19ARPIcWRp4oNS22CD9BV+" +
+        "/queOZenPNkDhmlVyL2WZ3OSU5+7ISNF5NhNfvZA=="
+    );
+    testHkdfExpand("sha512", prk64Byte, 32, "uLWbMWodSBms5uGJ5WTRTesyW+MD7nlpCZvagvIRXlk=");
+    testHkdfExpand(
+      "sha512",
+      prk64Byte,
+      64,
+      "uLWbMWodSBms5uGJ5WTRTesyW+MD7nlpCZvagvIRXlkY5Pv0sB+" +
+        "MqvaopmkC6sD/j89zDwTV9Ib2fpucUydO8w=="
+    );
+
+    it("should fail with prk too small", async () => {
+      const cryptoFunctionService = new NodeCryptoFunctionService();
+      const f = cryptoFunctionService.hkdfExpand(
+        Utils.fromB64ToArray(prk16Byte),
+        "info",
+        32,
+        "sha256"
+      );
+      await expectAsync(f).toBeRejectedWith(new Error("prk is too small."));
+    });
+
+    it("should fail with outputByteSize is too large", async () => {
+      const cryptoFunctionService = new NodeCryptoFunctionService();
+      const f = cryptoFunctionService.hkdfExpand(
+        Utils.fromB64ToArray(prk32Byte),
+        "info",
+        8161,
+        "sha256"
+      );
+      await expectAsync(f).toBeRejectedWith(new Error("outputByteSize is too large."));
+    });
+  });
+
+  describe("hash", () => {
+    const regular1Hash = "2a241604fb921fad12bf877282457268e1dccb70";
+    const utf81Hash = "85672798dc5831e96d6c48655d3d39365a9c88b6";
+    const unicode1Hash = "39c975935054a3efc805a9709b60763a823a6ad4";
+
+    const regular256Hash = "2b8e96031d352a8655d733d7a930b5ffbea69dc25cf65c7bca7dd946278908b2";
+    const utf8256Hash = "25fe8440f5b01ed113b0a0e38e721b126d2f3f77a67518c4a04fcde4e33eeb9d";
+    const unicode256Hash = "adc1c0c2afd6e92cefdf703f9b6eb2c38e0d6d1a040c83f8505c561fea58852e";
+
+    const regular512Hash =
+      "c15cf11d43bde333647e3f559ec4193bb2edeaa0e8b902772f514cdf3f785a3f49a6e02a4b87b3" +
+      "b47523271ad45b7e0aebb5cdcc1bc54815d256eb5dcb80da9d";
+    const utf8512Hash =
+      "035c31a877a291af09ed2d3a1a293e69c3e079ea2cecc00211f35e6bce10474ca3ad6e30b59e26118" +
+      "37463f20969c5bc95282965a051a88f8cdf2e166549fcdd";
+    const unicode512Hash =
+      "2b16a5561af8ad6fe414cc103fc8036492e1fc6d9aabe1b655497054f760fe0e34c5d100ac773d" +
+      "9f3030438284f22dbfa20cb2e9b019f2c98dfe38ce1ef41bae";
+
+    const regularMd5 = "5eceffa53a5fd58c44134211e2c5f522";
+    const utf8Md5 = "3abc9433c09551b939c80aa0aa3174e1";
+    const unicodeMd5 = "85ae134072c8d81257933f7045ba17ca";
+
+    testHash("sha1", regular1Hash, utf81Hash, unicode1Hash);
+    testHash("sha256", regular256Hash, utf8256Hash, unicode256Hash);
+    testHash("sha512", regular512Hash, utf8512Hash, unicode512Hash);
+    testHash("md5", regularMd5, utf8Md5, unicodeMd5);
+  });
+
+  describe("hmac", () => {
+    testHmac("sha1", Sha1Mac);
+    testHmac("sha256", Sha256Mac);
+    testHmac("sha512", Sha512Mac);
+  });
+
+  describe("compare", () => {
+    testCompare(false);
+  });
+
+  describe("hmacFast", () => {
+    testHmac("sha1", Sha1Mac, true);
+    testHmac("sha256", Sha256Mac, true);
+    testHmac("sha512", Sha512Mac, true);
+  });
+
+  describe("compareFast", () => {
+    testCompare(true);
+  });
+
+  describe("aesEncrypt", () => {
+    it("should successfully encrypt data", async () => {
+      const nodeCryptoFunctionService = new NodeCryptoFunctionService();
+      const iv = makeStaticByteArray(16);
+      const key = makeStaticByteArray(32);
+      const data = Utils.fromUtf8ToArray("EncryptMe!");
+      const encValue = await nodeCryptoFunctionService.aesEncrypt(
+        data.buffer,
+        iv.buffer,
+        key.buffer
+      );
+      expect(Utils.fromBufferToB64(encValue)).toBe("ByUF8vhyX4ddU9gcooznwA==");
+    });
+
+    it("should successfully encrypt and then decrypt data", async () => {
+      const nodeCryptoFunctionService = new NodeCryptoFunctionService();
+      const iv = makeStaticByteArray(16);
+      const key = makeStaticByteArray(32);
+      const value = "EncryptMe!";
+      const data = Utils.fromUtf8ToArray(value);
+      const encValue = await nodeCryptoFunctionService.aesEncrypt(
+        data.buffer,
+        iv.buffer,
+        key.buffer
+      );
+      const decValue = await nodeCryptoFunctionService.aesDecrypt(encValue, iv.buffer, key.buffer);
+      expect(Utils.fromBufferToUtf8(decValue)).toBe(value);
+    });
+  });
+
+  describe("aesDecryptFast", () => {
+    it("should successfully decrypt data", async () => {
+      const nodeCryptoFunctionService = new NodeCryptoFunctionService();
+      const iv = Utils.fromBufferToB64(makeStaticByteArray(16).buffer);
+      const symKey = new SymmetricCryptoKey(makeStaticByteArray(32).buffer);
+      const data = "ByUF8vhyX4ddU9gcooznwA==";
+      const params = nodeCryptoFunctionService.aesDecryptFastParameters(data, iv, null, symKey);
+      const decValue = await nodeCryptoFunctionService.aesDecryptFast(params);
+      expect(decValue).toBe("EncryptMe!");
+    });
+  });
+
+  describe("aesDecrypt", () => {
+    it("should successfully decrypt data", async () => {
+      const nodeCryptoFunctionService = new NodeCryptoFunctionService();
+      const iv = makeStaticByteArray(16);
+      const key = makeStaticByteArray(32);
+      const data = Utils.fromB64ToArray("ByUF8vhyX4ddU9gcooznwA==");
+      const decValue = await nodeCryptoFunctionService.aesDecrypt(
+        data.buffer,
+        iv.buffer,
+        key.buffer
+      );
+      expect(Utils.fromBufferToUtf8(decValue)).toBe("EncryptMe!");
+    });
+  });
+
+  describe("rsaEncrypt", () => {
+    it("should successfully encrypt and then decrypt data", async () => {
+      const nodeCryptoFunctionService = new NodeCryptoFunctionService();
+      const pubKey = Utils.fromB64ToArray(RsaPublicKey);
+      const privKey = Utils.fromB64ToArray(RsaPrivateKey);
+      const value = "EncryptMe!";
+      const data = Utils.fromUtf8ToArray(value);
+      const encValue = await nodeCryptoFunctionService.rsaEncrypt(
+        data.buffer,
+        pubKey.buffer,
+        "sha1"
+      );
+      const decValue = await nodeCryptoFunctionService.rsaDecrypt(encValue, privKey.buffer, "sha1");
+      expect(Utils.fromBufferToUtf8(decValue)).toBe(value);
+    });
+  });
+
+  describe("rsaDecrypt", () => {
+    it("should successfully decrypt data", async () => {
+      const nodeCryptoFunctionService = new NodeCryptoFunctionService();
+      const privKey = Utils.fromB64ToArray(RsaPrivateKey);
+      const data = Utils.fromB64ToArray(
+        "A1/p8BQzN9UrbdYxUY2Va5+kPLyfZXF9JsZrjeEXcaclsnHurdxVAJcnbEqYMP3UXV" +
+          "4YAS/mpf+Rxe6/X0WS1boQdA0MAHSgx95hIlAraZYpiMLLiJRKeo2u8YivCdTM9V5vuAEJwf9Tof/qFsFci3sApdbATkorCT" +
+          "zFOIEPF2S1zgperEP23M01mr4dWVdYN18B32YF67xdJHMbFhp5dkQwv9CmscoWq7OE5HIfOb+JAh7BEZb+CmKhM3yWJvoR/D" +
+          "/5jcercUtK2o+XrzNrL4UQ7yLZcFz6Bfwb/j6ICYvqd/YJwXNE6dwlL57OfwJyCdw2rRYf0/qI00t9u8Iitw=="
+      );
+      const decValue = await nodeCryptoFunctionService.rsaDecrypt(
+        data.buffer,
+        privKey.buffer,
+        "sha1"
+      );
+      expect(Utils.fromBufferToUtf8(decValue)).toBe("EncryptMe!");
+    });
+  });
+
+  describe("rsaExtractPublicKey", () => {
+    it("should successfully extract key", async () => {
+      const nodeCryptoFunctionService = new NodeCryptoFunctionService();
+      const privKey = Utils.fromB64ToArray(RsaPrivateKey);
+      const publicKey = await nodeCryptoFunctionService.rsaExtractPublicKey(privKey.buffer);
+      expect(Utils.fromBufferToB64(publicKey)).toBe(RsaPublicKey);
+    });
+  });
+
+  describe("rsaGenerateKeyPair", () => {
+    testRsaGenerateKeyPair(1024);
+    testRsaGenerateKeyPair(2048);
+
+    // Generating 4096 bit keys is really slow with Forge lib.
+    // Maybe move to something else if we ever want to generate keys of this size.
+    // testRsaGenerateKeyPair(4096);
+  });
+
+  describe("randomBytes", () => {
+    it("should make a value of the correct length", async () => {
+      const nodeCryptoFunctionService = new NodeCryptoFunctionService();
+      const randomData = await nodeCryptoFunctionService.randomBytes(16);
+      expect(randomData.byteLength).toBe(16);
+    });
+
+    it("should not make the same value twice", async () => {
+      const nodeCryptoFunctionService = new NodeCryptoFunctionService();
+      const randomData = await nodeCryptoFunctionService.randomBytes(16);
+      const randomData2 = await nodeCryptoFunctionService.randomBytes(16);
+      expect(
+        randomData.byteLength === randomData2.byteLength && randomData !== randomData2
+      ).toBeTruthy();
+    });
+  });
 });
 
-function testPbkdf2(algorithm: 'sha256' | 'sha512', regularKey: string, utf8Key: string, unicodeKey: string) {
-    const regularEmail = 'user@example.com';
-    const utf8Email = 'üser@example.com';
-
-    const regularPassword = 'password';
-    const utf8Password = 'pǻssword';
-    const unicodePassword = '😀password🙏';
-
-    it('should create valid ' + algorithm + ' key from regular input', async () => {
-        const cryptoFunctionService = new NodeCryptoFunctionService();
-        const key = await cryptoFunctionService.pbkdf2(regularPassword, regularEmail, algorithm, 5000);
-        expect(Utils.fromBufferToB64(key)).toBe(regularKey);
-    });
-
-    it('should create valid ' + algorithm + ' key from utf8 input', async () => {
-        const cryptoFunctionService = new NodeCryptoFunctionService();
-        const key = await cryptoFunctionService.pbkdf2(utf8Password, utf8Email, algorithm, 5000);
-        expect(Utils.fromBufferToB64(key)).toBe(utf8Key);
-    });
-
-    it('should create valid ' + algorithm + ' key from unicode input', async () => {
-        const cryptoFunctionService = new NodeCryptoFunctionService();
-        const key = await cryptoFunctionService.pbkdf2(unicodePassword, regularEmail, algorithm, 5000);
-        expect(Utils.fromBufferToB64(key)).toBe(unicodeKey);
-    });
-
-    it('should create valid ' + algorithm + ' key from array buffer input', async () => {
-        const cryptoFunctionService = new NodeCryptoFunctionService();
-        const key = await cryptoFunctionService.pbkdf2(Utils.fromUtf8ToArray(regularPassword).buffer,
-            Utils.fromUtf8ToArray(regularEmail).buffer, algorithm, 5000);
-        expect(Utils.fromBufferToB64(key)).toBe(regularKey);
-    });
+function testPbkdf2(
+  algorithm: "sha256" | "sha512",
+  regularKey: string,
+  utf8Key: string,
+  unicodeKey: string
+) {
+  const regularEmail = "user@example.com";
+  const utf8Email = "üser@example.com";
+
+  const regularPassword = "password";
+  const utf8Password = "pǻssword";
+  const unicodePassword = "😀password🙏";
+
+  it("should create valid " + algorithm + " key from regular input", async () => {
+    const cryptoFunctionService = new NodeCryptoFunctionService();
+    const key = await cryptoFunctionService.pbkdf2(regularPassword, regularEmail, algorithm, 5000);
+    expect(Utils.fromBufferToB64(key)).toBe(regularKey);
+  });
+
+  it("should create valid " + algorithm + " key from utf8 input", async () => {
+    const cryptoFunctionService = new NodeCryptoFunctionService();
+    const key = await cryptoFunctionService.pbkdf2(utf8Password, utf8Email, algorithm, 5000);
+    expect(Utils.fromBufferToB64(key)).toBe(utf8Key);
+  });
+
+  it("should create valid " + algorithm + " key from unicode input", async () => {
+    const cryptoFunctionService = new NodeCryptoFunctionService();
+    const key = await cryptoFunctionService.pbkdf2(unicodePassword, regularEmail, algorithm, 5000);
+    expect(Utils.fromBufferToB64(key)).toBe(unicodeKey);
+  });
+
+  it("should create valid " + algorithm + " key from array buffer input", async () => {
+    const cryptoFunctionService = new NodeCryptoFunctionService();
+    const key = await cryptoFunctionService.pbkdf2(
+      Utils.fromUtf8ToArray(regularPassword).buffer,
+      Utils.fromUtf8ToArray(regularEmail).buffer,
+      algorithm,
+      5000
+    );
+    expect(Utils.fromBufferToB64(key)).toBe(regularKey);
+  });
 }
 
-function testHkdf(algorithm: 'sha256' | 'sha512', regularKey: string, utf8Key: string, unicodeKey: string) {
-    const ikm = Utils.fromB64ToArray('criAmKtfzxanbgea5/kelQ==');
-
-    const regularSalt = 'salt';
-    const utf8Salt = 'üser_salt';
-    const unicodeSalt = '😀salt🙏';
-
-    const regularInfo = 'info';
-    const utf8Info = 'üser_info';
-    const unicodeInfo = '😀info🙏';
-
-    it('should create valid ' + algorithm + ' key from regular input', async () => {
-        const cryptoFunctionService = new NodeCryptoFunctionService();
-        const key = await cryptoFunctionService.hkdf(ikm, regularSalt, regularInfo, 32, algorithm);
-        expect(Utils.fromBufferToB64(key)).toBe(regularKey);
-    });
-
-    it('should create valid ' + algorithm + ' key from utf8 input', async () => {
-        const cryptoFunctionService = new NodeCryptoFunctionService();
-        const key = await cryptoFunctionService.hkdf(ikm, utf8Salt, utf8Info, 32, algorithm);
-        expect(Utils.fromBufferToB64(key)).toBe(utf8Key);
-    });
-
-    it('should create valid ' + algorithm + ' key from unicode input', async () => {
-        const cryptoFunctionService = new NodeCryptoFunctionService();
-        const key = await cryptoFunctionService.hkdf(ikm, unicodeSalt, unicodeInfo, 32, algorithm);
-        expect(Utils.fromBufferToB64(key)).toBe(unicodeKey);
-    });
-
-    it('should create valid ' + algorithm + ' key from array buffer input', async () => {
-        const cryptoFunctionService = new NodeCryptoFunctionService();
-        const key = await cryptoFunctionService.hkdf(ikm, Utils.fromUtf8ToArray(regularSalt).buffer,
-            Utils.fromUtf8ToArray(regularInfo).buffer, 32, algorithm);
-        expect(Utils.fromBufferToB64(key)).toBe(regularKey);
-    });
+function testHkdf(
+  algorithm: "sha256" | "sha512",
+  regularKey: string,
+  utf8Key: string,
+  unicodeKey: string
+) {
+  const ikm = Utils.fromB64ToArray("criAmKtfzxanbgea5/kelQ==");
+
+  const regularSalt = "salt";
+  const utf8Salt = "üser_salt";
+  const unicodeSalt = "😀salt🙏";
+
+  const regularInfo = "info";
+  const utf8Info = "üser_info";
+  const unicodeInfo = "😀info🙏";
+
+  it("should create valid " + algorithm + " key from regular input", async () => {
+    const cryptoFunctionService = new NodeCryptoFunctionService();
+    const key = await cryptoFunctionService.hkdf(ikm, regularSalt, regularInfo, 32, algorithm);
+    expect(Utils.fromBufferToB64(key)).toBe(regularKey);
+  });
+
+  it("should create valid " + algorithm + " key from utf8 input", async () => {
+    const cryptoFunctionService = new NodeCryptoFunctionService();
+    const key = await cryptoFunctionService.hkdf(ikm, utf8Salt, utf8Info, 32, algorithm);
+    expect(Utils.fromBufferToB64(key)).toBe(utf8Key);
+  });
+
+  it("should create valid " + algorithm + " key from unicode input", async () => {
+    const cryptoFunctionService = new NodeCryptoFunctionService();
+    const key = await cryptoFunctionService.hkdf(ikm, unicodeSalt, unicodeInfo, 32, algorithm);
+    expect(Utils.fromBufferToB64(key)).toBe(unicodeKey);
+  });
+
+  it("should create valid " + algorithm + " key from array buffer input", async () => {
+    const cryptoFunctionService = new NodeCryptoFunctionService();
+    const key = await cryptoFunctionService.hkdf(
+      ikm,
+      Utils.fromUtf8ToArray(regularSalt).buffer,
+      Utils.fromUtf8ToArray(regularInfo).buffer,
+      32,
+      algorithm
+    );
+    expect(Utils.fromBufferToB64(key)).toBe(regularKey);
+  });
 }
 
-function testHkdfExpand(algorithm: 'sha256' | 'sha512', b64prk: string, outputByteSize: number,
-    b64ExpectedOkm: string) {
-    const info = 'info';
-
-    it('should create valid ' + algorithm + ' ' + outputByteSize + ' byte okm', async () => {
-        const cryptoFunctionService = new NodeCryptoFunctionService();
-        const okm = await cryptoFunctionService.hkdfExpand(Utils.fromB64ToArray(b64prk), info, outputByteSize,
-            algorithm);
-        expect(Utils.fromBufferToB64(okm)).toBe(b64ExpectedOkm);
-    });
+function testHkdfExpand(
+  algorithm: "sha256" | "sha512",
+  b64prk: string,
+  outputByteSize: number,
+  b64ExpectedOkm: string
+) {
+  const info = "info";
+
+  it("should create valid " + algorithm + " " + outputByteSize + " byte okm", async () => {
+    const cryptoFunctionService = new NodeCryptoFunctionService();
+    const okm = await cryptoFunctionService.hkdfExpand(
+      Utils.fromB64ToArray(b64prk),
+      info,
+      outputByteSize,
+      algorithm
+    );
+    expect(Utils.fromBufferToB64(okm)).toBe(b64ExpectedOkm);
+  });
 }
 
-function testHash(algorithm: 'sha1' | 'sha256' | 'sha512' | 'md5', regularHash: string,
-    utf8Hash: string, unicodeHash: string) {
-    const regularValue = 'HashMe!!';
-    const utf8Value = 'HǻshMe!!';
-    const unicodeValue = '😀HashMe!!!🙏';
-
-    it('should create valid ' + algorithm + ' hash from regular input', async () => {
-        const cryptoFunctionService = new NodeCryptoFunctionService();
-        const hash = await cryptoFunctionService.hash(regularValue, algorithm);
-        expect(Utils.fromBufferToHex(hash)).toBe(regularHash);
-    });
-
-    it('should create valid ' + algorithm + ' hash from utf8 input', async () => {
-        const cryptoFunctionService = new NodeCryptoFunctionService();
-        const hash = await cryptoFunctionService.hash(utf8Value, algorithm);
-        expect(Utils.fromBufferToHex(hash)).toBe(utf8Hash);
-    });
-
-    it('should create valid ' + algorithm + ' hash from unicode input', async () => {
-        const cryptoFunctionService = new NodeCryptoFunctionService();
-        const hash = await cryptoFunctionService.hash(unicodeValue, algorithm);
-        expect(Utils.fromBufferToHex(hash)).toBe(unicodeHash);
-    });
-
-    it('should create valid ' + algorithm + ' hash from array buffer input', async () => {
-        const cryptoFunctionService = new NodeCryptoFunctionService();
-        const hash = await cryptoFunctionService.hash(Utils.fromUtf8ToArray(regularValue).buffer, algorithm);
-        expect(Utils.fromBufferToHex(hash)).toBe(regularHash);
-    });
+function testHash(
+  algorithm: "sha1" | "sha256" | "sha512" | "md5",
+  regularHash: string,
+  utf8Hash: string,
+  unicodeHash: string
+) {
+  const regularValue = "HashMe!!";
+  const utf8Value = "HǻshMe!!";
+  const unicodeValue = "😀HashMe!!!🙏";
+
+  it("should create valid " + algorithm + " hash from regular input", async () => {
+    const cryptoFunctionService = new NodeCryptoFunctionService();
+    const hash = await cryptoFunctionService.hash(regularValue, algorithm);
+    expect(Utils.fromBufferToHex(hash)).toBe(regularHash);
+  });
+
+  it("should create valid " + algorithm + " hash from utf8 input", async () => {
+    const cryptoFunctionService = new NodeCryptoFunctionService();
+    const hash = await cryptoFunctionService.hash(utf8Value, algorithm);
+    expect(Utils.fromBufferToHex(hash)).toBe(utf8Hash);
+  });
+
+  it("should create valid " + algorithm + " hash from unicode input", async () => {
+    const cryptoFunctionService = new NodeCryptoFunctionService();
+    const hash = await cryptoFunctionService.hash(unicodeValue, algorithm);
+    expect(Utils.fromBufferToHex(hash)).toBe(unicodeHash);
+  });
+
+  it("should create valid " + algorithm + " hash from array buffer input", async () => {
+    const cryptoFunctionService = new NodeCryptoFunctionService();
+    const hash = await cryptoFunctionService.hash(
+      Utils.fromUtf8ToArray(regularValue).buffer,
+      algorithm
+    );
+    expect(Utils.fromBufferToHex(hash)).toBe(regularHash);
+  });
 }
 
-function testHmac(algorithm: 'sha1' | 'sha256' | 'sha512', mac: string, fast = false) {
-    it('should create valid ' + algorithm + ' hmac', async () => {
-        const cryptoFunctionService = new NodeCryptoFunctionService();
-        const value = Utils.fromUtf8ToArray('SignMe!!').buffer;
-        const key = Utils.fromUtf8ToArray('secretkey').buffer;
-        let computedMac: ArrayBuffer = null;
-        if (fast) {
-            computedMac = await cryptoFunctionService.hmacFast(value, key, algorithm);
-        } else {
-            computedMac = await cryptoFunctionService.hmac(value, key, algorithm);
-        }
-        expect(Utils.fromBufferToHex(computedMac)).toBe(mac);
-    });
+function testHmac(algorithm: "sha1" | "sha256" | "sha512", mac: string, fast = false) {
+  it("should create valid " + algorithm + " hmac", async () => {
+    const cryptoFunctionService = new NodeCryptoFunctionService();
+    const value = Utils.fromUtf8ToArray("SignMe!!").buffer;
+    const key = Utils.fromUtf8ToArray("secretkey").buffer;
+    let computedMac: ArrayBuffer = null;
+    if (fast) {
+      computedMac = await cryptoFunctionService.hmacFast(value, key, algorithm);
+    } else {
+      computedMac = await cryptoFunctionService.hmac(value, key, algorithm);
+    }
+    expect(Utils.fromBufferToHex(computedMac)).toBe(mac);
+  });
 }
 
 function testCompare(fast = false) {
-    it('should successfully compare two of the same values', async () => {
-        const cryptoFunctionService = new NodeCryptoFunctionService();
-        const a = new Uint8Array(2);
-        a[0] = 1;
-        a[1] = 2;
-        const equal = fast ? await cryptoFunctionService.compareFast(a.buffer, a.buffer) :
-            await cryptoFunctionService.compare(a.buffer, a.buffer);
-        expect(equal).toBe(true);
-    });
-
-    it('should successfully compare two different values of the same length', async () => {
-        const cryptoFunctionService = new NodeCryptoFunctionService();
-        const a = new Uint8Array(2);
-        a[0] = 1;
-        a[1] = 2;
-        const b = new Uint8Array(2);
-        b[0] = 3;
-        b[1] = 4;
-        const equal = fast ? await cryptoFunctionService.compareFast(a.buffer, b.buffer) :
-            await cryptoFunctionService.compare(a.buffer, b.buffer);
-        expect(equal).toBe(false);
-    });
-
-    it('should successfully compare two different values of different lengths', async () => {
-        const cryptoFunctionService = new NodeCryptoFunctionService();
-        const a = new Uint8Array(2);
-        a[0] = 1;
-        a[1] = 2;
-        const b = new Uint8Array(2);
-        b[0] = 3;
-        const equal = fast ? await cryptoFunctionService.compareFast(a.buffer, b.buffer) :
-            await cryptoFunctionService.compare(a.buffer, b.buffer);
-        expect(equal).toBe(false);
-    });
+  it("should successfully compare two of the same values", async () => {
+    const cryptoFunctionService = new NodeCryptoFunctionService();
+    const a = new Uint8Array(2);
+    a[0] = 1;
+    a[1] = 2;
+    const equal = fast
+      ? await cryptoFunctionService.compareFast(a.buffer, a.buffer)
+      : await cryptoFunctionService.compare(a.buffer, a.buffer);
+    expect(equal).toBe(true);
+  });
+
+  it("should successfully compare two different values of the same length", async () => {
+    const cryptoFunctionService = new NodeCryptoFunctionService();
+    const a = new Uint8Array(2);
+    a[0] = 1;
+    a[1] = 2;
+    const b = new Uint8Array(2);
+    b[0] = 3;
+    b[1] = 4;
+    const equal = fast
+      ? await cryptoFunctionService.compareFast(a.buffer, b.buffer)
+      : await cryptoFunctionService.compare(a.buffer, b.buffer);
+    expect(equal).toBe(false);
+  });
+
+  it("should successfully compare two different values of different lengths", async () => {
+    const cryptoFunctionService = new NodeCryptoFunctionService();
+    const a = new Uint8Array(2);
+    a[0] = 1;
+    a[1] = 2;
+    const b = new Uint8Array(2);
+    b[0] = 3;
+    const equal = fast
+      ? await cryptoFunctionService.compareFast(a.buffer, b.buffer)
+      : await cryptoFunctionService.compare(a.buffer, b.buffer);
+    expect(equal).toBe(false);
+  });
 }
 
 function testRsaGenerateKeyPair(length: 1024 | 2048 | 4096) {
-    it('should successfully generate a ' + length + ' bit key pair', async () => {
-        const cryptoFunctionService = new NodeCryptoFunctionService();
-        const keyPair = await cryptoFunctionService.rsaGenerateKeyPair(length);
-        expect(keyPair[0] == null || keyPair[1] == null).toBe(false);
-        const publicKey = await cryptoFunctionService.rsaExtractPublicKey(keyPair[1]);
-        expect(Utils.fromBufferToB64(keyPair[0])).toBe(Utils.fromBufferToB64(publicKey));
-    }, 30000);
+  it(
+    "should successfully generate a " + length + " bit key pair",
+    async () => {
+      const cryptoFunctionService = new NodeCryptoFunctionService();
+      const keyPair = await cryptoFunctionService.rsaGenerateKeyPair(length);
+      expect(keyPair[0] == null || keyPair[1] == null).toBe(false);
+      const publicKey = await cryptoFunctionService.rsaExtractPublicKey(keyPair[1]);
+      expect(Utils.fromBufferToB64(keyPair[0])).toBe(Utils.fromBufferToB64(publicKey));
+    },
+    30000
+  );
 }
 
 function makeStaticByteArray(length: number) {
-    const arr = new Uint8Array(length);
-    for (let i = 0; i < length; i++) {
-        arr[i] = i;
-    }
-    return arr;
+  const arr = new Uint8Array(length);
+  for (let i = 0; i < length; i++) {
+    arr[i] = i;
+  }
+  return arr;
 }
diff --git a/jslib/spec/support/jasmine.json b/jslib/spec/support/jasmine.json
index 96a0fe21..9a91e2f0 100644
--- a/jslib/spec/support/jasmine.json
+++ b/jslib/spec/support/jasmine.json
@@ -1,13 +1,7 @@
 {
-  "spec_dir": "dist/spec",
-  "spec_files": [
-    "common/**/*[sS]pec.js",
-    "node/**/*[sS]pec.js",
-    "electron/**/*[sS]pec.js"
-  ],
-  "helpers": [
-    "helpers.js"
-  ],
+  "spec_dir": "spec",
+  "spec_files": ["common/**/*[sS]pec.ts", "node/**/*[sS]pec.ts", "electron/**/*[sS]pec.ts"],
+  "helpers": ["helpers.ts"],
   "stopSpecOnExpectationFailure": false,
   "random": true
 }
diff --git a/jslib/spec/support/karma.conf.js b/jslib/spec/support/karma.conf.js
index 471a3b07..3b5baa28 100644
--- a/jslib/spec/support/karma.conf.js
+++ b/jslib/spec/support/karma.conf.js
@@ -1,98 +1,98 @@
 module.exports = (config) => {
-    config.set({
-        // base path that will be used to resolve all patterns (eg. files, exclude)
-        basePath: '../../',
+  config.set({
+    // base path that will be used to resolve all patterns (eg. files, exclude)
+    basePath: "../../",
 
-        // frameworks to use
-        // available frameworks: https://npmjs.org/browse/keyword/karma-adapter
-        frameworks: ['jasmine', 'detectBrowsers'],
+    // frameworks to use
+    // available frameworks: https://npmjs.org/browse/keyword/karma-adapter
+    frameworks: ["jasmine", "detectBrowsers"],
 
-        // list of files / patterns to load in the browser
-        files: [
-            { pattern: 'spec/utils.ts', watched: false },
-            { pattern: 'spec/common/**/*.ts', watched: false },
-            { pattern: 'spec/web/**/*.ts', watched: false },
-        ],
+    // list of files / patterns to load in the browser
+    files: [
+      { pattern: "spec/utils.ts", watched: false },
+      { pattern: "spec/common/**/*.ts", watched: false },
+      { pattern: "spec/web/**/*.ts", watched: false },
+    ],
 
-        // list of files to exclude
-        exclude: [
-        ],
+    // list of files to exclude
+    exclude: [],
 
-        // preprocess matching files before serving them to the browser
-        // available preprocessors: https://npmjs.org/browse/keyword/karma-preprocessor
-        preprocessors: {
-            'spec/**/*.ts': 'webpack'
-        },
+    // preprocess matching files before serving them to the browser
+    // available preprocessors: https://npmjs.org/browse/keyword/karma-preprocessor
+    preprocessors: {
+      "spec/**/*.ts": "webpack",
+    },
 
-        // test results reporter to use
-        // possible values: 'dots', 'progress'
-        // available reporters: https://npmjs.org/browse/keyword/karma-reporter
-        reporters: ['progress', 'kjhtml'],
+    // test results reporter to use
+    // possible values: 'dots', 'progress'
+    // available reporters: https://npmjs.org/browse/keyword/karma-reporter
+    reporters: ["progress", "kjhtml"],
 
-        // web server port
-        port: 9876,
+    // web server port
+    port: 9876,
 
-        // enable / disable colors in the output (reporters and logs)
-        colors: true,
+    // enable / disable colors in the output (reporters and logs)
+    colors: true,
 
-        // level of logging
-        // possible values: config.LOG_DISABLE || config.LOG_ERROR || config.LOG_WARN || config.LOG_INFO || config.LOG_DEBUG
-        logLevel: config.LOG_INFO,
+    // level of logging
+    // possible values: config.LOG_DISABLE || config.LOG_ERROR || config.LOG_WARN || config.LOG_INFO || config.LOG_DEBUG
+    logLevel: config.LOG_INFO,
 
-        // Concurrency level
-        // how many browser should be started simultaneous
-        concurrency: Infinity,
+    // Concurrency level
+    // how many browser should be started simultaneous
+    concurrency: Infinity,
 
-        client: {
-            clearContext: false // leave Jasmine Spec Runner output visible in browser
-        },
+    client: {
+      clearContext: false, // leave Jasmine Spec Runner output visible in browser
+    },
 
-        webpack: {
-            resolve: {
-                extensions: ['.js', '.ts', '.tsx'],
-            },
-            module: {
-                rules: [
-                    {
-                        test: /\.tsx?$/,
-                        loader: 'ts-loader',
-                        options: {
-                            compiler: 'ttypescript'
-                        },
-                    },
-                ],
+    webpack: {
+      resolve: {
+        extensions: [".js", ".ts", ".tsx"],
+      },
+      module: {
+        rules: [
+          {
+            test: /\.tsx?$/,
+            loader: "ts-loader",
+            options: {
+              compiler: "ttypescript",
             },
-            stats: {
-                colors: true,
-                modules: true,
-                reasons: true,
-                errorDetails: true,
-            },
-            devtool: 'inline-source-map',
-        },
+          },
+        ],
+      },
+      stats: {
+        colors: true,
+        modules: true,
+        reasons: true,
+        errorDetails: true,
+      },
+      devtool: "inline-source-map",
+    },
 
-        detectBrowsers: {
-            usePhantomJS: false,
-            postDetection: (availableBrowsers) => {
-                const result = availableBrowsers;
-                function removeBrowser(browser) {
-                    if (availableBrowsers.length > 1 && availableBrowsers.indexOf(browser) > -1) {
-                        result.splice(result.indexOf(browser), 1);
-                    }
-                }
+    detectBrowsers: {
+      usePhantomJS: false,
+      postDetection: (availableBrowsers) => {
+        const result = availableBrowsers;
+        function removeBrowser(browser) {
+          if (availableBrowsers.length > 1 && availableBrowsers.indexOf(browser) > -1) {
+            result.splice(result.indexOf(browser), 1);
+          }
+        }
 
-                removeBrowser('IE');
-                removeBrowser('Opera');
-                removeBrowser('SafariTechPreview');
+        removeBrowser("IE");
+        removeBrowser("Opera");
+        removeBrowser("SafariTechPreview");
 
-                var githubAction = process.env.GITHUB_WORKFLOW != null && process.env.GITHUB_WORKFLOW !== '';
-                if (githubAction) {
-                    removeBrowser('Firefox');
-                    removeBrowser('Safari');
-                }
+        var githubAction =
+          process.env.GITHUB_WORKFLOW != null && process.env.GITHUB_WORKFLOW !== "";
+        if (githubAction) {
+          removeBrowser("Firefox");
+          removeBrowser("Safari");
+        }
 
-                return result;
-            }
-        },
-    })
-}
+        return result;
+      },
+    },
+  });
+};
diff --git a/jslib/spec/utils.ts b/jslib/spec/utils.ts
index 4df925ed..00cdcd3f 100644
--- a/jslib/spec/utils.ts
+++ b/jslib/spec/utils.ts
@@ -1,16 +1,19 @@
 function newGuid() {
-    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {
-        // tslint:disable:no-bitwise
-        const r = Math.random() * 16 | 0;
-        const v = c === 'x' ? r : (r & 0x3 | 0x8);
-        return v.toString(16);
-    });
+  return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, (c) => {
+    // tslint:disable:no-bitwise
+    const r = (Math.random() * 16) | 0;
+    const v = c === "x" ? r : (r & 0x3) | 0x8;
+    return v.toString(16);
+  });
 }
 
-export function GetUniqueString(prefix: string = '') {
-    return prefix + '_' + newGuid();
+export function GetUniqueString(prefix: string = "") {
+  return prefix + "_" + newGuid();
 }
 
-export function BuildTestObject<T, K extends keyof T = keyof T>(def: Partial<Pick<T, K>> | T, constructor?: (new () => T)): T {
-    return Object.assign(constructor === null ? {} : new constructor(), def) as T;
+export function BuildTestObject<T, K extends keyof T = keyof T>(
+  def: Partial<Pick<T, K>> | T,
+  constructor?: new () => T
+): T {
+  return Object.assign(constructor === null ? {} : new constructor(), def) as T;
 }
diff --git a/jslib/spec/web/services/webCryptoFunction.service.spec.ts b/jslib/spec/web/services/webCryptoFunction.service.spec.ts
index 28d1082e..88ea3c0d 100644
--- a/jslib/spec/web/services/webCryptoFunction.service.spec.ts
+++ b/jslib/spec/web/services/webCryptoFunction.service.spec.ts
@@ -1,484 +1,567 @@
-import Substitute from '@fluffy-spoon/substitute';
-
-import { PlatformUtilsService } from 'jslib-common/abstractions/platformUtils.service';
-
-import { WebCryptoFunctionService } from 'jslib-common/services/webCryptoFunction.service';
-
-import { Utils } from 'jslib-common/misc/utils';
-import { SymmetricCryptoKey } from 'jslib-common/models/domain/symmetricCryptoKey';
-
-const RsaPublicKey = 'MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAl0Vawl/toXzkEvB82FEtqHP' +
-    '4xlU2ab/v0crqIfXfIoWF/XXdHGIdrZeilnRXPPJT1B9dTsasttEZNnua/0Rek/cjNDHtzT52irfoZYS7X6HNIfOi54Q+egP' +
-    'RQ1H7iNHVZz3K8Db9GCSKPeC8MbW6gVCzb15esCe1gGzg6wkMuWYDFYPoh/oBqcIqrGah7firqB1nDedzEjw32heP2DAffVN' +
-    '084iTDjiWrJNUxBJ2pDD5Z9dT3MzQ2s09ew1yMWK2z37rT3YerC7OgEDmo3WYo3xL3qYJznu3EO2nmrYjiRa40wKSjxsTlUc' +
-    'xDF+F0uMW8oR9EMUHgepdepfAtLsSAQIDAQAB';
-const RsaPrivateKey = 'MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQCXRVrCX+2hfOQS8Hz' +
-    'YUS2oc/jGVTZpv+/Ryuoh9d8ihYX9dd0cYh2tl6KWdFc88lPUH11Oxqy20Rk2e5r/RF6T9yM0Me3NPnaKt+hlhLtfoc0h86L' +
-    'nhD56A9FDUfuI0dVnPcrwNv0YJIo94LwxtbqBULNvXl6wJ7WAbODrCQy5ZgMVg+iH+gGpwiqsZqHt+KuoHWcN53MSPDfaF4/' +
-    'YMB99U3TziJMOOJask1TEEnakMPln11PczNDazT17DXIxYrbPfutPdh6sLs6AQOajdZijfEvepgnOe7cQ7aeatiOJFrjTApK' +
-    'PGxOVRzEMX4XS4xbyhH0QxQeB6l16l8C0uxIBAgMBAAECggEASaWfeVDA3cVzOPFSpvJm20OTE+R6uGOU+7vh36TX/POq92q' +
-    'Buwbd0h0oMD32FxsXywd2IxtBDUSiFM9699qufTVuM0Q3tZw6lHDTOVG08+tPdr8qSbMtw7PGFxN79fHLBxejjO4IrM9lapj' +
-    'WpxEF+11x7r+wM+0xRZQ8sNFYG46aPfIaty4BGbL0I2DQ2y8I57iBCAy69eht59NLMm27fRWGJIWCuBIjlpfzET1j2HLXUIh' +
-    '5bTBNzqaN039WH49HczGE3mQKVEJZc/efk3HaVd0a1Sjzyn0QY+N1jtZN3jTRbuDWA1AknkX1LX/0tUhuS3/7C3ejHxjw4Dk' +
-    '1ZLo5/QKBgQDIWvqFn0+IKRSu6Ua2hDsufIHHUNLelbfLUMmFthxabcUn4zlvIscJO00Tq/ezopSRRvbGiqnxjv/mYxucvOU' +
-    'BeZtlus0Q9RTACBtw9TGoNTmQbEunJ2FOSlqbQxkBBAjgGEppRPt30iGj/VjAhCATq2MYOa/X4dVR51BqQAFIEwKBgQDBSIf' +
-    'TFKC/hDk6FKZlgwvupWYJyU9RkyfstPErZFmzoKhPkQ3YORo2oeAYmVUbS9I2iIYpYpYQJHX8jMuCbCz4ONxTCuSIXYQYUcU' +
-    'q4PglCKp31xBAE6TN8SvhfME9/MvuDssnQinAHuF0GDAhF646T3LLS1not6Vszv7brwSoGwKBgQC88v/8cGfi80ssQZeMnVv' +
-    'q1UTXIeQcQnoY5lGHJl3K8mbS3TnXE6c9j417Fdz+rj8KWzBzwWXQB5pSPflWcdZO886Xu/mVGmy9RWgLuVFhXwCwsVEPjNX' +
-    '5ramRb0/vY0yzenUCninBsIxFSbIfrPtLUYCc4hpxr+sr2Mg/y6jpvQKBgBezMRRs3xkcuXepuI2R+BCXL1/b02IJTUf1F+1' +
-    'eLLGd7YV0H+J3fgNc7gGWK51hOrF9JBZHBGeOUPlaukmPwiPdtQZpu4QNE3l37VlIpKTF30E6mb+BqR+nht3rUjarnMXgAoE' +
-    'Z18y6/KIjpSMpqC92Nnk/EBM9EYe6Cf4eA9ApAoGAeqEUg46UTlJySkBKURGpIs3v1kkf5I0X8DnOhwb+HPxNaiEdmO7ckm8' +
-    '+tPVgppLcG0+tMdLjigFQiDUQk2y3WjyxP5ZvXu7U96jaJRI8PFMoE06WeVYcdIzrID2HvqH+w0UQJFrLJ/0Mn4stFAEzXKZ' +
-    'BokBGnjFnTnKcs7nv/O8=';
-
-const Sha1Mac = '4d4c223f95dc577b665ec4ccbcb680b80a397038';
-const Sha256Mac = '6be3caa84922e12aaaaa2f16c40d44433bb081ef323db584eb616333ab4e874f';
-const Sha512Mac = '21910e341fa12106ca35758a2285374509326c9fbe0bd64e7b99c898f841dc948c58ce66d3504d8883c' +
-    '5ea7817a0b7c5d4d9b00364ccd214669131fc17fe4aca';
-
-describe('WebCrypto Function Service', () => {
-    describe('pbkdf2', () => {
-        const regular256Key = 'pj9prw/OHPleXI6bRdmlaD+saJS4awrMiQsQiDjeu2I=';
-        const utf8256Key = 'yqvoFXgMRmHR3QPYr5pyR4uVuoHkltv9aHUP63p8n7I=';
-        const unicode256Key = 'ZdeOata6xoRpB4DLp8zHhXz5kLmkWtX5pd+TdRH8w8w=';
-
-        const regular512Key = 'liTi/Ke8LPU1Qv+Vl7NGEVt/XMbsBVJ2kQxtVG/Z1/JFHFKQW3ZkI81qVlwTiCpb+cFXzs+57' +
-            'eyhhx5wfKo5Cg==';
-        const utf8512Key = 'df0KdvIBeCzD/kyXptwQohaqUa4e7IyFUyhFQjXCANu5T+scq55hCcE4dG4T/MhAk2exw8j7ixRN' +
-            'zXANiVZpnw==';
-        const unicode512Key = 'FE+AnUJaxv8jh+zUDtZz4mjjcYk0/PZDZm+SLJe3XtxtnpdqqpblX6JjuMZt/dYYNMOrb2+mD' +
-            'L3FiQDTROh1lg==';
-
-        testPbkdf2('sha256', regular256Key, utf8256Key, unicode256Key);
-        testPbkdf2('sha512', regular512Key, utf8512Key, unicode512Key);
+import Substitute from "@fluffy-spoon/substitute";
+
+import { PlatformUtilsService } from "jslib-common/abstractions/platformUtils.service";
+
+import { WebCryptoFunctionService } from "jslib-common/services/webCryptoFunction.service";
+
+import { Utils } from "jslib-common/misc/utils";
+import { SymmetricCryptoKey } from "jslib-common/models/domain/symmetricCryptoKey";
+
+const RsaPublicKey =
+  "MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAl0Vawl/toXzkEvB82FEtqHP" +
+  "4xlU2ab/v0crqIfXfIoWF/XXdHGIdrZeilnRXPPJT1B9dTsasttEZNnua/0Rek/cjNDHtzT52irfoZYS7X6HNIfOi54Q+egP" +
+  "RQ1H7iNHVZz3K8Db9GCSKPeC8MbW6gVCzb15esCe1gGzg6wkMuWYDFYPoh/oBqcIqrGah7firqB1nDedzEjw32heP2DAffVN" +
+  "084iTDjiWrJNUxBJ2pDD5Z9dT3MzQ2s09ew1yMWK2z37rT3YerC7OgEDmo3WYo3xL3qYJznu3EO2nmrYjiRa40wKSjxsTlUc" +
+  "xDF+F0uMW8oR9EMUHgepdepfAtLsSAQIDAQAB";
+const RsaPrivateKey =
+  "MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQCXRVrCX+2hfOQS8Hz" +
+  "YUS2oc/jGVTZpv+/Ryuoh9d8ihYX9dd0cYh2tl6KWdFc88lPUH11Oxqy20Rk2e5r/RF6T9yM0Me3NPnaKt+hlhLtfoc0h86L" +
+  "nhD56A9FDUfuI0dVnPcrwNv0YJIo94LwxtbqBULNvXl6wJ7WAbODrCQy5ZgMVg+iH+gGpwiqsZqHt+KuoHWcN53MSPDfaF4/" +
+  "YMB99U3TziJMOOJask1TEEnakMPln11PczNDazT17DXIxYrbPfutPdh6sLs6AQOajdZijfEvepgnOe7cQ7aeatiOJFrjTApK" +
+  "PGxOVRzEMX4XS4xbyhH0QxQeB6l16l8C0uxIBAgMBAAECggEASaWfeVDA3cVzOPFSpvJm20OTE+R6uGOU+7vh36TX/POq92q" +
+  "Buwbd0h0oMD32FxsXywd2IxtBDUSiFM9699qufTVuM0Q3tZw6lHDTOVG08+tPdr8qSbMtw7PGFxN79fHLBxejjO4IrM9lapj" +
+  "WpxEF+11x7r+wM+0xRZQ8sNFYG46aPfIaty4BGbL0I2DQ2y8I57iBCAy69eht59NLMm27fRWGJIWCuBIjlpfzET1j2HLXUIh" +
+  "5bTBNzqaN039WH49HczGE3mQKVEJZc/efk3HaVd0a1Sjzyn0QY+N1jtZN3jTRbuDWA1AknkX1LX/0tUhuS3/7C3ejHxjw4Dk" +
+  "1ZLo5/QKBgQDIWvqFn0+IKRSu6Ua2hDsufIHHUNLelbfLUMmFthxabcUn4zlvIscJO00Tq/ezopSRRvbGiqnxjv/mYxucvOU" +
+  "BeZtlus0Q9RTACBtw9TGoNTmQbEunJ2FOSlqbQxkBBAjgGEppRPt30iGj/VjAhCATq2MYOa/X4dVR51BqQAFIEwKBgQDBSIf" +
+  "TFKC/hDk6FKZlgwvupWYJyU9RkyfstPErZFmzoKhPkQ3YORo2oeAYmVUbS9I2iIYpYpYQJHX8jMuCbCz4ONxTCuSIXYQYUcU" +
+  "q4PglCKp31xBAE6TN8SvhfME9/MvuDssnQinAHuF0GDAhF646T3LLS1not6Vszv7brwSoGwKBgQC88v/8cGfi80ssQZeMnVv" +
+  "q1UTXIeQcQnoY5lGHJl3K8mbS3TnXE6c9j417Fdz+rj8KWzBzwWXQB5pSPflWcdZO886Xu/mVGmy9RWgLuVFhXwCwsVEPjNX" +
+  "5ramRb0/vY0yzenUCninBsIxFSbIfrPtLUYCc4hpxr+sr2Mg/y6jpvQKBgBezMRRs3xkcuXepuI2R+BCXL1/b02IJTUf1F+1" +
+  "eLLGd7YV0H+J3fgNc7gGWK51hOrF9JBZHBGeOUPlaukmPwiPdtQZpu4QNE3l37VlIpKTF30E6mb+BqR+nht3rUjarnMXgAoE" +
+  "Z18y6/KIjpSMpqC92Nnk/EBM9EYe6Cf4eA9ApAoGAeqEUg46UTlJySkBKURGpIs3v1kkf5I0X8DnOhwb+HPxNaiEdmO7ckm8" +
+  "+tPVgppLcG0+tMdLjigFQiDUQk2y3WjyxP5ZvXu7U96jaJRI8PFMoE06WeVYcdIzrID2HvqH+w0UQJFrLJ/0Mn4stFAEzXKZ" +
+  "BokBGnjFnTnKcs7nv/O8=";
+
+const Sha1Mac = "4d4c223f95dc577b665ec4ccbcb680b80a397038";
+const Sha256Mac = "6be3caa84922e12aaaaa2f16c40d44433bb081ef323db584eb616333ab4e874f";
+const Sha512Mac =
+  "21910e341fa12106ca35758a2285374509326c9fbe0bd64e7b99c898f841dc948c58ce66d3504d8883c" +
+  "5ea7817a0b7c5d4d9b00364ccd214669131fc17fe4aca";
+
+describe("WebCrypto Function Service", () => {
+  describe("pbkdf2", () => {
+    const regular256Key = "pj9prw/OHPleXI6bRdmlaD+saJS4awrMiQsQiDjeu2I=";
+    const utf8256Key = "yqvoFXgMRmHR3QPYr5pyR4uVuoHkltv9aHUP63p8n7I=";
+    const unicode256Key = "ZdeOata6xoRpB4DLp8zHhXz5kLmkWtX5pd+TdRH8w8w=";
+
+    const regular512Key =
+      "liTi/Ke8LPU1Qv+Vl7NGEVt/XMbsBVJ2kQxtVG/Z1/JFHFKQW3ZkI81qVlwTiCpb+cFXzs+57" +
+      "eyhhx5wfKo5Cg==";
+    const utf8512Key =
+      "df0KdvIBeCzD/kyXptwQohaqUa4e7IyFUyhFQjXCANu5T+scq55hCcE4dG4T/MhAk2exw8j7ixRN" +
+      "zXANiVZpnw==";
+    const unicode512Key =
+      "FE+AnUJaxv8jh+zUDtZz4mjjcYk0/PZDZm+SLJe3XtxtnpdqqpblX6JjuMZt/dYYNMOrb2+mD" +
+      "L3FiQDTROh1lg==";
+
+    testPbkdf2("sha256", regular256Key, utf8256Key, unicode256Key);
+    testPbkdf2("sha512", regular512Key, utf8512Key, unicode512Key);
+  });
+
+  describe("hkdf", () => {
+    const regular256Key = "qBUmEYtwTwwGPuw/z6bs/qYXXYNUlocFlyAuuANI8Pw=";
+    const utf8256Key = "6DfJwW1R3txgiZKkIFTvVAb7qVlG7lKcmJGJoxR2GBU=";
+    const unicode256Key = "gejGI82xthA+nKtKmIh82kjw+ttHr+ODsUoGdu5sf0A=";
+
+    const regular512Key = "xe5cIG6ZfwGmb1FvsOedM0XKOm21myZkjL/eDeKIqqM=";
+    const utf8512Key = "XQMVBnxVEhlvjSFDQc77j5GDE9aorvbS0vKnjhRg0LY=";
+    const unicode512Key = "148GImrTbrjaGAe/iWEpclINM8Ehhko+9lB14+52lqc=";
+
+    testHkdf("sha256", regular256Key, utf8256Key, unicode256Key);
+    testHkdf("sha512", regular512Key, utf8512Key, unicode512Key);
+  });
+
+  describe("hkdfExpand", () => {
+    const prk16Byte = "criAmKtfzxanbgea5/kelQ==";
+    const prk32Byte = "F5h4KdYQnIVH4rKH0P9CZb1GrR4n16/sJrS0PsQEn0Y=";
+    const prk64Byte =
+      "ssBK0mRG17VHdtsgt8yo4v25CRNpauH+0r2fwY/E9rLyaFBAOMbIeTry+" +
+      "gUJ28p8y+hFh3EI9pcrEWaNvFYonQ==";
+
+    testHkdfExpand("sha256", prk32Byte, 32, "BnIqJlfnHm0e/2iB/15cbHyR19ARPIcWRp4oNS22CD8=");
+    testHkdfExpand(
+      "sha256",
+      prk32Byte,
+      64,
+      "BnIqJlfnHm0e/2iB/15cbHyR19ARPIcWRp4oNS22CD9BV+" +
+        "/queOZenPNkDhmlVyL2WZ3OSU5+7ISNF5NhNfvZA=="
+    );
+    testHkdfExpand("sha512", prk64Byte, 32, "uLWbMWodSBms5uGJ5WTRTesyW+MD7nlpCZvagvIRXlk=");
+    testHkdfExpand(
+      "sha512",
+      prk64Byte,
+      64,
+      "uLWbMWodSBms5uGJ5WTRTesyW+MD7nlpCZvagvIRXlkY5Pv0sB+" +
+        "MqvaopmkC6sD/j89zDwTV9Ib2fpucUydO8w=="
+    );
+
+    it("should fail with prk too small", async () => {
+      const cryptoFunctionService = getWebCryptoFunctionService();
+      const f = cryptoFunctionService.hkdfExpand(
+        Utils.fromB64ToArray(prk16Byte),
+        "info",
+        32,
+        "sha256"
+      );
+      await expectAsync(f).toBeRejectedWith(new Error("prk is too small."));
     });
 
-    describe('hkdf', () => {
-        const regular256Key = 'qBUmEYtwTwwGPuw/z6bs/qYXXYNUlocFlyAuuANI8Pw=';
-        const utf8256Key = '6DfJwW1R3txgiZKkIFTvVAb7qVlG7lKcmJGJoxR2GBU=';
-        const unicode256Key = 'gejGI82xthA+nKtKmIh82kjw+ttHr+ODsUoGdu5sf0A=';
-
-        const regular512Key = 'xe5cIG6ZfwGmb1FvsOedM0XKOm21myZkjL/eDeKIqqM=';
-        const utf8512Key = 'XQMVBnxVEhlvjSFDQc77j5GDE9aorvbS0vKnjhRg0LY=';
-        const unicode512Key = '148GImrTbrjaGAe/iWEpclINM8Ehhko+9lB14+52lqc=';
-
-        testHkdf('sha256', regular256Key, utf8256Key, unicode256Key);
-        testHkdf('sha512', regular512Key, utf8512Key, unicode512Key);
+    it("should fail with outputByteSize is too large", async () => {
+      const cryptoFunctionService = getWebCryptoFunctionService();
+      const f = cryptoFunctionService.hkdfExpand(
+        Utils.fromB64ToArray(prk32Byte),
+        "info",
+        8161,
+        "sha256"
+      );
+      await expectAsync(f).toBeRejectedWith(new Error("outputByteSize is too large."));
     });
-
-    describe('hkdfExpand', () => {
-        const prk16Byte = 'criAmKtfzxanbgea5/kelQ==';
-        const prk32Byte = 'F5h4KdYQnIVH4rKH0P9CZb1GrR4n16/sJrS0PsQEn0Y=';
-        const prk64Byte = 'ssBK0mRG17VHdtsgt8yo4v25CRNpauH+0r2fwY/E9rLyaFBAOMbIeTry+' +
-            'gUJ28p8y+hFh3EI9pcrEWaNvFYonQ==';
-
-        testHkdfExpand('sha256', prk32Byte, 32, 'BnIqJlfnHm0e/2iB/15cbHyR19ARPIcWRp4oNS22CD8=');
-        testHkdfExpand('sha256', prk32Byte, 64, 'BnIqJlfnHm0e/2iB/15cbHyR19ARPIcWRp4oNS22CD9BV+' +
-            '/queOZenPNkDhmlVyL2WZ3OSU5+7ISNF5NhNfvZA==');
-        testHkdfExpand('sha512', prk64Byte, 32, 'uLWbMWodSBms5uGJ5WTRTesyW+MD7nlpCZvagvIRXlk=');
-        testHkdfExpand('sha512', prk64Byte, 64, 'uLWbMWodSBms5uGJ5WTRTesyW+MD7nlpCZvagvIRXlkY5Pv0sB+' +
-            'MqvaopmkC6sD/j89zDwTV9Ib2fpucUydO8w==');
-
-        it('should fail with prk too small', async () => {
-            const cryptoFunctionService = getWebCryptoFunctionService();
-            const f = cryptoFunctionService.hkdfExpand(Utils.fromB64ToArray(prk16Byte), 'info', 32, 'sha256');
-            await expectAsync(f).toBeRejectedWith(new Error('prk is too small.'));
-        });
-
-        it('should fail with outputByteSize is too large', async () => {
-            const cryptoFunctionService = getWebCryptoFunctionService();
-            const f = cryptoFunctionService.hkdfExpand(Utils.fromB64ToArray(prk32Byte), 'info', 8161, 'sha256');
-            await expectAsync(f).toBeRejectedWith(new Error('outputByteSize is too large.'));
-        });
+  });
+
+  describe("hash", () => {
+    const regular1Hash = "2a241604fb921fad12bf877282457268e1dccb70";
+    const utf81Hash = "85672798dc5831e96d6c48655d3d39365a9c88b6";
+    const unicode1Hash = "39c975935054a3efc805a9709b60763a823a6ad4";
+
+    const regular256Hash = "2b8e96031d352a8655d733d7a930b5ffbea69dc25cf65c7bca7dd946278908b2";
+    const utf8256Hash = "25fe8440f5b01ed113b0a0e38e721b126d2f3f77a67518c4a04fcde4e33eeb9d";
+    const unicode256Hash = "adc1c0c2afd6e92cefdf703f9b6eb2c38e0d6d1a040c83f8505c561fea58852e";
+
+    const regular512Hash =
+      "c15cf11d43bde333647e3f559ec4193bb2edeaa0e8b902772f514cdf3f785a3f49a6e02a4b87b3" +
+      "b47523271ad45b7e0aebb5cdcc1bc54815d256eb5dcb80da9d";
+    const utf8512Hash =
+      "035c31a877a291af09ed2d3a1a293e69c3e079ea2cecc00211f35e6bce10474ca3ad6e30b59e26118" +
+      "37463f20969c5bc95282965a051a88f8cdf2e166549fcdd";
+    const unicode512Hash =
+      "2b16a5561af8ad6fe414cc103fc8036492e1fc6d9aabe1b655497054f760fe0e34c5d100ac773d" +
+      "9f3030438284f22dbfa20cb2e9b019f2c98dfe38ce1ef41bae";
+
+    const regularMd5 = "5eceffa53a5fd58c44134211e2c5f522";
+    const utf8Md5 = "3abc9433c09551b939c80aa0aa3174e1";
+    const unicodeMd5 = "85ae134072c8d81257933f7045ba17ca";
+
+    testHash("sha1", regular1Hash, utf81Hash, unicode1Hash);
+    testHash("sha256", regular256Hash, utf8256Hash, unicode256Hash);
+    testHash("sha512", regular512Hash, utf8512Hash, unicode512Hash);
+    testHash("md5", regularMd5, utf8Md5, unicodeMd5);
+  });
+
+  describe("hmac", () => {
+    testHmac("sha1", Sha1Mac);
+    testHmac("sha256", Sha256Mac);
+    testHmac("sha512", Sha512Mac);
+  });
+
+  describe("compare", () => {
+    it("should successfully compare two of the same values", async () => {
+      const cryptoFunctionService = getWebCryptoFunctionService();
+      const a = new Uint8Array(2);
+      a[0] = 1;
+      a[1] = 2;
+      const equal = await cryptoFunctionService.compare(a.buffer, a.buffer);
+      expect(equal).toBe(true);
     });
 
-    describe('hash', () => {
-        const regular1Hash = '2a241604fb921fad12bf877282457268e1dccb70';
-        const utf81Hash = '85672798dc5831e96d6c48655d3d39365a9c88b6';
-        const unicode1Hash = '39c975935054a3efc805a9709b60763a823a6ad4';
-
-        const regular256Hash = '2b8e96031d352a8655d733d7a930b5ffbea69dc25cf65c7bca7dd946278908b2';
-        const utf8256Hash = '25fe8440f5b01ed113b0a0e38e721b126d2f3f77a67518c4a04fcde4e33eeb9d';
-        const unicode256Hash = 'adc1c0c2afd6e92cefdf703f9b6eb2c38e0d6d1a040c83f8505c561fea58852e';
-
-        const regular512Hash = 'c15cf11d43bde333647e3f559ec4193bb2edeaa0e8b902772f514cdf3f785a3f49a6e02a4b87b3' +
-            'b47523271ad45b7e0aebb5cdcc1bc54815d256eb5dcb80da9d';
-        const utf8512Hash = '035c31a877a291af09ed2d3a1a293e69c3e079ea2cecc00211f35e6bce10474ca3ad6e30b59e26118' +
-            '37463f20969c5bc95282965a051a88f8cdf2e166549fcdd';
-        const unicode512Hash = '2b16a5561af8ad6fe414cc103fc8036492e1fc6d9aabe1b655497054f760fe0e34c5d100ac773d' +
-            '9f3030438284f22dbfa20cb2e9b019f2c98dfe38ce1ef41bae';
-
-        const regularMd5 = '5eceffa53a5fd58c44134211e2c5f522';
-        const utf8Md5 = '3abc9433c09551b939c80aa0aa3174e1';
-        const unicodeMd5 = '85ae134072c8d81257933f7045ba17ca';
-
-        testHash('sha1', regular1Hash, utf81Hash, unicode1Hash);
-        testHash('sha256', regular256Hash, utf8256Hash, unicode256Hash);
-        testHash('sha512', regular512Hash, utf8512Hash, unicode512Hash);
-        testHash('md5', regularMd5, utf8Md5, unicodeMd5);
+    it("should successfully compare two different values of the same length", async () => {
+      const cryptoFunctionService = getWebCryptoFunctionService();
+      const a = new Uint8Array(2);
+      a[0] = 1;
+      a[1] = 2;
+      const b = new Uint8Array(2);
+      b[0] = 3;
+      b[1] = 4;
+      const equal = await cryptoFunctionService.compare(a.buffer, b.buffer);
+      expect(equal).toBe(false);
     });
 
-    describe('hmac', () => {
-        testHmac('sha1', Sha1Mac);
-        testHmac('sha256', Sha256Mac);
-        testHmac('sha512', Sha512Mac);
+    it("should successfully compare two different values of different lengths", async () => {
+      const cryptoFunctionService = getWebCryptoFunctionService();
+      const a = new Uint8Array(2);
+      a[0] = 1;
+      a[1] = 2;
+      const b = new Uint8Array(2);
+      b[0] = 3;
+      const equal = await cryptoFunctionService.compare(a.buffer, b.buffer);
+      expect(equal).toBe(false);
     });
-
-    describe('compare', () => {
-        it('should successfully compare two of the same values', async () => {
-            const cryptoFunctionService = getWebCryptoFunctionService();
-            const a = new Uint8Array(2);
-            a[0] = 1;
-            a[1] = 2;
-            const equal = await cryptoFunctionService.compare(a.buffer, a.buffer);
-            expect(equal).toBe(true);
-        });
-
-        it('should successfully compare two different values of the same length', async () => {
-            const cryptoFunctionService = getWebCryptoFunctionService();
-            const a = new Uint8Array(2);
-            a[0] = 1;
-            a[1] = 2;
-            const b = new Uint8Array(2);
-            b[0] = 3;
-            b[1] = 4;
-            const equal = await cryptoFunctionService.compare(a.buffer, b.buffer);
-            expect(equal).toBe(false);
-        });
-
-        it('should successfully compare two different values of different lengths', async () => {
-            const cryptoFunctionService = getWebCryptoFunctionService();
-            const a = new Uint8Array(2);
-            a[0] = 1;
-            a[1] = 2;
-            const b = new Uint8Array(2);
-            b[0] = 3;
-            const equal = await cryptoFunctionService.compare(a.buffer, b.buffer);
-            expect(equal).toBe(false);
-        });
+  });
+
+  describe("hmacFast", () => {
+    testHmacFast("sha1", Sha1Mac);
+    testHmacFast("sha256", Sha256Mac);
+    testHmacFast("sha512", Sha512Mac);
+  });
+
+  describe("compareFast", () => {
+    it("should successfully compare two of the same values", async () => {
+      const cryptoFunctionService = getWebCryptoFunctionService();
+      const a = new Uint8Array(2);
+      a[0] = 1;
+      a[1] = 2;
+      const aByteString = Utils.fromBufferToByteString(a.buffer);
+      const equal = await cryptoFunctionService.compareFast(aByteString, aByteString);
+      expect(equal).toBe(true);
     });
 
-    describe('hmacFast', () => {
-        testHmacFast('sha1', Sha1Mac);
-        testHmacFast('sha256', Sha256Mac);
-        testHmacFast('sha512', Sha512Mac);
+    it("should successfully compare two different values of the same length", async () => {
+      const cryptoFunctionService = getWebCryptoFunctionService();
+      const a = new Uint8Array(2);
+      a[0] = 1;
+      a[1] = 2;
+      const aByteString = Utils.fromBufferToByteString(a.buffer);
+      const b = new Uint8Array(2);
+      b[0] = 3;
+      b[1] = 4;
+      const bByteString = Utils.fromBufferToByteString(b.buffer);
+      const equal = await cryptoFunctionService.compareFast(aByteString, bByteString);
+      expect(equal).toBe(false);
     });
 
-    describe('compareFast', () => {
-        it('should successfully compare two of the same values', async () => {
-            const cryptoFunctionService = getWebCryptoFunctionService();
-            const a = new Uint8Array(2);
-            a[0] = 1;
-            a[1] = 2;
-            const aByteString = Utils.fromBufferToByteString(a.buffer);
-            const equal = await cryptoFunctionService.compareFast(aByteString, aByteString);
-            expect(equal).toBe(true);
-        });
-
-        it('should successfully compare two different values of the same length', async () => {
-            const cryptoFunctionService = getWebCryptoFunctionService();
-            const a = new Uint8Array(2);
-            a[0] = 1;
-            a[1] = 2;
-            const aByteString = Utils.fromBufferToByteString(a.buffer);
-            const b = new Uint8Array(2);
-            b[0] = 3;
-            b[1] = 4;
-            const bByteString = Utils.fromBufferToByteString(b.buffer);
-            const equal = await cryptoFunctionService.compareFast(aByteString, bByteString);
-            expect(equal).toBe(false);
-        });
-
-        it('should successfully compare two different values of different lengths', async () => {
-            const cryptoFunctionService = getWebCryptoFunctionService();
-            const a = new Uint8Array(2);
-            a[0] = 1;
-            a[1] = 2;
-            const aByteString = Utils.fromBufferToByteString(a.buffer);
-            const b = new Uint8Array(2);
-            b[0] = 3;
-            const bByteString = Utils.fromBufferToByteString(b.buffer);
-            const equal = await cryptoFunctionService.compareFast(aByteString, bByteString);
-            expect(equal).toBe(false);
-        });
+    it("should successfully compare two different values of different lengths", async () => {
+      const cryptoFunctionService = getWebCryptoFunctionService();
+      const a = new Uint8Array(2);
+      a[0] = 1;
+      a[1] = 2;
+      const aByteString = Utils.fromBufferToByteString(a.buffer);
+      const b = new Uint8Array(2);
+      b[0] = 3;
+      const bByteString = Utils.fromBufferToByteString(b.buffer);
+      const equal = await cryptoFunctionService.compareFast(aByteString, bByteString);
+      expect(equal).toBe(false);
     });
-
-    describe('aesEncrypt', () => {
-        it('should successfully encrypt data', async () => {
-            const cryptoFunctionService = getWebCryptoFunctionService();
-            const iv = makeStaticByteArray(16);
-            const key = makeStaticByteArray(32);
-            const data = Utils.fromUtf8ToArray('EncryptMe!');
-            const encValue = await cryptoFunctionService.aesEncrypt(data.buffer, iv.buffer, key.buffer);
-            expect(Utils.fromBufferToB64(encValue)).toBe('ByUF8vhyX4ddU9gcooznwA==');
-        });
-
-        it('should successfully encrypt and then decrypt data fast', async () => {
-            const cryptoFunctionService = getWebCryptoFunctionService();
-            const iv = makeStaticByteArray(16);
-            const key = makeStaticByteArray(32);
-            const value = 'EncryptMe!';
-            const data = Utils.fromUtf8ToArray(value);
-            const encValue = await cryptoFunctionService.aesEncrypt(data.buffer, iv.buffer, key.buffer);
-            const encData = Utils.fromBufferToB64(encValue);
-            const b64Iv = Utils.fromBufferToB64(iv.buffer);
-            const symKey = new SymmetricCryptoKey(key.buffer);
-            const params = cryptoFunctionService.aesDecryptFastParameters(encData, b64Iv, null, symKey);
-            const decValue = await cryptoFunctionService.aesDecryptFast(params);
-            expect(decValue).toBe(value);
-        });
-
-        it('should successfully encrypt and then decrypt data', async () => {
-            const cryptoFunctionService = getWebCryptoFunctionService();
-            const iv = makeStaticByteArray(16);
-            const key = makeStaticByteArray(32);
-            const value = 'EncryptMe!';
-            const data = Utils.fromUtf8ToArray(value);
-            const encValue = await cryptoFunctionService.aesEncrypt(data.buffer, iv.buffer, key.buffer);
-            const decValue = await cryptoFunctionService.aesDecrypt(encValue, iv.buffer, key.buffer);
-            expect(Utils.fromBufferToUtf8(decValue)).toBe(value);
-        });
+  });
+
+  describe("aesEncrypt", () => {
+    it("should successfully encrypt data", async () => {
+      const cryptoFunctionService = getWebCryptoFunctionService();
+      const iv = makeStaticByteArray(16);
+      const key = makeStaticByteArray(32);
+      const data = Utils.fromUtf8ToArray("EncryptMe!");
+      const encValue = await cryptoFunctionService.aesEncrypt(data.buffer, iv.buffer, key.buffer);
+      expect(Utils.fromBufferToB64(encValue)).toBe("ByUF8vhyX4ddU9gcooznwA==");
     });
 
-    describe('aesDecryptFast', () => {
-        it('should successfully decrypt data', async () => {
-            const cryptoFunctionService = getWebCryptoFunctionService();
-            const iv = Utils.fromBufferToB64(makeStaticByteArray(16).buffer);
-            const symKey = new SymmetricCryptoKey(makeStaticByteArray(32).buffer);
-            const data = 'ByUF8vhyX4ddU9gcooznwA==';
-            const params = cryptoFunctionService.aesDecryptFastParameters(data, iv, null, symKey);
-            const decValue = await cryptoFunctionService.aesDecryptFast(params);
-            expect(decValue).toBe('EncryptMe!');
-        });
+    it("should successfully encrypt and then decrypt data fast", async () => {
+      const cryptoFunctionService = getWebCryptoFunctionService();
+      const iv = makeStaticByteArray(16);
+      const key = makeStaticByteArray(32);
+      const value = "EncryptMe!";
+      const data = Utils.fromUtf8ToArray(value);
+      const encValue = await cryptoFunctionService.aesEncrypt(data.buffer, iv.buffer, key.buffer);
+      const encData = Utils.fromBufferToB64(encValue);
+      const b64Iv = Utils.fromBufferToB64(iv.buffer);
+      const symKey = new SymmetricCryptoKey(key.buffer);
+      const params = cryptoFunctionService.aesDecryptFastParameters(encData, b64Iv, null, symKey);
+      const decValue = await cryptoFunctionService.aesDecryptFast(params);
+      expect(decValue).toBe(value);
     });
 
-    describe('aesDecrypt', () => {
-        it('should successfully decrypt data', async () => {
-            const cryptoFunctionService = getWebCryptoFunctionService();
-            const iv = makeStaticByteArray(16);
-            const key = makeStaticByteArray(32);
-            const data = Utils.fromB64ToArray('ByUF8vhyX4ddU9gcooznwA==');
-            const decValue = await cryptoFunctionService.aesDecrypt(data.buffer, iv.buffer, key.buffer);
-            expect(Utils.fromBufferToUtf8(decValue)).toBe('EncryptMe!');
-        });
+    it("should successfully encrypt and then decrypt data", async () => {
+      const cryptoFunctionService = getWebCryptoFunctionService();
+      const iv = makeStaticByteArray(16);
+      const key = makeStaticByteArray(32);
+      const value = "EncryptMe!";
+      const data = Utils.fromUtf8ToArray(value);
+      const encValue = await cryptoFunctionService.aesEncrypt(data.buffer, iv.buffer, key.buffer);
+      const decValue = await cryptoFunctionService.aesDecrypt(encValue, iv.buffer, key.buffer);
+      expect(Utils.fromBufferToUtf8(decValue)).toBe(value);
     });
-
-    describe('rsaEncrypt', () => {
-        it('should successfully encrypt and then decrypt data', async () => {
-            const cryptoFunctionService = getWebCryptoFunctionService();
-            const pubKey = Utils.fromB64ToArray(RsaPublicKey);
-            const privKey = Utils.fromB64ToArray(RsaPrivateKey);
-            const value = 'EncryptMe!';
-            const data = Utils.fromUtf8ToArray(value);
-            const encValue = await cryptoFunctionService.rsaEncrypt(data.buffer, pubKey.buffer, 'sha1');
-            const decValue = await cryptoFunctionService.rsaDecrypt(encValue, privKey.buffer, 'sha1');
-            expect(Utils.fromBufferToUtf8(decValue)).toBe(value);
-        });
+  });
+
+  describe("aesDecryptFast", () => {
+    it("should successfully decrypt data", async () => {
+      const cryptoFunctionService = getWebCryptoFunctionService();
+      const iv = Utils.fromBufferToB64(makeStaticByteArray(16).buffer);
+      const symKey = new SymmetricCryptoKey(makeStaticByteArray(32).buffer);
+      const data = "ByUF8vhyX4ddU9gcooznwA==";
+      const params = cryptoFunctionService.aesDecryptFastParameters(data, iv, null, symKey);
+      const decValue = await cryptoFunctionService.aesDecryptFast(params);
+      expect(decValue).toBe("EncryptMe!");
     });
-
-    describe('rsaDecrypt', () => {
-        it('should successfully decrypt data', async () => {
-            const cryptoFunctionService = getWebCryptoFunctionService();
-            const privKey = Utils.fromB64ToArray(RsaPrivateKey);
-            const data = Utils.fromB64ToArray('A1/p8BQzN9UrbdYxUY2Va5+kPLyfZXF9JsZrjeEXcaclsnHurdxVAJcnbEqYMP3UXV' +
-                '4YAS/mpf+Rxe6/X0WS1boQdA0MAHSgx95hIlAraZYpiMLLiJRKeo2u8YivCdTM9V5vuAEJwf9Tof/qFsFci3sApdbATkorCT' +
-                'zFOIEPF2S1zgperEP23M01mr4dWVdYN18B32YF67xdJHMbFhp5dkQwv9CmscoWq7OE5HIfOb+JAh7BEZb+CmKhM3yWJvoR/D' +
-                '/5jcercUtK2o+XrzNrL4UQ7yLZcFz6Bfwb/j6ICYvqd/YJwXNE6dwlL57OfwJyCdw2rRYf0/qI00t9u8Iitw==');
-            const decValue = await cryptoFunctionService.rsaDecrypt(data.buffer, privKey.buffer, 'sha1');
-            expect(Utils.fromBufferToUtf8(decValue)).toBe('EncryptMe!');
-        });
+  });
+
+  describe("aesDecrypt", () => {
+    it("should successfully decrypt data", async () => {
+      const cryptoFunctionService = getWebCryptoFunctionService();
+      const iv = makeStaticByteArray(16);
+      const key = makeStaticByteArray(32);
+      const data = Utils.fromB64ToArray("ByUF8vhyX4ddU9gcooznwA==");
+      const decValue = await cryptoFunctionService.aesDecrypt(data.buffer, iv.buffer, key.buffer);
+      expect(Utils.fromBufferToUtf8(decValue)).toBe("EncryptMe!");
     });
-
-    describe('rsaExtractPublicKey', () => {
-        it('should successfully extract key', async () => {
-            const cryptoFunctionService = getWebCryptoFunctionService();
-            const privKey = Utils.fromB64ToArray(RsaPrivateKey);
-            const publicKey = await cryptoFunctionService.rsaExtractPublicKey(privKey.buffer);
-            expect(Utils.fromBufferToB64(publicKey)).toBe(RsaPublicKey);
-        });
+  });
+
+  describe("rsaEncrypt", () => {
+    it("should successfully encrypt and then decrypt data", async () => {
+      const cryptoFunctionService = getWebCryptoFunctionService();
+      const pubKey = Utils.fromB64ToArray(RsaPublicKey);
+      const privKey = Utils.fromB64ToArray(RsaPrivateKey);
+      const value = "EncryptMe!";
+      const data = Utils.fromUtf8ToArray(value);
+      const encValue = await cryptoFunctionService.rsaEncrypt(data.buffer, pubKey.buffer, "sha1");
+      const decValue = await cryptoFunctionService.rsaDecrypt(encValue, privKey.buffer, "sha1");
+      expect(Utils.fromBufferToUtf8(decValue)).toBe(value);
     });
-
-    describe('rsaGenerateKeyPair', () => {
-        testRsaGenerateKeyPair(1024);
-        testRsaGenerateKeyPair(2048);
-
-        // Generating 4096 bit keys can be slow. Commenting it out to save CI.
-        // testRsaGenerateKeyPair(4096);
+  });
+
+  describe("rsaDecrypt", () => {
+    it("should successfully decrypt data", async () => {
+      const cryptoFunctionService = getWebCryptoFunctionService();
+      const privKey = Utils.fromB64ToArray(RsaPrivateKey);
+      const data = Utils.fromB64ToArray(
+        "A1/p8BQzN9UrbdYxUY2Va5+kPLyfZXF9JsZrjeEXcaclsnHurdxVAJcnbEqYMP3UXV" +
+          "4YAS/mpf+Rxe6/X0WS1boQdA0MAHSgx95hIlAraZYpiMLLiJRKeo2u8YivCdTM9V5vuAEJwf9Tof/qFsFci3sApdbATkorCT" +
+          "zFOIEPF2S1zgperEP23M01mr4dWVdYN18B32YF67xdJHMbFhp5dkQwv9CmscoWq7OE5HIfOb+JAh7BEZb+CmKhM3yWJvoR/D" +
+          "/5jcercUtK2o+XrzNrL4UQ7yLZcFz6Bfwb/j6ICYvqd/YJwXNE6dwlL57OfwJyCdw2rRYf0/qI00t9u8Iitw=="
+      );
+      const decValue = await cryptoFunctionService.rsaDecrypt(data.buffer, privKey.buffer, "sha1");
+      expect(Utils.fromBufferToUtf8(decValue)).toBe("EncryptMe!");
     });
-
-    describe('randomBytes', () => {
-        it('should make a value of the correct length', async () => {
-            const cryptoFunctionService = getWebCryptoFunctionService();
-            const randomData = await cryptoFunctionService.randomBytes(16);
-            expect(randomData.byteLength).toBe(16);
-        });
-
-        it('should not make the same value twice', async () => {
-            const cryptoFunctionService = getWebCryptoFunctionService();
-            const randomData = await cryptoFunctionService.randomBytes(16);
-            const randomData2 = await cryptoFunctionService.randomBytes(16);
-            expect(randomData.byteLength === randomData2.byteLength && randomData !== randomData2).toBeTruthy();
-        });
+  });
+
+  describe("rsaExtractPublicKey", () => {
+    it("should successfully extract key", async () => {
+      const cryptoFunctionService = getWebCryptoFunctionService();
+      const privKey = Utils.fromB64ToArray(RsaPrivateKey);
+      const publicKey = await cryptoFunctionService.rsaExtractPublicKey(privKey.buffer);
+      expect(Utils.fromBufferToB64(publicKey)).toBe(RsaPublicKey);
     });
-});
+  });
 
-function testPbkdf2(algorithm: 'sha256' | 'sha512', regularKey: string,
-    utf8Key: string, unicodeKey: string) {
-    const regularEmail = 'user@example.com';
-    const utf8Email = 'üser@example.com';
+  describe("rsaGenerateKeyPair", () => {
+    testRsaGenerateKeyPair(1024);
+    testRsaGenerateKeyPair(2048);
 
-    const regularPassword = 'password';
-    const utf8Password = 'pǻssword';
-    const unicodePassword = '😀password🙏';
+    // Generating 4096 bit keys can be slow. Commenting it out to save CI.
+    // testRsaGenerateKeyPair(4096);
+  });
 
-    it('should create valid ' + algorithm + ' key from regular input', async () => {
-        const cryptoFunctionService = getWebCryptoFunctionService();
-        const key = await cryptoFunctionService.pbkdf2(regularPassword, regularEmail, algorithm, 5000);
-        expect(Utils.fromBufferToB64(key)).toBe(regularKey);
+  describe("randomBytes", () => {
+    it("should make a value of the correct length", async () => {
+      const cryptoFunctionService = getWebCryptoFunctionService();
+      const randomData = await cryptoFunctionService.randomBytes(16);
+      expect(randomData.byteLength).toBe(16);
     });
 
-    it('should create valid ' + algorithm + ' key from utf8 input', async () => {
-        const cryptoFunctionService = getWebCryptoFunctionService();
-        const key = await cryptoFunctionService.pbkdf2(utf8Password, utf8Email, algorithm, 5000);
-        expect(Utils.fromBufferToB64(key)).toBe(utf8Key);
-    });
-
-    it('should create valid ' + algorithm + ' key from unicode input', async () => {
-        const cryptoFunctionService = getWebCryptoFunctionService();
-        const key = await cryptoFunctionService.pbkdf2(unicodePassword, regularEmail, algorithm, 5000);
-        expect(Utils.fromBufferToB64(key)).toBe(unicodeKey);
+    it("should not make the same value twice", async () => {
+      const cryptoFunctionService = getWebCryptoFunctionService();
+      const randomData = await cryptoFunctionService.randomBytes(16);
+      const randomData2 = await cryptoFunctionService.randomBytes(16);
+      expect(
+        randomData.byteLength === randomData2.byteLength && randomData !== randomData2
+      ).toBeTruthy();
     });
+  });
+});
 
-    it('should create valid ' + algorithm + ' key from array buffer input', async () => {
-        const cryptoFunctionService = getWebCryptoFunctionService();
-        const key = await cryptoFunctionService.pbkdf2(Utils.fromUtf8ToArray(regularPassword).buffer,
-            Utils.fromUtf8ToArray(regularEmail).buffer, algorithm, 5000);
-        expect(Utils.fromBufferToB64(key)).toBe(regularKey);
-    });
+function testPbkdf2(
+  algorithm: "sha256" | "sha512",
+  regularKey: string,
+  utf8Key: string,
+  unicodeKey: string
+) {
+  const regularEmail = "user@example.com";
+  const utf8Email = "üser@example.com";
+
+  const regularPassword = "password";
+  const utf8Password = "pǻssword";
+  const unicodePassword = "😀password🙏";
+
+  it("should create valid " + algorithm + " key from regular input", async () => {
+    const cryptoFunctionService = getWebCryptoFunctionService();
+    const key = await cryptoFunctionService.pbkdf2(regularPassword, regularEmail, algorithm, 5000);
+    expect(Utils.fromBufferToB64(key)).toBe(regularKey);
+  });
+
+  it("should create valid " + algorithm + " key from utf8 input", async () => {
+    const cryptoFunctionService = getWebCryptoFunctionService();
+    const key = await cryptoFunctionService.pbkdf2(utf8Password, utf8Email, algorithm, 5000);
+    expect(Utils.fromBufferToB64(key)).toBe(utf8Key);
+  });
+
+  it("should create valid " + algorithm + " key from unicode input", async () => {
+    const cryptoFunctionService = getWebCryptoFunctionService();
+    const key = await cryptoFunctionService.pbkdf2(unicodePassword, regularEmail, algorithm, 5000);
+    expect(Utils.fromBufferToB64(key)).toBe(unicodeKey);
+  });
+
+  it("should create valid " + algorithm + " key from array buffer input", async () => {
+    const cryptoFunctionService = getWebCryptoFunctionService();
+    const key = await cryptoFunctionService.pbkdf2(
+      Utils.fromUtf8ToArray(regularPassword).buffer,
+      Utils.fromUtf8ToArray(regularEmail).buffer,
+      algorithm,
+      5000
+    );
+    expect(Utils.fromBufferToB64(key)).toBe(regularKey);
+  });
 }
 
-function testHkdf(algorithm: 'sha256' | 'sha512', regularKey: string, utf8Key: string, unicodeKey: string) {
-    const ikm = Utils.fromB64ToArray('criAmKtfzxanbgea5/kelQ==');
-
-    const regularSalt = 'salt';
-    const utf8Salt = 'üser_salt';
-    const unicodeSalt = '😀salt🙏';
-
-    const regularInfo = 'info';
-    const utf8Info = 'üser_info';
-    const unicodeInfo = '😀info🙏';
-
-    it('should create valid ' + algorithm + ' key from regular input', async () => {
-        const cryptoFunctionService = getWebCryptoFunctionService();
-        const key = await cryptoFunctionService.hkdf(ikm, regularSalt, regularInfo, 32, algorithm);
-        expect(Utils.fromBufferToB64(key)).toBe(regularKey);
-    });
-
-    it('should create valid ' + algorithm + ' key from utf8 input', async () => {
-        const cryptoFunctionService = getWebCryptoFunctionService();
-        const key = await cryptoFunctionService.hkdf(ikm, utf8Salt, utf8Info, 32, algorithm);
-        expect(Utils.fromBufferToB64(key)).toBe(utf8Key);
-    });
-
-    it('should create valid ' + algorithm + ' key from unicode input', async () => {
-        const cryptoFunctionService = getWebCryptoFunctionService();
-        const key = await cryptoFunctionService.hkdf(ikm, unicodeSalt, unicodeInfo, 32, algorithm);
-        expect(Utils.fromBufferToB64(key)).toBe(unicodeKey);
-    });
-
-    it('should create valid ' + algorithm + ' key from array buffer input', async () => {
-        const cryptoFunctionService = getWebCryptoFunctionService();
-        const key = await cryptoFunctionService.hkdf(ikm, Utils.fromUtf8ToArray(regularSalt).buffer,
-            Utils.fromUtf8ToArray(regularInfo).buffer, 32, algorithm);
-        expect(Utils.fromBufferToB64(key)).toBe(regularKey);
-    });
+function testHkdf(
+  algorithm: "sha256" | "sha512",
+  regularKey: string,
+  utf8Key: string,
+  unicodeKey: string
+) {
+  const ikm = Utils.fromB64ToArray("criAmKtfzxanbgea5/kelQ==");
+
+  const regularSalt = "salt";
+  const utf8Salt = "üser_salt";
+  const unicodeSalt = "😀salt🙏";
+
+  const regularInfo = "info";
+  const utf8Info = "üser_info";
+  const unicodeInfo = "😀info🙏";
+
+  it("should create valid " + algorithm + " key from regular input", async () => {
+    const cryptoFunctionService = getWebCryptoFunctionService();
+    const key = await cryptoFunctionService.hkdf(ikm, regularSalt, regularInfo, 32, algorithm);
+    expect(Utils.fromBufferToB64(key)).toBe(regularKey);
+  });
+
+  it("should create valid " + algorithm + " key from utf8 input", async () => {
+    const cryptoFunctionService = getWebCryptoFunctionService();
+    const key = await cryptoFunctionService.hkdf(ikm, utf8Salt, utf8Info, 32, algorithm);
+    expect(Utils.fromBufferToB64(key)).toBe(utf8Key);
+  });
+
+  it("should create valid " + algorithm + " key from unicode input", async () => {
+    const cryptoFunctionService = getWebCryptoFunctionService();
+    const key = await cryptoFunctionService.hkdf(ikm, unicodeSalt, unicodeInfo, 32, algorithm);
+    expect(Utils.fromBufferToB64(key)).toBe(unicodeKey);
+  });
+
+  it("should create valid " + algorithm + " key from array buffer input", async () => {
+    const cryptoFunctionService = getWebCryptoFunctionService();
+    const key = await cryptoFunctionService.hkdf(
+      ikm,
+      Utils.fromUtf8ToArray(regularSalt).buffer,
+      Utils.fromUtf8ToArray(regularInfo).buffer,
+      32,
+      algorithm
+    );
+    expect(Utils.fromBufferToB64(key)).toBe(regularKey);
+  });
 }
 
-function testHkdfExpand(algorithm: 'sha256' | 'sha512', b64prk: string, outputByteSize: number,
-    b64ExpectedOkm: string) {
-    const info = 'info';
-
-    it('should create valid ' + algorithm + ' ' + outputByteSize + ' byte okm', async () => {
-        const cryptoFunctionService = getWebCryptoFunctionService();
-        const okm = await cryptoFunctionService.hkdfExpand(Utils.fromB64ToArray(b64prk), info, outputByteSize,
-            algorithm);
-        expect(Utils.fromBufferToB64(okm)).toBe(b64ExpectedOkm);
-    });
+function testHkdfExpand(
+  algorithm: "sha256" | "sha512",
+  b64prk: string,
+  outputByteSize: number,
+  b64ExpectedOkm: string
+) {
+  const info = "info";
+
+  it("should create valid " + algorithm + " " + outputByteSize + " byte okm", async () => {
+    const cryptoFunctionService = getWebCryptoFunctionService();
+    const okm = await cryptoFunctionService.hkdfExpand(
+      Utils.fromB64ToArray(b64prk),
+      info,
+      outputByteSize,
+      algorithm
+    );
+    expect(Utils.fromBufferToB64(okm)).toBe(b64ExpectedOkm);
+  });
 }
 
-function testHash(algorithm: 'sha1' | 'sha256' | 'sha512' | 'md5', regularHash: string,
-    utf8Hash: string, unicodeHash: string) {
-    const regularValue = 'HashMe!!';
-    const utf8Value = 'HǻshMe!!';
-    const unicodeValue = '😀HashMe!!!🙏';
-
-    it('should create valid ' + algorithm + ' hash from regular input', async () => {
-        const cryptoFunctionService = getWebCryptoFunctionService();
-        const hash = await cryptoFunctionService.hash(regularValue, algorithm);
-        expect(Utils.fromBufferToHex(hash)).toBe(regularHash);
-    });
-
-    it('should create valid ' + algorithm + ' hash from utf8 input', async () => {
-        const cryptoFunctionService = getWebCryptoFunctionService();
-        const hash = await cryptoFunctionService.hash(utf8Value, algorithm);
-        expect(Utils.fromBufferToHex(hash)).toBe(utf8Hash);
-    });
-
-    it('should create valid ' + algorithm + ' hash from unicode input', async () => {
-        const cryptoFunctionService = getWebCryptoFunctionService();
-        const hash = await cryptoFunctionService.hash(unicodeValue, algorithm);
-        expect(Utils.fromBufferToHex(hash)).toBe(unicodeHash);
-    });
-
-    it('should create valid ' + algorithm + ' hash from array buffer input', async () => {
-        const cryptoFunctionService = getWebCryptoFunctionService();
-        const hash = await cryptoFunctionService.hash(Utils.fromUtf8ToArray(regularValue).buffer, algorithm);
-        expect(Utils.fromBufferToHex(hash)).toBe(regularHash);
-    });
+function testHash(
+  algorithm: "sha1" | "sha256" | "sha512" | "md5",
+  regularHash: string,
+  utf8Hash: string,
+  unicodeHash: string
+) {
+  const regularValue = "HashMe!!";
+  const utf8Value = "HǻshMe!!";
+  const unicodeValue = "😀HashMe!!!🙏";
+
+  it("should create valid " + algorithm + " hash from regular input", async () => {
+    const cryptoFunctionService = getWebCryptoFunctionService();
+    const hash = await cryptoFunctionService.hash(regularValue, algorithm);
+    expect(Utils.fromBufferToHex(hash)).toBe(regularHash);
+  });
+
+  it("should create valid " + algorithm + " hash from utf8 input", async () => {
+    const cryptoFunctionService = getWebCryptoFunctionService();
+    const hash = await cryptoFunctionService.hash(utf8Value, algorithm);
+    expect(Utils.fromBufferToHex(hash)).toBe(utf8Hash);
+  });
+
+  it("should create valid " + algorithm + " hash from unicode input", async () => {
+    const cryptoFunctionService = getWebCryptoFunctionService();
+    const hash = await cryptoFunctionService.hash(unicodeValue, algorithm);
+    expect(Utils.fromBufferToHex(hash)).toBe(unicodeHash);
+  });
+
+  it("should create valid " + algorithm + " hash from array buffer input", async () => {
+    const cryptoFunctionService = getWebCryptoFunctionService();
+    const hash = await cryptoFunctionService.hash(
+      Utils.fromUtf8ToArray(regularValue).buffer,
+      algorithm
+    );
+    expect(Utils.fromBufferToHex(hash)).toBe(regularHash);
+  });
 }
 
-function testHmac(algorithm: 'sha1' | 'sha256' | 'sha512', mac: string) {
-    it('should create valid ' + algorithm + ' hmac', async () => {
-        const cryptoFunctionService = getWebCryptoFunctionService();
-        const computedMac = await cryptoFunctionService.hmac(Utils.fromUtf8ToArray('SignMe!!').buffer,
-            Utils.fromUtf8ToArray('secretkey').buffer, algorithm);
-        expect(Utils.fromBufferToHex(computedMac)).toBe(mac);
-    });
+function testHmac(algorithm: "sha1" | "sha256" | "sha512", mac: string) {
+  it("should create valid " + algorithm + " hmac", async () => {
+    const cryptoFunctionService = getWebCryptoFunctionService();
+    const computedMac = await cryptoFunctionService.hmac(
+      Utils.fromUtf8ToArray("SignMe!!").buffer,
+      Utils.fromUtf8ToArray("secretkey").buffer,
+      algorithm
+    );
+    expect(Utils.fromBufferToHex(computedMac)).toBe(mac);
+  });
 }
 
-function testHmacFast(algorithm: 'sha1' | 'sha256' | 'sha512', mac: string) {
-    it('should create valid ' + algorithm + ' hmac', async () => {
-        const cryptoFunctionService = getWebCryptoFunctionService();
-        const keyByteString = Utils.fromBufferToByteString(Utils.fromUtf8ToArray('secretkey').buffer);
-        const dataByteString = Utils.fromBufferToByteString(Utils.fromUtf8ToArray('SignMe!!').buffer);
-        const computedMac = await cryptoFunctionService.hmacFast(dataByteString, keyByteString, algorithm);
-        expect(Utils.fromBufferToHex(Utils.fromByteStringToArray(computedMac).buffer)).toBe(mac);
-    });
+function testHmacFast(algorithm: "sha1" | "sha256" | "sha512", mac: string) {
+  it("should create valid " + algorithm + " hmac", async () => {
+    const cryptoFunctionService = getWebCryptoFunctionService();
+    const keyByteString = Utils.fromBufferToByteString(Utils.fromUtf8ToArray("secretkey").buffer);
+    const dataByteString = Utils.fromBufferToByteString(Utils.fromUtf8ToArray("SignMe!!").buffer);
+    const computedMac = await cryptoFunctionService.hmacFast(
+      dataByteString,
+      keyByteString,
+      algorithm
+    );
+    expect(Utils.fromBufferToHex(Utils.fromByteStringToArray(computedMac).buffer)).toBe(mac);
+  });
 }
 
 function testRsaGenerateKeyPair(length: 1024 | 2048 | 4096) {
-    it('should successfully generate a ' + length + ' bit key pair', async () => {
-        const cryptoFunctionService = getWebCryptoFunctionService();
-        const keyPair = await cryptoFunctionService.rsaGenerateKeyPair(length);
-        expect(keyPair[0] == null || keyPair[1] == null).toBe(false);
-        const publicKey = await cryptoFunctionService.rsaExtractPublicKey(keyPair[1]);
-        expect(Utils.fromBufferToB64(keyPair[0])).toBe(Utils.fromBufferToB64(publicKey));
-    }, 30000);
+  it(
+    "should successfully generate a " + length + " bit key pair",
+    async () => {
+      const cryptoFunctionService = getWebCryptoFunctionService();
+      const keyPair = await cryptoFunctionService.rsaGenerateKeyPair(length);
+      expect(keyPair[0] == null || keyPair[1] == null).toBe(false);
+      const publicKey = await cryptoFunctionService.rsaExtractPublicKey(keyPair[1]);
+      expect(Utils.fromBufferToB64(keyPair[0])).toBe(Utils.fromBufferToB64(publicKey));
+    },
+    30000
+  );
 }
 
 function getWebCryptoFunctionService() {
-    const platformUtilsMock = Substitute.for<PlatformUtilsService>();
-    platformUtilsMock.isEdge().mimicks(() => navigator.userAgent.indexOf(' Edg/') !== -1);
-    platformUtilsMock.isIE().mimicks(() => navigator.userAgent.indexOf(' Edg/') === -1 &&
-        navigator.userAgent.indexOf(' Trident/') !== -1);
-
-    return new WebCryptoFunctionService(window, platformUtilsMock);
+  const platformUtilsMock = Substitute.for<PlatformUtilsService>();
+  platformUtilsMock.isEdge().mimicks(() => navigator.userAgent.indexOf(" Edg/") !== -1);
+  platformUtilsMock
+    .isIE()
+    .mimicks(
+      () =>
+        navigator.userAgent.indexOf(" Edg/") === -1 &&
+        navigator.userAgent.indexOf(" Trident/") !== -1
+    );
+
+  return new WebCryptoFunctionService(window, platformUtilsMock);
 }
 
 function makeStaticByteArray(length: number) {
-    const arr = new Uint8Array(length);
-    for (let i = 0; i < length; i++) {
-        arr[i] = i;
-    }
-    return arr;
+  const arr = new Uint8Array(length);
+  for (let i = 0; i < length; i++) {
+    arr[i] = i;
+  }
+  return arr;
 }
diff --git a/jslib/tsconfig.json b/jslib/tsconfig.json
index e6d3af86..5e56a682 100644
--- a/jslib/tsconfig.json
+++ b/jslib/tsconfig.json
@@ -15,18 +15,10 @@
     "outDir": "dist",
     "baseUrl": ".",
     "paths": {
-      "jslib-common/*": [
-        "common/src/*"
-      ],
-      "jslib-angular/*": [
-        "angular/src/*"
-      ],
-      "jslib-electron/*": [
-        "electron/src/*"
-      ],
-      "jslib-node/*": [
-        "node/src/*"
-      ]
+      "jslib-common/*": ["common/src/*"],
+      "jslib-angular/*": ["angular/src/*"],
+      "jslib-electron/*": ["electron/src/*"],
+      "jslib-node/*": ["node/src/*"]
     },
     "plugins": [
       {
@@ -34,11 +26,6 @@
       }
     ]
   },
-  "include": [
-    "spec"
-  ],
-  "exclude": [
-    "node_modules",
-    "dist"
-  ]
+  "include": ["spec"],
+  "exclude": ["node_modules", "dist"]
 }
diff --git a/jslib/tslint.json b/jslib/tslint.json
index ff350764..4df19690 100644
--- a/jslib/tslint.json
+++ b/jslib/tslint.json
@@ -2,17 +2,17 @@
   "extends": "tslint:recommended",
   "rules": {
     "interface-name": [false],
-    "align": [ true, "statements", "members" ],
+    "align": [true, "statements", "members"],
     "ban-types": {
       "options": [
-        [ "Object", "Avoid using the `Object` type. Did you mean `object`?" ],
-        [ "Boolean", "Avoid using the `Boolean` type. Did you mean `boolean`?" ],
-        [ "Number", "Avoid using the `Number` type. Did you mean `number`?" ],
-        [ "String", "Avoid using the `String` type. Did you mean `string`?" ],
-        [ "Symbol", "Avoid using the `Symbol` type. Did you mean `symbol`?" ]
+        ["Object", "Avoid using the `Object` type. Did you mean `object`?"],
+        ["Boolean", "Avoid using the `Boolean` type. Did you mean `boolean`?"],
+        ["Number", "Avoid using the `Number` type. Did you mean `number`?"],
+        ["String", "Avoid using the `String` type. Did you mean `string`?"],
+        ["Symbol", "Avoid using the `Symbol` type. Did you mean `symbol`?"]
       ]
     },
-    "member-access": [ true, "no-public" ],
+    "member-access": [true, "no-public"],
     "member-ordering": [
       true,
       {
@@ -35,12 +35,11 @@
         ]
       }
     ],
-    "no-empty": [ true ],
+    "no-empty": [true],
     "object-literal-sort-keys": false,
-    "object-literal-shorthand": [ true, "never" ],
+    "object-literal-shorthand": [true, "never"],
     "ordered-imports": true,
     "prefer-for-of": false,
-    "quotemark": [ true, "single" ],
     "whitespace": [
       true,
       "check-branch",
@@ -52,14 +51,7 @@
       "check-type"
     ],
     "max-classes-per-file": false,
-    "arrow-parens": [
-      true,
-      "ban-single-arg-parens"
-    ],
-    "semicolon": [
-      true,
-      "always"
-    ],
+    "arrow-parens": [true],
     "trailing-comma": [
       true,
       {
diff --git a/src/404.html b/src/404.html
index eba36375..cb8883ec 100644
--- a/src/404.html
+++ b/src/404.html
@@ -41,10 +41,10 @@
                 </a>
             </p>
             <p>You can <a href="/">return to the web vault</a>, check our <a href="https://status.bitwarden.com/">status page</a>
-                or <a href="https://bitwarden.com/contact/">contact us</a>.</p>
+                or <a href="https://github.com/dani-garcia/vaultwarden">contact us</a>.</p>
         </div>
         <div class="container footer text-muted content">
-            © Copyright 2021 Bitwarden, Inc.
+            © Copyright 2021 Bitwarden, Inc. (Powered by Vaultwarden)
         </div>
     </body>
 </html>
diff --git a/src/app/app.component.ts b/src/app/app.component.ts
index f01ecb69..22fd7dc2 100644
--- a/src/app/app.component.ts
+++ b/src/app/app.component.ts
@@ -160,6 +160,10 @@ export class AppComponent implements OnDestroy, OnInit {
                         }
                         break;
                     case 'showToast':
+                        if (typeof message.text === "string" && typeof crypto.subtle === 'undefined') {
+                            message.title="This browser requires HTTPS to use the web vault";
+                            message.text="Check the Vaultwarden wiki for details on how to enable it";
+                        }
                         this.showToast(message);
                         break;
                     case 'setFullWidth':
diff --git a/src/app/layouts/footer.component.html b/src/app/layouts/footer.component.html
index b001b9e3..c1bd2ac8 100644
--- a/src/app/layouts/footer.component.html
+++ b/src/app/layouts/footer.component.html
@@ -1,7 +1,7 @@
 <div class="container footer text-muted">
     <div class="row">
         <div class="col">
-            &copy; {{year}}, Bitwarden Inc.
+            &copy; {{year}}, Bitwarden Inc. (Powered by Vaultwarden)
         </div>
         <div class="col text-center"></div>
         <div class="col text-right">
diff --git a/src/app/layouts/frontend-layout.component.html b/src/app/layouts/frontend-layout.component.html
index 4c2c4ca1..dc990b22 100644
--- a/src/app/layouts/frontend-layout.component.html
+++ b/src/app/layouts/frontend-layout.component.html
@@ -1,5 +1,5 @@
 <router-outlet></router-outlet>
 <div class="container my-5 text-muted text-center">
-    &copy; {{year}}, Bitwarden Inc.
+    &copy; {{year}}, Bitwarden Inc. (Powered by Vaultwarden)
     <br> {{'versionNumber' | i18n : version}}
 </div>
diff --git a/src/app/layouts/navbar.component.html b/src/app/layouts/navbar.component.html
index 8581e239..24ae6788 100644
--- a/src/app/layouts/navbar.component.html
+++ b/src/app/layouts/navbar.component.html
@@ -46,7 +46,7 @@
                         <i class="fa fa-fw fa-user" aria-hidden="true"></i>
                         {{'myAccount' | i18n}}
                     </a>
-                    <a class="dropdown-item" href="https://help.bitwarden.com" target="_blank" rel="noopener">
+                    <a class="dropdown-item" href="https://github.com/dani-garcia/vaultwarden" target="_blank" rel="noopener">
                         <i class="fa fa-fw fa-question-circle" aria-hidden="true"></i>
                         {{'getHelp' | i18n}}
                     </a>
diff --git a/src/app/organizations/settings/settings.component.html b/src/app/organizations/settings/settings.component.html
index 2dac5ac1..21ce9848 100644
--- a/src/app/organizations/settings/settings.component.html
+++ b/src/app/organizations/settings/settings.component.html
@@ -7,6 +7,9 @@
                     <a routerLink="account" class="list-group-item" routerLinkActive="active">
                         {{'myOrganization' | i18n}}
                     </a>
+                    <a routerLink="sso" class="list-group-item" routerLinkActive="active">
+                        {{'singleSignOn' | i18n}}
+                    </a>
                     <a routerLink="subscription" class="list-group-item" routerLinkActive="active">
                         {{'subscription' | i18n}}
                     </a>
diff --git a/src/app/organizations/vault/vault.component.ts b/src/app/organizations/vault/vault.component.ts
index 715453fd..b7c2a7b2 100644
--- a/src/app/organizations/vault/vault.component.ts
+++ b/src/app/organizations/vault/vault.component.ts
@@ -63,9 +63,7 @@ export class VaultComponent implements OnInit, OnDestroy {
         private platformUtilsService: PlatformUtilsService) { }
 
     ngOnInit() {
-        this.trashCleanupWarning = this.i18nService.t(
-            this.platformUtilsService.isSelfHost() ? 'trashCleanupWarningSelfHosted' : 'trashCleanupWarning'
-        );
+        this.trashCleanupWarning = this.i18nService.t('trashCleanupWarningSelfHosted');
 
         this.route.parent.params.pipe(first()).subscribe(async params => {
             this.organization = await this.userService.getOrganization(params.organizationId);
diff --git a/src/app/oss-routing.module.ts b/src/app/oss-routing.module.ts
index 84a056e4..88f631c2 100644
--- a/src/app/oss-routing.module.ts
+++ b/src/app/oss-routing.module.ts
@@ -35,6 +35,7 @@ import { AccountComponent as OrgAccountComponent } from './organizations/setting
 import { OrganizationBillingComponent } from './organizations/settings/organization-billing.component';
 import { OrganizationSubscriptionComponent } from './organizations/settings/organization-subscription.component';
 import { SettingsComponent as OrgSettingsComponent } from './organizations/settings/settings.component';
+import { SsoComponent as OrgSsoComponent } from './organizations/settings/sso.component';
 import {
     TwoFactorSetupComponent as OrgTwoFactorSetupComponent,
 } from './organizations/settings/two-factor-setup.component';
@@ -443,6 +444,8 @@ const routes: Routes = [
                 children: [
                     { path: '', pathMatch: 'full', redirectTo: 'account' },
                     { path: 'account', component: OrgAccountComponent, data: { titleId: 'myOrganization' } },
+                    // TODO the diff from older version was misleading here
+                    { path: 'sso', component: OrgSsoComponent, data: { titleId: 'sso' } },
                     { path: 'two-factor', component: OrgTwoFactorSetupComponent, data: { titleId: 'twoStepLogin' } },
                     {
                         path: 'billing',
diff --git a/src/app/oss.module.ts b/src/app/oss.module.ts
index 88790771..e3915e88 100644
--- a/src/app/oss.module.ts
+++ b/src/app/oss.module.ts
@@ -67,6 +67,7 @@ import { DownloadLicenseComponent } from './organizations/settings/download-lice
 import { OrganizationBillingComponent } from './organizations/settings/organization-billing.component';
 import { OrganizationSubscriptionComponent } from './organizations/settings/organization-subscription.component';
 import { SettingsComponent as OrgSettingComponent } from './organizations/settings/settings.component';
+import { SsoComponent as OrgSsoComponent } from './organizations/settings/sso.component';
 import {
     TwoFactorSetupComponent as OrgTwoFactorSetupComponent,
 } from './organizations/settings/two-factor-setup.component';
@@ -367,6 +368,7 @@ registerLocaleData(localeZhTw, 'zh-TW');
         NestedCheckboxComponent,
         OptionsComponent,
         OrgAccountComponent,
+        OrgSsoComponent,
         OrgAddEditComponent,
         OrganizationBillingComponent,
         OrganizationPlansComponent,
diff --git a/src/app/send/access.component.html b/src/app/send/access.component.html
index 84944a2b..107ad359 100644
--- a/src/app/send/access.component.html
+++ b/src/app/send/access.component.html
@@ -8,7 +8,7 @@
         </div>
         <div class="col-8" *ngIf="hideEmail">
             <app-callout type="warning" title="{{'warning' | i18n}}">
-                {{'viewSendHiddenEmailWarning' | i18n }} 
+                {{'viewSendHiddenEmailWarning' | i18n }}
                 <a href="https://bitwarden.com/help/article/receive-send/" target="_blank">{{'learnMore' | i18n}}</a>.
             </app-callout>
         </div>
@@ -82,10 +82,7 @@
         <div class="col-12 text-center mt-5 text-muted">
             <p class="mb-0">{{'sendAccessTaglineProductDesc' | i18n}}<br>
                 {{'sendAccessTaglineLearnMore' | i18n}} <a
-                    href="https://www.bitwarden.com/products/send?source=web-vault" target="_blank">Bitwarden Send</a>
-                {{'sendAccessTaglineOr' | i18n}} <a
-                    href="https://vault.bitwarden.com/#/register" target="_blank">{{'sendAccessTaglineSignUp' | i18n}}</a>
-                {{'sendAccessTaglineTryToday' | i18n}}
+                  href="https://www.bitwarden.com/products/send/" target="_blank">Bitwarden Send</a>.
             </p>
         </div>
     </div>
diff --git a/src/app/services/services.module.ts b/src/app/services/services.module.ts
index 9064202e..5a6bc9de 100644
--- a/src/app/services/services.module.ts
+++ b/src/app/services/services.module.ts
@@ -155,12 +155,23 @@ const userVerificationService = new UserVerificationService(cryptoService, i18nS
 containerService.attachToWindow(window);
 
 export function initFactory(): Function {
+    function getBaseUrl() {
+        // If the base URL is `https://bitwarden.example.com/base/path/`,
+        // `window.location.href` should have one of the following forms:
+        //
+        // - `https://bitwarden.example.com/base/path/`
+        // - `https://bitwarden.example.com/base/path/#/some/route[?queryParam=...]`
+        //
+        // We want to get to just `https://bitwarden.example.com/base/path`.
+        let baseUrl = window.location.origin;
+        baseUrl = baseUrl.replace(/#.*/, '');  // Strip off `#` and everything after.
+        baseUrl = baseUrl.replace(/\/+$/, ''); // Trim any trailing `/` chars.
+        return baseUrl;
+    }
     return async () => {
         await (storageService as HtmlStorageService).init();
 
-        const urls = process.env.URLS as Urls;
-        urls.base ??= window.location.origin;
-        environmentService.setUrls(urls, false);
+        environmentService.setUrls({ base: getBaseUrl() }, false);
 
         setTimeout(() => notificationsService.init(), 3000);
 
diff --git a/src/app/vault/vault.component.ts b/src/app/vault/vault.component.ts
index d91211eb..edd2a82d 100644
--- a/src/app/vault/vault.component.ts
+++ b/src/app/vault/vault.component.ts
@@ -81,9 +81,7 @@ export class VaultComponent implements OnInit, OnDestroy {
     async ngOnInit() {
         this.showVerifyEmail = !(await this.tokenService.getEmailVerified());
         this.showBrowserOutdated = window.navigator.userAgent.indexOf('MSIE') !== -1;
-        this.trashCleanupWarning = this.i18nService.t(
-            this.platformUtilsService.isSelfHost() ? 'trashCleanupWarningSelfHosted' : 'trashCleanupWarning'
-        );
+        this.trashCleanupWarning = this.i18nService.t('trashCleanupWarningSelfHosted');
 
         this.route.queryParams.pipe(first()).subscribe(async params => {
             await this.syncService.fullSync(false);
diff --git a/src/locales/en/messages.json b/src/locales/en/messages.json
index 74d61382..f0b8cc2e 100644
--- a/src/locales/en/messages.json
+++ b/src/locales/en/messages.json
@@ -3423,6 +3423,9 @@
   "enterpriseSingleSignOn": {
     "message": "Enterprise Single Sign-On"
   },
+  "singleSignOn": {
+    "message": "Single Sign-On"
+  },
   "ssoHandOff": {
     "message": "You may now close this tab and continue in the extension."
   },
@@ -4195,6 +4198,21 @@
   "resetPasswordManageUsers": {
     "message": "Manage Users must also be enabled with the Manage Password Reset permission"
   },
+  "callbackPath": {
+    "message": "Callback Path"
+  },
+  "signedOutCallbackPath": {
+    "message": "Signed Out Callback Path"
+  },
+  "authority": {
+    "message": "Authority"
+  },
+  "clientId": {
+    "message": "Client Id"
+  },
+  "clientSecret": {
+    "message": "Client Secret"
+  },
   "setupProvider": {
     "message": "Provider Setup"
   },
diff --git a/src/scss/styles.scss b/src/scss/styles.scss
index 45a91fe1..b6a662a3 100644
--- a/src/scss/styles.scss
+++ b/src/scss/styles.scss
@@ -55,3 +55,46 @@
 @import "./plugins";
 @import "./tables";
 @import "./toasts";
+
+/**** START Vaultwarden CHANGES ****/
+/* This combines all selectors extending it into one */
+%vw-hide { display: none !important; }
+
+/* This allows searching for the combined style in the browsers dev-tools (look into the head tag) */
+#vw-hide, head { @extend %vw-hide; }
+
+/* Hide any link pointing to billing */
+a[href$="/settings/billing"] { @extend %vw-hide; }
+
+/* Hide any link pointing to subscriptions */
+a[href$="/settings/subscription"] { @extend %vw-hide; }
+
+/* Hide any link pointing to Sponsored Families */
+a[href$="/settings/sponsored-families"] { @extend %vw-hide; }
+
+/* Hide the info box that advertises Bitwarden Send */
+app-send-info.d-block { @extend %vw-hide; }
+
+/* Hide Two-Factor menu in Organization settings */
+app-org-settings a[href$="/settings/two-factor"] { @extend %vw-hide; }
+
+/* Hide organization plans */
+app-organization-plans > form > div.form-check { @extend %vw-hide; }
+app-organization-plans > form > h2.mt-5 { @extend %vw-hide; }
+
+/* Hide the `This account is owned by a business` checkbox and label */
+#ownedBusiness, label[for^=ownedBusiness] { @extend %vw-hide; }
+
+/* Hide the radio button and label for the `Custom` org user type */
+#userTypeCustom, label[for^=userTypeCustom] {
+    @extend %vw-hide;
+}
+
+/* Hide the warning that policy config is moving to Business Portal */
+app-org-policies > app-callout { @extend %vw-hide; }
+
+/* Hide Tax Info and Form in Organization settings */
+app-org-account > div.secondary-header:nth-child(3) { @extend %vw-hide; }
+app-org-account > div.secondary-header:nth-child(3) + p { @extend %vw-hide; }
+app-org-account > div.secondary-header:nth-child(3) + p + form { @extend %vw-hide; }
+/**** END Vaultwarden CHANGES ****/
diff --git a/src/services/webPlatformUtils.service.ts b/src/services/webPlatformUtils.service.ts
index 13f754c0..c40612d8 100644
--- a/src/services/webPlatformUtils.service.ts
+++ b/src/services/webPlatformUtils.service.ts
@@ -224,11 +224,11 @@ export class WebPlatformUtilsService implements PlatformUtilsService {
     }
 
     isDev(): boolean {
-        return process.env.NODE_ENV === 'development';
+        return false;
     }
 
     isSelfHost(): boolean {
-        return process.env.ENV.toString() === 'selfhosted';
+        return false;
     }
 
     copyToClipboard(text: string, options?: any): void | boolean {
